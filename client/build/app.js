/*!
 * The MIT License (MIT)
 * 
 * Copyright (c) 2016-2018 INRA/CIRAD.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
/******/ (function(modules) { // webpackBootstrap
/******/ 	function hotDisposeChunk(chunkId) {
/******/ 		delete installedChunks[chunkId];
/******/ 	}
/******/ 	var parentHotUpdateCallback = window["webpackHotUpdate"];
/******/ 	window["webpackHotUpdate"] = 
/******/ 	function webpackHotUpdateCallback(chunkId, moreModules) { // eslint-disable-line no-unused-vars
/******/ 		hotAddUpdateChunk(chunkId, moreModules);
/******/ 		if(parentHotUpdateCallback) parentHotUpdateCallback(chunkId, moreModules);
/******/ 	} ;
/******/ 	
/******/ 	function hotDownloadUpdateChunk(chunkId) { // eslint-disable-line no-unused-vars
/******/ 		var head = document.getElementsByTagName("head")[0];
/******/ 		var script = document.createElement("script");
/******/ 		script.type = "text/javascript";
/******/ 		script.charset = "utf-8";
/******/ 		script.src = __webpack_require__.p + "" + chunkId + "." + hotCurrentHash + ".hot-update.js";
/******/ 		;
/******/ 		head.appendChild(script);
/******/ 	}
/******/ 	
/******/ 	function hotDownloadManifest(requestTimeout) { // eslint-disable-line no-unused-vars
/******/ 		requestTimeout = requestTimeout || 10000;
/******/ 		return new Promise(function(resolve, reject) {
/******/ 			if(typeof XMLHttpRequest === "undefined")
/******/ 				return reject(new Error("No browser support"));
/******/ 			try {
/******/ 				var request = new XMLHttpRequest();
/******/ 				var requestPath = __webpack_require__.p + "" + hotCurrentHash + ".hot-update.json";
/******/ 				request.open("GET", requestPath, true);
/******/ 				request.timeout = requestTimeout;
/******/ 				request.send(null);
/******/ 			} catch(err) {
/******/ 				return reject(err);
/******/ 			}
/******/ 			request.onreadystatechange = function() {
/******/ 				if(request.readyState !== 4) return;
/******/ 				if(request.status === 0) {
/******/ 					// timeout
/******/ 					reject(new Error("Manifest request to " + requestPath + " timed out."));
/******/ 				} else if(request.status === 404) {
/******/ 					// no update available
/******/ 					resolve();
/******/ 				} else if(request.status !== 200 && request.status !== 304) {
/******/ 					// other failure
/******/ 					reject(new Error("Manifest request to " + requestPath + " failed."));
/******/ 				} else {
/******/ 					// success
/******/ 					try {
/******/ 						var update = JSON.parse(request.responseText);
/******/ 					} catch(e) {
/******/ 						reject(e);
/******/ 						return;
/******/ 					}
/******/ 					resolve(update);
/******/ 				}
/******/ 			};
/******/ 		});
/******/ 	}
/******/
/******/ 	
/******/ 	
/******/ 	var hotApplyOnUpdate = true;
/******/ 	var hotCurrentHash = "e3145c0a29505eb527c8"; // eslint-disable-line no-unused-vars
/******/ 	var hotRequestTimeout = 10000;
/******/ 	var hotCurrentModuleData = {};
/******/ 	var hotCurrentChildModule; // eslint-disable-line no-unused-vars
/******/ 	var hotCurrentParents = []; // eslint-disable-line no-unused-vars
/******/ 	var hotCurrentParentsTemp = []; // eslint-disable-line no-unused-vars
/******/ 	
/******/ 	function hotCreateRequire(moduleId) { // eslint-disable-line no-unused-vars
/******/ 		var me = installedModules[moduleId];
/******/ 		if(!me) return __webpack_require__;
/******/ 		var fn = function(request) {
/******/ 			if(me.hot.active) {
/******/ 				if(installedModules[request]) {
/******/ 					if(installedModules[request].parents.indexOf(moduleId) < 0)
/******/ 						installedModules[request].parents.push(moduleId);
/******/ 				} else {
/******/ 					hotCurrentParents = [moduleId];
/******/ 					hotCurrentChildModule = request;
/******/ 				}
/******/ 				if(me.children.indexOf(request) < 0)
/******/ 					me.children.push(request);
/******/ 			} else {
/******/ 				console.warn("[HMR] unexpected require(" + request + ") from disposed module " + moduleId);
/******/ 				hotCurrentParents = [];
/******/ 			}
/******/ 			return __webpack_require__(request);
/******/ 		};
/******/ 		var ObjectFactory = function ObjectFactory(name) {
/******/ 			return {
/******/ 				configurable: true,
/******/ 				enumerable: true,
/******/ 				get: function() {
/******/ 					return __webpack_require__[name];
/******/ 				},
/******/ 				set: function(value) {
/******/ 					__webpack_require__[name] = value;
/******/ 				}
/******/ 			};
/******/ 		};
/******/ 		for(var name in __webpack_require__) {
/******/ 			if(Object.prototype.hasOwnProperty.call(__webpack_require__, name) && name !== "e") {
/******/ 				Object.defineProperty(fn, name, ObjectFactory(name));
/******/ 			}
/******/ 		}
/******/ 		fn.e = function(chunkId) {
/******/ 			if(hotStatus === "ready")
/******/ 				hotSetStatus("prepare");
/******/ 			hotChunksLoading++;
/******/ 			return __webpack_require__.e(chunkId).then(finishChunkLoading, function(err) {
/******/ 				finishChunkLoading();
/******/ 				throw err;
/******/ 			});
/******/ 	
/******/ 			function finishChunkLoading() {
/******/ 				hotChunksLoading--;
/******/ 				if(hotStatus === "prepare") {
/******/ 					if(!hotWaitingFilesMap[chunkId]) {
/******/ 						hotEnsureUpdateChunk(chunkId);
/******/ 					}
/******/ 					if(hotChunksLoading === 0 && hotWaitingFiles === 0) {
/******/ 						hotUpdateDownloaded();
/******/ 					}
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 		return fn;
/******/ 	}
/******/ 	
/******/ 	function hotCreateModule(moduleId) { // eslint-disable-line no-unused-vars
/******/ 		var hot = {
/******/ 			// private stuff
/******/ 			_acceptedDependencies: {},
/******/ 			_declinedDependencies: {},
/******/ 			_selfAccepted: false,
/******/ 			_selfDeclined: false,
/******/ 			_disposeHandlers: [],
/******/ 			_main: hotCurrentChildModule !== moduleId,
/******/ 	
/******/ 			// Module API
/******/ 			active: true,
/******/ 			accept: function(dep, callback) {
/******/ 				if(typeof dep === "undefined")
/******/ 					hot._selfAccepted = true;
/******/ 				else if(typeof dep === "function")
/******/ 					hot._selfAccepted = dep;
/******/ 				else if(typeof dep === "object")
/******/ 					for(var i = 0; i < dep.length; i++)
/******/ 						hot._acceptedDependencies[dep[i]] = callback || function() {};
/******/ 				else
/******/ 					hot._acceptedDependencies[dep] = callback || function() {};
/******/ 			},
/******/ 			decline: function(dep) {
/******/ 				if(typeof dep === "undefined")
/******/ 					hot._selfDeclined = true;
/******/ 				else if(typeof dep === "object")
/******/ 					for(var i = 0; i < dep.length; i++)
/******/ 						hot._declinedDependencies[dep[i]] = true;
/******/ 				else
/******/ 					hot._declinedDependencies[dep] = true;
/******/ 			},
/******/ 			dispose: function(callback) {
/******/ 				hot._disposeHandlers.push(callback);
/******/ 			},
/******/ 			addDisposeHandler: function(callback) {
/******/ 				hot._disposeHandlers.push(callback);
/******/ 			},
/******/ 			removeDisposeHandler: function(callback) {
/******/ 				var idx = hot._disposeHandlers.indexOf(callback);
/******/ 				if(idx >= 0) hot._disposeHandlers.splice(idx, 1);
/******/ 			},
/******/ 	
/******/ 			// Management API
/******/ 			check: hotCheck,
/******/ 			apply: hotApply,
/******/ 			status: function(l) {
/******/ 				if(!l) return hotStatus;
/******/ 				hotStatusHandlers.push(l);
/******/ 			},
/******/ 			addStatusHandler: function(l) {
/******/ 				hotStatusHandlers.push(l);
/******/ 			},
/******/ 			removeStatusHandler: function(l) {
/******/ 				var idx = hotStatusHandlers.indexOf(l);
/******/ 				if(idx >= 0) hotStatusHandlers.splice(idx, 1);
/******/ 			},
/******/ 	
/******/ 			//inherit from previous dispose call
/******/ 			data: hotCurrentModuleData[moduleId]
/******/ 		};
/******/ 		hotCurrentChildModule = undefined;
/******/ 		return hot;
/******/ 	}
/******/ 	
/******/ 	var hotStatusHandlers = [];
/******/ 	var hotStatus = "idle";
/******/ 	
/******/ 	function hotSetStatus(newStatus) {
/******/ 		hotStatus = newStatus;
/******/ 		for(var i = 0; i < hotStatusHandlers.length; i++)
/******/ 			hotStatusHandlers[i].call(null, newStatus);
/******/ 	}
/******/ 	
/******/ 	// while downloading
/******/ 	var hotWaitingFiles = 0;
/******/ 	var hotChunksLoading = 0;
/******/ 	var hotWaitingFilesMap = {};
/******/ 	var hotRequestedFilesMap = {};
/******/ 	var hotAvailableFilesMap = {};
/******/ 	var hotDeferred;
/******/ 	
/******/ 	// The update info
/******/ 	var hotUpdate, hotUpdateNewHash;
/******/ 	
/******/ 	function toModuleId(id) {
/******/ 		var isNumber = (+id) + "" === id;
/******/ 		return isNumber ? +id : id;
/******/ 	}
/******/ 	
/******/ 	function hotCheck(apply) {
/******/ 		if(hotStatus !== "idle") throw new Error("check() is only allowed in idle status");
/******/ 		hotApplyOnUpdate = apply;
/******/ 		hotSetStatus("check");
/******/ 		return hotDownloadManifest(hotRequestTimeout).then(function(update) {
/******/ 			if(!update) {
/******/ 				hotSetStatus("idle");
/******/ 				return null;
/******/ 			}
/******/ 			hotRequestedFilesMap = {};
/******/ 			hotWaitingFilesMap = {};
/******/ 			hotAvailableFilesMap = update.c;
/******/ 			hotUpdateNewHash = update.h;
/******/ 	
/******/ 			hotSetStatus("prepare");
/******/ 			var promise = new Promise(function(resolve, reject) {
/******/ 				hotDeferred = {
/******/ 					resolve: resolve,
/******/ 					reject: reject
/******/ 				};
/******/ 			});
/******/ 			hotUpdate = {};
/******/ 			var chunkId = 0;
/******/ 			{ // eslint-disable-line no-lone-blocks
/******/ 				/*globals chunkId */
/******/ 				hotEnsureUpdateChunk(chunkId);
/******/ 			}
/******/ 			if(hotStatus === "prepare" && hotChunksLoading === 0 && hotWaitingFiles === 0) {
/******/ 				hotUpdateDownloaded();
/******/ 			}
/******/ 			return promise;
/******/ 		});
/******/ 	}
/******/ 	
/******/ 	function hotAddUpdateChunk(chunkId, moreModules) { // eslint-disable-line no-unused-vars
/******/ 		if(!hotAvailableFilesMap[chunkId] || !hotRequestedFilesMap[chunkId])
/******/ 			return;
/******/ 		hotRequestedFilesMap[chunkId] = false;
/******/ 		for(var moduleId in moreModules) {
/******/ 			if(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {
/******/ 				hotUpdate[moduleId] = moreModules[moduleId];
/******/ 			}
/******/ 		}
/******/ 		if(--hotWaitingFiles === 0 && hotChunksLoading === 0) {
/******/ 			hotUpdateDownloaded();
/******/ 		}
/******/ 	}
/******/ 	
/******/ 	function hotEnsureUpdateChunk(chunkId) {
/******/ 		if(!hotAvailableFilesMap[chunkId]) {
/******/ 			hotWaitingFilesMap[chunkId] = true;
/******/ 		} else {
/******/ 			hotRequestedFilesMap[chunkId] = true;
/******/ 			hotWaitingFiles++;
/******/ 			hotDownloadUpdateChunk(chunkId);
/******/ 		}
/******/ 	}
/******/ 	
/******/ 	function hotUpdateDownloaded() {
/******/ 		hotSetStatus("ready");
/******/ 		var deferred = hotDeferred;
/******/ 		hotDeferred = null;
/******/ 		if(!deferred) return;
/******/ 		if(hotApplyOnUpdate) {
/******/ 			// Wrap deferred object in Promise to mark it as a well-handled Promise to
/******/ 			// avoid triggering uncaught exception warning in Chrome.
/******/ 			// See https://bugs.chromium.org/p/chromium/issues/detail?id=465666
/******/ 			Promise.resolve().then(function() {
/******/ 				return hotApply(hotApplyOnUpdate);
/******/ 			}).then(
/******/ 				function(result) {
/******/ 					deferred.resolve(result);
/******/ 				},
/******/ 				function(err) {
/******/ 					deferred.reject(err);
/******/ 				}
/******/ 			);
/******/ 		} else {
/******/ 			var outdatedModules = [];
/******/ 			for(var id in hotUpdate) {
/******/ 				if(Object.prototype.hasOwnProperty.call(hotUpdate, id)) {
/******/ 					outdatedModules.push(toModuleId(id));
/******/ 				}
/******/ 			}
/******/ 			deferred.resolve(outdatedModules);
/******/ 		}
/******/ 	}
/******/ 	
/******/ 	function hotApply(options) {
/******/ 		if(hotStatus !== "ready") throw new Error("apply() is only allowed in ready status");
/******/ 		options = options || {};
/******/ 	
/******/ 		var cb;
/******/ 		var i;
/******/ 		var j;
/******/ 		var module;
/******/ 		var moduleId;
/******/ 	
/******/ 		function getAffectedStuff(updateModuleId) {
/******/ 			var outdatedModules = [updateModuleId];
/******/ 			var outdatedDependencies = {};
/******/ 	
/******/ 			var queue = outdatedModules.slice().map(function(id) {
/******/ 				return {
/******/ 					chain: [id],
/******/ 					id: id
/******/ 				};
/******/ 			});
/******/ 			while(queue.length > 0) {
/******/ 				var queueItem = queue.pop();
/******/ 				var moduleId = queueItem.id;
/******/ 				var chain = queueItem.chain;
/******/ 				module = installedModules[moduleId];
/******/ 				if(!module || module.hot._selfAccepted)
/******/ 					continue;
/******/ 				if(module.hot._selfDeclined) {
/******/ 					return {
/******/ 						type: "self-declined",
/******/ 						chain: chain,
/******/ 						moduleId: moduleId
/******/ 					};
/******/ 				}
/******/ 				if(module.hot._main) {
/******/ 					return {
/******/ 						type: "unaccepted",
/******/ 						chain: chain,
/******/ 						moduleId: moduleId
/******/ 					};
/******/ 				}
/******/ 				for(var i = 0; i < module.parents.length; i++) {
/******/ 					var parentId = module.parents[i];
/******/ 					var parent = installedModules[parentId];
/******/ 					if(!parent) continue;
/******/ 					if(parent.hot._declinedDependencies[moduleId]) {
/******/ 						return {
/******/ 							type: "declined",
/******/ 							chain: chain.concat([parentId]),
/******/ 							moduleId: moduleId,
/******/ 							parentId: parentId
/******/ 						};
/******/ 					}
/******/ 					if(outdatedModules.indexOf(parentId) >= 0) continue;
/******/ 					if(parent.hot._acceptedDependencies[moduleId]) {
/******/ 						if(!outdatedDependencies[parentId])
/******/ 							outdatedDependencies[parentId] = [];
/******/ 						addAllToSet(outdatedDependencies[parentId], [moduleId]);
/******/ 						continue;
/******/ 					}
/******/ 					delete outdatedDependencies[parentId];
/******/ 					outdatedModules.push(parentId);
/******/ 					queue.push({
/******/ 						chain: chain.concat([parentId]),
/******/ 						id: parentId
/******/ 					});
/******/ 				}
/******/ 			}
/******/ 	
/******/ 			return {
/******/ 				type: "accepted",
/******/ 				moduleId: updateModuleId,
/******/ 				outdatedModules: outdatedModules,
/******/ 				outdatedDependencies: outdatedDependencies
/******/ 			};
/******/ 		}
/******/ 	
/******/ 		function addAllToSet(a, b) {
/******/ 			for(var i = 0; i < b.length; i++) {
/******/ 				var item = b[i];
/******/ 				if(a.indexOf(item) < 0)
/******/ 					a.push(item);
/******/ 			}
/******/ 		}
/******/ 	
/******/ 		// at begin all updates modules are outdated
/******/ 		// the "outdated" status can propagate to parents if they don't accept the children
/******/ 		var outdatedDependencies = {};
/******/ 		var outdatedModules = [];
/******/ 		var appliedUpdate = {};
/******/ 	
/******/ 		var warnUnexpectedRequire = function warnUnexpectedRequire() {
/******/ 			console.warn("[HMR] unexpected require(" + result.moduleId + ") to disposed module");
/******/ 		};
/******/ 	
/******/ 		for(var id in hotUpdate) {
/******/ 			if(Object.prototype.hasOwnProperty.call(hotUpdate, id)) {
/******/ 				moduleId = toModuleId(id);
/******/ 				var result;
/******/ 				if(hotUpdate[id]) {
/******/ 					result = getAffectedStuff(moduleId);
/******/ 				} else {
/******/ 					result = {
/******/ 						type: "disposed",
/******/ 						moduleId: id
/******/ 					};
/******/ 				}
/******/ 				var abortError = false;
/******/ 				var doApply = false;
/******/ 				var doDispose = false;
/******/ 				var chainInfo = "";
/******/ 				if(result.chain) {
/******/ 					chainInfo = "\nUpdate propagation: " + result.chain.join(" -> ");
/******/ 				}
/******/ 				switch(result.type) {
/******/ 					case "self-declined":
/******/ 						if(options.onDeclined)
/******/ 							options.onDeclined(result);
/******/ 						if(!options.ignoreDeclined)
/******/ 							abortError = new Error("Aborted because of self decline: " + result.moduleId + chainInfo);
/******/ 						break;
/******/ 					case "declined":
/******/ 						if(options.onDeclined)
/******/ 							options.onDeclined(result);
/******/ 						if(!options.ignoreDeclined)
/******/ 							abortError = new Error("Aborted because of declined dependency: " + result.moduleId + " in " + result.parentId + chainInfo);
/******/ 						break;
/******/ 					case "unaccepted":
/******/ 						if(options.onUnaccepted)
/******/ 							options.onUnaccepted(result);
/******/ 						if(!options.ignoreUnaccepted)
/******/ 							abortError = new Error("Aborted because " + moduleId + " is not accepted" + chainInfo);
/******/ 						break;
/******/ 					case "accepted":
/******/ 						if(options.onAccepted)
/******/ 							options.onAccepted(result);
/******/ 						doApply = true;
/******/ 						break;
/******/ 					case "disposed":
/******/ 						if(options.onDisposed)
/******/ 							options.onDisposed(result);
/******/ 						doDispose = true;
/******/ 						break;
/******/ 					default:
/******/ 						throw new Error("Unexception type " + result.type);
/******/ 				}
/******/ 				if(abortError) {
/******/ 					hotSetStatus("abort");
/******/ 					return Promise.reject(abortError);
/******/ 				}
/******/ 				if(doApply) {
/******/ 					appliedUpdate[moduleId] = hotUpdate[moduleId];
/******/ 					addAllToSet(outdatedModules, result.outdatedModules);
/******/ 					for(moduleId in result.outdatedDependencies) {
/******/ 						if(Object.prototype.hasOwnProperty.call(result.outdatedDependencies, moduleId)) {
/******/ 							if(!outdatedDependencies[moduleId])
/******/ 								outdatedDependencies[moduleId] = [];
/******/ 							addAllToSet(outdatedDependencies[moduleId], result.outdatedDependencies[moduleId]);
/******/ 						}
/******/ 					}
/******/ 				}
/******/ 				if(doDispose) {
/******/ 					addAllToSet(outdatedModules, [result.moduleId]);
/******/ 					appliedUpdate[moduleId] = warnUnexpectedRequire;
/******/ 				}
/******/ 			}
/******/ 		}
/******/ 	
/******/ 		// Store self accepted outdated modules to require them later by the module system
/******/ 		var outdatedSelfAcceptedModules = [];
/******/ 		for(i = 0; i < outdatedModules.length; i++) {
/******/ 			moduleId = outdatedModules[i];
/******/ 			if(installedModules[moduleId] && installedModules[moduleId].hot._selfAccepted)
/******/ 				outdatedSelfAcceptedModules.push({
/******/ 					module: moduleId,
/******/ 					errorHandler: installedModules[moduleId].hot._selfAccepted
/******/ 				});
/******/ 		}
/******/ 	
/******/ 		// Now in "dispose" phase
/******/ 		hotSetStatus("dispose");
/******/ 		Object.keys(hotAvailableFilesMap).forEach(function(chunkId) {
/******/ 			if(hotAvailableFilesMap[chunkId] === false) {
/******/ 				hotDisposeChunk(chunkId);
/******/ 			}
/******/ 		});
/******/ 	
/******/ 		var idx;
/******/ 		var queue = outdatedModules.slice();
/******/ 		while(queue.length > 0) {
/******/ 			moduleId = queue.pop();
/******/ 			module = installedModules[moduleId];
/******/ 			if(!module) continue;
/******/ 	
/******/ 			var data = {};
/******/ 	
/******/ 			// Call dispose handlers
/******/ 			var disposeHandlers = module.hot._disposeHandlers;
/******/ 			for(j = 0; j < disposeHandlers.length; j++) {
/******/ 				cb = disposeHandlers[j];
/******/ 				cb(data);
/******/ 			}
/******/ 			hotCurrentModuleData[moduleId] = data;
/******/ 	
/******/ 			// disable module (this disables requires from this module)
/******/ 			module.hot.active = false;
/******/ 	
/******/ 			// remove module from cache
/******/ 			delete installedModules[moduleId];
/******/ 	
/******/ 			// when disposing there is no need to call dispose handler
/******/ 			delete outdatedDependencies[moduleId];
/******/ 	
/******/ 			// remove "parents" references from all children
/******/ 			for(j = 0; j < module.children.length; j++) {
/******/ 				var child = installedModules[module.children[j]];
/******/ 				if(!child) continue;
/******/ 				idx = child.parents.indexOf(moduleId);
/******/ 				if(idx >= 0) {
/******/ 					child.parents.splice(idx, 1);
/******/ 				}
/******/ 			}
/******/ 		}
/******/ 	
/******/ 		// remove outdated dependency from module children
/******/ 		var dependency;
/******/ 		var moduleOutdatedDependencies;
/******/ 		for(moduleId in outdatedDependencies) {
/******/ 			if(Object.prototype.hasOwnProperty.call(outdatedDependencies, moduleId)) {
/******/ 				module = installedModules[moduleId];
/******/ 				if(module) {
/******/ 					moduleOutdatedDependencies = outdatedDependencies[moduleId];
/******/ 					for(j = 0; j < moduleOutdatedDependencies.length; j++) {
/******/ 						dependency = moduleOutdatedDependencies[j];
/******/ 						idx = module.children.indexOf(dependency);
/******/ 						if(idx >= 0) module.children.splice(idx, 1);
/******/ 					}
/******/ 				}
/******/ 			}
/******/ 		}
/******/ 	
/******/ 		// Not in "apply" phase
/******/ 		hotSetStatus("apply");
/******/ 	
/******/ 		hotCurrentHash = hotUpdateNewHash;
/******/ 	
/******/ 		// insert new code
/******/ 		for(moduleId in appliedUpdate) {
/******/ 			if(Object.prototype.hasOwnProperty.call(appliedUpdate, moduleId)) {
/******/ 				modules[moduleId] = appliedUpdate[moduleId];
/******/ 			}
/******/ 		}
/******/ 	
/******/ 		// call accept handlers
/******/ 		var error = null;
/******/ 		for(moduleId in outdatedDependencies) {
/******/ 			if(Object.prototype.hasOwnProperty.call(outdatedDependencies, moduleId)) {
/******/ 				module = installedModules[moduleId];
/******/ 				if(module) {
/******/ 					moduleOutdatedDependencies = outdatedDependencies[moduleId];
/******/ 					var callbacks = [];
/******/ 					for(i = 0; i < moduleOutdatedDependencies.length; i++) {
/******/ 						dependency = moduleOutdatedDependencies[i];
/******/ 						cb = module.hot._acceptedDependencies[dependency];
/******/ 						if(cb) {
/******/ 							if(callbacks.indexOf(cb) >= 0) continue;
/******/ 							callbacks.push(cb);
/******/ 						}
/******/ 					}
/******/ 					for(i = 0; i < callbacks.length; i++) {
/******/ 						cb = callbacks[i];
/******/ 						try {
/******/ 							cb(moduleOutdatedDependencies);
/******/ 						} catch(err) {
/******/ 							if(options.onErrored) {
/******/ 								options.onErrored({
/******/ 									type: "accept-errored",
/******/ 									moduleId: moduleId,
/******/ 									dependencyId: moduleOutdatedDependencies[i],
/******/ 									error: err
/******/ 								});
/******/ 							}
/******/ 							if(!options.ignoreErrored) {
/******/ 								if(!error)
/******/ 									error = err;
/******/ 							}
/******/ 						}
/******/ 					}
/******/ 				}
/******/ 			}
/******/ 		}
/******/ 	
/******/ 		// Load self accepted modules
/******/ 		for(i = 0; i < outdatedSelfAcceptedModules.length; i++) {
/******/ 			var item = outdatedSelfAcceptedModules[i];
/******/ 			moduleId = item.module;
/******/ 			hotCurrentParents = [moduleId];
/******/ 			try {
/******/ 				__webpack_require__(moduleId);
/******/ 			} catch(err) {
/******/ 				if(typeof item.errorHandler === "function") {
/******/ 					try {
/******/ 						item.errorHandler(err);
/******/ 					} catch(err2) {
/******/ 						if(options.onErrored) {
/******/ 							options.onErrored({
/******/ 								type: "self-accept-error-handler-errored",
/******/ 								moduleId: moduleId,
/******/ 								error: err2,
/******/ 								orginalError: err, // TODO remove in webpack 4
/******/ 								originalError: err
/******/ 							});
/******/ 						}
/******/ 						if(!options.ignoreErrored) {
/******/ 							if(!error)
/******/ 								error = err2;
/******/ 						}
/******/ 						if(!error)
/******/ 							error = err;
/******/ 					}
/******/ 				} else {
/******/ 					if(options.onErrored) {
/******/ 						options.onErrored({
/******/ 							type: "self-accept-errored",
/******/ 							moduleId: moduleId,
/******/ 							error: err
/******/ 						});
/******/ 					}
/******/ 					if(!options.ignoreErrored) {
/******/ 						if(!error)
/******/ 							error = err;
/******/ 					}
/******/ 				}
/******/ 			}
/******/ 		}
/******/ 	
/******/ 		// handle errors in accept handlers and self accepted module load
/******/ 		if(error) {
/******/ 			hotSetStatus("fail");
/******/ 			return Promise.reject(error);
/******/ 		}
/******/ 	
/******/ 		hotSetStatus("idle");
/******/ 		return new Promise(function(resolve) {
/******/ 			resolve(outdatedModules);
/******/ 		});
/******/ 	}
/******/
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {},
/******/ 			hot: hotCreateModule(moduleId),
/******/ 			parents: (hotCurrentParentsTemp = hotCurrentParents, hotCurrentParents = [], hotCurrentParentsTemp),
/******/ 			children: []
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, hotCreateRequire(moduleId));
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "/build";
/******/
/******/ 	// __webpack_hash__
/******/ 	__webpack_require__.h = function() { return hotCurrentHash; };
/******/
/******/ 	// Load entry module and return exports
/******/ 	return hotCreateRequire(286)(__webpack_require__.s = 286);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;//     Underscore.js 1.8.3
//     http://underscorejs.org
//     (c) 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Underscore may be freely distributed under the MIT license.

(function() {

  // Baseline setup
  // --------------

  // Establish the root object, `window` in the browser, or `exports` on the server.
  var root = this;

  // Save the previous value of the `_` variable.
  var previousUnderscore = root._;

  // Save bytes in the minified (but not gzipped) version:
  var ArrayProto = Array.prototype, ObjProto = Object.prototype, FuncProto = Function.prototype;

  // Create quick reference variables for speed access to core prototypes.
  var
    push             = ArrayProto.push,
    slice            = ArrayProto.slice,
    toString         = ObjProto.toString,
    hasOwnProperty   = ObjProto.hasOwnProperty;

  // All **ECMAScript 5** native function implementations that we hope to use
  // are declared here.
  var
    nativeIsArray      = Array.isArray,
    nativeKeys         = Object.keys,
    nativeBind         = FuncProto.bind,
    nativeCreate       = Object.create;

  // Naked function reference for surrogate-prototype-swapping.
  var Ctor = function(){};

  // Create a safe reference to the Underscore object for use below.
  var _ = function(obj) {
    if (obj instanceof _) return obj;
    if (!(this instanceof _)) return new _(obj);
    this._wrapped = obj;
  };

  // Export the Underscore object for **Node.js**, with
  // backwards-compatibility for the old `require()` API. If we're in
  // the browser, add `_` as a global object.
  if (true) {
    if (typeof module !== 'undefined' && module.exports) {
      exports = module.exports = _;
    }
    exports._ = _;
  } else {
    root._ = _;
  }

  // Current version.
  _.VERSION = '1.8.3';

  // Internal function that returns an efficient (for current engines) version
  // of the passed-in callback, to be repeatedly applied in other Underscore
  // functions.
  var optimizeCb = function(func, context, argCount) {
    if (context === void 0) return func;
    switch (argCount == null ? 3 : argCount) {
      case 1: return function(value) {
        return func.call(context, value);
      };
      case 2: return function(value, other) {
        return func.call(context, value, other);
      };
      case 3: return function(value, index, collection) {
        return func.call(context, value, index, collection);
      };
      case 4: return function(accumulator, value, index, collection) {
        return func.call(context, accumulator, value, index, collection);
      };
    }
    return function() {
      return func.apply(context, arguments);
    };
  };

  // A mostly-internal function to generate callbacks that can be applied
  // to each element in a collection, returning the desired result — either
  // identity, an arbitrary callback, a property matcher, or a property accessor.
  var cb = function(value, context, argCount) {
    if (value == null) return _.identity;
    if (_.isFunction(value)) return optimizeCb(value, context, argCount);
    if (_.isObject(value)) return _.matcher(value);
    return _.property(value);
  };
  _.iteratee = function(value, context) {
    return cb(value, context, Infinity);
  };

  // An internal function for creating assigner functions.
  var createAssigner = function(keysFunc, undefinedOnly) {
    return function(obj) {
      var length = arguments.length;
      if (length < 2 || obj == null) return obj;
      for (var index = 1; index < length; index++) {
        var source = arguments[index],
            keys = keysFunc(source),
            l = keys.length;
        for (var i = 0; i < l; i++) {
          var key = keys[i];
          if (!undefinedOnly || obj[key] === void 0) obj[key] = source[key];
        }
      }
      return obj;
    };
  };

  // An internal function for creating a new object that inherits from another.
  var baseCreate = function(prototype) {
    if (!_.isObject(prototype)) return {};
    if (nativeCreate) return nativeCreate(prototype);
    Ctor.prototype = prototype;
    var result = new Ctor;
    Ctor.prototype = null;
    return result;
  };

  var property = function(key) {
    return function(obj) {
      return obj == null ? void 0 : obj[key];
    };
  };

  // Helper for collection methods to determine whether a collection
  // should be iterated as an array or as an object
  // Related: http://people.mozilla.org/~jorendorff/es6-draft.html#sec-tolength
  // Avoids a very nasty iOS 8 JIT bug on ARM-64. #2094
  var MAX_ARRAY_INDEX = Math.pow(2, 53) - 1;
  var getLength = property('length');
  var isArrayLike = function(collection) {
    var length = getLength(collection);
    return typeof length == 'number' && length >= 0 && length <= MAX_ARRAY_INDEX;
  };

  // Collection Functions
  // --------------------

  // The cornerstone, an `each` implementation, aka `forEach`.
  // Handles raw objects in addition to array-likes. Treats all
  // sparse array-likes as if they were dense.
  _.each = _.forEach = function(obj, iteratee, context) {
    iteratee = optimizeCb(iteratee, context);
    var i, length;
    if (isArrayLike(obj)) {
      for (i = 0, length = obj.length; i < length; i++) {
        iteratee(obj[i], i, obj);
      }
    } else {
      var keys = _.keys(obj);
      for (i = 0, length = keys.length; i < length; i++) {
        iteratee(obj[keys[i]], keys[i], obj);
      }
    }
    return obj;
  };

  // Return the results of applying the iteratee to each element.
  _.map = _.collect = function(obj, iteratee, context) {
    iteratee = cb(iteratee, context);
    var keys = !isArrayLike(obj) && _.keys(obj),
        length = (keys || obj).length,
        results = Array(length);
    for (var index = 0; index < length; index++) {
      var currentKey = keys ? keys[index] : index;
      results[index] = iteratee(obj[currentKey], currentKey, obj);
    }
    return results;
  };

  // Create a reducing function iterating left or right.
  function createReduce(dir) {
    // Optimized iterator function as using arguments.length
    // in the main function will deoptimize the, see #1991.
    function iterator(obj, iteratee, memo, keys, index, length) {
      for (; index >= 0 && index < length; index += dir) {
        var currentKey = keys ? keys[index] : index;
        memo = iteratee(memo, obj[currentKey], currentKey, obj);
      }
      return memo;
    }

    return function(obj, iteratee, memo, context) {
      iteratee = optimizeCb(iteratee, context, 4);
      var keys = !isArrayLike(obj) && _.keys(obj),
          length = (keys || obj).length,
          index = dir > 0 ? 0 : length - 1;
      // Determine the initial value if none is provided.
      if (arguments.length < 3) {
        memo = obj[keys ? keys[index] : index];
        index += dir;
      }
      return iterator(obj, iteratee, memo, keys, index, length);
    };
  }

  // **Reduce** builds up a single result from a list of values, aka `inject`,
  // or `foldl`.
  _.reduce = _.foldl = _.inject = createReduce(1);

  // The right-associative version of reduce, also known as `foldr`.
  _.reduceRight = _.foldr = createReduce(-1);

  // Return the first value which passes a truth test. Aliased as `detect`.
  _.find = _.detect = function(obj, predicate, context) {
    var key;
    if (isArrayLike(obj)) {
      key = _.findIndex(obj, predicate, context);
    } else {
      key = _.findKey(obj, predicate, context);
    }
    if (key !== void 0 && key !== -1) return obj[key];
  };

  // Return all the elements that pass a truth test.
  // Aliased as `select`.
  _.filter = _.select = function(obj, predicate, context) {
    var results = [];
    predicate = cb(predicate, context);
    _.each(obj, function(value, index, list) {
      if (predicate(value, index, list)) results.push(value);
    });
    return results;
  };

  // Return all the elements for which a truth test fails.
  _.reject = function(obj, predicate, context) {
    return _.filter(obj, _.negate(cb(predicate)), context);
  };

  // Determine whether all of the elements match a truth test.
  // Aliased as `all`.
  _.every = _.all = function(obj, predicate, context) {
    predicate = cb(predicate, context);
    var keys = !isArrayLike(obj) && _.keys(obj),
        length = (keys || obj).length;
    for (var index = 0; index < length; index++) {
      var currentKey = keys ? keys[index] : index;
      if (!predicate(obj[currentKey], currentKey, obj)) return false;
    }
    return true;
  };

  // Determine if at least one element in the object matches a truth test.
  // Aliased as `any`.
  _.some = _.any = function(obj, predicate, context) {
    predicate = cb(predicate, context);
    var keys = !isArrayLike(obj) && _.keys(obj),
        length = (keys || obj).length;
    for (var index = 0; index < length; index++) {
      var currentKey = keys ? keys[index] : index;
      if (predicate(obj[currentKey], currentKey, obj)) return true;
    }
    return false;
  };

  // Determine if the array or object contains a given item (using `===`).
  // Aliased as `includes` and `include`.
  _.contains = _.includes = _.include = function(obj, item, fromIndex, guard) {
    if (!isArrayLike(obj)) obj = _.values(obj);
    if (typeof fromIndex != 'number' || guard) fromIndex = 0;
    return _.indexOf(obj, item, fromIndex) >= 0;
  };

  // Invoke a method (with arguments) on every item in a collection.
  _.invoke = function(obj, method) {
    var args = slice.call(arguments, 2);
    var isFunc = _.isFunction(method);
    return _.map(obj, function(value) {
      var func = isFunc ? method : value[method];
      return func == null ? func : func.apply(value, args);
    });
  };

  // Convenience version of a common use case of `map`: fetching a property.
  _.pluck = function(obj, key) {
    return _.map(obj, _.property(key));
  };

  // Convenience version of a common use case of `filter`: selecting only objects
  // containing specific `key:value` pairs.
  _.where = function(obj, attrs) {
    return _.filter(obj, _.matcher(attrs));
  };

  // Convenience version of a common use case of `find`: getting the first object
  // containing specific `key:value` pairs.
  _.findWhere = function(obj, attrs) {
    return _.find(obj, _.matcher(attrs));
  };

  // Return the maximum element (or element-based computation).
  _.max = function(obj, iteratee, context) {
    var result = -Infinity, lastComputed = -Infinity,
        value, computed;
    if (iteratee == null && obj != null) {
      obj = isArrayLike(obj) ? obj : _.values(obj);
      for (var i = 0, length = obj.length; i < length; i++) {
        value = obj[i];
        if (value > result) {
          result = value;
        }
      }
    } else {
      iteratee = cb(iteratee, context);
      _.each(obj, function(value, index, list) {
        computed = iteratee(value, index, list);
        if (computed > lastComputed || computed === -Infinity && result === -Infinity) {
          result = value;
          lastComputed = computed;
        }
      });
    }
    return result;
  };

  // Return the minimum element (or element-based computation).
  _.min = function(obj, iteratee, context) {
    var result = Infinity, lastComputed = Infinity,
        value, computed;
    if (iteratee == null && obj != null) {
      obj = isArrayLike(obj) ? obj : _.values(obj);
      for (var i = 0, length = obj.length; i < length; i++) {
        value = obj[i];
        if (value < result) {
          result = value;
        }
      }
    } else {
      iteratee = cb(iteratee, context);
      _.each(obj, function(value, index, list) {
        computed = iteratee(value, index, list);
        if (computed < lastComputed || computed === Infinity && result === Infinity) {
          result = value;
          lastComputed = computed;
        }
      });
    }
    return result;
  };

  // Shuffle a collection, using the modern version of the
  // [Fisher-Yates shuffle](http://en.wikipedia.org/wiki/Fisher–Yates_shuffle).
  _.shuffle = function(obj) {
    var set = isArrayLike(obj) ? obj : _.values(obj);
    var length = set.length;
    var shuffled = Array(length);
    for (var index = 0, rand; index < length; index++) {
      rand = _.random(0, index);
      if (rand !== index) shuffled[index] = shuffled[rand];
      shuffled[rand] = set[index];
    }
    return shuffled;
  };

  // Sample **n** random values from a collection.
  // If **n** is not specified, returns a single random element.
  // The internal `guard` argument allows it to work with `map`.
  _.sample = function(obj, n, guard) {
    if (n == null || guard) {
      if (!isArrayLike(obj)) obj = _.values(obj);
      return obj[_.random(obj.length - 1)];
    }
    return _.shuffle(obj).slice(0, Math.max(0, n));
  };

  // Sort the object's values by a criterion produced by an iteratee.
  _.sortBy = function(obj, iteratee, context) {
    iteratee = cb(iteratee, context);
    return _.pluck(_.map(obj, function(value, index, list) {
      return {
        value: value,
        index: index,
        criteria: iteratee(value, index, list)
      };
    }).sort(function(left, right) {
      var a = left.criteria;
      var b = right.criteria;
      if (a !== b) {
        if (a > b || a === void 0) return 1;
        if (a < b || b === void 0) return -1;
      }
      return left.index - right.index;
    }), 'value');
  };

  // An internal function used for aggregate "group by" operations.
  var group = function(behavior) {
    return function(obj, iteratee, context) {
      var result = {};
      iteratee = cb(iteratee, context);
      _.each(obj, function(value, index) {
        var key = iteratee(value, index, obj);
        behavior(result, value, key);
      });
      return result;
    };
  };

  // Groups the object's values by a criterion. Pass either a string attribute
  // to group by, or a function that returns the criterion.
  _.groupBy = group(function(result, value, key) {
    if (_.has(result, key)) result[key].push(value); else result[key] = [value];
  });

  // Indexes the object's values by a criterion, similar to `groupBy`, but for
  // when you know that your index values will be unique.
  _.indexBy = group(function(result, value, key) {
    result[key] = value;
  });

  // Counts instances of an object that group by a certain criterion. Pass
  // either a string attribute to count by, or a function that returns the
  // criterion.
  _.countBy = group(function(result, value, key) {
    if (_.has(result, key)) result[key]++; else result[key] = 1;
  });

  // Safely create a real, live array from anything iterable.
  _.toArray = function(obj) {
    if (!obj) return [];
    if (_.isArray(obj)) return slice.call(obj);
    if (isArrayLike(obj)) return _.map(obj, _.identity);
    return _.values(obj);
  };

  // Return the number of elements in an object.
  _.size = function(obj) {
    if (obj == null) return 0;
    return isArrayLike(obj) ? obj.length : _.keys(obj).length;
  };

  // Split a collection into two arrays: one whose elements all satisfy the given
  // predicate, and one whose elements all do not satisfy the predicate.
  _.partition = function(obj, predicate, context) {
    predicate = cb(predicate, context);
    var pass = [], fail = [];
    _.each(obj, function(value, key, obj) {
      (predicate(value, key, obj) ? pass : fail).push(value);
    });
    return [pass, fail];
  };

  // Array Functions
  // ---------------

  // Get the first element of an array. Passing **n** will return the first N
  // values in the array. Aliased as `head` and `take`. The **guard** check
  // allows it to work with `_.map`.
  _.first = _.head = _.take = function(array, n, guard) {
    if (array == null) return void 0;
    if (n == null || guard) return array[0];
    return _.initial(array, array.length - n);
  };

  // Returns everything but the last entry of the array. Especially useful on
  // the arguments object. Passing **n** will return all the values in
  // the array, excluding the last N.
  _.initial = function(array, n, guard) {
    return slice.call(array, 0, Math.max(0, array.length - (n == null || guard ? 1 : n)));
  };

  // Get the last element of an array. Passing **n** will return the last N
  // values in the array.
  _.last = function(array, n, guard) {
    if (array == null) return void 0;
    if (n == null || guard) return array[array.length - 1];
    return _.rest(array, Math.max(0, array.length - n));
  };

  // Returns everything but the first entry of the array. Aliased as `tail` and `drop`.
  // Especially useful on the arguments object. Passing an **n** will return
  // the rest N values in the array.
  _.rest = _.tail = _.drop = function(array, n, guard) {
    return slice.call(array, n == null || guard ? 1 : n);
  };

  // Trim out all falsy values from an array.
  _.compact = function(array) {
    return _.filter(array, _.identity);
  };

  // Internal implementation of a recursive `flatten` function.
  var flatten = function(input, shallow, strict, startIndex) {
    var output = [], idx = 0;
    for (var i = startIndex || 0, length = getLength(input); i < length; i++) {
      var value = input[i];
      if (isArrayLike(value) && (_.isArray(value) || _.isArguments(value))) {
        //flatten current level of array or arguments object
        if (!shallow) value = flatten(value, shallow, strict);
        var j = 0, len = value.length;
        output.length += len;
        while (j < len) {
          output[idx++] = value[j++];
        }
      } else if (!strict) {
        output[idx++] = value;
      }
    }
    return output;
  };

  // Flatten out an array, either recursively (by default), or just one level.
  _.flatten = function(array, shallow) {
    return flatten(array, shallow, false);
  };

  // Return a version of the array that does not contain the specified value(s).
  _.without = function(array) {
    return _.difference(array, slice.call(arguments, 1));
  };

  // Produce a duplicate-free version of the array. If the array has already
  // been sorted, you have the option of using a faster algorithm.
  // Aliased as `unique`.
  _.uniq = _.unique = function(array, isSorted, iteratee, context) {
    if (!_.isBoolean(isSorted)) {
      context = iteratee;
      iteratee = isSorted;
      isSorted = false;
    }
    if (iteratee != null) iteratee = cb(iteratee, context);
    var result = [];
    var seen = [];
    for (var i = 0, length = getLength(array); i < length; i++) {
      var value = array[i],
          computed = iteratee ? iteratee(value, i, array) : value;
      if (isSorted) {
        if (!i || seen !== computed) result.push(value);
        seen = computed;
      } else if (iteratee) {
        if (!_.contains(seen, computed)) {
          seen.push(computed);
          result.push(value);
        }
      } else if (!_.contains(result, value)) {
        result.push(value);
      }
    }
    return result;
  };

  // Produce an array that contains the union: each distinct element from all of
  // the passed-in arrays.
  _.union = function() {
    return _.uniq(flatten(arguments, true, true));
  };

  // Produce an array that contains every item shared between all the
  // passed-in arrays.
  _.intersection = function(array) {
    var result = [];
    var argsLength = arguments.length;
    for (var i = 0, length = getLength(array); i < length; i++) {
      var item = array[i];
      if (_.contains(result, item)) continue;
      for (var j = 1; j < argsLength; j++) {
        if (!_.contains(arguments[j], item)) break;
      }
      if (j === argsLength) result.push(item);
    }
    return result;
  };

  // Take the difference between one array and a number of other arrays.
  // Only the elements present in just the first array will remain.
  _.difference = function(array) {
    var rest = flatten(arguments, true, true, 1);
    return _.filter(array, function(value){
      return !_.contains(rest, value);
    });
  };

  // Zip together multiple lists into a single array -- elements that share
  // an index go together.
  _.zip = function() {
    return _.unzip(arguments);
  };

  // Complement of _.zip. Unzip accepts an array of arrays and groups
  // each array's elements on shared indices
  _.unzip = function(array) {
    var length = array && _.max(array, getLength).length || 0;
    var result = Array(length);

    for (var index = 0; index < length; index++) {
      result[index] = _.pluck(array, index);
    }
    return result;
  };

  // Converts lists into objects. Pass either a single array of `[key, value]`
  // pairs, or two parallel arrays of the same length -- one of keys, and one of
  // the corresponding values.
  _.object = function(list, values) {
    var result = {};
    for (var i = 0, length = getLength(list); i < length; i++) {
      if (values) {
        result[list[i]] = values[i];
      } else {
        result[list[i][0]] = list[i][1];
      }
    }
    return result;
  };

  // Generator function to create the findIndex and findLastIndex functions
  function createPredicateIndexFinder(dir) {
    return function(array, predicate, context) {
      predicate = cb(predicate, context);
      var length = getLength(array);
      var index = dir > 0 ? 0 : length - 1;
      for (; index >= 0 && index < length; index += dir) {
        if (predicate(array[index], index, array)) return index;
      }
      return -1;
    };
  }

  // Returns the first index on an array-like that passes a predicate test
  _.findIndex = createPredicateIndexFinder(1);
  _.findLastIndex = createPredicateIndexFinder(-1);

  // Use a comparator function to figure out the smallest index at which
  // an object should be inserted so as to maintain order. Uses binary search.
  _.sortedIndex = function(array, obj, iteratee, context) {
    iteratee = cb(iteratee, context, 1);
    var value = iteratee(obj);
    var low = 0, high = getLength(array);
    while (low < high) {
      var mid = Math.floor((low + high) / 2);
      if (iteratee(array[mid]) < value) low = mid + 1; else high = mid;
    }
    return low;
  };

  // Generator function to create the indexOf and lastIndexOf functions
  function createIndexFinder(dir, predicateFind, sortedIndex) {
    return function(array, item, idx) {
      var i = 0, length = getLength(array);
      if (typeof idx == 'number') {
        if (dir > 0) {
            i = idx >= 0 ? idx : Math.max(idx + length, i);
        } else {
            length = idx >= 0 ? Math.min(idx + 1, length) : idx + length + 1;
        }
      } else if (sortedIndex && idx && length) {
        idx = sortedIndex(array, item);
        return array[idx] === item ? idx : -1;
      }
      if (item !== item) {
        idx = predicateFind(slice.call(array, i, length), _.isNaN);
        return idx >= 0 ? idx + i : -1;
      }
      for (idx = dir > 0 ? i : length - 1; idx >= 0 && idx < length; idx += dir) {
        if (array[idx] === item) return idx;
      }
      return -1;
    };
  }

  // Return the position of the first occurrence of an item in an array,
  // or -1 if the item is not included in the array.
  // If the array is large and already in sort order, pass `true`
  // for **isSorted** to use binary search.
  _.indexOf = createIndexFinder(1, _.findIndex, _.sortedIndex);
  _.lastIndexOf = createIndexFinder(-1, _.findLastIndex);

  // Generate an integer Array containing an arithmetic progression. A port of
  // the native Python `range()` function. See
  // [the Python documentation](http://docs.python.org/library/functions.html#range).
  _.range = function(start, stop, step) {
    if (stop == null) {
      stop = start || 0;
      start = 0;
    }
    step = step || 1;

    var length = Math.max(Math.ceil((stop - start) / step), 0);
    var range = Array(length);

    for (var idx = 0; idx < length; idx++, start += step) {
      range[idx] = start;
    }

    return range;
  };

  // Function (ahem) Functions
  // ------------------

  // Determines whether to execute a function as a constructor
  // or a normal function with the provided arguments
  var executeBound = function(sourceFunc, boundFunc, context, callingContext, args) {
    if (!(callingContext instanceof boundFunc)) return sourceFunc.apply(context, args);
    var self = baseCreate(sourceFunc.prototype);
    var result = sourceFunc.apply(self, args);
    if (_.isObject(result)) return result;
    return self;
  };

  // Create a function bound to a given object (assigning `this`, and arguments,
  // optionally). Delegates to **ECMAScript 5**'s native `Function.bind` if
  // available.
  _.bind = function(func, context) {
    if (nativeBind && func.bind === nativeBind) return nativeBind.apply(func, slice.call(arguments, 1));
    if (!_.isFunction(func)) throw new TypeError('Bind must be called on a function');
    var args = slice.call(arguments, 2);
    var bound = function() {
      return executeBound(func, bound, context, this, args.concat(slice.call(arguments)));
    };
    return bound;
  };

  // Partially apply a function by creating a version that has had some of its
  // arguments pre-filled, without changing its dynamic `this` context. _ acts
  // as a placeholder, allowing any combination of arguments to be pre-filled.
  _.partial = function(func) {
    var boundArgs = slice.call(arguments, 1);
    var bound = function() {
      var position = 0, length = boundArgs.length;
      var args = Array(length);
      for (var i = 0; i < length; i++) {
        args[i] = boundArgs[i] === _ ? arguments[position++] : boundArgs[i];
      }
      while (position < arguments.length) args.push(arguments[position++]);
      return executeBound(func, bound, this, this, args);
    };
    return bound;
  };

  // Bind a number of an object's methods to that object. Remaining arguments
  // are the method names to be bound. Useful for ensuring that all callbacks
  // defined on an object belong to it.
  _.bindAll = function(obj) {
    var i, length = arguments.length, key;
    if (length <= 1) throw new Error('bindAll must be passed function names');
    for (i = 1; i < length; i++) {
      key = arguments[i];
      obj[key] = _.bind(obj[key], obj);
    }
    return obj;
  };

  // Memoize an expensive function by storing its results.
  _.memoize = function(func, hasher) {
    var memoize = function(key) {
      var cache = memoize.cache;
      var address = '' + (hasher ? hasher.apply(this, arguments) : key);
      if (!_.has(cache, address)) cache[address] = func.apply(this, arguments);
      return cache[address];
    };
    memoize.cache = {};
    return memoize;
  };

  // Delays a function for the given number of milliseconds, and then calls
  // it with the arguments supplied.
  _.delay = function(func, wait) {
    var args = slice.call(arguments, 2);
    return setTimeout(function(){
      return func.apply(null, args);
    }, wait);
  };

  // Defers a function, scheduling it to run after the current call stack has
  // cleared.
  _.defer = _.partial(_.delay, _, 1);

  // Returns a function, that, when invoked, will only be triggered at most once
  // during a given window of time. Normally, the throttled function will run
  // as much as it can, without ever going more than once per `wait` duration;
  // but if you'd like to disable the execution on the leading edge, pass
  // `{leading: false}`. To disable execution on the trailing edge, ditto.
  _.throttle = function(func, wait, options) {
    var context, args, result;
    var timeout = null;
    var previous = 0;
    if (!options) options = {};
    var later = function() {
      previous = options.leading === false ? 0 : _.now();
      timeout = null;
      result = func.apply(context, args);
      if (!timeout) context = args = null;
    };
    return function() {
      var now = _.now();
      if (!previous && options.leading === false) previous = now;
      var remaining = wait - (now - previous);
      context = this;
      args = arguments;
      if (remaining <= 0 || remaining > wait) {
        if (timeout) {
          clearTimeout(timeout);
          timeout = null;
        }
        previous = now;
        result = func.apply(context, args);
        if (!timeout) context = args = null;
      } else if (!timeout && options.trailing !== false) {
        timeout = setTimeout(later, remaining);
      }
      return result;
    };
  };

  // Returns a function, that, as long as it continues to be invoked, will not
  // be triggered. The function will be called after it stops being called for
  // N milliseconds. If `immediate` is passed, trigger the function on the
  // leading edge, instead of the trailing.
  _.debounce = function(func, wait, immediate) {
    var timeout, args, context, timestamp, result;

    var later = function() {
      var last = _.now() - timestamp;

      if (last < wait && last >= 0) {
        timeout = setTimeout(later, wait - last);
      } else {
        timeout = null;
        if (!immediate) {
          result = func.apply(context, args);
          if (!timeout) context = args = null;
        }
      }
    };

    return function() {
      context = this;
      args = arguments;
      timestamp = _.now();
      var callNow = immediate && !timeout;
      if (!timeout) timeout = setTimeout(later, wait);
      if (callNow) {
        result = func.apply(context, args);
        context = args = null;
      }

      return result;
    };
  };

  // Returns the first function passed as an argument to the second,
  // allowing you to adjust arguments, run code before and after, and
  // conditionally execute the original function.
  _.wrap = function(func, wrapper) {
    return _.partial(wrapper, func);
  };

  // Returns a negated version of the passed-in predicate.
  _.negate = function(predicate) {
    return function() {
      return !predicate.apply(this, arguments);
    };
  };

  // Returns a function that is the composition of a list of functions, each
  // consuming the return value of the function that follows.
  _.compose = function() {
    var args = arguments;
    var start = args.length - 1;
    return function() {
      var i = start;
      var result = args[start].apply(this, arguments);
      while (i--) result = args[i].call(this, result);
      return result;
    };
  };

  // Returns a function that will only be executed on and after the Nth call.
  _.after = function(times, func) {
    return function() {
      if (--times < 1) {
        return func.apply(this, arguments);
      }
    };
  };

  // Returns a function that will only be executed up to (but not including) the Nth call.
  _.before = function(times, func) {
    var memo;
    return function() {
      if (--times > 0) {
        memo = func.apply(this, arguments);
      }
      if (times <= 1) func = null;
      return memo;
    };
  };

  // Returns a function that will be executed at most one time, no matter how
  // often you call it. Useful for lazy initialization.
  _.once = _.partial(_.before, 2);

  // Object Functions
  // ----------------

  // Keys in IE < 9 that won't be iterated by `for key in ...` and thus missed.
  var hasEnumBug = !{toString: null}.propertyIsEnumerable('toString');
  var nonEnumerableProps = ['valueOf', 'isPrototypeOf', 'toString',
                      'propertyIsEnumerable', 'hasOwnProperty', 'toLocaleString'];

  function collectNonEnumProps(obj, keys) {
    var nonEnumIdx = nonEnumerableProps.length;
    var constructor = obj.constructor;
    var proto = (_.isFunction(constructor) && constructor.prototype) || ObjProto;

    // Constructor is a special case.
    var prop = 'constructor';
    if (_.has(obj, prop) && !_.contains(keys, prop)) keys.push(prop);

    while (nonEnumIdx--) {
      prop = nonEnumerableProps[nonEnumIdx];
      if (prop in obj && obj[prop] !== proto[prop] && !_.contains(keys, prop)) {
        keys.push(prop);
      }
    }
  }

  // Retrieve the names of an object's own properties.
  // Delegates to **ECMAScript 5**'s native `Object.keys`
  _.keys = function(obj) {
    if (!_.isObject(obj)) return [];
    if (nativeKeys) return nativeKeys(obj);
    var keys = [];
    for (var key in obj) if (_.has(obj, key)) keys.push(key);
    // Ahem, IE < 9.
    if (hasEnumBug) collectNonEnumProps(obj, keys);
    return keys;
  };

  // Retrieve all the property names of an object.
  _.allKeys = function(obj) {
    if (!_.isObject(obj)) return [];
    var keys = [];
    for (var key in obj) keys.push(key);
    // Ahem, IE < 9.
    if (hasEnumBug) collectNonEnumProps(obj, keys);
    return keys;
  };

  // Retrieve the values of an object's properties.
  _.values = function(obj) {
    var keys = _.keys(obj);
    var length = keys.length;
    var values = Array(length);
    for (var i = 0; i < length; i++) {
      values[i] = obj[keys[i]];
    }
    return values;
  };

  // Returns the results of applying the iteratee to each element of the object
  // In contrast to _.map it returns an object
  _.mapObject = function(obj, iteratee, context) {
    iteratee = cb(iteratee, context);
    var keys =  _.keys(obj),
          length = keys.length,
          results = {},
          currentKey;
      for (var index = 0; index < length; index++) {
        currentKey = keys[index];
        results[currentKey] = iteratee(obj[currentKey], currentKey, obj);
      }
      return results;
  };

  // Convert an object into a list of `[key, value]` pairs.
  _.pairs = function(obj) {
    var keys = _.keys(obj);
    var length = keys.length;
    var pairs = Array(length);
    for (var i = 0; i < length; i++) {
      pairs[i] = [keys[i], obj[keys[i]]];
    }
    return pairs;
  };

  // Invert the keys and values of an object. The values must be serializable.
  _.invert = function(obj) {
    var result = {};
    var keys = _.keys(obj);
    for (var i = 0, length = keys.length; i < length; i++) {
      result[obj[keys[i]]] = keys[i];
    }
    return result;
  };

  // Return a sorted list of the function names available on the object.
  // Aliased as `methods`
  _.functions = _.methods = function(obj) {
    var names = [];
    for (var key in obj) {
      if (_.isFunction(obj[key])) names.push(key);
    }
    return names.sort();
  };

  // Extend a given object with all the properties in passed-in object(s).
  _.extend = createAssigner(_.allKeys);

  // Assigns a given object with all the own properties in the passed-in object(s)
  // (https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object/assign)
  _.extendOwn = _.assign = createAssigner(_.keys);

  // Returns the first key on an object that passes a predicate test
  _.findKey = function(obj, predicate, context) {
    predicate = cb(predicate, context);
    var keys = _.keys(obj), key;
    for (var i = 0, length = keys.length; i < length; i++) {
      key = keys[i];
      if (predicate(obj[key], key, obj)) return key;
    }
  };

  // Return a copy of the object only containing the whitelisted properties.
  _.pick = function(object, oiteratee, context) {
    var result = {}, obj = object, iteratee, keys;
    if (obj == null) return result;
    if (_.isFunction(oiteratee)) {
      keys = _.allKeys(obj);
      iteratee = optimizeCb(oiteratee, context);
    } else {
      keys = flatten(arguments, false, false, 1);
      iteratee = function(value, key, obj) { return key in obj; };
      obj = Object(obj);
    }
    for (var i = 0, length = keys.length; i < length; i++) {
      var key = keys[i];
      var value = obj[key];
      if (iteratee(value, key, obj)) result[key] = value;
    }
    return result;
  };

   // Return a copy of the object without the blacklisted properties.
  _.omit = function(obj, iteratee, context) {
    if (_.isFunction(iteratee)) {
      iteratee = _.negate(iteratee);
    } else {
      var keys = _.map(flatten(arguments, false, false, 1), String);
      iteratee = function(value, key) {
        return !_.contains(keys, key);
      };
    }
    return _.pick(obj, iteratee, context);
  };

  // Fill in a given object with default properties.
  _.defaults = createAssigner(_.allKeys, true);

  // Creates an object that inherits from the given prototype object.
  // If additional properties are provided then they will be added to the
  // created object.
  _.create = function(prototype, props) {
    var result = baseCreate(prototype);
    if (props) _.extendOwn(result, props);
    return result;
  };

  // Create a (shallow-cloned) duplicate of an object.
  _.clone = function(obj) {
    if (!_.isObject(obj)) return obj;
    return _.isArray(obj) ? obj.slice() : _.extend({}, obj);
  };

  // Invokes interceptor with the obj, and then returns obj.
  // The primary purpose of this method is to "tap into" a method chain, in
  // order to perform operations on intermediate results within the chain.
  _.tap = function(obj, interceptor) {
    interceptor(obj);
    return obj;
  };

  // Returns whether an object has a given set of `key:value` pairs.
  _.isMatch = function(object, attrs) {
    var keys = _.keys(attrs), length = keys.length;
    if (object == null) return !length;
    var obj = Object(object);
    for (var i = 0; i < length; i++) {
      var key = keys[i];
      if (attrs[key] !== obj[key] || !(key in obj)) return false;
    }
    return true;
  };


  // Internal recursive comparison function for `isEqual`.
  var eq = function(a, b, aStack, bStack) {
    // Identical objects are equal. `0 === -0`, but they aren't identical.
    // See the [Harmony `egal` proposal](http://wiki.ecmascript.org/doku.php?id=harmony:egal).
    if (a === b) return a !== 0 || 1 / a === 1 / b;
    // A strict comparison is necessary because `null == undefined`.
    if (a == null || b == null) return a === b;
    // Unwrap any wrapped objects.
    if (a instanceof _) a = a._wrapped;
    if (b instanceof _) b = b._wrapped;
    // Compare `[[Class]]` names.
    var className = toString.call(a);
    if (className !== toString.call(b)) return false;
    switch (className) {
      // Strings, numbers, regular expressions, dates, and booleans are compared by value.
      case '[object RegExp]':
      // RegExps are coerced to strings for comparison (Note: '' + /a/i === '/a/i')
      case '[object String]':
        // Primitives and their corresponding object wrappers are equivalent; thus, `"5"` is
        // equivalent to `new String("5")`.
        return '' + a === '' + b;
      case '[object Number]':
        // `NaN`s are equivalent, but non-reflexive.
        // Object(NaN) is equivalent to NaN
        if (+a !== +a) return +b !== +b;
        // An `egal` comparison is performed for other numeric values.
        return +a === 0 ? 1 / +a === 1 / b : +a === +b;
      case '[object Date]':
      case '[object Boolean]':
        // Coerce dates and booleans to numeric primitive values. Dates are compared by their
        // millisecond representations. Note that invalid dates with millisecond representations
        // of `NaN` are not equivalent.
        return +a === +b;
    }

    var areArrays = className === '[object Array]';
    if (!areArrays) {
      if (typeof a != 'object' || typeof b != 'object') return false;

      // Objects with different constructors are not equivalent, but `Object`s or `Array`s
      // from different frames are.
      var aCtor = a.constructor, bCtor = b.constructor;
      if (aCtor !== bCtor && !(_.isFunction(aCtor) && aCtor instanceof aCtor &&
                               _.isFunction(bCtor) && bCtor instanceof bCtor)
                          && ('constructor' in a && 'constructor' in b)) {
        return false;
      }
    }
    // Assume equality for cyclic structures. The algorithm for detecting cyclic
    // structures is adapted from ES 5.1 section 15.12.3, abstract operation `JO`.

    // Initializing stack of traversed objects.
    // It's done here since we only need them for objects and arrays comparison.
    aStack = aStack || [];
    bStack = bStack || [];
    var length = aStack.length;
    while (length--) {
      // Linear search. Performance is inversely proportional to the number of
      // unique nested structures.
      if (aStack[length] === a) return bStack[length] === b;
    }

    // Add the first object to the stack of traversed objects.
    aStack.push(a);
    bStack.push(b);

    // Recursively compare objects and arrays.
    if (areArrays) {
      // Compare array lengths to determine if a deep comparison is necessary.
      length = a.length;
      if (length !== b.length) return false;
      // Deep compare the contents, ignoring non-numeric properties.
      while (length--) {
        if (!eq(a[length], b[length], aStack, bStack)) return false;
      }
    } else {
      // Deep compare objects.
      var keys = _.keys(a), key;
      length = keys.length;
      // Ensure that both objects contain the same number of properties before comparing deep equality.
      if (_.keys(b).length !== length) return false;
      while (length--) {
        // Deep compare each member
        key = keys[length];
        if (!(_.has(b, key) && eq(a[key], b[key], aStack, bStack))) return false;
      }
    }
    // Remove the first object from the stack of traversed objects.
    aStack.pop();
    bStack.pop();
    return true;
  };

  // Perform a deep comparison to check if two objects are equal.
  _.isEqual = function(a, b) {
    return eq(a, b);
  };

  // Is a given array, string, or object empty?
  // An "empty" object has no enumerable own-properties.
  _.isEmpty = function(obj) {
    if (obj == null) return true;
    if (isArrayLike(obj) && (_.isArray(obj) || _.isString(obj) || _.isArguments(obj))) return obj.length === 0;
    return _.keys(obj).length === 0;
  };

  // Is a given value a DOM element?
  _.isElement = function(obj) {
    return !!(obj && obj.nodeType === 1);
  };

  // Is a given value an array?
  // Delegates to ECMA5's native Array.isArray
  _.isArray = nativeIsArray || function(obj) {
    return toString.call(obj) === '[object Array]';
  };

  // Is a given variable an object?
  _.isObject = function(obj) {
    var type = typeof obj;
    return type === 'function' || type === 'object' && !!obj;
  };

  // Add some isType methods: isArguments, isFunction, isString, isNumber, isDate, isRegExp, isError.
  _.each(['Arguments', 'Function', 'String', 'Number', 'Date', 'RegExp', 'Error'], function(name) {
    _['is' + name] = function(obj) {
      return toString.call(obj) === '[object ' + name + ']';
    };
  });

  // Define a fallback version of the method in browsers (ahem, IE < 9), where
  // there isn't any inspectable "Arguments" type.
  if (!_.isArguments(arguments)) {
    _.isArguments = function(obj) {
      return _.has(obj, 'callee');
    };
  }

  // Optimize `isFunction` if appropriate. Work around some typeof bugs in old v8,
  // IE 11 (#1621), and in Safari 8 (#1929).
  if (typeof /./ != 'function' && typeof Int8Array != 'object') {
    _.isFunction = function(obj) {
      return typeof obj == 'function' || false;
    };
  }

  // Is a given object a finite number?
  _.isFinite = function(obj) {
    return isFinite(obj) && !isNaN(parseFloat(obj));
  };

  // Is the given value `NaN`? (NaN is the only number which does not equal itself).
  _.isNaN = function(obj) {
    return _.isNumber(obj) && obj !== +obj;
  };

  // Is a given value a boolean?
  _.isBoolean = function(obj) {
    return obj === true || obj === false || toString.call(obj) === '[object Boolean]';
  };

  // Is a given value equal to null?
  _.isNull = function(obj) {
    return obj === null;
  };

  // Is a given variable undefined?
  _.isUndefined = function(obj) {
    return obj === void 0;
  };

  // Shortcut function for checking if an object has a given property directly
  // on itself (in other words, not on a prototype).
  _.has = function(obj, key) {
    return obj != null && hasOwnProperty.call(obj, key);
  };

  // Utility Functions
  // -----------------

  // Run Underscore.js in *noConflict* mode, returning the `_` variable to its
  // previous owner. Returns a reference to the Underscore object.
  _.noConflict = function() {
    root._ = previousUnderscore;
    return this;
  };

  // Keep the identity function around for default iteratees.
  _.identity = function(value) {
    return value;
  };

  // Predicate-generating functions. Often useful outside of Underscore.
  _.constant = function(value) {
    return function() {
      return value;
    };
  };

  _.noop = function(){};

  _.property = property;

  // Generates a function for a given object that returns a given property.
  _.propertyOf = function(obj) {
    return obj == null ? function(){} : function(key) {
      return obj[key];
    };
  };

  // Returns a predicate for checking whether an object has a given set of
  // `key:value` pairs.
  _.matcher = _.matches = function(attrs) {
    attrs = _.extendOwn({}, attrs);
    return function(obj) {
      return _.isMatch(obj, attrs);
    };
  };

  // Run a function **n** times.
  _.times = function(n, iteratee, context) {
    var accum = Array(Math.max(0, n));
    iteratee = optimizeCb(iteratee, context, 1);
    for (var i = 0; i < n; i++) accum[i] = iteratee(i);
    return accum;
  };

  // Return a random integer between min and max (inclusive).
  _.random = function(min, max) {
    if (max == null) {
      max = min;
      min = 0;
    }
    return min + Math.floor(Math.random() * (max - min + 1));
  };

  // A (possibly faster) way to get the current timestamp as an integer.
  _.now = Date.now || function() {
    return new Date().getTime();
  };

   // List of HTML entities for escaping.
  var escapeMap = {
    '&': '&amp;',
    '<': '&lt;',
    '>': '&gt;',
    '"': '&quot;',
    "'": '&#x27;',
    '`': '&#x60;'
  };
  var unescapeMap = _.invert(escapeMap);

  // Functions for escaping and unescaping strings to/from HTML interpolation.
  var createEscaper = function(map) {
    var escaper = function(match) {
      return map[match];
    };
    // Regexes for identifying a key that needs to be escaped
    var source = '(?:' + _.keys(map).join('|') + ')';
    var testRegexp = RegExp(source);
    var replaceRegexp = RegExp(source, 'g');
    return function(string) {
      string = string == null ? '' : '' + string;
      return testRegexp.test(string) ? string.replace(replaceRegexp, escaper) : string;
    };
  };
  _.escape = createEscaper(escapeMap);
  _.unescape = createEscaper(unescapeMap);

  // If the value of the named `property` is a function then invoke it with the
  // `object` as context; otherwise, return it.
  _.result = function(object, property, fallback) {
    var value = object == null ? void 0 : object[property];
    if (value === void 0) {
      value = fallback;
    }
    return _.isFunction(value) ? value.call(object) : value;
  };

  // Generate a unique integer id (unique within the entire client session).
  // Useful for temporary DOM ids.
  var idCounter = 0;
  _.uniqueId = function(prefix) {
    var id = ++idCounter + '';
    return prefix ? prefix + id : id;
  };

  // By default, Underscore uses ERB-style template delimiters, change the
  // following template settings to use alternative delimiters.
  _.templateSettings = {
    evaluate    : /<%([\s\S]+?)%>/g,
    interpolate : /<%=([\s\S]+?)%>/g,
    escape      : /<%-([\s\S]+?)%>/g
  };

  // When customizing `templateSettings`, if you don't want to define an
  // interpolation, evaluation or escaping regex, we need one that is
  // guaranteed not to match.
  var noMatch = /(.)^/;

  // Certain characters need to be escaped so that they can be put into a
  // string literal.
  var escapes = {
    "'":      "'",
    '\\':     '\\',
    '\r':     'r',
    '\n':     'n',
    '\u2028': 'u2028',
    '\u2029': 'u2029'
  };

  var escaper = /\\|'|\r|\n|\u2028|\u2029/g;

  var escapeChar = function(match) {
    return '\\' + escapes[match];
  };

  // JavaScript micro-templating, similar to John Resig's implementation.
  // Underscore templating handles arbitrary delimiters, preserves whitespace,
  // and correctly escapes quotes within interpolated code.
  // NB: `oldSettings` only exists for backwards compatibility.
  _.template = function(text, settings, oldSettings) {
    if (!settings && oldSettings) settings = oldSettings;
    settings = _.defaults({}, settings, _.templateSettings);

    // Combine delimiters into one regular expression via alternation.
    var matcher = RegExp([
      (settings.escape || noMatch).source,
      (settings.interpolate || noMatch).source,
      (settings.evaluate || noMatch).source
    ].join('|') + '|$', 'g');

    // Compile the template source, escaping string literals appropriately.
    var index = 0;
    var source = "__p+='";
    text.replace(matcher, function(match, escape, interpolate, evaluate, offset) {
      source += text.slice(index, offset).replace(escaper, escapeChar);
      index = offset + match.length;

      if (escape) {
        source += "'+\n((__t=(" + escape + "))==null?'':_.escape(__t))+\n'";
      } else if (interpolate) {
        source += "'+\n((__t=(" + interpolate + "))==null?'':__t)+\n'";
      } else if (evaluate) {
        source += "';\n" + evaluate + "\n__p+='";
      }

      // Adobe VMs need the match returned to produce the correct offest.
      return match;
    });
    source += "';\n";

    // If a variable is not specified, place data values in local scope.
    if (!settings.variable) source = 'with(obj||{}){\n' + source + '}\n';

    source = "var __t,__p='',__j=Array.prototype.join," +
      "print=function(){__p+=__j.call(arguments,'');};\n" +
      source + 'return __p;\n';

    try {
      var render = new Function(settings.variable || 'obj', '_', source);
    } catch (e) {
      e.source = source;
      throw e;
    }

    var template = function(data) {
      return render.call(this, data, _);
    };

    // Provide the compiled source as a convenience for precompilation.
    var argument = settings.variable || 'obj';
    template.source = 'function(' + argument + '){\n' + source + '}';

    return template;
  };

  // Add a "chain" function. Start chaining a wrapped Underscore object.
  _.chain = function(obj) {
    var instance = _(obj);
    instance._chain = true;
    return instance;
  };

  // OOP
  // ---------------
  // If Underscore is called as a function, it returns a wrapped object that
  // can be used OO-style. This wrapper holds altered versions of all the
  // underscore functions. Wrapped objects may be chained.

  // Helper function to continue chaining intermediate results.
  var result = function(instance, obj) {
    return instance._chain ? _(obj).chain() : obj;
  };

  // Add your own custom functions to the Underscore object.
  _.mixin = function(obj) {
    _.each(_.functions(obj), function(name) {
      var func = _[name] = obj[name];
      _.prototype[name] = function() {
        var args = [this._wrapped];
        push.apply(args, arguments);
        return result(this, func.apply(_, args));
      };
    });
  };

  // Add all of the Underscore functions to the wrapper object.
  _.mixin(_);

  // Add all mutator Array functions to the wrapper.
  _.each(['pop', 'push', 'reverse', 'shift', 'sort', 'splice', 'unshift'], function(name) {
    var method = ArrayProto[name];
    _.prototype[name] = function() {
      var obj = this._wrapped;
      method.apply(obj, arguments);
      if ((name === 'shift' || name === 'splice') && obj.length === 0) delete obj[0];
      return result(this, obj);
    };
  });

  // Add all accessor Array functions to the wrapper.
  _.each(['concat', 'join', 'slice'], function(name) {
    var method = ArrayProto[name];
    _.prototype[name] = function() {
      return result(this, method.apply(this._wrapped, arguments));
    };
  });

  // Extracts the result from a wrapped and chained object.
  _.prototype.value = function() {
    return this._wrapped;
  };

  // Provide unwrapping proxy for some methods used in engine operations
  // such as arithmetic and JSON stringification.
  _.prototype.valueOf = _.prototype.toJSON = _.prototype.value;

  _.prototype.toString = function() {
    return '' + this._wrapped;
  };

  // AMD registration happens at the end for compatibility with AMD loaders
  // that may not enforce next-turn semantics on modules. Even though general
  // practice for AMD registration is to be anonymous, underscore registers
  // as a named module because, like jQuery, it is a base library that is
  // popular enough to be bundled in a third party lib, but not be part of
  // an AMD load request. Those cases could generate an error when an
  // anonymous define() is called outside of a loader request.
  if (true) {
    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_RESULT__ = (function() {
      return _;
    }).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
  }
}.call(this));


/***/ }),
/* 1 */
/***/ (function(module, exports, __webpack_require__) {

/**
* @license
* MarionetteJS (Backbone.Marionette)
* ----------------------------------
* v3.5.1
*
* Copyright (c)2017 Derick Bailey, Muted Solutions, LLC.
* Distributed under MIT license
*
* http://marionettejs.com
*/


(function (global, factory) {
	 true ? module.exports = factory(__webpack_require__(7), __webpack_require__(0), __webpack_require__(288)) :
	typeof define === 'function' && define.amd ? define(['backbone', 'underscore', 'backbone.radio'], factory) :
	(global.Marionette = factory(global.Backbone,global._,global.Backbone.Radio));
}(this, (function (Backbone,_,Radio) { 'use strict';

Backbone = Backbone && Backbone.hasOwnProperty('default') ? Backbone['default'] : Backbone;
_ = _ && _.hasOwnProperty('default') ? _['default'] : _;
Radio = Radio && Radio.hasOwnProperty('default') ? Radio['default'] : Radio;

var version = "3.5.1";

//Internal utility for creating context style global utils
var proxy = function proxy(method) {
  return function (context) {
    for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
      args[_key - 1] = arguments[_key];
    }

    return method.apply(context, args);
  };
};

// Marionette.extend
// -----------------

// Borrow the Backbone `extend` method so we can use it as needed
var extend = Backbone.Model.extend;

/* global console */

var deprecate = function deprecate(message, test) {
  if (_.isObject(message)) {
    message = message.prev + ' is going to be removed in the future. ' + 'Please use ' + message.next + ' instead.' + (message.url ? ' See: ' + message.url : '');
  }

  if (!Marionette.DEV_MODE) {
    return;
  }

  if ((test === undefined || !test) && !deprecate._cache[message]) {
    deprecate._warn('Deprecation warning: ' + message);
    deprecate._cache[message] = true;
  }
};

/* istanbul ignore next: can't clear console */
deprecate._console = typeof console !== 'undefined' ? console : {};
deprecate._warn = function () {
  var warn = deprecate._console.warn || deprecate._console.log || _.noop;
  return warn.apply(deprecate._console, arguments);
};
deprecate._cache = {};

// Marionette.isNodeAttached
// -------------------------

// Determine if `el` is a child of the document
var isNodeAttached = function isNodeAttached(el) {
  return document.documentElement.contains(el && el.parentNode);
};

// Merge `keys` from `options` onto `this`
var mergeOptions = function mergeOptions(options, keys) {
  var _this = this;

  if (!options) {
    return;
  }

  _.each(keys, function (key) {
    var option = options[key];
    if (option !== undefined) {
      _this[key] = option;
    }
  });
};

// Marionette.getOption
// --------------------

// Retrieve an object, function or other value from the
// object or its `options`, with `options` taking precedence.
var getOption = function getOption(optionName) {
  if (!optionName) {
    return;
  }
  if (this.options && this.options[optionName] !== undefined) {
    return this.options[optionName];
  } else {
    return this[optionName];
  }
};

// Marionette.normalizeMethods
// ----------------------

// Pass in a mapping of events => functions or function names
// and return a mapping of events => functions
var normalizeMethods = function normalizeMethods(hash) {
  var _this = this;

  return _.reduce(hash, function (normalizedHash, method, name) {
    if (!_.isFunction(method)) {
      method = _this[method];
    }
    if (method) {
      normalizedHash[name] = method;
    }
    return normalizedHash;
  }, {});
};

// Trigger Method
// --------------

// split the event name on the ":"
var splitter = /(^|:)(\w)/gi;

// take the event section ("section1:section2:section3")
// and turn it in to uppercase name onSection1Section2Section3
function getEventName(match, prefix, eventName) {
  return eventName.toUpperCase();
}

var getOnMethodName = _.memoize(function (event) {
  return 'on' + event.replace(splitter, getEventName);
});

// Trigger an event and/or a corresponding method name. Examples:
//
// `this.triggerMethod("foo")` will trigger the "foo" event and
// call the "onFoo" method.
//
// `this.triggerMethod("foo:bar")` will trigger the "foo:bar" event and
// call the "onFooBar" method.
function triggerMethod(event) {
  for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
    args[_key - 1] = arguments[_key];
  }

  // get the method name from the event name
  var methodName = getOnMethodName(event);
  var method = getOption.call(this, methodName);
  var result = void 0;

  // call the onMethodName if it exists
  if (_.isFunction(method)) {
    // pass all args, except the event name
    result = method.apply(this, args);
  }

  // trigger the event
  this.trigger.apply(this, arguments);

  return result;
}

// triggerMethodOn invokes triggerMethod on a specific context
//
// e.g. `Marionette.triggerMethodOn(view, 'show')`
// will trigger a "show" event or invoke onShow the view.
function triggerMethodOn(context) {
  for (var _len2 = arguments.length, args = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
    args[_key2 - 1] = arguments[_key2];
  }

  if (_.isFunction(context.triggerMethod)) {
    return context.triggerMethod.apply(context, args);
  }

  return triggerMethod.apply(context, args);
}

// DOM Refresh
// -----------

// Trigger method on children unless a pure Backbone.View
function triggerMethodChildren(view, event, shouldTrigger) {
  if (!view._getImmediateChildren) {
    return;
  }
  _.each(view._getImmediateChildren(), function (child) {
    if (!shouldTrigger(child)) {
      return;
    }
    triggerMethodOn(child, event, child);
  });
}

function shouldTriggerAttach(view) {
  return !view._isAttached;
}

function shouldAttach(view) {
  if (!shouldTriggerAttach(view)) {
    return false;
  }
  view._isAttached = true;
  return true;
}

function shouldTriggerDetach(view) {
  return view._isAttached;
}

function shouldDetach(view) {
  if (!shouldTriggerDetach(view)) {
    return false;
  }
  view._isAttached = false;
  return true;
}

function triggerDOMRefresh(view) {
  if (view._isAttached && view._isRendered) {
    triggerMethodOn(view, 'dom:refresh', view);
  }
}

function triggerDOMRemove(view) {
  if (view._isAttached && view._isRendered) {
    triggerMethodOn(view, 'dom:remove', view);
  }
}

function handleBeforeAttach() {
  triggerMethodChildren(this, 'before:attach', shouldTriggerAttach);
}

function handleAttach() {
  triggerMethodChildren(this, 'attach', shouldAttach);
  triggerDOMRefresh(this);
}

function handleBeforeDetach() {
  triggerMethodChildren(this, 'before:detach', shouldTriggerDetach);
  triggerDOMRemove(this);
}

function handleDetach() {
  triggerMethodChildren(this, 'detach', shouldDetach);
}

function handleBeforeRender() {
  triggerDOMRemove(this);
}

function handleRender() {
  triggerDOMRefresh(this);
}

// Monitor a view's state, propagating attach/detach events to children and firing dom:refresh
// whenever a rendered view is attached or an attached view is rendered.
function monitorViewEvents(view) {
  if (view._areViewEventsMonitored || view.monitorViewEvents === false) {
    return;
  }

  view._areViewEventsMonitored = true;

  view.on({
    'before:attach': handleBeforeAttach,
    'attach': handleAttach,
    'before:detach': handleBeforeDetach,
    'detach': handleDetach,
    'before:render': handleBeforeRender,
    'render': handleRender
  });
}

// Error
// -----

var errorProps = ['description', 'fileName', 'lineNumber', 'name', 'message', 'number'];

var MarionetteError = extend.call(Error, {
  urlRoot: 'http://marionettejs.com/docs/v' + version + '/',

  constructor: function constructor(message, options) {
    if (_.isObject(message)) {
      options = message;
      message = options.message;
    } else if (!options) {
      options = {};
    }

    var error = Error.call(this, message);
    _.extend(this, _.pick(error, errorProps), _.pick(options, errorProps));

    this.captureStackTrace();

    if (options.url) {
      this.url = this.urlRoot + options.url;
    }
  },
  captureStackTrace: function captureStackTrace() {
    if (Error.captureStackTrace) {
      Error.captureStackTrace(this, MarionetteError);
    }
  },
  toString: function toString() {
    return this.name + ': ' + this.message + (this.url ? ' See: ' + this.url : '');
  }
});

MarionetteError.extend = extend;

// Bind Entity Events & Unbind Entity Events
// -----------------------------------------
//
// These methods are used to bind/unbind a backbone "entity" (e.g. collection/model)
// to methods on a target object.
//
// The first parameter, `target`, must have the Backbone.Events module mixed in.
//
// The second parameter is the `entity` (Backbone.Model, Backbone.Collection or
// any object that has Backbone.Events mixed in) to bind the events from.
//
// The third parameter is a hash of { "event:name": "eventHandler" }
// configuration. Multiple handlers can be separated by a space. A
// function can be supplied instead of a string handler name.

// Bind/unbind the event to handlers specified as a string of
// handler names on the target object
function bindFromStrings(target, entity, evt, methods, actionName) {
  var methodNames = methods.split(/\s+/);

  if (methodNames.length > 1) {
    deprecate('Multiple handlers for a single event are deprecated. If needed, use a single handler to call multiple methods.');
  }

  _.each(methodNames, function (methodName) {
    var method = target[methodName];
    if (!method) {
      throw new MarionetteError('Method "' + methodName + '" was configured as an event handler, but does not exist.');
    }

    target[actionName](entity, evt, method);
  });
}

// generic looping function
function iterateEvents(target, entity, bindings, actionName) {
  // type-check bindings
  if (!_.isObject(bindings)) {
    throw new MarionetteError({
      message: 'Bindings must be an object.',
      url: 'marionette.functions.html#marionettebindevents'
    });
  }

  // iterate the bindings and bind/unbind them
  _.each(bindings, function (method, evt) {

    // allow for a list of method names as a string
    if (_.isString(method)) {
      bindFromStrings(target, entity, evt, method, actionName);
      return;
    }

    target[actionName](entity, evt, method);
  });
}

function bindEvents(entity, bindings) {
  if (!entity || !bindings) {
    return this;
  }

  iterateEvents(this, entity, bindings, 'listenTo');
  return this;
}

function unbindEvents(entity, bindings) {
  if (!entity) {
    return this;
  }

  if (!bindings) {
    this.stopListening(entity);
    return this;
  }

  iterateEvents(this, entity, bindings, 'stopListening');
  return this;
}

// Bind/Unbind Radio Requests
// -----------------------------------------
//
// These methods are used to bind/unbind a backbone.radio request
// to methods on a target object.
//
// The first parameter, `target`, will set the context of the reply method
//
// The second parameter is the `Radio.channel` to bind the reply to.
//
// The third parameter is a hash of { "request:name": "replyHandler" }
// configuration. A function can be supplied instead of a string handler name.

function iterateReplies(target, channel, bindings, actionName) {
  // type-check bindings
  if (!_.isObject(bindings)) {
    throw new MarionetteError({
      message: 'Bindings must be an object.',
      url: 'marionette.functions.html#marionettebindrequests'
    });
  }

  var normalizedRadioRequests = normalizeMethods.call(target, bindings);

  channel[actionName](normalizedRadioRequests, target);
}

function bindRequests(channel, bindings) {
  if (!channel || !bindings) {
    return this;
  }

  iterateReplies(this, channel, bindings, 'reply');
  return this;
}

function unbindRequests(channel, bindings) {
  if (!channel) {
    return this;
  }

  if (!bindings) {
    channel.stopReplying(null, null, this);
    return this;
  }

  iterateReplies(this, channel, bindings, 'stopReplying');
  return this;
}

// Internal utility for setting options consistently across Mn
var setOptions = function setOptions(options) {
  this.options = _.extend({}, _.result(this, 'options'), options);
};

var CommonMixin = {

  // Imports the "normalizeMethods" to transform hashes of
  // events=>function references/names to a hash of events=>function references
  normalizeMethods: normalizeMethods,

  _setOptions: setOptions,

  // A handy way to merge passed-in options onto the instance
  mergeOptions: mergeOptions,

  // Enable getting options from this or this.options by name.
  getOption: getOption,

  // Enable binding view's events from another entity.
  bindEvents: bindEvents,

  // Enable unbinding view's events from another entity.
  unbindEvents: unbindEvents
};

// MixinOptions
// - channelName
// - radioEvents
// - radioRequests

var RadioMixin = {
  _initRadio: function _initRadio() {
    var channelName = _.result(this, 'channelName');

    if (!channelName) {
      return;
    }

    /* istanbul ignore next */
    if (!Radio) {
      throw new MarionetteError({
        name: 'BackboneRadioMissing',
        message: 'The dependency "backbone.radio" is missing.'
      });
    }

    var channel = this._channel = Radio.channel(channelName);

    var radioEvents = _.result(this, 'radioEvents');
    this.bindEvents(channel, radioEvents);

    var radioRequests = _.result(this, 'radioRequests');
    this.bindRequests(channel, radioRequests);

    this.on('destroy', this._destroyRadio);
  },
  _destroyRadio: function _destroyRadio() {
    this._channel.stopReplying(null, null, this);
  },
  getChannel: function getChannel() {
    return this._channel;
  },


  // Proxy `bindEvents`
  bindEvents: bindEvents,

  // Proxy `unbindEvents`
  unbindEvents: unbindEvents,

  // Proxy `bindRequests`
  bindRequests: bindRequests,

  // Proxy `unbindRequests`
  unbindRequests: unbindRequests

};

// Object
// ------

var ClassOptions = ['channelName', 'radioEvents', 'radioRequests'];

// A Base Class that other Classes should descend from.
// Object borrows many conventions and utilities from Backbone.
var MarionetteObject = function MarionetteObject(options) {
  if (!this.hasOwnProperty('options')) {
    this._setOptions(options);
  }
  this.mergeOptions(options, ClassOptions);
  this._setCid();
  this._initRadio();
  this.initialize.apply(this, arguments);
};

MarionetteObject.extend = extend;

// Object Methods
// --------------

// Ensure it can trigger events with Backbone.Events
_.extend(MarionetteObject.prototype, Backbone.Events, CommonMixin, RadioMixin, {
  cidPrefix: 'mno',

  // for parity with Marionette.AbstractView lifecyle
  _isDestroyed: false,

  isDestroyed: function isDestroyed() {
    return this._isDestroyed;
  },


  //this is a noop method intended to be overridden by classes that extend from this base
  initialize: function initialize() {},
  _setCid: function _setCid() {
    if (this.cid) {
      return;
    }
    this.cid = _.uniqueId(this.cidPrefix);
  },
  destroy: function destroy() {
    if (this._isDestroyed) {
      return this;
    }

    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    this.triggerMethod.apply(this, ['before:destroy', this].concat(args));

    this._isDestroyed = true;
    this.triggerMethod.apply(this, ['destroy', this].concat(args));
    this.stopListening();

    return this;
  },


  triggerMethod: triggerMethod
});

// Template Cache
// --------------

// Manage templates stored in `<script>` blocks,
// caching them for faster access.
var TemplateCache = function TemplateCache(templateId) {
  this.templateId = templateId;
};

// TemplateCache object-level methods. Manage the template
// caches from these method calls instead of creating
// your own TemplateCache instances
_.extend(TemplateCache, {

  templateCaches: {},

  // Get the specified template by id. Either
  // retrieves the cached version, or loads it
  // from the DOM.
  get: function get(templateId, options) {
    var cachedTemplate = this.templateCaches[templateId];

    if (!cachedTemplate) {
      cachedTemplate = new TemplateCache(templateId);
      this.templateCaches[templateId] = cachedTemplate;
    }

    return cachedTemplate.load(options);
  },


  // Clear templates from the cache. If no arguments
  // are specified, clears all templates:
  // `clear()`
  //
  // If arguments are specified, clears each of the
  // specified templates from the cache:
  // `clear("#t1", "#t2", "...")`
  clear: function clear() {
    var i = void 0;

    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    var length = args.length;

    if (length > 0) {
      for (i = 0; i < length; i++) {
        delete this.templateCaches[args[i]];
      }
    } else {
      this.templateCaches = {};
    }
  }
});

// TemplateCache instance methods, allowing each
// template cache object to manage its own state
// and know whether or not it has been loaded
_.extend(TemplateCache.prototype, {

  // Internal method to load the template
  load: function load(options) {
    // Guard clause to prevent loading this template more than once
    if (this.compiledTemplate) {
      return this.compiledTemplate;
    }

    // Load the template and compile it
    var template = this.loadTemplate(this.templateId, options);
    this.compiledTemplate = this.compileTemplate(template, options);

    return this.compiledTemplate;
  },


  // Load a template from the DOM, by default. Override
  // this method to provide your own template retrieval
  // For asynchronous loading with AMD/RequireJS, consider
  // using a template-loader plugin as described here:
  // https://github.com/marionettejs/backbone.marionette/wiki/Using-marionette-with-requirejs
  loadTemplate: function loadTemplate(templateId, options) {
    var $template = Backbone.$(templateId);

    if (!$template.length) {
      throw new MarionetteError({
        name: 'NoTemplateError',
        message: 'Could not find template: "' + templateId + '"'
      });
    }
    return $template.html();
  },


  // Pre-compile the template before caching it. Override
  // this method if you do not need to pre-compile a template
  // (JST / RequireJS for example) or if you want to change
  // the template engine used (Handebars, etc).
  compileTemplate: function compileTemplate(rawTemplate, options) {
    return _.template(rawTemplate, options);
  }
});

// Implementation of the invoke method (http://underscorejs.org/#invoke) with support for
// lodash v3, v4, and underscore.js
var _invoke = _.invokeMap || _.invoke;

// MixinOptions
// - behaviors

// Takes care of getting the behavior class
// given options and a key.
// If a user passes in options.behaviorClass
// default to using that.
// If a user passes in a Behavior Class directly, use that
// Otherwise delegate the lookup to the users `behaviorsLookup` implementation.
function getBehaviorClass(options, key) {
  if (options.behaviorClass) {
    return options.behaviorClass;
    //treat functions as a Behavior constructor
  } else if (_.isFunction(options)) {
    return options;
  }

  // behaviorsLookup can be either a flat object or a method
  if (_.isFunction(Marionette.Behaviors.behaviorsLookup)) {
    return Marionette.Behaviors.behaviorsLookup(options, key)[key];
  }

  return Marionette.Behaviors.behaviorsLookup[key];
}

// Iterate over the behaviors object, for each behavior
// instantiate it and get its grouped behaviors.
// This accepts a list of behaviors in either an object or array form
function parseBehaviors(view, behaviors) {
  return _.chain(behaviors).map(function (options, key) {
    var BehaviorClass = getBehaviorClass(options, key);
    //if we're passed a class directly instead of an object
    var _options = options === BehaviorClass ? {} : options;
    var behavior = new BehaviorClass(_options, view);
    var nestedBehaviors = parseBehaviors(view, _.result(behavior, 'behaviors'));

    return [behavior].concat(nestedBehaviors);
  }).flatten().value();
}

var BehaviorsMixin = {
  _initBehaviors: function _initBehaviors() {
    this._behaviors = this._getBehaviors();
  },
  _getBehaviors: function _getBehaviors() {
    var behaviors = _.result(this, 'behaviors');

    // Behaviors defined on a view can be a flat object literal
    // or it can be a function that returns an object.
    return _.isObject(behaviors) ? parseBehaviors(this, behaviors) : {};
  },
  _getBehaviorTriggers: function _getBehaviorTriggers() {
    var triggers = _invoke(this._behaviors, 'getTriggers');
    return _.reduce(triggers, function (memo, _triggers) {
      return _.extend(memo, _triggers);
    }, {});
  },
  _getBehaviorEvents: function _getBehaviorEvents() {
    var events = _invoke(this._behaviors, 'getEvents');
    return _.reduce(events, function (memo, _events) {
      return _.extend(memo, _events);
    }, {});
  },


  // proxy behavior $el to the view's $el.
  _proxyBehaviorViewProperties: function _proxyBehaviorViewProperties() {
    _invoke(this._behaviors, 'proxyViewProperties');
  },


  // delegate modelEvents and collectionEvents
  _delegateBehaviorEntityEvents: function _delegateBehaviorEntityEvents() {
    _invoke(this._behaviors, 'delegateEntityEvents');
  },


  // undelegate modelEvents and collectionEvents
  _undelegateBehaviorEntityEvents: function _undelegateBehaviorEntityEvents() {
    _invoke(this._behaviors, 'undelegateEntityEvents');
  },
  _destroyBehaviors: function _destroyBehaviors() {
    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    // Call destroy on each behavior after
    // destroying the view.
    // This unbinds event listeners
    // that behaviors have registered for.
    _invoke.apply(undefined, [this._behaviors, 'destroy'].concat(args));
  },


  // Remove a behavior
  _removeBehavior: function _removeBehavior(behavior) {
    // Don't worry about the clean up if the view is destroyed
    if (this._isDestroyed) {
      return;
    }

    // Remove behavior-only triggers and events
    this.undelegate('.trig' + behavior.cid + ' .' + behavior.cid);

    this._behaviors = _.without(this._behaviors, behavior);
  },
  _bindBehaviorUIElements: function _bindBehaviorUIElements() {
    _invoke(this._behaviors, 'bindUIElements');
  },
  _unbindBehaviorUIElements: function _unbindBehaviorUIElements() {
    _invoke(this._behaviors, 'unbindUIElements');
  },
  _triggerEventOnBehaviors: function _triggerEventOnBehaviors() {
    var behaviors = this._behaviors;
    // Use good ol' for as this is a very hot function
    for (var i = 0, length = behaviors && behaviors.length; i < length; i++) {
      triggerMethod.apply(behaviors[i], arguments);
    }
  }
};

// MixinOptions
// - collectionEvents
// - modelEvents

var DelegateEntityEventsMixin = {
  // Handle `modelEvents`, and `collectionEvents` configuration
  _delegateEntityEvents: function _delegateEntityEvents(model, collection) {
    var modelEvents = _.result(this, 'modelEvents');

    if (modelEvents) {
      unbindEvents.call(this, model, modelEvents);
      bindEvents.call(this, model, modelEvents);
    }

    var collectionEvents = _.result(this, 'collectionEvents');

    if (collectionEvents) {
      unbindEvents.call(this, collection, collectionEvents);
      bindEvents.call(this, collection, collectionEvents);
    }
  },
  _undelegateEntityEvents: function _undelegateEntityEvents(model, collection) {
    var modelEvents = _.result(this, 'modelEvents');
    unbindEvents.call(this, model, modelEvents);

    var collectionEvents = _.result(this, 'collectionEvents');
    unbindEvents.call(this, collection, collectionEvents);
  }
};

// Borrow event splitter from Backbone
var delegateEventSplitter = /^(\S+)\s*(.*)$/;

// Set event name to be namespaced using a unique index
// to generate a non colliding event namespace
// http://api.jquery.com/event.namespace/
var getNamespacedEventName = function getNamespacedEventName(eventName, namespace) {
  var match = eventName.match(delegateEventSplitter);
  return match[1] + "." + namespace + " " + match[2];
};

// Add Feature flags here
// e.g. 'class' => false
var FEATURES = {
  childViewEventPrefix: true,
  triggersStopPropagation: true,
  triggersPreventDefault: true
};

function isEnabled(name) {
  return !!FEATURES[name];
}

function setEnabled(name, state) {
  return FEATURES[name] = state;
}

// Internal method to create an event handler for a given `triggerDef` like
// 'click:foo'
function buildViewTrigger(view, triggerDef) {
  if (_.isString(triggerDef)) {
    triggerDef = { event: triggerDef };
  }

  var eventName = triggerDef.event;

  var shouldPreventDefault = !!triggerDef.preventDefault;

  if (isEnabled('triggersPreventDefault')) {
    shouldPreventDefault = triggerDef.preventDefault !== false;
  }

  var shouldStopPropagation = !!triggerDef.stopPropagation;

  if (isEnabled('triggersStopPropagation')) {
    shouldStopPropagation = triggerDef.stopPropagation !== false;
  }

  return function (event) {
    if (shouldPreventDefault) {
      event.preventDefault();
    }

    if (shouldStopPropagation) {
      event.stopPropagation();
    }

    view.triggerMethod(eventName, view, event);
  };
}

var TriggersMixin = {

  // Configure `triggers` to forward DOM events to view
  // events. `triggers: {"click .foo": "do:foo"}`
  _getViewTriggers: function _getViewTriggers(view, triggers) {
    var _this = this;

    // Configure the triggers, prevent default
    // action and stop propagation of DOM events
    return _.reduce(triggers, function (events, value, key) {
      key = getNamespacedEventName(key, 'trig' + _this.cid);
      events[key] = buildViewTrigger(view, value);
      return events;
    }, {});
  }
};

// allows for the use of the @ui. syntax within
// a given key for triggers and events
// swaps the @ui with the associated selector.
// Returns a new, non-mutated, parsed events hash.
var _normalizeUIKeys = function _normalizeUIKeys(hash, ui) {
  return _.reduce(hash, function (memo, val, key) {
    var normalizedKey = _normalizeUIString(key, ui);
    memo[normalizedKey] = val;
    return memo;
  }, {});
};

// utility method for parsing @ui. syntax strings
// into associated selector
var _normalizeUIString = function _normalizeUIString(uiString, ui) {
  return uiString.replace(/@ui\.[a-zA-Z-_$0-9]*/g, function (r) {
    return ui[r.slice(4)];
  });
};

// allows for the use of the @ui. syntax within
// a given value for regions
// swaps the @ui with the associated selector
var _normalizeUIValues = function _normalizeUIValues(hash, ui, properties) {
  _.each(hash, function (val, key) {
    if (_.isString(val)) {
      hash[key] = _normalizeUIString(val, ui);
    } else if (_.isObject(val) && _.isArray(properties)) {
      _.extend(val, _normalizeUIValues(_.pick(val, properties), ui));
      /* Value is an object, and we got an array of embedded property names to normalize. */
      _.each(properties, function (property) {
        var propertyVal = val[property];
        if (_.isString(propertyVal)) {
          val[property] = _normalizeUIString(propertyVal, ui);
        }
      });
    }
  });
  return hash;
};

var UIMixin = {

  // normalize the keys of passed hash with the views `ui` selectors.
  // `{"@ui.foo": "bar"}`
  normalizeUIKeys: function normalizeUIKeys(hash) {
    var uiBindings = this._getUIBindings();
    return _normalizeUIKeys(hash, uiBindings);
  },


  // normalize the passed string with the views `ui` selectors.
  // `"@ui.bar"`
  normalizeUIString: function normalizeUIString(uiString) {
    var uiBindings = this._getUIBindings();
    return _normalizeUIString(uiString, uiBindings);
  },


  // normalize the values of passed hash with the views `ui` selectors.
  // `{foo: "@ui.bar"}`
  normalizeUIValues: function normalizeUIValues(hash, properties) {
    var uiBindings = this._getUIBindings();
    return _normalizeUIValues(hash, uiBindings, properties);
  },
  _getUIBindings: function _getUIBindings() {
    var uiBindings = _.result(this, '_uiBindings');
    var ui = _.result(this, 'ui');
    return uiBindings || ui;
  },


  // This method binds the elements specified in the "ui" hash inside the view's code with
  // the associated jQuery selectors.
  _bindUIElements: function _bindUIElements() {
    var _this = this;

    if (!this.ui) {
      return;
    }

    // store the ui hash in _uiBindings so they can be reset later
    // and so re-rendering the view will be able to find the bindings
    if (!this._uiBindings) {
      this._uiBindings = this.ui;
    }

    // get the bindings result, as a function or otherwise
    var bindings = _.result(this, '_uiBindings');

    // empty the ui so we don't have anything to start with
    this._ui = {};

    // bind each of the selectors
    _.each(bindings, function (selector, key) {
      _this._ui[key] = _this.$(selector);
    });

    this.ui = this._ui;
  },
  _unbindUIElements: function _unbindUIElements() {
    var _this2 = this;

    if (!this.ui || !this._uiBindings) {
      return;
    }

    // delete all of the existing ui bindings
    _.each(this.ui, function ($el, name) {
      delete _this2.ui[name];
    });

    // reset the ui element to the original bindings configuration
    this.ui = this._uiBindings;
    delete this._uiBindings;
    delete this._ui;
  },
  _getUI: function _getUI(name) {
    return this._ui[name];
  }
};

// DomApi
//  ---------
// Performant method for returning the jQuery instance
function _getEl(el) {
  return el instanceof Backbone.$ ? el : Backbone.$(el);
}

// Static setter
function setDomApi(mixin) {
  this.prototype.Dom = _.extend({}, this.prototype.Dom, mixin);
  return this;
}

var DomApi = {

  // Returns a new HTML DOM node instance
  createBuffer: function createBuffer() {
    return document.createDocumentFragment();
  },


  // Lookup the `selector` string
  // Selector may also be a DOM element
  // Returns an array-like object of nodes
  getEl: function getEl(selector) {
    return _getEl(selector);
  },


  // Finds the `selector` string with the el
  // Returns an array-like object of nodes
  findEl: function findEl(el, selector) {
    var _$el = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _getEl(el);

    return _$el.find(selector);
  },


  // Returns true if the el contains the node childEl
  hasEl: function hasEl(el, childEl) {
    return el.contains(childEl && childEl.parentNode);
  },


  // Detach `el` from the DOM without removing listeners
  detachEl: function detachEl(el) {
    var _$el = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _getEl(el);

    _$el.detach();
  },


  // Remove `oldEl` from the DOM and put `newEl` in its place
  replaceEl: function replaceEl(newEl, oldEl) {
    if (newEl === oldEl) {
      return;
    }

    var parent = oldEl.parentNode;

    if (!parent) {
      return;
    }

    parent.replaceChild(newEl, oldEl);
  },


  // Swaps the location of `el1` and `el2` in the DOM
  swapEl: function swapEl(el1, el2) {
    if (el1 === el2) {
      return;
    }

    var parent1 = el1.parentNode;
    var parent2 = el2.parentNode;

    if (!parent1 || !parent2) {
      return;
    }

    var next1 = el1.nextSibling;
    var next2 = el2.nextSibling;

    parent1.insertBefore(el2, next1);
    parent2.insertBefore(el1, next2);
  },


  // Replace the contents of `el` with the HTML string of `html`
  setContents: function setContents(el, html) {
    var _$el = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _getEl(el);

    _$el.html(html);
  },


  // Takes the DOM node `el` and appends the DOM node `contents`
  // to the end of the element's contents.
  appendContents: function appendContents(el, contents) {
    var _ref = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},
        _ref$_$el = _ref._$el,
        _$el = _ref$_$el === undefined ? _getEl(el) : _ref$_$el,
        _ref$_$contents = _ref._$contents,
        _$contents = _ref$_$contents === undefined ? _getEl(contents) : _ref$_$contents;

    _$el.append(_$contents);
  },


  // Does the el have child nodes
  hasContents: function hasContents(el) {
    return !!el && el.hasChildNodes();
  },


  // Remove the inner contents of `el` from the DOM while leaving
  // `el` itself in the DOM.
  detachContents: function detachContents(el) {
    var _$el = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _getEl(el);

    _$el.contents().detach();
  }
};

// ViewMixin
//  ---------

// MixinOptions
// - behaviors
// - childViewEventPrefix
// - childViewEvents
// - childViewTriggers
// - collectionEvents
// - modelEvents
// - triggers
// - ui


var ViewMixin = {
  Dom: DomApi,

  supportsRenderLifecycle: true,
  supportsDestroyLifecycle: true,

  _isDestroyed: false,

  isDestroyed: function isDestroyed() {
    return !!this._isDestroyed;
  },


  _isRendered: false,

  isRendered: function isRendered() {
    return !!this._isRendered;
  },


  _isAttached: false,

  isAttached: function isAttached() {
    return !!this._isAttached;
  },


  // Overriding Backbone.View's `delegateEvents` to handle
  // `events` and `triggers`
  delegateEvents: function delegateEvents(eventsArg) {

    this._proxyBehaviorViewProperties();
    this._buildEventProxies();

    var viewEvents = this._getEvents(eventsArg);

    if (typeof eventsArg === 'undefined') {
      this.events = viewEvents;
    }

    var combinedEvents = _.extend({}, this._getBehaviorEvents(), viewEvents, this._getBehaviorTriggers(), this.getTriggers());

    Backbone.View.prototype.delegateEvents.call(this, combinedEvents);

    return this;
  },
  _getEvents: function _getEvents(eventsArg) {
    var events = eventsArg || this.events;

    if (_.isFunction(events)) {
      return this.normalizeUIKeys(events.call(this));
    }

    return this.normalizeUIKeys(events);
  },


  // Configure `triggers` to forward DOM events to view
  // events. `triggers: {"click .foo": "do:foo"}`
  getTriggers: function getTriggers() {
    if (!this.triggers) {
      return;
    }

    // Allow `triggers` to be configured as a function
    var triggers = this.normalizeUIKeys(_.result(this, 'triggers'));

    // Configure the triggers, prevent default
    // action and stop propagation of DOM events
    return this._getViewTriggers(this, triggers);
  },


  // Handle `modelEvents`, and `collectionEvents` configuration
  delegateEntityEvents: function delegateEntityEvents() {
    this._delegateEntityEvents(this.model, this.collection);

    // bind each behaviors model and collection events
    this._delegateBehaviorEntityEvents();

    return this;
  },


  // Handle unbinding `modelEvents`, and `collectionEvents` configuration
  undelegateEntityEvents: function undelegateEntityEvents() {
    this._undelegateEntityEvents(this.model, this.collection);

    // unbind each behaviors model and collection events
    this._undelegateBehaviorEntityEvents();

    return this;
  },


  // Handle destroying the view and its children.
  destroy: function destroy() {
    if (this._isDestroyed) {
      return this;
    }
    var shouldTriggerDetach = this._isAttached && !this._shouldDisableEvents;

    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    this.triggerMethod.apply(this, ['before:destroy', this].concat(args));
    if (shouldTriggerDetach) {
      this.triggerMethod('before:detach', this);
    }

    // unbind UI elements
    this.unbindUIElements();

    // remove the view from the DOM
    this._removeElement();

    if (shouldTriggerDetach) {
      this._isAttached = false;
      this.triggerMethod('detach', this);
    }

    // remove children after the remove to prevent extra paints
    this._removeChildren();

    this._isDestroyed = true;
    this._isRendered = false;

    // Destroy behaviors after _isDestroyed flag
    this._destroyBehaviors.apply(this, args);

    this.triggerMethod.apply(this, ['destroy', this].concat(args));

    this.stopListening();

    return this;
  },


  // Equates to this.$el.remove
  _removeElement: function _removeElement() {
    this.$el.off().removeData();
    this.Dom.detachEl(this.el, this.$el);
  },
  bindUIElements: function bindUIElements() {
    this._bindUIElements();
    this._bindBehaviorUIElements();

    return this;
  },


  // This method unbinds the elements specified in the "ui" hash
  unbindUIElements: function unbindUIElements() {
    this._unbindUIElements();
    this._unbindBehaviorUIElements();

    return this;
  },
  getUI: function getUI(name) {
    return this._getUI(name);
  },


  // used as the prefix for child view events
  // that are forwarded through the layoutview
  childViewEventPrefix: function childViewEventPrefix() {
    return isEnabled('childViewEventPrefix') ? 'childview' : false;
  },


  // import the `triggerMethod` to trigger events with corresponding
  // methods if the method exists
  triggerMethod: function triggerMethod$$1() {
    var ret = triggerMethod.apply(this, arguments);

    this._triggerEventOnBehaviors.apply(this, arguments);

    return ret;
  },


  // Cache `childViewEvents` and `childViewTriggers`
  _buildEventProxies: function _buildEventProxies() {
    this._childViewEvents = _.result(this, 'childViewEvents');
    this._childViewTriggers = _.result(this, 'childViewTriggers');
  },
  _proxyChildViewEvents: function _proxyChildViewEvents(view) {
    this.listenTo(view, 'all', this._childViewEventHandler);
  },
  _childViewEventHandler: function _childViewEventHandler(eventName) {
    var childViewEvents = this.normalizeMethods(this._childViewEvents);

    // call collectionView childViewEvent if defined

    for (var _len2 = arguments.length, args = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
      args[_key2 - 1] = arguments[_key2];
    }

    if (typeof childViewEvents !== 'undefined' && _.isFunction(childViewEvents[eventName])) {
      childViewEvents[eventName].apply(this, args);
    }

    // use the parent view's proxyEvent handlers
    var childViewTriggers = this._childViewTriggers;

    // Call the event with the proxy name on the parent layout
    if (childViewTriggers && _.isString(childViewTriggers[eventName])) {
      this.triggerMethod.apply(this, [childViewTriggers[eventName]].concat(args));
    }

    var prefix = _.result(this, 'childViewEventPrefix');

    if (prefix !== false) {
      var childEventName = prefix + ':' + eventName;

      this.triggerMethod.apply(this, [childEventName].concat(args));
    }
  }
};

_.extend(ViewMixin, BehaviorsMixin, CommonMixin, DelegateEntityEventsMixin, TriggersMixin, UIMixin);

function renderView(view) {
  if (view._isRendered) {
    return;
  }

  if (!view.supportsRenderLifecycle) {
    triggerMethodOn(view, 'before:render', view);
  }

  view.render();

  if (!view.supportsRenderLifecycle) {
    view._isRendered = true;
    triggerMethodOn(view, 'render', view);
  }
}

function destroyView(view) {
  if (view.destroy) {
    view.destroy();
    return;
  }

  if (!view.supportsDestroyLifecycle) {
    triggerMethodOn(view, 'before:destroy', view);
  }

  var shouldTriggerDetach = view._isAttached && !view._shouldDisableEvents;

  if (shouldTriggerDetach) {
    triggerMethodOn(view, 'before:detach', view);
  }

  view.remove();

  if (shouldTriggerDetach) {
    view._isAttached = false;
    triggerMethodOn(view, 'detach', view);
  }

  view._isDestroyed = true;

  if (!view.supportsDestroyLifecycle) {
    triggerMethodOn(view, 'destroy', view);
  }
}

// Region
// ------

var ClassOptions$2 = ['allowMissingEl', 'parentEl', 'replaceElement'];

var Region = MarionetteObject.extend({
  Dom: DomApi,

  cidPrefix: 'mnr',
  replaceElement: false,
  _isReplaced: false,
  _isSwappingView: false,

  constructor: function constructor(options) {
    this._setOptions(options);

    this.mergeOptions(options, ClassOptions$2);

    // getOption necessary because options.el may be passed as undefined
    this._initEl = this.el = this.getOption('el');

    // Handle when this.el is passed in as a $ wrapped element.
    this.el = this.el instanceof Backbone.$ ? this.el[0] : this.el;

    if (!this.el) {
      throw new MarionetteError({
        name: 'NoElError',
        message: 'An "el" must be specified for a region.'
      });
    }

    this.$el = this.getEl(this.el);
    MarionetteObject.call(this, options);
  },


  // Displays a backbone view instance inside of the region. Handles calling the `render`
  // method for you. Reads content directly from the `el` attribute. The `preventDestroy`
  // option can be used to prevent a view from the old view being destroyed on show.
  show: function show(view, options) {
    if (!this._ensureElement(options)) {
      return;
    }

    view = this._getView(view, options);

    if (view === this.currentView) {
      return this;
    }

    this._isSwappingView = !!this.currentView;

    this.triggerMethod('before:show', this, view, options);

    // Assume an attached view is already in the region for pre-existing DOM
    if (!view._isAttached) {
      this.empty(options);
    }

    this._setupChildView(view);

    this.currentView = view;

    renderView(view);

    this._attachView(view, options);

    this.triggerMethod('show', this, view, options);

    this._isSwappingView = false;

    return this;
  },
  _setupChildView: function _setupChildView(view) {
    monitorViewEvents(view);

    this._proxyChildViewEvents(view);

    // We need to listen for if a view is destroyed in a way other than through the region.
    // If this happens we need to remove the reference to the currentView since once a view
    // has been destroyed we can not reuse it.
    view.on('destroy', this._empty, this);
  },
  _proxyChildViewEvents: function _proxyChildViewEvents(view) {
    var parentView = this._parentView;

    if (!parentView) {
      return;
    }

    parentView._proxyChildViewEvents(view);
  },


  // If the regions parent view is not monitoring its attach/detach events
  _shouldDisableMonitoring: function _shouldDisableMonitoring() {
    return this._parentView && this._parentView.monitorViewEvents === false;
  },
  _attachView: function _attachView(view) {
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

    var shouldTriggerAttach = !view._isAttached && isNodeAttached(this.el) && !this._shouldDisableMonitoring();
    var shouldReplaceEl = typeof options.replaceElement === 'undefined' ? !!_.result(this, 'replaceElement') : !!options.replaceElement;

    if (shouldTriggerAttach) {
      triggerMethodOn(view, 'before:attach', view);
    }

    if (shouldReplaceEl) {
      this._replaceEl(view);
    } else {
      this.attachHtml(view);
    }

    if (shouldTriggerAttach) {
      view._isAttached = true;
      triggerMethodOn(view, 'attach', view);
    }
  },
  _ensureElement: function _ensureElement() {
    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

    if (!_.isObject(this.el)) {
      this.$el = this.getEl(this.el);
      this.el = this.$el[0];
      // Make sure the $el contains only the el
      this.$el = this.Dom.getEl(this.el);
    }

    if (!this.$el || this.$el.length === 0) {
      var allowMissingEl = typeof options.allowMissingEl === 'undefined' ? !!_.result(this, 'allowMissingEl') : !!options.allowMissingEl;

      if (allowMissingEl) {
        return false;
      } else {
        throw new MarionetteError('An "el" must exist in DOM for this region ' + this.cid);
      }
    }
    return true;
  },
  _getView: function _getView(view) {
    if (!view) {
      throw new MarionetteError({
        name: 'ViewNotValid',
        message: 'The view passed is undefined and therefore invalid. You must pass a view instance to show.'
      });
    }

    if (view._isDestroyed) {
      throw new MarionetteError({
        name: 'ViewDestroyedError',
        message: 'View (cid: "' + view.cid + '") has already been destroyed and cannot be used.'
      });
    }

    if (view instanceof Backbone.View) {
      return view;
    }

    var viewOptions = this._getViewOptions(view);

    return new View(viewOptions);
  },


  // This allows for a template or a static string to be
  // used as a template
  _getViewOptions: function _getViewOptions(viewOptions) {
    if (_.isFunction(viewOptions)) {
      return { template: viewOptions };
    }

    if (_.isObject(viewOptions)) {
      return viewOptions;
    }

    var template = function template() {
      return viewOptions;
    };

    return { template: template };
  },


  // Override this method to change how the region finds the DOM element that it manages. Return
  // a jQuery selector object scoped to a provided parent el or the document if none exists.
  getEl: function getEl(el) {
    var context = _.result(this, 'parentEl');

    if (context && _.isString(el)) {
      return this.Dom.findEl(context, el);
    }

    return this.Dom.getEl(el);
  },
  _replaceEl: function _replaceEl(view) {
    // always restore the el to ensure the regions el is present before replacing
    this._restoreEl();

    view.on('before:destroy', this._restoreEl, this);

    this.Dom.replaceEl(view.el, this.el);

    this._isReplaced = true;
  },


  // Restore the region's element in the DOM.
  _restoreEl: function _restoreEl() {
    // There is nothing to replace
    if (!this._isReplaced) {
      return;
    }

    var view = this.currentView;

    if (!view) {
      return;
    }

    this._detachView(view);

    this._isReplaced = false;
  },


  // Check to see if the region's el was replaced.
  isReplaced: function isReplaced() {
    return !!this._isReplaced;
  },


  // Check to see if a view is being swapped by another
  isSwappingView: function isSwappingView() {
    return !!this._isSwappingView;
  },


  // Override this method to change how the new view is appended to the `$el` that the
  // region is managing
  attachHtml: function attachHtml(view) {
    this.Dom.appendContents(this.el, view.el, { _$el: this.$el, _$contents: view.$el });
  },


  // Destroy the current view, if there is one. If there is no current view, it does
  // nothing and returns immediately.
  empty: function empty() {
    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : { allowMissingEl: true };

    var view = this.currentView;

    // If there is no view in the region we should only detach current html
    if (!view) {
      if (this._ensureElement(options)) {
        this.detachHtml();
      }
      return this;
    }

    var shouldDestroy = !options.preventDestroy;

    if (!shouldDestroy) {
      deprecate('The preventDestroy option is deprecated. Use Region#detachView');
    }

    this._empty(view, shouldDestroy);
    return this;
  },
  _empty: function _empty(view, shouldDestroy) {
    view.off('destroy', this._empty, this);
    this.triggerMethod('before:empty', this, view);

    this._restoreEl();

    delete this.currentView;

    if (!view._isDestroyed) {
      if (shouldDestroy) {
        this.removeView(view);
      } else {
        this._detachView(view);
      }
      this._stopChildViewEvents(view);
    }

    this.triggerMethod('empty', this, view);
  },
  _stopChildViewEvents: function _stopChildViewEvents(view) {
    var parentView = this._parentView;

    if (!parentView) {
      return;
    }

    this._parentView.stopListening(view);
  },
  destroyView: function destroyView$$1(view) {
    if (view._isDestroyed) {
      return view;
    }

    view._shouldDisableEvents = this._shouldDisableMonitoring();
    destroyView(view);
    return view;
  },
  removeView: function removeView(view) {
    this.destroyView(view);
  },


  // Empties the Region without destroying the view
  // Returns the detached view
  detachView: function detachView() {
    var view = this.currentView;

    if (!view) {
      return;
    }

    this._empty(view);

    return view;
  },
  _detachView: function _detachView(view) {
    var shouldTriggerDetach = view._isAttached && !this._shouldDisableMonitoring();
    var shouldRestoreEl = this._isReplaced;
    if (shouldTriggerDetach) {
      triggerMethodOn(view, 'before:detach', view);
    }

    if (shouldRestoreEl) {
      this.Dom.replaceEl(this.el, view.el);
    } else {
      this.detachHtml();
    }

    if (shouldTriggerDetach) {
      view._isAttached = false;
      triggerMethodOn(view, 'detach', view);
    }
  },


  // Override this method to change how the region detaches current content
  detachHtml: function detachHtml() {
    this.Dom.detachContents(this.el, this.$el);
  },


  // Checks whether a view is currently present within the region. Returns `true` if there is
  // and `false` if no view is present.
  hasView: function hasView() {
    return !!this.currentView;
  },


  // Reset the region by destroying any existing view and clearing out the cached `$el`.
  // The next time a view is shown via this region, the region will re-query the DOM for
  // the region's `el`.
  reset: function reset(options) {
    this.empty(options);

    if (this.$el) {
      this.el = this._initEl;
    }

    delete this.$el;
    return this;
  },
  destroy: function destroy(options) {
    if (this._isDestroyed) {
      return this;
    }

    this.reset(options);

    if (this._name) {
      this._parentView._removeReferences(this._name);
    }
    delete this._parentView;
    delete this._name;

    return MarionetteObject.prototype.destroy.apply(this, arguments);
  }
}, {
  setDomApi: setDomApi
});

// return the region instance from the definition
var buildRegion = function (definition, defaults) {
  if (definition instanceof Region) {
    return definition;
  }

  return buildRegionFromDefinition(definition, defaults);
};

function buildRegionFromDefinition(definition, defaults) {
  var opts = _.extend({}, defaults);

  if (_.isString(definition)) {
    _.extend(opts, { el: definition });

    return buildRegionFromObject(opts);
  }

  if (_.isFunction(definition)) {
    _.extend(opts, { regionClass: definition });

    return buildRegionFromObject(opts);
  }

  if (_.isObject(definition)) {
    if (definition.selector) {
      deprecate('The selector option on a Region definition object is deprecated. Use el to pass a selector string');
    }

    _.extend(opts, { el: definition.selector }, definition);

    return buildRegionFromObject(opts);
  }

  throw new MarionetteError({
    message: 'Improper region configuration type.',
    url: 'marionette.region.html#region-configuration-types'
  });
}

function buildRegionFromObject(definition) {
  var RegionClass = definition.regionClass;

  var options = _.omit(definition, 'regionClass');

  return new RegionClass(options);
}

// MixinOptions
// - regions
// - regionClass

var RegionsMixin = {
  regionClass: Region,

  // Internal method to initialize the regions that have been defined in a
  // `regions` attribute on this View.
  _initRegions: function _initRegions() {

    // init regions hash
    this.regions = this.regions || {};
    this._regions = {};

    this.addRegions(_.result(this, 'regions'));
  },


  // Internal method to re-initialize all of the regions by updating
  // the `el` that they point to
  _reInitRegions: function _reInitRegions() {
    _invoke(this._regions, 'reset');
  },


  // Add a single region, by name, to the View
  addRegion: function addRegion(name, definition) {
    var regions = {};
    regions[name] = definition;
    return this.addRegions(regions)[name];
  },


  // Add multiple regions as a {name: definition, name2: def2} object literal
  addRegions: function addRegions(regions) {
    // If there's nothing to add, stop here.
    if (_.isEmpty(regions)) {
      return;
    }

    // Normalize region selectors hash to allow
    // a user to use the @ui. syntax.
    regions = this.normalizeUIValues(regions, ['selector', 'el']);

    // Add the regions definitions to the regions property
    this.regions = _.extend({}, this.regions, regions);

    return this._addRegions(regions);
  },


  // internal method to build and add regions
  _addRegions: function _addRegions(regionDefinitions) {
    var _this = this;

    var defaults = {
      regionClass: this.regionClass,
      parentEl: _.partial(_.result, this, 'el')
    };

    return _.reduce(regionDefinitions, function (regions, definition, name) {
      regions[name] = buildRegion(definition, defaults);
      _this._addRegion(regions[name], name);
      return regions;
    }, {});
  },
  _addRegion: function _addRegion(region, name) {
    this.triggerMethod('before:add:region', this, name, region);

    region._parentView = this;
    region._name = name;

    this._regions[name] = region;

    this.triggerMethod('add:region', this, name, region);
  },


  // Remove a single region from the View, by name
  removeRegion: function removeRegion(name) {
    var region = this._regions[name];

    this._removeRegion(region, name);

    return region;
  },


  // Remove all regions from the View
  removeRegions: function removeRegions() {
    var regions = this._getRegions();

    _.each(this._regions, _.bind(this._removeRegion, this));

    return regions;
  },
  _removeRegion: function _removeRegion(region, name) {
    this.triggerMethod('before:remove:region', this, name, region);

    region.destroy();

    this.triggerMethod('remove:region', this, name, region);
  },


  // Called in a region's destroy
  _removeReferences: function _removeReferences(name) {
    delete this.regions[name];
    delete this._regions[name];
  },


  // Empty all regions in the region manager, but
  // leave them attached
  emptyRegions: function emptyRegions() {
    var regions = this.getRegions();
    _invoke(regions, 'empty');
    return regions;
  },


  // Checks to see if view contains region
  // Accepts the region name
  // hasRegion('main')
  hasRegion: function hasRegion(name) {
    return !!this.getRegion(name);
  },


  // Provides access to regions
  // Accepts the region name
  // getRegion('main')
  getRegion: function getRegion(name) {
    if (!this._isRendered) {
      this.render();
    }
    return this._regions[name];
  },


  // Get all regions
  _getRegions: function _getRegions() {
    return _.clone(this._regions);
  },
  getRegions: function getRegions() {
    if (!this._isRendered) {
      this.render();
    }
    return this._getRegions();
  },
  showChildView: function showChildView(name, view) {
    var region = this.getRegion(name);

    for (var _len = arguments.length, args = Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {
      args[_key - 2] = arguments[_key];
    }

    return region.show.apply(region, [view].concat(args));
  },
  detachChildView: function detachChildView(name) {
    return this.getRegion(name).detachView();
  },
  getChildView: function getChildView(name) {
    return this.getRegion(name).currentView;
  }
};

// Renderer
// --------

// Render a template with data by passing in the template
// selector and the data to render.
var Renderer = {

  // Render a template with data. The `template` parameter is
  // passed to the `TemplateCache` object to retrieve the
  // template function. Override this method to provide your own
  // custom rendering and template handling for all of Marionette.
  render: function render(template, data) {
    if (!template) {
      throw new MarionetteError({
        name: 'TemplateNotFoundError',
        message: 'Cannot render the template since its false, null or undefined.'
      });
    }

    var templateFunc = _.isFunction(template) ? template : TemplateCache.get(template);

    return templateFunc(data);
  }
};

// View
// ---------

var ClassOptions$1 = ['behaviors', 'childViewEventPrefix', 'childViewEvents', 'childViewTriggers', 'collectionEvents', 'events', 'modelEvents', 'regionClass', 'regions', 'template', 'templateContext', 'triggers', 'ui'];

// The standard view. Includes view events, automatic rendering
// of Underscore templates, nested views, and more.
var View = Backbone.View.extend({
  constructor: function constructor(options) {
    this.render = _.bind(this.render, this);

    this._setOptions(options);

    this.mergeOptions(options, ClassOptions$1);

    monitorViewEvents(this);

    this._initBehaviors();
    this._initRegions();

    var args = Array.prototype.slice.call(arguments);
    args[0] = this.options;
    Backbone.View.prototype.constructor.apply(this, args);

    this.delegateEntityEvents();

    this._triggerEventOnBehaviors('initialize', this);
  },


  // Serialize the view's model *or* collection, if
  // it exists, for the template
  serializeData: function serializeData() {
    if (!this.model && !this.collection) {
      return {};
    }

    // If we have a model, we serialize that
    if (this.model) {
      return this.serializeModel();
    }

    // Otherwise, we serialize the collection,
    // making it available under the `items` property
    return {
      items: this.serializeCollection()
    };
  },


  // Prepares the special `model` property of a view
  // for being displayed in the template. By default
  // we simply clone the attributes. Override this if
  // you need a custom transformation for your view's model
  serializeModel: function serializeModel() {
    if (!this.model) {
      return {};
    }
    return _.clone(this.model.attributes);
  },


  // Serialize a collection by cloning each of
  // its model's attributes
  serializeCollection: function serializeCollection() {
    if (!this.collection) {
      return {};
    }
    return this.collection.map(function (model) {
      return _.clone(model.attributes);
    });
  },


  // Overriding Backbone.View's `setElement` to handle
  // if an el was previously defined. If so, the view might be
  // rendered or attached on setElement.
  setElement: function setElement() {
    Backbone.View.prototype.setElement.apply(this, arguments);

    this._isRendered = this.Dom.hasContents(this.el);
    this._isAttached = isNodeAttached(this.el);

    if (this._isRendered) {
      this.bindUIElements();
    }

    return this;
  },


  // Render the view, defaulting to underscore.js templates.
  // You can override this in your view definition to provide
  // a very specific rendering for your view. In general, though,
  // you should override the `Marionette.Renderer` object to
  // change how Marionette renders views.
  // Subsequent renders after the first will re-render all nested
  // views.
  render: function render() {
    if (this._isDestroyed) {
      return this;
    }

    this.triggerMethod('before:render', this);

    // If this is not the first render call, then we need to
    // re-initialize the `el` for each region
    if (this._isRendered) {
      this._reInitRegions();
    }

    this._renderTemplate();
    this.bindUIElements();

    this._isRendered = true;
    this.triggerMethod('render', this);

    return this;
  },


  // Internal method to render the template with the serialized data
  // and template context via the `Marionette.Renderer` object.
  _renderTemplate: function _renderTemplate() {
    var template = this.getTemplate();

    // Allow template-less views
    if (template === false) {
      deprecate('template:false is deprecated.  Use _.noop.');
      return;
    }

    // Add in entity data and template context
    var data = this.mixinTemplateContext(this.serializeData());

    // Render and add to el
    var html = this._renderHtml(template, data);
    this.attachElContent(html);
  },


  // Renders the data into the template
  _renderHtml: function _renderHtml(template, data) {
    return Renderer.render(template, data, this);
  },


  // Get the template for this view
  // instance. You can set a `template` attribute in the view
  // definition or pass a `template: "whatever"` parameter in
  // to the constructor options.
  getTemplate: function getTemplate() {
    return this.template;
  },


  // Mix in template context methods. Looks for a
  // `templateContext` attribute, which can either be an
  // object literal, or a function that returns an object
  // literal. All methods and attributes from this object
  // are copies to the object passed in.
  mixinTemplateContext: function mixinTemplateContext() {
    var target = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

    var templateContext = _.result(this, 'templateContext');
    return _.extend(target, templateContext);
  },


  // Attaches the content of a given view.
  // This method can be overridden to optimize rendering,
  // or to render in a non standard way.
  //
  // For example, using `innerHTML` instead of `$el.html`
  //
  // ```js
  // attachElContent(html) {
  //   this.el.innerHTML = html;
  //   return this;
  // }
  // ```
  attachElContent: function attachElContent(html) {
    this.Dom.setContents(this.el, html, this.$el);

    return this;
  },


  // called by ViewMixin destroy
  _removeChildren: function _removeChildren() {
    this.removeRegions();
  },
  _getImmediateChildren: function _getImmediateChildren() {
    return _.chain(this._getRegions()).map('currentView').compact().value();
  }
}, {
  // Sets the renderer for the Marionette.View class
  setRenderer: function setRenderer(renderer) {
    this.prototype._renderHtml = renderer;
    return this;
  },


  setDomApi: setDomApi
});

_.extend(View.prototype, ViewMixin, RegionsMixin);

// Mix in methods from Underscore, for iteration, and other
// collection related features.
// Borrowing this code from Backbone.Collection:
// https://github.com/jashkenas/backbone/blob/1.1.2/backbone.js#L962

var methods = ['forEach', 'each', 'map', 'find', 'detect', 'filter', 'select', 'reject', 'every', 'all', 'some', 'any', 'include', 'contains', 'invoke', 'toArray', 'first', 'initial', 'rest', 'last', 'without', 'isEmpty', 'pluck', 'reduce', 'partition'];

var emulateCollection = function emulateCollection(object, listProperty) {
  _.each(methods, function (method) {
    object[method] = function () {
      var list = _.result(this, listProperty);
      var args = Array.prototype.slice.call(arguments);
      return _[method].apply(_, [list].concat(args));
    };
  });
};

// Provide a container to store, retrieve and
// shut down child views.
var Container = function Container(views) {
  this._views = {};
  this._indexByModel = {};
  this._indexByCustom = {};
  this._updateLength();

  _.each(views, _.bind(this.add, this));
};

emulateCollection(Container.prototype, '_getViews');

// Container Methods
// -----------------

_.extend(Container.prototype, {
  _getViews: function _getViews() {
    return _.values(this._views);
  },


  // Add a view to this container. Stores the view
  // by `cid` and makes it searchable by the model
  // cid (and model itself). Optionally specify
  // a custom key to store an retrieve the view.
  add: function add(view, customIndex) {
    return this._add(view, customIndex)._updateLength();
  },


  // To be used when avoiding call _updateLength
  // When you are done adding all your new views
  // call _updateLength
  _add: function _add(view, customIndex) {
    var viewCid = view.cid;

    // store the view
    this._views[viewCid] = view;

    // index it by model
    if (view.model) {
      this._indexByModel[view.model.cid] = viewCid;
    }

    // index by custom
    if (customIndex) {
      this._indexByCustom[customIndex] = viewCid;
    }

    return this;
  },


  // Find a view by the model that was attached to
  // it. Uses the model's `cid` to find it.
  findByModel: function findByModel(model) {
    return this.findByModelCid(model.cid);
  },


  // Find a view by the `cid` of the model that was attached to
  // it. Uses the model's `cid` to find the view `cid` and
  // retrieve the view using it.
  findByModelCid: function findByModelCid(modelCid) {
    var viewCid = this._indexByModel[modelCid];
    return this.findByCid(viewCid);
  },


  // Find a view by a custom indexer.
  findByCustom: function findByCustom(index) {
    var viewCid = this._indexByCustom[index];
    return this.findByCid(viewCid);
  },


  // Find by index. This is not guaranteed to be a
  // stable index.
  findByIndex: function findByIndex(index) {
    return _.values(this._views)[index];
  },


  // retrieve a view by its `cid` directly
  findByCid: function findByCid(cid) {
    return this._views[cid];
  },


  // Remove a view
  remove: function remove(view) {
    return this._remove(view)._updateLength();
  },


  // To be used when avoiding call _updateLength
  // When you are done adding all your new views
  // call _updateLength
  _remove: function _remove(view) {
    var viewCid = view.cid;

    // delete model index
    if (view.model) {
      delete this._indexByModel[view.model.cid];
    }

    // delete custom index
    _.some(this._indexByCustom, _.bind(function (cid, key) {
      if (cid === viewCid) {
        delete this._indexByCustom[key];
        return true;
      }
    }, this));

    // remove the view from the container
    delete this._views[viewCid];

    return this;
  },


  // Update the `.length` attribute on this container
  _updateLength: function _updateLength() {
    this.length = _.size(this._views);

    return this;
  }
});

// Collection View
// ---------------

var ClassOptions$3 = ['behaviors', 'childView', 'childViewEventPrefix', 'childViewEvents', 'childViewOptions', 'childViewTriggers', 'collectionEvents', 'events', 'filter', 'emptyView', 'emptyViewOptions', 'modelEvents', 'reorderOnSort', 'sort', 'triggers', 'ui', 'viewComparator'];

// A view that iterates over a Backbone.Collection
// and renders an individual child view for each model.
var CollectionView = Backbone.View.extend({

  // flag for maintaining the sorted order of the collection
  sort: true,

  // constructor
  // option to pass `{sort: false}` to prevent the `CollectionView` from
  // maintaining the sorted order of the collection.
  // This will fallback onto appending childView's to the end.
  //
  // option to pass `{viewComparator: compFunction()}` to allow the `CollectionView`
  // to use a custom sort order for the collection.
  constructor: function constructor(options) {
    this.render = _.bind(this.render, this);

    this._setOptions(options);

    this.mergeOptions(options, ClassOptions$3);

    monitorViewEvents(this);

    this._initBehaviors();
    this.once('render', this._initialEvents);
    this._initChildViewStorage();
    this._bufferedChildren = [];

    var args = Array.prototype.slice.call(arguments);
    args[0] = this.options;
    Backbone.View.prototype.constructor.apply(this, args);

    this.delegateEntityEvents();

    this._triggerEventOnBehaviors('initialize', this);
  },


  // Instead of inserting elements one by one into the page, it's much more performant to insert
  // elements into a document fragment and then insert that document fragment into the page
  _startBuffering: function _startBuffering() {
    this._isBuffering = true;
  },
  _endBuffering: function _endBuffering() {
    var shouldTriggerAttach = this._isAttached && this.monitorViewEvents !== false;
    var triggerOnChildren = shouldTriggerAttach ? this._getImmediateChildren() : [];

    this._isBuffering = false;

    _.each(triggerOnChildren, function (child) {
      triggerMethodOn(child, 'before:attach', child);
    });

    this.attachBuffer(this, this._createBuffer());

    _.each(triggerOnChildren, function (child) {
      child._isAttached = true;
      triggerMethodOn(child, 'attach', child);
    });

    this._bufferedChildren = [];
  },
  _getImmediateChildren: function _getImmediateChildren() {
    return _.values(this.children._views);
  },


  // Configured the initial events that the collection view binds to.
  _initialEvents: function _initialEvents() {
    if (this.collection) {
      this.listenTo(this.collection, 'add', this._onCollectionAdd);
      this.listenTo(this.collection, 'update', this._onCollectionUpdate);
      this.listenTo(this.collection, 'reset', this.render);

      if (this.sort) {
        this.listenTo(this.collection, 'sort', this._sortViews);
      }
    }
  },


  // Handle a child added to the collection
  _onCollectionAdd: function _onCollectionAdd(child, collection, opts) {
    // `index` is present when adding with `at` since BB 1.2; indexOf fallback for < 1.2
    var index = opts.at !== undefined && (opts.index || collection.indexOf(child));

    // When filtered or when there is no initial index, calculate index.
    if (this.filter || index === false) {
      index = _.indexOf(this._filteredSortedModels(index), child);
    }

    if (this._shouldAddChild(child, index)) {
      this._destroyEmptyView();
      this._addChild(child, index);
    }
  },


  // Handle collection update model removals
  _onCollectionUpdate: function _onCollectionUpdate(collection, options) {
    var changes = options.changes;
    this._removeChildModels(changes.removed);
  },


  // Remove the child views and destroy them.
  // This function also updates the indices of later views
  // in the collection in order to keep the children in sync with the collection.
  // "models" is an array of models and the corresponding views
  // will be removed and destroyed from the CollectionView
  _removeChildModels: function _removeChildModels(models) {
    // Used to determine where to update the remaining
    // sibling view indices after these views are removed.
    var removedViews = this._getRemovedViews(models);

    if (!removedViews.length) {
      return;
    }

    this.children._updateLength();

    // decrement the index of views after this one
    this._updateIndices(removedViews, false);

    if (this.isEmpty()) {
      this._showEmptyView();
    }
  },


  // Returns the views that will be used for re-indexing
  // through CollectionView#_updateIndices.
  _getRemovedViews: function _getRemovedViews(models) {
    var _this = this;

    // Returning a view means something was removed.
    return _.reduce(models, function (removingViews, model) {
      var view = model && _this.children.findByModel(model);

      if (!view || view._isDestroyed) {
        return removingViews;
      }

      _this._removeChildView(view);

      removingViews.push(view);

      return removingViews;
    }, []);
  },
  _removeChildView: function _removeChildView(view) {
    this.triggerMethod('before:remove:child', this, view);

    this.children._remove(view);
    view._shouldDisableEvents = this.monitorViewEvents === false;
    destroyView(view);

    this.stopListening(view);
    this.triggerMethod('remove:child', this, view);
  },


  // Overriding Backbone.View's `setElement` to handle
  // if an el was previously defined. If so, the view might be
  // attached on setElement.
  setElement: function setElement() {
    Backbone.View.prototype.setElement.apply(this, arguments);

    this._isAttached = isNodeAttached(this.el);

    return this;
  },


  // Render children views. Override this method to provide your own implementation of a
  // render function for the collection view.
  render: function render() {
    if (this._isDestroyed) {
      return this;
    }
    this.triggerMethod('before:render', this);
    this._renderChildren();
    this._isRendered = true;
    this.triggerMethod('render', this);
    return this;
  },


  // An efficient rendering used for filtering. Instead of modifying the whole DOM for the
  // collection view, we are only adding or removing the related childrenViews.
  setFilter: function setFilter(filter) {
    var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
        preventRender = _ref.preventRender;

    var canBeRendered = this._isRendered && !this._isDestroyed;
    var filterChanged = this.filter !== filter;
    var shouldRender = canBeRendered && filterChanged && !preventRender;

    if (shouldRender) {
      var previousModels = this._filteredSortedModels();
      this.filter = filter;
      var models = this._filteredSortedModels();
      this._applyModelDeltas(models, previousModels);
    } else {
      this.filter = filter;
    }

    return this;
  },


  // `removeFilter` is actually an alias for removing filters.
  removeFilter: function removeFilter(options) {
    return this.setFilter(null, options);
  },


  // Calculate and apply difference by cid between `models` and `previousModels`.
  _applyModelDeltas: function _applyModelDeltas(models, previousModels) {
    var _this2 = this;

    var currentIds = {};
    _.each(models, function (model, index) {
      var addedChildNotExists = !_this2.children.findByModel(model);
      if (addedChildNotExists) {
        _this2._onCollectionAdd(model, _this2.collection, { at: index });
      }
      currentIds[model.cid] = true;
    });

    var removeModels = _.filter(previousModels, function (prevModel) {
      return !currentIds[prevModel.cid] && _this2.children.findByModel(prevModel);
    });

    this._removeChildModels(removeModels);
  },


  // Reorder DOM after sorting. When your element's rendering do not use their index,
  // you can pass reorderOnSort: true to only reorder the DOM after a sort instead of
  // rendering all the collectionView.
  reorder: function reorder() {
    var _this3 = this;

    var children = this.children;
    var models = this._filteredSortedModels();

    if (!models.length && this._showingEmptyView) {
      return this;
    }

    var anyModelsAdded = _.some(models, function (model) {
      return !children.findByModel(model);
    });

    // If there are any new models added due to filtering we need to add child views,
    // so render as normal.
    if (anyModelsAdded) {
      this.render();
    } else {

      var filteredOutModels = [];

      // Get the DOM nodes in the same order as the models and
      // find the model that were children before but aren't in this new order.
      var elsToReorder = _.reduce(this.children._views, function (viewEls, view) {
        var index = _.indexOf(models, view.model);

        if (index === -1) {
          filteredOutModels.push(view.model);
          return viewEls;
        }

        view._index = index;

        viewEls[index] = view.el;

        return viewEls;
      }, new Array(models.length));

      this.triggerMethod('before:reorder', this);

      var elBuffer = this.Dom.createBuffer();

      _.each(elsToReorder, function (el) {
        _this3.Dom.appendContents(elBuffer, el);
      });

      // Since append moves elements that are already in the DOM, appending the elements
      // will effectively reorder them.
      this._appendReorderedChildren(elBuffer);

      // remove any views that have been filtered out
      this._removeChildModels(filteredOutModels);

      this.triggerMethod('reorder', this);
    }
    return this;
  },


  // Render view after sorting. Override this method to change how the view renders
  // after a `sort` on the collection.
  resortView: function resortView() {
    if (this.reorderOnSort) {
      this.reorder();
    } else {
      this._renderChildren();
    }
    return this;
  },


  // Internal method. This checks for any changes in the order of the collection.
  // If the index of any view doesn't match, it will render.
  _sortViews: function _sortViews() {
    var _this4 = this;

    var models = this._filteredSortedModels();

    // check for any changes in sort order of views
    var orderChanged = _.find(models, function (item, index) {
      var view = _this4.children.findByModel(item);
      return !view || view._index !== index;
    });

    if (orderChanged) {
      this.resortView();
    }
  },


  // Internal reference to what index a `emptyView` is.
  _emptyViewIndex: -1,

  // Internal method. Separated so that CompositeView can append to the childViewContainer
  // if necessary
  _appendReorderedChildren: function _appendReorderedChildren(children) {
    this.Dom.appendContents(this.el, children, { _$el: this.$el });
  },


  // Internal method. Separated so that CompositeView can have more control over events
  // being triggered, around the rendering process
  _renderChildren: function _renderChildren() {
    if (this._isRendered) {
      this._destroyEmptyView();
      this._destroyChildren();
    }

    var models = this._filteredSortedModels();
    if (this.isEmpty({ processedModels: models })) {
      this._showEmptyView();
    } else {
      this.triggerMethod('before:render:children', this);
      this._startBuffering();
      this._showCollection(models);
      this._endBuffering();
      this.triggerMethod('render:children', this);
    }
  },
  _createView: function _createView(model, index) {
    var ChildView = this._getChildView(model);
    var childViewOptions = this._getChildViewOptions(model, index);
    var view = this.buildChildView(model, ChildView, childViewOptions);
    return view;
  },
  _setupChildView: function _setupChildView(view, index) {
    monitorViewEvents(view);

    // set up the child view event forwarding
    this._proxyChildViewEvents(view);

    if (this.sort) {
      view._index = index;
    }
  },


  // Internal method to loop through collection and show each child view.
  _showCollection: function _showCollection(models) {
    _.each(models, _.bind(this._addChild, this));
    this.children._updateLength();
  },


  // Allow the collection to be sorted by a custom view comparator
  _filteredSortedModels: function _filteredSortedModels(addedAt) {
    if (!this.collection || !this.collection.length) {
      return [];
    }

    var viewComparator = this.getViewComparator();
    var models = this.collection.models;
    addedAt = Math.min(Math.max(addedAt, 0), models.length - 1);

    if (viewComparator) {
      var addedModel = void 0;
      // Preserve `at` location, even for a sorted view
      if (addedAt) {
        addedModel = models[addedAt];
        models = models.slice(0, addedAt).concat(models.slice(addedAt + 1));
      }
      models = this._sortModelsBy(models, viewComparator);
      if (addedModel) {
        models.splice(addedAt, 0, addedModel);
      }
    }

    // Filter after sorting in case the filter uses the index
    models = this._filterModels(models);

    return models;
  },
  getViewComparator: function getViewComparator() {
    return this.viewComparator;
  },


  // Filter an array of models, if a filter exists
  _filterModels: function _filterModels(models) {
    var _this5 = this;

    if (this.filter) {
      models = _.filter(models, function (model, index) {
        return _this5._shouldAddChild(model, index);
      });
    }
    return models;
  },
  _sortModelsBy: function _sortModelsBy(models, comparator) {
    if (typeof comparator === 'string') {
      return _.sortBy(models, function (model) {
        return model.get(comparator);
      });
    } else if (comparator.length === 1) {
      return _.sortBy(models, _.bind(comparator, this));
    } else {
      return _.clone(models).sort(_.bind(comparator, this));
    }
  },


  // Internal method to show an empty view in place of a collection of child views,
  // when the collection is empty
  _showEmptyView: function _showEmptyView() {
    var EmptyView = this._getEmptyView();

    if (EmptyView && !this._showingEmptyView) {
      this._showingEmptyView = true;

      var model = new Backbone.Model();
      var emptyViewOptions = this.emptyViewOptions || this.childViewOptions;
      if (_.isFunction(emptyViewOptions)) {
        emptyViewOptions = emptyViewOptions.call(this, model, this._emptyViewIndex);
      }

      var view = this.buildChildView(model, EmptyView, emptyViewOptions);

      this.triggerMethod('before:render:empty', this, view);
      this.addChildView(view, 0);
      this.triggerMethod('render:empty', this, view);
    }
  },


  // Internal method to destroy an existing emptyView instance if one exists. Called when
  // a collection view has been rendered empty, and then a child is added to the collection.
  _destroyEmptyView: function _destroyEmptyView() {
    if (this._showingEmptyView) {
      this.triggerMethod('before:remove:empty', this);

      this._destroyChildren();
      delete this._showingEmptyView;

      this.triggerMethod('remove:empty', this);
    }
  },


  // Retrieve the empty view class
  _getEmptyView: function _getEmptyView() {
    var emptyView = this.emptyView;

    if (!emptyView) {
      return;
    }

    return this._getView(emptyView);
  },


  // Retrieve the `childView` class
  // The `childView` property can be either a view class or a function that
  // returns a view class. If it is a function, it will receive the model that
  // will be passed to the view instance (created from the returned view class)
  _getChildView: function _getChildView(child) {
    var childView = this.childView;

    if (!childView) {
      throw new MarionetteError({
        name: 'NoChildViewError',
        message: 'A "childView" must be specified'
      });
    }

    childView = this._getView(childView, child);

    if (!childView) {
      throw new MarionetteError({
        name: 'InvalidChildViewError',
        message: '"childView" must be a view class or a function that returns a view class'
      });
    }

    return childView;
  },


  // First check if the `view` is a view class (the common case)
  // Then check if it's a function (which we assume that returns a view class)
  _getView: function _getView(view, child) {
    if (view.prototype instanceof Backbone.View || view === Backbone.View) {
      return view;
    } else if (_.isFunction(view)) {
      return view.call(this, child);
    }
  },


  // Internal method for building and adding a child view
  _addChild: function _addChild(child, index) {
    var view = this._createView(child, index);
    this.addChildView(view, index);

    return view;
  },
  _getChildViewOptions: function _getChildViewOptions(child, index) {
    if (_.isFunction(this.childViewOptions)) {
      return this.childViewOptions(child, index);
    }

    return this.childViewOptions;
  },


  // Render the child's view and add it to the HTML for the collection view at a given index.
  // This will also update the indices of later views in the collection in order to keep the
  // children in sync with the collection.
  addChildView: function addChildView(view, index) {
    this.triggerMethod('before:add:child', this, view);
    this._setupChildView(view, index);

    // Store the child view itself so we can properly remove and/or destroy it later
    if (this._isBuffering) {
      // Add to children, but don't update children's length.
      this.children._add(view);
    } else {
      // increment indices of views after this one
      this._updateIndices(view, true);
      this.children.add(view);
    }

    renderView(view);

    this._attachView(view, index);

    this.triggerMethod('add:child', this, view);

    return view;
  },


  // Internal method. This decrements or increments the indices of views after the added/removed
  // view to keep in sync with the collection.
  _updateIndices: function _updateIndices(views, increment) {
    if (!this.sort) {
      return;
    }

    if (!increment) {
      _.each(_.sortBy(this.children._views, '_index'), function (view, index) {
        view._index = index;
      });

      return;
    }

    var view = _.isArray(views) ? _.max(views, '_index') : views;

    if (_.isObject(view)) {
      // update the indexes of views after this one
      _.each(this.children._views, function (laterView) {
        if (laterView._index >= view._index) {
          laterView._index += 1;
        }
      });
    }
  },
  _attachView: function _attachView(view, index) {
    // Only trigger attach if already attached and not buffering,
    // otherwise _endBuffering() or Region#show() handles this.
    var shouldTriggerAttach = !view._isAttached && !this._isBuffering && this._isAttached && this.monitorViewEvents !== false;

    if (shouldTriggerAttach) {
      triggerMethodOn(view, 'before:attach', view);
    }

    this.attachHtml(this, view, index);

    if (shouldTriggerAttach) {
      view._isAttached = true;
      triggerMethodOn(view, 'attach', view);
    }
  },


  // Build a `childView` for a model in the collection.
  buildChildView: function buildChildView(child, ChildViewClass, childViewOptions) {
    var options = _.extend({ model: child }, childViewOptions);
    return new ChildViewClass(options);
  },


  // Remove the child view and destroy it. This function also updates the indices of later views
  // in the collection in order to keep the children in sync with the collection.
  removeChildView: function removeChildView(view) {
    if (!view || view._isDestroyed) {
      return view;
    }

    this._removeChildView(view);
    this.children._updateLength();
    // decrement the index of views after this one
    this._updateIndices(view, false);
    return view;
  },


  // check if the collection is empty or optionally whether an array of pre-processed models is empty
  isEmpty: function isEmpty(options) {
    var models = void 0;
    if (_.result(options, 'processedModels')) {
      models = options.processedModels;
    } else {
      models = this.collection ? this.collection.models : [];
      models = this._filterModels(models);
    }
    return models.length === 0;
  },


  // You might need to override this if you've overridden attachHtml
  attachBuffer: function attachBuffer(collectionView, buffer) {
    this.Dom.appendContents(collectionView.el, buffer, { _$el: collectionView.$el });
  },


  // Create a fragment buffer from the currently buffered children
  _createBuffer: function _createBuffer() {
    var _this6 = this;

    var elBuffer = this.Dom.createBuffer();
    _.each(this._bufferedChildren, function (b) {
      _this6.Dom.appendContents(elBuffer, b.el, { _$contents: b.$el });
    });
    return elBuffer;
  },


  // Append the HTML to the collection's `el`. Override this method to do something other
  // than `.append`.
  attachHtml: function attachHtml(collectionView, childView, index) {
    if (collectionView._isBuffering) {
      // buffering happens on reset events and initial renders
      // in order to reduce the number of inserts into the
      // document, which are expensive.
      collectionView._bufferedChildren.splice(index, 0, childView);
    } else {
      // If we've already rendered the main collection, append
      // the new child into the correct order if we need to. Otherwise
      // append to the end.
      if (!collectionView._insertBefore(childView, index)) {
        collectionView._insertAfter(childView);
      }
    }
  },


  // Internal method. Check whether we need to insert the view into the correct position.
  _insertBefore: function _insertBefore(childView, index) {
    var currentView = void 0;
    var findPosition = this.sort && index < this.children.length - 1;
    if (findPosition) {
      // Find the view after this one
      currentView = _.find(this.children._views, function (view) {
        return view._index === index + 1;
      });
    }

    if (currentView) {
      this.beforeEl(currentView.el, childView.el);
      return true;
    }

    return false;
  },


  // Override to handle DOM inserting differently
  beforeEl: function beforeEl(el, siblings) {
    this.$(el).before(siblings);
  },


  // Internal method. Append a view to the end of the $el
  _insertAfter: function _insertAfter(childView) {
    this.Dom.appendContents(this.el, childView.el, { _$el: this.$el, _$contents: childView.$el });
  },


  // Internal method to set up the `children` object for storing all of the child views
  _initChildViewStorage: function _initChildViewStorage() {
    this.children = new Container();
  },


  // called by ViewMixin destroy
  _removeChildren: function _removeChildren() {
    this._destroyChildren();
  },


  // Destroy the child views that this collection view is holding on to, if any
  _destroyChildren: function _destroyChildren(options) {
    if (!this.children.length) {
      return;
    }

    this.triggerMethod('before:destroy:children', this);
    _.each(this.children._views, _.bind(this._removeChildView, this));
    this.children._updateLength();
    this.triggerMethod('destroy:children', this);
  },


  // Return true if the given child should be shown. Return false otherwise.
  // The filter will be passed (child, index, collection), where
  //  'child' is the given model
  //  'index' is the index of that model in the collection
  //  'collection' is the collection referenced by this CollectionView
  _shouldAddChild: function _shouldAddChild(child, index) {
    var filter = this.filter;
    return !_.isFunction(filter) || filter.call(this, child, index, this.collection);
  }
}, {
  setDomApi: setDomApi
});

_.extend(CollectionView.prototype, ViewMixin);

// Provide a container to store, retrieve and
// shut down child views.
var Container$1 = function Container() {
  this._init();
};

emulateCollection(Container$1.prototype, '_views');

function stringComparator(comparator, view) {
  return view.model && view.model.get(comparator);
}

// Container Methods
// -----------------

_.extend(Container$1.prototype, {

  // Initializes an empty container
  _init: function _init() {
    this._views = [];
    this._viewsByCid = {};
    this._indexByModel = {};
    this._updateLength();
  },


  // Add a view to this container. Stores the view
  // by `cid` and makes it searchable by the model
  // cid (and model itself). Additionally it stores
  // the view by index in the _views array
  _add: function _add(view) {
    var index = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this._views.length;

    var viewCid = view.cid;

    // store the view
    this._viewsByCid[viewCid] = view;

    // index it by model
    if (view.model) {
      this._indexByModel[view.model.cid] = viewCid;
    }

    // add to end by default
    this._views.splice(index, 0, view);

    this._updateLength();
  },


  // Sort (mutate) and return the array of the child views.
  _sort: function _sort(comparator, context) {
    if (typeof comparator === 'string') {
      comparator = _.partial(stringComparator, comparator);
      return this._sortBy(comparator);
    }

    if (comparator.length === 1) {
      return this._sortBy(_.bind(comparator, context));
    }

    return this._views.sort(_.bind(comparator, context));
  },


  // Makes `_.sortBy` mutate the array to match `this._views.sort`
  _sortBy: function _sortBy(comparator) {
    var sortedViews = _.sortBy(this._views, comparator);

    this._set(sortedViews);

    return sortedViews;
  },


  // Replace array contents without overwriting the reference.
  _set: function _set(views) {
    this._views.length = 0;

    this._views.push.apply(this._views, views.slice(0));

    this._updateLength();
  },


  // Swap views by index
  _swap: function _swap(view1, view2) {
    var view1Index = this.findIndexByView(view1);
    var view2Index = this.findIndexByView(view2);

    if (view1Index === -1 || view2Index === -1) {
      return;
    }

    var swapView = this._views[view1Index];
    this._views[view1Index] = this._views[view2Index];
    this._views[view2Index] = swapView;
  },


  // Find a view by the model that was attached to it.
  // Uses the model's `cid` to find it.
  findByModel: function findByModel(model) {
    return this.findByModelCid(model.cid);
  },


  // Find a view by the `cid` of the model that was attached to it.
  // Uses the model's `cid` to find the view `cid` and
  // retrieve the view using it.
  findByModelCid: function findByModelCid(modelCid) {
    var viewCid = this._indexByModel[modelCid];
    return this.findByCid(viewCid);
  },


  // Find a view by index.
  findByIndex: function findByIndex(index) {
    return this._views[index];
  },


  // Find the index of a view instance
  findIndexByView: function findIndexByView(view) {
    return this._views.indexOf(view);
  },


  // Retrieve a view by its `cid` directly
  findByCid: function findByCid(cid) {
    return this._viewsByCid[cid];
  },
  hasView: function hasView(view) {
    return !!this.findByCid(view.cid);
  },


  // Remove a view and clean up index references.
  _remove: function _remove(view) {
    if (!this._viewsByCid[view.cid]) {
      return;
    }

    // delete model index
    if (view.model) {
      delete this._indexByModel[view.model.cid];
    }

    // remove the view from the container
    delete this._viewsByCid[view.cid];

    var index = this.findIndexByView(view);
    this._views.splice(index, 1);

    this._updateLength();
  },


  // Update the `.length` attribute on this container
  _updateLength: function _updateLength() {
    this.length = this._views.length;
  }
});

// Next Collection View
// ---------------

var ClassOptions$4 = ['behaviors', 'childView', 'childViewEventPrefix', 'childViewEvents', 'childViewOptions', 'childViewTriggers', 'collectionEvents', 'emptyView', 'emptyViewOptions', 'events', 'modelEvents', 'sortWithCollection', 'triggers', 'ui', 'viewComparator', 'viewFilter'];

// A view that iterates over a Backbone.Collection
// and renders an individual child view for each model.
var CollectionView$2 = Backbone.View.extend({
  // flag for maintaining the sorted order of the collection
  sortWithCollection: true,

  // constructor
  constructor: function constructor(options) {
    this._setOptions(options);

    this.mergeOptions(options, ClassOptions$4);

    monitorViewEvents(this);

    this.once('render', this._initialEvents);

    // This children container isn't really used by a render, but it provides
    // the ability to check `this.children.length` prior to rendering
    // It also allows for cases where only addChildView is used
    this._initChildViewStorage();
    this._initBehaviors();

    var args = Array.prototype.slice.call(arguments);
    args[0] = this.options;
    Backbone.View.prototype.constructor.apply(this, args);

    // Init empty region
    this.getEmptyRegion();

    this.delegateEntityEvents();

    this._triggerEventOnBehaviors('initialize', this);
  },


  // Internal method to set up the `children` object for storing all of the child views
  _initChildViewStorage: function _initChildViewStorage() {
    this.children = new Container$1();
  },


  // Create an region to show the emptyView
  getEmptyRegion: function getEmptyRegion() {
    if (this._emptyRegion && !this._emptyRegion.isDestroyed()) {
      return this._emptyRegion;
    }

    this._emptyRegion = new Region({ el: this.el, replaceElement: false });

    this._emptyRegion._parentView = this;

    return this._emptyRegion;
  },


  // Configured the initial events that the collection view binds to.
  _initialEvents: function _initialEvents() {
    this.listenTo(this.collection, {
      'sort': this._onCollectionSort,
      'reset': this._onCollectionReset,
      'update': this._onCollectionUpdate
    });
  },


  // Internal method. This checks for any changes in the order of the collection.
  // If the index of any view doesn't match, it will re-sort.
  _onCollectionSort: function _onCollectionSort(collection, _ref) {
    var add = _ref.add,
        merge = _ref.merge,
        remove = _ref.remove;

    if (!this.sortWithCollection || this.viewComparator === false) {
      return;
    }

    // If the data is changing we will handle the sort later in `_onCollectionUpdate`
    if (add || remove || merge) {
      return;
    }

    // If the only thing happening here is sorting, sort.
    this.sort();
  },
  _onCollectionReset: function _onCollectionReset() {
    this.render();
  },


  // Handle collection update model additions and  removals
  _onCollectionUpdate: function _onCollectionUpdate(collection, options) {
    var changes = options.changes;

    // Remove first since it'll be a shorter array lookup.
    var removedViews = changes.removed.length && this._removeChildModels(changes.removed);

    this._addedViews = changes.added.length && this._addChildModels(changes.added);

    this._detachChildren(removedViews);

    this._showChildren();

    // Destroy removed child views after all of the render is complete
    this._removeChildViews(removedViews);
  },
  _removeChildModels: function _removeChildModels(models) {
    var _this = this;

    return _.reduce(models, function (views, model) {
      var removeView = _this._removeChildModel(model);

      if (removeView) {
        views.push(removeView);
      }

      return views;
    }, []);
  },
  _removeChildModel: function _removeChildModel(model) {
    var view = this.children.findByModel(model);

    if (view) {
      this._removeChild(view);
    }

    return view;
  },
  _removeChild: function _removeChild(view) {
    this.triggerMethod('before:remove:child', this, view);

    this.children._remove(view);

    this.triggerMethod('remove:child', this, view);
  },


  // Added views are returned for consistency with _removeChildModels
  _addChildModels: function _addChildModels(models) {
    return _.map(models, _.bind(this._addChildModel, this));
  },
  _addChildModel: function _addChildModel(model) {
    var view = this._createChildView(model);

    this._addChild(view);

    return view;
  },
  _createChildView: function _createChildView(model) {
    var ChildView = this._getChildView(model);
    var childViewOptions = this._getChildViewOptions(model);
    var view = this.buildChildView(model, ChildView, childViewOptions);

    return view;
  },
  _addChild: function _addChild(view, index) {
    this.triggerMethod('before:add:child', this, view);

    this._setupChildView(view);
    this.children._add(view, index);

    this.triggerMethod('add:child', this, view);
  },


  // Retrieve the `childView` class
  // The `childView` property can be either a view class or a function that
  // returns a view class. If it is a function, it will receive the model that
  // will be passed to the view instance (created from the returned view class)
  _getChildView: function _getChildView(child) {
    var childView = this.childView;

    if (!childView) {
      throw new MarionetteError({
        name: 'NoChildViewError',
        message: 'A "childView" must be specified'
      });
    }

    childView = this._getView(childView, child);

    if (!childView) {
      throw new MarionetteError({
        name: 'InvalidChildViewError',
        message: '"childView" must be a view class or a function that returns a view class'
      });
    }

    return childView;
  },


  // First check if the `view` is a view class (the common case)
  // Then check if it's a function (which we assume that returns a view class)
  _getView: function _getView(view, child) {
    if (view.prototype instanceof Backbone.View || view === Backbone.View) {
      return view;
    } else if (_.isFunction(view)) {
      return view.call(this, child);
    }
  },
  _getChildViewOptions: function _getChildViewOptions(child) {
    if (_.isFunction(this.childViewOptions)) {
      return this.childViewOptions(child);
    }

    return this.childViewOptions;
  },


  // Build a `childView` for a model in the collection.
  // Override to customize the build
  buildChildView: function buildChildView(child, ChildViewClass, childViewOptions) {
    var options = _.extend({ model: child }, childViewOptions);
    return new ChildViewClass(options);
  },
  _setupChildView: function _setupChildView(view) {
    monitorViewEvents(view);

    // We need to listen for if a view is destroyed in a way other
    // than through the CollectionView.
    // If this happens we need to remove the reference to the view
    // since once a view has been destroyed we can not reuse it.
    view.on('destroy', this.removeChildView, this);

    // set up the child view event forwarding
    this._proxyChildViewEvents(view);
  },


  // used by ViewMixin's `_childViewEventHandler`
  _getImmediateChildren: function _getImmediateChildren() {
    return this.children._views;
  },


  // Overriding Backbone.View's `setElement` to handle
  // if an el was previously defined. If so, the view might be
  // attached on setElement.
  setElement: function setElement() {
    Backbone.View.prototype.setElement.apply(this, arguments);

    this._isAttached = isNodeAttached(this.el);

    return this;
  },


  // Render children views.
  render: function render() {
    if (this._isDestroyed) {
      return this;
    }
    this.triggerMethod('before:render', this);

    this._destroyChildren();

    // After all children have been destroyed re-init the container
    this.children._init();

    if (this.collection) {
      this._addChildModels(this.collection.models);
    }

    this._showChildren();

    this._isRendered = true;

    this.triggerMethod('render', this);
    return this;
  },


  // Sorts the children then filters and renders the results.
  sort: function sort() {
    if (this._isDestroyed) {
      return this;
    }

    if (!this.children.length) {
      return this;
    }

    this._showChildren();

    return this;
  },
  _showChildren: function _showChildren() {
    if (this.isEmpty()) {
      this._showEmptyView();
      return;
    }

    this._sortChildren();

    this.filter();
  },


  // Returns true if the collectionView is considered empty.
  // This is called twice during a render. Once to check the data,
  // and again when views are filtered. Override this function to
  // customize what empty means.
  isEmpty: function isEmpty(allViewsFiltered) {
    return allViewsFiltered || !this.children.length;
  },
  _showEmptyView: function _showEmptyView() {
    var EmptyView = this._getEmptyView();

    if (!EmptyView) {
      return;
    }

    var options = this._getEmptyViewOptions();

    var emptyRegion = this.getEmptyRegion();

    emptyRegion.show(new EmptyView(options));
  },


  // Retrieve the empty view class
  _getEmptyView: function _getEmptyView() {
    var emptyView = this.emptyView;

    if (!emptyView) {
      return;
    }

    return this._getView(emptyView);
  },


  // Remove the emptyView
  _destroyEmptyView: function _destroyEmptyView() {
    var emptyRegion = this.getEmptyRegion();
    // Only empty if a view is show so the region
    // doesn't detach any other unrelated HTML
    if (emptyRegion.hasView()) {
      emptyRegion.empty();
    }
  },


  //
  _getEmptyViewOptions: function _getEmptyViewOptions() {
    var emptyViewOptions = this.emptyViewOptions || this.childViewOptions;

    if (_.isFunction(emptyViewOptions)) {
      return emptyViewOptions.call(this);
    }

    return emptyViewOptions;
  },


  // Sorts views by viewComparator and sets the children to the new order
  _sortChildren: function _sortChildren() {
    var viewComparator = this.getComparator();

    if (!viewComparator) {
      return;
    }

    // If children are sorted prevent added to end perf
    delete this._addedViews;

    this.triggerMethod('before:sort', this);

    this.children._sort(viewComparator, this);

    this.triggerMethod('sort', this);
  },


  // Sets the view's `viewComparator` and applies the sort if the view is ready.
  // To prevent the render pass `{ preventRender: true }` as the 2nd argument.
  setComparator: function setComparator(comparator) {
    var _ref2 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
        preventRender = _ref2.preventRender;

    var comparatorChanged = this.viewComparator !== comparator;
    var shouldSort = comparatorChanged && !preventRender;

    this.viewComparator = comparator;

    if (shouldSort) {
      this.sort();
    }

    return this;
  },


  // Clears the `viewComparator` and follows the same rules for rendering as `setComparator`.
  removeComparator: function removeComparator(options) {
    return this.setComparator(null, options);
  },


  // If viewComparator is overriden it will be returned here.
  // Additionally override this function to provide custom
  // viewComparator logic
  getComparator: function getComparator() {
    if (this.viewComparator) {
      return this.viewComparator;
    }

    if (!this.sortWithCollection || this.viewComparator === false || !this.collection) {
      return false;
    }

    return this._viewComparator;
  },


  // Default internal view comparator that order the views by
  // the order of the collection
  _viewComparator: function _viewComparator(view) {
    return this.collection.indexOf(view.model);
  },


  // This method re-filters the children views and re-renders the results
  filter: function filter() {
    if (this._isDestroyed) {
      return this;
    }

    if (!this.children.length) {
      return this;
    }

    var filteredViews = this._filterChildren();

    this._renderChildren(filteredViews);

    return this;
  },
  _filterChildren: function _filterChildren() {
    var _this2 = this;

    var viewFilter = this._getFilter();
    var addedViews = this._addedViews;

    delete this._addedViews;

    if (!viewFilter) {
      if (addedViews) {
        return addedViews;
      }

      return this.children._views;
    }

    this.triggerMethod('before:filter', this);

    var attachViews = [];
    var detachViews = [];

    _.each(this.children._views, function (view, key, children) {
      (viewFilter.call(_this2, view, key, children) ? attachViews : detachViews).push(view);
    });

    this._detachChildren(detachViews);

    this.triggerMethod('filter', this, attachViews, detachViews);

    return attachViews;
  },


  // This method returns a function for the viewFilter
  _getFilter: function _getFilter() {
    var viewFilter = this.getFilter();

    if (!viewFilter) {
      return false;
    }

    if (_.isFunction(viewFilter)) {
      return viewFilter;
    }

    // Support filter predicates `{ fooFlag: true }`
    if (_.isObject(viewFilter)) {
      var matcher = _.matches(viewFilter);
      return function (view) {
        return matcher(view.model && view.model.attributes);
      };
    }

    // Filter by model attribute
    if (_.isString(viewFilter)) {
      return function (view) {
        return view.model && view.model.get(viewFilter);
      };
    }

    throw new MarionetteError({
      name: 'InvalidViewFilterError',
      message: '"viewFilter" must be a function, predicate object literal, a string indicating a model attribute, or falsy'
    });
  },


  // Override this function to provide custom
  // viewFilter logic
  getFilter: function getFilter() {
    return this.viewFilter;
  },


  // Sets the view's `viewFilter` and applies the filter if the view is ready.
  // To prevent the render pass `{ preventRender: true }` as the 2nd argument.
  setFilter: function setFilter(filter) {
    var _ref3 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
        preventRender = _ref3.preventRender;

    var filterChanged = this.viewFilter !== filter;
    var shouldRender = filterChanged && !preventRender;

    this.viewFilter = filter;

    if (shouldRender) {
      this.filter();
    }

    return this;
  },


  // Clears the `viewFilter` and follows the same rules for rendering as `setFilter`.
  removeFilter: function removeFilter(options) {
    return this.setFilter(null, options);
  },
  _detachChildren: function _detachChildren(detachingViews) {
    _.each(detachingViews, _.bind(this._detachChildView, this));
  },
  _detachChildView: function _detachChildView(view) {
    var shouldTriggerDetach = view._isAttached && this.monitorViewEvents !== false;
    if (shouldTriggerDetach) {
      triggerMethodOn(view, 'before:detach', view);
    }

    this.detachHtml(view);

    if (shouldTriggerDetach) {
      view._isAttached = false;
      triggerMethodOn(view, 'detach', view);
    }
  },


  // Override this method to change how the collectionView detaches a child view
  detachHtml: function detachHtml(view) {
    this.Dom.detachEl(view.el, view.$el);
  },
  _renderChildren: function _renderChildren(views) {
    if (this.isEmpty(!views.length)) {
      this._showEmptyView();
      return;
    }

    this._destroyEmptyView();

    this.triggerMethod('before:render:children', this, views);

    var els = this._getBuffer(views);

    this._attachChildren(els, views);

    this.triggerMethod('render:children', this, views);
  },
  _attachChildren: function _attachChildren(els, views) {
    var shouldTriggerAttach = this._isAttached && this.monitorViewEvents !== false;

    views = shouldTriggerAttach ? views : [];

    _.each(views, function (view) {
      if (view._isAttached) {
        return;
      }
      triggerMethodOn(view, 'before:attach', view);
    });

    this.attachHtml(els);

    _.each(views, function (view) {
      if (view._isAttached) {
        return;
      }
      view._isAttached = true;
      triggerMethodOn(view, 'attach', view);
    });
  },


  // Renders each view in children and creates a fragment buffer from them
  _getBuffer: function _getBuffer(views) {
    var _this3 = this;

    var elBuffer = this.Dom.createBuffer();

    _.each(views, function (view) {
      renderView(view);
      _this3.Dom.appendContents(elBuffer, view.el, { _$contents: view.$el });
    });

    return elBuffer;
  },


  // Override this method to do something other than `.append`.
  // You can attach any HTML at this point including the els.
  attachHtml: function attachHtml(els) {
    this.Dom.appendContents(this.el, els, { _$el: this.$el });
  },
  swapChildViews: function swapChildViews(view1, view2) {
    if (!this.children.hasView(view1) || !this.children.hasView(view2)) {
      throw new MarionetteError({
        name: 'ChildSwapError',
        message: 'Both views must be children of the collection view'
      });
    }

    this.children._swap(view1, view2);
    this.Dom.swapEl(view1.el, view2.el);

    // If the views are not filtered the same, refilter
    if (this.Dom.hasEl(this.el, view1.el) !== this.Dom.hasEl(this.el, view2.el)) {
      this.filter();
    }

    return this;
  },


  // Render the child's view and add it to the HTML for the collection view at a given index, based on the current sort
  addChildView: function addChildView(view, index) {
    if (!view || view._isDestroyed) {
      return view;
    }

    // Only cache views if added to the end
    if (!index || index >= this.children.length) {
      this._addedViews = [view];
    }
    this._addChild(view, index);
    this._showChildren();

    return view;
  },


  // Detach a view from the children.  Best used when adding a
  // childView from `addChildView`
  detachChildView: function detachChildView(view) {
    this.removeChildView(view, { shouldDetach: true });

    return view;
  },


  // Remove the child view and destroy it.  Best used when adding a
  // childView from `addChildView`
  // The options argument is for internal use only
  removeChildView: function removeChildView(view, options) {
    if (!view) {
      return view;
    }

    this._removeChildView(view, options);

    this._removeChild(view);

    if (this.isEmpty()) {
      this._showEmptyView();
    }

    return view;
  },
  _removeChildViews: function _removeChildViews(views) {
    _.each(views, _.bind(this._removeChildView, this));
  },
  _removeChildView: function _removeChildView(view) {
    var _ref4 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
        shouldDetach = _ref4.shouldDetach;

    view.off('destroy', this.removeChildView, this);

    if (shouldDetach) {
      this._detachChildView(view);
    } else {
      this._destroyChildView(view);
    }

    this.stopListening(view);
  },
  _destroyChildView: function _destroyChildView(view) {
    if (view._isDestroyed) {
      return;
    }

    view._shouldDisableEvents = this.monitorViewEvents === false;
    destroyView(view);
  },


  // called by ViewMixin destroy
  _removeChildren: function _removeChildren() {
    this._destroyChildren();
    var emptyRegion = this.getEmptyRegion();
    emptyRegion.destroy();
    delete this._addedViews;
  },


  // Destroy the child views that this collection view is holding on to, if any
  _destroyChildren: function _destroyChildren() {
    if (!this.children || !this.children.length) {
      return;
    }

    this.triggerMethod('before:destroy:children', this);
    if (this.monitorViewEvents === false) {
      this.Dom.detachContents(this.el, this.$el);
    }
    _.each(this.children._views, _.bind(this._removeChildView, this));
    this.triggerMethod('destroy:children', this);
  }
}, {
  setDomApi: setDomApi
});

_.extend(CollectionView$2.prototype, ViewMixin);

// Composite View
// --------------

var ClassOptions$5 = ['childViewContainer', 'template', 'templateContext'];

// Used for rendering a branch-leaf, hierarchical structure.
// Extends directly from CollectionView
// @deprecated
var CompositeView = CollectionView.extend({

  // Setting up the inheritance chain which allows changes to
  // Marionette.CollectionView.prototype.constructor which allows overriding
  // option to pass '{sort: false}' to prevent the CompositeView from
  // maintaining the sorted order of the collection.
  // This will fallback onto appending childView's to the end.
  constructor: function constructor(options) {
    deprecate('CompositeView is deprecated. Convert to View at your earliest convenience');

    this.mergeOptions(options, ClassOptions$5);

    CollectionView.prototype.constructor.apply(this, arguments);
  },


  // Configured the initial events that the composite view
  // binds to. Override this method to prevent the initial
  // events, or to add your own initial events.
  _initialEvents: function _initialEvents() {

    // Bind only after composite view is rendered to avoid adding child views
    // to nonexistent childViewContainer

    if (this.collection) {
      this.listenTo(this.collection, 'add', this._onCollectionAdd);
      this.listenTo(this.collection, 'update', this._onCollectionUpdate);
      this.listenTo(this.collection, 'reset', this.renderChildren);

      if (this.sort) {
        this.listenTo(this.collection, 'sort', this._sortViews);
      }
    }
  },


  // Retrieve the `childView` to be used when rendering each of
  // the items in the collection. The default is to return
  // `this.childView` or Marionette.CompositeView if no `childView`
  // has been defined. As happens in CollectionView, `childView` can
  // be a function (which should return a view class).
  _getChildView: function _getChildView(child) {
    var childView = this.childView;

    // for CompositeView, if `childView` is not specified, we'll get the same
    // composite view class rendered for each child in the collection
    // then check if the `childView` is a view class (the common case)
    // finally check if it's a function (which we assume that returns a view class)
    if (!childView) {
      return this.constructor;
    }

    childView = this._getView(childView, child);

    if (!childView) {
      throw new MarionetteError({
        name: 'InvalidChildViewError',
        message: '"childView" must be a view class or a function that returns a view class'
      });
    }

    return childView;
  },


  // Return the serialized model
  serializeData: function serializeData() {
    return this.serializeModel();
  },


  // Renders the model and the collection.
  render: function render() {
    if (this._isDestroyed) {
      return this;
    }
    this._isRendering = true;
    this.resetChildViewContainer();

    this.triggerMethod('before:render', this);

    this._renderTemplate();
    this.bindUIElements();
    this.renderChildren();

    this._isRendering = false;
    this._isRendered = true;
    this.triggerMethod('render', this);
    return this;
  },
  renderChildren: function renderChildren() {
    if (this._isRendered || this._isRendering) {
      CollectionView.prototype._renderChildren.call(this);
    }
  },


  // You might need to override this if you've overridden attachHtml
  attachBuffer: function attachBuffer(compositeView, buffer) {
    var $container = this.getChildViewContainer(compositeView);
    this.Dom.appendContents($container[0], buffer, { _$el: $container });
  },


  // Internal method. Append a view to the end of the $el.
  // Overidden from CollectionView to ensure view is appended to
  // childViewContainer
  _insertAfter: function _insertAfter(childView) {
    var $container = this.getChildViewContainer(this, childView);
    this.Dom.appendContents($container[0], childView.el, { _$el: $container, _$contents: childView.$el });
  },


  // Internal method. Append reordered childView'.
  // Overidden from CollectionView to ensure reordered views
  // are appended to childViewContainer
  _appendReorderedChildren: function _appendReorderedChildren(children) {
    var $container = this.getChildViewContainer(this);
    this.Dom.appendContents($container[0], children, { _$el: $container });
  },


  // Internal method to ensure an `$childViewContainer` exists, for the
  // `attachHtml` method to use.
  getChildViewContainer: function getChildViewContainer(containerView, childView) {
    if (!!containerView.$childViewContainer) {
      return containerView.$childViewContainer;
    }

    var container = void 0;
    var childViewContainer = containerView.childViewContainer;
    if (childViewContainer) {

      var selector = _.result(containerView, 'childViewContainer');

      if (selector.charAt(0) === '@' && containerView.ui) {
        container = containerView.ui[selector.substr(4)];
      } else {
        container = this.$(selector);
      }

      if (container.length <= 0) {
        throw new MarionetteError({
          name: 'ChildViewContainerMissingError',
          message: 'The specified "childViewContainer" was not found: ' + containerView.childViewContainer
        });
      }
    } else {
      container = containerView.$el;
    }

    containerView.$childViewContainer = container;
    return container;
  },


  // Internal method to reset the `$childViewContainer` on render
  resetChildViewContainer: function resetChildViewContainer() {
    if (this.$childViewContainer) {
      this.$childViewContainer = undefined;
    }
  }
});

// To prevent duplication but allow the best View organization
// Certain View methods are mixed directly into the deprecated CompositeView
var MixinFromView = _.pick(View.prototype, 'serializeModel', 'getTemplate', '_renderTemplate', '_renderHtml', 'mixinTemplateContext', 'attachElContent');
_.extend(CompositeView.prototype, MixinFromView);

// Behavior
// --------

// A Behavior is an isolated set of DOM /
// user interactions that can be mixed into any View.
// Behaviors allow you to blackbox View specific interactions
// into portable logical chunks, keeping your views simple and your code DRY.

var ClassOptions$6 = ['collectionEvents', 'events', 'modelEvents', 'triggers', 'ui'];

var Behavior = MarionetteObject.extend({
  cidPrefix: 'mnb',

  constructor: function constructor(options, view) {
    // Setup reference to the view.
    // this comes in handle when a behavior
    // wants to directly talk up the chain
    // to the view.
    this.view = view;

    if (this.defaults) {
      deprecate('Behavior defaults are deprecated. For similar functionality set options on the Behavior class.');
    }

    this.defaults = _.clone(_.result(this, 'defaults', {}));

    this._setOptions(_.extend({}, this.defaults, options));
    this.mergeOptions(this.options, ClassOptions$6);

    // Construct an internal UI hash using
    // the behaviors UI hash and then the view UI hash.
    // This allows the user to use UI hash elements
    // defined in the parent view as well as those
    // defined in the given behavior.
    // This order will help the reuse and share of a behavior
    // between multiple views, while letting a view override a
    // selector under an UI key.
    this.ui = _.extend({}, _.result(this, 'ui'), _.result(view, 'ui'));

    MarionetteObject.apply(this, arguments);
  },


  // proxy behavior $ method to the view
  // this is useful for doing jquery DOM lookups
  // scoped to behaviors view.
  $: function $() {
    return this.view.$.apply(this.view, arguments);
  },


  // Stops the behavior from listening to events.
  // Overrides Object#destroy to prevent additional events from being triggered.
  destroy: function destroy() {
    this.stopListening();

    this.view._removeBehavior(this);

    return this;
  },
  proxyViewProperties: function proxyViewProperties() {
    this.$el = this.view.$el;
    this.el = this.view.el;

    return this;
  },
  bindUIElements: function bindUIElements() {
    this._bindUIElements();

    return this;
  },
  unbindUIElements: function unbindUIElements() {
    this._unbindUIElements();

    return this;
  },
  getUI: function getUI(name) {
    return this._getUI(name);
  },


  // Handle `modelEvents`, and `collectionEvents` configuration
  delegateEntityEvents: function delegateEntityEvents() {
    this._delegateEntityEvents(this.view.model, this.view.collection);

    return this;
  },
  undelegateEntityEvents: function undelegateEntityEvents() {
    this._undelegateEntityEvents(this.view.model, this.view.collection);

    return this;
  },
  getEvents: function getEvents() {
    var _this = this;

    // Normalize behavior events hash to allow
    // a user to use the @ui. syntax.
    var behaviorEvents = this.normalizeUIKeys(_.result(this, 'events'));

    // binds the handler to the behavior and builds a unique eventName
    return _.reduce(behaviorEvents, function (events, behaviorHandler, key) {
      if (!_.isFunction(behaviorHandler)) {
        behaviorHandler = _this[behaviorHandler];
      }
      if (!behaviorHandler) {
        return events;
      }
      key = getNamespacedEventName(key, _this.cid);
      events[key] = _.bind(behaviorHandler, _this);
      return events;
    }, {});
  },


  // Internal method to build all trigger handlers for a given behavior
  getTriggers: function getTriggers() {
    if (!this.triggers) {
      return;
    }

    // Normalize behavior triggers hash to allow
    // a user to use the @ui. syntax.
    var behaviorTriggers = this.normalizeUIKeys(_.result(this, 'triggers'));

    return this._getViewTriggers(this.view, behaviorTriggers);
  }
});

_.extend(Behavior.prototype, DelegateEntityEventsMixin, TriggersMixin, UIMixin);

// Application
// -----------
var ClassOptions$7 = ['region', 'regionClass'];

// A container for a Marionette application.
var Application = MarionetteObject.extend({
  cidPrefix: 'mna',

  constructor: function constructor(options) {
    this._setOptions(options);

    this.mergeOptions(options, ClassOptions$7);

    this._initRegion();

    MarionetteObject.prototype.constructor.apply(this, arguments);
  },


  regionClass: Region,

  _initRegion: function _initRegion() {
    var region = this.region;

    if (!region) {
      return;
    }

    var defaults = {
      regionClass: this.regionClass
    };

    this._region = buildRegion(region, defaults);
  },
  getRegion: function getRegion() {
    return this._region;
  },
  showView: function showView(view) {
    var region = this.getRegion();

    for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
      args[_key - 1] = arguments[_key];
    }

    return region.show.apply(region, [view].concat(args));
  },
  getView: function getView() {
    return this.getRegion().currentView;
  },


  // kick off all of the application's processes.
  start: function start(options) {
    this.triggerMethod('before:start', this, options);
    this.triggerMethod('start', this, options);
    return this;
  }
});

// App Router
// ----------

// Reduce the boilerplate code of handling route events
// and then calling a single method on another object,
// called a controller.
// Have your routers configured to call the method on
// your controller, directly.
//
// Configure an AppRouter with `appRoutes`.
//
// App routers can only take one `controller` object.
// It is recommended that you divide your controller
// objects in to smaller pieces of related functionality
// and have multiple routers / controllers, instead of
// just one giant router and controller.
//
// You can also add standard routes to an AppRouter.

var ClassOptions$8 = ['appRoutes', 'controller'];

var AppRouter = Backbone.Router.extend({
  constructor: function constructor(options) {
    this._setOptions(options);

    this.mergeOptions(options, ClassOptions$8);

    Backbone.Router.apply(this, arguments);

    var appRoutes = this.appRoutes;
    var controller = this._getController();
    this.processAppRoutes(controller, appRoutes);
    this.on('route', this._processOnRoute, this);
  },


  // Similar to route method on a Backbone Router but
  // method is called on the controller
  appRoute: function appRoute(route, methodName) {
    var controller = this._getController();
    this._addAppRoute(controller, route, methodName);
    return this;
  },


  // process the route event and trigger the onRoute
  // method call, if it exists
  _processOnRoute: function _processOnRoute(routeName, routeArgs) {
    // make sure an onRoute before trying to call it
    if (_.isFunction(this.onRoute)) {
      // find the path that matches the current route
      var routePath = _.invert(this.appRoutes)[routeName];
      this.onRoute(routeName, routePath, routeArgs);
    }
  },


  // Internal method to process the `appRoutes` for the
  // router, and turn them in to routes that trigger the
  // specified method on the specified `controller`.
  processAppRoutes: function processAppRoutes(controller, appRoutes) {
    var _this = this;

    if (!appRoutes) {
      return this;
    }

    var routeNames = _.keys(appRoutes).reverse(); // Backbone requires reverted order of routes

    _.each(routeNames, function (route) {
      _this._addAppRoute(controller, route, appRoutes[route]);
    });

    return this;
  },
  _getController: function _getController() {
    return this.controller;
  },
  _addAppRoute: function _addAppRoute(controller, route, methodName) {
    var method = controller[methodName];

    if (!method) {
      throw new MarionetteError('Method "' + methodName + '" was not found on the controller');
    }

    this.route(route, methodName, _.bind(method, controller));
  },


  triggerMethod: triggerMethod
});

_.extend(AppRouter.prototype, CommonMixin);

// Placeholder method to be extended by the user.
// The method should define the object that stores the behaviors.
// i.e.
//
// ```js
// Marionette.Behaviors.behaviorsLookup: function() {
//   return App.Behaviors
// }
// ```
function behaviorsLookup() {
  throw new MarionetteError({
    message: 'You must define where your behaviors are stored.',
    url: 'marionette.behaviors.md#behaviorslookup'
  });
}

var previousMarionette = Backbone.Marionette;
var Marionette = Backbone.Marionette = {};

// This allows you to run multiple instances of Marionette on the same
// webapp. After loading the new version, call `noConflict()` to
// get a reference to it. At the same time the old version will be
// returned to Backbone.Marionette.
Marionette.noConflict = function () {
  Backbone.Marionette = previousMarionette;
  return this;
};

// Utilities
Marionette.bindEvents = proxy(bindEvents);
Marionette.unbindEvents = proxy(unbindEvents);
Marionette.bindRequests = proxy(bindRequests);
Marionette.unbindRequests = proxy(unbindRequests);
Marionette.mergeOptions = proxy(mergeOptions);
Marionette.getOption = proxy(getOption);
Marionette.normalizeMethods = proxy(normalizeMethods);
Marionette.extend = extend;
Marionette.isNodeAttached = isNodeAttached;
Marionette.deprecate = deprecate;
Marionette.triggerMethod = proxy(triggerMethod);
Marionette.triggerMethodOn = triggerMethodOn;
Marionette.isEnabled = isEnabled;
Marionette.setEnabled = setEnabled;
Marionette.monitorViewEvents = monitorViewEvents;

Marionette.Behaviors = {};
Marionette.Behaviors.behaviorsLookup = behaviorsLookup;

// Classes
Marionette.Application = Application;
Marionette.AppRouter = AppRouter;
Marionette.Renderer = Renderer;
Marionette.TemplateCache = TemplateCache;
Marionette.View = View;
Marionette.CollectionView = CollectionView;
Marionette.NextCollectionView = CollectionView$2;
Marionette.CompositeView = CompositeView;
Marionette.Behavior = Behavior;
Marionette.Region = Region;
Marionette.Error = MarionetteError;
Marionette.Object = MarionetteObject;

// Configuration
Marionette.DEV_MODE = false;
Marionette.FEATURES = FEATURES;
Marionette.VERSION = version;
Marionette.DomApi = DomApi;
Marionette.setDomApi = function (mixin) {
  CollectionView.setDomApi(mixin);
  CompositeView.setDomApi(mixin);
  CollectionView$2.setDomApi(mixin);
  Region.setDomApi(mixin);
  View.setDomApi(mixin);
};

return Marionette;

})));
this && this.Marionette && (this.Mn = this.Marionette);
//# sourceMappingURL=backbone.marionette.js.map


/***/ }),
/* 2 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(module) {var require;//! moment.js
//! version : 2.19.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com

;(function (global, factory) {
     true ? module.exports = factory() :
    typeof define === 'function' && define.amd ? define(factory) :
    global.moment = factory()
}(this, (function () { 'use strict';

var hookCallback;

function hooks () {
    return hookCallback.apply(null, arguments);
}

// This is done to register the method called with moment()
// without creating circular dependencies.
function setHookCallback (callback) {
    hookCallback = callback;
}

function isArray(input) {
    return input instanceof Array || Object.prototype.toString.call(input) === '[object Array]';
}

function isObject(input) {
    // IE8 will treat undefined and null as object if it wasn't for
    // input != null
    return input != null && Object.prototype.toString.call(input) === '[object Object]';
}

function isObjectEmpty(obj) {
    if (Object.getOwnPropertyNames) {
        return (Object.getOwnPropertyNames(obj).length === 0);
    } else {
        var k;
        for (k in obj) {
            if (obj.hasOwnProperty(k)) {
                return false;
            }
        }
        return true;
    }
}

function isUndefined(input) {
    return input === void 0;
}

function isNumber(input) {
    return typeof input === 'number' || Object.prototype.toString.call(input) === '[object Number]';
}

function isDate(input) {
    return input instanceof Date || Object.prototype.toString.call(input) === '[object Date]';
}

function map(arr, fn) {
    var res = [], i;
    for (i = 0; i < arr.length; ++i) {
        res.push(fn(arr[i], i));
    }
    return res;
}

function hasOwnProp(a, b) {
    return Object.prototype.hasOwnProperty.call(a, b);
}

function extend(a, b) {
    for (var i in b) {
        if (hasOwnProp(b, i)) {
            a[i] = b[i];
        }
    }

    if (hasOwnProp(b, 'toString')) {
        a.toString = b.toString;
    }

    if (hasOwnProp(b, 'valueOf')) {
        a.valueOf = b.valueOf;
    }

    return a;
}

function createUTC (input, format, locale, strict) {
    return createLocalOrUTC(input, format, locale, strict, true).utc();
}

function defaultParsingFlags() {
    // We need to deep clone this object.
    return {
        empty           : false,
        unusedTokens    : [],
        unusedInput     : [],
        overflow        : -2,
        charsLeftOver   : 0,
        nullInput       : false,
        invalidMonth    : null,
        invalidFormat   : false,
        userInvalidated : false,
        iso             : false,
        parsedDateParts : [],
        meridiem        : null,
        rfc2822         : false,
        weekdayMismatch : false
    };
}

function getParsingFlags(m) {
    if (m._pf == null) {
        m._pf = defaultParsingFlags();
    }
    return m._pf;
}

var some;
if (Array.prototype.some) {
    some = Array.prototype.some;
} else {
    some = function (fun) {
        var t = Object(this);
        var len = t.length >>> 0;

        for (var i = 0; i < len; i++) {
            if (i in t && fun.call(this, t[i], i, t)) {
                return true;
            }
        }

        return false;
    };
}

function isValid(m) {
    if (m._isValid == null) {
        var flags = getParsingFlags(m);
        var parsedParts = some.call(flags.parsedDateParts, function (i) {
            return i != null;
        });
        var isNowValid = !isNaN(m._d.getTime()) &&
            flags.overflow < 0 &&
            !flags.empty &&
            !flags.invalidMonth &&
            !flags.invalidWeekday &&
            !flags.weekdayMismatch &&
            !flags.nullInput &&
            !flags.invalidFormat &&
            !flags.userInvalidated &&
            (!flags.meridiem || (flags.meridiem && parsedParts));

        if (m._strict) {
            isNowValid = isNowValid &&
                flags.charsLeftOver === 0 &&
                flags.unusedTokens.length === 0 &&
                flags.bigHour === undefined;
        }

        if (Object.isFrozen == null || !Object.isFrozen(m)) {
            m._isValid = isNowValid;
        }
        else {
            return isNowValid;
        }
    }
    return m._isValid;
}

function createInvalid (flags) {
    var m = createUTC(NaN);
    if (flags != null) {
        extend(getParsingFlags(m), flags);
    }
    else {
        getParsingFlags(m).userInvalidated = true;
    }

    return m;
}

// Plugins that add properties should also add the key here (null value),
// so we can properly clone ourselves.
var momentProperties = hooks.momentProperties = [];

function copyConfig(to, from) {
    var i, prop, val;

    if (!isUndefined(from._isAMomentObject)) {
        to._isAMomentObject = from._isAMomentObject;
    }
    if (!isUndefined(from._i)) {
        to._i = from._i;
    }
    if (!isUndefined(from._f)) {
        to._f = from._f;
    }
    if (!isUndefined(from._l)) {
        to._l = from._l;
    }
    if (!isUndefined(from._strict)) {
        to._strict = from._strict;
    }
    if (!isUndefined(from._tzm)) {
        to._tzm = from._tzm;
    }
    if (!isUndefined(from._isUTC)) {
        to._isUTC = from._isUTC;
    }
    if (!isUndefined(from._offset)) {
        to._offset = from._offset;
    }
    if (!isUndefined(from._pf)) {
        to._pf = getParsingFlags(from);
    }
    if (!isUndefined(from._locale)) {
        to._locale = from._locale;
    }

    if (momentProperties.length > 0) {
        for (i = 0; i < momentProperties.length; i++) {
            prop = momentProperties[i];
            val = from[prop];
            if (!isUndefined(val)) {
                to[prop] = val;
            }
        }
    }

    return to;
}

var updateInProgress = false;

// Moment prototype object
function Moment(config) {
    copyConfig(this, config);
    this._d = new Date(config._d != null ? config._d.getTime() : NaN);
    if (!this.isValid()) {
        this._d = new Date(NaN);
    }
    // Prevent infinite loop in case updateOffset creates new moment
    // objects.
    if (updateInProgress === false) {
        updateInProgress = true;
        hooks.updateOffset(this);
        updateInProgress = false;
    }
}

function isMoment (obj) {
    return obj instanceof Moment || (obj != null && obj._isAMomentObject != null);
}

function absFloor (number) {
    if (number < 0) {
        // -0 -> 0
        return Math.ceil(number) || 0;
    } else {
        return Math.floor(number);
    }
}

function toInt(argumentForCoercion) {
    var coercedNumber = +argumentForCoercion,
        value = 0;

    if (coercedNumber !== 0 && isFinite(coercedNumber)) {
        value = absFloor(coercedNumber);
    }

    return value;
}

// compare two arrays, return the number of differences
function compareArrays(array1, array2, dontConvert) {
    var len = Math.min(array1.length, array2.length),
        lengthDiff = Math.abs(array1.length - array2.length),
        diffs = 0,
        i;
    for (i = 0; i < len; i++) {
        if ((dontConvert && array1[i] !== array2[i]) ||
            (!dontConvert && toInt(array1[i]) !== toInt(array2[i]))) {
            diffs++;
        }
    }
    return diffs + lengthDiff;
}

function warn(msg) {
    if (hooks.suppressDeprecationWarnings === false &&
            (typeof console !==  'undefined') && console.warn) {
        console.warn('Deprecation warning: ' + msg);
    }
}

function deprecate(msg, fn) {
    var firstTime = true;

    return extend(function () {
        if (hooks.deprecationHandler != null) {
            hooks.deprecationHandler(null, msg);
        }
        if (firstTime) {
            var args = [];
            var arg;
            for (var i = 0; i < arguments.length; i++) {
                arg = '';
                if (typeof arguments[i] === 'object') {
                    arg += '\n[' + i + '] ';
                    for (var key in arguments[0]) {
                        arg += key + ': ' + arguments[0][key] + ', ';
                    }
                    arg = arg.slice(0, -2); // Remove trailing comma and space
                } else {
                    arg = arguments[i];
                }
                args.push(arg);
            }
            warn(msg + '\nArguments: ' + Array.prototype.slice.call(args).join('') + '\n' + (new Error()).stack);
            firstTime = false;
        }
        return fn.apply(this, arguments);
    }, fn);
}

var deprecations = {};

function deprecateSimple(name, msg) {
    if (hooks.deprecationHandler != null) {
        hooks.deprecationHandler(name, msg);
    }
    if (!deprecations[name]) {
        warn(msg);
        deprecations[name] = true;
    }
}

hooks.suppressDeprecationWarnings = false;
hooks.deprecationHandler = null;

function isFunction(input) {
    return input instanceof Function || Object.prototype.toString.call(input) === '[object Function]';
}

function set (config) {
    var prop, i;
    for (i in config) {
        prop = config[i];
        if (isFunction(prop)) {
            this[i] = prop;
        } else {
            this['_' + i] = prop;
        }
    }
    this._config = config;
    // Lenient ordinal parsing accepts just a number in addition to
    // number + (possibly) stuff coming from _dayOfMonthOrdinalParse.
    // TODO: Remove "ordinalParse" fallback in next major release.
    this._dayOfMonthOrdinalParseLenient = new RegExp(
        (this._dayOfMonthOrdinalParse.source || this._ordinalParse.source) +
            '|' + (/\d{1,2}/).source);
}

function mergeConfigs(parentConfig, childConfig) {
    var res = extend({}, parentConfig), prop;
    for (prop in childConfig) {
        if (hasOwnProp(childConfig, prop)) {
            if (isObject(parentConfig[prop]) && isObject(childConfig[prop])) {
                res[prop] = {};
                extend(res[prop], parentConfig[prop]);
                extend(res[prop], childConfig[prop]);
            } else if (childConfig[prop] != null) {
                res[prop] = childConfig[prop];
            } else {
                delete res[prop];
            }
        }
    }
    for (prop in parentConfig) {
        if (hasOwnProp(parentConfig, prop) &&
                !hasOwnProp(childConfig, prop) &&
                isObject(parentConfig[prop])) {
            // make sure changes to properties don't modify parent config
            res[prop] = extend({}, res[prop]);
        }
    }
    return res;
}

function Locale(config) {
    if (config != null) {
        this.set(config);
    }
}

var keys;

if (Object.keys) {
    keys = Object.keys;
} else {
    keys = function (obj) {
        var i, res = [];
        for (i in obj) {
            if (hasOwnProp(obj, i)) {
                res.push(i);
            }
        }
        return res;
    };
}

var defaultCalendar = {
    sameDay : '[Today at] LT',
    nextDay : '[Tomorrow at] LT',
    nextWeek : 'dddd [at] LT',
    lastDay : '[Yesterday at] LT',
    lastWeek : '[Last] dddd [at] LT',
    sameElse : 'L'
};

function calendar (key, mom, now) {
    var output = this._calendar[key] || this._calendar['sameElse'];
    return isFunction(output) ? output.call(mom, now) : output;
}

var defaultLongDateFormat = {
    LTS  : 'h:mm:ss A',
    LT   : 'h:mm A',
    L    : 'MM/DD/YYYY',
    LL   : 'MMMM D, YYYY',
    LLL  : 'MMMM D, YYYY h:mm A',
    LLLL : 'dddd, MMMM D, YYYY h:mm A'
};

function longDateFormat (key) {
    var format = this._longDateFormat[key],
        formatUpper = this._longDateFormat[key.toUpperCase()];

    if (format || !formatUpper) {
        return format;
    }

    this._longDateFormat[key] = formatUpper.replace(/MMMM|MM|DD|dddd/g, function (val) {
        return val.slice(1);
    });

    return this._longDateFormat[key];
}

var defaultInvalidDate = 'Invalid date';

function invalidDate () {
    return this._invalidDate;
}

var defaultOrdinal = '%d';
var defaultDayOfMonthOrdinalParse = /\d{1,2}/;

function ordinal (number) {
    return this._ordinal.replace('%d', number);
}

var defaultRelativeTime = {
    future : 'in %s',
    past   : '%s ago',
    s  : 'a few seconds',
    ss : '%d seconds',
    m  : 'a minute',
    mm : '%d minutes',
    h  : 'an hour',
    hh : '%d hours',
    d  : 'a day',
    dd : '%d days',
    M  : 'a month',
    MM : '%d months',
    y  : 'a year',
    yy : '%d years'
};

function relativeTime (number, withoutSuffix, string, isFuture) {
    var output = this._relativeTime[string];
    return (isFunction(output)) ?
        output(number, withoutSuffix, string, isFuture) :
        output.replace(/%d/i, number);
}

function pastFuture (diff, output) {
    var format = this._relativeTime[diff > 0 ? 'future' : 'past'];
    return isFunction(format) ? format(output) : format.replace(/%s/i, output);
}

var aliases = {};

function addUnitAlias (unit, shorthand) {
    var lowerCase = unit.toLowerCase();
    aliases[lowerCase] = aliases[lowerCase + 's'] = aliases[shorthand] = unit;
}

function normalizeUnits(units) {
    return typeof units === 'string' ? aliases[units] || aliases[units.toLowerCase()] : undefined;
}

function normalizeObjectUnits(inputObject) {
    var normalizedInput = {},
        normalizedProp,
        prop;

    for (prop in inputObject) {
        if (hasOwnProp(inputObject, prop)) {
            normalizedProp = normalizeUnits(prop);
            if (normalizedProp) {
                normalizedInput[normalizedProp] = inputObject[prop];
            }
        }
    }

    return normalizedInput;
}

var priorities = {};

function addUnitPriority(unit, priority) {
    priorities[unit] = priority;
}

function getPrioritizedUnits(unitsObj) {
    var units = [];
    for (var u in unitsObj) {
        units.push({unit: u, priority: priorities[u]});
    }
    units.sort(function (a, b) {
        return a.priority - b.priority;
    });
    return units;
}

function zeroFill(number, targetLength, forceSign) {
    var absNumber = '' + Math.abs(number),
        zerosToFill = targetLength - absNumber.length,
        sign = number >= 0;
    return (sign ? (forceSign ? '+' : '') : '-') +
        Math.pow(10, Math.max(0, zerosToFill)).toString().substr(1) + absNumber;
}

var formattingTokens = /(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;

var localFormattingTokens = /(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g;

var formatFunctions = {};

var formatTokenFunctions = {};

// token:    'M'
// padded:   ['MM', 2]
// ordinal:  'Mo'
// callback: function () { this.month() + 1 }
function addFormatToken (token, padded, ordinal, callback) {
    var func = callback;
    if (typeof callback === 'string') {
        func = function () {
            return this[callback]();
        };
    }
    if (token) {
        formatTokenFunctions[token] = func;
    }
    if (padded) {
        formatTokenFunctions[padded[0]] = function () {
            return zeroFill(func.apply(this, arguments), padded[1], padded[2]);
        };
    }
    if (ordinal) {
        formatTokenFunctions[ordinal] = function () {
            return this.localeData().ordinal(func.apply(this, arguments), token);
        };
    }
}

function removeFormattingTokens(input) {
    if (input.match(/\[[\s\S]/)) {
        return input.replace(/^\[|\]$/g, '');
    }
    return input.replace(/\\/g, '');
}

function makeFormatFunction(format) {
    var array = format.match(formattingTokens), i, length;

    for (i = 0, length = array.length; i < length; i++) {
        if (formatTokenFunctions[array[i]]) {
            array[i] = formatTokenFunctions[array[i]];
        } else {
            array[i] = removeFormattingTokens(array[i]);
        }
    }

    return function (mom) {
        var output = '', i;
        for (i = 0; i < length; i++) {
            output += isFunction(array[i]) ? array[i].call(mom, format) : array[i];
        }
        return output;
    };
}

// format date using native date object
function formatMoment(m, format) {
    if (!m.isValid()) {
        return m.localeData().invalidDate();
    }

    format = expandFormat(format, m.localeData());
    formatFunctions[format] = formatFunctions[format] || makeFormatFunction(format);

    return formatFunctions[format](m);
}

function expandFormat(format, locale) {
    var i = 5;

    function replaceLongDateFormatTokens(input) {
        return locale.longDateFormat(input) || input;
    }

    localFormattingTokens.lastIndex = 0;
    while (i >= 0 && localFormattingTokens.test(format)) {
        format = format.replace(localFormattingTokens, replaceLongDateFormatTokens);
        localFormattingTokens.lastIndex = 0;
        i -= 1;
    }

    return format;
}

var match1         = /\d/;            //       0 - 9
var match2         = /\d\d/;          //      00 - 99
var match3         = /\d{3}/;         //     000 - 999
var match4         = /\d{4}/;         //    0000 - 9999
var match6         = /[+-]?\d{6}/;    // -999999 - 999999
var match1to2      = /\d\d?/;         //       0 - 99
var match3to4      = /\d\d\d\d?/;     //     999 - 9999
var match5to6      = /\d\d\d\d\d\d?/; //   99999 - 999999
var match1to3      = /\d{1,3}/;       //       0 - 999
var match1to4      = /\d{1,4}/;       //       0 - 9999
var match1to6      = /[+-]?\d{1,6}/;  // -999999 - 999999

var matchUnsigned  = /\d+/;           //       0 - inf
var matchSigned    = /[+-]?\d+/;      //    -inf - inf

var matchOffset    = /Z|[+-]\d\d:?\d\d/gi; // +00:00 -00:00 +0000 -0000 or Z
var matchShortOffset = /Z|[+-]\d\d(?::?\d\d)?/gi; // +00 -00 +00:00 -00:00 +0000 -0000 or Z

var matchTimestamp = /[+-]?\d+(\.\d{1,3})?/; // 123456789 123456789.123

// any word (or two) characters or numbers including two/three word month in arabic.
// includes scottish gaelic two word and hyphenated months
var matchWord = /[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i;


var regexes = {};

function addRegexToken (token, regex, strictRegex) {
    regexes[token] = isFunction(regex) ? regex : function (isStrict, localeData) {
        return (isStrict && strictRegex) ? strictRegex : regex;
    };
}

function getParseRegexForToken (token, config) {
    if (!hasOwnProp(regexes, token)) {
        return new RegExp(unescapeFormat(token));
    }

    return regexes[token](config._strict, config._locale);
}

// Code from http://stackoverflow.com/questions/3561493/is-there-a-regexp-escape-function-in-javascript
function unescapeFormat(s) {
    return regexEscape(s.replace('\\', '').replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g, function (matched, p1, p2, p3, p4) {
        return p1 || p2 || p3 || p4;
    }));
}

function regexEscape(s) {
    return s.replace(/[-\/\\^$*+?.()|[\]{}]/g, '\\$&');
}

var tokens = {};

function addParseToken (token, callback) {
    var i, func = callback;
    if (typeof token === 'string') {
        token = [token];
    }
    if (isNumber(callback)) {
        func = function (input, array) {
            array[callback] = toInt(input);
        };
    }
    for (i = 0; i < token.length; i++) {
        tokens[token[i]] = func;
    }
}

function addWeekParseToken (token, callback) {
    addParseToken(token, function (input, array, config, token) {
        config._w = config._w || {};
        callback(input, config._w, config, token);
    });
}

function addTimeToArrayFromToken(token, input, config) {
    if (input != null && hasOwnProp(tokens, token)) {
        tokens[token](input, config._a, config, token);
    }
}

var YEAR = 0;
var MONTH = 1;
var DATE = 2;
var HOUR = 3;
var MINUTE = 4;
var SECOND = 5;
var MILLISECOND = 6;
var WEEK = 7;
var WEEKDAY = 8;

// FORMATTING

addFormatToken('Y', 0, 0, function () {
    var y = this.year();
    return y <= 9999 ? '' + y : '+' + y;
});

addFormatToken(0, ['YY', 2], 0, function () {
    return this.year() % 100;
});

addFormatToken(0, ['YYYY',   4],       0, 'year');
addFormatToken(0, ['YYYYY',  5],       0, 'year');
addFormatToken(0, ['YYYYYY', 6, true], 0, 'year');

// ALIASES

addUnitAlias('year', 'y');

// PRIORITIES

addUnitPriority('year', 1);

// PARSING

addRegexToken('Y',      matchSigned);
addRegexToken('YY',     match1to2, match2);
addRegexToken('YYYY',   match1to4, match4);
addRegexToken('YYYYY',  match1to6, match6);
addRegexToken('YYYYYY', match1to6, match6);

addParseToken(['YYYYY', 'YYYYYY'], YEAR);
addParseToken('YYYY', function (input, array) {
    array[YEAR] = input.length === 2 ? hooks.parseTwoDigitYear(input) : toInt(input);
});
addParseToken('YY', function (input, array) {
    array[YEAR] = hooks.parseTwoDigitYear(input);
});
addParseToken('Y', function (input, array) {
    array[YEAR] = parseInt(input, 10);
});

// HELPERS

function daysInYear(year) {
    return isLeapYear(year) ? 366 : 365;
}

function isLeapYear(year) {
    return (year % 4 === 0 && year % 100 !== 0) || year % 400 === 0;
}

// HOOKS

hooks.parseTwoDigitYear = function (input) {
    return toInt(input) + (toInt(input) > 68 ? 1900 : 2000);
};

// MOMENTS

var getSetYear = makeGetSet('FullYear', true);

function getIsLeapYear () {
    return isLeapYear(this.year());
}

function makeGetSet (unit, keepTime) {
    return function (value) {
        if (value != null) {
            set$1(this, unit, value);
            hooks.updateOffset(this, keepTime);
            return this;
        } else {
            return get(this, unit);
        }
    };
}

function get (mom, unit) {
    return mom.isValid() ?
        mom._d['get' + (mom._isUTC ? 'UTC' : '') + unit]() : NaN;
}

function set$1 (mom, unit, value) {
    if (mom.isValid() && !isNaN(value)) {
        if (unit === 'FullYear' && isLeapYear(mom.year())) {
            mom._d['set' + (mom._isUTC ? 'UTC' : '') + unit](value, mom.month(), daysInMonth(value, mom.month()));
        }
        else {
            mom._d['set' + (mom._isUTC ? 'UTC' : '') + unit](value);
        }
    }
}

// MOMENTS

function stringGet (units) {
    units = normalizeUnits(units);
    if (isFunction(this[units])) {
        return this[units]();
    }
    return this;
}


function stringSet (units, value) {
    if (typeof units === 'object') {
        units = normalizeObjectUnits(units);
        var prioritized = getPrioritizedUnits(units);
        for (var i = 0; i < prioritized.length; i++) {
            this[prioritized[i].unit](units[prioritized[i].unit]);
        }
    } else {
        units = normalizeUnits(units);
        if (isFunction(this[units])) {
            return this[units](value);
        }
    }
    return this;
}

function mod(n, x) {
    return ((n % x) + x) % x;
}

var indexOf;

if (Array.prototype.indexOf) {
    indexOf = Array.prototype.indexOf;
} else {
    indexOf = function (o) {
        // I know
        var i;
        for (i = 0; i < this.length; ++i) {
            if (this[i] === o) {
                return i;
            }
        }
        return -1;
    };
}

function daysInMonth(year, month) {
    if (isNaN(year) || isNaN(month)) {
        return NaN;
    }
    var modMonth = mod(month, 12);
    year += (month - modMonth) / 12;
    return modMonth === 1 ? (isLeapYear(year) ? 29 : 28) : (31 - modMonth % 7 % 2);
}

// FORMATTING

addFormatToken('M', ['MM', 2], 'Mo', function () {
    return this.month() + 1;
});

addFormatToken('MMM', 0, 0, function (format) {
    return this.localeData().monthsShort(this, format);
});

addFormatToken('MMMM', 0, 0, function (format) {
    return this.localeData().months(this, format);
});

// ALIASES

addUnitAlias('month', 'M');

// PRIORITY

addUnitPriority('month', 8);

// PARSING

addRegexToken('M',    match1to2);
addRegexToken('MM',   match1to2, match2);
addRegexToken('MMM',  function (isStrict, locale) {
    return locale.monthsShortRegex(isStrict);
});
addRegexToken('MMMM', function (isStrict, locale) {
    return locale.monthsRegex(isStrict);
});

addParseToken(['M', 'MM'], function (input, array) {
    array[MONTH] = toInt(input) - 1;
});

addParseToken(['MMM', 'MMMM'], function (input, array, config, token) {
    var month = config._locale.monthsParse(input, token, config._strict);
    // if we didn't find a month name, mark the date as invalid.
    if (month != null) {
        array[MONTH] = month;
    } else {
        getParsingFlags(config).invalidMonth = input;
    }
});

// LOCALES

var MONTHS_IN_FORMAT = /D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/;
var defaultLocaleMonths = 'January_February_March_April_May_June_July_August_September_October_November_December'.split('_');
function localeMonths (m, format) {
    if (!m) {
        return isArray(this._months) ? this._months :
            this._months['standalone'];
    }
    return isArray(this._months) ? this._months[m.month()] :
        this._months[(this._months.isFormat || MONTHS_IN_FORMAT).test(format) ? 'format' : 'standalone'][m.month()];
}

var defaultLocaleMonthsShort = 'Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec'.split('_');
function localeMonthsShort (m, format) {
    if (!m) {
        return isArray(this._monthsShort) ? this._monthsShort :
            this._monthsShort['standalone'];
    }
    return isArray(this._monthsShort) ? this._monthsShort[m.month()] :
        this._monthsShort[MONTHS_IN_FORMAT.test(format) ? 'format' : 'standalone'][m.month()];
}

function handleStrictParse(monthName, format, strict) {
    var i, ii, mom, llc = monthName.toLocaleLowerCase();
    if (!this._monthsParse) {
        // this is not used
        this._monthsParse = [];
        this._longMonthsParse = [];
        this._shortMonthsParse = [];
        for (i = 0; i < 12; ++i) {
            mom = createUTC([2000, i]);
            this._shortMonthsParse[i] = this.monthsShort(mom, '').toLocaleLowerCase();
            this._longMonthsParse[i] = this.months(mom, '').toLocaleLowerCase();
        }
    }

    if (strict) {
        if (format === 'MMM') {
            ii = indexOf.call(this._shortMonthsParse, llc);
            return ii !== -1 ? ii : null;
        } else {
            ii = indexOf.call(this._longMonthsParse, llc);
            return ii !== -1 ? ii : null;
        }
    } else {
        if (format === 'MMM') {
            ii = indexOf.call(this._shortMonthsParse, llc);
            if (ii !== -1) {
                return ii;
            }
            ii = indexOf.call(this._longMonthsParse, llc);
            return ii !== -1 ? ii : null;
        } else {
            ii = indexOf.call(this._longMonthsParse, llc);
            if (ii !== -1) {
                return ii;
            }
            ii = indexOf.call(this._shortMonthsParse, llc);
            return ii !== -1 ? ii : null;
        }
    }
}

function localeMonthsParse (monthName, format, strict) {
    var i, mom, regex;

    if (this._monthsParseExact) {
        return handleStrictParse.call(this, monthName, format, strict);
    }

    if (!this._monthsParse) {
        this._monthsParse = [];
        this._longMonthsParse = [];
        this._shortMonthsParse = [];
    }

    // TODO: add sorting
    // Sorting makes sure if one month (or abbr) is a prefix of another
    // see sorting in computeMonthsParse
    for (i = 0; i < 12; i++) {
        // make the regex if we don't have it already
        mom = createUTC([2000, i]);
        if (strict && !this._longMonthsParse[i]) {
            this._longMonthsParse[i] = new RegExp('^' + this.months(mom, '').replace('.', '') + '$', 'i');
            this._shortMonthsParse[i] = new RegExp('^' + this.monthsShort(mom, '').replace('.', '') + '$', 'i');
        }
        if (!strict && !this._monthsParse[i]) {
            regex = '^' + this.months(mom, '') + '|^' + this.monthsShort(mom, '');
            this._monthsParse[i] = new RegExp(regex.replace('.', ''), 'i');
        }
        // test the regex
        if (strict && format === 'MMMM' && this._longMonthsParse[i].test(monthName)) {
            return i;
        } else if (strict && format === 'MMM' && this._shortMonthsParse[i].test(monthName)) {
            return i;
        } else if (!strict && this._monthsParse[i].test(monthName)) {
            return i;
        }
    }
}

// MOMENTS

function setMonth (mom, value) {
    var dayOfMonth;

    if (!mom.isValid()) {
        // No op
        return mom;
    }

    if (typeof value === 'string') {
        if (/^\d+$/.test(value)) {
            value = toInt(value);
        } else {
            value = mom.localeData().monthsParse(value);
            // TODO: Another silent failure?
            if (!isNumber(value)) {
                return mom;
            }
        }
    }

    dayOfMonth = Math.min(mom.date(), daysInMonth(mom.year(), value));
    mom._d['set' + (mom._isUTC ? 'UTC' : '') + 'Month'](value, dayOfMonth);
    return mom;
}

function getSetMonth (value) {
    if (value != null) {
        setMonth(this, value);
        hooks.updateOffset(this, true);
        return this;
    } else {
        return get(this, 'Month');
    }
}

function getDaysInMonth () {
    return daysInMonth(this.year(), this.month());
}

var defaultMonthsShortRegex = matchWord;
function monthsShortRegex (isStrict) {
    if (this._monthsParseExact) {
        if (!hasOwnProp(this, '_monthsRegex')) {
            computeMonthsParse.call(this);
        }
        if (isStrict) {
            return this._monthsShortStrictRegex;
        } else {
            return this._monthsShortRegex;
        }
    } else {
        if (!hasOwnProp(this, '_monthsShortRegex')) {
            this._monthsShortRegex = defaultMonthsShortRegex;
        }
        return this._monthsShortStrictRegex && isStrict ?
            this._monthsShortStrictRegex : this._monthsShortRegex;
    }
}

var defaultMonthsRegex = matchWord;
function monthsRegex (isStrict) {
    if (this._monthsParseExact) {
        if (!hasOwnProp(this, '_monthsRegex')) {
            computeMonthsParse.call(this);
        }
        if (isStrict) {
            return this._monthsStrictRegex;
        } else {
            return this._monthsRegex;
        }
    } else {
        if (!hasOwnProp(this, '_monthsRegex')) {
            this._monthsRegex = defaultMonthsRegex;
        }
        return this._monthsStrictRegex && isStrict ?
            this._monthsStrictRegex : this._monthsRegex;
    }
}

function computeMonthsParse () {
    function cmpLenRev(a, b) {
        return b.length - a.length;
    }

    var shortPieces = [], longPieces = [], mixedPieces = [],
        i, mom;
    for (i = 0; i < 12; i++) {
        // make the regex if we don't have it already
        mom = createUTC([2000, i]);
        shortPieces.push(this.monthsShort(mom, ''));
        longPieces.push(this.months(mom, ''));
        mixedPieces.push(this.months(mom, ''));
        mixedPieces.push(this.monthsShort(mom, ''));
    }
    // Sorting makes sure if one month (or abbr) is a prefix of another it
    // will match the longer piece.
    shortPieces.sort(cmpLenRev);
    longPieces.sort(cmpLenRev);
    mixedPieces.sort(cmpLenRev);
    for (i = 0; i < 12; i++) {
        shortPieces[i] = regexEscape(shortPieces[i]);
        longPieces[i] = regexEscape(longPieces[i]);
    }
    for (i = 0; i < 24; i++) {
        mixedPieces[i] = regexEscape(mixedPieces[i]);
    }

    this._monthsRegex = new RegExp('^(' + mixedPieces.join('|') + ')', 'i');
    this._monthsShortRegex = this._monthsRegex;
    this._monthsStrictRegex = new RegExp('^(' + longPieces.join('|') + ')', 'i');
    this._monthsShortStrictRegex = new RegExp('^(' + shortPieces.join('|') + ')', 'i');
}

function createDate (y, m, d, h, M, s, ms) {
    // can't just apply() to create a date:
    // https://stackoverflow.com/q/181348
    var date = new Date(y, m, d, h, M, s, ms);

    // the date constructor remaps years 0-99 to 1900-1999
    if (y < 100 && y >= 0 && isFinite(date.getFullYear())) {
        date.setFullYear(y);
    }
    return date;
}

function createUTCDate (y) {
    var date = new Date(Date.UTC.apply(null, arguments));

    // the Date.UTC function remaps years 0-99 to 1900-1999
    if (y < 100 && y >= 0 && isFinite(date.getUTCFullYear())) {
        date.setUTCFullYear(y);
    }
    return date;
}

// start-of-first-week - start-of-year
function firstWeekOffset(year, dow, doy) {
    var // first-week day -- which january is always in the first week (4 for iso, 1 for other)
        fwd = 7 + dow - doy,
        // first-week day local weekday -- which local weekday is fwd
        fwdlw = (7 + createUTCDate(year, 0, fwd).getUTCDay() - dow) % 7;

    return -fwdlw + fwd - 1;
}

// https://en.wikipedia.org/wiki/ISO_week_date#Calculating_a_date_given_the_year.2C_week_number_and_weekday
function dayOfYearFromWeeks(year, week, weekday, dow, doy) {
    var localWeekday = (7 + weekday - dow) % 7,
        weekOffset = firstWeekOffset(year, dow, doy),
        dayOfYear = 1 + 7 * (week - 1) + localWeekday + weekOffset,
        resYear, resDayOfYear;

    if (dayOfYear <= 0) {
        resYear = year - 1;
        resDayOfYear = daysInYear(resYear) + dayOfYear;
    } else if (dayOfYear > daysInYear(year)) {
        resYear = year + 1;
        resDayOfYear = dayOfYear - daysInYear(year);
    } else {
        resYear = year;
        resDayOfYear = dayOfYear;
    }

    return {
        year: resYear,
        dayOfYear: resDayOfYear
    };
}

function weekOfYear(mom, dow, doy) {
    var weekOffset = firstWeekOffset(mom.year(), dow, doy),
        week = Math.floor((mom.dayOfYear() - weekOffset - 1) / 7) + 1,
        resWeek, resYear;

    if (week < 1) {
        resYear = mom.year() - 1;
        resWeek = week + weeksInYear(resYear, dow, doy);
    } else if (week > weeksInYear(mom.year(), dow, doy)) {
        resWeek = week - weeksInYear(mom.year(), dow, doy);
        resYear = mom.year() + 1;
    } else {
        resYear = mom.year();
        resWeek = week;
    }

    return {
        week: resWeek,
        year: resYear
    };
}

function weeksInYear(year, dow, doy) {
    var weekOffset = firstWeekOffset(year, dow, doy),
        weekOffsetNext = firstWeekOffset(year + 1, dow, doy);
    return (daysInYear(year) - weekOffset + weekOffsetNext) / 7;
}

// FORMATTING

addFormatToken('w', ['ww', 2], 'wo', 'week');
addFormatToken('W', ['WW', 2], 'Wo', 'isoWeek');

// ALIASES

addUnitAlias('week', 'w');
addUnitAlias('isoWeek', 'W');

// PRIORITIES

addUnitPriority('week', 5);
addUnitPriority('isoWeek', 5);

// PARSING

addRegexToken('w',  match1to2);
addRegexToken('ww', match1to2, match2);
addRegexToken('W',  match1to2);
addRegexToken('WW', match1to2, match2);

addWeekParseToken(['w', 'ww', 'W', 'WW'], function (input, week, config, token) {
    week[token.substr(0, 1)] = toInt(input);
});

// HELPERS

// LOCALES

function localeWeek (mom) {
    return weekOfYear(mom, this._week.dow, this._week.doy).week;
}

var defaultLocaleWeek = {
    dow : 0, // Sunday is the first day of the week.
    doy : 6  // The week that contains Jan 1st is the first week of the year.
};

function localeFirstDayOfWeek () {
    return this._week.dow;
}

function localeFirstDayOfYear () {
    return this._week.doy;
}

// MOMENTS

function getSetWeek (input) {
    var week = this.localeData().week(this);
    return input == null ? week : this.add((input - week) * 7, 'd');
}

function getSetISOWeek (input) {
    var week = weekOfYear(this, 1, 4).week;
    return input == null ? week : this.add((input - week) * 7, 'd');
}

// FORMATTING

addFormatToken('d', 0, 'do', 'day');

addFormatToken('dd', 0, 0, function (format) {
    return this.localeData().weekdaysMin(this, format);
});

addFormatToken('ddd', 0, 0, function (format) {
    return this.localeData().weekdaysShort(this, format);
});

addFormatToken('dddd', 0, 0, function (format) {
    return this.localeData().weekdays(this, format);
});

addFormatToken('e', 0, 0, 'weekday');
addFormatToken('E', 0, 0, 'isoWeekday');

// ALIASES

addUnitAlias('day', 'd');
addUnitAlias('weekday', 'e');
addUnitAlias('isoWeekday', 'E');

// PRIORITY
addUnitPriority('day', 11);
addUnitPriority('weekday', 11);
addUnitPriority('isoWeekday', 11);

// PARSING

addRegexToken('d',    match1to2);
addRegexToken('e',    match1to2);
addRegexToken('E',    match1to2);
addRegexToken('dd',   function (isStrict, locale) {
    return locale.weekdaysMinRegex(isStrict);
});
addRegexToken('ddd',   function (isStrict, locale) {
    return locale.weekdaysShortRegex(isStrict);
});
addRegexToken('dddd',   function (isStrict, locale) {
    return locale.weekdaysRegex(isStrict);
});

addWeekParseToken(['dd', 'ddd', 'dddd'], function (input, week, config, token) {
    var weekday = config._locale.weekdaysParse(input, token, config._strict);
    // if we didn't get a weekday name, mark the date as invalid
    if (weekday != null) {
        week.d = weekday;
    } else {
        getParsingFlags(config).invalidWeekday = input;
    }
});

addWeekParseToken(['d', 'e', 'E'], function (input, week, config, token) {
    week[token] = toInt(input);
});

// HELPERS

function parseWeekday(input, locale) {
    if (typeof input !== 'string') {
        return input;
    }

    if (!isNaN(input)) {
        return parseInt(input, 10);
    }

    input = locale.weekdaysParse(input);
    if (typeof input === 'number') {
        return input;
    }

    return null;
}

function parseIsoWeekday(input, locale) {
    if (typeof input === 'string') {
        return locale.weekdaysParse(input) % 7 || 7;
    }
    return isNaN(input) ? null : input;
}

// LOCALES

var defaultLocaleWeekdays = 'Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_');
function localeWeekdays (m, format) {
    if (!m) {
        return isArray(this._weekdays) ? this._weekdays :
            this._weekdays['standalone'];
    }
    return isArray(this._weekdays) ? this._weekdays[m.day()] :
        this._weekdays[this._weekdays.isFormat.test(format) ? 'format' : 'standalone'][m.day()];
}

var defaultLocaleWeekdaysShort = 'Sun_Mon_Tue_Wed_Thu_Fri_Sat'.split('_');
function localeWeekdaysShort (m) {
    return (m) ? this._weekdaysShort[m.day()] : this._weekdaysShort;
}

var defaultLocaleWeekdaysMin = 'Su_Mo_Tu_We_Th_Fr_Sa'.split('_');
function localeWeekdaysMin (m) {
    return (m) ? this._weekdaysMin[m.day()] : this._weekdaysMin;
}

function handleStrictParse$1(weekdayName, format, strict) {
    var i, ii, mom, llc = weekdayName.toLocaleLowerCase();
    if (!this._weekdaysParse) {
        this._weekdaysParse = [];
        this._shortWeekdaysParse = [];
        this._minWeekdaysParse = [];

        for (i = 0; i < 7; ++i) {
            mom = createUTC([2000, 1]).day(i);
            this._minWeekdaysParse[i] = this.weekdaysMin(mom, '').toLocaleLowerCase();
            this._shortWeekdaysParse[i] = this.weekdaysShort(mom, '').toLocaleLowerCase();
            this._weekdaysParse[i] = this.weekdays(mom, '').toLocaleLowerCase();
        }
    }

    if (strict) {
        if (format === 'dddd') {
            ii = indexOf.call(this._weekdaysParse, llc);
            return ii !== -1 ? ii : null;
        } else if (format === 'ddd') {
            ii = indexOf.call(this._shortWeekdaysParse, llc);
            return ii !== -1 ? ii : null;
        } else {
            ii = indexOf.call(this._minWeekdaysParse, llc);
            return ii !== -1 ? ii : null;
        }
    } else {
        if (format === 'dddd') {
            ii = indexOf.call(this._weekdaysParse, llc);
            if (ii !== -1) {
                return ii;
            }
            ii = indexOf.call(this._shortWeekdaysParse, llc);
            if (ii !== -1) {
                return ii;
            }
            ii = indexOf.call(this._minWeekdaysParse, llc);
            return ii !== -1 ? ii : null;
        } else if (format === 'ddd') {
            ii = indexOf.call(this._shortWeekdaysParse, llc);
            if (ii !== -1) {
                return ii;
            }
            ii = indexOf.call(this._weekdaysParse, llc);
            if (ii !== -1) {
                return ii;
            }
            ii = indexOf.call(this._minWeekdaysParse, llc);
            return ii !== -1 ? ii : null;
        } else {
            ii = indexOf.call(this._minWeekdaysParse, llc);
            if (ii !== -1) {
                return ii;
            }
            ii = indexOf.call(this._weekdaysParse, llc);
            if (ii !== -1) {
                return ii;
            }
            ii = indexOf.call(this._shortWeekdaysParse, llc);
            return ii !== -1 ? ii : null;
        }
    }
}

function localeWeekdaysParse (weekdayName, format, strict) {
    var i, mom, regex;

    if (this._weekdaysParseExact) {
        return handleStrictParse$1.call(this, weekdayName, format, strict);
    }

    if (!this._weekdaysParse) {
        this._weekdaysParse = [];
        this._minWeekdaysParse = [];
        this._shortWeekdaysParse = [];
        this._fullWeekdaysParse = [];
    }

    for (i = 0; i < 7; i++) {
        // make the regex if we don't have it already

        mom = createUTC([2000, 1]).day(i);
        if (strict && !this._fullWeekdaysParse[i]) {
            this._fullWeekdaysParse[i] = new RegExp('^' + this.weekdays(mom, '').replace('.', '\.?') + '$', 'i');
            this._shortWeekdaysParse[i] = new RegExp('^' + this.weekdaysShort(mom, '').replace('.', '\.?') + '$', 'i');
            this._minWeekdaysParse[i] = new RegExp('^' + this.weekdaysMin(mom, '').replace('.', '\.?') + '$', 'i');
        }
        if (!this._weekdaysParse[i]) {
            regex = '^' + this.weekdays(mom, '') + '|^' + this.weekdaysShort(mom, '') + '|^' + this.weekdaysMin(mom, '');
            this._weekdaysParse[i] = new RegExp(regex.replace('.', ''), 'i');
        }
        // test the regex
        if (strict && format === 'dddd' && this._fullWeekdaysParse[i].test(weekdayName)) {
            return i;
        } else if (strict && format === 'ddd' && this._shortWeekdaysParse[i].test(weekdayName)) {
            return i;
        } else if (strict && format === 'dd' && this._minWeekdaysParse[i].test(weekdayName)) {
            return i;
        } else if (!strict && this._weekdaysParse[i].test(weekdayName)) {
            return i;
        }
    }
}

// MOMENTS

function getSetDayOfWeek (input) {
    if (!this.isValid()) {
        return input != null ? this : NaN;
    }
    var day = this._isUTC ? this._d.getUTCDay() : this._d.getDay();
    if (input != null) {
        input = parseWeekday(input, this.localeData());
        return this.add(input - day, 'd');
    } else {
        return day;
    }
}

function getSetLocaleDayOfWeek (input) {
    if (!this.isValid()) {
        return input != null ? this : NaN;
    }
    var weekday = (this.day() + 7 - this.localeData()._week.dow) % 7;
    return input == null ? weekday : this.add(input - weekday, 'd');
}

function getSetISODayOfWeek (input) {
    if (!this.isValid()) {
        return input != null ? this : NaN;
    }

    // behaves the same as moment#day except
    // as a getter, returns 7 instead of 0 (1-7 range instead of 0-6)
    // as a setter, sunday should belong to the previous week.

    if (input != null) {
        var weekday = parseIsoWeekday(input, this.localeData());
        return this.day(this.day() % 7 ? weekday : weekday - 7);
    } else {
        return this.day() || 7;
    }
}

var defaultWeekdaysRegex = matchWord;
function weekdaysRegex (isStrict) {
    if (this._weekdaysParseExact) {
        if (!hasOwnProp(this, '_weekdaysRegex')) {
            computeWeekdaysParse.call(this);
        }
        if (isStrict) {
            return this._weekdaysStrictRegex;
        } else {
            return this._weekdaysRegex;
        }
    } else {
        if (!hasOwnProp(this, '_weekdaysRegex')) {
            this._weekdaysRegex = defaultWeekdaysRegex;
        }
        return this._weekdaysStrictRegex && isStrict ?
            this._weekdaysStrictRegex : this._weekdaysRegex;
    }
}

var defaultWeekdaysShortRegex = matchWord;
function weekdaysShortRegex (isStrict) {
    if (this._weekdaysParseExact) {
        if (!hasOwnProp(this, '_weekdaysRegex')) {
            computeWeekdaysParse.call(this);
        }
        if (isStrict) {
            return this._weekdaysShortStrictRegex;
        } else {
            return this._weekdaysShortRegex;
        }
    } else {
        if (!hasOwnProp(this, '_weekdaysShortRegex')) {
            this._weekdaysShortRegex = defaultWeekdaysShortRegex;
        }
        return this._weekdaysShortStrictRegex && isStrict ?
            this._weekdaysShortStrictRegex : this._weekdaysShortRegex;
    }
}

var defaultWeekdaysMinRegex = matchWord;
function weekdaysMinRegex (isStrict) {
    if (this._weekdaysParseExact) {
        if (!hasOwnProp(this, '_weekdaysRegex')) {
            computeWeekdaysParse.call(this);
        }
        if (isStrict) {
            return this._weekdaysMinStrictRegex;
        } else {
            return this._weekdaysMinRegex;
        }
    } else {
        if (!hasOwnProp(this, '_weekdaysMinRegex')) {
            this._weekdaysMinRegex = defaultWeekdaysMinRegex;
        }
        return this._weekdaysMinStrictRegex && isStrict ?
            this._weekdaysMinStrictRegex : this._weekdaysMinRegex;
    }
}


function computeWeekdaysParse () {
    function cmpLenRev(a, b) {
        return b.length - a.length;
    }

    var minPieces = [], shortPieces = [], longPieces = [], mixedPieces = [],
        i, mom, minp, shortp, longp;
    for (i = 0; i < 7; i++) {
        // make the regex if we don't have it already
        mom = createUTC([2000, 1]).day(i);
        minp = this.weekdaysMin(mom, '');
        shortp = this.weekdaysShort(mom, '');
        longp = this.weekdays(mom, '');
        minPieces.push(minp);
        shortPieces.push(shortp);
        longPieces.push(longp);
        mixedPieces.push(minp);
        mixedPieces.push(shortp);
        mixedPieces.push(longp);
    }
    // Sorting makes sure if one weekday (or abbr) is a prefix of another it
    // will match the longer piece.
    minPieces.sort(cmpLenRev);
    shortPieces.sort(cmpLenRev);
    longPieces.sort(cmpLenRev);
    mixedPieces.sort(cmpLenRev);
    for (i = 0; i < 7; i++) {
        shortPieces[i] = regexEscape(shortPieces[i]);
        longPieces[i] = regexEscape(longPieces[i]);
        mixedPieces[i] = regexEscape(mixedPieces[i]);
    }

    this._weekdaysRegex = new RegExp('^(' + mixedPieces.join('|') + ')', 'i');
    this._weekdaysShortRegex = this._weekdaysRegex;
    this._weekdaysMinRegex = this._weekdaysRegex;

    this._weekdaysStrictRegex = new RegExp('^(' + longPieces.join('|') + ')', 'i');
    this._weekdaysShortStrictRegex = new RegExp('^(' + shortPieces.join('|') + ')', 'i');
    this._weekdaysMinStrictRegex = new RegExp('^(' + minPieces.join('|') + ')', 'i');
}

// FORMATTING

function hFormat() {
    return this.hours() % 12 || 12;
}

function kFormat() {
    return this.hours() || 24;
}

addFormatToken('H', ['HH', 2], 0, 'hour');
addFormatToken('h', ['hh', 2], 0, hFormat);
addFormatToken('k', ['kk', 2], 0, kFormat);

addFormatToken('hmm', 0, 0, function () {
    return '' + hFormat.apply(this) + zeroFill(this.minutes(), 2);
});

addFormatToken('hmmss', 0, 0, function () {
    return '' + hFormat.apply(this) + zeroFill(this.minutes(), 2) +
        zeroFill(this.seconds(), 2);
});

addFormatToken('Hmm', 0, 0, function () {
    return '' + this.hours() + zeroFill(this.minutes(), 2);
});

addFormatToken('Hmmss', 0, 0, function () {
    return '' + this.hours() + zeroFill(this.minutes(), 2) +
        zeroFill(this.seconds(), 2);
});

function meridiem (token, lowercase) {
    addFormatToken(token, 0, 0, function () {
        return this.localeData().meridiem(this.hours(), this.minutes(), lowercase);
    });
}

meridiem('a', true);
meridiem('A', false);

// ALIASES

addUnitAlias('hour', 'h');

// PRIORITY
addUnitPriority('hour', 13);

// PARSING

function matchMeridiem (isStrict, locale) {
    return locale._meridiemParse;
}

addRegexToken('a',  matchMeridiem);
addRegexToken('A',  matchMeridiem);
addRegexToken('H',  match1to2);
addRegexToken('h',  match1to2);
addRegexToken('k',  match1to2);
addRegexToken('HH', match1to2, match2);
addRegexToken('hh', match1to2, match2);
addRegexToken('kk', match1to2, match2);

addRegexToken('hmm', match3to4);
addRegexToken('hmmss', match5to6);
addRegexToken('Hmm', match3to4);
addRegexToken('Hmmss', match5to6);

addParseToken(['H', 'HH'], HOUR);
addParseToken(['k', 'kk'], function (input, array, config) {
    var kInput = toInt(input);
    array[HOUR] = kInput === 24 ? 0 : kInput;
});
addParseToken(['a', 'A'], function (input, array, config) {
    config._isPm = config._locale.isPM(input);
    config._meridiem = input;
});
addParseToken(['h', 'hh'], function (input, array, config) {
    array[HOUR] = toInt(input);
    getParsingFlags(config).bigHour = true;
});
addParseToken('hmm', function (input, array, config) {
    var pos = input.length - 2;
    array[HOUR] = toInt(input.substr(0, pos));
    array[MINUTE] = toInt(input.substr(pos));
    getParsingFlags(config).bigHour = true;
});
addParseToken('hmmss', function (input, array, config) {
    var pos1 = input.length - 4;
    var pos2 = input.length - 2;
    array[HOUR] = toInt(input.substr(0, pos1));
    array[MINUTE] = toInt(input.substr(pos1, 2));
    array[SECOND] = toInt(input.substr(pos2));
    getParsingFlags(config).bigHour = true;
});
addParseToken('Hmm', function (input, array, config) {
    var pos = input.length - 2;
    array[HOUR] = toInt(input.substr(0, pos));
    array[MINUTE] = toInt(input.substr(pos));
});
addParseToken('Hmmss', function (input, array, config) {
    var pos1 = input.length - 4;
    var pos2 = input.length - 2;
    array[HOUR] = toInt(input.substr(0, pos1));
    array[MINUTE] = toInt(input.substr(pos1, 2));
    array[SECOND] = toInt(input.substr(pos2));
});

// LOCALES

function localeIsPM (input) {
    // IE8 Quirks Mode & IE7 Standards Mode do not allow accessing strings like arrays
    // Using charAt should be more compatible.
    return ((input + '').toLowerCase().charAt(0) === 'p');
}

var defaultLocaleMeridiemParse = /[ap]\.?m?\.?/i;
function localeMeridiem (hours, minutes, isLower) {
    if (hours > 11) {
        return isLower ? 'pm' : 'PM';
    } else {
        return isLower ? 'am' : 'AM';
    }
}


// MOMENTS

// Setting the hour should keep the time, because the user explicitly
// specified which hour he wants. So trying to maintain the same hour (in
// a new timezone) makes sense. Adding/subtracting hours does not follow
// this rule.
var getSetHour = makeGetSet('Hours', true);

// months
// week
// weekdays
// meridiem
var baseConfig = {
    calendar: defaultCalendar,
    longDateFormat: defaultLongDateFormat,
    invalidDate: defaultInvalidDate,
    ordinal: defaultOrdinal,
    dayOfMonthOrdinalParse: defaultDayOfMonthOrdinalParse,
    relativeTime: defaultRelativeTime,

    months: defaultLocaleMonths,
    monthsShort: defaultLocaleMonthsShort,

    week: defaultLocaleWeek,

    weekdays: defaultLocaleWeekdays,
    weekdaysMin: defaultLocaleWeekdaysMin,
    weekdaysShort: defaultLocaleWeekdaysShort,

    meridiemParse: defaultLocaleMeridiemParse
};

// internal storage for locale config files
var locales = {};
var localeFamilies = {};
var globalLocale;

function normalizeLocale(key) {
    return key ? key.toLowerCase().replace('_', '-') : key;
}

// pick the locale from the array
// try ['en-au', 'en-gb'] as 'en-au', 'en-gb', 'en', as in move through the list trying each
// substring from most specific to least, but move to the next array item if it's a more specific variant than the current root
function chooseLocale(names) {
    var i = 0, j, next, locale, split;

    while (i < names.length) {
        split = normalizeLocale(names[i]).split('-');
        j = split.length;
        next = normalizeLocale(names[i + 1]);
        next = next ? next.split('-') : null;
        while (j > 0) {
            locale = loadLocale(split.slice(0, j).join('-'));
            if (locale) {
                return locale;
            }
            if (next && next.length >= j && compareArrays(split, next, true) >= j - 1) {
                //the next array item is better than a shallower substring of this one
                break;
            }
            j--;
        }
        i++;
    }
    return null;
}

function loadLocale(name) {
    var oldLocale = null;
    // TODO: Find a better way to register and load all the locales in Node
    if (!locales[name] && (typeof module !== 'undefined') &&
            module && module.exports) {
        try {
            oldLocale = globalLocale._abbr;
            var aliasedRequire = require;
            __webpack_require__(309)("./" + name);
            getSetGlobalLocale(oldLocale);
        } catch (e) {}
    }
    return locales[name];
}

// This function will load locale and then set the global locale.  If
// no arguments are passed in, it will simply return the current global
// locale key.
function getSetGlobalLocale (key, values) {
    var data;
    if (key) {
        if (isUndefined(values)) {
            data = getLocale(key);
        }
        else {
            data = defineLocale(key, values);
        }

        if (data) {
            // moment.duration._locale = moment._locale = data;
            globalLocale = data;
        }
    }

    return globalLocale._abbr;
}

function defineLocale (name, config) {
    if (config !== null) {
        var parentConfig = baseConfig;
        config.abbr = name;
        if (locales[name] != null) {
            deprecateSimple('defineLocaleOverride',
                    'use moment.updateLocale(localeName, config) to change ' +
                    'an existing locale. moment.defineLocale(localeName, ' +
                    'config) should only be used for creating a new locale ' +
                    'See http://momentjs.com/guides/#/warnings/define-locale/ for more info.');
            parentConfig = locales[name]._config;
        } else if (config.parentLocale != null) {
            if (locales[config.parentLocale] != null) {
                parentConfig = locales[config.parentLocale]._config;
            } else {
                if (!localeFamilies[config.parentLocale]) {
                    localeFamilies[config.parentLocale] = [];
                }
                localeFamilies[config.parentLocale].push({
                    name: name,
                    config: config
                });
                return null;
            }
        }
        locales[name] = new Locale(mergeConfigs(parentConfig, config));

        if (localeFamilies[name]) {
            localeFamilies[name].forEach(function (x) {
                defineLocale(x.name, x.config);
            });
        }

        // backwards compat for now: also set the locale
        // make sure we set the locale AFTER all child locales have been
        // created, so we won't end up with the child locale set.
        getSetGlobalLocale(name);


        return locales[name];
    } else {
        // useful for testing
        delete locales[name];
        return null;
    }
}

function updateLocale(name, config) {
    if (config != null) {
        var locale, parentConfig = baseConfig;
        // MERGE
        if (locales[name] != null) {
            parentConfig = locales[name]._config;
        }
        config = mergeConfigs(parentConfig, config);
        locale = new Locale(config);
        locale.parentLocale = locales[name];
        locales[name] = locale;

        // backwards compat for now: also set the locale
        getSetGlobalLocale(name);
    } else {
        // pass null for config to unupdate, useful for tests
        if (locales[name] != null) {
            if (locales[name].parentLocale != null) {
                locales[name] = locales[name].parentLocale;
            } else if (locales[name] != null) {
                delete locales[name];
            }
        }
    }
    return locales[name];
}

// returns locale data
function getLocale (key) {
    var locale;

    if (key && key._locale && key._locale._abbr) {
        key = key._locale._abbr;
    }

    if (!key) {
        return globalLocale;
    }

    if (!isArray(key)) {
        //short-circuit everything else
        locale = loadLocale(key);
        if (locale) {
            return locale;
        }
        key = [key];
    }

    return chooseLocale(key);
}

function listLocales() {
    return keys(locales);
}

function checkOverflow (m) {
    var overflow;
    var a = m._a;

    if (a && getParsingFlags(m).overflow === -2) {
        overflow =
            a[MONTH]       < 0 || a[MONTH]       > 11  ? MONTH :
            a[DATE]        < 1 || a[DATE]        > daysInMonth(a[YEAR], a[MONTH]) ? DATE :
            a[HOUR]        < 0 || a[HOUR]        > 24 || (a[HOUR] === 24 && (a[MINUTE] !== 0 || a[SECOND] !== 0 || a[MILLISECOND] !== 0)) ? HOUR :
            a[MINUTE]      < 0 || a[MINUTE]      > 59  ? MINUTE :
            a[SECOND]      < 0 || a[SECOND]      > 59  ? SECOND :
            a[MILLISECOND] < 0 || a[MILLISECOND] > 999 ? MILLISECOND :
            -1;

        if (getParsingFlags(m)._overflowDayOfYear && (overflow < YEAR || overflow > DATE)) {
            overflow = DATE;
        }
        if (getParsingFlags(m)._overflowWeeks && overflow === -1) {
            overflow = WEEK;
        }
        if (getParsingFlags(m)._overflowWeekday && overflow === -1) {
            overflow = WEEKDAY;
        }

        getParsingFlags(m).overflow = overflow;
    }

    return m;
}

// Pick the first defined of two or three arguments.
function defaults(a, b, c) {
    if (a != null) {
        return a;
    }
    if (b != null) {
        return b;
    }
    return c;
}

function currentDateArray(config) {
    // hooks is actually the exported moment object
    var nowValue = new Date(hooks.now());
    if (config._useUTC) {
        return [nowValue.getUTCFullYear(), nowValue.getUTCMonth(), nowValue.getUTCDate()];
    }
    return [nowValue.getFullYear(), nowValue.getMonth(), nowValue.getDate()];
}

// convert an array to a date.
// the array should mirror the parameters below
// note: all values past the year are optional and will default to the lowest possible value.
// [year, month, day , hour, minute, second, millisecond]
function configFromArray (config) {
    var i, date, input = [], currentDate, yearToUse;

    if (config._d) {
        return;
    }

    currentDate = currentDateArray(config);

    //compute day of the year from weeks and weekdays
    if (config._w && config._a[DATE] == null && config._a[MONTH] == null) {
        dayOfYearFromWeekInfo(config);
    }

    //if the day of the year is set, figure out what it is
    if (config._dayOfYear != null) {
        yearToUse = defaults(config._a[YEAR], currentDate[YEAR]);

        if (config._dayOfYear > daysInYear(yearToUse) || config._dayOfYear === 0) {
            getParsingFlags(config)._overflowDayOfYear = true;
        }

        date = createUTCDate(yearToUse, 0, config._dayOfYear);
        config._a[MONTH] = date.getUTCMonth();
        config._a[DATE] = date.getUTCDate();
    }

    // Default to current date.
    // * if no year, month, day of month are given, default to today
    // * if day of month is given, default month and year
    // * if month is given, default only year
    // * if year is given, don't default anything
    for (i = 0; i < 3 && config._a[i] == null; ++i) {
        config._a[i] = input[i] = currentDate[i];
    }

    // Zero out whatever was not defaulted, including time
    for (; i < 7; i++) {
        config._a[i] = input[i] = (config._a[i] == null) ? (i === 2 ? 1 : 0) : config._a[i];
    }

    // Check for 24:00:00.000
    if (config._a[HOUR] === 24 &&
            config._a[MINUTE] === 0 &&
            config._a[SECOND] === 0 &&
            config._a[MILLISECOND] === 0) {
        config._nextDay = true;
        config._a[HOUR] = 0;
    }

    config._d = (config._useUTC ? createUTCDate : createDate).apply(null, input);
    // Apply timezone offset from input. The actual utcOffset can be changed
    // with parseZone.
    if (config._tzm != null) {
        config._d.setUTCMinutes(config._d.getUTCMinutes() - config._tzm);
    }

    if (config._nextDay) {
        config._a[HOUR] = 24;
    }

    // check for mismatching day of week
    if (config._w && typeof config._w.d !== 'undefined' && config._w.d !== config._d.getDay()) {
        getParsingFlags(config).weekdayMismatch = true;
    }
}

function dayOfYearFromWeekInfo(config) {
    var w, weekYear, week, weekday, dow, doy, temp, weekdayOverflow;

    w = config._w;
    if (w.GG != null || w.W != null || w.E != null) {
        dow = 1;
        doy = 4;

        // TODO: We need to take the current isoWeekYear, but that depends on
        // how we interpret now (local, utc, fixed offset). So create
        // a now version of current config (take local/utc/offset flags, and
        // create now).
        weekYear = defaults(w.GG, config._a[YEAR], weekOfYear(createLocal(), 1, 4).year);
        week = defaults(w.W, 1);
        weekday = defaults(w.E, 1);
        if (weekday < 1 || weekday > 7) {
            weekdayOverflow = true;
        }
    } else {
        dow = config._locale._week.dow;
        doy = config._locale._week.doy;

        var curWeek = weekOfYear(createLocal(), dow, doy);

        weekYear = defaults(w.gg, config._a[YEAR], curWeek.year);

        // Default to current week.
        week = defaults(w.w, curWeek.week);

        if (w.d != null) {
            // weekday -- low day numbers are considered next week
            weekday = w.d;
            if (weekday < 0 || weekday > 6) {
                weekdayOverflow = true;
            }
        } else if (w.e != null) {
            // local weekday -- counting starts from begining of week
            weekday = w.e + dow;
            if (w.e < 0 || w.e > 6) {
                weekdayOverflow = true;
            }
        } else {
            // default to begining of week
            weekday = dow;
        }
    }
    if (week < 1 || week > weeksInYear(weekYear, dow, doy)) {
        getParsingFlags(config)._overflowWeeks = true;
    } else if (weekdayOverflow != null) {
        getParsingFlags(config)._overflowWeekday = true;
    } else {
        temp = dayOfYearFromWeeks(weekYear, week, weekday, dow, doy);
        config._a[YEAR] = temp.year;
        config._dayOfYear = temp.dayOfYear;
    }
}

// iso 8601 regex
// 0000-00-00 0000-W00 or 0000-W00-0 + T + 00 or 00:00 or 00:00:00 or 00:00:00.000 + +00:00 or +0000 or +00)
var extendedIsoRegex = /^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/;
var basicIsoRegex = /^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/;

var tzRegex = /Z|[+-]\d\d(?::?\d\d)?/;

var isoDates = [
    ['YYYYYY-MM-DD', /[+-]\d{6}-\d\d-\d\d/],
    ['YYYY-MM-DD', /\d{4}-\d\d-\d\d/],
    ['GGGG-[W]WW-E', /\d{4}-W\d\d-\d/],
    ['GGGG-[W]WW', /\d{4}-W\d\d/, false],
    ['YYYY-DDD', /\d{4}-\d{3}/],
    ['YYYY-MM', /\d{4}-\d\d/, false],
    ['YYYYYYMMDD', /[+-]\d{10}/],
    ['YYYYMMDD', /\d{8}/],
    // YYYYMM is NOT allowed by the standard
    ['GGGG[W]WWE', /\d{4}W\d{3}/],
    ['GGGG[W]WW', /\d{4}W\d{2}/, false],
    ['YYYYDDD', /\d{7}/]
];

// iso time formats and regexes
var isoTimes = [
    ['HH:mm:ss.SSSS', /\d\d:\d\d:\d\d\.\d+/],
    ['HH:mm:ss,SSSS', /\d\d:\d\d:\d\d,\d+/],
    ['HH:mm:ss', /\d\d:\d\d:\d\d/],
    ['HH:mm', /\d\d:\d\d/],
    ['HHmmss.SSSS', /\d\d\d\d\d\d\.\d+/],
    ['HHmmss,SSSS', /\d\d\d\d\d\d,\d+/],
    ['HHmmss', /\d\d\d\d\d\d/],
    ['HHmm', /\d\d\d\d/],
    ['HH', /\d\d/]
];

var aspNetJsonRegex = /^\/?Date\((\-?\d+)/i;

// date from iso format
function configFromISO(config) {
    var i, l,
        string = config._i,
        match = extendedIsoRegex.exec(string) || basicIsoRegex.exec(string),
        allowTime, dateFormat, timeFormat, tzFormat;

    if (match) {
        getParsingFlags(config).iso = true;

        for (i = 0, l = isoDates.length; i < l; i++) {
            if (isoDates[i][1].exec(match[1])) {
                dateFormat = isoDates[i][0];
                allowTime = isoDates[i][2] !== false;
                break;
            }
        }
        if (dateFormat == null) {
            config._isValid = false;
            return;
        }
        if (match[3]) {
            for (i = 0, l = isoTimes.length; i < l; i++) {
                if (isoTimes[i][1].exec(match[3])) {
                    // match[2] should be 'T' or space
                    timeFormat = (match[2] || ' ') + isoTimes[i][0];
                    break;
                }
            }
            if (timeFormat == null) {
                config._isValid = false;
                return;
            }
        }
        if (!allowTime && timeFormat != null) {
            config._isValid = false;
            return;
        }
        if (match[4]) {
            if (tzRegex.exec(match[4])) {
                tzFormat = 'Z';
            } else {
                config._isValid = false;
                return;
            }
        }
        config._f = dateFormat + (timeFormat || '') + (tzFormat || '');
        configFromStringAndFormat(config);
    } else {
        config._isValid = false;
    }
}

// RFC 2822 regex: For details see https://tools.ietf.org/html/rfc2822#section-3.3
var rfc2822 = /^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/;

function extractFromRFC2822Strings(yearStr, monthStr, dayStr, hourStr, minuteStr, secondStr) {
    var result = [
        untruncateYear(yearStr),
        defaultLocaleMonthsShort.indexOf(monthStr),
        parseInt(dayStr, 10),
        parseInt(hourStr, 10),
        parseInt(minuteStr, 10)
    ];

    if (secondStr) {
        result.push(parseInt(secondStr, 10));
    }

    return result;
}

function untruncateYear(yearStr) {
    var year = parseInt(yearStr, 10);
    if (year <= 49) {
        return 2000 + year;
    } else if (year <= 999) {
        return 1900 + year;
    }
    return year;
}

function preprocessRFC2822(s) {
    // Remove comments and folding whitespace and replace multiple-spaces with a single space
    return s.replace(/\([^)]*\)|[\n\t]/g, ' ').replace(/(\s\s+)/g, ' ').trim();
}

function checkWeekday(weekdayStr, parsedInput, config) {
    if (weekdayStr) {
        // TODO: Replace the vanilla JS Date object with an indepentent day-of-week check.
        var weekdayProvided = defaultLocaleWeekdaysShort.indexOf(weekdayStr),
            weekdayActual = new Date(parsedInput[0], parsedInput[1], parsedInput[2]).getDay();
        if (weekdayProvided !== weekdayActual) {
            getParsingFlags(config).weekdayMismatch = true;
            config._isValid = false;
            return false;
        }
    }
    return true;
}

var obsOffsets = {
    UT: 0,
    GMT: 0,
    EDT: -4 * 60,
    EST: -5 * 60,
    CDT: -5 * 60,
    CST: -6 * 60,
    MDT: -6 * 60,
    MST: -7 * 60,
    PDT: -7 * 60,
    PST: -8 * 60
};

function calculateOffset(obsOffset, militaryOffset, numOffset) {
    if (obsOffset) {
        return obsOffsets[obsOffset];
    } else if (militaryOffset) {
        // the only allowed military tz is Z
        return 0;
    } else {
        var hm = parseInt(numOffset, 10);
        var m = hm % 100, h = (hm - m) / 100;
        return h * 60 + m;
    }
}

// date and time from ref 2822 format
function configFromRFC2822(config) {
    var match = rfc2822.exec(preprocessRFC2822(config._i));
    if (match) {
        var parsedArray = extractFromRFC2822Strings(match[4], match[3], match[2], match[5], match[6], match[7]);
        if (!checkWeekday(match[1], parsedArray, config)) {
            return;
        }

        config._a = parsedArray;
        config._tzm = calculateOffset(match[8], match[9], match[10]);

        config._d = createUTCDate.apply(null, config._a);
        config._d.setUTCMinutes(config._d.getUTCMinutes() - config._tzm);

        getParsingFlags(config).rfc2822 = true;
    } else {
        config._isValid = false;
    }
}

// date from iso format or fallback
function configFromString(config) {
    var matched = aspNetJsonRegex.exec(config._i);

    if (matched !== null) {
        config._d = new Date(+matched[1]);
        return;
    }

    configFromISO(config);
    if (config._isValid === false) {
        delete config._isValid;
    } else {
        return;
    }

    configFromRFC2822(config);
    if (config._isValid === false) {
        delete config._isValid;
    } else {
        return;
    }

    // Final attempt, use Input Fallback
    hooks.createFromInputFallback(config);
}

hooks.createFromInputFallback = deprecate(
    'value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), ' +
    'which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are ' +
    'discouraged and will be removed in an upcoming major release. Please refer to ' +
    'http://momentjs.com/guides/#/warnings/js-date/ for more info.',
    function (config) {
        config._d = new Date(config._i + (config._useUTC ? ' UTC' : ''));
    }
);

// constant that refers to the ISO standard
hooks.ISO_8601 = function () {};

// constant that refers to the RFC 2822 form
hooks.RFC_2822 = function () {};

// date from string and format string
function configFromStringAndFormat(config) {
    // TODO: Move this to another part of the creation flow to prevent circular deps
    if (config._f === hooks.ISO_8601) {
        configFromISO(config);
        return;
    }
    if (config._f === hooks.RFC_2822) {
        configFromRFC2822(config);
        return;
    }
    config._a = [];
    getParsingFlags(config).empty = true;

    // This array is used to make a Date, either with `new Date` or `Date.UTC`
    var string = '' + config._i,
        i, parsedInput, tokens, token, skipped,
        stringLength = string.length,
        totalParsedInputLength = 0;

    tokens = expandFormat(config._f, config._locale).match(formattingTokens) || [];

    for (i = 0; i < tokens.length; i++) {
        token = tokens[i];
        parsedInput = (string.match(getParseRegexForToken(token, config)) || [])[0];
        // console.log('token', token, 'parsedInput', parsedInput,
        //         'regex', getParseRegexForToken(token, config));
        if (parsedInput) {
            skipped = string.substr(0, string.indexOf(parsedInput));
            if (skipped.length > 0) {
                getParsingFlags(config).unusedInput.push(skipped);
            }
            string = string.slice(string.indexOf(parsedInput) + parsedInput.length);
            totalParsedInputLength += parsedInput.length;
        }
        // don't parse if it's not a known token
        if (formatTokenFunctions[token]) {
            if (parsedInput) {
                getParsingFlags(config).empty = false;
            }
            else {
                getParsingFlags(config).unusedTokens.push(token);
            }
            addTimeToArrayFromToken(token, parsedInput, config);
        }
        else if (config._strict && !parsedInput) {
            getParsingFlags(config).unusedTokens.push(token);
        }
    }

    // add remaining unparsed input length to the string
    getParsingFlags(config).charsLeftOver = stringLength - totalParsedInputLength;
    if (string.length > 0) {
        getParsingFlags(config).unusedInput.push(string);
    }

    // clear _12h flag if hour is <= 12
    if (config._a[HOUR] <= 12 &&
        getParsingFlags(config).bigHour === true &&
        config._a[HOUR] > 0) {
        getParsingFlags(config).bigHour = undefined;
    }

    getParsingFlags(config).parsedDateParts = config._a.slice(0);
    getParsingFlags(config).meridiem = config._meridiem;
    // handle meridiem
    config._a[HOUR] = meridiemFixWrap(config._locale, config._a[HOUR], config._meridiem);

    configFromArray(config);
    checkOverflow(config);
}


function meridiemFixWrap (locale, hour, meridiem) {
    var isPm;

    if (meridiem == null) {
        // nothing to do
        return hour;
    }
    if (locale.meridiemHour != null) {
        return locale.meridiemHour(hour, meridiem);
    } else if (locale.isPM != null) {
        // Fallback
        isPm = locale.isPM(meridiem);
        if (isPm && hour < 12) {
            hour += 12;
        }
        if (!isPm && hour === 12) {
            hour = 0;
        }
        return hour;
    } else {
        // this is not supposed to happen
        return hour;
    }
}

// date from string and array of format strings
function configFromStringAndArray(config) {
    var tempConfig,
        bestMoment,

        scoreToBeat,
        i,
        currentScore;

    if (config._f.length === 0) {
        getParsingFlags(config).invalidFormat = true;
        config._d = new Date(NaN);
        return;
    }

    for (i = 0; i < config._f.length; i++) {
        currentScore = 0;
        tempConfig = copyConfig({}, config);
        if (config._useUTC != null) {
            tempConfig._useUTC = config._useUTC;
        }
        tempConfig._f = config._f[i];
        configFromStringAndFormat(tempConfig);

        if (!isValid(tempConfig)) {
            continue;
        }

        // if there is any input that was not parsed add a penalty for that format
        currentScore += getParsingFlags(tempConfig).charsLeftOver;

        //or tokens
        currentScore += getParsingFlags(tempConfig).unusedTokens.length * 10;

        getParsingFlags(tempConfig).score = currentScore;

        if (scoreToBeat == null || currentScore < scoreToBeat) {
            scoreToBeat = currentScore;
            bestMoment = tempConfig;
        }
    }

    extend(config, bestMoment || tempConfig);
}

function configFromObject(config) {
    if (config._d) {
        return;
    }

    var i = normalizeObjectUnits(config._i);
    config._a = map([i.year, i.month, i.day || i.date, i.hour, i.minute, i.second, i.millisecond], function (obj) {
        return obj && parseInt(obj, 10);
    });

    configFromArray(config);
}

function createFromConfig (config) {
    var res = new Moment(checkOverflow(prepareConfig(config)));
    if (res._nextDay) {
        // Adding is smart enough around DST
        res.add(1, 'd');
        res._nextDay = undefined;
    }

    return res;
}

function prepareConfig (config) {
    var input = config._i,
        format = config._f;

    config._locale = config._locale || getLocale(config._l);

    if (input === null || (format === undefined && input === '')) {
        return createInvalid({nullInput: true});
    }

    if (typeof input === 'string') {
        config._i = input = config._locale.preparse(input);
    }

    if (isMoment(input)) {
        return new Moment(checkOverflow(input));
    } else if (isDate(input)) {
        config._d = input;
    } else if (isArray(format)) {
        configFromStringAndArray(config);
    } else if (format) {
        configFromStringAndFormat(config);
    }  else {
        configFromInput(config);
    }

    if (!isValid(config)) {
        config._d = null;
    }

    return config;
}

function configFromInput(config) {
    var input = config._i;
    if (isUndefined(input)) {
        config._d = new Date(hooks.now());
    } else if (isDate(input)) {
        config._d = new Date(input.valueOf());
    } else if (typeof input === 'string') {
        configFromString(config);
    } else if (isArray(input)) {
        config._a = map(input.slice(0), function (obj) {
            return parseInt(obj, 10);
        });
        configFromArray(config);
    } else if (isObject(input)) {
        configFromObject(config);
    } else if (isNumber(input)) {
        // from milliseconds
        config._d = new Date(input);
    } else {
        hooks.createFromInputFallback(config);
    }
}

function createLocalOrUTC (input, format, locale, strict, isUTC) {
    var c = {};

    if (locale === true || locale === false) {
        strict = locale;
        locale = undefined;
    }

    if ((isObject(input) && isObjectEmpty(input)) ||
            (isArray(input) && input.length === 0)) {
        input = undefined;
    }
    // object construction must be done this way.
    // https://github.com/moment/moment/issues/1423
    c._isAMomentObject = true;
    c._useUTC = c._isUTC = isUTC;
    c._l = locale;
    c._i = input;
    c._f = format;
    c._strict = strict;

    return createFromConfig(c);
}

function createLocal (input, format, locale, strict) {
    return createLocalOrUTC(input, format, locale, strict, false);
}

var prototypeMin = deprecate(
    'moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/',
    function () {
        var other = createLocal.apply(null, arguments);
        if (this.isValid() && other.isValid()) {
            return other < this ? this : other;
        } else {
            return createInvalid();
        }
    }
);

var prototypeMax = deprecate(
    'moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/',
    function () {
        var other = createLocal.apply(null, arguments);
        if (this.isValid() && other.isValid()) {
            return other > this ? this : other;
        } else {
            return createInvalid();
        }
    }
);

// Pick a moment m from moments so that m[fn](other) is true for all
// other. This relies on the function fn to be transitive.
//
// moments should either be an array of moment objects or an array, whose
// first element is an array of moment objects.
function pickBy(fn, moments) {
    var res, i;
    if (moments.length === 1 && isArray(moments[0])) {
        moments = moments[0];
    }
    if (!moments.length) {
        return createLocal();
    }
    res = moments[0];
    for (i = 1; i < moments.length; ++i) {
        if (!moments[i].isValid() || moments[i][fn](res)) {
            res = moments[i];
        }
    }
    return res;
}

// TODO: Use [].sort instead?
function min () {
    var args = [].slice.call(arguments, 0);

    return pickBy('isBefore', args);
}

function max () {
    var args = [].slice.call(arguments, 0);

    return pickBy('isAfter', args);
}

var now = function () {
    return Date.now ? Date.now() : +(new Date());
};

var ordering = ['year', 'quarter', 'month', 'week', 'day', 'hour', 'minute', 'second', 'millisecond'];

function isDurationValid(m) {
    for (var key in m) {
        if (!(indexOf.call(ordering, key) !== -1 && (m[key] == null || !isNaN(m[key])))) {
            return false;
        }
    }

    var unitHasDecimal = false;
    for (var i = 0; i < ordering.length; ++i) {
        if (m[ordering[i]]) {
            if (unitHasDecimal) {
                return false; // only allow non-integers for smallest unit
            }
            if (parseFloat(m[ordering[i]]) !== toInt(m[ordering[i]])) {
                unitHasDecimal = true;
            }
        }
    }

    return true;
}

function isValid$1() {
    return this._isValid;
}

function createInvalid$1() {
    return createDuration(NaN);
}

function Duration (duration) {
    var normalizedInput = normalizeObjectUnits(duration),
        years = normalizedInput.year || 0,
        quarters = normalizedInput.quarter || 0,
        months = normalizedInput.month || 0,
        weeks = normalizedInput.week || 0,
        days = normalizedInput.day || 0,
        hours = normalizedInput.hour || 0,
        minutes = normalizedInput.minute || 0,
        seconds = normalizedInput.second || 0,
        milliseconds = normalizedInput.millisecond || 0;

    this._isValid = isDurationValid(normalizedInput);

    // representation for dateAddRemove
    this._milliseconds = +milliseconds +
        seconds * 1e3 + // 1000
        minutes * 6e4 + // 1000 * 60
        hours * 1000 * 60 * 60; //using 1000 * 60 * 60 instead of 36e5 to avoid floating point rounding errors https://github.com/moment/moment/issues/2978
    // Because of dateAddRemove treats 24 hours as different from a
    // day when working around DST, we need to store them separately
    this._days = +days +
        weeks * 7;
    // It is impossible to translate months into days without knowing
    // which months you are are talking about, so we have to store
    // it separately.
    this._months = +months +
        quarters * 3 +
        years * 12;

    this._data = {};

    this._locale = getLocale();

    this._bubble();
}

function isDuration (obj) {
    return obj instanceof Duration;
}

function absRound (number) {
    if (number < 0) {
        return Math.round(-1 * number) * -1;
    } else {
        return Math.round(number);
    }
}

// FORMATTING

function offset (token, separator) {
    addFormatToken(token, 0, 0, function () {
        var offset = this.utcOffset();
        var sign = '+';
        if (offset < 0) {
            offset = -offset;
            sign = '-';
        }
        return sign + zeroFill(~~(offset / 60), 2) + separator + zeroFill(~~(offset) % 60, 2);
    });
}

offset('Z', ':');
offset('ZZ', '');

// PARSING

addRegexToken('Z',  matchShortOffset);
addRegexToken('ZZ', matchShortOffset);
addParseToken(['Z', 'ZZ'], function (input, array, config) {
    config._useUTC = true;
    config._tzm = offsetFromString(matchShortOffset, input);
});

// HELPERS

// timezone chunker
// '+10:00' > ['10',  '00']
// '-1530'  > ['-15', '30']
var chunkOffset = /([\+\-]|\d\d)/gi;

function offsetFromString(matcher, string) {
    var matches = (string || '').match(matcher);

    if (matches === null) {
        return null;
    }

    var chunk   = matches[matches.length - 1] || [];
    var parts   = (chunk + '').match(chunkOffset) || ['-', 0, 0];
    var minutes = +(parts[1] * 60) + toInt(parts[2]);

    return minutes === 0 ?
      0 :
      parts[0] === '+' ? minutes : -minutes;
}

// Return a moment from input, that is local/utc/zone equivalent to model.
function cloneWithOffset(input, model) {
    var res, diff;
    if (model._isUTC) {
        res = model.clone();
        diff = (isMoment(input) || isDate(input) ? input.valueOf() : createLocal(input).valueOf()) - res.valueOf();
        // Use low-level api, because this fn is low-level api.
        res._d.setTime(res._d.valueOf() + diff);
        hooks.updateOffset(res, false);
        return res;
    } else {
        return createLocal(input).local();
    }
}

function getDateOffset (m) {
    // On Firefox.24 Date#getTimezoneOffset returns a floating point.
    // https://github.com/moment/moment/pull/1871
    return -Math.round(m._d.getTimezoneOffset() / 15) * 15;
}

// HOOKS

// This function will be called whenever a moment is mutated.
// It is intended to keep the offset in sync with the timezone.
hooks.updateOffset = function () {};

// MOMENTS

// keepLocalTime = true means only change the timezone, without
// affecting the local hour. So 5:31:26 +0300 --[utcOffset(2, true)]-->
// 5:31:26 +0200 It is possible that 5:31:26 doesn't exist with offset
// +0200, so we adjust the time as needed, to be valid.
//
// Keeping the time actually adds/subtracts (one hour)
// from the actual represented time. That is why we call updateOffset
// a second time. In case it wants us to change the offset again
// _changeInProgress == true case, then we have to adjust, because
// there is no such time in the given timezone.
function getSetOffset (input, keepLocalTime, keepMinutes) {
    var offset = this._offset || 0,
        localAdjust;
    if (!this.isValid()) {
        return input != null ? this : NaN;
    }
    if (input != null) {
        if (typeof input === 'string') {
            input = offsetFromString(matchShortOffset, input);
            if (input === null) {
                return this;
            }
        } else if (Math.abs(input) < 16 && !keepMinutes) {
            input = input * 60;
        }
        if (!this._isUTC && keepLocalTime) {
            localAdjust = getDateOffset(this);
        }
        this._offset = input;
        this._isUTC = true;
        if (localAdjust != null) {
            this.add(localAdjust, 'm');
        }
        if (offset !== input) {
            if (!keepLocalTime || this._changeInProgress) {
                addSubtract(this, createDuration(input - offset, 'm'), 1, false);
            } else if (!this._changeInProgress) {
                this._changeInProgress = true;
                hooks.updateOffset(this, true);
                this._changeInProgress = null;
            }
        }
        return this;
    } else {
        return this._isUTC ? offset : getDateOffset(this);
    }
}

function getSetZone (input, keepLocalTime) {
    if (input != null) {
        if (typeof input !== 'string') {
            input = -input;
        }

        this.utcOffset(input, keepLocalTime);

        return this;
    } else {
        return -this.utcOffset();
    }
}

function setOffsetToUTC (keepLocalTime) {
    return this.utcOffset(0, keepLocalTime);
}

function setOffsetToLocal (keepLocalTime) {
    if (this._isUTC) {
        this.utcOffset(0, keepLocalTime);
        this._isUTC = false;

        if (keepLocalTime) {
            this.subtract(getDateOffset(this), 'm');
        }
    }
    return this;
}

function setOffsetToParsedOffset () {
    if (this._tzm != null) {
        this.utcOffset(this._tzm, false, true);
    } else if (typeof this._i === 'string') {
        var tZone = offsetFromString(matchOffset, this._i);
        if (tZone != null) {
            this.utcOffset(tZone);
        }
        else {
            this.utcOffset(0, true);
        }
    }
    return this;
}

function hasAlignedHourOffset (input) {
    if (!this.isValid()) {
        return false;
    }
    input = input ? createLocal(input).utcOffset() : 0;

    return (this.utcOffset() - input) % 60 === 0;
}

function isDaylightSavingTime () {
    return (
        this.utcOffset() > this.clone().month(0).utcOffset() ||
        this.utcOffset() > this.clone().month(5).utcOffset()
    );
}

function isDaylightSavingTimeShifted () {
    if (!isUndefined(this._isDSTShifted)) {
        return this._isDSTShifted;
    }

    var c = {};

    copyConfig(c, this);
    c = prepareConfig(c);

    if (c._a) {
        var other = c._isUTC ? createUTC(c._a) : createLocal(c._a);
        this._isDSTShifted = this.isValid() &&
            compareArrays(c._a, other.toArray()) > 0;
    } else {
        this._isDSTShifted = false;
    }

    return this._isDSTShifted;
}

function isLocal () {
    return this.isValid() ? !this._isUTC : false;
}

function isUtcOffset () {
    return this.isValid() ? this._isUTC : false;
}

function isUtc () {
    return this.isValid() ? this._isUTC && this._offset === 0 : false;
}

// ASP.NET json date format regex
var aspNetRegex = /^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/;

// from http://docs.closure-library.googlecode.com/git/closure_goog_date_date.js.source.html
// somewhat more in line with 4.4.3.2 2004 spec, but allows decimal anywhere
// and further modified to allow for strings containing both week and day
var isoRegex = /^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;

function createDuration (input, key) {
    var duration = input,
        // matching against regexp is expensive, do it on demand
        match = null,
        sign,
        ret,
        diffRes;

    if (isDuration(input)) {
        duration = {
            ms : input._milliseconds,
            d  : input._days,
            M  : input._months
        };
    } else if (isNumber(input)) {
        duration = {};
        if (key) {
            duration[key] = input;
        } else {
            duration.milliseconds = input;
        }
    } else if (!!(match = aspNetRegex.exec(input))) {
        sign = (match[1] === '-') ? -1 : 1;
        duration = {
            y  : 0,
            d  : toInt(match[DATE])                         * sign,
            h  : toInt(match[HOUR])                         * sign,
            m  : toInt(match[MINUTE])                       * sign,
            s  : toInt(match[SECOND])                       * sign,
            ms : toInt(absRound(match[MILLISECOND] * 1000)) * sign // the millisecond decimal point is included in the match
        };
    } else if (!!(match = isoRegex.exec(input))) {
        sign = (match[1] === '-') ? -1 : (match[1] === '+') ? 1 : 1;
        duration = {
            y : parseIso(match[2], sign),
            M : parseIso(match[3], sign),
            w : parseIso(match[4], sign),
            d : parseIso(match[5], sign),
            h : parseIso(match[6], sign),
            m : parseIso(match[7], sign),
            s : parseIso(match[8], sign)
        };
    } else if (duration == null) {// checks for null or undefined
        duration = {};
    } else if (typeof duration === 'object' && ('from' in duration || 'to' in duration)) {
        diffRes = momentsDifference(createLocal(duration.from), createLocal(duration.to));

        duration = {};
        duration.ms = diffRes.milliseconds;
        duration.M = diffRes.months;
    }

    ret = new Duration(duration);

    if (isDuration(input) && hasOwnProp(input, '_locale')) {
        ret._locale = input._locale;
    }

    return ret;
}

createDuration.fn = Duration.prototype;
createDuration.invalid = createInvalid$1;

function parseIso (inp, sign) {
    // We'd normally use ~~inp for this, but unfortunately it also
    // converts floats to ints.
    // inp may be undefined, so careful calling replace on it.
    var res = inp && parseFloat(inp.replace(',', '.'));
    // apply sign while we're at it
    return (isNaN(res) ? 0 : res) * sign;
}

function positiveMomentsDifference(base, other) {
    var res = {milliseconds: 0, months: 0};

    res.months = other.month() - base.month() +
        (other.year() - base.year()) * 12;
    if (base.clone().add(res.months, 'M').isAfter(other)) {
        --res.months;
    }

    res.milliseconds = +other - +(base.clone().add(res.months, 'M'));

    return res;
}

function momentsDifference(base, other) {
    var res;
    if (!(base.isValid() && other.isValid())) {
        return {milliseconds: 0, months: 0};
    }

    other = cloneWithOffset(other, base);
    if (base.isBefore(other)) {
        res = positiveMomentsDifference(base, other);
    } else {
        res = positiveMomentsDifference(other, base);
        res.milliseconds = -res.milliseconds;
        res.months = -res.months;
    }

    return res;
}

// TODO: remove 'name' arg after deprecation is removed
function createAdder(direction, name) {
    return function (val, period) {
        var dur, tmp;
        //invert the arguments, but complain about it
        if (period !== null && !isNaN(+period)) {
            deprecateSimple(name, 'moment().' + name  + '(period, number) is deprecated. Please use moment().' + name + '(number, period). ' +
            'See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info.');
            tmp = val; val = period; period = tmp;
        }

        val = typeof val === 'string' ? +val : val;
        dur = createDuration(val, period);
        addSubtract(this, dur, direction);
        return this;
    };
}

function addSubtract (mom, duration, isAdding, updateOffset) {
    var milliseconds = duration._milliseconds,
        days = absRound(duration._days),
        months = absRound(duration._months);

    if (!mom.isValid()) {
        // No op
        return;
    }

    updateOffset = updateOffset == null ? true : updateOffset;

    if (months) {
        setMonth(mom, get(mom, 'Month') + months * isAdding);
    }
    if (days) {
        set$1(mom, 'Date', get(mom, 'Date') + days * isAdding);
    }
    if (milliseconds) {
        mom._d.setTime(mom._d.valueOf() + milliseconds * isAdding);
    }
    if (updateOffset) {
        hooks.updateOffset(mom, days || months);
    }
}

var add      = createAdder(1, 'add');
var subtract = createAdder(-1, 'subtract');

function getCalendarFormat(myMoment, now) {
    var diff = myMoment.diff(now, 'days', true);
    return diff < -6 ? 'sameElse' :
            diff < -1 ? 'lastWeek' :
            diff < 0 ? 'lastDay' :
            diff < 1 ? 'sameDay' :
            diff < 2 ? 'nextDay' :
            diff < 7 ? 'nextWeek' : 'sameElse';
}

function calendar$1 (time, formats) {
    // We want to compare the start of today, vs this.
    // Getting start-of-today depends on whether we're local/utc/offset or not.
    var now = time || createLocal(),
        sod = cloneWithOffset(now, this).startOf('day'),
        format = hooks.calendarFormat(this, sod) || 'sameElse';

    var output = formats && (isFunction(formats[format]) ? formats[format].call(this, now) : formats[format]);

    return this.format(output || this.localeData().calendar(format, this, createLocal(now)));
}

function clone () {
    return new Moment(this);
}

function isAfter (input, units) {
    var localInput = isMoment(input) ? input : createLocal(input);
    if (!(this.isValid() && localInput.isValid())) {
        return false;
    }
    units = normalizeUnits(!isUndefined(units) ? units : 'millisecond');
    if (units === 'millisecond') {
        return this.valueOf() > localInput.valueOf();
    } else {
        return localInput.valueOf() < this.clone().startOf(units).valueOf();
    }
}

function isBefore (input, units) {
    var localInput = isMoment(input) ? input : createLocal(input);
    if (!(this.isValid() && localInput.isValid())) {
        return false;
    }
    units = normalizeUnits(!isUndefined(units) ? units : 'millisecond');
    if (units === 'millisecond') {
        return this.valueOf() < localInput.valueOf();
    } else {
        return this.clone().endOf(units).valueOf() < localInput.valueOf();
    }
}

function isBetween (from, to, units, inclusivity) {
    inclusivity = inclusivity || '()';
    return (inclusivity[0] === '(' ? this.isAfter(from, units) : !this.isBefore(from, units)) &&
        (inclusivity[1] === ')' ? this.isBefore(to, units) : !this.isAfter(to, units));
}

function isSame (input, units) {
    var localInput = isMoment(input) ? input : createLocal(input),
        inputMs;
    if (!(this.isValid() && localInput.isValid())) {
        return false;
    }
    units = normalizeUnits(units || 'millisecond');
    if (units === 'millisecond') {
        return this.valueOf() === localInput.valueOf();
    } else {
        inputMs = localInput.valueOf();
        return this.clone().startOf(units).valueOf() <= inputMs && inputMs <= this.clone().endOf(units).valueOf();
    }
}

function isSameOrAfter (input, units) {
    return this.isSame(input, units) || this.isAfter(input,units);
}

function isSameOrBefore (input, units) {
    return this.isSame(input, units) || this.isBefore(input,units);
}

function diff (input, units, asFloat) {
    var that,
        zoneDelta,
        delta, output;

    if (!this.isValid()) {
        return NaN;
    }

    that = cloneWithOffset(input, this);

    if (!that.isValid()) {
        return NaN;
    }

    zoneDelta = (that.utcOffset() - this.utcOffset()) * 6e4;

    units = normalizeUnits(units);

    switch (units) {
        case 'year': output = monthDiff(this, that) / 12; break;
        case 'month': output = monthDiff(this, that); break;
        case 'quarter': output = monthDiff(this, that) / 3; break;
        case 'second': output = (this - that) / 1e3; break; // 1000
        case 'minute': output = (this - that) / 6e4; break; // 1000 * 60
        case 'hour': output = (this - that) / 36e5; break; // 1000 * 60 * 60
        case 'day': output = (this - that - zoneDelta) / 864e5; break; // 1000 * 60 * 60 * 24, negate dst
        case 'week': output = (this - that - zoneDelta) / 6048e5; break; // 1000 * 60 * 60 * 24 * 7, negate dst
        default: output = this - that;
    }

    return asFloat ? output : absFloor(output);
}

function monthDiff (a, b) {
    // difference in months
    var wholeMonthDiff = ((b.year() - a.year()) * 12) + (b.month() - a.month()),
        // b is in (anchor - 1 month, anchor + 1 month)
        anchor = a.clone().add(wholeMonthDiff, 'months'),
        anchor2, adjust;

    if (b - anchor < 0) {
        anchor2 = a.clone().add(wholeMonthDiff - 1, 'months');
        // linear across the month
        adjust = (b - anchor) / (anchor - anchor2);
    } else {
        anchor2 = a.clone().add(wholeMonthDiff + 1, 'months');
        // linear across the month
        adjust = (b - anchor) / (anchor2 - anchor);
    }

    //check for negative zero, return zero if negative zero
    return -(wholeMonthDiff + adjust) || 0;
}

hooks.defaultFormat = 'YYYY-MM-DDTHH:mm:ssZ';
hooks.defaultFormatUtc = 'YYYY-MM-DDTHH:mm:ss[Z]';

function toString () {
    return this.clone().locale('en').format('ddd MMM DD YYYY HH:mm:ss [GMT]ZZ');
}

function toISOString() {
    if (!this.isValid()) {
        return null;
    }
    var m = this.clone().utc();
    if (m.year() < 0 || m.year() > 9999) {
        return formatMoment(m, 'YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]');
    }
    if (isFunction(Date.prototype.toISOString)) {
        // native implementation is ~50x faster, use it when we can
        return this.toDate().toISOString();
    }
    return formatMoment(m, 'YYYY-MM-DD[T]HH:mm:ss.SSS[Z]');
}

/**
 * Return a human readable representation of a moment that can
 * also be evaluated to get a new moment which is the same
 *
 * @link https://nodejs.org/dist/latest/docs/api/util.html#util_custom_inspect_function_on_objects
 */
function inspect () {
    if (!this.isValid()) {
        return 'moment.invalid(/* ' + this._i + ' */)';
    }
    var func = 'moment';
    var zone = '';
    if (!this.isLocal()) {
        func = this.utcOffset() === 0 ? 'moment.utc' : 'moment.parseZone';
        zone = 'Z';
    }
    var prefix = '[' + func + '("]';
    var year = (0 <= this.year() && this.year() <= 9999) ? 'YYYY' : 'YYYYYY';
    var datetime = '-MM-DD[T]HH:mm:ss.SSS';
    var suffix = zone + '[")]';

    return this.format(prefix + year + datetime + suffix);
}

function format (inputString) {
    if (!inputString) {
        inputString = this.isUtc() ? hooks.defaultFormatUtc : hooks.defaultFormat;
    }
    var output = formatMoment(this, inputString);
    return this.localeData().postformat(output);
}

function from (time, withoutSuffix) {
    if (this.isValid() &&
            ((isMoment(time) && time.isValid()) ||
             createLocal(time).isValid())) {
        return createDuration({to: this, from: time}).locale(this.locale()).humanize(!withoutSuffix);
    } else {
        return this.localeData().invalidDate();
    }
}

function fromNow (withoutSuffix) {
    return this.from(createLocal(), withoutSuffix);
}

function to (time, withoutSuffix) {
    if (this.isValid() &&
            ((isMoment(time) && time.isValid()) ||
             createLocal(time).isValid())) {
        return createDuration({from: this, to: time}).locale(this.locale()).humanize(!withoutSuffix);
    } else {
        return this.localeData().invalidDate();
    }
}

function toNow (withoutSuffix) {
    return this.to(createLocal(), withoutSuffix);
}

// If passed a locale key, it will set the locale for this
// instance.  Otherwise, it will return the locale configuration
// variables for this instance.
function locale (key) {
    var newLocaleData;

    if (key === undefined) {
        return this._locale._abbr;
    } else {
        newLocaleData = getLocale(key);
        if (newLocaleData != null) {
            this._locale = newLocaleData;
        }
        return this;
    }
}

var lang = deprecate(
    'moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.',
    function (key) {
        if (key === undefined) {
            return this.localeData();
        } else {
            return this.locale(key);
        }
    }
);

function localeData () {
    return this._locale;
}

function startOf (units) {
    units = normalizeUnits(units);
    // the following switch intentionally omits break keywords
    // to utilize falling through the cases.
    switch (units) {
        case 'year':
            this.month(0);
            /* falls through */
        case 'quarter':
        case 'month':
            this.date(1);
            /* falls through */
        case 'week':
        case 'isoWeek':
        case 'day':
        case 'date':
            this.hours(0);
            /* falls through */
        case 'hour':
            this.minutes(0);
            /* falls through */
        case 'minute':
            this.seconds(0);
            /* falls through */
        case 'second':
            this.milliseconds(0);
    }

    // weeks are a special case
    if (units === 'week') {
        this.weekday(0);
    }
    if (units === 'isoWeek') {
        this.isoWeekday(1);
    }

    // quarters are also special
    if (units === 'quarter') {
        this.month(Math.floor(this.month() / 3) * 3);
    }

    return this;
}

function endOf (units) {
    units = normalizeUnits(units);
    if (units === undefined || units === 'millisecond') {
        return this;
    }

    // 'date' is an alias for 'day', so it should be considered as such.
    if (units === 'date') {
        units = 'day';
    }

    return this.startOf(units).add(1, (units === 'isoWeek' ? 'week' : units)).subtract(1, 'ms');
}

function valueOf () {
    return this._d.valueOf() - ((this._offset || 0) * 60000);
}

function unix () {
    return Math.floor(this.valueOf() / 1000);
}

function toDate () {
    return new Date(this.valueOf());
}

function toArray () {
    var m = this;
    return [m.year(), m.month(), m.date(), m.hour(), m.minute(), m.second(), m.millisecond()];
}

function toObject () {
    var m = this;
    return {
        years: m.year(),
        months: m.month(),
        date: m.date(),
        hours: m.hours(),
        minutes: m.minutes(),
        seconds: m.seconds(),
        milliseconds: m.milliseconds()
    };
}

function toJSON () {
    // new Date(NaN).toJSON() === null
    return this.isValid() ? this.toISOString() : null;
}

function isValid$2 () {
    return isValid(this);
}

function parsingFlags () {
    return extend({}, getParsingFlags(this));
}

function invalidAt () {
    return getParsingFlags(this).overflow;
}

function creationData() {
    return {
        input: this._i,
        format: this._f,
        locale: this._locale,
        isUTC: this._isUTC,
        strict: this._strict
    };
}

// FORMATTING

addFormatToken(0, ['gg', 2], 0, function () {
    return this.weekYear() % 100;
});

addFormatToken(0, ['GG', 2], 0, function () {
    return this.isoWeekYear() % 100;
});

function addWeekYearFormatToken (token, getter) {
    addFormatToken(0, [token, token.length], 0, getter);
}

addWeekYearFormatToken('gggg',     'weekYear');
addWeekYearFormatToken('ggggg',    'weekYear');
addWeekYearFormatToken('GGGG',  'isoWeekYear');
addWeekYearFormatToken('GGGGG', 'isoWeekYear');

// ALIASES

addUnitAlias('weekYear', 'gg');
addUnitAlias('isoWeekYear', 'GG');

// PRIORITY

addUnitPriority('weekYear', 1);
addUnitPriority('isoWeekYear', 1);


// PARSING

addRegexToken('G',      matchSigned);
addRegexToken('g',      matchSigned);
addRegexToken('GG',     match1to2, match2);
addRegexToken('gg',     match1to2, match2);
addRegexToken('GGGG',   match1to4, match4);
addRegexToken('gggg',   match1to4, match4);
addRegexToken('GGGGG',  match1to6, match6);
addRegexToken('ggggg',  match1to6, match6);

addWeekParseToken(['gggg', 'ggggg', 'GGGG', 'GGGGG'], function (input, week, config, token) {
    week[token.substr(0, 2)] = toInt(input);
});

addWeekParseToken(['gg', 'GG'], function (input, week, config, token) {
    week[token] = hooks.parseTwoDigitYear(input);
});

// MOMENTS

function getSetWeekYear (input) {
    return getSetWeekYearHelper.call(this,
            input,
            this.week(),
            this.weekday(),
            this.localeData()._week.dow,
            this.localeData()._week.doy);
}

function getSetISOWeekYear (input) {
    return getSetWeekYearHelper.call(this,
            input, this.isoWeek(), this.isoWeekday(), 1, 4);
}

function getISOWeeksInYear () {
    return weeksInYear(this.year(), 1, 4);
}

function getWeeksInYear () {
    var weekInfo = this.localeData()._week;
    return weeksInYear(this.year(), weekInfo.dow, weekInfo.doy);
}

function getSetWeekYearHelper(input, week, weekday, dow, doy) {
    var weeksTarget;
    if (input == null) {
        return weekOfYear(this, dow, doy).year;
    } else {
        weeksTarget = weeksInYear(input, dow, doy);
        if (week > weeksTarget) {
            week = weeksTarget;
        }
        return setWeekAll.call(this, input, week, weekday, dow, doy);
    }
}

function setWeekAll(weekYear, week, weekday, dow, doy) {
    var dayOfYearData = dayOfYearFromWeeks(weekYear, week, weekday, dow, doy),
        date = createUTCDate(dayOfYearData.year, 0, dayOfYearData.dayOfYear);

    this.year(date.getUTCFullYear());
    this.month(date.getUTCMonth());
    this.date(date.getUTCDate());
    return this;
}

// FORMATTING

addFormatToken('Q', 0, 'Qo', 'quarter');

// ALIASES

addUnitAlias('quarter', 'Q');

// PRIORITY

addUnitPriority('quarter', 7);

// PARSING

addRegexToken('Q', match1);
addParseToken('Q', function (input, array) {
    array[MONTH] = (toInt(input) - 1) * 3;
});

// MOMENTS

function getSetQuarter (input) {
    return input == null ? Math.ceil((this.month() + 1) / 3) : this.month((input - 1) * 3 + this.month() % 3);
}

// FORMATTING

addFormatToken('D', ['DD', 2], 'Do', 'date');

// ALIASES

addUnitAlias('date', 'D');

// PRIOROITY
addUnitPriority('date', 9);

// PARSING

addRegexToken('D',  match1to2);
addRegexToken('DD', match1to2, match2);
addRegexToken('Do', function (isStrict, locale) {
    // TODO: Remove "ordinalParse" fallback in next major release.
    return isStrict ?
      (locale._dayOfMonthOrdinalParse || locale._ordinalParse) :
      locale._dayOfMonthOrdinalParseLenient;
});

addParseToken(['D', 'DD'], DATE);
addParseToken('Do', function (input, array) {
    array[DATE] = toInt(input.match(match1to2)[0], 10);
});

// MOMENTS

var getSetDayOfMonth = makeGetSet('Date', true);

// FORMATTING

addFormatToken('DDD', ['DDDD', 3], 'DDDo', 'dayOfYear');

// ALIASES

addUnitAlias('dayOfYear', 'DDD');

// PRIORITY
addUnitPriority('dayOfYear', 4);

// PARSING

addRegexToken('DDD',  match1to3);
addRegexToken('DDDD', match3);
addParseToken(['DDD', 'DDDD'], function (input, array, config) {
    config._dayOfYear = toInt(input);
});

// HELPERS

// MOMENTS

function getSetDayOfYear (input) {
    var dayOfYear = Math.round((this.clone().startOf('day') - this.clone().startOf('year')) / 864e5) + 1;
    return input == null ? dayOfYear : this.add((input - dayOfYear), 'd');
}

// FORMATTING

addFormatToken('m', ['mm', 2], 0, 'minute');

// ALIASES

addUnitAlias('minute', 'm');

// PRIORITY

addUnitPriority('minute', 14);

// PARSING

addRegexToken('m',  match1to2);
addRegexToken('mm', match1to2, match2);
addParseToken(['m', 'mm'], MINUTE);

// MOMENTS

var getSetMinute = makeGetSet('Minutes', false);

// FORMATTING

addFormatToken('s', ['ss', 2], 0, 'second');

// ALIASES

addUnitAlias('second', 's');

// PRIORITY

addUnitPriority('second', 15);

// PARSING

addRegexToken('s',  match1to2);
addRegexToken('ss', match1to2, match2);
addParseToken(['s', 'ss'], SECOND);

// MOMENTS

var getSetSecond = makeGetSet('Seconds', false);

// FORMATTING

addFormatToken('S', 0, 0, function () {
    return ~~(this.millisecond() / 100);
});

addFormatToken(0, ['SS', 2], 0, function () {
    return ~~(this.millisecond() / 10);
});

addFormatToken(0, ['SSS', 3], 0, 'millisecond');
addFormatToken(0, ['SSSS', 4], 0, function () {
    return this.millisecond() * 10;
});
addFormatToken(0, ['SSSSS', 5], 0, function () {
    return this.millisecond() * 100;
});
addFormatToken(0, ['SSSSSS', 6], 0, function () {
    return this.millisecond() * 1000;
});
addFormatToken(0, ['SSSSSSS', 7], 0, function () {
    return this.millisecond() * 10000;
});
addFormatToken(0, ['SSSSSSSS', 8], 0, function () {
    return this.millisecond() * 100000;
});
addFormatToken(0, ['SSSSSSSSS', 9], 0, function () {
    return this.millisecond() * 1000000;
});


// ALIASES

addUnitAlias('millisecond', 'ms');

// PRIORITY

addUnitPriority('millisecond', 16);

// PARSING

addRegexToken('S',    match1to3, match1);
addRegexToken('SS',   match1to3, match2);
addRegexToken('SSS',  match1to3, match3);

var token;
for (token = 'SSSS'; token.length <= 9; token += 'S') {
    addRegexToken(token, matchUnsigned);
}

function parseMs(input, array) {
    array[MILLISECOND] = toInt(('0.' + input) * 1000);
}

for (token = 'S'; token.length <= 9; token += 'S') {
    addParseToken(token, parseMs);
}
// MOMENTS

var getSetMillisecond = makeGetSet('Milliseconds', false);

// FORMATTING

addFormatToken('z',  0, 0, 'zoneAbbr');
addFormatToken('zz', 0, 0, 'zoneName');

// MOMENTS

function getZoneAbbr () {
    return this._isUTC ? 'UTC' : '';
}

function getZoneName () {
    return this._isUTC ? 'Coordinated Universal Time' : '';
}

var proto = Moment.prototype;

proto.add               = add;
proto.calendar          = calendar$1;
proto.clone             = clone;
proto.diff              = diff;
proto.endOf             = endOf;
proto.format            = format;
proto.from              = from;
proto.fromNow           = fromNow;
proto.to                = to;
proto.toNow             = toNow;
proto.get               = stringGet;
proto.invalidAt         = invalidAt;
proto.isAfter           = isAfter;
proto.isBefore          = isBefore;
proto.isBetween         = isBetween;
proto.isSame            = isSame;
proto.isSameOrAfter     = isSameOrAfter;
proto.isSameOrBefore    = isSameOrBefore;
proto.isValid           = isValid$2;
proto.lang              = lang;
proto.locale            = locale;
proto.localeData        = localeData;
proto.max               = prototypeMax;
proto.min               = prototypeMin;
proto.parsingFlags      = parsingFlags;
proto.set               = stringSet;
proto.startOf           = startOf;
proto.subtract          = subtract;
proto.toArray           = toArray;
proto.toObject          = toObject;
proto.toDate            = toDate;
proto.toISOString       = toISOString;
proto.inspect           = inspect;
proto.toJSON            = toJSON;
proto.toString          = toString;
proto.unix              = unix;
proto.valueOf           = valueOf;
proto.creationData      = creationData;

// Year
proto.year       = getSetYear;
proto.isLeapYear = getIsLeapYear;

// Week Year
proto.weekYear    = getSetWeekYear;
proto.isoWeekYear = getSetISOWeekYear;

// Quarter
proto.quarter = proto.quarters = getSetQuarter;

// Month
proto.month       = getSetMonth;
proto.daysInMonth = getDaysInMonth;

// Week
proto.week           = proto.weeks        = getSetWeek;
proto.isoWeek        = proto.isoWeeks     = getSetISOWeek;
proto.weeksInYear    = getWeeksInYear;
proto.isoWeeksInYear = getISOWeeksInYear;

// Day
proto.date       = getSetDayOfMonth;
proto.day        = proto.days             = getSetDayOfWeek;
proto.weekday    = getSetLocaleDayOfWeek;
proto.isoWeekday = getSetISODayOfWeek;
proto.dayOfYear  = getSetDayOfYear;

// Hour
proto.hour = proto.hours = getSetHour;

// Minute
proto.minute = proto.minutes = getSetMinute;

// Second
proto.second = proto.seconds = getSetSecond;

// Millisecond
proto.millisecond = proto.milliseconds = getSetMillisecond;

// Offset
proto.utcOffset            = getSetOffset;
proto.utc                  = setOffsetToUTC;
proto.local                = setOffsetToLocal;
proto.parseZone            = setOffsetToParsedOffset;
proto.hasAlignedHourOffset = hasAlignedHourOffset;
proto.isDST                = isDaylightSavingTime;
proto.isLocal              = isLocal;
proto.isUtcOffset          = isUtcOffset;
proto.isUtc                = isUtc;
proto.isUTC                = isUtc;

// Timezone
proto.zoneAbbr = getZoneAbbr;
proto.zoneName = getZoneName;

// Deprecations
proto.dates  = deprecate('dates accessor is deprecated. Use date instead.', getSetDayOfMonth);
proto.months = deprecate('months accessor is deprecated. Use month instead', getSetMonth);
proto.years  = deprecate('years accessor is deprecated. Use year instead', getSetYear);
proto.zone   = deprecate('moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/', getSetZone);
proto.isDSTShifted = deprecate('isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information', isDaylightSavingTimeShifted);

function createUnix (input) {
    return createLocal(input * 1000);
}

function createInZone () {
    return createLocal.apply(null, arguments).parseZone();
}

function preParsePostFormat (string) {
    return string;
}

var proto$1 = Locale.prototype;

proto$1.calendar        = calendar;
proto$1.longDateFormat  = longDateFormat;
proto$1.invalidDate     = invalidDate;
proto$1.ordinal         = ordinal;
proto$1.preparse        = preParsePostFormat;
proto$1.postformat      = preParsePostFormat;
proto$1.relativeTime    = relativeTime;
proto$1.pastFuture      = pastFuture;
proto$1.set             = set;

// Month
proto$1.months            =        localeMonths;
proto$1.monthsShort       =        localeMonthsShort;
proto$1.monthsParse       =        localeMonthsParse;
proto$1.monthsRegex       = monthsRegex;
proto$1.monthsShortRegex  = monthsShortRegex;

// Week
proto$1.week = localeWeek;
proto$1.firstDayOfYear = localeFirstDayOfYear;
proto$1.firstDayOfWeek = localeFirstDayOfWeek;

// Day of Week
proto$1.weekdays       =        localeWeekdays;
proto$1.weekdaysMin    =        localeWeekdaysMin;
proto$1.weekdaysShort  =        localeWeekdaysShort;
proto$1.weekdaysParse  =        localeWeekdaysParse;

proto$1.weekdaysRegex       =        weekdaysRegex;
proto$1.weekdaysShortRegex  =        weekdaysShortRegex;
proto$1.weekdaysMinRegex    =        weekdaysMinRegex;

// Hours
proto$1.isPM = localeIsPM;
proto$1.meridiem = localeMeridiem;

function get$1 (format, index, field, setter) {
    var locale = getLocale();
    var utc = createUTC().set(setter, index);
    return locale[field](utc, format);
}

function listMonthsImpl (format, index, field) {
    if (isNumber(format)) {
        index = format;
        format = undefined;
    }

    format = format || '';

    if (index != null) {
        return get$1(format, index, field, 'month');
    }

    var i;
    var out = [];
    for (i = 0; i < 12; i++) {
        out[i] = get$1(format, i, field, 'month');
    }
    return out;
}

// ()
// (5)
// (fmt, 5)
// (fmt)
// (true)
// (true, 5)
// (true, fmt, 5)
// (true, fmt)
function listWeekdaysImpl (localeSorted, format, index, field) {
    if (typeof localeSorted === 'boolean') {
        if (isNumber(format)) {
            index = format;
            format = undefined;
        }

        format = format || '';
    } else {
        format = localeSorted;
        index = format;
        localeSorted = false;

        if (isNumber(format)) {
            index = format;
            format = undefined;
        }

        format = format || '';
    }

    var locale = getLocale(),
        shift = localeSorted ? locale._week.dow : 0;

    if (index != null) {
        return get$1(format, (index + shift) % 7, field, 'day');
    }

    var i;
    var out = [];
    for (i = 0; i < 7; i++) {
        out[i] = get$1(format, (i + shift) % 7, field, 'day');
    }
    return out;
}

function listMonths (format, index) {
    return listMonthsImpl(format, index, 'months');
}

function listMonthsShort (format, index) {
    return listMonthsImpl(format, index, 'monthsShort');
}

function listWeekdays (localeSorted, format, index) {
    return listWeekdaysImpl(localeSorted, format, index, 'weekdays');
}

function listWeekdaysShort (localeSorted, format, index) {
    return listWeekdaysImpl(localeSorted, format, index, 'weekdaysShort');
}

function listWeekdaysMin (localeSorted, format, index) {
    return listWeekdaysImpl(localeSorted, format, index, 'weekdaysMin');
}

getSetGlobalLocale('en', {
    dayOfMonthOrdinalParse: /\d{1,2}(th|st|nd|rd)/,
    ordinal : function (number) {
        var b = number % 10,
            output = (toInt(number % 100 / 10) === 1) ? 'th' :
            (b === 1) ? 'st' :
            (b === 2) ? 'nd' :
            (b === 3) ? 'rd' : 'th';
        return number + output;
    }
});

// Side effect imports
hooks.lang = deprecate('moment.lang is deprecated. Use moment.locale instead.', getSetGlobalLocale);
hooks.langData = deprecate('moment.langData is deprecated. Use moment.localeData instead.', getLocale);

var mathAbs = Math.abs;

function abs () {
    var data           = this._data;

    this._milliseconds = mathAbs(this._milliseconds);
    this._days         = mathAbs(this._days);
    this._months       = mathAbs(this._months);

    data.milliseconds  = mathAbs(data.milliseconds);
    data.seconds       = mathAbs(data.seconds);
    data.minutes       = mathAbs(data.minutes);
    data.hours         = mathAbs(data.hours);
    data.months        = mathAbs(data.months);
    data.years         = mathAbs(data.years);

    return this;
}

function addSubtract$1 (duration, input, value, direction) {
    var other = createDuration(input, value);

    duration._milliseconds += direction * other._milliseconds;
    duration._days         += direction * other._days;
    duration._months       += direction * other._months;

    return duration._bubble();
}

// supports only 2.0-style add(1, 's') or add(duration)
function add$1 (input, value) {
    return addSubtract$1(this, input, value, 1);
}

// supports only 2.0-style subtract(1, 's') or subtract(duration)
function subtract$1 (input, value) {
    return addSubtract$1(this, input, value, -1);
}

function absCeil (number) {
    if (number < 0) {
        return Math.floor(number);
    } else {
        return Math.ceil(number);
    }
}

function bubble () {
    var milliseconds = this._milliseconds;
    var days         = this._days;
    var months       = this._months;
    var data         = this._data;
    var seconds, minutes, hours, years, monthsFromDays;

    // if we have a mix of positive and negative values, bubble down first
    // check: https://github.com/moment/moment/issues/2166
    if (!((milliseconds >= 0 && days >= 0 && months >= 0) ||
            (milliseconds <= 0 && days <= 0 && months <= 0))) {
        milliseconds += absCeil(monthsToDays(months) + days) * 864e5;
        days = 0;
        months = 0;
    }

    // The following code bubbles up values, see the tests for
    // examples of what that means.
    data.milliseconds = milliseconds % 1000;

    seconds           = absFloor(milliseconds / 1000);
    data.seconds      = seconds % 60;

    minutes           = absFloor(seconds / 60);
    data.minutes      = minutes % 60;

    hours             = absFloor(minutes / 60);
    data.hours        = hours % 24;

    days += absFloor(hours / 24);

    // convert days to months
    monthsFromDays = absFloor(daysToMonths(days));
    months += monthsFromDays;
    days -= absCeil(monthsToDays(monthsFromDays));

    // 12 months -> 1 year
    years = absFloor(months / 12);
    months %= 12;

    data.days   = days;
    data.months = months;
    data.years  = years;

    return this;
}

function daysToMonths (days) {
    // 400 years have 146097 days (taking into account leap year rules)
    // 400 years have 12 months === 4800
    return days * 4800 / 146097;
}

function monthsToDays (months) {
    // the reverse of daysToMonths
    return months * 146097 / 4800;
}

function as (units) {
    if (!this.isValid()) {
        return NaN;
    }
    var days;
    var months;
    var milliseconds = this._milliseconds;

    units = normalizeUnits(units);

    if (units === 'month' || units === 'year') {
        days   = this._days   + milliseconds / 864e5;
        months = this._months + daysToMonths(days);
        return units === 'month' ? months : months / 12;
    } else {
        // handle milliseconds separately because of floating point math errors (issue #1867)
        days = this._days + Math.round(monthsToDays(this._months));
        switch (units) {
            case 'week'   : return days / 7     + milliseconds / 6048e5;
            case 'day'    : return days         + milliseconds / 864e5;
            case 'hour'   : return days * 24    + milliseconds / 36e5;
            case 'minute' : return days * 1440  + milliseconds / 6e4;
            case 'second' : return days * 86400 + milliseconds / 1000;
            // Math.floor prevents floating point math errors here
            case 'millisecond': return Math.floor(days * 864e5) + milliseconds;
            default: throw new Error('Unknown unit ' + units);
        }
    }
}

// TODO: Use this.as('ms')?
function valueOf$1 () {
    if (!this.isValid()) {
        return NaN;
    }
    return (
        this._milliseconds +
        this._days * 864e5 +
        (this._months % 12) * 2592e6 +
        toInt(this._months / 12) * 31536e6
    );
}

function makeAs (alias) {
    return function () {
        return this.as(alias);
    };
}

var asMilliseconds = makeAs('ms');
var asSeconds      = makeAs('s');
var asMinutes      = makeAs('m');
var asHours        = makeAs('h');
var asDays         = makeAs('d');
var asWeeks        = makeAs('w');
var asMonths       = makeAs('M');
var asYears        = makeAs('y');

function clone$1 () {
    return createDuration(this);
}

function get$2 (units) {
    units = normalizeUnits(units);
    return this.isValid() ? this[units + 's']() : NaN;
}

function makeGetter(name) {
    return function () {
        return this.isValid() ? this._data[name] : NaN;
    };
}

var milliseconds = makeGetter('milliseconds');
var seconds      = makeGetter('seconds');
var minutes      = makeGetter('minutes');
var hours        = makeGetter('hours');
var days         = makeGetter('days');
var months       = makeGetter('months');
var years        = makeGetter('years');

function weeks () {
    return absFloor(this.days() / 7);
}

var round = Math.round;
var thresholds = {
    ss: 44,         // a few seconds to seconds
    s : 45,         // seconds to minute
    m : 45,         // minutes to hour
    h : 22,         // hours to day
    d : 26,         // days to month
    M : 11          // months to year
};

// helper function for moment.fn.from, moment.fn.fromNow, and moment.duration.fn.humanize
function substituteTimeAgo(string, number, withoutSuffix, isFuture, locale) {
    return locale.relativeTime(number || 1, !!withoutSuffix, string, isFuture);
}

function relativeTime$1 (posNegDuration, withoutSuffix, locale) {
    var duration = createDuration(posNegDuration).abs();
    var seconds  = round(duration.as('s'));
    var minutes  = round(duration.as('m'));
    var hours    = round(duration.as('h'));
    var days     = round(duration.as('d'));
    var months   = round(duration.as('M'));
    var years    = round(duration.as('y'));

    var a = seconds <= thresholds.ss && ['s', seconds]  ||
            seconds < thresholds.s   && ['ss', seconds] ||
            minutes <= 1             && ['m']           ||
            minutes < thresholds.m   && ['mm', minutes] ||
            hours   <= 1             && ['h']           ||
            hours   < thresholds.h   && ['hh', hours]   ||
            days    <= 1             && ['d']           ||
            days    < thresholds.d   && ['dd', days]    ||
            months  <= 1             && ['M']           ||
            months  < thresholds.M   && ['MM', months]  ||
            years   <= 1             && ['y']           || ['yy', years];

    a[2] = withoutSuffix;
    a[3] = +posNegDuration > 0;
    a[4] = locale;
    return substituteTimeAgo.apply(null, a);
}

// This function allows you to set the rounding function for relative time strings
function getSetRelativeTimeRounding (roundingFunction) {
    if (roundingFunction === undefined) {
        return round;
    }
    if (typeof(roundingFunction) === 'function') {
        round = roundingFunction;
        return true;
    }
    return false;
}

// This function allows you to set a threshold for relative time strings
function getSetRelativeTimeThreshold (threshold, limit) {
    if (thresholds[threshold] === undefined) {
        return false;
    }
    if (limit === undefined) {
        return thresholds[threshold];
    }
    thresholds[threshold] = limit;
    if (threshold === 's') {
        thresholds.ss = limit - 1;
    }
    return true;
}

function humanize (withSuffix) {
    if (!this.isValid()) {
        return this.localeData().invalidDate();
    }

    var locale = this.localeData();
    var output = relativeTime$1(this, !withSuffix, locale);

    if (withSuffix) {
        output = locale.pastFuture(+this, output);
    }

    return locale.postformat(output);
}

var abs$1 = Math.abs;

function sign(x) {
    return ((x > 0) - (x < 0)) || +x;
}

function toISOString$1() {
    // for ISO strings we do not use the normal bubbling rules:
    //  * milliseconds bubble up until they become hours
    //  * days do not bubble at all
    //  * months bubble up until they become years
    // This is because there is no context-free conversion between hours and days
    // (think of clock changes)
    // and also not between days and months (28-31 days per month)
    if (!this.isValid()) {
        return this.localeData().invalidDate();
    }

    var seconds = abs$1(this._milliseconds) / 1000;
    var days         = abs$1(this._days);
    var months       = abs$1(this._months);
    var minutes, hours, years;

    // 3600 seconds -> 60 minutes -> 1 hour
    minutes           = absFloor(seconds / 60);
    hours             = absFloor(minutes / 60);
    seconds %= 60;
    minutes %= 60;

    // 12 months -> 1 year
    years  = absFloor(months / 12);
    months %= 12;


    // inspired by https://github.com/dordille/moment-isoduration/blob/master/moment.isoduration.js
    var Y = years;
    var M = months;
    var D = days;
    var h = hours;
    var m = minutes;
    var s = seconds ? seconds.toFixed(3).replace(/\.?0+$/, '') : '';
    var total = this.asSeconds();

    if (!total) {
        // this is the same as C#'s (Noda) and python (isodate)...
        // but not other JS (goog.date)
        return 'P0D';
    }

    var totalSign = total < 0 ? '-' : '';
    var ymSign = sign(this._months) !== sign(total) ? '-' : '';
    var daysSign = sign(this._days) !== sign(total) ? '-' : '';
    var hmsSign = sign(this._milliseconds) !== sign(total) ? '-' : '';

    return totalSign + 'P' +
        (Y ? ymSign + Y + 'Y' : '') +
        (M ? ymSign + M + 'M' : '') +
        (D ? daysSign + D + 'D' : '') +
        ((h || m || s) ? 'T' : '') +
        (h ? hmsSign + h + 'H' : '') +
        (m ? hmsSign + m + 'M' : '') +
        (s ? hmsSign + s + 'S' : '');
}

var proto$2 = Duration.prototype;

proto$2.isValid        = isValid$1;
proto$2.abs            = abs;
proto$2.add            = add$1;
proto$2.subtract       = subtract$1;
proto$2.as             = as;
proto$2.asMilliseconds = asMilliseconds;
proto$2.asSeconds      = asSeconds;
proto$2.asMinutes      = asMinutes;
proto$2.asHours        = asHours;
proto$2.asDays         = asDays;
proto$2.asWeeks        = asWeeks;
proto$2.asMonths       = asMonths;
proto$2.asYears        = asYears;
proto$2.valueOf        = valueOf$1;
proto$2._bubble        = bubble;
proto$2.clone          = clone$1;
proto$2.get            = get$2;
proto$2.milliseconds   = milliseconds;
proto$2.seconds        = seconds;
proto$2.minutes        = minutes;
proto$2.hours          = hours;
proto$2.days           = days;
proto$2.weeks          = weeks;
proto$2.months         = months;
proto$2.years          = years;
proto$2.humanize       = humanize;
proto$2.toISOString    = toISOString$1;
proto$2.toString       = toISOString$1;
proto$2.toJSON         = toISOString$1;
proto$2.locale         = locale;
proto$2.localeData     = localeData;

// Deprecations
proto$2.toIsoString = deprecate('toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)', toISOString$1);
proto$2.lang = lang;

// Side effect imports

// FORMATTING

addFormatToken('X', 0, 0, 'unix');
addFormatToken('x', 0, 0, 'valueOf');

// PARSING

addRegexToken('x', matchSigned);
addRegexToken('X', matchTimestamp);
addParseToken('X', function (input, array, config) {
    config._d = new Date(parseFloat(input, 10) * 1000);
});
addParseToken('x', function (input, array, config) {
    config._d = new Date(toInt(input));
});

// Side effect imports


hooks.version = '2.19.1';

setHookCallback(createLocal);

hooks.fn                    = proto;
hooks.min                   = min;
hooks.max                   = max;
hooks.now                   = now;
hooks.utc                   = createUTC;
hooks.unix                  = createUnix;
hooks.months                = listMonths;
hooks.isDate                = isDate;
hooks.locale                = getSetGlobalLocale;
hooks.invalid               = createInvalid;
hooks.duration              = createDuration;
hooks.isMoment              = isMoment;
hooks.weekdays              = listWeekdays;
hooks.parseZone             = createInZone;
hooks.localeData            = getLocale;
hooks.isDuration            = isDuration;
hooks.monthsShort           = listMonthsShort;
hooks.weekdaysMin           = listWeekdaysMin;
hooks.defineLocale          = defineLocale;
hooks.updateLocale          = updateLocale;
hooks.locales               = listLocales;
hooks.weekdaysShort         = listWeekdaysShort;
hooks.normalizeUnits        = normalizeUnits;
hooks.relativeTimeRounding  = getSetRelativeTimeRounding;
hooks.relativeTimeThreshold = getSetRelativeTimeThreshold;
hooks.calendarFormat        = getCalendarFormat;
hooks.prototype             = proto;

return hooks;

})));

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(92)(module)))

/***/ }),
/* 3 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file defaultlayout.js
 * @brief Default layout with one Bootstrap panel
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-04-22
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Marionette = __webpack_require__(1);

let DefaultLayout = Marionette.View.extend({
    template: __webpack_require__(336),
    attributes: {
        style: "height: 100%;"
    },

    regions: {
        'title': ".panel-title",
        'content': ".panel-body",
        'content-bottom': ".panel-body-bottom",
        'bottom': ".panel-bottom"
    },

    childViewEvents: {
        'select:tab': function (region, child) {
            this.triggerMethod('select:tab', region, child);
        }
    },

    onBeforeDestroy: function () {
        // destroy any body popovers (could be done at another level of layout, or using a child event)
        $('body div.popover').remove();
    },

    onResize: function() {
        let view = this.getChildView('title');
        if (view && view.onResize) {
            view.onResize();
        }

        view = this.getChildView('content');
        if (view && view.onResize) {
            view.onResize();
        }

        view = this.getChildView('content-bottom');
        if (view && view.onResize) {
            view.onResize();
        }

        view = this.getChildView('bottom');
        if (view && view.onResize) {
            view.onResize();
        }
    }
});

module.exports = DefaultLayout;


/***/ }),
/* 4 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {/**
 * @file titleview.js
 * @brief Default layout title view for 'defaultlayout'
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-04-22
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Marionette = __webpack_require__(1);

let TitleView = Marionette.View.extend({
    tagName: "span",
    template: _.template('<span class="text-selection-none" name="title"></span><span class="heading text-selection-all" name="object"></span><span class="fa fa-lg fa-level-up btn" name="up" style="margin-left: 0px;"></span>'),

    ui: {
        glyphicon: null,
        title: 'span[name=title]',
        object: 'span[name=object]',
        up: 'span[name=up]'
    },

    events: {
        'click @ui.up': 'onUp'
    },

    initialize: function(options) {
        options || (options = {glyphicon: null, title: "", object: null});

        this.listenTo(this.model, 'change', this.render, this);

        this.parentRoute = null;

        TitleView.__super__.initialize.apply(this);
    },

    updateParentRoute: function() {
        if (this.model) {
            if (this.model.parentUrl) {
                this.parentRoute = this.model.parentUrl().replace(window.application.BASE_URL, "app/");
            } else {
                let modelUrl = _.isFunction(this.model.url) ? this.model.url() : this.model.url;
                let parentRoute = modelUrl.replace(window.application.BASE_URL, "app/").split('/').slice(0, -2).join('/') + '/';

                for (let i = 0; i < Backbone.history.handlers.length; ++i) {
                    if (String(Backbone.history.handlers[i].route) === String(/^app\/([^?]*?)(?:\?([\s\S]*))?$/)) {
                        continue;
                    }

                    if (parentRoute.match(Backbone.history.handlers[i].route) != null) {
                        this.parentRoute = parentRoute;
                        break;
                    }
                }
            }
        }
    },

    onRender: function() {
        this.ui.title.html(this.getOption('title'));

        this.updateParentRoute();

        if (!this.parentRoute) {
            this.ui.up.css("display", "none");
        }

        if (this.getOption('glyphicon')) {
            let glyphicon = this.getOption('glyphicon');

            if (glyphicon.startsWith('glyphicon-')) {
                glyphicon = 'glyphicon ' + glyphicon;
            } else if (glyphicon.startsWith('fa-')) {
                glyphicon = 'fa ' + glyphicon;
            }

            this.ui.title.prepend('<span class="' + glyphicon + '"></span>&nbsp;');
        }

        if (this.model && this.model.has('name')) {
            if (!this.ui.object.is(":visible")) {
                this.ui.object.show();
            }

            // with or without extra code, or name or finally label
            if (this.model.has('name') && this.model.has('code') && this.model.get('code') !== "") {
                this.ui.object.html(this.model.get('name') + ' (' + this.model.get('code') + ')');
            } else if (this.model.has('name')) {
                this.ui.object.html(this.model.get('name') || "...");
            } else if (this.model.has('label')) {
                this.ui.object.html(this.model.get('label') || "...");
            }
        } else if (this.getOption('object')) {
            if (!this.ui.object.is(":visible")) {
                this.ui.object.show();
            }
            this.ui.object.html(this.getOption('object'));
        } else {
            this.ui.object.hide();
        }
    },

    onUp: function () {
        if (this.parentRoute) {
            Backbone.history.navigate(this.parentRoute, {trigger: true});
        }
    }
});

module.exports = TitleView;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 5 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {/**
 * @file dialog.js
 * @brief Dialog helper view.
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-10-21
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Marionette = __webpack_require__(1);

let View = Marionette.View.extend({
    tagName: "div",
    attributes: {
        'id': 'dlg_default',
        'class': 'modal',
        'tabindex': -1
    },

    ui: {
        cancel: "button.cancel",
        apply: "button.apply"
    },

    events: {
        'click @ui.cancel': 'onCancel',
        'click @ui.apply': 'onApply',
        'keydown': 'escapeKey'
    },

    constructor: function() {
        let prototype = this.constructor.prototype;

        this.events = {};
        this.defaultOptions = {};
        this.ui = {};
        this.attributes = {};
        this.className = "";

        while (prototype) {
            if (prototype.hasOwnProperty("events")) {
                _.defaults(this.events, prototype.events);
            }
            if (prototype.hasOwnProperty("defaultOptions")) {
                _.defaults(this.defaultOptions, prototype.defaultOptions);
            }
            if (prototype.hasOwnProperty("ui")) {
                _.defaults(this.ui, prototype.ui);
            }
            if (prototype.hasOwnProperty("attributes")) {
                _.defaults(this.attributes, prototype.attributes);
            }
            if (prototype.hasOwnProperty("className")) {
                this.className += " " + prototype.className;
            }
            prototype = prototype.constructor.__super__;
        }

        Marionette.View.apply(this, arguments);
    },

    initialize: function (options) {
        View.__super__.initialize.apply(this);
    },

    onRender: function () {
        // display the bootstrap modal
        $(this.el).modal();

        // interest on this even when the user click on the backdrop
        $(this.el).on('hidden.bs.modal', $.proxy(function() {
            this.destroy();
        }, this));

        // auto-focus is processed now on the first input having the auto-focus attribute
        $(this.el).find(':input[autofocus]').focus();
    },

    onBeforeDestroy: function() {
        // unbind the event before remove the bs.modal to avoid a double destroy call
        $(this.el).off('hidden.bs.modal');
        $(this.el).modal('hide').data('bs.modal', null);
    },

    onCancel: function () {
        this.destroy();
    },

    escapeKey: function(e) {
        let code = e.keyCode || e.which;

        // escape key cancel
        if (code === 27) {
            this.destroy();
        }

        // enter on num-pad enter
        if (code === 13) {
            // click apply
            this.triggerMethod('apply');

            // avoid reload page
            return false;
        }
    }
});

module.exports = View;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 6 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {/**
 * @file advancedtable.js
 * @brief Table view customizable cells and headers, resizable, dynamic columns (add, remove, move).
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-10-07
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details Table view customizable cells and headers, resizable, dynamic columns (add, remove, move), with auto
 * fetching on collection using infinite scrolling. Also support sorting and multi-columns sorting.
 */

let Marionette = __webpack_require__(1);

const EXPONENT_MAP = {
    0: '¹',
    1: '²',
    2: '³',
    3: '⁴',
    4: '⁵',
    5: '⁶',
    6: '⁷',
    7: '⁸',
    8: '⁹'
};
/*
let TableBody = Marionette.CollectionView.extend({
    tagName: 'tbody',
    childView: RowView
});
*/

// @todo evolve to CollectionView and a layout before Mn remove CompositeView
let View = Marionette.CompositeView.extend({
    rowHeight: 1 + 8 + 20 + 8,
    scrollViewInitialized: false,
    userSettingName: null,
    userSettingVersion: null,
    scrollbarWidth: $.position.scrollbarWidth(),

    className: 'advanced-table-container',
    childViewContainer: 'tbody.entity-list',

    attributes: {},

    ui: {
        table: 'table.table.table-advanced',
        thead: 'table.table.table-advanced thead',
        tbody: 'table.table.table-advanced tbody',
        add_column: 'span.add-column',
        add_column_menu: 'div.add-column-menu',
        remove_column: 'span.remove-column',
        sortby_column: 'span.sortby-column'
    },

    events: {
        'click @ui.thead': 'onClickHead',
        'click @ui.tbody': 'onClickBody',
        'click @ui.add_column': 'onAddColumnAction',
        'click @ui.add_column_column': 'onAddColumn'
    },

    behaviors: function() {
        return {
            ActionBtnEvents: {
                behaviorClass: __webpack_require__(335),
                collection: this.getOption('collection'),
                table: this
            }
        };
    },

    templateContext: function () {
        return {
            columnsList: this.displayedColumns,
            columnsOptions: this.getOption('columns')
        }
    },

    childViewOptions: function () {
        return {
            columnsList: this.displayedColumns,
            columnsOptions: this.getOption('columns')
        }
    },

    constructor: function () {
        let prototype = this.constructor.prototype;

        this.events = {};
        this.defaultOptions = {};
        this.ui = {};
        this.attributes = {};
        this.className = "";

        while (prototype) {
            if (prototype.hasOwnProperty("events")) {
                _.defaults(this.events, prototype.events);
            }
            if (prototype.hasOwnProperty("defaultOptions")) {
                _.defaults(this.defaultOptions, prototype.defaultOptions);
            }
            if (prototype.hasOwnProperty("ui")) {
                _.defaults(this.ui, prototype.ui);
            }
            if (prototype.hasOwnProperty("attributes")) {
                _.defaults(this.attributes, prototype.attributes);
            }
            if (prototype.hasOwnProperty("className")) {
                this.className += " " + prototype.className;
            }
            prototype = prototype.constructor.__super__;
        }

        Marionette.CompositeView.apply(this, arguments);
    },

    initialize: function (options) {
        View.__super__.initialize.apply(this, arguments);

        options || (options = {columns: {}});

        if (options.columns === undefined) {
            options.columns = {};
        } else {
            // detach
            options.columns = _.deepClone(options.columns);
        }

        // merge values for each column
        if (this.columnsOptions !== undefined) {
            for (let columnName in this.columnsOptions) {
                if (columnName in options.columns) {
                    _.extend(options.columns[columnName], _.deepClone(this.columnsOptions[columnName]));
                } else {
                    options.columns[columnName] = _.deepClone(this.columnsOptions[columnName]);
                }
            }
        }

        this.listenTo(this.collection, 'reset', this.onResetCollection, this);
        this.listenTo(this.collection, 'sync', this.onCollectionSync, this);

        // empty, mean generated at dom refresh
        if (this.getUserSettingName()) {
            this.selectedColumns = window.application.getUserSetting(
                this.getUserSettingName(),
                this.getUserSettingVersion(),
                this.defaultColumns || []);

            // last element position used after sync collection
            if (history.state) {
                this.initialScrollTop = history.state.scrollPos ? history.state.scrollPos : null;
                this.initialMore = history.state.numElt ? history.state.numElt : null;
            }
        } else {
            this.selectedColumns = this.defaultColumns || [];
            this.initialScrollTop = null;
            this.initialMore = null;
        }

        // process columns
        this.displayedColumns = [];

        // setup dynamic columns list
        for (let i = 0; i < this.selectedColumns.length; ++i) {
            let columnName = this.selectedColumns[i].name;
            let column = options.columns[columnName];

            if (column) {
                this.displayedColumns.push(columnName);
            }
        }

        this.initialResizeDone = false;
    },

    getUserSettingName: function () {
        if (this.userSettingName) {
            if (_.isFunction(this.userSettingName)) {
                return this.userSettingName();
            } else {
                return this.userSettingName;
            }
        } else {
            return null;
        }
    },

    getUserSettingVersion: function () {
        if (this.userSettingVersion) {
            if (_.isFunction(this.userSettingVersion)) {
                return this.userSettingVersion();
            } else {
                return this.userSettingVersion;
            }
        } else {
            return null;
        }
    },

    getScrollElement: function () {
        let scrollElement = this.$el.parent();

        if (this.ui.tbody.parent().parent().css('overflow-y') === "auto") {
            scrollElement = this.ui.tbody.parent().parent();
        }

        return scrollElement;
    },

    isDisplayed: function () {
        if (this.ui.table instanceof Object) {
            return this.ui.table.offsetParent().length && this.ui.table.offsetParent()[0].nodeName !== 'HTML';
        } else {
            return false;
        }
    },

    /**
     * Reset the collection and process the first fetch according to the current columns settings.
     * This method must be called in place of the collection fetch else the initial sort cannot be performed
     * by the user settings took by the view.
     */
    query: function () {
        if (this.collection) {
            // cleanup
            let headers = this.ui.thead.children('tr').children('th,td').find('div.table-advanced-label');
            headers.children('span.column-sorter').removeClass(
                'sortby-asc-column sortby-desc-column fa-sort-asc fa-sort-desc')
                .attr('sort-position', null)
                .empty();

            let sort_by = [];
            let numOrders = 0;

            for (let i = 0; i < this.selectedColumns.length; ++i) {
                let selectColumn = this.selectedColumns[i];

                if (selectColumn.sort_by) {
                    ++numOrders;
                }
            }

            for (let i = 0; i < this.selectedColumns.length; ++i) {
                let selectColumn = this.selectedColumns[i];
                if (!selectColumn.sort_by) {
                    continue;
                }

                let sort_by_match = selectColumn.sort_by.match(/^([\+\-]*)([0-9]+)$/);
                if (!sort_by_match) {
                    continue;
                }

                let order = sort_by_match[1] ? sort_by_match[1] : '+';
                let pos = sort_by_match[2] ? sort_by_match[2] : 0;
                let sortField = this.getSortField(selectColumn.name);

                sort_by.splice(pos, 0, order + sortField);

                // setup column header
                let el = this.ui.thead.children('tr').children('th,td').eq(i);
                let sorter = el.children('div.table-advanced-label').children('span.column-sorter');
                sorter.attr('sort-position', pos);

                if (numOrders > 1) {
                    sorter.text(EXPONENT_MAP[pos] || '');
                } else {
                    sorter.text('');
                }

                if (order === '+') {
                    sorter.addClass('sortby-asc-column fa-sort-asc');
                } else if (order === '-') {
                    sorter.addClass('sortby-desc-column fa-sort-desc');
                } else {
                    sorter.addClass('fa-sort');
                }
            }

            // for simplified columns view, specify a default sort by
            if (sort_by.length === 0 && this.defaultSortBy) {
                sort_by = this.defaultSortBy;
            }

            this.collection.fetch({
                reset: true, data: {
                    sort_by: sort_by
                }
            });
        }
    },

    onResetCollection: function () {
        this.lastModels = null;

        // reset scrolling
        let scrollElement = this.getScrollElement();
        scrollElement.scrollTop(0);

        // this.initialResizeDone = false;
    },

    onDestroy: function () {
        // cleanup bound events
        $("body").off('mousemove', $.proxy(this.onResizeColumnMove, this))
            .off('mouseup', $.proxy(this.onResizeColumnFinish, this));

        $(window).off('focusout', $.proxy(this.onWindowLostFocus, this))
            .off('keydown', $.proxy(this.onKeyDown, this))
            .off('keyup', $.proxy(this.onKeyUp, this));
    },

    onDomRefresh: function () {
        // we can only init here because we need to known the parent container
        if (!this.scrollViewInitialized) {
            let self = this;

            // pagination on scrolling using the direct parent as scroll container
            let scrollElement = this.getScrollElement();
            scrollElement.on('scroll', $.proxy(this.scroll, this));

            // column resizing
            $("body").on('mousemove', $.proxy(this.onResizeColumnMove, this))
                .on('mouseup', $.proxy(this.onResizeColumnFinish, this));

            // order by using CTRL key
            $(window).on('focusout', $.proxy(this.onWindowLostFocus, this))
                .on('keydown', $.proxy(this.onKeyDown, this))
                .on('keyup', $.proxy(this.onKeyUp, this));

            // btn events
            this.ui.add_column_menu.children('div.btn-group').children('span.select-all').on('click', function () {
                self.ui.add_column_menu.children('ul.columns-list')
                    .children('li.column').children('label').children('input').prop("checked", true);
            });

            this.ui.add_column_menu.children('div.btn-group').children('span.select-none').on('click', function () {
                self.ui.add_column_menu.children('ul.columns-list')
                    .children('li.column').children('label').children('input').prop("checked", false);
            });

            this.ui.add_column_menu.children('div.btn-group').children('span.select-cancel').on('click', function () {
                // destroy the glass pane
                window.application.main.glassPane('destroy');
                self.ui.add_column_menu.hide(false);
            });

            this.ui.add_column_menu.children('div.btn-group').children('span.select-accept').on(
                'click', $.proxy(this.onAddRemoveColumn, this));

            this.ui.add_column_menu.children('div.input-group').children('input[name=add-column-filter]').on('input', function (e) {
                let name = $(e.target).val();
                let labels = self.ui.add_column_menu.children('ul.columns-list')
                    .children('li.column')
                    .children('label');

                $.each(labels, function (i, element) {
                    let el = $(element);

                    let c1 = el.attr('name').toUpperCase().indexOf(name.toUpperCase()) !== -1;
                    let c2 = el.text().toUpperCase().indexOf(name.toUpperCase()) !== -1;

                    if (c1 || c2) {
                        el.parent().css('display', 'block');
                    } else {
                        el.parent().css('display', 'none');
                    }
                });
            });

            // create an entry per column from template
            if (this.selectedColumns.length === 0) {
                let headerRows = this.ui.thead.children('tr').children('td,th');

                $.each(headerRows, function (i, element) {
                    let name = $(element).attr('name');
                    if (!name) {
                        name = "unamed" + i;
                        $(element).attr('name', name);
                    }

                    self.selectedColumns.push({
                        name: name,
                        width: "auto",
                        sort_by: null
                    })
                });
            }

            this.updateColumnsWidth();
            this.scrollViewInitialized = true;
        }

        // if displayed adjust columns width
        if (this.isDisplayed()) {
            this.updateColumnsWidth();
        }
    },

    onResize: function () {
        // re-adjust when parent send a resize event
        if (this.initialResizeDone) {
            if (this.isDisplayed()) {
                // need async update on some cases of resize
                let view = this;
                setTimeout(function () {
                    view.updateColumnsWidth();

                    // need a second call because width in some case need an adjustment
                    view.computeClipping();
                }, 0);
            }
        }
    },

    onShowTab: function (tabView) {
        if (this.isDisplayed()) {
            this.updateColumnsWidth();
        }
    },

    initHeaders: function () {
        /**
         * Initialize uninitialized columns
         * @type {boolean}
         */
        let view = this;
        let headerRows = this.ui.thead.children('tr').children('th,td');
        let fixedPrevColumn = false;

        $.each(headerRows, function (i, element) {
            let el = $(element);
            let label = el.children('div.table-advanced-label');

            // if not exist insert the label into a sub-div
            if (label.length === 0) {
                label = $('<div class="table-advanced-label"></div>').html(el.html()).attr('title', el.text().trim());
                el.html(label);

                let draggable = label.children('[draggable]');

                draggable.on('dragstart', $.proxy(view.onColumnDragStart, view))
                    .on('dragend', $.proxy(view.onColumnDragEnd, view));

                el.on('dragenter', $.proxy(view.onColumnDragEnter, view))
                    .on('dragleave', $.proxy(view.onColumnDragLeave, view))
                    .on('dragover', $.proxy(view.onColumnDragOver, view))
                    .on('drop', $.proxy(view.onColumnDrop, view));

                let sorters = label.children('span.column-sorter');
                sorters.on('click', $.proxy(view.onSortColumn, view));
            }

            // name unamed columns
            if (el.attr('name') === undefined || el.attr('name') === "") {
                el.attr('name', 'unamed' + i);
            }

            // add column sizer for each column except the first and the last
            if (i > 0 && i < headerRows.length && el.children('div.column-sizer').length === 0) {
                let sizer = $('<div class="column-sizer"></div>');
                el.prepend(sizer);

                sizer.append('<div></div>');

                // active sizer only if the left column is not fixed size
                if (!fixedPrevColumn) {
                    sizer.addClass('active');

                    sizer.on('mousedown', $.proxy(view.onResizeColumnBegin, view))
                        .on('mouseover', $.proxy(view.onResizeColumnHover, view));
                }
            } else if (i === 0 && el.children('div.column-sizer').length !== 0) {
                // remove previous sizer (can appears when moving columns)
                el.children('div.column-sizer').remove();
            }

            // fixed column, then no sizer on the left of the next column
            fixedPrevColumn = !!el.hasClass('glyph-fixed-column');
        });
    },

    updateColumnsWidth: function (autoAdjust) {
        if (!this.ui.table.hasClass('table-advanced') || !this.ui.table.hasClass('table-advanced')) {
            return;
        }

        // not displayed at this time, wait for a visibility signal (onShowTab or onDomRefresh)
        if (!this.isDisplayed()) {
            // at least init headers
            this.initHeaders();
            return;
        }

        // should be done after the columns content update (refresh)
        let columnsWidth = [];
        let firstBodyRow = this.ui.tbody.children('tr:first-child');
        let zero = false;
        let view = this;

        autoAdjust != undefined || (autoAdjust = false);

        let headerRows = this.ui.thead.children('tr').children('th,td');
        let rows = firstBodyRow.children('th,td');

        // when overflow-y on body, pad the right of the head
        let hasScroll = (this.ui.tbody[0].scrollHeight - this.ui.tbody[0].parentNode.parentNode.clientHeight) > 0;
        if (hasScroll || this.ui.add_column.length > 0) {
            this.ui.thead.parent().parent().css('padding-right', this.scrollbarWidth + 'px');
        } else {
            this.ui.thead.parent().parent().css('padding-right', '');
        }

        let tableWidth = this.ui.tbody.width();
        this.ui.thead.parent().width(this.ui.tbody.parent().width());

        // let widthFactor = tableWidth / (this.previousTableWidth || tableWidth);
        // this.previousTableWidth = tableWidth;

        // no content
        if (rows.length === 0) {
            if (!this.initialResizeDone) {
                $.each(headerRows, function (i, element) {
                    let width = i < view.selectedColumns.length ? view.selectedColumns[i].width : null;

                    // width is defined by the configuration or is computed
                    if (width != undefined && width !== "auto") {
                        // size from user settings
                        columnsWidth.push(width * tableWidth);
                    } else {
                        // size from body
                        width = $(element).width();
                        columnsWidth.push(width);
                    }

                    zero = width <= 0;
                });
            } else {
                $.each(headerRows, function (i, element) {
                    let width = i < view.selectedColumns.length ? view.selectedColumns[i].width : null;
                    if (width != undefined && width !== "auto") {
                        columnsWidth.push(width * tableWidth);
                    } else {
                        columnsWidth.push("auto");
                    }
                });
            }
        }

        //
        // initialize uninitialized columns
        //

        let fixedPrevColumn = false;

        $.each(headerRows, function (i, element) {
            let el = $(element);
            let label = el.children('div.table-advanced-label');

            // if not exist insert the label into a sub-div
            if (label.length === 0) {
                label = $('<div class="table-advanced-label"></div>').html(el.html()).attr('title', el.text().trim());
                el.html(label);

                let draggable = label.children('[draggable]');

                draggable.on('dragstart', $.proxy(view.onColumnDragStart, view))
                    .on('dragend', $.proxy(view.onColumnDragEnd, view));

                el.on('dragenter', $.proxy(view.onColumnDragEnter, view))
                    .on('dragleave', $.proxy(view.onColumnDragLeave, view))
                    .on('dragover', $.proxy(view.onColumnDragOver, view))
                    .on('drop', $.proxy(view.onColumnDrop, view));

                let sorters = label.children('span.column-sorter');
                sorters.on('click', $.proxy(view.onSortColumn, view));
            }

            if (el.hasClass('glyph-fixed-column')) {
                el.css('min-width', label.width())
                    .css('max-width', label.width());

            } else if (el.hasClass('title-column') && label.css('min-width') === '0px') {
                // try to keep as possible the title entirely visible

                // pre-compute
                label.width('auto');
                let minWidth = label.width();
                // label.css('min-width', minWidth + 8 + 8 + 'px');

                // +4+1 padding right + border left
                el.css('min-width', minWidth + 8 + 8 + (i === 0 ? 0 : 1) + 'px');

                // and for the first body row
                $(rows.get(i)).css('min-width', minWidth + 8 + 8 + (i === 0 ? 0 : 1) + 'px');

                el.width('auto');
            } else if (label.css('min-width') === '0px') {
                // for each actor + 3 per span + 3 of right margin
                let actors = label.children('span.column-action');
                let actorsWidth = actors.length * (actors.width() + 3 + 3);

                let minWidth = 32 + actorsWidth;
                // label.css('min-width', minWidth + 'px');
                el.css('min-width', minWidth + 8 + 8 + (i === 0 ? 0 : 1) + 'px');
                $(rows.get(i)).css('min-width', minWidth + 8 + 8 + (i === 0 ? 0 : 1) + 'px');

                el.width('auto');
            }

            // name unamed columns
            if (el.attr('name') === undefined || el.attr('name') === "") {
                el.attr('name', 'unamed' + i);
            }

            // add column sizer for each column except the first and the last
            if (i > 0 && i < headerRows.length && el.children('div.column-sizer').length === 0) {
                let sizer = $('<div class="column-sizer"></div>');
                el.prepend(sizer);

                sizer.append('<div></div>');

                // active sizer only if the left column is not fixed size
                if (!fixedPrevColumn) {
                    sizer.addClass('active');

                    sizer.on('mousedown', $.proxy(view.onResizeColumnBegin, view))
                        .on('mouseover', $.proxy(view.onResizeColumnHover, view));
                }
            } else if (i === 0 && el.children('div.column-sizer').length !== 0) {
                // remove previous sizer (can appears when moving columns)
                el.children('div.column-sizer').remove();
            }

            // fixed column, then no sizer on the left of the next column
            fixedPrevColumn = !!el.hasClass('glyph-fixed-column');
        });

        // auto adjust, recompute the correct width for each column and keep it in local configuration
        if (autoAdjust) {
            $.each(headerRows, function (i, element) {
                let el = $(element);

                if (!el.hasClass('glyph-fixed-column')) {
                    // adjust head from body
                    $(rows[i]).width($(rows[i]).width());
                    el.width($(rows[i]).width());

                    // update user setting locally (minus border left except on first column)
                    view.selectedColumns[i].width = el.width() / tableWidth;
                } else {
                    view.selectedColumns[i].width = "auto";
                }
            });
        } else {
            // or setup the width from the local configuration
            $.each(rows, function (i, element) {
                let width = i < view.selectedColumns.length ? view.selectedColumns[i].width : null;

                // width is defined by the configuration or is computed
                if (width != undefined && width != "auto") {
                    // size from user settings (normalized)
                    columnsWidth.push(width * tableWidth);
                } else {
                    // size from body
                    width = $(element).width();
                    columnsWidth.push(width);
                }

                zero = width <= 0;
            });

            // case of 0 width columns, columns are not ready, try again later
            if (zero) {
                return;
            }

            $.each(headerRows, function (i, element) {
                let el = $(element);

                // resize header column except glyph fixed columns
                if (!el.hasClass('glyph-fixed-column')) {
                    // count border left (no left border for the first column)
                    $(rows[i]).width(columnsWidth[i]);
                    el.width(columnsWidth[i]);

                    // update user setting locally (minus border left except on first column)
                    view.selectedColumns[i].width = el.width() / tableWidth;
                } else {
                    view.selectedColumns[i].width = "auto";
                }
            });
        }

        // update labels width, position and clipping
        this.computeClipping();

        // done
        if (!this.initialResizeDone) {
            this.initialResizeDone = true;
        }
    },

    onColumnDragStart: function (e) {
        // fix for firefox...
        e.originalEvent.dataTransfer.setData('text/plain', null);

        let target = $(e.currentTarget).parent().parent();
        target.css('opacity', '0.4')
            .children('div.table-advanced-label').addClass('highlight-label');

        let i1;
        $.each(this.ui.thead.children('tr').children('td,th'), function (i, element) {
            if (target.attr('name') === $(element).attr('name')) {
                i1 = i;
                return false;
            }
        });

        // opacity of each cell
        $.each(this.ui.tbody.children('tr'), function (i, element) {
            $(element).children('th,td').eq(i1).css('opacity', '0.4');
        });

        window.application.main.dnd.set(target, 'advanced-table-column');
        this.targetDropElement = null;
    },

    onColumnDragEnd: function (e) {
        let target = $(e.currentTarget).parent().parent();
        target.css('opacity', 'initial')
            .children('div.table-advanced-label').removeClass('highlight-label');

        let i1;
        $.each(this.ui.thead.children('tr').children('td,th'), function (i, element) {
            if (target.attr('name') === $(element).attr('name')) {
                i1 = i;
                return false;
            }
        });

        // opacity of each cell
        $.each(this.ui.tbody.children('tr'), function (i, element) {
            $(element).children('th,td').eq(i1).css('opacity', 'initial');
        });

        if (this.targetDropElement) {
            let target = $(this.targetDropElement);
            target.css('opacity', 'initial')
                .children('div.table-advanced-label').removeClass('highlight-label');

            let i2;
            $.each(this.ui.thead.children('tr').children('td,th'), function (i, element) {
                if (target.attr('name') === $(element).attr('name')) {
                    i2 = i;
                    return false;
                }
            });

            // opacity of each cell
            $.each(this.ui.tbody.children('tr'), function (i, element) {
                $(element).children('th,td').eq(i2).css('opacity', 'initial');
            });
        }

        window.application.main.dnd.unset();
        this.targetDropElement = null;
    },

    onColumnDragEnter: function (e) {
        if (e.originalEvent.preventDefault) {
            e.originalEvent.preventDefault();
        }

        if (this.targetDropElement) {
            let oldTarget = $(this.targetDropElement);
            oldTarget.css('opacity', 'initial')
                .children('div.table-advanced-label').removeClass('highlight-label');

            let i2;
            $.each(this.ui.thead.children('tr').children('td,th'), function (i, element) {
                if (oldTarget.attr('name') === $(element).attr('name')) {
                    i2 = i;
                    return false;
                }
            });

            // opacity of each cell
            $.each(this.ui.tbody.children('tr'), function (i, element) {
                $(element).children('th,td').eq(i2).css('opacity', 'initial');
            });

            this.targetDropElement = null;
        }

        if (!window.application.main.dnd.isSelector('advanced-table-column')) {
            return false;
        }

        if (e.currentTarget === window.application.main.dnd.get()[0]) {
            return false;
        }

        let target = $(e.currentTarget);
        if (target.hasClass('fixed-column') ||
            target.children('div.table-advanced-label').children('span[draggable=true]').length === 0) {
            return false;
        }

        target.css('opacity', '0.4')
            .children('div.table-advanced-label').addClass('highlight-label');

        if (this.targetDropElement === e.currentTarget) {
            return false;
        }

        let i2;
        $.each(this.ui.thead.children('tr').children('td,th'), function (i, element) {
            if (target.attr('name') === $(element).attr('name')) {
                i2 = i;
                return false;
            }
        });

        // opacity of each cell
        $.each(this.ui.tbody.children('tr'), function (i, element) {
            $(element).children('th,td').eq(i2).css('opacity', '0.4');
        });

        this.targetDropElement = e.currentTarget;

        return false;
    },

    onColumnDragLeave: function (e) {
        if (e.originalEvent.preventDefault) {
            e.originalEvent.preventDefault();
        }

        if (!window.application.main.dnd.isSelector('advanced-table-column')) {
            return false;
        }

        if (e.currentTarget === window.application.main.dnd.get()[0]) {
            return false;
        }

        if (this.targetDropElement === e.currentTarget) {
            return false;
        }

        if (window.application.main.dnd.get().children('div.table-advanced-label').length === 0) {
            return false;
        }

        let target = $(e.currentTarget);
        target.css('opacity', 'initial')
            .children('div.table-advanced-label').removeClass('highlight-label');

        let i2;
        $.each(this.ui.thead.children('tr').children('td,th'), function (i, element) {
            if (target.attr('name') === $(element).attr('name')) {
                i2 = i;
                return false;
            }
        });

        // opacity of each cell
        $.each(this.ui.tbody.children('tr'), function (i, element) {
            $(element).children('th,td').eq(i2).css('opacity', 'initial');
        });

        this.targetDropElement = null;

        return false;
    },

    onColumnDragOver: function (e) {
        if (e.originalEvent.preventDefault) {
            e.originalEvent.preventDefault();
        }

        return false;
    },

    onColumnDrop: function (e) {
        if (e.originalEvent.stopPropagation) {
            e.originalEvent.stopPropagation();
        }

        if (!window.application.main.dnd.isSelector('advanced-table-column')) {
            return false;
        }

        let target = $(e.currentTarget);
        if (target.hasClass('fixed-column')) {
            return false;
        }

        target.css('opacity', 'initial')
            .children('div.table-advanced-label').removeClass('highlight-label');

        let srcName = window.application.main.dnd.get().attr('name');
        let dstName = target.attr('name');

        if (srcName !== dstName) {
            // switch the two columns
            let i1 = 0, i2 = 0;
            $.each(this.ui.thead.children('tr').children('td,th'), function (i, element) {
                if ($(element).attr('name') === dstName) {
                    i1 = i;
                } else if ($(element).attr('name') === srcName) {
                    i2 = i;
                }
            });

            // switch labels
            let headColumns = $(this.ui.thead.children('tr')[0]).children('th,td');

            if (i1 > i2) {
                headColumns.eq(i2).detach().insertAfter(headColumns.eq(i1))
                    .css('opacity', 'initial')
                    .children('div.table-advanced-label').removeClass('highlight-label');
            } else {
                headColumns.eq(i2).moveBefore(headColumns.eq(i1))
                    .css('opacity', 'initial')
                    .children('div.table-advanced-label').removeClass('highlight-label');
            }

            // switch for any row and reset opacity
            if (i1 < i2) {
                $.each(this.ui.tbody.children('tr'), function (i, element) {
                    let columns = $(element).children('th,td');
                    columns.eq(i2).moveBefore(columns.eq(i1).css('opacity', 'initial'));
                });
            } else {
                $.each(this.ui.tbody.children('tr'), function (i, element) {
                    let columns = $(element).children('th,td');
                    columns.eq(i2).detach().insertAfter(columns.eq(i1).css('opacity', 'initial'));
                });
            }

            let col1 = null, col2 = null;
            for (let i = 0; i < this.displayedColumns.length; ++i) {
                if (this.displayedColumns[i] === this.selectedColumns[i1].name) {
                    col1 = i;
                } else if (this.displayedColumns[i] === this.selectedColumns[i2].name) {
                    col2 = i;
                }
            }

            // switch selectedColumns
            let tmp = this.selectedColumns[i2];

            this.selectedColumns.splice(i2, 1);
            this.selectedColumns.splice(i1, 0, tmp);

            // // switch displayedColumns
            tmp = this.displayedColumns[col2];

            this.displayedColumns.splice(col2, 1);
            this.displayedColumns.splice(col1, 0, tmp);

            // re-adjust columns for some cases
            this.updateColumnsWidth(true);

            // save user settings
            if (this.getUserSettingName()) {
                window.application.updateUserSetting(
                    this.getUserSettingName(),
                    this.selectedColumns,
                    this.getUserSettingVersion());
            }
        }

        return false;
    },

    onResizeColumnHover: function (e) {
        let sizer = $(e.currentTarget);

        // get the previous column
        let column = sizer.parent();
        let columns = column.parent().find('th');

        // adapt the cursor, because if the right column is fixed size, the resize cannot be performed
        $.each(columns, function (i, element) {
            let el = $(element);

            if (el.attr('name') === column.attr('name')) {
                if (el.hasClass('glyph-fixed-column')) {
                    el.children('div.column-sizer').css('cursor', 'default');
                } else {
                    el.children('div.column-sizer').css('cursor', '');
                }

                return false;
            }
        });
    },

    onResizeColumnBegin: function (e) {
        let sizer = $(e.currentTarget);

        // get the previous column
        let column = sizer.parent();
        let columns = column.parent().find('th');
        let view = this;

        this.resizingColumnLeft = null;

        $.each(columns, function (i, element) {
            if ($(element).attr('name') === column.attr('name')) {
                // left and right columns directly impacted
                view.resizingColumnLeft = $(columns[i - 1]);
                view.resizingColumnRight = $(element);
                view.resizingColumnIndex = i;

                return false;
            }
        });

        // cancel if right is fixed
        if (this.resizingColumnRight.hasClass('glyph-fixed-column')) {
            this.resizingColumnLeft = null;
            this.resizingColumnRight = null;
            this.resizingColumnIndex = null;

            return false;
        }

        if (this.resizingColumnLeft && this.resizingColumnRight) {
            $('body').addClass('unselectable');

            // initial mouse position
            this.resizingColumnStartOffset = e.screenX;

            // initial widths
            this.resizingColumnLeftStartWidth = this.resizingColumnLeft.width();
            this.resizingColumnRightStartWidth = this.resizingColumnRight.width();
        }
    },

    onResizeColumnFinish: function (e) {
        if (this.resizingColumnLeft && this.resizingColumnRight) {
            $('body').removeClass('unselectable');

            let view = this;
            let tableWidth = this.ui.tbody.width();

            let headerRows = this.ui.thead.children('tr').children('td,th');
            $.each(headerRows, function (i, element) {
                let el = $(element);

                // ignored fixed columns width
                if (!el.hasClass('glyph-fixed-column')) {
                    view.selectedColumns[i].width = el.width() / tableWidth;
                } else {
                    view.selectedColumns[i].width = "auto";
                }
            });

            // save user settings
            if (this.getUserSettingName()) {
                window.application.updateUserSetting(
                    this.getUserSettingName(),
                    this.selectedColumns,
                    this.getUserSettingVersion());
            }

            this.resizingColumnLeft = null;
            this.resizingColumnRight = null;
        }
    },

    onResizeColumnMove: function (e) {
        if (this.resizingColumnLeft && this.resizingColumnRight) {
            let delta = e.screenX - this.resizingColumnStartOffset;

            // new width respecting the min width
            let leftWidth = Math.max(
                parseInt(this.resizingColumnLeft.css('min-width').replace('px', '')),
                this.resizingColumnLeftStartWidth + delta);

            let rightWidth = Math.max(
                parseInt(this.resizingColumnRight.css('min-width').replace('px', '')),
                this.resizingColumnRightStartWidth - delta);

            this.resizingColumnLeft.width(leftWidth);
            this.resizingColumnRight.width(rightWidth);

            // define width of header
            // let head = this.ui.thead.children('tr').children('th,td');
            let body = this.ui.tbody.children('tr:first-child').children('th,td');

            // and body
            $(body[this.resizingColumnIndex - 1]).width(leftWidth);
            $(body[this.resizingColumnIndex]).width(rightWidth);

            // // and auto-adjust all columns from body constraints
            // $.each(body, function(i, element) {
            //     let el = $(element);
            //     let headEl = $(head[i]);
            //     let label = headEl.children('div.table-advanced-label');
            //
            //     if (!el.hasClass('glyph-fixed-column')) {
            //         headEl.width(el.width());
            //
            //         // adjust the label div (minus border left width)
            //         label.width(el.width() - (i === 0 ? 0 : 1));
            //     }
            // });

            this.computeClipping();
        }
    },

    capacity: function () {
        let scrollElement = this.getScrollElement();
        return Math.max(1, Math.floor(scrollElement.prop('clientHeight') / this.rowHeight));
    },

    isNeedMoreResults: function () {
        let scrollElement = this.getScrollElement();
        let clientHeight = scrollElement.prop('clientHeight');
        let diff = scrollElement.prop('scrollHeight') - scrollElement.scrollTop() - clientHeight;

        // less than one page in buffer (minus margin height)
        return diff - (scrollElement.outerHeight(true) - scrollElement.height()) <= clientHeight;
    },

    updateScroll: function(topScroll) {
        // locally save scroll position in user settings
        if (this.getUserSettingName()) {
            // last element position
            let state = history.state || {};
            state.scrollPos = topScroll;
            state.numElt =  this.collection.models.length;

            history.replaceState(state, this.getUserSettingName() + '_scrollPos', window.location.pathname);
        }
    },

    scrollOnePage: function (direction) {
        direction !== undefined || (direction = 1);

        let scrollElement = this.getScrollElement();
        let clientHeight = scrollElement.prop('clientHeight');
        let amount = this.capacity() * this.rowHeight;

        // view page scrolling
        scrollElement.scrollTop(scrollElement.scrollTop() + amount * (direction > 0 ? 1 : -1));
    },

    moreResults: function (more, scroll) {
        scroll || (scroll = false);
        more || (more = 20);

        let view = this;

        if (more === -1) {
            more = this.capacity() + 1;
        }

        if (this.collection && this.collection.next) {
            this.collection.fetch({
                update: true, remove: false, data: {
                    cursor: this.collection.next,
                    sort_by: this.collection.sort_by,
                    more: more
                }
            }).then(function (data) {
                // let scrollElement = view.getScrollElement();

                if (scroll) {
                    view.scrollOnePage(1);

                    // // let height = scrollElement.prop('scrollHeight');
                    // let clientHeight = scrollElement.prop('clientHeight');
                    // // scrollElement.scrollTop(height - clientHeight - view.rowHeight * 0.5);
                    //
                    // // view page scrolling
                    // scrollElement.scrollTop(scrollElement.scrollTop() + view.capacity() * view.rowHeight);
                }
            });
        } else if (scroll) {
            this.scrollOnePage(1);
        }
    },

    onRefreshChildren: function () {
        let view = this;

        return $.when.apply($, []).done(function () {
            view.updateColumnsWidth();
        });
    },

    onRender: function () {
        // if collection in fetched before rendering the view, meaning by null lastModels
        if (!this.lastModels) {
            this.onRefreshChildren();
        }
    },

    onCollectionSync: function (collection, data) {
        // keep list of last queried models, done just once the collection get synced
        this.lastModels = [];

        if (data && data.items && data.items.length > 0) {
            for (let i = 0; i < data.items.length; ++i) {
                this.lastModels.push(this.collection.get(data.items[i].id));
            }

            // post refresh on children once every children was rendered for any other rendering
            this.onRefreshChildren();
        } else {
            this.updateColumnsWidth();
        }

        if (this.initialScrollTop && this.initialMore) {
            // only once reached the minimum content height
            let height = this.getScrollElement().prop('scrollHeight');

            if (this.initialMore - this.collection.models.length > 0) {
                this.moreResults(this.initialMore - this.collection.models.length);
            }

            if (this.initialScrollTop < height && this.initialMore <= this.collection.models.length) {
                this.getScrollElement().scrollTop(this.initialScrollTop);
                this.initialScrollTop = null;
            }
        }
    },

    scroll: function (e) {
        if (this.previousScrollTop === undefined) {
            this.previousScrollTop = 0;
        }

        if (e.target.scrollTop !== this.previousScrollTop) {
            this.previousScrollTop = e.target.scrollTop;

            if (e.target.scrollHeight - e.target.clientHeight === e.target.scrollTop) {
                this.moreResults();
            }
        }

        if (this.previousScrollLeft === undefined) {
            this.previousScrollLeft = 0;
        }

        if (e.target.scrollLeft !== this.previousScrollLeft) {
            this.computeClipping();
            this.previousScrollLeft = e.target.scrollLeft;
        }
    },

    computeClipping: function () {
        // adjust left of every columns header
        let head = this.ui.thead.children('tr').children('th,td');
        let body = this.ui.tbody.children('tr:first-child').children('th,td');
        let clientWidth = this.$el.innerWidth();

        let hasScroll = (this.ui.tbody[0].scrollHeight - this.ui.tbody[0].parentNode.parentNode.clientHeight) > 0;

        // let scrollLeft = this.ui.tbody.parent().parent().scrollLeft();
        let leftMargin = window.application.IS_FIREFOX ? 7 : 8;
        let rightMargin = this.ui.add_column.length > 0 ? this.ui.add_column.parent().width() : 0;
        let leftClip = this.ui.table.position().left;
        // let rightClip = this.ui.add_column.length > 0 ? this.ui.add_column.parent().width() : 0;

        if (hasScroll) {
            rightMargin = Math.max(rightMargin, this.scrollbarWidth);
        }

        $.each(head, function (i, element) {
            let el = $(element);
            let row = $(body.get(i));
            let label = el.children('div.table-advanced-label');
            let sizer = el.children('div.column-sizer');

            let left = row.length > 0 ? row.position().left : el.position().left;
            let w = row.length > 0 ? row.width() : el.width();

            label.css('left', left + leftMargin);
            sizer.css('left', left + leftMargin);

            if (left < leftClip) {
                let l = Math.max(0, leftClip - leftMargin - left);
                let r = w + 2;
                label.css('clip', 'rect(0px ' + r + 'px 32px ' + l + 'px)');
                sizer.css('display', 'none');

                if (r - l <= 0) {
                    label.css('display', 'none');
                } else {
                    label.css('display', '');
                }
            } else if (left + w > clientWidth - rightMargin) {
                let l = 0;
                let r = Math.max(0, clientWidth - left/* - rightMargin*/);
                label.css('clip', 'rect(0px ' + r + 'px 32px ' + l + 'px)');

                if (left > clientWidth || r - l <= 0) {
                    label.css('display', 'none');
                    sizer.css('display', 'none');
                } else {
                    label.css('display', '');
                    sizer.css('display', '');

                    // avoid overflow on body that makes a scrollbar or add option button
                    if (!el.hasClass('glyph-fixed-column')) {
                        let minWidth = Math.min(w + 2 - rightMargin, r - l + 8);
                        label.width(minWidth);
                    }
                }
            } else {
                label.css('clip', '');
                label.css('display', 'block');

                sizer.css('display', 'block');

                // restore
                if (!el.hasClass('glyph-fixed-column')) {
                    label.width(w + 2);
                }
            }
        });
    },

    getLastModels: function () {
        if (!this.lastModels) {
            this.lastModels = [];
            for (let i = 0; i < this.collection.models.length; ++i) {
                this.lastModels.push(this.collection.models[i]);
            }
        }

        return this.lastModels;
    },

    highlightLabels: function (highlight) {
        let labels = this.ui.thead.children('tr').children('th,td').find('div.table-advanced-label');

        if (highlight) {
            labels.addClass('highlight-label');
        } else {
            labels.removeClass('highlight-label');
        }
    },

    onAddColumnAction: function (e) {
        let contextMenu = this.ui.add_column_menu;
        if (contextMenu.length) {
            if (contextMenu.css('display') === 'block') {
                contextMenu.hide();
            } else {
                let columns = this.getOption('columns') || {};

                // clear previous values
                let ul = contextMenu.children('ul.columns-list').html("");
                let displayedColumns = new Set();

                // add displayed columns first in order
                for (let i = 0; i < this.displayedColumns.length; ++i) {
                    let columnName = this.displayedColumns[i];

                    if (columnName in columns && columns[columnName].fixed)
                        continue;

                    let li = $('<li class="column"></li>');
                    let label = $('<label tabindex="-1" name="' + columnName + '"><input type="checkbox" checked=""/></label>');
                    li.append(label);

                    label.prop("displayed", true);

                    label.append('&nbsp;' + (this.getOption('columns')[columnName].label || columnName));
                    ul.append(li);

                    displayedColumns.add(columnName);
                }

                // append others columns by alpha order
                let columnsByLabel = [];

                for (let columnName in columns) {
                    let column = columns[columnName];
                    columnsByLabel.push({
                        name: columnName,
                        label: column.label || columnName
                    });
                }

                columnsByLabel.sort(function (a, b) {
                    return a.label.localeCompare(b.label);
                });

                for (let c in columnsByLabel) {
                    let column = columnsByLabel[c];

                    if (column.name in columns && columns[column.name].fixed)
                        continue;

                    if (!displayedColumns.has(column.name)) {
                        let li = $('<li class="column"></li>');
                        let label = $('<label tabindex="-1" name="' + column.name + '"><input type="checkbox"/></label>');
                        li.append(label);

                        label.prop("displayed", false);

                        label.append('&nbsp;' + column.label);
                        ul.append(li);
                    }
                }

                contextMenu.css({
                    display: "block",
                    left: this.ui.add_column.parent().position().left - contextMenu.width(),
                    top: this.ui.add_column.parent().position().top + this.ui.add_column.height(),
                    'tab-index': 0
                }).addClass('glasspane-top-of');

                // focus on text field
                contextMenu.find('input[name="add-column-filter"]').val("").focus();

                // height must be inside of the window
                let maxHeight = $(window).height() - (this.ui.add_column.parent().offset().top + this.ui.add_column.height()) - 20;
                maxHeight -= contextMenu.children('div.input-group').outerHeight() + contextMenu.children('div.btn-group').outerHeight();
                maxHeight -= ul.outerHeight() - ul.height();
                ul.css('max-height', maxHeight + 'px').css('overflow-y', 'auto');

                // hide header highlight
                if (this.controlKeyDown) {
                    this.controlKeyDown = false;
                    this.highlightLabels(false);
                }

                // hide the context menu when click on the glass pane
                window.application.main.glassPane('show').on('click', function (e) {
                    contextMenu.hide();
                    return true;
                });
            }
        }
    },

    /**
     * Remove a column given its name.
     * @param columnName Column name.
     * @param save If true save user settings.
     * @returns boolean if success.
     */
    removeColumn: function (columnName, save) {
        let columnId = -1;

        for (let j = 0; j < this.displayedColumns.length; ++j) {
            if (this.displayedColumns[j] === columnName) {
                columnId = j;
                break;
            }
        }

        if (columnId === -1) {
            return false;
        }

        this.displayedColumns.splice(columnId, 1);

        let headerCol = this.ui.thead.children('tr').children('th[name="' + columnName + '"]');
        headerCol.remove();

        let bodyCol = this.ui.tbody.children('tr').children('td[name="' + columnName + '"]');
        bodyCol.remove();

        // update user setting
        for (let i = 0; i < this.selectedColumns.length; ++i) {
            if (this.selectedColumns[i].name === columnName) {
                this.selectedColumns.splice(i, 1);
                break;
            }
        }

        if (save) {
            if (this.getUserSettingName()) {
                window.application.updateUserSetting(
                    this.getUserSettingName(),
                    this.selectedColumns,
                    this.getUserSettingVersion()
                );
            }
        }

        return true;
    },

    addColumn: function (columnName, save) {
        let columnId = -1;
        let self = this;

        let column = this.getOption('columns')[columnName];
        this.displayedColumns.push(columnName);

        // insert the new column dynamically
        let th = $('<th></th>');
        th.attr('name', columnName);
        th.addClass('unselectable');

        let labelOrGlyph = $('<span>' + (this.getOption('columns')[columnName].label || columnName) + '</span>');
        if (!column.fixed) {
            labelOrGlyph.prop('draggable', true);
        }

        if (column.minWidth) {
            th.addClass("title-column");
        }

        let sorter = $('<span class="column-sorter fa fa-sort action sortby-asc-column column-action"></span>');
        th.append(sorter);

        if (typeof(column.glyphicon) === "string") {
            labelOrGlyph.addClass("fa " + column.glyphicon);
            th.addClass('glyph-fixed-column');
        }

        let cellClassName = "";
        if (typeof(column.event) === "string") {
            cellClassName = "action " + column.event;
        }

        if (column.fixed) {
            th.addClass('fixed-column');
        }

        th.append(labelOrGlyph);

        this.ui.thead.children('tr').append(th);

        let collection = this.collection;
        let rows = this.ui.tbody.children('tr');

        $.each(rows, function (i, element) {
            let el = $(element);
            let item = collection.get(el.attr('element-id'));
            let cell = $('<td></td>');
            cell.attr('name', columnName);
            cell.addClass(cellClassName);

            if (column.custom) {
                // deferred
            } else if (column.glyphicon) {
                let span = $('<span class="fa"></span>');
                span.addClass(column.glyphicon[1]);
                cell.html(span);
            } else if (!column.format) {
                cell.html(item.get(columnName.replace(/^[#@\$]/, '')));
            } else if (column.query) {
                // deferred
            } else if (columnName.startsWith('#')) {
                cell.html(item.get('descriptors')[columnName.replace(/^#/, '')] || "");
            }

            el.append(cell);
        });

        // update user setting
        this.selectedColumns.push({
            name: columnName,
            width: null,
            sort_by: null
        });

        // refresh only the new column on every row
        this.onRefreshChildren(true, this.displayedColumns.slice(-1)).done(function () {
            // save once refresh is done completely
            if (self.getUserSettingName()) {
                window.application.updateUserSetting(
                    self.getUserSettingName(),
                    self.selectedColumns,
                    self.getUserSettingVersion()
                );
            }
        });

        if (save) {
            if (this.getUserSettingName()) {
                window.application.updateUserSetting(
                    this.getUserSettingName(),
                    this.selectedColumns,
                    this.getUserSettingVersion()
                );
            }
        }

        return true;
    },

    onAddRemoveColumn: function () {
        let contextMenu = this.ui.add_column_menu;
        let labels = contextMenu.children('ul.columns-list').children('li.column').children('label');
        let self = this;

        // hide the dialog
        contextMenu.hide();

        // destroy the glass pane
        window.application.main.glassPane('destroy');

        // first remove columns
        $.each(labels, function (i, element) {
            let el = $(element);
            let columnName = el.attr('name');

            if (el.prop('displayed') && !el.children('input').prop('checked')) {
                self.removeColumn(columnName, false);
            }
        });

        // then add others
        labels = contextMenu.children('ul.columns-list').children('li.column').children('label');
        $.each(labels, function (i, element) {
            let el = $(element);
            let columnName = el.attr('name');

            if (!el.prop('displayed') && el.children('input').prop('checked')) {
                self.addColumn(columnName, false);
            }
        });

        this.updateColumnsWidth(true);

        if (this.getUserSettingName()) {
            window.application.updateUserSetting(
                this.getUserSettingName(),
                this.selectedColumns,
                this.getUserSettingVersion()
            );
        }
    },

    getSortField: function (columnName) {
        // not column descriptor simply returns the column name
        if (!columnName in this.getOption('columns')) {
            return columnName;
        }

        let column = this.getOption('columns')[columnName];

        if ("format" in column) {
            if ("field" in column && column.field && column.format && column.format.type === "count") {
                // count
                return column.field;
            } else if ("field" in column && column.field) {
                // sub-field
                return columnName + "->" + column.field;
            } else if ("sortby_field" in column.format && column.format.sortby_field) {
                // sub-field
                return columnName + "->" + column.format.sortby_field;
            } else {
                // unknown
                return columnName;
            }
        } else if ("field" in column && column.field) {
            return columnName + '->' + column.field;
        } else {
            return columnName;
        }
    },

    onSortColumn: function (e) {
        let el = $(e.target);
        let columnEl = $(e.target).parent().parent();
        let columnName = columnEl.attr('name');
        let sortField = this.getSortField(columnName);
        let order = '+';
        let headers = this.ui.thead.children('tr').children('th,td').find('div.table-advanced-label'); //  span.column-sorter');
        let sortBy = _.clone(this.collection.sort_by) || [];

        let i = -1;
        for (let j = 0; j < sortBy.length; ++j) {
            if (sortBy[j] === sortField || sortBy[j].slice(1) === sortField) {
                i = j;
                break;
            }
        }

        if (i !== -1) {
            order = sortBy[i][0] === '-' ? '-' : '+';
            // toggle current sorter order
            order = order === '+' ? '-' : (order === '-' ? '' : '+');
        }

        if (!this.controlKeyDown) {
            // cleanup
            headers.children('span.column-sorter').removeClass(
                'sortby-asc-column sortby-desc-column fa-sort-asc fa-sort-desc')
                .attr('sort-position', null)
                .empty();

            if (order === '+') {
                el.addClass('sortby-asc-column fa-sort-asc');
            } else if (order === '-') {
                el.addClass('sortby-desc-column fa-sort-desc');
            } else {
                el.addClass('fa-sort');
            }

            if (order === '') {
                sortBy = [];
            } else {
                sortBy = [order + sortField];
                el.attr('sort-position', 0);
            }
        } else {
            // multiple
            if (order === '+') {
                el.removeClass('sortby-desc-column fa-sort-desc');
                el.addClass('sortby-asc-column fa-sort-asc');
            } else if (order === '-') {
                el.removeClass('sortby-asc-column fa-sort-asc');
                el.addClass('sortby-desc-column fa-sort-desc');
            } else {
                el.removeClass('sortby-asc-column sortby-desc-column fa-sort-asc fa-sort-desc');
                el.addClass('fa-sort');
                el.attr('sort-position', null);
            }

            if (i >= 0) {
                if (order === '') {
                    sortBy.splice(i, 1);
                    el.empty().attr('sort-position', null);

                    // reorder previous
                    $.each(headers, function (n, el) {
                        let sorter = $(el);
                        if (sorter.length) {
                            let pos = parseInt(sorter.attr('sort-position') || -1);

                            if (pos > i) {
                                --pos;
                                sorter.attr('sort-position', pos);
                            }
                        }
                    });
                } else {
                    sortBy[i] = order + sortField;
                    el.attr('sort-position', i);
                }
            } else {
                sortBy.push(order + sortField);
                el.attr('sort-position', sortBy.length - 1);
            }

            // assign order
            $.each(headers, function (n, el) {
                let sorter = $(el).children('span.column-sorter');
                if (sorter.length) {
                    let pos = parseInt(sorter.attr('sort-position') || -1);

                    if (pos >= 0 && sortBy.length > 1) {
                        sorter.text(EXPONENT_MAP[pos] || '');
                    } else {
                        sorter.text('');
                    }
                }
            });
        }

        // update user columns setting
        for (let i = 0; i < this.selectedColumns.length; ++i) {
            let sorter = $(headers[i]).children('span.column-sorter');
            let pos = sorter.attr('sort-position');

            if (sorter.hasClass('sortby-asc-column')) {
                this.selectedColumns[i].sort_by = '+' + pos;
            } else if (sorter.hasClass('sortby-desc-column')) {
                this.selectedColumns[i].sort_by = '-' + pos;
            } else {
                this.selectedColumns[i].sort_by = null;
            }
        }

        // reset and fetch collection
        this.collection.fetch({
            reset: true, data: {
                sort_by: sortBy,
                more: Math.max(this.capacity() + 1, 30)
            }
        });

        // and save them
        if (this.getUserSettingName()) {
            window.application.updateUserSetting(
                this.getUserSettingName(),
                this.selectedColumns,
                this.getUserSettingVersion());
        }
    },

    onWindowLostFocus: function (e) {
        if (e.target !== window) {
            return false;
        }

        if (this.controlKeyDown) {
            this.controlKeyDown = false;
            this.highlightLabels(false);

            return true;
        }
    },

    onKeyDown: function (e) {
        if (e.key === 'Control') {
            if (!window.application.main.isForeground(this)) {
                return false;
            }

            if (!this.controlKeyDown) {
                this.controlKeyDown = true;
                this.highlightLabels(true);
            }
        } else if (e.key === 'Escape') {
            // hide the context menu on ESCAPE key (and the glass-pane)
            window.application.main.glassPane('destroy');
            this.ui.add_column_menu.hide();
        }
    },

    onKeyUp: function (e) {
        if (e.key === 'Control') {
            if (this.controlKeyDown) {
                this.controlKeyDown = false;
                this.highlightLabels(false);
            }
        }
    },

    onClickHead: function (e) {
        let el = $(e.target);
        let parent = null;

        if (el.is('th')) {
            parent = el;
            el = el.children('div').children();
        } else if (el.is('th div span')) {
            parent = el.parent('div').parent('th');
        }

        let columnName = parent && parent.length ? parent.attr('name') : undefined;
        if (!parent || !el || !columnName) {
            return;
        }

        let columns = this.getOption('columns') || {};
        if (!(columnName in columns)) {
            return;
        }

        if (columns[columnName].type === "checkbox") {
            let checkbox = el;

            // checkbox.parent().css('background-color', 'initial');


            if (checkbox.hasClass('fa-square-o')) {
                checkbox.removeClass('fa-square-o');
                checkbox.addClass('fa-check-square-o');

                // check every ones
                this.ui.tbody.children('tr').children('td[name=' + columnName + ']').children('span.fa-square-o')
                    .removeClass('fa-square-o')
                    .addClass('fa-check-square-o');

                columns[columnName].autoSelect = true;
                columns[columnName].selection = true;
            } else {
                checkbox.removeClass('fa-check-square-o').removeClass('fa-minus-square-o');
                checkbox.addClass('fa-square-o');

                // uncheck every ones
                this.ui.tbody.children('tr').children('td[name=' + columnName + ']').children('span.fa-check-square-o')
                    .removeClass('fa-check-square-o')
                    .addClass('fa-square-o');

                columns[columnName].autoSelect = false;
                delete columns[columnName].selection;
            }
        }
    },

    onClickBody: function (e) {
        let el = $(e.target);
        let parent = null;

        if (el.is('td')) {
            parent = el;
            el = el.children();
        } else if (el.is('td span')) {
            parent = el.parent('td');
        }

        let columnName = parent && parent.length ? parent.attr('name') : undefined;
        if (!parent || !el || !columnName) {
            return;
        }

        let columns = this.getOption('columns') || {};
        if (!(columnName in columns)) {
            return;
        }

        let id = parseInt(parent.parent('tr').attr('element-id'));

        // manage checkbox columns for selection
        if (columns[columnName].type === "checkbox") {
            let checkbox = el;

            if (checkbox.hasClass('fa-square-o')) {
                checkbox.removeClass('fa-square-o');
                checkbox.addClass('fa-check-square-o');

                if (!(columns[columnName].selection instanceof Object)) {
                    columns[columnName].selection = {
                        'type': columns[columnName].autoSelect ? 'exclude' : 'include',
                        'list': new Set()
                    }
                }

                if (columns[columnName].autoSelect) {
                    columns[columnName].selection.list.delete(id);
                } else {
                    columns[columnName].selection.list.add(id);
                }

                if (columns[columnName].selection.list.size === 0) {
                    columns[columnName].selection = columns[columnName].autoSelect || false;
                }
            } else {
                checkbox.removeClass('fa-check-square-o');
                checkbox.addClass('fa-square-o');

                if (!(columns[columnName].selection instanceof Object)) {
                    columns[columnName].selection = {
                        'type': columns[columnName].autoSelect ? 'exclude' : 'include',
                        'list': new Set()
                    }
                }

                if (columns[columnName].autoSelect) {
                    columns[columnName].selection.list.add(id);
                } else {
                    columns[columnName].selection.list.delete(id);
                }

                if (columns[columnName].selection.list.size === 0) {
                    columns[columnName].selection = columns[columnName].autoSelect || false;
                }
            }

            let headCheckbox = this.ui.thead.children('tr').children('th[name=' + columnName + ']').children('div').children('span');

            if (columns[columnName].selection === false) {
                // headCheckbox.parent().css('background-color', 'initial');
                headCheckbox.removeClass('fa-check-square-o').removeClass('fa-minus-square-o')
                    .addClass('fa-square-o');

                // none check on head
                if (!headCheckbox.hasClass('fa-square-o')) {
                    headCheckbox.removeClass('fa-check-square-o')
                        .addClass('fa-square-o');
                }
            } else if (columns[columnName].selection === true) {
                // headCheckbox.parent().css('background-color', 'initial');
                headCheckbox.removeClass('fa-square-o').removeClass('fa-minus-square-o')
                    .addClass('fa-check-square-o');

                // none check on head
                if (!headCheckbox.hasClass('fa-check-square-o')) {
                    headCheckbox.removeClass('fa-square-o')
                        .addClass('fa-check-square-o');
                }
            } else {
                // headCheckbox.parent().css('background-color', '#5cb85c');
                headCheckbox.removeClass('fa-square-o')
                    .addClass('fa-minus-square-o');
            }
        }
    },

    /**
     * Get the list or state of selection for a compatible column.
     * @param columnName Column name.
     * @returns {term: string, op: string, value: Array} Boolean or a Object. true mean all objects are selected, false none.
     */
    getSelection: function (columnName) {
        let columns = this.getOption('columns') || {};
        if (!(columnName in columns)) {
            return false;
        }

        if (columns[columnName].type === "checkbox") {
            if (columns[columnName].selection instanceof Object) {
                return {
                    'term': 'id',
                    'op': columns[columnName].selection.type === 'include' ? 'in' : 'notin',
                    'value': Array.from(columns[columnName].selection.list)
                }
            } else {
                return columns[columnName].selection || false;
            }
        } else {
            return false;
        }
    }
});

module.exports = View;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 7 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(global) {var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;//     Backbone.js 1.3.3

//     (c) 2010-2016 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
//     Backbone may be freely distributed under the MIT license.
//     For all details and documentation:
//     http://backbonejs.org

(function(factory) {

  // Establish the root object, `window` (`self`) in the browser, or `global` on the server.
  // We use `self` instead of `window` for `WebWorker` support.
  var root = (typeof self == 'object' && self.self === self && self) ||
            (typeof global == 'object' && global.global === global && global);

  // Set up Backbone appropriately for the environment. Start with AMD.
  if (true) {
    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(0), __webpack_require__(27), exports], __WEBPACK_AMD_DEFINE_RESULT__ = (function(_, $, exports) {
      // Export global even in AMD case in case this script is loaded with
      // others that may still expect a global Backbone.
      root.Backbone = factory(root, exports, _, $);
    }).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));

  // Next for Node.js or CommonJS. jQuery may not be needed as a module.
  } else if (typeof exports !== 'undefined') {
    var _ = require('underscore'), $;
    try { $ = require('jquery'); } catch (e) {}
    factory(root, exports, _, $);

  // Finally, as a browser global.
  } else {
    root.Backbone = factory(root, {}, root._, (root.jQuery || root.Zepto || root.ender || root.$));
  }

})(function(root, Backbone, _, $) {

  // Initial Setup
  // -------------

  // Save the previous value of the `Backbone` variable, so that it can be
  // restored later on, if `noConflict` is used.
  var previousBackbone = root.Backbone;

  // Create a local reference to a common array method we'll want to use later.
  var slice = Array.prototype.slice;

  // Current version of the library. Keep in sync with `package.json`.
  Backbone.VERSION = '1.3.3';

  // For Backbone's purposes, jQuery, Zepto, Ender, or My Library (kidding) owns
  // the `$` variable.
  Backbone.$ = $;

  // Runs Backbone.js in *noConflict* mode, returning the `Backbone` variable
  // to its previous owner. Returns a reference to this Backbone object.
  Backbone.noConflict = function() {
    root.Backbone = previousBackbone;
    return this;
  };

  // Turn on `emulateHTTP` to support legacy HTTP servers. Setting this option
  // will fake `"PATCH"`, `"PUT"` and `"DELETE"` requests via the `_method` parameter and
  // set a `X-Http-Method-Override` header.
  Backbone.emulateHTTP = false;

  // Turn on `emulateJSON` to support legacy servers that can't deal with direct
  // `application/json` requests ... this will encode the body as
  // `application/x-www-form-urlencoded` instead and will send the model in a
  // form param named `model`.
  Backbone.emulateJSON = false;

  // Proxy Backbone class methods to Underscore functions, wrapping the model's
  // `attributes` object or collection's `models` array behind the scenes.
  //
  // collection.filter(function(model) { return model.get('age') > 10 });
  // collection.each(this.addView);
  //
  // `Function#apply` can be slow so we use the method's arg count, if we know it.
  var addMethod = function(length, method, attribute) {
    switch (length) {
      case 1: return function() {
        return _[method](this[attribute]);
      };
      case 2: return function(value) {
        return _[method](this[attribute], value);
      };
      case 3: return function(iteratee, context) {
        return _[method](this[attribute], cb(iteratee, this), context);
      };
      case 4: return function(iteratee, defaultVal, context) {
        return _[method](this[attribute], cb(iteratee, this), defaultVal, context);
      };
      default: return function() {
        var args = slice.call(arguments);
        args.unshift(this[attribute]);
        return _[method].apply(_, args);
      };
    }
  };
  var addUnderscoreMethods = function(Class, methods, attribute) {
    _.each(methods, function(length, method) {
      if (_[method]) Class.prototype[method] = addMethod(length, method, attribute);
    });
  };

  // Support `collection.sortBy('attr')` and `collection.findWhere({id: 1})`.
  var cb = function(iteratee, instance) {
    if (_.isFunction(iteratee)) return iteratee;
    if (_.isObject(iteratee) && !instance._isModel(iteratee)) return modelMatcher(iteratee);
    if (_.isString(iteratee)) return function(model) { return model.get(iteratee); };
    return iteratee;
  };
  var modelMatcher = function(attrs) {
    var matcher = _.matches(attrs);
    return function(model) {
      return matcher(model.attributes);
    };
  };

  // Backbone.Events
  // ---------------

  // A module that can be mixed in to *any object* in order to provide it with
  // a custom event channel. You may bind a callback to an event with `on` or
  // remove with `off`; `trigger`-ing an event fires all callbacks in
  // succession.
  //
  //     var object = {};
  //     _.extend(object, Backbone.Events);
  //     object.on('expand', function(){ alert('expanded'); });
  //     object.trigger('expand');
  //
  var Events = Backbone.Events = {};

  // Regular expression used to split event strings.
  var eventSplitter = /\s+/;

  // Iterates over the standard `event, callback` (as well as the fancy multiple
  // space-separated events `"change blur", callback` and jQuery-style event
  // maps `{event: callback}`).
  var eventsApi = function(iteratee, events, name, callback, opts) {
    var i = 0, names;
    if (name && typeof name === 'object') {
      // Handle event maps.
      if (callback !== void 0 && 'context' in opts && opts.context === void 0) opts.context = callback;
      for (names = _.keys(name); i < names.length ; i++) {
        events = eventsApi(iteratee, events, names[i], name[names[i]], opts);
      }
    } else if (name && eventSplitter.test(name)) {
      // Handle space-separated event names by delegating them individually.
      for (names = name.split(eventSplitter); i < names.length; i++) {
        events = iteratee(events, names[i], callback, opts);
      }
    } else {
      // Finally, standard events.
      events = iteratee(events, name, callback, opts);
    }
    return events;
  };

  // Bind an event to a `callback` function. Passing `"all"` will bind
  // the callback to all events fired.
  Events.on = function(name, callback, context) {
    return internalOn(this, name, callback, context);
  };

  // Guard the `listening` argument from the public API.
  var internalOn = function(obj, name, callback, context, listening) {
    obj._events = eventsApi(onApi, obj._events || {}, name, callback, {
      context: context,
      ctx: obj,
      listening: listening
    });

    if (listening) {
      var listeners = obj._listeners || (obj._listeners = {});
      listeners[listening.id] = listening;
    }

    return obj;
  };

  // Inversion-of-control versions of `on`. Tell *this* object to listen to
  // an event in another object... keeping track of what it's listening to
  // for easier unbinding later.
  Events.listenTo = function(obj, name, callback) {
    if (!obj) return this;
    var id = obj._listenId || (obj._listenId = _.uniqueId('l'));
    var listeningTo = this._listeningTo || (this._listeningTo = {});
    var listening = listeningTo[id];

    // This object is not listening to any other events on `obj` yet.
    // Setup the necessary references to track the listening callbacks.
    if (!listening) {
      var thisId = this._listenId || (this._listenId = _.uniqueId('l'));
      listening = listeningTo[id] = {obj: obj, objId: id, id: thisId, listeningTo: listeningTo, count: 0};
    }

    // Bind callbacks on obj, and keep track of them on listening.
    internalOn(obj, name, callback, this, listening);
    return this;
  };

  // The reducing API that adds a callback to the `events` object.
  var onApi = function(events, name, callback, options) {
    if (callback) {
      var handlers = events[name] || (events[name] = []);
      var context = options.context, ctx = options.ctx, listening = options.listening;
      if (listening) listening.count++;

      handlers.push({callback: callback, context: context, ctx: context || ctx, listening: listening});
    }
    return events;
  };

  // Remove one or many callbacks. If `context` is null, removes all
  // callbacks with that function. If `callback` is null, removes all
  // callbacks for the event. If `name` is null, removes all bound
  // callbacks for all events.
  Events.off = function(name, callback, context) {
    if (!this._events) return this;
    this._events = eventsApi(offApi, this._events, name, callback, {
      context: context,
      listeners: this._listeners
    });
    return this;
  };

  // Tell this object to stop listening to either specific events ... or
  // to every object it's currently listening to.
  Events.stopListening = function(obj, name, callback) {
    var listeningTo = this._listeningTo;
    if (!listeningTo) return this;

    var ids = obj ? [obj._listenId] : _.keys(listeningTo);

    for (var i = 0; i < ids.length; i++) {
      var listening = listeningTo[ids[i]];

      // If listening doesn't exist, this object is not currently
      // listening to obj. Break out early.
      if (!listening) break;

      listening.obj.off(name, callback, this);
    }

    return this;
  };

  // The reducing API that removes a callback from the `events` object.
  var offApi = function(events, name, callback, options) {
    if (!events) return;

    var i = 0, listening;
    var context = options.context, listeners = options.listeners;

    // Delete all events listeners and "drop" events.
    if (!name && !callback && !context) {
      var ids = _.keys(listeners);
      for (; i < ids.length; i++) {
        listening = listeners[ids[i]];
        delete listeners[listening.id];
        delete listening.listeningTo[listening.objId];
      }
      return;
    }

    var names = name ? [name] : _.keys(events);
    for (; i < names.length; i++) {
      name = names[i];
      var handlers = events[name];

      // Bail out if there are no events stored.
      if (!handlers) break;

      // Replace events if there are any remaining.  Otherwise, clean up.
      var remaining = [];
      for (var j = 0; j < handlers.length; j++) {
        var handler = handlers[j];
        if (
          callback && callback !== handler.callback &&
            callback !== handler.callback._callback ||
              context && context !== handler.context
        ) {
          remaining.push(handler);
        } else {
          listening = handler.listening;
          if (listening && --listening.count === 0) {
            delete listeners[listening.id];
            delete listening.listeningTo[listening.objId];
          }
        }
      }

      // Update tail event if the list has any events.  Otherwise, clean up.
      if (remaining.length) {
        events[name] = remaining;
      } else {
        delete events[name];
      }
    }
    return events;
  };

  // Bind an event to only be triggered a single time. After the first time
  // the callback is invoked, its listener will be removed. If multiple events
  // are passed in using the space-separated syntax, the handler will fire
  // once for each event, not once for a combination of all events.
  Events.once = function(name, callback, context) {
    // Map the event into a `{event: once}` object.
    var events = eventsApi(onceMap, {}, name, callback, _.bind(this.off, this));
    if (typeof name === 'string' && context == null) callback = void 0;
    return this.on(events, callback, context);
  };

  // Inversion-of-control versions of `once`.
  Events.listenToOnce = function(obj, name, callback) {
    // Map the event into a `{event: once}` object.
    var events = eventsApi(onceMap, {}, name, callback, _.bind(this.stopListening, this, obj));
    return this.listenTo(obj, events);
  };

  // Reduces the event callbacks into a map of `{event: onceWrapper}`.
  // `offer` unbinds the `onceWrapper` after it has been called.
  var onceMap = function(map, name, callback, offer) {
    if (callback) {
      var once = map[name] = _.once(function() {
        offer(name, once);
        callback.apply(this, arguments);
      });
      once._callback = callback;
    }
    return map;
  };

  // Trigger one or many events, firing all bound callbacks. Callbacks are
  // passed the same arguments as `trigger` is, apart from the event name
  // (unless you're listening on `"all"`, which will cause your callback to
  // receive the true name of the event as the first argument).
  Events.trigger = function(name) {
    if (!this._events) return this;

    var length = Math.max(0, arguments.length - 1);
    var args = Array(length);
    for (var i = 0; i < length; i++) args[i] = arguments[i + 1];

    eventsApi(triggerApi, this._events, name, void 0, args);
    return this;
  };

  // Handles triggering the appropriate event callbacks.
  var triggerApi = function(objEvents, name, callback, args) {
    if (objEvents) {
      var events = objEvents[name];
      var allEvents = objEvents.all;
      if (events && allEvents) allEvents = allEvents.slice();
      if (events) triggerEvents(events, args);
      if (allEvents) triggerEvents(allEvents, [name].concat(args));
    }
    return objEvents;
  };

  // A difficult-to-believe, but optimized internal dispatch function for
  // triggering events. Tries to keep the usual cases speedy (most internal
  // Backbone events have 3 arguments).
  var triggerEvents = function(events, args) {
    var ev, i = -1, l = events.length, a1 = args[0], a2 = args[1], a3 = args[2];
    switch (args.length) {
      case 0: while (++i < l) (ev = events[i]).callback.call(ev.ctx); return;
      case 1: while (++i < l) (ev = events[i]).callback.call(ev.ctx, a1); return;
      case 2: while (++i < l) (ev = events[i]).callback.call(ev.ctx, a1, a2); return;
      case 3: while (++i < l) (ev = events[i]).callback.call(ev.ctx, a1, a2, a3); return;
      default: while (++i < l) (ev = events[i]).callback.apply(ev.ctx, args); return;
    }
  };

  // Aliases for backwards compatibility.
  Events.bind   = Events.on;
  Events.unbind = Events.off;

  // Allow the `Backbone` object to serve as a global event bus, for folks who
  // want global "pubsub" in a convenient place.
  _.extend(Backbone, Events);

  // Backbone.Model
  // --------------

  // Backbone **Models** are the basic data object in the framework --
  // frequently representing a row in a table in a database on your server.
  // A discrete chunk of data and a bunch of useful, related methods for
  // performing computations and transformations on that data.

  // Create a new model with the specified attributes. A client id (`cid`)
  // is automatically generated and assigned for you.
  var Model = Backbone.Model = function(attributes, options) {
    var attrs = attributes || {};
    options || (options = {});
    this.cid = _.uniqueId(this.cidPrefix);
    this.attributes = {};
    if (options.collection) this.collection = options.collection;
    if (options.parse) attrs = this.parse(attrs, options) || {};
    var defaults = _.result(this, 'defaults');
    attrs = _.defaults(_.extend({}, defaults, attrs), defaults);
    this.set(attrs, options);
    this.changed = {};
    this.initialize.apply(this, arguments);
  };

  // Attach all inheritable methods to the Model prototype.
  _.extend(Model.prototype, Events, {

    // A hash of attributes whose current and previous value differ.
    changed: null,

    // The value returned during the last failed validation.
    validationError: null,

    // The default name for the JSON `id` attribute is `"id"`. MongoDB and
    // CouchDB users may want to set this to `"_id"`.
    idAttribute: 'id',

    // The prefix is used to create the client id which is used to identify models locally.
    // You may want to override this if you're experiencing name clashes with model ids.
    cidPrefix: 'c',

    // Initialize is an empty function by default. Override it with your own
    // initialization logic.
    initialize: function(){},

    // Return a copy of the model's `attributes` object.
    toJSON: function(options) {
      return _.clone(this.attributes);
    },

    // Proxy `Backbone.sync` by default -- but override this if you need
    // custom syncing semantics for *this* particular model.
    sync: function() {
      return Backbone.sync.apply(this, arguments);
    },

    // Get the value of an attribute.
    get: function(attr) {
      return this.attributes[attr];
    },

    // Get the HTML-escaped value of an attribute.
    escape: function(attr) {
      return _.escape(this.get(attr));
    },

    // Returns `true` if the attribute contains a value that is not null
    // or undefined.
    has: function(attr) {
      return this.get(attr) != null;
    },

    // Special-cased proxy to underscore's `_.matches` method.
    matches: function(attrs) {
      return !!_.iteratee(attrs, this)(this.attributes);
    },

    // Set a hash of model attributes on the object, firing `"change"`. This is
    // the core primitive operation of a model, updating the data and notifying
    // anyone who needs to know about the change in state. The heart of the beast.
    set: function(key, val, options) {
      if (key == null) return this;

      // Handle both `"key", value` and `{key: value}` -style arguments.
      var attrs;
      if (typeof key === 'object') {
        attrs = key;
        options = val;
      } else {
        (attrs = {})[key] = val;
      }

      options || (options = {});

      // Run validation.
      if (!this._validate(attrs, options)) return false;

      // Extract attributes and options.
      var unset      = options.unset;
      var silent     = options.silent;
      var changes    = [];
      var changing   = this._changing;
      this._changing = true;

      if (!changing) {
        this._previousAttributes = _.clone(this.attributes);
        this.changed = {};
      }

      var current = this.attributes;
      var changed = this.changed;
      var prev    = this._previousAttributes;

      // For each `set` attribute, update or delete the current value.
      for (var attr in attrs) {
        val = attrs[attr];
        if (!_.isEqual(current[attr], val)) changes.push(attr);
        if (!_.isEqual(prev[attr], val)) {
          changed[attr] = val;
        } else {
          delete changed[attr];
        }
        unset ? delete current[attr] : current[attr] = val;
      }

      // Update the `id`.
      if (this.idAttribute in attrs) this.id = this.get(this.idAttribute);

      // Trigger all relevant attribute changes.
      if (!silent) {
        if (changes.length) this._pending = options;
        for (var i = 0; i < changes.length; i++) {
          this.trigger('change:' + changes[i], this, current[changes[i]], options);
        }
      }

      // You might be wondering why there's a `while` loop here. Changes can
      // be recursively nested within `"change"` events.
      if (changing) return this;
      if (!silent) {
        while (this._pending) {
          options = this._pending;
          this._pending = false;
          this.trigger('change', this, options);
        }
      }
      this._pending = false;
      this._changing = false;
      return this;
    },

    // Remove an attribute from the model, firing `"change"`. `unset` is a noop
    // if the attribute doesn't exist.
    unset: function(attr, options) {
      return this.set(attr, void 0, _.extend({}, options, {unset: true}));
    },

    // Clear all attributes on the model, firing `"change"`.
    clear: function(options) {
      var attrs = {};
      for (var key in this.attributes) attrs[key] = void 0;
      return this.set(attrs, _.extend({}, options, {unset: true}));
    },

    // Determine if the model has changed since the last `"change"` event.
    // If you specify an attribute name, determine if that attribute has changed.
    hasChanged: function(attr) {
      if (attr == null) return !_.isEmpty(this.changed);
      return _.has(this.changed, attr);
    },

    // Return an object containing all the attributes that have changed, or
    // false if there are no changed attributes. Useful for determining what
    // parts of a view need to be updated and/or what attributes need to be
    // persisted to the server. Unset attributes will be set to undefined.
    // You can also pass an attributes object to diff against the model,
    // determining if there *would be* a change.
    changedAttributes: function(diff) {
      if (!diff) return this.hasChanged() ? _.clone(this.changed) : false;
      var old = this._changing ? this._previousAttributes : this.attributes;
      var changed = {};
      for (var attr in diff) {
        var val = diff[attr];
        if (_.isEqual(old[attr], val)) continue;
        changed[attr] = val;
      }
      return _.size(changed) ? changed : false;
    },

    // Get the previous value of an attribute, recorded at the time the last
    // `"change"` event was fired.
    previous: function(attr) {
      if (attr == null || !this._previousAttributes) return null;
      return this._previousAttributes[attr];
    },

    // Get all of the attributes of the model at the time of the previous
    // `"change"` event.
    previousAttributes: function() {
      return _.clone(this._previousAttributes);
    },

    // Fetch the model from the server, merging the response with the model's
    // local attributes. Any changed attributes will trigger a "change" event.
    fetch: function(options) {
      options = _.extend({parse: true}, options);
      var model = this;
      var success = options.success;
      options.success = function(resp) {
        var serverAttrs = options.parse ? model.parse(resp, options) : resp;
        if (!model.set(serverAttrs, options)) return false;
        if (success) success.call(options.context, model, resp, options);
        model.trigger('sync', model, resp, options);
      };
      wrapError(this, options);
      return this.sync('read', this, options);
    },

    // Set a hash of model attributes, and sync the model to the server.
    // If the server returns an attributes hash that differs, the model's
    // state will be `set` again.
    save: function(key, val, options) {
      // Handle both `"key", value` and `{key: value}` -style arguments.
      var attrs;
      if (key == null || typeof key === 'object') {
        attrs = key;
        options = val;
      } else {
        (attrs = {})[key] = val;
      }

      options = _.extend({validate: true, parse: true}, options);
      var wait = options.wait;

      // If we're not waiting and attributes exist, save acts as
      // `set(attr).save(null, opts)` with validation. Otherwise, check if
      // the model will be valid when the attributes, if any, are set.
      if (attrs && !wait) {
        if (!this.set(attrs, options)) return false;
      } else if (!this._validate(attrs, options)) {
        return false;
      }

      // After a successful server-side save, the client is (optionally)
      // updated with the server-side state.
      var model = this;
      var success = options.success;
      var attributes = this.attributes;
      options.success = function(resp) {
        // Ensure attributes are restored during synchronous saves.
        model.attributes = attributes;
        var serverAttrs = options.parse ? model.parse(resp, options) : resp;
        if (wait) serverAttrs = _.extend({}, attrs, serverAttrs);
        if (serverAttrs && !model.set(serverAttrs, options)) return false;
        if (success) success.call(options.context, model, resp, options);
        model.trigger('sync', model, resp, options);
      };
      wrapError(this, options);

      // Set temporary attributes if `{wait: true}` to properly find new ids.
      if (attrs && wait) this.attributes = _.extend({}, attributes, attrs);

      var method = this.isNew() ? 'create' : (options.patch ? 'patch' : 'update');
      if (method === 'patch' && !options.attrs) options.attrs = attrs;
      var xhr = this.sync(method, this, options);

      // Restore attributes.
      this.attributes = attributes;

      return xhr;
    },

    // Destroy this model on the server if it was already persisted.
    // Optimistically removes the model from its collection, if it has one.
    // If `wait: true` is passed, waits for the server to respond before removal.
    destroy: function(options) {
      options = options ? _.clone(options) : {};
      var model = this;
      var success = options.success;
      var wait = options.wait;

      var destroy = function() {
        model.stopListening();
        model.trigger('destroy', model, model.collection, options);
      };

      options.success = function(resp) {
        if (wait) destroy();
        if (success) success.call(options.context, model, resp, options);
        if (!model.isNew()) model.trigger('sync', model, resp, options);
      };

      var xhr = false;
      if (this.isNew()) {
        _.defer(options.success);
      } else {
        wrapError(this, options);
        xhr = this.sync('delete', this, options);
      }
      if (!wait) destroy();
      return xhr;
    },

    // Default URL for the model's representation on the server -- if you're
    // using Backbone's restful methods, override this to change the endpoint
    // that will be called.
    url: function() {
      var base =
        _.result(this, 'urlRoot') ||
        _.result(this.collection, 'url') ||
        urlError();
      if (this.isNew()) return base;
      var id = this.get(this.idAttribute);
      return base.replace(/[^\/]$/, '$&/') + encodeURIComponent(id);
    },

    // **parse** converts a response into the hash of attributes to be `set` on
    // the model. The default implementation is just to pass the response along.
    parse: function(resp, options) {
      return resp;
    },

    // Create a new model with identical attributes to this one.
    clone: function() {
      return new this.constructor(this.attributes);
    },

    // A model is new if it has never been saved to the server, and lacks an id.
    isNew: function() {
      return !this.has(this.idAttribute);
    },

    // Check if the model is currently in a valid state.
    isValid: function(options) {
      return this._validate({}, _.extend({}, options, {validate: true}));
    },

    // Run validation against the next complete set of model attributes,
    // returning `true` if all is well. Otherwise, fire an `"invalid"` event.
    _validate: function(attrs, options) {
      if (!options.validate || !this.validate) return true;
      attrs = _.extend({}, this.attributes, attrs);
      var error = this.validationError = this.validate(attrs, options) || null;
      if (!error) return true;
      this.trigger('invalid', this, error, _.extend(options, {validationError: error}));
      return false;
    }

  });

  // Underscore methods that we want to implement on the Model, mapped to the
  // number of arguments they take.
  var modelMethods = {keys: 1, values: 1, pairs: 1, invert: 1, pick: 0,
      omit: 0, chain: 1, isEmpty: 1};

  // Mix in each Underscore method as a proxy to `Model#attributes`.
  addUnderscoreMethods(Model, modelMethods, 'attributes');

  // Backbone.Collection
  // -------------------

  // If models tend to represent a single row of data, a Backbone Collection is
  // more analogous to a table full of data ... or a small slice or page of that
  // table, or a collection of rows that belong together for a particular reason
  // -- all of the messages in this particular folder, all of the documents
  // belonging to this particular author, and so on. Collections maintain
  // indexes of their models, both in order, and for lookup by `id`.

  // Create a new **Collection**, perhaps to contain a specific type of `model`.
  // If a `comparator` is specified, the Collection will maintain
  // its models in sort order, as they're added and removed.
  var Collection = Backbone.Collection = function(models, options) {
    options || (options = {});
    if (options.model) this.model = options.model;
    if (options.comparator !== void 0) this.comparator = options.comparator;
    this._reset();
    this.initialize.apply(this, arguments);
    if (models) this.reset(models, _.extend({silent: true}, options));
  };

  // Default options for `Collection#set`.
  var setOptions = {add: true, remove: true, merge: true};
  var addOptions = {add: true, remove: false};

  // Splices `insert` into `array` at index `at`.
  var splice = function(array, insert, at) {
    at = Math.min(Math.max(at, 0), array.length);
    var tail = Array(array.length - at);
    var length = insert.length;
    var i;
    for (i = 0; i < tail.length; i++) tail[i] = array[i + at];
    for (i = 0; i < length; i++) array[i + at] = insert[i];
    for (i = 0; i < tail.length; i++) array[i + length + at] = tail[i];
  };

  // Define the Collection's inheritable methods.
  _.extend(Collection.prototype, Events, {

    // The default model for a collection is just a **Backbone.Model**.
    // This should be overridden in most cases.
    model: Model,

    // Initialize is an empty function by default. Override it with your own
    // initialization logic.
    initialize: function(){},

    // The JSON representation of a Collection is an array of the
    // models' attributes.
    toJSON: function(options) {
      return this.map(function(model) { return model.toJSON(options); });
    },

    // Proxy `Backbone.sync` by default.
    sync: function() {
      return Backbone.sync.apply(this, arguments);
    },

    // Add a model, or list of models to the set. `models` may be Backbone
    // Models or raw JavaScript objects to be converted to Models, or any
    // combination of the two.
    add: function(models, options) {
      return this.set(models, _.extend({merge: false}, options, addOptions));
    },

    // Remove a model, or a list of models from the set.
    remove: function(models, options) {
      options = _.extend({}, options);
      var singular = !_.isArray(models);
      models = singular ? [models] : models.slice();
      var removed = this._removeModels(models, options);
      if (!options.silent && removed.length) {
        options.changes = {added: [], merged: [], removed: removed};
        this.trigger('update', this, options);
      }
      return singular ? removed[0] : removed;
    },

    // Update a collection by `set`-ing a new list of models, adding new ones,
    // removing models that are no longer present, and merging models that
    // already exist in the collection, as necessary. Similar to **Model#set**,
    // the core operation for updating the data contained by the collection.
    set: function(models, options) {
      if (models == null) return;

      options = _.extend({}, setOptions, options);
      if (options.parse && !this._isModel(models)) {
        models = this.parse(models, options) || [];
      }

      var singular = !_.isArray(models);
      models = singular ? [models] : models.slice();

      var at = options.at;
      if (at != null) at = +at;
      if (at > this.length) at = this.length;
      if (at < 0) at += this.length + 1;

      var set = [];
      var toAdd = [];
      var toMerge = [];
      var toRemove = [];
      var modelMap = {};

      var add = options.add;
      var merge = options.merge;
      var remove = options.remove;

      var sort = false;
      var sortable = this.comparator && at == null && options.sort !== false;
      var sortAttr = _.isString(this.comparator) ? this.comparator : null;

      // Turn bare objects into model references, and prevent invalid models
      // from being added.
      var model, i;
      for (i = 0; i < models.length; i++) {
        model = models[i];

        // If a duplicate is found, prevent it from being added and
        // optionally merge it into the existing model.
        var existing = this.get(model);
        if (existing) {
          if (merge && model !== existing) {
            var attrs = this._isModel(model) ? model.attributes : model;
            if (options.parse) attrs = existing.parse(attrs, options);
            existing.set(attrs, options);
            toMerge.push(existing);
            if (sortable && !sort) sort = existing.hasChanged(sortAttr);
          }
          if (!modelMap[existing.cid]) {
            modelMap[existing.cid] = true;
            set.push(existing);
          }
          models[i] = existing;

        // If this is a new, valid model, push it to the `toAdd` list.
        } else if (add) {
          model = models[i] = this._prepareModel(model, options);
          if (model) {
            toAdd.push(model);
            this._addReference(model, options);
            modelMap[model.cid] = true;
            set.push(model);
          }
        }
      }

      // Remove stale models.
      if (remove) {
        for (i = 0; i < this.length; i++) {
          model = this.models[i];
          if (!modelMap[model.cid]) toRemove.push(model);
        }
        if (toRemove.length) this._removeModels(toRemove, options);
      }

      // See if sorting is needed, update `length` and splice in new models.
      var orderChanged = false;
      var replace = !sortable && add && remove;
      if (set.length && replace) {
        orderChanged = this.length !== set.length || _.some(this.models, function(m, index) {
          return m !== set[index];
        });
        this.models.length = 0;
        splice(this.models, set, 0);
        this.length = this.models.length;
      } else if (toAdd.length) {
        if (sortable) sort = true;
        splice(this.models, toAdd, at == null ? this.length : at);
        this.length = this.models.length;
      }

      // Silently sort the collection if appropriate.
      if (sort) this.sort({silent: true});

      // Unless silenced, it's time to fire all appropriate add/sort/update events.
      if (!options.silent) {
        for (i = 0; i < toAdd.length; i++) {
          if (at != null) options.index = at + i;
          model = toAdd[i];
          model.trigger('add', model, this, options);
        }
        if (sort || orderChanged) this.trigger('sort', this, options);
        if (toAdd.length || toRemove.length || toMerge.length) {
          options.changes = {
            added: toAdd,
            removed: toRemove,
            merged: toMerge
          };
          this.trigger('update', this, options);
        }
      }

      // Return the added (or merged) model (or models).
      return singular ? models[0] : models;
    },

    // When you have more items than you want to add or remove individually,
    // you can reset the entire set with a new list of models, without firing
    // any granular `add` or `remove` events. Fires `reset` when finished.
    // Useful for bulk operations and optimizations.
    reset: function(models, options) {
      options = options ? _.clone(options) : {};
      for (var i = 0; i < this.models.length; i++) {
        this._removeReference(this.models[i], options);
      }
      options.previousModels = this.models;
      this._reset();
      models = this.add(models, _.extend({silent: true}, options));
      if (!options.silent) this.trigger('reset', this, options);
      return models;
    },

    // Add a model to the end of the collection.
    push: function(model, options) {
      return this.add(model, _.extend({at: this.length}, options));
    },

    // Remove a model from the end of the collection.
    pop: function(options) {
      var model = this.at(this.length - 1);
      return this.remove(model, options);
    },

    // Add a model to the beginning of the collection.
    unshift: function(model, options) {
      return this.add(model, _.extend({at: 0}, options));
    },

    // Remove a model from the beginning of the collection.
    shift: function(options) {
      var model = this.at(0);
      return this.remove(model, options);
    },

    // Slice out a sub-array of models from the collection.
    slice: function() {
      return slice.apply(this.models, arguments);
    },

    // Get a model from the set by id, cid, model object with id or cid
    // properties, or an attributes object that is transformed through modelId.
    get: function(obj) {
      if (obj == null) return void 0;
      return this._byId[obj] ||
        this._byId[this.modelId(obj.attributes || obj)] ||
        obj.cid && this._byId[obj.cid];
    },

    // Returns `true` if the model is in the collection.
    has: function(obj) {
      return this.get(obj) != null;
    },

    // Get the model at the given index.
    at: function(index) {
      if (index < 0) index += this.length;
      return this.models[index];
    },

    // Return models with matching attributes. Useful for simple cases of
    // `filter`.
    where: function(attrs, first) {
      return this[first ? 'find' : 'filter'](attrs);
    },

    // Return the first model with matching attributes. Useful for simple cases
    // of `find`.
    findWhere: function(attrs) {
      return this.where(attrs, true);
    },

    // Force the collection to re-sort itself. You don't need to call this under
    // normal circumstances, as the set will maintain sort order as each item
    // is added.
    sort: function(options) {
      var comparator = this.comparator;
      if (!comparator) throw new Error('Cannot sort a set without a comparator');
      options || (options = {});

      var length = comparator.length;
      if (_.isFunction(comparator)) comparator = _.bind(comparator, this);

      // Run sort based on type of `comparator`.
      if (length === 1 || _.isString(comparator)) {
        this.models = this.sortBy(comparator);
      } else {
        this.models.sort(comparator);
      }
      if (!options.silent) this.trigger('sort', this, options);
      return this;
    },

    // Pluck an attribute from each model in the collection.
    pluck: function(attr) {
      return this.map(attr + '');
    },

    // Fetch the default set of models for this collection, resetting the
    // collection when they arrive. If `reset: true` is passed, the response
    // data will be passed through the `reset` method instead of `set`.
    fetch: function(options) {
      options = _.extend({parse: true}, options);
      var success = options.success;
      var collection = this;
      options.success = function(resp) {
        var method = options.reset ? 'reset' : 'set';
        collection[method](resp, options);
        if (success) success.call(options.context, collection, resp, options);
        collection.trigger('sync', collection, resp, options);
      };
      wrapError(this, options);
      return this.sync('read', this, options);
    },

    // Create a new instance of a model in this collection. Add the model to the
    // collection immediately, unless `wait: true` is passed, in which case we
    // wait for the server to agree.
    create: function(model, options) {
      options = options ? _.clone(options) : {};
      var wait = options.wait;
      model = this._prepareModel(model, options);
      if (!model) return false;
      if (!wait) this.add(model, options);
      var collection = this;
      var success = options.success;
      options.success = function(m, resp, callbackOpts) {
        if (wait) collection.add(m, callbackOpts);
        if (success) success.call(callbackOpts.context, m, resp, callbackOpts);
      };
      model.save(null, options);
      return model;
    },

    // **parse** converts a response into a list of models to be added to the
    // collection. The default implementation is just to pass it through.
    parse: function(resp, options) {
      return resp;
    },

    // Create a new collection with an identical list of models as this one.
    clone: function() {
      return new this.constructor(this.models, {
        model: this.model,
        comparator: this.comparator
      });
    },

    // Define how to uniquely identify models in the collection.
    modelId: function(attrs) {
      return attrs[this.model.prototype.idAttribute || 'id'];
    },

    // Private method to reset all internal state. Called when the collection
    // is first initialized or reset.
    _reset: function() {
      this.length = 0;
      this.models = [];
      this._byId  = {};
    },

    // Prepare a hash of attributes (or other model) to be added to this
    // collection.
    _prepareModel: function(attrs, options) {
      if (this._isModel(attrs)) {
        if (!attrs.collection) attrs.collection = this;
        return attrs;
      }
      options = options ? _.clone(options) : {};
      options.collection = this;
      var model = new this.model(attrs, options);
      if (!model.validationError) return model;
      this.trigger('invalid', this, model.validationError, options);
      return false;
    },

    // Internal method called by both remove and set.
    _removeModels: function(models, options) {
      var removed = [];
      for (var i = 0; i < models.length; i++) {
        var model = this.get(models[i]);
        if (!model) continue;

        var index = this.indexOf(model);
        this.models.splice(index, 1);
        this.length--;

        // Remove references before triggering 'remove' event to prevent an
        // infinite loop. #3693
        delete this._byId[model.cid];
        var id = this.modelId(model.attributes);
        if (id != null) delete this._byId[id];

        if (!options.silent) {
          options.index = index;
          model.trigger('remove', model, this, options);
        }

        removed.push(model);
        this._removeReference(model, options);
      }
      return removed;
    },

    // Method for checking whether an object should be considered a model for
    // the purposes of adding to the collection.
    _isModel: function(model) {
      return model instanceof Model;
    },

    // Internal method to create a model's ties to a collection.
    _addReference: function(model, options) {
      this._byId[model.cid] = model;
      var id = this.modelId(model.attributes);
      if (id != null) this._byId[id] = model;
      model.on('all', this._onModelEvent, this);
    },

    // Internal method to sever a model's ties to a collection.
    _removeReference: function(model, options) {
      delete this._byId[model.cid];
      var id = this.modelId(model.attributes);
      if (id != null) delete this._byId[id];
      if (this === model.collection) delete model.collection;
      model.off('all', this._onModelEvent, this);
    },

    // Internal method called every time a model in the set fires an event.
    // Sets need to update their indexes when models change ids. All other
    // events simply proxy through. "add" and "remove" events that originate
    // in other collections are ignored.
    _onModelEvent: function(event, model, collection, options) {
      if (model) {
        if ((event === 'add' || event === 'remove') && collection !== this) return;
        if (event === 'destroy') this.remove(model, options);
        if (event === 'change') {
          var prevId = this.modelId(model.previousAttributes());
          var id = this.modelId(model.attributes);
          if (prevId !== id) {
            if (prevId != null) delete this._byId[prevId];
            if (id != null) this._byId[id] = model;
          }
        }
      }
      this.trigger.apply(this, arguments);
    }

  });

  // Underscore methods that we want to implement on the Collection.
  // 90% of the core usefulness of Backbone Collections is actually implemented
  // right here:
  var collectionMethods = {forEach: 3, each: 3, map: 3, collect: 3, reduce: 0,
      foldl: 0, inject: 0, reduceRight: 0, foldr: 0, find: 3, detect: 3, filter: 3,
      select: 3, reject: 3, every: 3, all: 3, some: 3, any: 3, include: 3, includes: 3,
      contains: 3, invoke: 0, max: 3, min: 3, toArray: 1, size: 1, first: 3,
      head: 3, take: 3, initial: 3, rest: 3, tail: 3, drop: 3, last: 3,
      without: 0, difference: 0, indexOf: 3, shuffle: 1, lastIndexOf: 3,
      isEmpty: 1, chain: 1, sample: 3, partition: 3, groupBy: 3, countBy: 3,
      sortBy: 3, indexBy: 3, findIndex: 3, findLastIndex: 3};

  // Mix in each Underscore method as a proxy to `Collection#models`.
  addUnderscoreMethods(Collection, collectionMethods, 'models');

  // Backbone.View
  // -------------

  // Backbone Views are almost more convention than they are actual code. A View
  // is simply a JavaScript object that represents a logical chunk of UI in the
  // DOM. This might be a single item, an entire list, a sidebar or panel, or
  // even the surrounding frame which wraps your whole app. Defining a chunk of
  // UI as a **View** allows you to define your DOM events declaratively, without
  // having to worry about render order ... and makes it easy for the view to
  // react to specific changes in the state of your models.

  // Creating a Backbone.View creates its initial element outside of the DOM,
  // if an existing element is not provided...
  var View = Backbone.View = function(options) {
    this.cid = _.uniqueId('view');
    _.extend(this, _.pick(options, viewOptions));
    this._ensureElement();
    this.initialize.apply(this, arguments);
  };

  // Cached regex to split keys for `delegate`.
  var delegateEventSplitter = /^(\S+)\s*(.*)$/;

  // List of view options to be set as properties.
  var viewOptions = ['model', 'collection', 'el', 'id', 'attributes', 'className', 'tagName', 'events'];

  // Set up all inheritable **Backbone.View** properties and methods.
  _.extend(View.prototype, Events, {

    // The default `tagName` of a View's element is `"div"`.
    tagName: 'div',

    // jQuery delegate for element lookup, scoped to DOM elements within the
    // current view. This should be preferred to global lookups where possible.
    $: function(selector) {
      return this.$el.find(selector);
    },

    // Initialize is an empty function by default. Override it with your own
    // initialization logic.
    initialize: function(){},

    // **render** is the core function that your view should override, in order
    // to populate its element (`this.el`), with the appropriate HTML. The
    // convention is for **render** to always return `this`.
    render: function() {
      return this;
    },

    // Remove this view by taking the element out of the DOM, and removing any
    // applicable Backbone.Events listeners.
    remove: function() {
      this._removeElement();
      this.stopListening();
      return this;
    },

    // Remove this view's element from the document and all event listeners
    // attached to it. Exposed for subclasses using an alternative DOM
    // manipulation API.
    _removeElement: function() {
      this.$el.remove();
    },

    // Change the view's element (`this.el` property) and re-delegate the
    // view's events on the new element.
    setElement: function(element) {
      this.undelegateEvents();
      this._setElement(element);
      this.delegateEvents();
      return this;
    },

    // Creates the `this.el` and `this.$el` references for this view using the
    // given `el`. `el` can be a CSS selector or an HTML string, a jQuery
    // context or an element. Subclasses can override this to utilize an
    // alternative DOM manipulation API and are only required to set the
    // `this.el` property.
    _setElement: function(el) {
      this.$el = el instanceof Backbone.$ ? el : Backbone.$(el);
      this.el = this.$el[0];
    },

    // Set callbacks, where `this.events` is a hash of
    //
    // *{"event selector": "callback"}*
    //
    //     {
    //       'mousedown .title':  'edit',
    //       'click .button':     'save',
    //       'click .open':       function(e) { ... }
    //     }
    //
    // pairs. Callbacks will be bound to the view, with `this` set properly.
    // Uses event delegation for efficiency.
    // Omitting the selector binds the event to `this.el`.
    delegateEvents: function(events) {
      events || (events = _.result(this, 'events'));
      if (!events) return this;
      this.undelegateEvents();
      for (var key in events) {
        var method = events[key];
        if (!_.isFunction(method)) method = this[method];
        if (!method) continue;
        var match = key.match(delegateEventSplitter);
        this.delegate(match[1], match[2], _.bind(method, this));
      }
      return this;
    },

    // Add a single event listener to the view's element (or a child element
    // using `selector`). This only works for delegate-able events: not `focus`,
    // `blur`, and not `change`, `submit`, and `reset` in Internet Explorer.
    delegate: function(eventName, selector, listener) {
      this.$el.on(eventName + '.delegateEvents' + this.cid, selector, listener);
      return this;
    },

    // Clears all callbacks previously bound to the view by `delegateEvents`.
    // You usually don't need to use this, but may wish to if you have multiple
    // Backbone views attached to the same DOM element.
    undelegateEvents: function() {
      if (this.$el) this.$el.off('.delegateEvents' + this.cid);
      return this;
    },

    // A finer-grained `undelegateEvents` for removing a single delegated event.
    // `selector` and `listener` are both optional.
    undelegate: function(eventName, selector, listener) {
      this.$el.off(eventName + '.delegateEvents' + this.cid, selector, listener);
      return this;
    },

    // Produces a DOM element to be assigned to your view. Exposed for
    // subclasses using an alternative DOM manipulation API.
    _createElement: function(tagName) {
      return document.createElement(tagName);
    },

    // Ensure that the View has a DOM element to render into.
    // If `this.el` is a string, pass it through `$()`, take the first
    // matching element, and re-assign it to `el`. Otherwise, create
    // an element from the `id`, `className` and `tagName` properties.
    _ensureElement: function() {
      if (!this.el) {
        var attrs = _.extend({}, _.result(this, 'attributes'));
        if (this.id) attrs.id = _.result(this, 'id');
        if (this.className) attrs['class'] = _.result(this, 'className');
        this.setElement(this._createElement(_.result(this, 'tagName')));
        this._setAttributes(attrs);
      } else {
        this.setElement(_.result(this, 'el'));
      }
    },

    // Set attributes from a hash on this view's element.  Exposed for
    // subclasses using an alternative DOM manipulation API.
    _setAttributes: function(attributes) {
      this.$el.attr(attributes);
    }

  });

  // Backbone.sync
  // -------------

  // Override this function to change the manner in which Backbone persists
  // models to the server. You will be passed the type of request, and the
  // model in question. By default, makes a RESTful Ajax request
  // to the model's `url()`. Some possible customizations could be:
  //
  // * Use `setTimeout` to batch rapid-fire updates into a single request.
  // * Send up the models as XML instead of JSON.
  // * Persist models via WebSockets instead of Ajax.
  //
  // Turn on `Backbone.emulateHTTP` in order to send `PUT` and `DELETE` requests
  // as `POST`, with a `_method` parameter containing the true HTTP method,
  // as well as all requests with the body as `application/x-www-form-urlencoded`
  // instead of `application/json` with the model in a param named `model`.
  // Useful when interfacing with server-side languages like **PHP** that make
  // it difficult to read the body of `PUT` requests.
  Backbone.sync = function(method, model, options) {
    var type = methodMap[method];

    // Default options, unless specified.
    _.defaults(options || (options = {}), {
      emulateHTTP: Backbone.emulateHTTP,
      emulateJSON: Backbone.emulateJSON
    });

    // Default JSON-request options.
    var params = {type: type, dataType: 'json'};

    // Ensure that we have a URL.
    if (!options.url) {
      params.url = _.result(model, 'url') || urlError();
    }

    // Ensure that we have the appropriate request data.
    if (options.data == null && model && (method === 'create' || method === 'update' || method === 'patch')) {
      params.contentType = 'application/json';
      params.data = JSON.stringify(options.attrs || model.toJSON(options));
    }

    // For older servers, emulate JSON by encoding the request into an HTML-form.
    if (options.emulateJSON) {
      params.contentType = 'application/x-www-form-urlencoded';
      params.data = params.data ? {model: params.data} : {};
    }

    // For older servers, emulate HTTP by mimicking the HTTP method with `_method`
    // And an `X-HTTP-Method-Override` header.
    if (options.emulateHTTP && (type === 'PUT' || type === 'DELETE' || type === 'PATCH')) {
      params.type = 'POST';
      if (options.emulateJSON) params.data._method = type;
      var beforeSend = options.beforeSend;
      options.beforeSend = function(xhr) {
        xhr.setRequestHeader('X-HTTP-Method-Override', type);
        if (beforeSend) return beforeSend.apply(this, arguments);
      };
    }

    // Don't process data on a non-GET request.
    if (params.type !== 'GET' && !options.emulateJSON) {
      params.processData = false;
    }

    // Pass along `textStatus` and `errorThrown` from jQuery.
    var error = options.error;
    options.error = function(xhr, textStatus, errorThrown) {
      options.textStatus = textStatus;
      options.errorThrown = errorThrown;
      if (error) error.call(options.context, xhr, textStatus, errorThrown);
    };

    // Make the request, allowing the user to override any Ajax options.
    var xhr = options.xhr = Backbone.ajax(_.extend(params, options));
    model.trigger('request', model, xhr, options);
    return xhr;
  };

  // Map from CRUD to HTTP for our default `Backbone.sync` implementation.
  var methodMap = {
    'create': 'POST',
    'update': 'PUT',
    'patch': 'PATCH',
    'delete': 'DELETE',
    'read': 'GET'
  };

  // Set the default implementation of `Backbone.ajax` to proxy through to `$`.
  // Override this if you'd like to use a different library.
  Backbone.ajax = function() {
    return Backbone.$.ajax.apply(Backbone.$, arguments);
  };

  // Backbone.Router
  // ---------------

  // Routers map faux-URLs to actions, and fire events when routes are
  // matched. Creating a new one sets its `routes` hash, if not set statically.
  var Router = Backbone.Router = function(options) {
    options || (options = {});
    if (options.routes) this.routes = options.routes;
    this._bindRoutes();
    this.initialize.apply(this, arguments);
  };

  // Cached regular expressions for matching named param parts and splatted
  // parts of route strings.
  var optionalParam = /\((.*?)\)/g;
  var namedParam    = /(\(\?)?:\w+/g;
  var splatParam    = /\*\w+/g;
  var escapeRegExp  = /[\-{}\[\]+?.,\\\^$|#\s]/g;

  // Set up all inheritable **Backbone.Router** properties and methods.
  _.extend(Router.prototype, Events, {

    // Initialize is an empty function by default. Override it with your own
    // initialization logic.
    initialize: function(){},

    // Manually bind a single named route to a callback. For example:
    //
    //     this.route('search/:query/p:num', 'search', function(query, num) {
    //       ...
    //     });
    //
    route: function(route, name, callback) {
      if (!_.isRegExp(route)) route = this._routeToRegExp(route);
      if (_.isFunction(name)) {
        callback = name;
        name = '';
      }
      if (!callback) callback = this[name];
      var router = this;
      Backbone.history.route(route, function(fragment) {
        var args = router._extractParameters(route, fragment);
        if (router.execute(callback, args, name) !== false) {
          router.trigger.apply(router, ['route:' + name].concat(args));
          router.trigger('route', name, args);
          Backbone.history.trigger('route', router, name, args);
        }
      });
      return this;
    },

    // Execute a route handler with the provided parameters.  This is an
    // excellent place to do pre-route setup or post-route cleanup.
    execute: function(callback, args, name) {
      if (callback) callback.apply(this, args);
    },

    // Simple proxy to `Backbone.history` to save a fragment into the history.
    navigate: function(fragment, options) {
      Backbone.history.navigate(fragment, options);
      return this;
    },

    // Bind all defined routes to `Backbone.history`. We have to reverse the
    // order of the routes here to support behavior where the most general
    // routes can be defined at the bottom of the route map.
    _bindRoutes: function() {
      if (!this.routes) return;
      this.routes = _.result(this, 'routes');
      var route, routes = _.keys(this.routes);
      while ((route = routes.pop()) != null) {
        this.route(route, this.routes[route]);
      }
    },

    // Convert a route string into a regular expression, suitable for matching
    // against the current location hash.
    _routeToRegExp: function(route) {
      route = route.replace(escapeRegExp, '\\$&')
                   .replace(optionalParam, '(?:$1)?')
                   .replace(namedParam, function(match, optional) {
                     return optional ? match : '([^/?]+)';
                   })
                   .replace(splatParam, '([^?]*?)');
      return new RegExp('^' + route + '(?:\\?([\\s\\S]*))?$');
    },

    // Given a route, and a URL fragment that it matches, return the array of
    // extracted decoded parameters. Empty or unmatched parameters will be
    // treated as `null` to normalize cross-browser behavior.
    _extractParameters: function(route, fragment) {
      var params = route.exec(fragment).slice(1);
      return _.map(params, function(param, i) {
        // Don't decode the search params.
        if (i === params.length - 1) return param || null;
        return param ? decodeURIComponent(param) : null;
      });
    }

  });

  // Backbone.History
  // ----------------

  // Handles cross-browser history management, based on either
  // [pushState](http://diveintohtml5.info/history.html) and real URLs, or
  // [onhashchange](https://developer.mozilla.org/en-US/docs/DOM/window.onhashchange)
  // and URL fragments. If the browser supports neither (old IE, natch),
  // falls back to polling.
  var History = Backbone.History = function() {
    this.handlers = [];
    this.checkUrl = _.bind(this.checkUrl, this);

    // Ensure that `History` can be used outside of the browser.
    if (typeof window !== 'undefined') {
      this.location = window.location;
      this.history = window.history;
    }
  };

  // Cached regex for stripping a leading hash/slash and trailing space.
  var routeStripper = /^[#\/]|\s+$/g;

  // Cached regex for stripping leading and trailing slashes.
  var rootStripper = /^\/+|\/+$/g;

  // Cached regex for stripping urls of hash.
  var pathStripper = /#.*$/;

  // Has the history handling already been started?
  History.started = false;

  // Set up all inheritable **Backbone.History** properties and methods.
  _.extend(History.prototype, Events, {

    // The default interval to poll for hash changes, if necessary, is
    // twenty times a second.
    interval: 50,

    // Are we at the app root?
    atRoot: function() {
      var path = this.location.pathname.replace(/[^\/]$/, '$&/');
      return path === this.root && !this.getSearch();
    },

    // Does the pathname match the root?
    matchRoot: function() {
      var path = this.decodeFragment(this.location.pathname);
      var rootPath = path.slice(0, this.root.length - 1) + '/';
      return rootPath === this.root;
    },

    // Unicode characters in `location.pathname` are percent encoded so they're
    // decoded for comparison. `%25` should not be decoded since it may be part
    // of an encoded parameter.
    decodeFragment: function(fragment) {
      return decodeURI(fragment.replace(/%25/g, '%2525'));
    },

    // In IE6, the hash fragment and search params are incorrect if the
    // fragment contains `?`.
    getSearch: function() {
      var match = this.location.href.replace(/#.*/, '').match(/\?.+/);
      return match ? match[0] : '';
    },

    // Gets the true hash value. Cannot use location.hash directly due to bug
    // in Firefox where location.hash will always be decoded.
    getHash: function(window) {
      var match = (window || this).location.href.match(/#(.*)$/);
      return match ? match[1] : '';
    },

    // Get the pathname and search params, without the root.
    getPath: function() {
      var path = this.decodeFragment(
        this.location.pathname + this.getSearch()
      ).slice(this.root.length - 1);
      return path.charAt(0) === '/' ? path.slice(1) : path;
    },

    // Get the cross-browser normalized URL fragment from the path or hash.
    getFragment: function(fragment) {
      if (fragment == null) {
        if (this._usePushState || !this._wantsHashChange) {
          fragment = this.getPath();
        } else {
          fragment = this.getHash();
        }
      }
      return fragment.replace(routeStripper, '');
    },

    // Start the hash change handling, returning `true` if the current URL matches
    // an existing route, and `false` otherwise.
    start: function(options) {
      if (History.started) throw new Error('Backbone.history has already been started');
      History.started = true;

      // Figure out the initial configuration. Do we need an iframe?
      // Is pushState desired ... is it available?
      this.options          = _.extend({root: '/'}, this.options, options);
      this.root             = this.options.root;
      this._wantsHashChange = this.options.hashChange !== false;
      this._hasHashChange   = 'onhashchange' in window && (document.documentMode === void 0 || document.documentMode > 7);
      this._useHashChange   = this._wantsHashChange && this._hasHashChange;
      this._wantsPushState  = !!this.options.pushState;
      this._hasPushState    = !!(this.history && this.history.pushState);
      this._usePushState    = this._wantsPushState && this._hasPushState;
      this.fragment         = this.getFragment();

      // Normalize root to always include a leading and trailing slash.
      this.root = ('/' + this.root + '/').replace(rootStripper, '/');

      // Transition from hashChange to pushState or vice versa if both are
      // requested.
      if (this._wantsHashChange && this._wantsPushState) {

        // If we've started off with a route from a `pushState`-enabled
        // browser, but we're currently in a browser that doesn't support it...
        if (!this._hasPushState && !this.atRoot()) {
          var rootPath = this.root.slice(0, -1) || '/';
          this.location.replace(rootPath + '#' + this.getPath());
          // Return immediately as browser will do redirect to new url
          return true;

        // Or if we've started out with a hash-based route, but we're currently
        // in a browser where it could be `pushState`-based instead...
        } else if (this._hasPushState && this.atRoot()) {
          this.navigate(this.getHash(), {replace: true});
        }

      }

      // Proxy an iframe to handle location events if the browser doesn't
      // support the `hashchange` event, HTML5 history, or the user wants
      // `hashChange` but not `pushState`.
      if (!this._hasHashChange && this._wantsHashChange && !this._usePushState) {
        this.iframe = document.createElement('iframe');
        this.iframe.src = 'javascript:0';
        this.iframe.style.display = 'none';
        this.iframe.tabIndex = -1;
        var body = document.body;
        // Using `appendChild` will throw on IE < 9 if the document is not ready.
        var iWindow = body.insertBefore(this.iframe, body.firstChild).contentWindow;
        iWindow.document.open();
        iWindow.document.close();
        iWindow.location.hash = '#' + this.fragment;
      }

      // Add a cross-platform `addEventListener` shim for older browsers.
      var addEventListener = window.addEventListener || function(eventName, listener) {
        return attachEvent('on' + eventName, listener);
      };

      // Depending on whether we're using pushState or hashes, and whether
      // 'onhashchange' is supported, determine how we check the URL state.
      if (this._usePushState) {
        addEventListener('popstate', this.checkUrl, false);
      } else if (this._useHashChange && !this.iframe) {
        addEventListener('hashchange', this.checkUrl, false);
      } else if (this._wantsHashChange) {
        this._checkUrlInterval = setInterval(this.checkUrl, this.interval);
      }

      if (!this.options.silent) return this.loadUrl();
    },

    // Disable Backbone.history, perhaps temporarily. Not useful in a real app,
    // but possibly useful for unit testing Routers.
    stop: function() {
      // Add a cross-platform `removeEventListener` shim for older browsers.
      var removeEventListener = window.removeEventListener || function(eventName, listener) {
        return detachEvent('on' + eventName, listener);
      };

      // Remove window listeners.
      if (this._usePushState) {
        removeEventListener('popstate', this.checkUrl, false);
      } else if (this._useHashChange && !this.iframe) {
        removeEventListener('hashchange', this.checkUrl, false);
      }

      // Clean up the iframe if necessary.
      if (this.iframe) {
        document.body.removeChild(this.iframe);
        this.iframe = null;
      }

      // Some environments will throw when clearing an undefined interval.
      if (this._checkUrlInterval) clearInterval(this._checkUrlInterval);
      History.started = false;
    },

    // Add a route to be tested when the fragment changes. Routes added later
    // may override previous routes.
    route: function(route, callback) {
      this.handlers.unshift({route: route, callback: callback});
    },

    // Checks the current URL to see if it has changed, and if it has,
    // calls `loadUrl`, normalizing across the hidden iframe.
    checkUrl: function(e) {
      var current = this.getFragment();

      // If the user pressed the back button, the iframe's hash will have
      // changed and we should use that for comparison.
      if (current === this.fragment && this.iframe) {
        current = this.getHash(this.iframe.contentWindow);
      }

      if (current === this.fragment) return false;
      if (this.iframe) this.navigate(current);
      this.loadUrl();
    },

    // Attempt to load the current URL fragment. If a route succeeds with a
    // match, returns `true`. If no defined routes matches the fragment,
    // returns `false`.
    loadUrl: function(fragment) {
      // If the root doesn't match, no routes can match either.
      if (!this.matchRoot()) return false;
      fragment = this.fragment = this.getFragment(fragment);
      return _.some(this.handlers, function(handler) {
        if (handler.route.test(fragment)) {
          handler.callback(fragment);
          return true;
        }
      });
    },

    // Save a fragment into the hash history, or replace the URL state if the
    // 'replace' option is passed. You are responsible for properly URL-encoding
    // the fragment in advance.
    //
    // The options object can contain `trigger: true` if you wish to have the
    // route callback be fired (not usually desirable), or `replace: true`, if
    // you wish to modify the current URL without adding an entry to the history.
    navigate: function(fragment, options) {
      if (!History.started) return false;
      if (!options || options === true) options = {trigger: !!options};

      // Normalize the fragment.
      fragment = this.getFragment(fragment || '');

      // Don't include a trailing slash on the root.
      var rootPath = this.root;
      if (fragment === '' || fragment.charAt(0) === '?') {
        rootPath = rootPath.slice(0, -1) || '/';
      }
      var url = rootPath + fragment;

      // Strip the hash and decode for matching.
      fragment = this.decodeFragment(fragment.replace(pathStripper, ''));

      if (this.fragment === fragment) return;
      this.fragment = fragment;

      // If pushState is available, we use it to set the fragment as a real URL.
      if (this._usePushState) {
        this.history[options.replace ? 'replaceState' : 'pushState']({}, document.title, url);

      // If hash changes haven't been explicitly disabled, update the hash
      // fragment to store history.
      } else if (this._wantsHashChange) {
        this._updateHash(this.location, fragment, options.replace);
        if (this.iframe && fragment !== this.getHash(this.iframe.contentWindow)) {
          var iWindow = this.iframe.contentWindow;

          // Opening and closing the iframe tricks IE7 and earlier to push a
          // history entry on hash-tag change.  When replace is true, we don't
          // want this.
          if (!options.replace) {
            iWindow.document.open();
            iWindow.document.close();
          }

          this._updateHash(iWindow.location, fragment, options.replace);
        }

      // If you've told us that you explicitly don't want fallback hashchange-
      // based history, then `navigate` becomes a page refresh.
      } else {
        return this.location.assign(url);
      }
      if (options.trigger) return this.loadUrl(fragment);
    },

    // Update the hash location, either replacing the current entry, or adding
    // a new one to the browser history.
    _updateHash: function(location, fragment, replace) {
      if (replace) {
        var href = location.href.replace(/(javascript:|#).*$/, '');
        location.replace(href + '#' + fragment);
      } else {
        // Some browsers require that `hash` contains a leading #.
        location.hash = '#' + fragment;
      }
    }

  });

  // Create the default Backbone.history.
  Backbone.history = new History;

  // Helpers
  // -------

  // Helper function to correctly set up the prototype chain for subclasses.
  // Similar to `goog.inherits`, but uses a hash of prototype properties and
  // class properties to be extended.
  var extend = function(protoProps, staticProps) {
    var parent = this;
    var child;

    // The constructor function for the new subclass is either defined by you
    // (the "constructor" property in your `extend` definition), or defaulted
    // by us to simply call the parent constructor.
    if (protoProps && _.has(protoProps, 'constructor')) {
      child = protoProps.constructor;
    } else {
      child = function(){ return parent.apply(this, arguments); };
    }

    // Add static properties to the constructor function, if supplied.
    _.extend(child, parent, staticProps);

    // Set the prototype chain to inherit from `parent`, without calling
    // `parent`'s constructor function and add the prototype properties.
    child.prototype = _.create(parent.prototype, protoProps);
    child.prototype.constructor = child;

    // Set a convenience property in case the parent's prototype is needed
    // later.
    child.__super__ = parent.prototype;

    return child;
  };

  // Set up inheritance for the model, collection, router, view and history.
  Model.extend = Collection.extend = Router.extend = View.extend = History.extend = extend;

  // Throw an error when a URL is needed, and none is supplied.
  var urlError = function() {
    throw new Error('A "url" property or function must be specified');
  };

  // Wrap an optional error callback with a fallback error event.
  var wrapError = function(model, options) {
    var error = options.error;
    options.error = function(resp) {
      if (error) error.call(options.context, model, resp, options);
      model.trigger('error', model, resp, options);
    };
  };

  return Backbone;
});

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(287)))

/***/ }),
/* 8 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {/**
 * @file actionbuttonevents.js
 * @brief
 * @author Medhi BOULNEMOUR (INRA UMR1095)
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-05-19
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);
let RowActionButtons = __webpack_require__(325);

let ActionBtnEvents = Marionette.Behavior.extend({
    defaults: {
        actions: {
            show: {title: _t('Show'), display: false},
            edit: {title: _t('Edit'), display: true},
            edit2: {title: _t('Edit2'), display: false},
            tag: {title: _t('Label'), display: false},
            manage: {title: _t('Manage'), display: false},
            remove: {title: _t('Delete'), display: true},
            unlink: {title: _t('Unlink'), display: false},
            history: {title: _t('History'), display: false},
        }
    },

    events: {
        'mouseenter': 'showActions',
        'mouseleave': 'hideActions',
        'mouseover': 'overActions',
        'mouseout': 'outActions'
    },
/*
    changeButtonMode: function () {
        let group = this.$el.children('div.row-action-group');
        let numButtons = group.children('div.action.actions-buttons')[0].childElementCount;
        group.css('margin-left', (-numButtons * 24 - 10).toString() + 'px');

        // $(window).on('resize', function change_btn_mode() {
        //     let btn_size = null;
        //     if ($(window).width() <= 1024) {
        //         group.css("display", "block");
        //         group.children('div.action.actions-buttons').removeClass('btn-group-xs');
        //         group.children('div.action.actions-buttons').addClass('btn-group-md');
        //         btn_size = 42;
        //     } else {
        //         group.css("display", "none");
        //         group.children('div.action.actions-buttons').removeClass('btn-group-md');
        //         group.children('div.action.actions-buttons').addClass('btn-group-xs');
        //         btn_size = 24;
        //     }
        //
        //     // Calculate left margin according to the number of buttons
        //     group.css('margin-left', (-nb_buttons * btn_size - 10).toString() + 'px');
        // });
        //
        // $(window).trigger('resize');
        return false;
    },
*/
    onDestroy: function() {
        if (window.application.main.tmp.lastActionButtonEvents === this) {
            window.application.main.tmp.lastActionButtonEvents = null;
        }

        if (this.rowActionButtons) {
            this.rowActionButtons.remove();
        }
    },

    overActions: function (e) {
        // delete a previous one not clean (issue on chrome)
        if (window.application.main.tmp.lastActionButtonEvents !== this) {
            let last = window.application.main.tmp.lastActionButtonEvents;

            if (last && last.rowActionButtons) {
                last.inButtons = last.inRow = false;
                last.rowActionButtons.remove();
            }

            window.application.main.tmp.lastActionButtonEvents = this;
        }

        if (this.rowActionButtons && e.relatedTarget && (
            (e.relatedTarget.parentNode && e.relatedTarget.parentNode === this.rowActionButtons[0]) ||
            (e.relatedTarget.parentNode && e.relatedTarget.parentNode.parentNode && e.relatedTarget.parentNode.parentNode === this.rowActionButtons[0]))) {
            this.inButtons = true;
        } else {
            this.inButtons = false;
        }

        if (this.rowActionButtons) {
             return false;
        }

        let actions = this.options.actions;
        let options = _.deepClone(this.defaults.actions);

        let properties = this.view.actionsProperties ? this.view.actionsProperties() : {};

        for (let action in options) {
            if (actions[action] != undefined) {
                if (actions[action].display != undefined) {
                    options[action].display = actions[action].display;
                }

                if (actions[action].disabled != undefined) {
                    options[action].disabled = actions[action].disabled;
                }

                if (actions[action].title != undefined) {
                    options[action].title = actions[action].title;
                }

                if (actions[action].event != undefined) {
                    options[action].event = actions[action].event;
                }
            }

            if (properties[action] != undefined) {
                if (properties[action].display != undefined) {
                    options[action].display = properties[action].display;
                }

                if (properties[action].disabled != undefined) {
                    options[action].disabled = properties[action].disabled;
                }

                if (properties[action].title != undefined) {
                    options[action].title = properties[action].title;
                }

                if (properties[action].event != undefined) {
                    options[action].event = properties[action].event;
                }
            }
        }

        let top = this.$el.children('td:last-child').html() === "" ? 0 : -20;

        this.rowActionButtons = $(_.template(RowActionButtons(options))());
        this.$el.children('td:last-child').append(this.rowActionButtons);

        this.rowActionButtons.css({
            display: 'block'
        });

        // adjust top when content into the column
        this.rowActionButtons.children('div').css('top', top);

        // bind events
        for (let action in options) {
            if (options[action].event != undefined) {
                this.rowActionButtons.children('div').children('button.action[name=' + action + ']').on('click',
                    $.proxy(this.view[options[action].event], this.view));
            }
        }

        // default click
        this.rowActionButtons.children('div').on('click', function(e) { return false; });

        return false;
    },

    outActions: function(e) {
        if (this.rowActionButtons && e.relatedTarget && (
            (e.relatedTarget.parentNode && e.relatedTarget.parentNode === this.rowActionButtons[0]) ||
            (e.relatedTarget.parentNode && e.relatedTarget.parentNode.parentNode && e.relatedTarget.parentNode.parentNode === this.rowActionButtons[0]))) {
            this.inButtons = true;
        } else {
            this.inButtons = false;
        }

        if (this.rowActionButtons && !this.inButtons && !this.inRow) {
            this.rowActionButtons.remove();
            this.rowActionButtons = null;
        }

        return false;
    },

    showActions: function(e) {
        this.inRow = true;
        return false;
    },

    hideActions: function(e) {
        this.inRow = false;

        if (this.rowActionButtons && !this.inButtons && !this.inRow) {
            this.rowActionButtons.remove();
            this.rowActionButtons = null;
        }

        return false;
    }
});

module.exports = ActionBtnEvents;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 9 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {/**
 * @file countable.js
 * @brief Entity collection with count support
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-08-31
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Collection = Backbone.Collection.extend({

    cache: {
        category: 'main',
        key: undefined
    },

    initialize: function (model, options) {
        options || (options = {cacheable: false});

        this.filters = (options.filters || []);
        this.search = (options.search || []);

        if (options.cacheable) {
            window.application.main.cache.registerCollection(this);
        }
    },

    parse: function(data) {
        this.prev = data.prev;
        this.cursor = data.cursor;
        this.next = data.next;
        this.perms = data.perms;

        return data.items;
    },

    fetch: function(options) {
        options || (options = {});
        let data = (options.data || {});

        let opts = _.clone(options);
        opts.data = data;

        this.cursor = data.cursor;
        this.sort_by = data.sort_by;

        if (this.search && this.search.length) {
            opts.data.search = JSON.stringify(this.search)
        }

        if (this.filters && this.filters.length) {
            opts.data.filters = JSON.stringify(this.filters)
        }

        if (data.cursor && typeof data.cursor !== 'string') {
            opts.data.cursor = JSON.stringify(data.cursor);
        }

        if (data.sort_by && typeof data.sort_by !== 'string') {
            opts.data.sort_by = JSON.stringify(data.sort_by);
        }

        return Backbone.Collection.prototype.fetch.call(this, opts);
    },

    count: function(options) {
        options || (options = {});
        let data = (options.data || {});

        let opts = _.clone(options);
        opts.data = data;

        if (this.search && this.search.length) {
            opts.data.search = JSON.stringify(this.search)
        }

        if (this.filters && this.filters.length) {
            opts.data.filters = JSON.stringify(this.filters)
        }

        $.ajax({
            type: "GET",
            url: (_.isFunction(this.url) ? this.url() : this.url) + 'count/',
            dataType: 'json',
            data: opts.data,
            collection: this
        }).done(function (data) {
            this.collection.trigger('count', data.count);
        });
    }
});

module.exports = Collection;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 10 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file scrollingmore.js
 * @brief Simple view that add a more button.
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-09-26
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Marionette = __webpack_require__(1);

let View = Marionette.View.extend({
    template: __webpack_require__(331),
    tagName: 'div',
    className: 'scrolling-more',

    ui: {
        scroll_less: 'span.scroll-less',
        scroll_more: 'span.scroll-more',
        collection_count_group: 'div.collection-count-group',
        collection_position: 'span.collection-position',
        collection_count: 'span.collection-count'
    },

    events: {
        'click @ui.scroll_less': 'onScrollLess',
        'click @ui.scroll_more': 'onScrollMore'
    },

    initialize: function(options) {
        options || (options = {});

        if (options.targetView) {
            this.targetView = options.targetView;
        }

        if (options.more) {
            this.more = options.more;
        } else {
            this.more = -1;
        }

        let collection = this.getOption('collection');
        if (collection && collection.count) {
            // update count and reset position on count signal
            this.listenTo(collection, 'count', this.onUpdateCount, this);

            // update position on reset collection
            this.listenTo(collection, 'reset', this.onUpdatePosition, this);

            // initial count query
            collection.count();
        }
    },

    onRender: function() {
        if (!this.getOption('collection')) {
            this.ui.collection_count_group.hide();
        }

        if (this.targetView && this.targetView.getScrollElement) {
            this.targetView.getScrollElement().on('scroll', $.proxy(this.onScroll, this));
        }
    },

    onResize: function() {
       this.updatePosition();
    },

    updatePosition: function() {
        if (!this.targetView.ui.tbody.length) {
            return;
        }

        let top = this.targetView.ui.tbody.parent().parent().offset().top;
        let found = false;

        if (this.previousTopElement) {
            if (this.previousTopElement.offset().top <= top) {
                let element = this.previousTopElement;
                let i = this.previousTopElementIndex;

                this.previousTopElement = null;

                while (element && element.length) {
                    if (element.offset().top + element.height() >= top) {
                        this.previousTopElement = element;
                        this.previousTopElementIndex = i;

                        found = true;
                        break;
                    }

                    element = element.next();
                    ++i;
                }
            } else if (this.previousTopElement.offset().top > top) {
                let element = this.previousTopElement;
                let i = this.previousTopElementIndex;

                this.previousTopElement = null;

                while (element && element.length) {
                    if (element.offset().top <= top) {
                        this.previousTopElement = element;
                        this.previousTopElementIndex = i;

                        found = true;
                        break;
                    }

                    element = element.prev();
                    --i;
                }
            }
        }

        if (!found) {
            let rows = this.targetView.ui.tbody.children('tr');
            let view = this;

            this.previousTopElement = null;
            this.previousTopElementIndex = 0;

            $.each(rows, function (i, el) {
                let element = $(el);

                if (element.offset().top + element.height() >= top) {
                    view.previousTopElement = element;
                    view.previousTopElementIndex = i;

                    return false;
                }
            });
        }

        let bottom = top + this.targetView.ui.tbody.parent().parent().height();
        let element = this.previousTopElement;
        let i = this.previousTopElementIndex;

        while (element && element.length) {
            if (element.offset().top >= bottom) {
                break;
            }

            element = element.next();
            ++i;
        }

        let first = this.previousTopElement ? this.previousTopElementIndex + 1 : 0;
        let last = i;

        this.ui.collection_position.html(first + " - " + last);

        // save position for later usage
        let scrollElement = this.targetView.$el.parent();
        if (this.targetView && this.targetView.getScrollElement) {
            scrollElement = this.targetView.getScrollElement();
        }

        if (this.targetView && this.targetView.updateScroll) {
            this.targetView.updateScroll(scrollElement.scrollTop());
        }
    },

    onUpdateCount: function(count) {
        if (count === 0) {
            this.ui.collection_position.html(0 + " - " + 0);
            // this.updatePosition();
        } else {
            this.updatePosition();
        }
        this.ui.collection_count.html(count);
    },

    onUpdatePosition: function() {
        this.updatePosition();
    },

    onScroll: function(e) {
        if (this.targetView) {
            if (this.scrollEvent) {
                return;
            }

            this.scrollEvent = true;

            setTimeout(function(view) {
                // view destroyed before
                if (view.isDestroyed()) {
                    return;
                }

                view.scrollEvent = false;
                view.updatePosition();
            }, 100, this);
        }
    },

    onScrollLess: function() {
        if (this.targetView && this.targetView.scrollOnePage) {
            this.targetView.scrollOnePage(-1);
        } else if (this.targetView) {
            let scrollElement = this.targetView.$el.parent();
            let clientHeight = scrollElement.prop('clientHeight');

            // view page scrolling
            scrollElement.scrollTop(scrollElement.scrollTop() - clientHeight);
        }
    },

    onScrollMore: function() {
        if (this.targetView && this.targetView.moreResults) {
            let moreResults = true;

            if (this.targetView.isNeedMoreResults) {
                moreResults = this.targetView.isNeedMoreResults();
            }

            if (moreResults) {
                this.targetView.moreResults(this.more, true);
            } else {
                this.targetView.scrollOnePage(1);
            }
        } else if (this.targetView) {
            let scrollElement = this.targetView.$el.parent();
            let clientHeight = scrollElement.prop('clientHeight');

            // view page scrolling
            scrollElement.scrollTop(scrollElement.scrollTop() + clientHeight);
        }
    }
});

module.exports = View;


/***/ }),
/* 11 */
/***/ (function(module, exports, __webpack_require__) {

    /**
 * @file descriptorscolumns.js
 * @brief Management of colums of descriptors for a list view
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-04-04
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let DescriptorsColumnsView = {
    template: __webpack_require__(16),

    onRefreshChildren: function (full, columnsList) {
        let columns = columnsList || this.displayedColumns || [];
        let promises = [];
        let modelList = this.getLastModels();

        if (full) {
            modelList = this.collection.models;
        }

        // one query by list of value
        for (let i = 0; i < columns.length; ++i) {
            // make the list of values
            let columnName = columns[i];
            let options = this.getOption('columns')[columnName];
            let done = false;

            let cellClassName = "";
            if (typeof(options.event) === "string") {
                cellClassName = "action " + options.event;
            }

            if (options.query) {
                // and fetch data (standard or descriptor)
                if (columnName.startsWith('#')) {
                    let promise = this._fetchDescriptorsValue(modelList, columnName, options);
                    if (promise) {
                        promises.push(promise);
                    }
                } else {
                    let promise = this._fetchStandardValue(modelList, columnName, options);
                    if (promise) {
                        promises.push(promise);
                    }
                }

                done = true;
            } else if ("custom" in options && options.custom) {
                for (let j = 0; j < modelList.length; ++j) {
                    let model = modelList[j];
                    let childView = this.children.findByModel(model);
                    let cell = childView.$el.find('td[name="' + columnName + '"]');

                    if (options.custom) {
                        let value = model.get(columnName);
                        childView[options.custom](cell, value);
                    }

                    if (cellClassName) {
                        cell.addClass(cellClassName)
                    }
                }

                done = true;
            } else if ("format" in options && options.format) {
                let dft =  window.application.descriptor.widgets.getElement(options.format.type);
                if (dft && dft.format) {
                    if (columnName.startsWith('#')) {
                        for (let j = 0; j < modelList.length; ++j) {
                            let model = modelList[j];
                            let childView = this.children.findByModel(model);
                            let value = model.get('descriptors')[columnName.replace(/^#/, '')];
                            let cell = childView.$el.find('td[name="' + columnName + '"]');

                            // simply replace the value
                            cell.html(dft.format(value));

                            if (cellClassName) {
                                cell.addClass(cellClassName)
                            }
                        }

                        done = true;
                    } else {
                        // support of format for non descriptor fields
                        for (let j = 0; j < modelList.length; ++j) {
                            let model = modelList[j];
                            let childView = this.children.findByModel(model);
                            let value = model.get(columnName);
                            let cell = childView.$el.find('td[name="' + columnName + '"]');

                            // simply replace the value
                            cell.html(dft.format(value));

                            if (cellClassName) {
                                cell.addClass(cellClassName)
                            }
                        }

                        done = true;
                    }

                } else if (columnName.startsWith('&')) {
                    // if column is a synonym type
                    for (let j = 0; j < modelList.length; ++j) {
                            let model = modelList[j];
                            let childView = this.children.findByModel(model);

                            let value = "";

                            if (model.get('synonyms')[columnName.replace(/^&/, '')]) {
                                value = model.get('synonyms')[columnName.replace(/^&/, '')]['name'];
                            }

                            let cell = childView.$el.find('td[name="' + columnName + '"]');

                            // simply replace the value
                            cell.html(value);

                            if (cellClassName) {
                                cell.addClass(cellClassName)
                            }
                        }
                        done = true;
                }
            }

            // default if not continue
            if (!done) {
                if (cellClassName || options.autoSelect) {
                    for (let j = 0; j < modelList.length; ++j) {
                        let model = modelList[j];
                        let childView = this.children.findByModel(model);
                        let cell = childView.$el.find('td[name="' + columnName + '"]');

                        if (cellClassName) {
                            cell.addClass(cellClassName);
                        }

                        // auto-selection
                        if (options.autoSelect) {
                            cell.children('span').removeClass('fa-square-o').addClass('fa-check-square-o');
                        }
                    }
                }
            }
        }

        let view = this;

        // return the promise
        return $.when.apply($, promises).done(function () {
            view.updateColumnsWidth();
        }).fail(function() {
            view.updateColumnsWidth();
        });
    },

    _fetchDescriptorsValue: function(modelList, columnName, options) {
        let descriptorName = columnName.replace(/^#/, '');
        let cache =  window.application.main.cache.get('descriptors', descriptorName);

        let toFetch = false;
        let now = Date.now();

        // make the list of keys
        let keys = new Set();
        let models = [];

        let cellClassName = "";
        if (typeof(options.event) === "string") {
            cellClassName = "action " + options.event;
        }

        for (let i = 0; i < modelList.length; ++i) {
            let model = modelList[i];
            let key = model.get('descriptors')[descriptorName];
            let entry = undefined;

            toFetch = false;

            if (key !== null && key !== undefined && key !== "") {
                entry = cache[key];
            }

            if (entry !== undefined) {
                // found. look for validity
                if (entry.expire !== null && entry.expire <= now) {
                    toFetch = true;
                } else {
                    let childView = this.children.findByModel(model);
                    let cell = childView.$el.find('td[name="' + columnName + '"]');

                    if (options.custom) {
                        // manage custom cell for some complex cases
                        childView[options.custom](cell, entry.value);
                    } else {
                        // simply replace the value
                        cell.html(entry.value);
                    }

                    if (cellClassName) {
                        cell.addClass(cellClassName);
                    }
                }
            } else if (key !== null && key !== undefined && key !== "") {
                toFetch = true;
            }

            if (toFetch) {
                keys.add(key);
                models.push(model);
            }
        }

        let self = this;
        let parameters = {
            'type': 'descriptors',
            'format': {
                'name': descriptorName
            }
        };

        let promise =  window.application.main.cache.fetch(parameters, Array.from(keys), false);

        if (promise) {
            promise.done(function (data) {
                let cellClassName = "";
                if (typeof(options.event) === "string") {
                    cellClassName = "action " + options.event;
                }

                // process cell for value newly cached
                for (let i = 0; i < models.length; ++i) {
                    let model = models[i];
                    let childView = self.children.findByModel(model);
                    let key = model.get('descriptors')[descriptorName];

                    let cell = childView.$el.find('td[name="' + columnName + '"]');
                    if (key !== undefined) {
                        if (options.custom) {
                            // manage custom cell for some complex cases
                            childView[options.custom](cell, cache[key].value);
                        } else {
                            // simply replace the value
                            cell.html(cache[key].value);
                        }

                        if (cellClassName) {
                            cell.addClass(cellClassName);
                        }
                    }
                }
            }).fail(function () {
                // add an Error message to un-fetched cells
                let message = _t("Error");

                for (let i = 0; i < models.length; ++i) {
                    let model = models[i];
                    let childView = this.view.children.findByModel(model);
                    let key = model.get('descriptors')[descriptorName];

                    let cell = childView.$el.find('td[name="' + columnName + '"]');
                    if (key !== undefined) {
                        let span = $('<span class="label label-danger">' + message + '</span>');
                        cell.append(span)
                    }
                }
            });
        }

        return promise;
    },

    _fetchStandardValue: function(modelList, columnName, options) {
        let parameters = {};

        if (options.format.type === "layout" && window.application.main.cache.hasFetcher('layout')) {
            parameters.type = 'layout';
            parameters.format = {
                'model': options.format.model
            }
        } else if (options.format.type === "entity" &&  window.application.main.cache.hasFetcher('entity')) {
            parameters.type = 'entity';
            parameters.format = {
                'model': options.format.model,
                'details': !!options.format.details
            }
        } else {
            // unsupported
            return null;
        }

        let cache = window.application.main.cache.get(parameters.type, options.format.model);

        let toFetch = false;
        let now = Date.now();

        // make the list of keys
        let keys = new Set();
        let models = [];

        let cellClassName = "";
        if (typeof(options.event) === "string") {
            cellClassName = "action " + options.event;
        }

        // lookup into the global cache
        for (let j = 0; j < modelList.length; ++j) {
            let model = modelList[j];
            let key = model.get(columnName.replace(/^@\$/, ''));
            let entry = undefined;

            toFetch = false;

            if (key !== null && key !== undefined && key !== "") {
                entry = cache[key];
            }

            if (entry !== undefined) {
                // found. look for validity
                if (entry.expire !== null && entry.expire <= now) {
                    toFetch = true;
                } else {
                    let childView = this.children.findByModel(model);
                    let cell = childView.$el.find('td[name="' + columnName + '"]');

                    if (options.custom) {
                        // manage custom cell for some complex cases
                        childView[options.custom](cell, entry.value);
                    } else {
                        // simply replace the value
                        cell.html(entry.value);
                    }

                    if (cellClassName) {
                        cell.addClass(cellClassName);
                    }
                }
            } else if (key !== null && key !== undefined && key !== "") {
                toFetch = true;
            }

            if (toFetch) {
                keys.add(key);
                models.push(model);
            }
        }

        let self = this;
        let promise =  window.application.main.cache.fetch(parameters, Array.from(keys), false);

        if (promise) {
            promise.done(function (data) {
                let cellClassName = "";
                if (typeof(options.event) === "string") {
                    cellClassName = "action " + options.event;
                }

                // process cell for value newly cached
                for (let i = 0; i < models.length; ++i) {
                    let model = models[i];
                    let childView = self.children.findByModel(model);
                    let key = model.get(columnName.replace(/^@\$/, ''));

                    let cell = childView.$el.find('td[name="' + columnName + '"]');
                    if (key !== undefined) {
                        if (options.custom) {
                            // manage custom cell for some complex cases
                            childView[options.custom](cell, cache[key].value);
                        } else {
                            // simply replace the value
                            cell.html(cache[key].value);
                        }

                        if (cellClassName) {
                            cell.addClass(cellClassName);
                        }
                    }
                }
            }).fail(function () {
                // add an Error message to un-fetched cells
                let message = _t("Error");

                for (let i = 0; i < models.length; ++i) {
                    let model = models[i];
                    let childView = this.view.children.findByModel(model);
                    let key = model.get(columnName.replace(/^@\$/, ''));

                    let cell = childView.$el.find('td[name="' + columnName + '"]');
                    if (key !== undefined) {
                        let span = $('<span class="label label-danger">' + message + '</span>');
                        cell.append(span)
                    }
                }
            });
        }

        return promise;
    }
};

module.exports = DescriptorsColumnsView;


/***/ }),
/* 12 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
with (obj) {
__p += ' ';
 for (var i = 0; i < columnsList.length; ++i) {
    var columnName = columnsList[i];
    var column = columnsOptions[columnName];
    if (column.custom) {
        ;
__p += '<td name="' +
__e( columnName ) +
'"></td>';

    } else if (column.glyphicon != undefined) {
        ;
__p += '<td name="' +
__e( columnName ) +
'" class="glyph-fixed-column"><span class="fa ' +
__e( column.glyphicon[1] ) +
'"></span></td>';

    } else if (column.query) {
        ;
__p += '<td name="' +
__e( columnName ) +
'"></td>';

    } else if (columnName.startsWith('&') && (columnName.replace(/^\&/, '') in arguments[0]['synonyms'])) {
        ;
__p += '<td name="' +
__e( columnName ) +
'">' +
__e( arguments[0]['synonyms'][columnName.replace(/^&/, '')]['name'] ) +
'</td>';

    } else if (columnName.startsWith('$') && (columnName.replace(/^\$/, '') in arguments[0])) {
        ;
__p += '<td name="' +
__e( columnName ) +
'">' +
__e( arguments[0]['format'][columnName.replace(/^\$/, '')] ) +
'</td>';

    } else if (columnName.startsWith('@') && (columnName.replace(/^@/, '') in arguments[0])) {
        ;
__p += '<td name="' +
__e( columnName ) +
'">' +
__e( arguments[0][columnName.replace(/^@/, '')] ) +
'</td>';

    } else if (!columnName.startsWith('#') && (columnName in arguments[0])) {
        ;
__p += '<td name="' +
__e( columnName ) +
'">' +
__e( arguments[0][columnName] ) +
'</td>';

    } else if (columnName.startsWith('#') && (columnName.replace(/^#/, '') in descriptors)) {
        ;
__p += '<td name="' +
__e( columnName ) +
'">' +
__e( descriptors[columnName.replace(/^#/, '')] || "" ) +
'</td>';

    } else {
        ;
__p += '<td name="' +
__e( columnName ) +
'"></td>';

    }
} ;


}
return __p
};

/*
original source:

 <% for (var i = 0; i < columnsList.length; ++i) {
    var columnName = columnsList[i];
    var column = columnsOptions[columnName];
    if (column.custom) {
        %><td name="<%- columnName %>"></td><%
    } else if (column.glyphicon != undefined) {
        %><td name="<%- columnName %>" class="glyph-fixed-column"><span class="fa <%- column.glyphicon[1] %>"></span></td><%
    } else if (column.query) {
        %><td name="<%- columnName %>"></td><%
    } else if (columnName.startsWith('&') && (columnName.replace(/^\&/, '') in arguments[0]['synonyms'])) {
        %><td name="<%- columnName %>"><%- arguments[0]['synonyms'][columnName.replace(/^&/, '')]['name'] %></td><%
    } else if (columnName.startsWith('$') && (columnName.replace(/^\$/, '') in arguments[0])) {
        %><td name="<%- columnName %>"><%- arguments[0]['format'][columnName.replace(/^\$/, '')] %></td><%
    } else if (columnName.startsWith('@') && (columnName.replace(/^@/, '') in arguments[0])) {
        %><td name="<%- columnName %>"><%- arguments[0][columnName.replace(/^@/, '')] %></td><%
    } else if (!columnName.startsWith('#') && (columnName in arguments[0])) {
        %><td name="<%- columnName %>"><%- arguments[0][columnName] %></td><%
    } else if (columnName.startsWith('#') && (columnName.replace(/^#/, '') in descriptors)) {
        %><td name="<%- columnName %>"><%- descriptors[columnName.replace(/^#/, '')] || "" %></td><%
    } else {
        %><td name="<%- columnName %>"></td><%
    }
} %>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 13 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file descriptorformattype.js
 * @brief Base class for any descriptor format type widgets.
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-01-20
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let DescribableValueHistoryDialog = __webpack_require__(255);

let DescriptorFormatType = function() {
    this.name = "";         // format type name
    this.group = "";        // related informal group name

    this.readOnly = false;  // true mean the widget is read only
    this.parent = null;     // direct parent
    this.el = null;         // element itself
    this.groupEl = null;    // group (container) element
    this.allow_multiple = false; // true mean the widget can send a list of values

    // standard css style for span
    this.spanStyle = {"padding-top": "3px", "padding-bottom": "3px"};

    // standard css style for span
    this.historySpanStyle = {
        "padding-top": "3px", "padding-bottom": "3px", "padding-left": "6px", "padding-right": "6px"};

    // standard css style for input or select
    this.inputStyle = {"width": "100%", "height": "24px", "padding-top": "3px", "padding-bottom": "3px"};
};

DescriptorFormatType.prototype = {
    // return true if the there is one or more defaults values
    isValueDefined: function (definesValues, defaultValues) {
        return !!definesValues && defaultValues !== null && defaultValues !== undefined;
    },

    /**
     * Create a simple input widget within an input-group and with a specified glyphicon (bootstrap).
     * @param parent Parent element
     * @param glyphicon Name of the glyphicon (bootstrap)
     * @returns {*|jQuery|HTMLElement} input
     * @private
     */
    _createStdInput: function(parent, glyphicon, history) {
        history || (history = false);

        let group = $('<div class="input-group"></div>');
        let glyph = $('<span class="input-group-addon"></span>');

        if (glyphicon.startsWith("fa-")) {
            glyph.append('<span class="fa fa-fw ' + glyphicon + '"></span>');
        } else if (glyphicon.startsWith("glyphicon-")) {
            glyph.append('<span class="glyphicon ' + glyphicon + '"></span>');
        } else {
            glyph.append('<span class="fa fa-fw fa-question"></span>');
        }

        glyph.css(this.spanStyle);

        let input = $('<input class="form-control" readonly="">');
        input.css(this.inputStyle);

        group.append(input);

        // want history
        if (history) {
            let history = $('<span class="input-group-addon btn btn-xs btn-default show-descriptor-history"><span class="fa fa-line-chart"></span></span>');
            history.attr("title", _t("Show history of the value"));
            history.css(this.historySpanStyle)
                .css('cursor', 'pointer')
                .css('border-left-width', '0px');  // avoid double border

            group.append(history);
        }

        group.append(glyph);

        parent.append(group);

        return input;
    },

    /**
     * Create a simple input-group and with a specified glyphicon (bootstrap), set the specific input.
     * @param parent Parent element
     * @param glyphicon Name of the glyphicon (bootstrap)
     * @param input Input element to bind into the group
     * @return {*|jQuery|HTMLElement} The created group
     */
    _createInputGroup: function(parent, glyphicon, input, history) {
        history || (history = false);

        let group = $('<div class="input-group"></div>');
        let glyph = $('<span class="input-group-addon"></span>');

        if (glyphicon.startsWith("fa-")) {
            glyph.append('<span class="fa fa-fw ' + glyphicon + '"></span>');
        } else if (glyphicon.startsWith("glyphicon-")) {
            glyph.append('<span class="glyphicon ' + glyphicon + '"></span>');
        } else {
            glyph.append('<span class="fa fa-fw fa-question"></span>');
        }

        if (Array.isArray(input)) {
            for (let i = 0; i < input.length; ++i) {
                input[i].addClass('form-control');
                group.append(input[i]);
            }
        } else {
            input.addClass('form-control');
            group.append(input);
        }

        // want history
        if (history) {
            let history = $('<span class="input-group-addon btn btn-xs btn-default show-descriptor-history"><span class="fa fa-history"></span></span>');
            history.css('border-left-width', '0px');  // avoid double border
            group.append(history);
        }

        group.append(glyph);
        parent.append(group);

        return group;
    },

    /**
     * Create the widget.
     * @param format
     * @param parent
     * @param options An object of options :
     *  - bool readOnly For reading only if true
     *  - bool history History button
     */
    create: function(format, parent, options) {
        /* create/init the widget */
    },

    destroy: function() {
        /* destroy the widget if created */
    },

    cancel: function() {
        /* for widgets that performs global or server operation, and must clean such operations before destroying the
         *  widget, it must then implement the way to remove those such resources.
         */
    },

    enable: function() {
        /* enable the widget */
    },

    disable: function() {
        /* disable the widget */
    },

    set: function (format, definesValues, defaultValues, options) {
        /* define and format value(s) */
    },

    clear: function () {
        /* clear current value */
    },

    values: function() {
        /* return the formatted values */
        return null;
    },

    compare: function(a, b) {
        if (typeof a !== typeof b) {
            return false;
        }

        /* compare two values and return true if they are equals */
        return a === b;
    },

    checkCondition: function (condition, value) {
        /* check if the value of the widget respect the condition and the given value */
        return true;
    },

    bindConditionListener: function(listeners, condition, values) {
        /* bind an array of widget that are shown or hidden according the the given condition and values */
    },

    /**
     * Show a list with the previous value, and in edit mode gives the ability to set one.
     * @param appLabel Name of the application of the related model name.
     * @param modelName Model name.
     * @param objectId Entity integer identifier.
     * @param valueName Name of the value, of the descriptor model type.
     * @param descriptor Descriptor model.
     * @param options
     */
    showHistory: function(appLabel, modelName, objectId, valueName, descriptor, options) {
        options || (options = {});
        let self = this;

        // refresh values
        this.promise = $.ajax({
            url: window.application.url(['audit', 'search', 'history', 'value']),
            dataType: 'json',
            data: {
                app_label: appLabel,
                model: modelName,
                object_id: objectId,
                value: valueName
            }
        }).done(function (data) {
            let dialog = new DescribableValueHistoryDialog({
                entries: data.items,
                readOnly: self.readOnly,
                descriptor: descriptor
            });

            dialog.render();
        });
    }
};

module.exports = DescriptorFormatType;


/***/ }),
/* 14 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file entitylistfilter.js
 * @brief Filter the list of describable entity
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-10-03
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);

let View = Marionette.View.extend({
    tagName: 'div',
    className: 'entity-list-filter',
    template: __webpack_require__(333),

    ui: {
        filter_btn: 'button.entity-filter',
        entity_field: 'select.entity-field',
        operator: 'select[name=operator]',
        search_value: 'input.search-value',
        search_group: 'div.search-value-group'
    },

    events: {
        'click @ui.filter_btn': 'onFilter',
        'change @ui.entity_field': 'onChangeField',
        'change @ui.operator': 'onChangeOperator',
        'input @ui.search_value': 'onSearchValue'
    },

    initialize: function(options) {
        options || (options = {});
        this.collection = options.collection;
    },

    onRender: function() {
        let columns = this.getOption('columns') || {};

        // append others columns by alpha order
        let columnsByLabel = [];

        for (let columnName in columns) {
            let column = columns[columnName];
            columnsByLabel.push({
                name: columnName,
                label: column.label || columnName
            });
        }

        columnsByLabel.sort(function(a, b) {
            return a.label.localeCompare(b.label);
        });

        let defaultField = false;
        for (let c in columnsByLabel) {
            let column = columnsByLabel[c];

            let option = $('<option>' + column.label + '</option>');
            option.attr('value', column.name);

            this.ui.entity_field.append(option);

            if (column.name === "name") {
                defaultField = true;
            }
        }

        this.ui.entity_field.selectpicker({
            style: 'btn-default',
            container: 'body'
        });

        if (defaultField) {
            this.ui.entity_field.selectpicker('val', 'name');
        }

        // initial
        this.onChangeField();
    },

    onFilter: function () {
        if (this.validateSearchValue()) {
            let field = this.ui.entity_field.val();
            let op = this.ui.operator.val();
            let value = null;

            if (field === "name" || field === "@label") {
                op = "icontains";
            }

            if (this.widget) {
                value = this.widget.values();
            } else {
                value = this.$el.find(".search-value").val().trim();
            }

            if (value !== null || op === "isnull" || op === "notnull") {
                this.collection.filters = [{
                    type: 'term',
                    field: field,
                    value: value,
                    op: op
                }];
            } else {
                this.collection.filters = null;
            }

            this.collection.fetch({
                reset: true,
                data: {
                    sort_by: this.collection.sort_by
                }
            });
            this.collection.count();
        }
    },

    validateSearchValue: function() {
        if (!this.widget) {
            let v = this.$el.find(".search-value").val().trim();

            if (v.length > 0 && v.length < 3) {
                this.$el.find(".search-value").validateField('ok');
                return true;
            } else if (this.$el.find(".search-value").val().length === 0) {
                this.$el.find(".search-value").cleanField();
                return true;
            } else {
                this.$el.find(".search-value").validateField('ok');
                return true;
            }
        } else {
            return true;
        }
    },

    onSearchValue: function () {
        return this.validateSearchValue();
    },

    onChangeField: function () {
        let self = this;
        let field = this.ui.entity_field.val();
        let column = this.getOption('columns')[field] || {};

        if (this.widget) {
            this.widget.destroy();
            this.widget = null;
        }

        this.ui.search_value.cleanField();
        this.ui.search_group.empty();

        let operators_labels = {
            'isnull': _t('Undefined'),
            'notnull': _t('Defined'),
            'eq': _t('Exact'),
            'neq': _t('Different from'),
            'in': _t('Include'),
            'notin': _t('Not include'),
            'icontains': _t('Contains'),
            'lte': _t('Lesser than'),
            'gte': _t('Greater than'),
            'contains': _t('belong to (intersection)'),
            'not_contains': _t('Not belong to (intersection)'),
            'overlap': _t('Belong to (union)'),
            'not_overlap': _t('Not belong to (union)'),
            'contained_by': _t('Contained by'),
            'not_contained_by': _t('Not contained by')
        };

        let operators = column.available_operators || ['eq', 'neq'];
        this.ui.operator.children('option').remove();

        if (operators) {
            for (let i = 0; i < operators.length; i++) {
                let operator_code = operators[i];
                this.ui.operator.append('<option value="' + operator_code + '">' + operators_labels[operator_code] + '</option>');
            }

            this.ui.operator.selectpicker('refresh');
            if (operators) {
                if (operators.includes('eq')) {
                    this.ui.operator.selectpicker().selectpicker('val', 'eq');
                } else {
                    this.ui.operator.selectpicker().selectpicker('val', operators[0]);
                }
            }
        }

        if (column.format) {
            this.widget = window.application.descriptor.widgets.newElement(column.format.type);
            if (this.widget) {
                this.widget.create(column.format, this.ui.search_group, {
                    readOnly: false,
                    descriptorId: column.id
                });

                this.widget.el.on('keydown', function(e) {
                    if (e.keyCode === 13) {
                       self.onFilter();
                    }
                }).on('input', $.proxy(this.onSearchValue, this));

                return;
            }

            this.widget = null;
        }

        // or default input
        let input = $('<input type="text" class="search-value form-control" name="search-value"/>');
        this.ui.search_group.append(input);

        input.on('keydown', function(e) {
            if (e.keyCode === 13) {
               self.onFilter();
            }
        }).on('input', $.proxy(this.onSearchValue, this));
    },

    onChangeOperator: function() {
        let self = this;
        let field = this.ui.entity_field.val();
        let column = this.getOption('columns')[field] || {};
        let op = this.ui.operator.val();

        if (this.widget) {
            this.widget.destroy();
            this.widget = null;
        }

        this.ui.search_value.cleanField();
        this.ui.search_group.empty();

        if (column.format) {
            this.widget = window.application.descriptor.widgets.newElement(column.format.type);
            if (this.widget) {
                this.widget.create(column.format, this.ui.search_group, {
                    multiple: op === "in" || op === "notin",
                    readOnly: false,
                    descriptorId: column.id
                });

                this.widget.el.on('keydown', function(e) {
                    if (e.keyCode === 13) {
                       self.onFilter();
                    }
                }).on('input', $.proxy(this.onSearchValue, this));

                return;
            }

            this.widget = null;
        }

        // or default input
        let input = $('<input type="text" class="search-value form-control" name="search-value"/>');
        this.ui.search_group.append(input);

        input.on('keydown', function(e) {
            if (e.keyCode === 13) {
               self.onFilter();
            }
        }).on('input', $.proxy(this.onSearchValue, this));
    }
});

module.exports = View;


/***/ }),
/* 15 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
with (obj) {
__p += '<div class="describable-header" style="width: 100%"><div class="btn-group-vertical" role="group" style="width: 100%"> ';
 for (var i = 0; i < actions.length; ++i) { ;
__p += ' <button type="button" class="btn ' +
__e( options[actions[i]].className ) +
'" name="' +
__e( actions[i] ) +
'">' +
__e( _t(options[actions[i]].label) ) +
'</button> ';
 } ;
__p += ' </div></div>';

}
return __p
};

/*
original source:

<div class="describable-header" style="width: 100%"><div class="btn-group-vertical" role="group" style="width: 100%"> <% for (var i = 0; i < actions.length; ++i) { %> <button type="button" class="btn <%- options[actions[i]].className %>" name="<%- actions[i] %>"><%- _t(options[actions[i]].label) %></button> <% } %> </div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 16 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
with (obj) {
__p += '<div class="table-advanced-head"><table class="table table-striped table-advanced"><thead><tr scope="row"> ';
 for (var i = 0; i < columnsList.length; ++i) {
                    var columnName = columnsList[i];
                    var column = columnsOptions[columnName];
                    var classes = "unselectable";
                    if (column.minWidth === true) classes += " title-column";
                    if (column.action != undefined) classes += " action";
                    if (column.glyphicon != undefined) classes += " glyph-fixed-column";
                    if (column.fixed) classes += " fixed-column"; ;
__p += ' <th name="' +
__e( columnName ) +
'" class="' +
__e( classes ) +
'"> ';
 if (column.glyphicon != undefined) { ;
__p += ' ';
 if (column.fixed) { ;
__p += ' <span class="fa ' +
__e( column.glyphicon[0] ) +
' column-action"></span> ';
 } else { ;
__p += ' <span class="fa ' +
__e( column.glyphicon[0] ) +
' column-action" draggable="true"></span> ';
 } ;
__p += ' ';
 } else { ;
__p += ' <span class="column-sorter fa fa-sort column-action action"></span> ';
 if (column.fixed) { ;
__p += ' <span class="column-label">' +
__e( column.label || column.name ) +
'</span> ';
 } else { ;
__p += ' <span class="column-label" draggable="true">' +
__e( column.label || column.name ) +
'</span> ';
 } ;
__p += ' ';
 } ;
__p += ' </th> ';
 } ;
__p += ' </tr></thead></table></div><div class="table-advanced-body"><table class="table table-striped table-advanced"><tbody class="entity-list"></tbody></table></div><div class="placeholder-column"><span class="action fa fa-th-list add-column" type="button"></span></div><div class="clearfix add-column-menu" style="position: absolute; display:none"><div class="input-group"><input type="text" name="add-column-filter" class="form-control" autofocus="" autocomplete="off"> <span class="input-group-addon"><span class="fa fa-search"></span></span></div><ul class="columns-list"></ul><div class="btn-group"><span class="btn btn-default select-all"><span class="fa fa-check-square-o"></span>&nbsp;' +
__e( _t("All") ) +
'</span><span class="btn btn-default select-none"><span class="fa fa-square-o"></span>&nbsp;' +
__e( _t("None") ) +
'</span><span class="btn btn-default select-accept"><span class="fa fa-check"></span>&nbsp;' +
__e( _t("Accept") ) +
'</span><span class="btn btn-default select-cancel"><span class="fa fa-times"></span>&nbsp;' +
__e( _t("Cancel") ) +
'</span></div></div>';

}
return __p
};

/*
original source:

<div class="table-advanced-head"><table class="table table-striped table-advanced"><thead><tr scope="row"> <% for (var i = 0; i < columnsList.length; ++i) {
                    var columnName = columnsList[i];
                    var column = columnsOptions[columnName];
                    var classes = "unselectable";
                    if (column.minWidth === true) classes += " title-column";
                    if (column.action != undefined) classes += " action";
                    if (column.glyphicon != undefined) classes += " glyph-fixed-column";
                    if (column.fixed) classes += " fixed-column"; %> <th name="<%- columnName %>" class="<%- classes %>"> <% if (column.glyphicon != undefined) { %> <% if (column.fixed) { %> <span class="fa <%- column.glyphicon[0] %> column-action"></span> <% } else { %> <span class="fa <%- column.glyphicon[0] %> column-action" draggable="true"></span> <% } %> <% } else { %> <span class="column-sorter fa fa-sort column-action action"></span> <% if (column.fixed) { %> <span class="column-label"><%- column.label || column.name %></span> <% } else { %> <span class="column-label" draggable="true"><%- column.label || column.name %></span> <% } %> <% } %> </th> <% } %> </tr></thead></table></div><div class="table-advanced-body"><table class="table table-striped table-advanced"><tbody class="entity-list"></tbody></table></div><div class="placeholder-column"><span class="action fa fa-th-list add-column" type="button"></span></div><div class="clearfix add-column-menu" style="position: absolute; display:none"><div class="input-group"><input type="text" name="add-column-filter" class="form-control" autofocus="" autocomplete="off"> <span class="input-group-addon"><span class="fa fa-search"></span></span></div><ul class="columns-list"></ul><div class="btn-group"><span class="btn btn-default select-all"><span class="fa fa-check-square-o"></span>&nbsp;<%- _t("All") %></span><span class="btn btn-default select-none"><span class="fa fa-square-o"></span>&nbsp;<%- _t("None") %></span><span class="btn btn-default select-accept"><span class="fa fa-check"></span>&nbsp;<%- _t("Accept") %></span><span class="btn btn-default select-cancel"><span class="fa fa-times"></span>&nbsp;<%- _t("Cancel") %></span></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 17 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {/**
 * @file layout.js
 * @brief Base for layout view using tabs.
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-03-07
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);

let Layout = Marionette.View.extend({
    attributes: {
        style: "height: 100%;"
    },

    ui: {
        tabs_buttons: 'ul.nav-tabs > li > a',
        tabs_contents: 'div.tab-content > div.tab-pane',
        tabs: 'a[data-toggle="tab"]',
        initial_pane: 'div.tab-pane.active'
    },

    childViewEvents: {
        'select:tab': function (region, child) {
            this.triggerMethod('select:tab', region, child);
        },
        'dom:refresh': function(child) {
            let tab = this.$el.find('div.tab-pane.active').attr('name');
            let region = this.getRegion(tab);
            let view = this.getChildView(tab);

            // update child of current tab
            if (view && view === child) {
                this.triggerMethod('select:tab', region, view);

                if (view.onShowTab) {
                    view.onShowTab(region);
                } else if (window.application.main.getRightView()) {
                    window.application.main.defaultRightView();
                }
            }
        }
    },

    constructor: function() {
        let prototype = this.constructor.prototype;

        this.events = {};
        this.defaultOptions = {};
        this.ui = {};
        this.attributes = {};
        this.className = "";

        while (prototype) {
            if (prototype.hasOwnProperty("events")) {
                _.defaults(this.events, prototype.events);
            }
            if (prototype.hasOwnProperty("defaultOptions")) {
                _.defaults(this.defaultOptions, prototype.defaultOptions);
            }
            if (prototype.hasOwnProperty("ui")) {
                _.defaults(this.ui, prototype.ui);
            }
            if (prototype.hasOwnProperty("attributes")) {
                _.defaults(this.attributes, prototype.attributes);
            }
            if (prototype.hasOwnProperty("className")) {
                this.className += " " + prototype.className;
            }
            prototype = prototype.constructor.__super__;
        }

        Marionette.View.apply(this, arguments);
    },

    initialize: function(options) {
        Layout.__super__.initialize.apply(this, arguments);

        options || (options = {});

        this.activeTab = undefined;
        this.initialTab = options['initialTab'] || null;
    },

    /*onBeforeAttach*/updateTabState: function() {
        this.activeTab = this.ui.initial_pane.attr('name');

        // initial tab is defined by the initializer of the view, and is the last part of the url path
        let tabExits = this.ui.tabs_buttons.filter('[aria-controls="' + this.initialTab + '"]').length > 0;
        if (!tabExits) {
            if (!this.model.isNew()) {
                // if the tab is invalid, ignore it and update the url without the invalid tab name
                let href = Backbone.history.getFragment();

                if (href.endsWith(this.initialTab + '/')) {
                    href = href.replace(this.initialTab + '/', '');
                }

                Backbone.history.navigate(href, {replace: true, trigger: false});
            }

            this.initialTab = null;
        }

        // if the initial tab is different from active tab
        if (this.initialTab !== null && this.initialTab !== this.activeTab) {
            // un-active the default
            this.ui.tabs_buttons.filter('[aria-controls="' + this.activeTab + '"]').parent().removeClass('active');
            this.ui.tabs_contents.filter('[name="' + this.activeTab + '"]').removeClass('active');

            // activate the initial
            this.ui.tabs_buttons.filter('[aria-controls="' + this.initialTab + '"]').parent().addClass('active');
            this.ui.tabs_contents.filter('[name="' + this.initialTab + '"]').addClass('active');

            this.activeTab = this.initialTab;
        }

        this.ui.tabs.on("shown.bs.tab", $.proxy(this.onShowBsTab, this));
        this.ui.tabs.on("hide.bs.tab", $.proxy(this.onHideBsTab, this));
    },

    onDomRefresh: function() {
        this.updateTabState();

        let region = this.getRegion(this.activeTab);
        if (region) {
            if (region.currentView && region.currentView.onShowTab) {
                region.currentView.onShowTab(this);
            } else if (window.application.main.getRightView()) {
                window.application.main.defaultRightView();
            }

            // initial trigger for parents
            this.triggerMethod('select:tab', region, region.currentView);
        }
    },

    setActiveTab: function(tab) {
        if (!this.activeTab) {
            this.activeTab = this.ui.initial_pane.attr('name');
        }

        let tabExits = this.ui.tabs_buttons.filter('[aria-controls="' + tab + '"]').length > 0;
        if (this.activeTab !== tab && tabExits) {
            // un-active the default
            this.ui.tabs_buttons.filter('[aria-controls="' + this.activeTab + '"]').parent().removeClass('active');
            this.ui.tabs_contents.filter('[name="' + this.activeTab + '"]').removeClass('active');

            // activate the initial
            this.ui.tabs_buttons.filter('[aria-controls="' + tab + '"]').parent().addClass('active');
            this.ui.tabs_contents.filter('[name="' + tab + '"]').addClass('active');

            let previousTab = this.activeTab;
            this.activeTab = tab;

            let region = this.getRegion(tab);
            if (region) {
                if (region.currentView && region.currentView.onShowTab) {
                    region.currentView.onShowTab(this);
                } else if (window.application.main.getRightView()) {
                   window.application.main.defaultRightView();
                }

                // trigger for parents
                if (region.currentView) {
                    this.triggerMethod('select:tab', region, region.currentView);
                }

                // update the url for the history with the new active tab
                if (!this.model.isNew()) {
                    let href = Backbone.history.getFragment();

                    if (href.endsWith(previousTab + '/')) {
                        href = href.replace(previousTab + '/', '');
                    }

                    Backbone.history.navigate(href + this.activeTab + '/', {trigger: false});
                }
            }
        }
    },

    onShowBsTab: function(e) {
        // e.target current tab, e.relatedTarget previous tab
        let tab = e.target.getAttribute('aria-controls');
        this.activeTab = tab;

        let region = this.getRegion(tab);
        if (region) {
            if (region.currentView && region.currentView.onShowTab) {
                region.currentView.onShowTab(this);
            } else if (window.application.main.getRightView()) {
                window.application.main.defaultRightView();
            }

            // trigger for parents
            if (region.currentView) {
                this.triggerMethod('select:tab', region, region.currentView);
            }

            // update the url for the history with the new active tab
            if (!this.model.isNew() && e.relatedTarget) {
                let href = Backbone.history.getFragment();
                let previousTab = e.relatedTarget.getAttribute('aria-controls');

                if (href.endsWith(previousTab + '/')) {
                    href = href.replace(previousTab + '/', '');
                }

                Backbone.history.navigate(href + this.activeTab + '/', {trigger: false});
            }
        }
    },

    onHideBsTab: function(e) {
        let tab = e.target.getAttribute('aria-controls');

        let view = this.getChildView(tab);
        if (view && view.onHideTab) {
            view.onHideTab(this);
        }

        window.application.main.defaultRightView();
    },

    onDestroy: function() {
        window.application.main.defaultRightView();
    },

    onResize: function() {
        if (this.activeTab) {
            let view = this.getChildView(this.activeTab);
            if (view && view.onResize) {
                view.onResize();
            }
        }
    }
});

module.exports = Layout;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 18 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {/**
 * @file descriptorlayout.js
 * @brief
 * @author Medhi BOULNEMOUR (INRA UMR1095)
 * @date 2018-01-19
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let layoutDescriptorModel = __webpack_require__(223);
let CountableCollection = __webpack_require__(9);

let Collection = CountableCollection.extend({
    url: function() {
        return window.application.url(['descriptor', 'layout', this.model_id, 'descriptor']);
    },
    model: layoutDescriptorModel,
    comparator: 'position',

    initialize: function(models, options) {
        options || (options = {});
        this.model_id = options.model_id;
        this.panel_index = options.panel_index;
    },

    fetch: function(options) {
        options || (options = {});
        let data = (options.data || {});

        let opts = _.clone(options);
        opts.data = data;

        if (this.panel_index || this.panel_index === 0) {
            opts.data.panel_index = JSON.stringify(this.panel_index)
        }
        return CountableCollection.prototype.fetch.call(this, opts);
    },

});

module.exports = Collection;
/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 19 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file selectoption.js
 * @brief Renderer for single value based on collection, and for select widgets.
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-05-20
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Marionette = __webpack_require__(1);

let Renderer = Marionette.Object.extend({
    template: __webpack_require__(321),
    tagName: 'select',

    initialize: function(options) {
        Marionette.Object.prototype.initialize.apply(this, options);

        this.className = options.className;
        this.collection = options.collection;

        // static list can use the sync option
        if (!!options.sync) {
            this.render();
        } else {
            // lazy loading
            if ('filters' in options) {
                this.collection.fetch({data: {filters: JSON.stringify(options.filters)}});
            } else {
                this.collection.fetch();
            }

            this.collection.on("sync", this.render, this);  // render the template once got
            this.collection.on("add", this.render, this);
            this.collection.on("remove", this.render, this);
            this.collection.on("reset", this.render, this);
        }
    },

    render: function() {
        this.html = Marionette.Renderer.render(this.template, {items: this.collection.toJSON()});
        // @todo could trigger an event captured by renderer view methods (not using collection:sync)
        // or directly create a select2 and a selectpicker view, bound to collection managed with region in parent
    },

    /**
     * For a given jquery selector replace the HTML content of each element by the label corresponding to the value
     * defined into each element node.
     * @param el Selector with element to process
     * @param idOrValue Default look for value into the value attribute, but you can specify another one
     */
    elHtmlFromValue: function(el, idOrValue) {
        let self = this;
        idOrValue || (idOrValue = 'value');

        if (this.collection.size() > 0) {
            let value = el.attr("value");

            let model = self.collection.find(function(model) {
                return model.get(idOrValue) == value;
            });

            el.html(model ? model.get('label') : "");
        } else {
            this.collection.on("sync", function () {
                let value = el.attr("value");

                let model = self.collection.find(function(model) {
                    return model.get(idOrValue) == value;
                });

                el.html(model ? model.get('label') : "");
            }, this);
        }
    },

    /**
     * Given a parent, for any children (direct or not) that having the class name related to this select option model,
     * it replaces the HTML content of each element by the label corresponding to the value
     * defined into each element node.
     * @param parent Parent selector of children to process
     * @param idOrValue Default look for value into the value attribute, but you can specify another one
     */
    htmlFromValue: function(parent, idOrValue) {
        let self = this;
        idOrValue || (idOrValue = 'value');

        if (this.collection.size() > 0) {
            $(parent).find('.' + self.className).each(function (idx, el) {
                let _el = $(el);
                let value = _el.attr("value");

                let model = self.collection.find(function(model) {
                    return model.get(idOrValue) == value;
                });

                _el.html(model ? model.get('label') : "");
            });
        } else {
            this.collection.on("sync", function () {
                $(parent).find('.' + self.className).each(function (idx, el) {
                    let _el = $(el);
                    let value = _el.attr("value");

                    let model = self.collection.find(function(model) {
                        return model.get(idOrValue) == value;
                    });

                    _el.html(model ? model.get('label') : "");
                });
            }, this);
        }
    },

    /**
     * For a given jquery selector, for each element, replace the a content of a specified attribute by the label
     * corresponding to the value defined into each element node.
     * @param el Selector with element to process
     * @param attribute Name of the attribute to defines the label
     * @param idOrValue Default look for value into the value attribute, but you can specify another one
     */
    elAttributeFromValue: function(el, attribute, idOrValue) {
        let self = this;
        idOrValue || (idOrValue = 'value');

        if (this.collection.size() > 0) {
            let value = el.attr("value");

            let model = self.collection.find(function(model) {
                return model.get(idOrValue) == value;
            });

            el.attr(attribute, model ? model.get('label') : "");
        } else {
            this.collection.on("sync", function () {
                let value = el.attr("value");

                let model = self.collection.find(function(model) {
                    return model.get(idOrValue) == value;
                });

                el.attr(attribute, model ? model.get('label') : "");
            }, this);
        }
    },

    /**
     * Given a parent, for any children (direct or not) that having the class name related to this select option model,
     * it replaces the a content of a specified attribute by the label corresponding to the value defined into each
     * element node.
     * @param parent Parent selector of children to process
     * @param attribute Name of the attribute to defines the label
     * @param idOrValue Default look for value into the value attribute, but you can specify another one
     */
    attributeFromValue: function(parent, attribute, idOrValue) {
        let self = this;
        idOrValue || (idOrValue = 'value');

        if (this.collection.size() > 0) {
            $(parent).find('.' + self.className).each(function (idx, el) {
                let _el = $(el);
                let value = _el.attr("value");

                let model = self.collection.find(function(model) {
                    return model.get(idOrValue) == value;
                });

                _el.attr(attribute, model ? model.get('label') : "");
            });
        } else {
            this.collection.on("sync", function () {
                $(parent).find('.' + self.className).each(function (idx, el) {
                    let _el = $(el);
                    let value = _el.attr("value");

                    let model = self.collection.find(function(model) {
                        return model.get(idOrValue) == value;
                    });

                    _el.attr(attribute, model ? model.get('label') : "");
                });
            }, this);
        }
    },

    /**
     * Draw the options for a given select element. Each value is found from the related collection.
     * @param sel Select element selector
     * @param widget If true create a bootstrap select picker in front of this select
     * @param emptyValue If true prepend an empty choice value
     * @param initialValue If defined set the current value to its
     * @param filters
     * @return A promise when select is rendered.
     */
    drawSelect: function(sel, widget, emptyValue, initialValue, filters) {
        widget != undefined || (widget = true);
        emptyValue != undefined || (emptyValue = false);
        filters != undefined || (filters = null);

        let deferred = $.Deferred();

        if (this.collection.size() > 0) {
            let s = $(sel);
            let content = this.html;

            if (filters) {
                 content = this._render(filters);
            }
            if (emptyValue) {
                let emptyOption = "<option value=''></option>";
                s.html(emptyOption + content);
            } else {
                s.html(content);
            }

            if (widget) {
                s.selectpicker({
                    style: 'btn-default',
                    container: 'body'
                });
            }

            if (initialValue) {
                s.selectpicker('val', initialValue);
            }

            deferred.resolve();
        } else {
            let self = this;

            this.collection.on("sync", function () {
                let s = $(sel);
                let content = self.html;

                if (filters) {
                    content = this._render(filters);
                }
                if (emptyValue) {
                    let emptyOption = "<option value=''></option>";
                    s.html(emptyOption + content);
                } else {
                    s.html(content);
                }

                if (widget) {
                    s.selectpicker({
                        style: 'btn-default',
                        container: 'body'
                    });
                }

                if (initialValue) {
                    s.selectpicker('val', initialValue);
                }

                deferred.resolve();
            }, this);
        }

        return deferred.promise();
    },

    _render: function(filters) {
        let results = this.collection.where(filters);
        let array = [];

        // toJSON inconsistency in backbone, it is not possible using where so do it
        for (let i = 0; i < results.length; ++i) {
            array.push(results[i].attributes);
        }

        return Marionette.Renderer.render(this.template, {items: array});
    }
});

module.exports = Renderer;


/***/ }),
/* 20 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file entityrename.js
 * @brief A easy Valid/Cancel dialog to change entity name property.
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-02-01
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Dialog = __webpack_require__(5);

let View = Dialog.extend({
    attributes: {
        'id': 'dlg_change_rename'
    },
    template: __webpack_require__(362),

    templateContext: function () {
        return {
            title: this.title,
            maxlength: this.maxlength
        };
    },

    ui: {
        title: "h4.modal-title",
        name: "input.entity-name",
        confirm: "button.confirm"
    },

    events: {
        'click @ui.confirm': 'onConfirm',
        'input @ui.name': 'onNameInput'
    },

    title: 'Rename',
    minlength: 3,
    maxlength: 128,
    pattern: '.*',  // @todo

    initialize: function(options) {
        View.__super__.initialize.apply(this, arguments);

        this.mergeOptions(options, ['title', 'minlength', 'maxlength', 'pattern']);
    },

    onRender: function () {
        View.__super__.onRender.apply(this);

        this.ui.title.text(this.title);
    },

    onBeforeDestroy: function() {
        View.__super__.onBeforeDestroy.apply(this);
    },

    onNameInput: function () {
        this.validateName();
    },

    validateName: function () {
        let v = this.ui.name.val();
        let re = /^[a-zA-Z0-9_\-]+$/i;

        if (v.length > 0 && !re.test(v)) {
            this.ui.name.validateField('failed', _t("Invalid characters (alphanumeric, _ and - only)"));
            return false;
        } else if (v.length < this.minlength && this.minlength > 0) {
            this.ui.name.validateField(
                'failed',
                _t('characters_min', {count: this.minlength}));
            return false;
        } else if (v.length > this.maxlength && this.maxlength > 0) {
            this.ui.name.validateField(
                'failed',
                _t('characters_max', {count: this.maxlength}));
            return false;
        }

        this.ui.name.validateField('ok');

        return true;
    },

    onApply: function () {
        let name = this.ui.name.val();
        let model = this.getOption('model');

        if (this.validateName()) {
            model.save({name: name}, {
                patch: true, wait: true, success: function () {
                    $.alert.success('Done');
                }
            });
            this.trigger('dialog:apply');
            this.destroy();
        }
    }
});

module.exports = View;


/***/ }),
/* 21 */
/***/ (function(module, exports) {

/*
	MIT License http://www.opensource.org/licenses/mit-license.php
	Author Tobias Koppers @sokra
*/
// css base code, injected by the css-loader
module.exports = function(useSourceMap) {
	var list = [];

	// return the list of modules as css string
	list.toString = function toString() {
		return this.map(function (item) {
			var content = cssWithMappingToString(item, useSourceMap);
			if(item[2]) {
				return "@media " + item[2] + "{" + content + "}";
			} else {
				return content;
			}
		}).join("");
	};

	// import a list of modules into the list
	list.i = function(modules, mediaQuery) {
		if(typeof modules === "string")
			modules = [[null, modules, ""]];
		var alreadyImportedModules = {};
		for(var i = 0; i < this.length; i++) {
			var id = this[i][0];
			if(typeof id === "number")
				alreadyImportedModules[id] = true;
		}
		for(i = 0; i < modules.length; i++) {
			var item = modules[i];
			// skip already imported module
			// this implementation is not 100% perfect for weird media query combinations
			//  when a module is imported multiple times with different media queries.
			//  I hope this will never occur (Hey this way we have smaller bundles)
			if(typeof item[0] !== "number" || !alreadyImportedModules[item[0]]) {
				if(mediaQuery && !item[2]) {
					item[2] = mediaQuery;
				} else if(mediaQuery) {
					item[2] = "(" + item[2] + ") and (" + mediaQuery + ")";
				}
				list.push(item);
			}
		}
	};
	return list;
};

function cssWithMappingToString(item, useSourceMap) {
	var content = item[1] || '';
	var cssMapping = item[3];
	if (!cssMapping) {
		return content;
	}

	if (useSourceMap && typeof btoa === 'function') {
		var sourceMapping = toComment(cssMapping);
		var sourceURLs = cssMapping.sources.map(function (source) {
			return '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'
		});

		return [content].concat(sourceURLs).concat([sourceMapping]).join('\n');
	}

	return [content].join('\n');
}

// Adapted from convert-source-map (MIT)
function toComment(sourceMap) {
	// eslint-disable-next-line no-undef
	var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));
	var data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;

	return '/*# ' + data + ' */';
}


/***/ }),
/* 22 */
/***/ (function(module, exports, __webpack_require__) {

/*
	MIT License http://www.opensource.org/licenses/mit-license.php
	Author Tobias Koppers @sokra
*/

var stylesInDom = {};

var	memoize = function (fn) {
	var memo;

	return function () {
		if (typeof memo === "undefined") memo = fn.apply(this, arguments);
		return memo;
	};
};

var isOldIE = memoize(function () {
	// Test for IE <= 9 as proposed by Browserhacks
	// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805
	// Tests for existence of standard globals is to allow style-loader
	// to operate correctly into non-standard environments
	// @see https://github.com/webpack-contrib/style-loader/issues/177
	return window && document && document.all && !window.atob;
});

var getElement = (function (fn) {
	var memo = {};

	return function(selector) {
		if (typeof memo[selector] === "undefined") {
			var styleTarget = fn.call(this, selector);
			// Special case to return head of iframe instead of iframe itself
			if (styleTarget instanceof window.HTMLIFrameElement) {
				try {
					// This will throw an exception if access to iframe is blocked
					// due to cross-origin restrictions
					styleTarget = styleTarget.contentDocument.head;
				} catch(e) {
					styleTarget = null;
				}
			}
			memo[selector] = styleTarget;
		}
		return memo[selector]
	};
})(function (target) {
	return document.querySelector(target)
});

var singleton = null;
var	singletonCounter = 0;
var	stylesInsertedAtTop = [];

var	fixUrls = __webpack_require__(298);

module.exports = function(list, options) {
	if (typeof DEBUG !== "undefined" && DEBUG) {
		if (typeof document !== "object") throw new Error("The style-loader cannot be used in a non-browser environment");
	}

	options = options || {};

	options.attrs = typeof options.attrs === "object" ? options.attrs : {};

	// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>
	// tags it will allow on a page
	if (!options.singleton && typeof options.singleton !== "boolean") options.singleton = isOldIE();

	// By default, add <style> tags to the <head> element
	if (!options.insertInto) options.insertInto = "head";

	// By default, add <style> tags to the bottom of the target
	if (!options.insertAt) options.insertAt = "bottom";

	var styles = listToStyles(list, options);

	addStylesToDom(styles, options);

	return function update (newList) {
		var mayRemove = [];

		for (var i = 0; i < styles.length; i++) {
			var item = styles[i];
			var domStyle = stylesInDom[item.id];

			domStyle.refs--;
			mayRemove.push(domStyle);
		}

		if(newList) {
			var newStyles = listToStyles(newList, options);
			addStylesToDom(newStyles, options);
		}

		for (var i = 0; i < mayRemove.length; i++) {
			var domStyle = mayRemove[i];

			if(domStyle.refs === 0) {
				for (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();

				delete stylesInDom[domStyle.id];
			}
		}
	};
};

function addStylesToDom (styles, options) {
	for (var i = 0; i < styles.length; i++) {
		var item = styles[i];
		var domStyle = stylesInDom[item.id];

		if(domStyle) {
			domStyle.refs++;

			for(var j = 0; j < domStyle.parts.length; j++) {
				domStyle.parts[j](item.parts[j]);
			}

			for(; j < item.parts.length; j++) {
				domStyle.parts.push(addStyle(item.parts[j], options));
			}
		} else {
			var parts = [];

			for(var j = 0; j < item.parts.length; j++) {
				parts.push(addStyle(item.parts[j], options));
			}

			stylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};
		}
	}
}

function listToStyles (list, options) {
	var styles = [];
	var newStyles = {};

	for (var i = 0; i < list.length; i++) {
		var item = list[i];
		var id = options.base ? item[0] + options.base : item[0];
		var css = item[1];
		var media = item[2];
		var sourceMap = item[3];
		var part = {css: css, media: media, sourceMap: sourceMap};

		if(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});
		else newStyles[id].parts.push(part);
	}

	return styles;
}

function insertStyleElement (options, style) {
	var target = getElement(options.insertInto)

	if (!target) {
		throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");
	}

	var lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];

	if (options.insertAt === "top") {
		if (!lastStyleElementInsertedAtTop) {
			target.insertBefore(style, target.firstChild);
		} else if (lastStyleElementInsertedAtTop.nextSibling) {
			target.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);
		} else {
			target.appendChild(style);
		}
		stylesInsertedAtTop.push(style);
	} else if (options.insertAt === "bottom") {
		target.appendChild(style);
	} else if (typeof options.insertAt === "object" && options.insertAt.before) {
		var nextSibling = getElement(options.insertInto + " " + options.insertAt.before);
		target.insertBefore(style, nextSibling);
	} else {
		throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");
	}
}

function removeStyleElement (style) {
	if (style.parentNode === null) return false;
	style.parentNode.removeChild(style);

	var idx = stylesInsertedAtTop.indexOf(style);
	if(idx >= 0) {
		stylesInsertedAtTop.splice(idx, 1);
	}
}

function createStyleElement (options) {
	var style = document.createElement("style");

	options.attrs.type = "text/css";

	addAttrs(style, options.attrs);
	insertStyleElement(options, style);

	return style;
}

function createLinkElement (options) {
	var link = document.createElement("link");

	options.attrs.type = "text/css";
	options.attrs.rel = "stylesheet";

	addAttrs(link, options.attrs);
	insertStyleElement(options, link);

	return link;
}

function addAttrs (el, attrs) {
	Object.keys(attrs).forEach(function (key) {
		el.setAttribute(key, attrs[key]);
	});
}

function addStyle (obj, options) {
	var style, update, remove, result;

	// If a transform function was defined, run it on the css
	if (options.transform && obj.css) {
	    result = options.transform(obj.css);

	    if (result) {
	    	// If transform returns a value, use that instead of the original css.
	    	// This allows running runtime transformations on the css.
	    	obj.css = result;
	    } else {
	    	// If the transform function returns a falsy value, don't add this css.
	    	// This allows conditional loading of css
	    	return function() {
	    		// noop
	    	};
	    }
	}

	if (options.singleton) {
		var styleIndex = singletonCounter++;

		style = singleton || (singleton = createStyleElement(options));

		update = applyToSingletonTag.bind(null, style, styleIndex, false);
		remove = applyToSingletonTag.bind(null, style, styleIndex, true);

	} else if (
		obj.sourceMap &&
		typeof URL === "function" &&
		typeof URL.createObjectURL === "function" &&
		typeof URL.revokeObjectURL === "function" &&
		typeof Blob === "function" &&
		typeof btoa === "function"
	) {
		style = createLinkElement(options);
		update = updateLink.bind(null, style, options);
		remove = function () {
			removeStyleElement(style);

			if(style.href) URL.revokeObjectURL(style.href);
		};
	} else {
		style = createStyleElement(options);
		update = applyToTag.bind(null, style);
		remove = function () {
			removeStyleElement(style);
		};
	}

	update(obj);

	return function updateStyle (newObj) {
		if (newObj) {
			if (
				newObj.css === obj.css &&
				newObj.media === obj.media &&
				newObj.sourceMap === obj.sourceMap
			) {
				return;
			}

			update(obj = newObj);
		} else {
			remove();
		}
	};
}

var replaceText = (function () {
	var textStore = [];

	return function (index, replacement) {
		textStore[index] = replacement;

		return textStore.filter(Boolean).join('\n');
	};
})();

function applyToSingletonTag (style, index, remove, obj) {
	var css = remove ? "" : obj.css;

	if (style.styleSheet) {
		style.styleSheet.cssText = replaceText(index, css);
	} else {
		var cssNode = document.createTextNode(css);
		var childNodes = style.childNodes;

		if (childNodes[index]) style.removeChild(childNodes[index]);

		if (childNodes.length) {
			style.insertBefore(cssNode, childNodes[index]);
		} else {
			style.appendChild(cssNode);
		}
	}
}

function applyToTag (style, obj) {
	var css = obj.css;
	var media = obj.media;

	if(media) {
		style.setAttribute("media", media)
	}

	if(style.styleSheet) {
		style.styleSheet.cssText = css;
	} else {
		while(style.firstChild) {
			style.removeChild(style.firstChild);
		}

		style.appendChild(document.createTextNode(css));
	}
}

function updateLink (link, options, obj) {
	var css = obj.css;
	var sourceMap = obj.sourceMap;

	/*
		If convertToAbsoluteUrls isn't defined, but sourcemaps are enabled
		and there is no publicPath defined then lets turn convertToAbsoluteUrls
		on by default.  Otherwise default to the convertToAbsoluteUrls option
		directly
	*/
	var autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;

	if (options.convertToAbsoluteUrls || autoFixUrls) {
		css = fixUrls(css);
	}

	if (sourceMap) {
		// http://stackoverflow.com/a/26603875
		css += "\n/*# sourceMappingURL=data:application/json;base64," + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + " */";
	}

	var blob = new Blob([css], { type: "text/css" });

	var oldSrc = link.href;

	link.href = URL.createObjectURL(blob);

	if(oldSrc) URL.revokeObjectURL(oldSrc);
}


/***/ }),
/* 23 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file actionstepformat.js
 * @brief Base class for any action step format.
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-12-11
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);

let ActionStepFormat = function() {
    this.ACTION_TYPE_STANDARD = 0;
    this.ACTION_TYPE_ITERATIVE = 1;
    this.ACTION_TYPE_USER = 2;

    this.name = "";          //!< format name
    this.group = "";         //!< related informal group name
    this.description = "";   //!< description of the step used during configuration and processing

    this.acceptFormat = [];
    this.dataFormat = [];
    this.type = this.ACTION_TYPE_STANDARD;
};

ActionStepFormat.prototype = {
    /**
     * Generate the default data related to the step during configuration of the step.
     * To be overridden by the specialization.
     */
    defaultFormat: function() {
        return {};
    }
};

let downloadData = function (dataFormat, stepIndex) {
    if (dataFormat === 'csv') {
        // download the document as csv
        let form = $('<form></form>');

        form.append('<input type="number" name="step_index" value="' + stepIndex + '">');
        form.append('<input type="text" name="format" value="csv">');

        form.attr('action', window.application.url(['accession', 'action', this.model.get('id'), 'download']))
            .appendTo('body').submit().remove();
    } else if (dataFormat === 'xlsx') {
        // download the document as xlsx
        let form = $('<form></form>');

        form.append('<input type="number" name="step_index" value="' + stepIndex + '">');
        form.append('<input type="text" name="format" value="xlsx">');

        form.attr('action', window.application.url(['accession', 'action', this.model.get('id'), 'download']))
            .appendTo('body').submit().remove();
    }
};

/**
 * Default view for the configuration of the step of the action type. To be specialized.
 */
ActionStepFormat.ActionStepFormatDetailsView = Marionette.View.extend({
    className: 'action-step-format-details',
    template: "<div></div>",

    initialize: function() {
        this.listenTo(this.model, 'change', this.render, this);
    },

    onRender: function() {},

    /**
     * Read the options from the UI and setup them to the action type format (related step).
     */
    storeData: function() {}
});

/**
 * Default view for the processing of a step of an action. To be specialized.
 */
ActionStepFormat.ActionStepProcessView = Marionette.View.extend({
    className: 'action-step-process',
    template: "<div></div>",

    initialize: function() {
        this.listenTo(this.model, 'change', this.render, this);
    },

    onRender: function() {},

    /**
     * Get the currently defined inputs type.
     */
    inputsType: function() {
        return 'none';
    },

    /**
     * Get the related list of inputs depending of the inputs type :
     *  - an array if manual selection
     *  - an id if a panel
     *  - a file object if import of a CSV or XLSX
     */
    inputsData: function() {
        return null;
    },

    /**
     * Array of string of defined columns for the related inputs data.
     * Only if the action is in 'list' mode.
     */
    inputsColumns: function() {
        return null;
    },

    stepData: function() {
        return this.model.get('data')['steps'][this.getOption('stepIndex')];
    },

    /**
     * Download the data of the step, format as csv or xlsx.
     * @param data_format
     */
    downloadData: downloadData,

    /**
     * Get the working list view when available (related to its panel).
     */
    showTodoPanel: function(region) {
        region.empty();
    },

    /**
     * Show the done list view when available (related to its panel).
     */
    showDonePanel: function(region) {
        region.empty();
    }
});

/**
 * Default view for the reading-back of a step of an action (once processed for read-only). To be specialized.
 */
ActionStepFormat.ActionStepReadView = Marionette.View.extend({
    className: 'action-step-read',
    template: __webpack_require__(326),

    ui: {
        get_data: 'select[name=get-data]',
    },

    events: {
        'change @ui.get_data': 'onGetData',
    },

    initialize: function() {
        this.listenTo(this.model, 'change', this.render, this);
    },

    onRender: function() {
        this.ui.get_data.selectpicker({});
    },


    onBeforeDestroy: function () {
        this.ui.get_data.selectpicker('destroy');
    },

    onGetData: function () {
        let type = this.ui.get_data.val();

        if (type === 'original-csv') {
            this.downloadData('csv', this.getOption("stepIndex"));
        } else if (type === 'original-xlsx') {
            this.downloadData('xlsx', this.getOption("stepIndex"));
        } else if (type === 'original-display') {
            window.application.accession.controllers.action.getActionData(this.model.get('id'), this.getOption("stepIndex"));
        }

        this.ui.get_data.val("").selectpicker('refresh');
    },

    /**
     * Download the data of the step, format as csv or xlsx.
     * @param data_format
     */
    downloadData: downloadData
});

module.exports = ActionStepFormat;


/***/ }),
/* 24 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file entitychangelabel.js
 * @brief Change any labels for a compatible entity.
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-02-01
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Dialog = __webpack_require__(5);

let View = Dialog.extend({
    template: __webpack_require__(425),

    templateContext: function () {
        return {
            title: this.title
        };
    },

    attributes: {
        id: "dlg_change_labels"
    },

    ui: {
        title: "h4.modal-title",
        label: "form.entity-labels input"
    },

    events: {
        'input @ui.label': 'onLabelInput'
    },

    title: 'Change the labels',

    initialize: function (options) {
        Dialog.__super__.initialize.apply(this, arguments);

        this.mergeOptions(options, ['title']);

        let self = this;

        $.ajax({
            type: "GET",
            url: this.model.url() + 'label/',
            dataType: 'json'
        }).done(function (data) {
            for (let lang_id in data) {
                self.ui.label.filter('[language=' + lang_id + ']').attr('value', data[lang_id]);
            }
        }).fail(function () {
            self.destroy();
        });
    },

    onRender: function () {
        View.__super__.onRender.apply(this);

        this.ui.title.text(this.title);
    },

    onLabelInput: function (e) {
        this.validateLabel(e);
    },

    validateLabel: function (e) {
        let v = $(e.target).val();

        if (v.length < 1) {
            $(e.target).validateField('failed', _t('characters_min', {count: 1}));
            return false;
        } else if (v.length > 128) {
            $(e.target).validateField('failed', _t('characters_max', {count: 128}));
            return false;
        }

        $(e.target).validateField('ok');

        return true;
    },

    validateLabels: function () {
        $.each($(this.ui.label), function (i, label) {
            let v = $(this).val();

            if (v.length < 1) {
                $(this).validateField('failed', _t('characters_min', {count: 1}));
                return false;
            } else if (v.length > 128) {
                $(this).validateField('failed', _t('characters_max', {count: 128}));
                return false;
            }
        });

        return true;
    },

    onApply: function () {
        let view = this;
        let model = this.model;

        let labels = {};

        $.each($(this.ui.label), function (i, label) {
            let v = $(this).val();
            labels[$(label).attr("language")] = v;
        });

        if (this.validateLabels()) {
            $.ajax({
                type: "PUT",
                url: model.url() + "label/",
                dataType: 'json',
                contentType: "application/json; charset=utf-8",
                data: JSON.stringify(labels)
            }).done(function () {
                // manually update the current context label
                model.set('label', labels[window.session.language]);
                $.alert.success(_t("Successfully labeled !"));
            }).always(function () {
                view.destroy();
            });
        }
    }
});

module.exports = View;


/***/ }),
/* 25 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file contentbottomfooterlayout.js
 * @brief Two rows content+bottom+footer layout
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-03-31
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Marionette = __webpack_require__(1);

let View = Marionette.View.extend({
    template: __webpack_require__(332),

    attributes: {
        style: "height: 100%; display: flex; flex-direction: column;"
    },

    regions: {
        'content': "div.content",
        'bottom': "div.layout-bottom",
        'footer': "div.layout-footer"
    },

    childViewEvents: {
        'select:tab': function (region, child) {
            this.triggerMethod('select:tab', region, child);
        },
        'dom:refresh': function(child) {
            // call onShowTab when the view is inserted and directly visible
            if (child && child.onShowTab && this.$el.isInViewport() && child.$el.isInViewport()) {
                if (this._lastRegion && this._lastRegion.currentView === this) {
                    child.onShowTab(this._lastRegion);
                }
            }
        }
    },

    onShowTab: function(tabView) {
        this._lastRegion = tabView;

        let view = this.getChildView('content');
        if (view && view.onShowTab) {
            view.onShowTab(tabView);
        }

        view = this.getChildView('bottom');
        if (view && view.onShowTab) {
            view.onShowTab(tabView);
        }

        view = this.getChildView('footer');
        if (view && view.onShowTab) {
            view.onShowTab(tabView);
        }
    },

    onHideTab: function(tabView) {
        this._lastRegion = null;

        let view = this.getChildView('content');
        if (view && view.onHideTab) {
            view.onHideTab(tabView);
        }

        view = this.getChildView('bottom');
        if (view && view.onHideTab) {
            view.onHideTab(tabView);
        }

        view = this.getChildView('footer');
        if (view && view.onHideTab) {
            view.onHideTab(tabView);
        }
    },

    onResize: function() {
        let view = this.getChildView('content');
        if (view && view.onResize) {
            view.onResize();
        }

        view = this.getChildView('bottom');
        if (view && view.onResize) {
            view.onResize();
        }

        view = this.getChildView('footer');
        if (view && view.onResize) {
            view.onResize();
        }
    }
});

module.exports = View;


/***/ }),
/* 26 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file classificationentry.js
 * @brief Classification entry model
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-04-12
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Backbone = __webpack_require__(7);

let ClassificationEntryModel = Backbone.Model.extend({
    url: function() {
        if (this.isNew())
            return window.application.url(['classification', 'classificationentry']);
        else
            return window.application.url(['classification', 'classificationentry', this.get('id')]);
    },

    parentUrl: function() {
        return window.application.url(['classification', 'classification', this.get('classification'), 'classificationentry']);
    },

    defaults: {
        id: null,
        name: '',
        rank: null,
        parent: undefined,
        parent_list: [],
        parent_details: [],
        synonyms: [],
        layout: null,
        descriptors: {},
        comments: []
    },

    parse: function(data) {
        return data;
    },

    validate: function(attrs) {
        let errors = {};
        let hasError = false;
        if (!attrs.name) {
           errors.name = 'Name must be valid and at least 3 characters length';
            hasError = true;
        }
        if (!attrs.rank) {
            errors.rank = 'Rank must be set';
            hasError = true;
        }

        if (hasError) {
          return errors;
        }
    },

    addSynonym: function(type, name, language) {
        let synonyms = this.get('synonyms');
        synonyms.push({
            type: type,
            name: name,
            language: language
        });
    },

    removeSynonym: function(type, name, language) {
        let synonyms = this.get('synonyms');
        for (let i = 0; i < synonyms.length; ++i) {
            if (synonyms[i].type === type && synonyms[i].name === name && synonyms[i].language === language) {
                synonyms.splice(i, 1);
                return;
            }
        }
    },

    renameSynonym: function(type, name, language, oldName) {
        let synonyms = this.get('synonyms');
        for (let i = 0; i < synonyms.length; ++i) {
            if (synonyms[i].type === type && synonyms[i].name === oldName && synonyms[i].language === language) {
                synonyms[i].name = name;
                return;
            }
        }
    }
});

module.exports = ClassificationEntryModel;


/***/ }),
/* 27 */
/***/ (function(module, exports) {

module.exports = $;

/***/ }),
/* 28 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {/**
 * @file commentlist.js
 * @brief Describable entity comments item view
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-12-20
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let AdvancedTable = __webpack_require__(6);
let CommentView = __webpack_require__(363);
let DescriptorsColumnsView = __webpack_require__(11);

let View = AdvancedTable.extend({
    className: "comment-list advanced-table-container",
    childView: CommentView,

    userSettingName: 'comment_list_columns',
    userSettingVersion: '1.0',

    templateContext: function () {
        return {
            columnsList: this.displayedColumns,
            columnsOptions: this.getOption('columns')
        }
    },

    childViewOptions: function () {
        return {
            columnsList: this.displayedColumns,
            columnsOptions: this.getOption('columns')
        }
    },

    defaultColumns: [
        {name: 'label', width: 'auto', sort_by: '+0'},
        {name: 'value', width: 'auto', sort_by: null}
    ],

    columnsOptions: {
        'label': {label: _t('Label'), minWidth: true, event: 'modify-comment'},
        'value': {label: _t('Value'), minWidth: true, event: 'modify-comment'}
    },

    initialize: function (options) {
        View.__super__.initialize.apply(this, arguments);

        if (options.entity) {
            this.entity = options.entity;
        }
    },

    onRender: function () {
        View.__super__.onRender.apply(this, arguments);
    },

    onAdd: function () {
        let CreateComment = __webpack_require__(368);
        let createComment = new CreateComment({entity: this.entity, collection: this.collection});

        createComment.render();
        return false;
    },

    onShowTab: function() {
        let view = this;

        // query now to avoid useless queries
        this.query();

        // contextual panel
        let contextLayout = window.application.getView().getChildView('right');
        if (!contextLayout) {
            let DefaultLayout = __webpack_require__(3);
            contextLayout = new DefaultLayout();
            window.application.getView().showChildView('right', contextLayout);
        }

        let TitleView = __webpack_require__(4);
        contextLayout.showChildView('title', new TitleView({title: _t("Comments"), glyphicon: 'fa-wrench'}));

        let actions = ['add'];

        let CommentListContextView = __webpack_require__(370);
        let contextView = new CommentListContextView({actions: actions});
        contextLayout.showChildView('content', contextView);

        contextView.on("comment:add", function() {
            view.onAdd();
        });
    },

    onHideTab: function() {
        window.application.main.defaultRightView();
    }
});

// support of descriptors columns extension
_.extend(View.prototype, DescriptorsColumnsView);

module.exports = View;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 29 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {/**
 * @file comment.js
 * @brief Comment collection
 * @author Frederic SCHERMA (INRA UMR1095)
 * @date 2018-06-26
 * @copyright Copyright (c) 2018 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let CommentModel = __webpack_require__(371);
let CountableCollection = __webpack_require__(9);

let Collection = CountableCollection.extend({
    url: function () {
        if (this.entity) {
            return (_.isFunction(this.entity.url) ? this.entity.url() : this.entity.url) + 'comment/';
            // return window.application.url([_.isFunction(this.entity.url) ? this.entity.url() : this.entity.url, 'comment']);
        } else {
            return null;
        }
    },

    model: CommentModel,

    // comparator: 'name',

    initialize: function(models, options) {
        options || (options = {});

        Collection.__super__.initialize.apply(this, arguments);

        if (options.entity) {
            this.entity = options.entity;
        }
    }
});

module.exports = Collection;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 30 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file establishment.js
 * @brief Establishment model
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-02-28
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Backbone = __webpack_require__(7);

let Model = Backbone.Model.extend({
    url: function() {
        if (this.isNew())
            return window.application.url(['organisation', 'establishment']);
        else
            return window.application.url(['organisation', 'establishment', this.get('id')]);
    },

    defaults: {
        id: null,
        name: "",
        organisation: null,
        layout: null,
        descriptors: {},
        comments: []
    }
});

module.exports = Model;


/***/ }),
/* 31 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file classification.js
 * @brief Classification collection
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-08-31
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let CountableCollection = __webpack_require__(9);
let ClassificationModel = __webpack_require__(44);

let Collection = CountableCollection.extend({
    url: window.application.url(['classification', 'classification']),
    model: ClassificationModel
});

module.exports = Collection;


/***/ }),
/* 32 */
/***/ (function(module, exports) {

/**
 * @file search.js
 * @brief Helper to make easier the creation of select2 component with a search by cursor.
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-10-25
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let search = function(parent, url, filtersCallback, options) {
    options || (options = {});

    options.minimumInputLength || (options.minimumInputLength = 3);
    options.more || (options.more = 30);
    options.placeholder || (options.placeholder = _t("3 characters at least for auto-completion"));

    return {
        dropdownParent: parent,
        ajax: {
            url: url,
            dataType: 'json',
            delay: 250,
            data: function (params) {
                params.term || (params.term = '');

                let filters = filtersCallback(params);

                return {
                    more: options.more,
                    cursor: JSON.stringify(params.next),
                    filters: JSON.stringify(filters),
                };
            },
            processResults: function (data, params) {
                // no pagination
                params.page = params.page || 1;
                params.next = data.next;

                let results = [];

                for (let i = 0; i < data.items.length; ++i) {
                    results.push({
                        id: data.items[i].id,
                        text: data.items[i].label
                    });
                }

                return {
                    results: results,
                    pagination: {
                        more: params.next !== null && data.items.length >= options.more
                    }
                };
            },
            cache: true
        },
        minimumInputLength: options.minimumInputLength,
        placeholder: options.placeholder
    };
};

module.exports = search;


/***/ }),
/* 33 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file describableedit.js
 * @brief Describable entity item edit view
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-12-15
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let ItemView = __webpack_require__(222);

let View = ItemView.extend({
    tagName: 'div',
    template: __webpack_require__(349),
    templateContext: function () {
        let result = {};

        let i;
        for (i = 0; i < this.descriptorCollection.length; i++) {
            let model = this.descriptorCollection.models[i];
            result[model.get('name')] = model.attributes;
        }

        return {
            panels: this.layoutData.layout_content.panels,
            target: this.layoutData.target,
            descriptors_data: result
        }
    },

    ui: {
        "descriptor": "tr.descriptor",
        "cancel": "button.cancel",
        "apply": "button.apply",
        "showDescriptorHistory": "span.show-descriptor-history"
    },

    events: {
        "click @ui.cancel": "onCancel",
        "click @ui.apply": "onApply",
        "click @ui.showDescriptorHistory": "onShowDescriptorHistory"
    },

    initialize: function(options) {
        View.__super__.initialize.apply(this, arguments);

        this.layoutData = options.layoutData;
        this.descriptorCollection = options.descriptorCollection;

        // no need to follow changes during edition
        // this.listenTo(this.model, 'change:descriptors', this.render, this);
    },

    onRender: function() {
        let view = this;
        let model = this.model;
        let exists = !model.isNew();

        $.each(this.ui.descriptor, function(index) {
            let el = $(this);

            let pi = el.attr('panel-index');
            let i = el.attr('index');
            let layoutDescriptorModel = view.layoutData.layout_content.panels[pi].descriptors[i];
            let descriptorModel = view.descriptorCollection.findWhere({name: layoutDescriptorModel.name});
            let format = descriptorModel.get('format');

            let definesValues = false;
            let defaultValues = null;

            // default value or current descriptor value
            if (exists) {
                defaultValues = model.get('descriptors')[descriptorModel.get('code')];
                definesValues = defaultValues != null && defaultValues != undefined;
            } else {
                // @todo default value from descriptor type
                switch (format.type) {
                    case "boolean":
                        defaultValues = false;
                        definesValues = true;
                        break;
                    default:
                        break;
                }
            }

            let widget = window.application.descriptor.widgets.newElement(format.type);
            if (widget) {
                widget.create(format, el.children('td.descriptor-value'), {
                    readOnly: false,
                    history: true,
                    descriptorId: descriptorModel.get('id')
                });

                widget.set(format, definesValues, defaultValues, {
                    descriptorId: descriptorModel.get('id'),
                    descriptor: layoutDescriptorModel
                });

                if (layoutDescriptorModel.set_once && exists) {
                    widget.disable();
                }
            }

            // save the descriptor format type widget instance
            descriptorModel.widget = widget;
        });
    },

    onDomRefresh: function() {
        let descriptors = {};

        // firstly make a list for each descriptor of which descriptors need them for a condition
        for (let pi = 0; pi < this.layoutData.layout_content.panels.length; ++pi) {
            for (let i = 0; i < this.layoutData.layout_content.panels[pi].descriptors.length; ++i) {
                let layoutDescriptorModel = this.layoutData.layout_content.panels[pi].descriptors[i];
                let conditions = layoutDescriptorModel.conditions;

                // if given set initials values for the widget
                if (this.model.isNew()) {
                    // @todo
                }

                if (conditions) {
                    let targetDescriptorModel = this.descriptorCollection.findWhere({'name': conditions.target_name});
                    let descriptorModel = this.descriptorCollection.findWhere({'name': layoutDescriptorModel.name});

                    if (targetDescriptorModel.widget && descriptorModel.widget) {
                        if (targetDescriptorModel.id in descriptors) {
                            descriptors[targetDescriptorModel.id].listeners.push(descriptorModel.widget);
                        } else {
                            descriptors[targetDescriptorModel.id] = {
                                widget: targetDescriptorModel.widget,
                                conditionType: conditions.condition,
                                conditionValue: conditions.values,
                                listeners: [descriptorModel.widget]
                            };
                        }

                        // initial state of the condition
                        let display = targetDescriptorModel.widget.checkCondition(conditions.condition, conditions.values);

                        if (!display) {
                            // hide at tr level
                            descriptorModel.widget.parent.parent().hide(false);
                        }
                    }
                }
            }
        }

        // once lists are done attach them to their widgets and bind the change event
        for (let k in descriptors) {
            let descriptor = descriptors[k];
            descriptor.widget.bindConditionListener(descriptor.listeners, descriptor.conditionType, descriptor.conditionValue);
        }
    },

    onBeforeDetach: function() {
        // destroy any widgets
        for (let pi = 0; pi < this.layoutData.layout_content.panels.length; ++pi) {
            for (let i = 0; i < this.layoutData.layout_content.panels[pi].descriptors.length; ++i) {
                let layoutDescriptorModel = this.layoutData.layout_content.panels[pi].descriptors[i];
                let descriptorModel = this.descriptorCollection.findWhere({'name': layoutDescriptorModel.name});
                if (descriptorModel.widget) {
                    descriptorModel.widget.destroy();
                    descriptorModel.widget = null;
                }
            }
        }
    },

    prepareDescriptors: function () {
        let descriptors = {};

        for (let pi = 0; pi < this.layoutData.layout_content.panels.length; ++pi) {
            for (let i = 0; i < this.layoutData.layout_content.panels[pi].descriptors.length; ++i) {
                let layoutDescriptor = this.layoutData.layout_content.panels[pi].descriptors[i];
                let descriptorModel = this.descriptorCollection.findWhere({'name': layoutDescriptor.name});

                let mandatory = layoutDescriptor.mandatory;

                let currValue = this.model.get('descriptors')[descriptorModel.get('name')];
                let values = null;

                // display of the tr
                if (descriptorModel.widget && descriptorModel.widget.parent.parent().css('display') !== "none") {
                    values = descriptorModel.widget.values();
                }

                if (mandatory && values === null) {
                    $.alert.error(_t("Field " + descriptorModel.get('label') + " is required"));
                    return null;
                }

                let write = true;
                if (layoutDescriptor.set_once && currValue !== null) {
                    write = false;
                }

                if (descriptorModel.widget && descriptorModel.widget.compare(values, currValue)) {
                    write = false;
                }

                if (write) {
                    descriptors[descriptorModel.get('name')] = values;
                }
            }
        }

        return descriptors;
    },

    cancel: function() {
        // destroy any widgets
        for (let pi = 0; pi < this.layoutData.layout_content.panels.length; ++pi) {
            for (let i = 0; i < this.layoutData.layout_content.panels[pi].descriptors.length; ++i) {
                let layoutDescriptor = this.layoutData.layout_content.panels[pi].descriptors[i];
                let descriptorModel = this.descriptorCollection.findWhere({'name': layoutDescriptor.name});
                if (descriptorModel.widget) {
                    descriptorModel.widget.cancel();
                }
            }
        }
    },

    onCancel: function() {
        this.cancel();

        // non optimized default behavior reload url
        Backbone.history.loadUrl();
    },

    onApply: function() {
        // non optimized default behavior, load after save
        let model = this.model;

        let descriptors = this.prepareDescriptors();
        if (descriptors === null) {
            return;
        }

        this.model.save({descriptors: descriptors}, {wait: true, patch: !model.isNew()}).then(function () {
            Backbone.history.loadUrl();
        });
    },

    onShowDescriptorHistory: function(e) {
        let tr = $(e.target).closest("tr");
        let panelIndex = tr.attr("panel-index");
        let index = tr.attr("index");

        let layoutDescriptor = this.layoutData.layout_content.panels[panelIndex].descriptors[index];
        let descriptorModel = this.descriptorCollection.findWhere({'name': layoutDescriptor.name});

        if (descriptorModel && descriptorModel.widget) {
            let tokens = this.model.url().split('/');

            let appLabel = tokens[tokens.length-4];
            let modelName = tokens[tokens.length-3];
            let objectId = tokens[tokens.length-2];
            let valueName = '#' + descriptorModel.get('code');

            let options = {};

            descriptorModel.widget.showHistory(appLabel, modelName, objectId, valueName, descriptorModel, options);
        }
    }
});

module.exports = View;


/***/ }),
/* 34 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file describabledetails.js
 * @brief Describable entity details item view
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-12-20
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let ItemView = __webpack_require__(222);

let View = ItemView.extend({
    tagName: 'div',
    template: __webpack_require__(350),

    templateContext: function () {
        let result = {};

        if (this.descriptorCollection) {
            let i;
            for (i = 0; i < this.descriptorCollection.length; i++) {
                let model = this.descriptorCollection.models[i];
                result[model.get('name')] = model.attributes;
            }
        }


        return {
            panels: this.layoutData.layout_content.panels,
            target: this.layoutData.target,
            descriptors_data: result
        }
    },

    ui: {
        "descriptor": "tr.descriptor",
        "modify": "button.modify",
        "showDescriptorHistory": "span.show-descriptor-history"
    },

    triggers: {},

    events: {
        "click @ui.modify": "onModify",
        "click @ui.showDescriptorHistory": "onShowDescriptorHistory"
    },

    initialize: function (options) {
        View.__super__.initialize.apply(this);

        this.layoutData = options.layoutData;
        this.descriptorCollection = options.descriptorCollection;
        this.listenTo(this.model, 'change:descriptors', this.render, this);
    },

    onRender: function () {
        let view = this;
        let model = this.model;
        // let descriptors = model.get('descriptors');

        $.each(this.ui.descriptor, function (index) {
            let el = $(this);

            let pi = el.attr('panel-index');
            let i = el.attr('index');
            let id = el.attr('descriptor');
            let descriptorModel = view.descriptorCollection.get(id);
            let format = descriptorModel.get('format');

            let values = (model.get('descriptors')[descriptorModel.get('code')] ? model.get('descriptors')[descriptorModel.get('code')] : null);

            let widget = window.application.descriptor.widgets.newElement(format.type);
            if (widget) {
                widget.create(format, el.children('td.descriptor-value'), {
                    readOnly: true,
                    history: true,
                    descriptorId: descriptorModel.get('id')
                });

                widget.set(format, true, values, {
                    descriptorId: descriptorModel.get('id'),
                    descriptor: descriptorModel.attributes
                });
            }

            // save the descriptor format type widget instance
            descriptorModel.widget = widget;
        });
    },

    onDomRefresh: function () {
        for (let pi = 0; pi < this.layoutData.layout_content.panels.length; ++pi) {
            for (let i = 0; i < this.layoutData.layout_content.panels[pi].descriptors.length; ++i) {
                let layoutDescriptorModel = this.layoutData.layout_content.panels[pi].descriptors[i];
                let descriptorModel = this.descriptorCollection.findWhere({'name': layoutDescriptorModel.name});
                let conditions = layoutDescriptorModel.conditions;

                if (conditions) {
                    // search the target descriptor type for the condition
                    let targetDescriptorModel = this.descriptorCollection.findWhere({'name': conditions.target_name});

                    // initial state of the condition
                    let display = true;

                    if (targetDescriptorModel.widget) {
                        display = targetDescriptorModel.widget.checkCondition(conditions.condition, conditions.values);
                    }

                    if (!display) {
                        // hide at tr level
                        if (descriptorModel.widget) {
                            descriptorModel.widget.parent.parent().hide(false);
                        }
                    }
                }
            }
        }
    },

    onBeforeDetach: function () {
        // destroy any widgets
        for (let pi = 0; pi < this.layoutData.layout_content.panels.length; ++pi) {
            for (let i = 0; i < this.layoutData.layout_content.panels[pi].descriptors.length; ++i) {
                let layoutDescriptorModel = this.layoutData.layout_content.panels[pi].descriptors[i];
                let descriptorModel = this.descriptorCollection.findWhere({'name': layoutDescriptorModel.name});
                if (descriptorModel.widget) {
                    descriptorModel.widget.destroy();
                }
            }
        }
    },

    onModify: function () {

    },

    onShowDescriptorHistory: function (e) {
        let tr = $(e.target).closest("tr");
        let panelIndex = tr.attr("panel-index");
        let index = tr.attr("index");

        let layoutDescriptorModel = this.layoutData.layout_content.panels[panelIndex].descriptors[index];
        let descriptorModel = this.descriptorCollection.findWhere({name: layoutDescriptorModel.name});
        if (descriptorModel && descriptorModel.widget) {
            let tokens = this.model.url().split('/');

            let appLabel = tokens[tokens.length - 4];
            let modelName = tokens[tokens.length - 3];
            let objectId = tokens[tokens.length - 2];
            let valueName = '#' + descriptorModel.get('code');

            let options = {};

            descriptorModel.widget.showHistory(
                appLabel, modelName, objectId, valueName, descriptorModel, options);
        }
    }
});

module.exports = View;


/***/ }),
/* 35 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file descriptor.js
 * @brief Organisation and establishment descriptor item view
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-03-07
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let DescribableDetails = __webpack_require__(34);
let DescriptorEditView = __webpack_require__(43);

let View = DescribableDetails.extend({
    onShowTab: function() {
        let view = this;

        let contextLayout = application.getView().getChildView('right');
        if (!contextLayout) {
            let DefaultLayout = __webpack_require__(3);
            contextLayout = new DefaultLayout();
            application.getView().showChildView('right', contextLayout);
        }

        let TitleView = __webpack_require__(4);
        contextLayout.showChildView('title', new TitleView({title: _t("Descriptors")}));

        let actions = ['modify'];

        let DescriptorContextView = __webpack_require__(283);
        let contextView = new DescriptorContextView({actions: actions});
        contextLayout.showChildView('content', contextView);

        contextView.on("describable:modify", function () {
            view.onModify();
        });
    },

    onHideTab: function() {
        application.main.defaultRightView();
    },

    onModify: function () {
        // does not reload models, just redo the views
        let name = this.model.get('name');

        // update the layout content
        let layout = application.main.viewContent().getChildView('content');

        let view = new DescriptorEditView({
            model: this.model,
            layoutData: this.layoutData,
            descriptorCollection: this.descriptorCollection
        });
        layout.showChildView('descriptors', view);
    }
});

module.exports = View;


/***/ }),
/* 36 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file namingoption.js
 * @brief Naming option definition inner view.
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2018-01-15
 * @copyright Copyright (c) 2018 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);

let View = Marionette.View.extend({
    tagName: 'div',
    className: 'naming-option',
    attributes: {
        'style': 'padding-top: 5px; padding-bottom: 10px; margin-bottom: 10px; border-top: 1px solid #ddd; border-bottom: 1px solid #ddd;'
    },
    template: __webpack_require__(322),
    templateContext: function () {
        return {
            namingOptions: this.namingOptions,
        }
    },

    ui: {
        "format": "input[name=naming-format]",
        "constants": "input[name=naming-constant]"
    },

    initialize: function (options) {
        this.namingOptions = options.namingOptions || 0;
        this.namingFormat = options.namingFormat || "";
    },

    onRender: function () {
        this.ui.format.val(this.namingFormat);
    },

    setNamingOptions: function(namingOptions) {
        if (namingOptions.length !== this.ui.constants.length) {
            return;
        }

         for (let i = 0; i < this.ui.constants.length; ++i) {
            this.ui.constants.eq(i).val(namingOptions[i]);
        }
    },

    getNamingOptions: function () {
        let res = [];

        for (let i = 0; i < this.ui.constants.length; ++i) {
            res.push(this.ui.constants.eq(i).val());
        }

        return res;
    },

    validateNamingOptions: function() {
        // @todo
        return true;
    }
});

module.exports = View;


/***/ }),
/* 37 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file accession.js
 * @brief Accession model
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-12-07
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Backbone = __webpack_require__(7);

let Model = Backbone.Model.extend({
    url: function() {
        if (this.isNew()) {
            return window.application.url(['accession', 'accession']);
        } else {
            return window.application.url(['accession', 'accession', this.get('id')]);
        }
    },

    defaults: {
        id: null,
        code: '',
        name: '',
        primary_classification_entry: undefined,
        layout: undefined,
        descriptors: {},
        comments: [],
        synonyms: []
    },

    parse: function(data) {
        return data;
    },

    validate: function(attrs) {
        let errors = {};
        let hasError = false;
        // if (!attrs.name) {
        //     errors.name = 'Name must be valid and at least 3 characters length';
        //     hasError = true;
        // }

        if (hasError) {
          return errors;
        }
    }
});

module.exports = Model;


/***/ }),
/* 38 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file actiontype.js
 * @brief Action type model
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-02-23
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Backbone = __webpack_require__(7);

let Model = Backbone.Model.extend({
    url: function() {
        if (this.isNew()) {
            return window.application.url(['accession', 'actiontype']);
        } else {
            return window.application.url(['accession', 'actiontype', this.get('id')]);
        }
    },

    defaults: {
        id: null,
        name: "",
        label: "",
        format: {type: 'undefined', steps: []},
        description: ""
    },

    parse: function(data) {
        return data;
    }
});

module.exports = Model;


/***/ }),
/* 39 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file action.js
 * @brief Action model
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-12-08
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Backbone = __webpack_require__(7);

let Model = Backbone.Model.extend({
    url: function() {
        if (this.isNew())
            return window.application.url(['accession', 'action']);
        else
            return window.application.url(['accession', 'action', this.get('id')]);
    },

    defaults: {
        id: null,
        name: '',
        action_type: null,
        completed: false,
        data: {steps: []},
        user: '',
        description: '',
        created_date: moment().format('YYYY-MM-DD HH:mm:ss')
    },

    parse: function(data) {
        return data;
    }
});

module.exports = Model;


/***/ }),
/* 40 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file descriptor.js
 * @brief descriptor model
 * @author Medhi BOULNEMOUR (INRA UMR1095)
 * @date 2018-01-10
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Backbone = __webpack_require__(7);

let Model = Backbone.Model.extend({
    url: function () {
        if (this.isNew()) {
            return window.application.url(['descriptor', 'descriptor']);
        } else {
            return window.application.url(['descriptor', 'descriptor', this.get('id')]);
        } // else {
        //     return window.application.url(['descriptor', 'descriptor', this.get('name')]);
        // }
    },

    defaults: {
        id: null,
        name: '',
        code: '',
        label: '',
        group_name: null,
        description: '',
        can_delete: true,
        can_modify: true,
        format: {
            type: "string"
        }
    },

    parse: function (data) {
        //this.perms = data.perms;
        this.model = data.model;
        return data;
    },

    validate: function (attrs) {
        let errors = {};
        let hasError = false;

        if (hasError) {
            return errors;
        }
    },
});

module.exports = Model;



/***/ }),
/* 41 */
/***/ (function(module, exports) {

/**
 * @file cachefetcher.js
 * @brief Base class fetcher for the cache manager to be specialized.
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-07-07
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let CacheFetcher = function() {
    this.type = "";
};

CacheFetcher.prototype = {
    /**
     * Fetch values.
     * @param cacheManager Cache manager instance.
     * @param options Cache query options.
     * @param keys List of keys to fetch.
     * @param promise or null.
     */
    fetch: function(cacheManager, options, keys) {
        return null;
    },

    get: function(cacheManager, options) {
        return null;
    }
};

module.exports = CacheFetcher;


/***/ }),
/* 42 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file organisation.js
 * @brief Organisation model
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-02-28
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Backbone = __webpack_require__(7);

let Model = Backbone.Model.extend({
    url: function() {
        if (this.isNew())
            return window.application.url(['organisation', 'organisation']);
        else
            return window.application.url(['organisation', 'organisation', this.get('id')]);
    },

    defaults: {
        id: null,
        name: "",
        type: "",
        grc: null,
        layout: null,
        descriptors: {},
        comments: []
    }
});

module.exports = Model;


/***/ }),
/* 43 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file descriptoredit.js
 * @brief Organisation and establishment descriptor item edit view
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-03-07
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let DescribableEdit = __webpack_require__(33);

let View = DescribableEdit.extend({
    onCancel: function() {
        // cancel global widget modifications
        this.cancel();

        // non existing entity, simply reload previous content (url has not changed)
        if (this.model.isNew()) {
            Backbone.history.loadUrl();
            return;
        }

        // does not reload models, just redo the views
        let self = this;
        let name = this.model.get('name');

        // update the layout content
        let layout = application.main.viewContent().getChildView('content');

        let DescriptorView = __webpack_require__(35);
        let descriptorView = new DescriptorView({
            model: this.model,
            layoutData: self.layoutData,
            descriptorCollection: self.descriptorCollection
        });

        layout.showChildView('descriptors', descriptorView);
    },

    onApply: function () {
        // does not reload models, save and redo the views
        let self = this;
        let model = this.model;

        let descriptors = this.prepareDescriptors();
        if (descriptors === null) {
            return;
        }

        let isNew = this.model.isNew();

        this.model.save({descriptors: descriptors}, {wait: true, patch: !isNew}).then(function () {
            let layout = application.main.viewContent().getChildView('content');

            // update the layout content
            let DescriptorView = __webpack_require__(35);
            let descriptorView = new DescriptorView({
                model: model,
                layoutData: self.layoutData,
                descriptorCollection: self.descriptorCollection
            });

            layout.showChildView('descriptors', descriptorView);
        });
    },

    onShowTab: function() {
        let view = this;

        // contextual panel
        let contextLayout = application.getView().getChildView('right');
        if (!contextLayout) {
            let DefaultLayout = __webpack_require__(3);
            contextLayout = new DefaultLayout();
            application.getView().showChildView('right', contextLayout);
        }

        let TitleView = __webpack_require__(4);
        contextLayout.showChildView('title', new TitleView({title: _t("Descriptors"), glyphicon: 'fa-wrench'}));

        let actions = ['apply', 'cancel'];

        let DescriptorContextView = __webpack_require__(283);
        let contextView = new DescriptorContextView({actions: actions});
        contextLayout.showChildView('content', contextView);

        contextView.on("describable:cancel", function() {
            view.onCancel();
        });

        contextView.on("describable:apply", function() {
            view.onApply();
        });
    },

    onHideTab: function() {
        application.main.defaultRightView();
    }
});

module.exports = View;


/***/ }),
/* 44 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file classification.js
 * @brief Classification model
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-08-31
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Backbone = __webpack_require__(7);

let ClassificationModel = Backbone.Model.extend({
    url: function() {
        if (this.isNew())
            return window.application.url(['classification', 'classification']);
        else
            return window.application.url(['classification', 'classification', this.get('id')]);
    },

    defaults: {
        id: null,
        name: '',
        label: '',
        can_modify: true,
        can_delete: true,
        num_classification_ranks: 0
    },

    parse: function(data) {
        return data;
    },

    validate: function(attrs) {
        let errors = {};
        let hasError = false;
        if (!attrs.name) {
           errors.name = 'Name must be valid and at least 3 characters length';
            hasError = true;
        }

        if (hasError) {
          return errors;
        }
    }
});

module.exports = ClassificationModel;


/***/ }),
/* 45 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file accession.js
 * @brief Accession collection
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-12-09
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let AccessionModel = __webpack_require__(37);
let CountableCollection = __webpack_require__(9);

let Collection = CountableCollection.extend({
    model: AccessionModel,

    url: function() {
        if (this.action_id) {
            return window.application.url(['accession', 'action', this.action_id, this.action_todo_or_done ? 'todo' : 'done', 'accession']);
        } else if (this.panel_id) {
            return window.application.url(['accession', 'accessionpanel', this.panel_id, 'accessions']);
        } else {
            return window.application.url(['accession', 'accession']);
        }
    },

    initialize: function (models, options) {
        options || (options = {});

        Collection.__super__.initialize.apply(this, arguments);

        this.panel_id = options.panel_id;
        this.action_id = options.action_id;
        this.action_todo_or_done = options.action_todo_or_done;
    },
});

module.exports = Collection;


/***/ }),
/* 46 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file accessionlistcontext.js
 * @brief Accession list context menu
 * @author Medhi BOULNEMOUR (INRA UMR1095)
 * @author Frederic SCHERMA (INRA UMR1095)
 * @date 2017-09-08
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);

let View = Marionette.View.extend({
    tagName: 'div',
    template: __webpack_require__(15),
    className: "context accession-list",
    templateContext: function () {
        return {
            actions: this.getOption('actions'),
            options: {
                'create-panel': {className: 'btn-default', label: _t('Create new panel')},
                'link-to-panel': {className: 'btn-default', label: _t('Link to existing panel')},
                'unlink-accessions': {className: 'btn-danger', label: _t('Unlink accessions')},
                'action-toggle-mode': {className: 'btn-warning', label: _t('Toggle auto/manual')},
                'export-list': {className: 'btn-success', label: _t('Export as...')},
                'import-list': {className: 'btn-success', label: _t('Import from...')}
            }
        }
    },

    ui: {
        'create-panel': 'button[name="create-panel"]',
        'link-to-panel': 'button[name="link-to-panel"]',
        'unlink-accessions': 'button[name="unlink-accessions"]',
        'action-toggle-mode': 'button[name="action-toggle-mode"]',
        'export-list': 'button[name="export-list"]',
        'import-list': 'button[name="import-list"]'
    },

    triggers: {
        "click @ui.create-panel": "panel:create",
        "click @ui.link-to-panel": "panel:link-accessions",
        "click @ui.unlink-accessions": "accessions:unlink",
        "click @ui.action-toggle-mode": "action:toggle-mode",
        "click @ui.export-list": "accession:export-list",
        "click @ui.import-list": "accession:import-list"
    },

    initialize: function(options) {
        options || (options = {actions: []});
    }
});

module.exports = View;


/***/ }),
/* 47 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file batch.js
 * @brief Batch collection
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-02-14
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let BatchModel = __webpack_require__(48);
let CountableCollection = __webpack_require__(9);

let Collection = CountableCollection.extend({
    url: function() {
        if (this.action_id) {
            return window.application.url(['accession', 'action', this.action_id, this.action_todo_or_done ? 'todo' : 'done', 'batch']);
        }  if (this.panel_id) {
            return window.application.url(['accession', 'batchpanel', this.panel_id, 'batches']);
        } else if (this.accession_id) {
            return window.application.url(['accession', 'accession', this.accession_id, 'batch']);
        } else if (this.batch_id) {
            if (this.batch_type === "parents") {
                return window.application.url(['accession', 'batch', this.batch_id, 'parent']);
            } else {
                return window.application.url(['accession', 'batch', this.batch_id, 'batch']);
            }
        } else {
            return window.application.url(['accession', 'batch']);
        }
    },
    model: BatchModel,

    // comparator: 'name',

    initialize: function(models, options) {
        options || (options = {});

        Collection.__super__.initialize.apply(this, arguments);

        this.batch_type = options.batch_type;
        this.accession_id = options.accession_id;
        this.batch_id = options.batch_id;
        this.panel_id = options.panel_id;
        this.action_id = options.action_id;
        this.action_todo_or_done = options.action_todo_or_done;
    }
});

module.exports = Collection;


/***/ }),
/* 48 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file batch.js
 * @brief Batch model
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-02-14
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Backbone = __webpack_require__(7);

let Model = Backbone.Model.extend({
    url: function() {
        if (this.isNew()) {
            return window.application.url(['accession', 'batch']);
        } else {
            return window.application.url(['accession', 'batch', this.get('id')]);
        }
    },

    defaults: {
        id: null,
        name: '',
        accession: undefined,
        layout: undefined,
        descriptors: {},
        comments: []
    },

    parse: function(data) {
        return data;
    },

    validate: function(attrs) {
        let errors = {};
        let hasError = false;
        // if (!attrs.name) {
        //     errors.name = 'Name must be valid and at least 3 characters length';
        //     hasError = true;
        // }

        if (hasError) {
          return errors;
        }
    }
});

module.exports = Model;


/***/ }),
/* 49 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file batchlistcontext.js
 * @brief Batch list context menu
 * @author Medhi BOULNEMOUR (INRA UMR1095)
 * @author Frederic SCHERMA (INRA UMR1095)
 * @date 2017-11-06
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);

let View = Marionette.View.extend({
    tagName: 'div',
    template: __webpack_require__(15),
    className: "context batch-list",
    templateContext: function () {
        return {
            actions: this.getOption('actions'),
            options: {
                'create-panel': {className: 'btn-default', label: _t('Create new panel')},
                'link-to-panel': {className: 'btn-default', label: _t('Link to existing panel')},
                'unlink-batches': {className: 'btn-danger', label: _t('Unlink batches')},
                'export-list': {className: 'btn-success', label: _t('Export as...')},
                'import-list': {className: 'btn-success', label: _t('Import from...')}
            }
        }
    },

    ui: {
        'create-panel': 'button[name="create-panel"]',
        'link-to-panel': 'button[name="link-to-panel"]',
        'unlink-batches': 'button[name="unlink-batches"]',
        'export-list': 'button[name="export-list"]',
        'import-list': 'button[name="import-list"]'
    },

    triggers: {
        "click @ui.create-panel": "panel:create",
        "click @ui.link-to-panel": "panel:link-batches",
        "click @ui.unlink-batches": "batches:unlink",
        "click @ui.export-list": "batches:export-list",
        "click @ui.import-list": "batches:import-list"
    },

    initialize: function (options) {
        this.accessionId = options.accessionId || -1;
        this.advancedTable = options.advancedTable || null;
    },

    onRender: function () {
        let self = this;

        // let createAction = $('<select name="action-type" data-width="100%" data-style="btn-success" title="' + _t('Create an action') + '"></select>');
        // let BatchActionTypeCollection = require('../../collections/actiontype');
        //
        // let batchActionTypeCollection = new BatchActionTypeCollection();
        // batchActionTypeCollection.fetch({}).done(function (data) {
        //     for (let i = 0; i < data.items.length; ++i) {
        //         createAction.append($('<option value="' + data.items[i].id + '">' + data.items[i].label + '</option>'));
        //     }
        //
        //     self.$el.find("div.describable-header").children("div.btn-group-vertical").prepend(createAction);
        //
        //     createAction.selectpicker({
        //         style: 'btn-default',
        //         container: 'body'
        //     }).on('change', $.proxy(self.onCreateAction, self));
        //
        //     self.$el.find("span.filter-option.pull-left").css("text-align", "center");
        // });
    },

    onBeforeDestroy: function() {
        // this.$el.find('select').selectpicker('destroy');
    },

    // onCreateAction: function(e) {
    //     let val = parseInt($(e.target).selectpicker().val());
    //     let accessionId = this.getOption("accessionId");
    //     let inputBatches = false;
    //
    //     if (this.advancedTable && this.advancedTable.getSelection) {
    //         let selection = this.advancedTable.getSelection('select');
    //         if (typeof selection === "boolean") {
    //             if (selection) {
    //                 // how to support that, need many input collection on server side ...
    //                 // inputBatches = advancedTable.collection.models
    //             }
    //         } else {
    //             inputBatches = selection;
    //         }
    //     }
    //
    //     $.ajax({
    //         type: "POST",
    //         url: window.application.url(['accession', 'action']),
    //         dataType: 'json',
    //         contentType: "application/json; charset=utf-8",
    //         data: JSON.stringify({
    //             "accession": accessionId,
    //             "type": val,
    //             "batches": inputBatches
    //         })
    //     }).done(function(data) {
    //         // @todo
    //     });
    // }
});

module.exports = View;


/***/ }),
/* 50 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title">' +
__e( title ) +
'</h4></div><div class="modal-body"><p> ' +
__e( message ) +
' </p></div><div class="modal-footer"><button type="button" class="btn btn-' +
__e( cancel_class ) +
' cancel" data-dismiss="modal">' +
__e( cancel_txt ) +
' </button> <button type="button" class="btn btn-' +
__e( confirm_class ) +
' confirm">' +
__e( confirm_txt ) +
'</button></div></div></div>';

}
return __p
};

/*
original source:

<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title"><%- title %></h4></div><div class="modal-body"><p> <%- message %> </p></div><div class="modal-footer"><button type="button" class="btn btn-<%- cancel_class %> cancel" data-dismiss="modal"><%- cancel_txt %> </button> <button type="button" class="btn btn-<%- confirm_class %> confirm"><%- confirm_txt %></button></div></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 51 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {/**
 * @file enumsingle.js
 * @brief Display and manage a list a single value format of type of descriptor
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-01-20
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let DescriptorFormatType = __webpack_require__(13);
let Marionette = __webpack_require__(1);

let EnumSingle = function() {
    DescriptorFormatType.call(this);

    this.name = "enum_single";
    this.group = "list";

    this.autocomplete = false;
    this.allow_multiple = true;
};

_.extend(EnumSingle.prototype, DescriptorFormatType.prototype, {
    create: function(format, parent, options) {
        options || (options = {
            readOnly: false,
            history: false,
            multiple: false,
            descriptorId: 0
        });

        if (options.readOnly) {
            let input = null;

            // autocomplete or dropdown
            if (format.list_type === "autocomplete") {
                input = this._createStdInput(parent, "fa-list", options.history);
            } else if (format.list_type === "dropdown") {
                input = this._createStdInput(parent, "fa-list", options.history);
            }

            this.parent = parent;
            this.readOnly = true;
            this.el = input;
        } else {
            if (format.list_type === "autocomplete") {
                this.autocomplete = true;

                let select = $('<select style="width: 100%;" ' + (options.multiple ? "multiple" : "") + '></select>');
                this.groupEl = this._createInputGroup(parent, "fa-list", select, options.history);

                // init the autocomplete
                let url = window.application.url(['descriptor', 'descriptor', options.descriptorId]);
                let initials = [];

                let container = parent.closest('div.modal-dialog').parent();
                if (container.length === 0) {
                    container = this.groupEl;  // parent.closest('div.panel');
                }

                let params = {
                    data: initials,
                    dropdownParent: container,
                    ajax: {
                        url: url + 'value/display/search/',
                        dataType: 'json',
                        delay: 250,
                        data: function (params) {
                            params.term || (params.term = '');

                            return {
                                cursor: params.next,
                                value: params.term
                            };
                        },
                        processResults: function (data, params) {
                            params.next = null;

                            if (data.items.length >= 30) {
                                params.next = data.next || null;
                            }

                            let results = [];

                            for (let i = 0; i < data.items.length; ++i) {
                                results.push({
                                    id: data.items[i].id,
                                    text: data.items[i].label
                                });
                            }

                            return {
                                results: results,
                                pagination: {
                                    more: params.next != null
                                }
                            };
                        },
                        cache: true
                    },
                    allowClear: true,
                    minimumInputLength: 3,
                    placeholder: _t("Enter a value.")
                };

                select.select2(params).fixSelect2Position();

                this.parent = parent;
                this.el = select;
            } else if (format.list_type === "dropdown") {
                this.autocomplete = false;

                let select = $('<select style="width: 100%;" ' + (options.multiple ? "multiple" : "") + '></select>');
                this.groupEl = this._createInputGroup(parent, "fa-list", select, options.history);

                // undefined value
                let undefinedOption = $('<option value="null"> - ' + _t("Undefined") + ' - </option>');
                select.append(undefinedOption);

                select.selectpicker({container: 'body', style: 'btn-default'});

                // init the selectpicker
                let url = window.application.url(['descriptor', 'descriptor', options.descriptorId]);

                // refresh values (@todo could be cached but how)
                this.promise = $.ajax({
                    url: url + 'value/display/',
                    dataType: 'json'
                }).done(function (data) {
                    for (let i = 0; i < data.length; ++i) {
                        let option = $("<option></option>");

                        option.attr("value", data[i].value);
                        option.attr("title", data[i].label);

                        // for LTR languages add prefix
                        if (data[i].offset) {
                            let offset = "";
                            for (let j = 0; j < data[i].offset; ++j) {
                                offset += "&#160;&#160;&#160;&#160;";
                            }

                            if (window.session.languageDirection === "ltr") {
                                option.html(offset + data[i].label);
                            } else {
                                option.html(data[i].label + offset);
                            }
                        } else {
                            option.html(data[i].label);
                        }

                        select.append(option);
                    }

                    select.selectpicker('refresh');
                });

                this.parent = parent;
                this.el = select;
            }
        }
    },

    destroy: function() {
        if (this.el && this.parent) {
            if (this.readOnly) {
                this.el.parent().remove();
            } else {
                if (this.autocomplete) {
                    this.el.select2('destroy');
                } else {
                    this.el.selectpicker('destroy');
                }
                this.groupEl.remove();
            }
        }
    },

    enable: function() {
        if (this.el) {
            if (this.autocomplete) {
                this.el.prop("disabled", false);
            } else {
                this.el.prop("disabled", false).selectpicker('refresh');
            }
        }
    },

    disable: function() {
        if (this.el) {
            if (this.autocomplete) {
                this.el.prop("disabled", true);
            } else {
                this.el.prop("disabled", true).selectpicker('refresh');
            }
        }
    },

    set: function (format, definesValues, defaultValues, options) {
        options || (options = {
            descriptorId: 0,
            descriptor: null
        });

        if (!this.el || !this.parent) {
            return;
        }

        definesValues = this.isValueDefined(definesValues, defaultValues);

        let url = window.application.url(['descriptor', 'descriptor', options.descriptorId]);

        if (this.readOnly) {
            let type = this;

            if (definesValues) {
                if (this.allow_multiple && Array.isArray(defaultValues)) {
                    let keys = defaultValues;
                    this.el.attr('value', defaultValues);

                    window.application.main.cache.lookup({
                        type: "descriptors",
                        format: {name: options.descriptor.name}
                    }, keys).done(function (data) {
                        let results = [];

                        for (let i = 0; i < defaultValues.length; ++i) {
                            results.push(data[defaultValues[i]].value);
                        }
                        type.el.val(results.join(', '));
                    });
                } else {
                    let keys = [defaultValues];
                    this.el.attr('value', defaultValues);

                    window.application.main.cache.lookup({
                        type: "descriptors",
                        format: {name: options.descriptor.name}
                    }, keys).done(function (data) {
                        type.el.val(data[defaultValues].value);
                    });
                }
            } else {
                type.el.val("");
            }
        } else {
            let type = this;
            let multiple = this.el.prop("multiple");

            if (this.autocomplete) {
                if (definesValues) {
                    let initials = [];

                    if (this.allow_multiple && Array.isArray(defaultValues)) {
                        // @todo multiple ?
                    }

                    // is the option exists
                    if (type.el.children('option[value=' + defaultValues + ']').length) {
                        type.el.trigger({
                            type: 'select2:select',
                            params: {
                                data: initials
                            }
                        });
                    } else {
                        // autoselect the initial value
                        $.ajax({
                            type: "GET",
                            url: url + 'value/' + defaultValues + '/display/',
                            dataType: 'json'
                        }).done(function (data) {
                            initials.push({id: data.id, text: data.name});

                            let option = new Option(data.name, data.id, true, true);
                            type.el.append(option).trigger('change');

                            type.el.trigger({
                                type: 'select2:select',
                                params: {
                                    data: initials
                                }
                            });
                        });
                    }
                } else {
                    // clear value(s)
                    type.el.val(null).trigger('change');
                }
            } else {
                if (definesValues) {
                    // defines temporary value (before waiting)
                    this.el.attr('value', defaultValues);

                    if (this.allow_multiple && Array.isArray(defaultValues)) {
                        // @todo multiple
                    }

                    // undefined value
                    if (_.isUndefined(defaultValues)) {
                        type.el.val("null").trigger('change');
                        type.el.selectpicker('refresh');
                    }

                    $.when(this.promise).done(function (data) {
                        type.el.val(defaultValues).trigger('change');
                        type.el.selectpicker('refresh');

                        // remove temporary vale
                        type.el.removeAttr('value');
                    });
                } else {
                    // clear value(s)
                    type.el.val("null").trigger('change');
                }
            }
        }
    },

    values: function() {
        if (this.el && this.parent) {
            if (this.readOnly) {
                return this.el.attr('value');
            } else {
                if (this.el.attr('value') !== undefined) {
                    return this.el.attr('value');
                } else {
                    let val = this.el.val();
                    return val !== "null" ? val : null;
                }
            }
        }

        return null;
    },

    checkCondition: function (condition, values) {
        switch (condition) {
            case 0:
                return this.values() === null;
            case 1:
                return this.values() !== null;
            case 2:
                return this.values() === values;
            case 3:
                return this.values() !== values;
            default:
                return false;
        }
    },

    bindConditionListener: function(listeners, condition, values) {
        if (this.el && this.parent && !this.readOnly) {
            if (!this.bound) {
                if (this.autocomplete) {
                    this.el.on("select2:select", $.proxy(this.onValueChanged, this));
                    this.el.on("select2:unselect", $.proxy(this.onValueUnselected, this));
                } else {
                    this.el.parent('div.bootstrap-select').on('changed.bs.select', $.proxy(this.onValueChanged, this));
                }
                this.bound = true;
            }

            this.conditionType = condition;
            this.conditionValues = values;
            this.listeners = listeners || [];
        }
    },

    onValueChanged: function(e) {
        let display = this.checkCondition(this.conditionType, this.conditionValues);

        // show or hide the parent element
        if (display) {
            for (let i = 0; i < this.listeners.length; ++i) {
                this.listeners[i].parent.parent().show(true);
            }
        } else {
            for (let i = 0; i < this.listeners.length; ++i) {
                this.listeners[i].parent.parent().hide(true);
            }
        }
    },

    onValueUnselected: function(e) {
        let display = false;

        switch (this.conditionType) {
            case 0:
                display = true;
                break;
            case 1:
                display = false;
                break;
            case 2:
                display = false;
                break;
            case 3:
                display = false;
                break;
            default:
                break;
        }

        // show or hide the parent element
        if (display) {
            for (let i = 0; i < this.listeners.length; ++i) {
                this.listeners[i].parent.parent().show(true);
            }
        } else {
            for (let i = 0; i < this.listeners.length; ++i) {
                this.listeners[i].parent.parent().hide(true);
            }
        }
    }
});

EnumSingle.DescriptorTypeDetailsView = Marionette.View.extend({
    className: 'descriptor-type-details-format',
    template: __webpack_require__(500),

    ui: {
        format_trans: "#format_trans",
        field0: '#type_field0',
        sort_by_field: '#sort_by_field',
        list_type: '#list_type'
    },

    initialize: function() {
        this.listenTo(this.model, 'change', this.render, this);
    },

    onRender: function() {
        this.ui.format_trans.selectpicker({style: 'btn-default', container: 'body'});

        this.ui.sort_by_field.selectpicker({style: 'btn-default'});
        this.ui.list_type.selectpicker({style: 'btn-default'});

        let format = this.model.get('format');

        if (format.fields != undefined) {
            if (format.fields.length >= 1)
                this.ui.field0.val(format.fields[0]);
        }

        if (format.sortby_field != undefined) {
            this.ui.sort_by_field.selectpicker('val', format.sortby_field);
        }

        if (format.list_type != undefined) {
            this.ui.list_type.selectpicker('val', format.list_type);
        }
    },

    getFormat: function() {
        return {
            'trans': this.ui.format_trans.val() === "true",
            'fields': [this.ui.field0.val()],
            'sortby_field': this.ui.sort_by_field.val(),
            'display_fields': 'value0',
            'list_type': this.ui.list_type.val(),
            'search_field': 'value0'
        }
    }
});

module.exports = EnumSingle;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 52 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {/**
 * @file numeric.js
 * @brief Display and manage a numeric format of type of descriptor
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-01-20
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let DescriptorFormatType = __webpack_require__(13);
let Marionette = __webpack_require__(1);

let Numeric = function() {
    DescriptorFormatType.call(this);

    this.name = "numeric";
    this.group = "single";

    this.precision = 0;
};

_.extend(Numeric.prototype, DescriptorFormatType.prototype, {
    create: function(format, parent, options) {
        options || (options = {
            readOnly: false,
            history: false
        });

        this.precision = format.precision;

        if (options.readOnly) {
            let input = this._createStdInput(parent, "fa-cog", options.history);

            this.parent = parent;
            this.readOnly = true;
            this.el = input;
        } else {
            let input = $('<input class="form-control" width="100%">');
            let clean = $('<span class="form-clean-btn action fa fa-eraser"></span>');
            this.groupEl = this._createInputGroup(parent, "fa-cog", input, options.history);

            clean.insertAfter(input);

            if (options.history) {
                // adjust position
                clean.css('right', '90px');
            }

            clean.on('click', function() {
               input.val("");
            });

            input.numeric({
                allowPlus           : false,
                allowMinus          : true,
                allowThouSep        : false,
                allowDecSep         : true,
                allowLeadingSpaces  : false,
                maxDigits           : NaN,
                maxDecimalPlaces    : format.precision,
                maxPreDecimalPlaces : NaN,
                max                 : NaN,
                min                 : NaN
            });

            this.parent = parent;
            this.el = input;
        }
    },

    destroy: function() {
        if (this.el && this.parent) {
            if (this.readOnly) {
                this.el.parent().remove();
            } else {
                this.el.parent().remove();
            }
        }
    },

    enable: function() {
        if (this.el) {
            this.el.prop("disabled", false);
        }
    },

    disable: function() {
        if (this.el) {
            this.el.prop("disabled", true);
        }
    },

    set: function (format, definesValues, defaultValues, options) {
        if (!this.el || !this.parent) {
            return;
        }

        definesValues = this.isValueDefined(definesValues, defaultValues);

        if (this.readOnly) {
            if (definesValues) {
                this.el.val(defaultValues);
            } else {
                this.el.val("");
            }
        } else {
            if (definesValues) {
                this.el.val(defaultValues);
            } else {
                this.el.val("");
            }
        }
    },

    values: function() {
        if (this.el && this.parent) {
            let value = parseFloat(this.el.val());
            return _.isNaN(value) ? null : value.toFixed(this.precision);
        }

        return null;
    },

    checkCondition: function (condition, values) {
        switch (condition) {
            case 0:
                return this.values() == null;
            case 1:
                return this.values() != null;
            case 2:
                return this.values() === values;
            case 3:
                return this.values() !== values;
            default:
                return false;
        }
    },

    bindConditionListener: function(listeners, condition, values) {
        if (this.el && this.parent && !this.readOnly) {
            if (!this.bound) {
                this.el.on('input', $.proxy(this.onValueChanged, this));
                this.bound = true;
            }

            this.conditionType = condition;
            this.conditionValues = values;
            this.listeners = listeners || [];
        }
    },

    onValueChanged: function(e) {
        let display = this.checkCondition(this.conditionType, this.conditionValues);

        // show or hide the parent element
        if (display) {
            for (let i = 0; i < this.listeners.length; ++i) {
                this.listeners[i].parent.parent().show(true);
            }
        } else {
            for (let i = 0; i < this.listeners.length; ++i) {
                this.listeners[i].parent.parent().hide(true);
            }
        }
    }
});

Numeric.DescriptorTypeDetailsView = Marionette.View.extend({
    className: 'descriptor-type-details-format',
    template: __webpack_require__(504),

    ui: {
        'format_unit': '#format_unit',
        'format_unit_custom': '#format_unit_custom',
        'format_precision': '#format_precision'
    },

    events: {
        'change @ui.format_unit': 'changeFormatUnit',
        'input @ui.format_unit_custom': 'inputFormatUnitCustom'
    },

    initialize: function() {
        this.listenTo(this.model, 'change', this.render, this);
    },

    onRender: function() {
        application.descriptor.views.formatUnits.drawSelect(this.ui.format_unit);

        this.ui.format_precision.selectpicker({style: 'btn-default', container: 'body'});

        let format = this.model.get('format');

        if (format.unit != undefined) {
            this.ui.format_unit.selectpicker('val', format.unit);
        }

        if (format.precision != undefined) {
            this.ui.format_precision.selectpicker('val', format.precision);
        }
    },

    getFormat: function() {
        let customUnit = this.ui.format_unit.val() === "custom" ? this.ui.format_unit_custom.val() : "";

        return {
            'unit': this.ui.format_unit.val(),
            'custom_unit': customUnit,
            'precision': this.ui.format_precision.val()
        }
    },

    changeFormatUnit: function () {
        let unit = $(this.ui.format_unit).val();

        switch (unit) {
            case "custom":
                this.ui.format_unit_custom.prop("disabled", false).val("");
                $(this.ui.format_unit_custom).cleanField();
                break;
            default:
                this.ui.format_unit_custom.prop("disabled", true).val("");
                $(this.ui.format_unit_custom).cleanField();
                break;
        }
    },

    inputFormatUnitCustom: function () {
        let v = this.ui.format_unit_custom.val();
        let re = /^[a-zA-Z0-9_\-%°⁼⁺⁻⁰¹²³⁴⁵⁶⁷⁸⁹/µ]+$/i;

        if (v.length > 0 && !re.test(v)) {
            $(this.ui.format_unit_custom).validateField('failed', _t("Invalid characters (alphanumeric, _-°%°⁼⁺⁻⁰¹²³⁴⁵⁶⁷⁸⁹/µ allowed)"));
        } else if (v.length > 32) {
            $(this.ui.format_unit_custom).validateField('failed', _t('characters_max', {count: 32}));
        } else if (v.length < 1) {
            //$(this.ui.format_unit_custom).validateField('failed', _t('characters_min', {count: 1})););
            $(this.ui.format_unit_custom).cleanField();
        } else {
            $(this.ui.format_unit_custom).validateField('ok');
        }
    }
});

module.exports = Numeric;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 53 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
with (obj) {
__p += '<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title">' +
__e( _t("Change the value of a field for a type of descriptor") ) +
'</h4></div><div class="modal-body"><form id="descriptor_value_values">';

                var languages = application.main.collections.uilanguages;

                for (var i = 0; i < languages.models.length; ++i) {
                    var lang_id = languages.at(i).get('id');
                    var lang_label = languages.at(i).get('label');
                    var autofocus = (i == 0) ? 'autofocus=""' : "";
                ;
__p += ' <div class="form-group"><label class="control-label">' +
__e( _t(lang_label) ) +
'</label><input class="form-control" type="text" language="' +
__e( lang_id ) +
'" value="' +
__e( values[lang_id] ) +
'" maxlength="64" ' +
__e( autofocus ) +
' autocomplete="off" style="width:100%"></div> ';
 } ;
__p += ' </form></div><div class="modal-footer"><button type="button" class="btn btn-default cancel" data-dismiss="modal">' +
__e( _t("Cancel") ) +
'</button> <button type="button" class="btn btn-success apply">' +
__e( _t("Apply") ) +
'</button></div></div></div>';

}
return __p
};

/*
original source:

<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title"><%- _t("Change the value of a field for a type of descriptor") %></h4></div><div class="modal-body"><form id="descriptor_value_values"><%
                var languages = application.main.collections.uilanguages;

                for (var i = 0; i < languages.models.length; ++i) {
                    var lang_id = languages.at(i).get('id');
                    var lang_label = languages.at(i).get('label');
                    var autofocus = (i == 0) ? 'autofocus=""' : "";
                %> <div class="form-group"><label class="control-label"><%- _t(lang_label) %></label><input class="form-control" type="text" language="<%- lang_id %>" value="<%- values[lang_id] %>" maxlength="64" <%- autofocus %> autocomplete="off" style="width:100%"></div> <% } %> </form></div><div class="modal-footer"><button type="button" class="btn btn-default cancel" data-dismiss="modal"><%- _t("Cancel") %></button> <button type="button" class="btn btn-success apply"><%- _t("Apply") %></button></div></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 54 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title">' +
__e( _t("Change the value of a field for a type of descriptor") ) +
'</h4></div><div class="modal-body"><form><div class="form-group"><label class="control-label" for="value">' +
__e( _t("Value for any languages") ) +
'</label><input class="form-control" id="value" type="text" name="value" value="" maxlength="128" autofocus="" autocomplete="off" style="width:100%"></div></form></div><div class="modal-footer"><button type="button" class="btn btn-default cancel" data-dismiss="modal">' +
__e( _t("Cancel") ) +
'</button> <button type="button" class="btn btn-success apply">' +
__e( _t("Apply") ) +
'</button></div></div></div>';

}
return __p
};

/*
original source:

<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title"><%- _t("Change the value of a field for a type of descriptor") %></h4></div><div class="modal-body"><form><div class="form-group"><label class="control-label" for="value"><%- _t("Value for any languages") %></label><input class="form-control" id="value" type="text" name="value" value="" maxlength="128" autofocus="" autocomplete="off" style="width:100%"></div></form></div><div class="modal-footer"><button type="button" class="btn btn-default cancel" data-dismiss="modal"><%- _t("Cancel") %></button> <button type="button" class="btn btn-success apply"><%- _t("Apply") %></button></div></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 55 */
/***/ (function(module, exports, __webpack_require__) {

var escape = __webpack_require__(90);
exports = module.exports = __webpack_require__(21)(false);
// imports


// module
exports.push([module.i, "/*!\n *  Font Awesome 4.7.0 by @davegandy - http://fontawesome.io - @fontawesome\n *  License - http://fontawesome.io/license (Font: SIL OFL 1.1, CSS: MIT License)\n */@font-face{font-family:FontAwesome;src:url(" + escape(__webpack_require__(292)) + ");src:url(" + escape(__webpack_require__(293)) + "?#iefix&v=4.7.0) format(\"embedded-opentype\"),url(" + escape(__webpack_require__(294)) + ") format(\"woff2\"),url(" + escape(__webpack_require__(295)) + ") format(\"woff\"),url(" + escape(__webpack_require__(296)) + ") format(\"truetype\"),url(" + escape(__webpack_require__(297)) + "#fontawesomeregular) format(\"svg\");font-weight:400;font-style:normal}.fa{display:inline-block;font:normal normal normal 14px/1 FontAwesome;font-size:inherit;text-rendering:auto;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.fa-lg{font-size:1.33333333em;line-height:.75em;vertical-align:-15%}.fa-2x{font-size:2em}.fa-3x{font-size:3em}.fa-4x{font-size:4em}.fa-5x{font-size:5em}.fa-fw{width:1.28571429em;text-align:center}.fa-ul{padding-left:0;margin-left:2.14285714em;list-style-type:none}.fa-ul>li{position:relative}.fa-li{position:absolute;left:-2.14285714em;width:2.14285714em;top:.14285714em;text-align:center}.fa-li.fa-lg{left:-1.85714286em}.fa-border{padding:.2em .25em .15em;border:.08em solid #eee;border-radius:.1em}.fa-pull-left{float:left}.fa-pull-right{float:right}.fa.fa-pull-left{margin-right:.3em}.fa.fa-pull-right{margin-left:.3em}.pull-right{float:right}.pull-left{float:left}.fa.pull-left{margin-right:.3em}.fa.pull-right{margin-left:.3em}.fa-spin{-webkit-animation:fa-spin 2s infinite linear;animation:fa-spin 2s infinite linear}.fa-pulse{-webkit-animation:fa-spin 1s infinite steps(8);animation:fa-spin 1s infinite steps(8)}@-webkit-keyframes fa-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}@keyframes fa-spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}.fa-rotate-90{-ms-filter:\"progid:DXImageTransform.Microsoft.BasicImage(rotation=1)\";-webkit-transform:rotate(90deg);-ms-transform:rotate(90deg);transform:rotate(90deg)}.fa-rotate-180{-ms-filter:\"progid:DXImageTransform.Microsoft.BasicImage(rotation=2)\";-webkit-transform:rotate(180deg);-ms-transform:rotate(180deg);transform:rotate(180deg)}.fa-rotate-270{-ms-filter:\"progid:DXImageTransform.Microsoft.BasicImage(rotation=3)\";-webkit-transform:rotate(270deg);-ms-transform:rotate(270deg);transform:rotate(270deg)}.fa-flip-horizontal{-ms-filter:\"progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1)\";-webkit-transform:scaleX(-1);-ms-transform:scaleX(-1);transform:scaleX(-1)}.fa-flip-vertical{-ms-filter:\"progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)\";-webkit-transform:scaleY(-1);-ms-transform:scaleY(-1);transform:scaleY(-1)}:root .fa-flip-horizontal,:root .fa-flip-vertical,:root .fa-rotate-90,:root .fa-rotate-180,:root .fa-rotate-270{filter:none}.fa-stack{position:relative;display:inline-block;width:2em;height:2em;line-height:2em;vertical-align:middle}.fa-stack-1x,.fa-stack-2x{position:absolute;left:0;width:100%;text-align:center}.fa-stack-1x{line-height:inherit}.fa-stack-2x{font-size:2em}.fa-inverse{color:#fff}.fa-glass:before{content:\"\\F000\"}.fa-music:before{content:\"\\F001\"}.fa-search:before{content:\"\\F002\"}.fa-envelope-o:before{content:\"\\F003\"}.fa-heart:before{content:\"\\F004\"}.fa-star:before{content:\"\\F005\"}.fa-star-o:before{content:\"\\F006\"}.fa-user:before{content:\"\\F007\"}.fa-film:before{content:\"\\F008\"}.fa-th-large:before{content:\"\\F009\"}.fa-th:before{content:\"\\F00A\"}.fa-th-list:before{content:\"\\F00B\"}.fa-check:before{content:\"\\F00C\"}.fa-close:before,.fa-remove:before,.fa-times:before{content:\"\\F00D\"}.fa-search-plus:before{content:\"\\F00E\"}.fa-search-minus:before{content:\"\\F010\"}.fa-power-off:before{content:\"\\F011\"}.fa-signal:before{content:\"\\F012\"}.fa-cog:before,.fa-gear:before{content:\"\\F013\"}.fa-trash-o:before{content:\"\\F014\"}.fa-home:before{content:\"\\F015\"}.fa-file-o:before{content:\"\\F016\"}.fa-clock-o:before{content:\"\\F017\"}.fa-road:before{content:\"\\F018\"}.fa-download:before{content:\"\\F019\"}.fa-arrow-circle-o-down:before{content:\"\\F01A\"}.fa-arrow-circle-o-up:before{content:\"\\F01B\"}.fa-inbox:before{content:\"\\F01C\"}.fa-play-circle-o:before{content:\"\\F01D\"}.fa-repeat:before,.fa-rotate-right:before{content:\"\\F01E\"}.fa-refresh:before{content:\"\\F021\"}.fa-list-alt:before{content:\"\\F022\"}.fa-lock:before{content:\"\\F023\"}.fa-flag:before{content:\"\\F024\"}.fa-headphones:before{content:\"\\F025\"}.fa-volume-off:before{content:\"\\F026\"}.fa-volume-down:before{content:\"\\F027\"}.fa-volume-up:before{content:\"\\F028\"}.fa-qrcode:before{content:\"\\F029\"}.fa-barcode:before{content:\"\\F02A\"}.fa-tag:before{content:\"\\F02B\"}.fa-tags:before{content:\"\\F02C\"}.fa-book:before{content:\"\\F02D\"}.fa-bookmark:before{content:\"\\F02E\"}.fa-print:before{content:\"\\F02F\"}.fa-camera:before{content:\"\\F030\"}.fa-font:before{content:\"\\F031\"}.fa-bold:before{content:\"\\F032\"}.fa-italic:before{content:\"\\F033\"}.fa-text-height:before{content:\"\\F034\"}.fa-text-width:before{content:\"\\F035\"}.fa-align-left:before{content:\"\\F036\"}.fa-align-center:before{content:\"\\F037\"}.fa-align-right:before{content:\"\\F038\"}.fa-align-justify:before{content:\"\\F039\"}.fa-list:before{content:\"\\F03A\"}.fa-dedent:before,.fa-outdent:before{content:\"\\F03B\"}.fa-indent:before{content:\"\\F03C\"}.fa-video-camera:before{content:\"\\F03D\"}.fa-image:before,.fa-photo:before,.fa-picture-o:before{content:\"\\F03E\"}.fa-pencil:before{content:\"\\F040\"}.fa-map-marker:before{content:\"\\F041\"}.fa-adjust:before{content:\"\\F042\"}.fa-tint:before{content:\"\\F043\"}.fa-edit:before,.fa-pencil-square-o:before{content:\"\\F044\"}.fa-share-square-o:before{content:\"\\F045\"}.fa-check-square-o:before{content:\"\\F046\"}.fa-arrows:before{content:\"\\F047\"}.fa-step-backward:before{content:\"\\F048\"}.fa-fast-backward:before{content:\"\\F049\"}.fa-backward:before{content:\"\\F04A\"}.fa-play:before{content:\"\\F04B\"}.fa-pause:before{content:\"\\F04C\"}.fa-stop:before{content:\"\\F04D\"}.fa-forward:before{content:\"\\F04E\"}.fa-fast-forward:before{content:\"\\F050\"}.fa-step-forward:before{content:\"\\F051\"}.fa-eject:before{content:\"\\F052\"}.fa-chevron-left:before{content:\"\\F053\"}.fa-chevron-right:before{content:\"\\F054\"}.fa-plus-circle:before{content:\"\\F055\"}.fa-minus-circle:before{content:\"\\F056\"}.fa-times-circle:before{content:\"\\F057\"}.fa-check-circle:before{content:\"\\F058\"}.fa-question-circle:before{content:\"\\F059\"}.fa-info-circle:before{content:\"\\F05A\"}.fa-crosshairs:before{content:\"\\F05B\"}.fa-times-circle-o:before{content:\"\\F05C\"}.fa-check-circle-o:before{content:\"\\F05D\"}.fa-ban:before{content:\"\\F05E\"}.fa-arrow-left:before{content:\"\\F060\"}.fa-arrow-right:before{content:\"\\F061\"}.fa-arrow-up:before{content:\"\\F062\"}.fa-arrow-down:before{content:\"\\F063\"}.fa-mail-forward:before,.fa-share:before{content:\"\\F064\"}.fa-expand:before{content:\"\\F065\"}.fa-compress:before{content:\"\\F066\"}.fa-plus:before{content:\"\\F067\"}.fa-minus:before{content:\"\\F068\"}.fa-asterisk:before{content:\"\\F069\"}.fa-exclamation-circle:before{content:\"\\F06A\"}.fa-gift:before{content:\"\\F06B\"}.fa-leaf:before{content:\"\\F06C\"}.fa-fire:before{content:\"\\F06D\"}.fa-eye:before{content:\"\\F06E\"}.fa-eye-slash:before{content:\"\\F070\"}.fa-exclamation-triangle:before,.fa-warning:before{content:\"\\F071\"}.fa-plane:before{content:\"\\F072\"}.fa-calendar:before{content:\"\\F073\"}.fa-random:before{content:\"\\F074\"}.fa-comment:before{content:\"\\F075\"}.fa-magnet:before{content:\"\\F076\"}.fa-chevron-up:before{content:\"\\F077\"}.fa-chevron-down:before{content:\"\\F078\"}.fa-retweet:before{content:\"\\F079\"}.fa-shopping-cart:before{content:\"\\F07A\"}.fa-folder:before{content:\"\\F07B\"}.fa-folder-open:before{content:\"\\F07C\"}.fa-arrows-v:before{content:\"\\F07D\"}.fa-arrows-h:before{content:\"\\F07E\"}.fa-bar-chart-o:before,.fa-bar-chart:before{content:\"\\F080\"}.fa-twitter-square:before{content:\"\\F081\"}.fa-facebook-square:before{content:\"\\F082\"}.fa-camera-retro:before{content:\"\\F083\"}.fa-key:before{content:\"\\F084\"}.fa-cogs:before,.fa-gears:before{content:\"\\F085\"}.fa-comments:before{content:\"\\F086\"}.fa-thumbs-o-up:before{content:\"\\F087\"}.fa-thumbs-o-down:before{content:\"\\F088\"}.fa-star-half:before{content:\"\\F089\"}.fa-heart-o:before{content:\"\\F08A\"}.fa-sign-out:before{content:\"\\F08B\"}.fa-linkedin-square:before{content:\"\\F08C\"}.fa-thumb-tack:before{content:\"\\F08D\"}.fa-external-link:before{content:\"\\F08E\"}.fa-sign-in:before{content:\"\\F090\"}.fa-trophy:before{content:\"\\F091\"}.fa-github-square:before{content:\"\\F092\"}.fa-upload:before{content:\"\\F093\"}.fa-lemon-o:before{content:\"\\F094\"}.fa-phone:before{content:\"\\F095\"}.fa-square-o:before{content:\"\\F096\"}.fa-bookmark-o:before{content:\"\\F097\"}.fa-phone-square:before{content:\"\\F098\"}.fa-twitter:before{content:\"\\F099\"}.fa-facebook-f:before,.fa-facebook:before{content:\"\\F09A\"}.fa-github:before{content:\"\\F09B\"}.fa-unlock:before{content:\"\\F09C\"}.fa-credit-card:before{content:\"\\F09D\"}.fa-feed:before,.fa-rss:before{content:\"\\F09E\"}.fa-hdd-o:before{content:\"\\F0A0\"}.fa-bullhorn:before{content:\"\\F0A1\"}.fa-bell:before{content:\"\\F0F3\"}.fa-certificate:before{content:\"\\F0A3\"}.fa-hand-o-right:before{content:\"\\F0A4\"}.fa-hand-o-left:before{content:\"\\F0A5\"}.fa-hand-o-up:before{content:\"\\F0A6\"}.fa-hand-o-down:before{content:\"\\F0A7\"}.fa-arrow-circle-left:before{content:\"\\F0A8\"}.fa-arrow-circle-right:before{content:\"\\F0A9\"}.fa-arrow-circle-up:before{content:\"\\F0AA\"}.fa-arrow-circle-down:before{content:\"\\F0AB\"}.fa-globe:before{content:\"\\F0AC\"}.fa-wrench:before{content:\"\\F0AD\"}.fa-tasks:before{content:\"\\F0AE\"}.fa-filter:before{content:\"\\F0B0\"}.fa-briefcase:before{content:\"\\F0B1\"}.fa-arrows-alt:before{content:\"\\F0B2\"}.fa-group:before,.fa-users:before{content:\"\\F0C0\"}.fa-chain:before,.fa-link:before{content:\"\\F0C1\"}.fa-cloud:before{content:\"\\F0C2\"}.fa-flask:before{content:\"\\F0C3\"}.fa-cut:before,.fa-scissors:before{content:\"\\F0C4\"}.fa-copy:before,.fa-files-o:before{content:\"\\F0C5\"}.fa-paperclip:before{content:\"\\F0C6\"}.fa-floppy-o:before,.fa-save:before{content:\"\\F0C7\"}.fa-square:before{content:\"\\F0C8\"}.fa-bars:before,.fa-navicon:before,.fa-reorder:before{content:\"\\F0C9\"}.fa-list-ul:before{content:\"\\F0CA\"}.fa-list-ol:before{content:\"\\F0CB\"}.fa-strikethrough:before{content:\"\\F0CC\"}.fa-underline:before{content:\"\\F0CD\"}.fa-table:before{content:\"\\F0CE\"}.fa-magic:before{content:\"\\F0D0\"}.fa-truck:before{content:\"\\F0D1\"}.fa-pinterest:before{content:\"\\F0D2\"}.fa-pinterest-square:before{content:\"\\F0D3\"}.fa-google-plus-square:before{content:\"\\F0D4\"}.fa-google-plus:before{content:\"\\F0D5\"}.fa-money:before{content:\"\\F0D6\"}.fa-caret-down:before{content:\"\\F0D7\"}.fa-caret-up:before{content:\"\\F0D8\"}.fa-caret-left:before{content:\"\\F0D9\"}.fa-caret-right:before{content:\"\\F0DA\"}.fa-columns:before{content:\"\\F0DB\"}.fa-sort:before,.fa-unsorted:before{content:\"\\F0DC\"}.fa-sort-desc:before,.fa-sort-down:before{content:\"\\F0DD\"}.fa-sort-asc:before,.fa-sort-up:before{content:\"\\F0DE\"}.fa-envelope:before{content:\"\\F0E0\"}.fa-linkedin:before{content:\"\\F0E1\"}.fa-rotate-left:before,.fa-undo:before{content:\"\\F0E2\"}.fa-gavel:before,.fa-legal:before{content:\"\\F0E3\"}.fa-dashboard:before,.fa-tachometer:before{content:\"\\F0E4\"}.fa-comment-o:before{content:\"\\F0E5\"}.fa-comments-o:before{content:\"\\F0E6\"}.fa-bolt:before,.fa-flash:before{content:\"\\F0E7\"}.fa-sitemap:before{content:\"\\F0E8\"}.fa-umbrella:before{content:\"\\F0E9\"}.fa-clipboard:before,.fa-paste:before{content:\"\\F0EA\"}.fa-lightbulb-o:before{content:\"\\F0EB\"}.fa-exchange:before{content:\"\\F0EC\"}.fa-cloud-download:before{content:\"\\F0ED\"}.fa-cloud-upload:before{content:\"\\F0EE\"}.fa-user-md:before{content:\"\\F0F0\"}.fa-stethoscope:before{content:\"\\F0F1\"}.fa-suitcase:before{content:\"\\F0F2\"}.fa-bell-o:before{content:\"\\F0A2\"}.fa-coffee:before{content:\"\\F0F4\"}.fa-cutlery:before{content:\"\\F0F5\"}.fa-file-text-o:before{content:\"\\F0F6\"}.fa-building-o:before{content:\"\\F0F7\"}.fa-hospital-o:before{content:\"\\F0F8\"}.fa-ambulance:before{content:\"\\F0F9\"}.fa-medkit:before{content:\"\\F0FA\"}.fa-fighter-jet:before{content:\"\\F0FB\"}.fa-beer:before{content:\"\\F0FC\"}.fa-h-square:before{content:\"\\F0FD\"}.fa-plus-square:before{content:\"\\F0FE\"}.fa-angle-double-left:before{content:\"\\F100\"}.fa-angle-double-right:before{content:\"\\F101\"}.fa-angle-double-up:before{content:\"\\F102\"}.fa-angle-double-down:before{content:\"\\F103\"}.fa-angle-left:before{content:\"\\F104\"}.fa-angle-right:before{content:\"\\F105\"}.fa-angle-up:before{content:\"\\F106\"}.fa-angle-down:before{content:\"\\F107\"}.fa-desktop:before{content:\"\\F108\"}.fa-laptop:before{content:\"\\F109\"}.fa-tablet:before{content:\"\\F10A\"}.fa-mobile-phone:before,.fa-mobile:before{content:\"\\F10B\"}.fa-circle-o:before{content:\"\\F10C\"}.fa-quote-left:before{content:\"\\F10D\"}.fa-quote-right:before{content:\"\\F10E\"}.fa-spinner:before{content:\"\\F110\"}.fa-circle:before{content:\"\\F111\"}.fa-mail-reply:before,.fa-reply:before{content:\"\\F112\"}.fa-github-alt:before{content:\"\\F113\"}.fa-folder-o:before{content:\"\\F114\"}.fa-folder-open-o:before{content:\"\\F115\"}.fa-smile-o:before{content:\"\\F118\"}.fa-frown-o:before{content:\"\\F119\"}.fa-meh-o:before{content:\"\\F11A\"}.fa-gamepad:before{content:\"\\F11B\"}.fa-keyboard-o:before{content:\"\\F11C\"}.fa-flag-o:before{content:\"\\F11D\"}.fa-flag-checkered:before{content:\"\\F11E\"}.fa-terminal:before{content:\"\\F120\"}.fa-code:before{content:\"\\F121\"}.fa-mail-reply-all:before,.fa-reply-all:before{content:\"\\F122\"}.fa-star-half-empty:before,.fa-star-half-full:before,.fa-star-half-o:before{content:\"\\F123\"}.fa-location-arrow:before{content:\"\\F124\"}.fa-crop:before{content:\"\\F125\"}.fa-code-fork:before{content:\"\\F126\"}.fa-chain-broken:before,.fa-unlink:before{content:\"\\F127\"}.fa-question:before{content:\"\\F128\"}.fa-info:before{content:\"\\F129\"}.fa-exclamation:before{content:\"\\F12A\"}.fa-superscript:before{content:\"\\F12B\"}.fa-subscript:before{content:\"\\F12C\"}.fa-eraser:before{content:\"\\F12D\"}.fa-puzzle-piece:before{content:\"\\F12E\"}.fa-microphone:before{content:\"\\F130\"}.fa-microphone-slash:before{content:\"\\F131\"}.fa-shield:before{content:\"\\F132\"}.fa-calendar-o:before{content:\"\\F133\"}.fa-fire-extinguisher:before{content:\"\\F134\"}.fa-rocket:before{content:\"\\F135\"}.fa-maxcdn:before{content:\"\\F136\"}.fa-chevron-circle-left:before{content:\"\\F137\"}.fa-chevron-circle-right:before{content:\"\\F138\"}.fa-chevron-circle-up:before{content:\"\\F139\"}.fa-chevron-circle-down:before{content:\"\\F13A\"}.fa-html5:before{content:\"\\F13B\"}.fa-css3:before{content:\"\\F13C\"}.fa-anchor:before{content:\"\\F13D\"}.fa-unlock-alt:before{content:\"\\F13E\"}.fa-bullseye:before{content:\"\\F140\"}.fa-ellipsis-h:before{content:\"\\F141\"}.fa-ellipsis-v:before{content:\"\\F142\"}.fa-rss-square:before{content:\"\\F143\"}.fa-play-circle:before{content:\"\\F144\"}.fa-ticket:before{content:\"\\F145\"}.fa-minus-square:before{content:\"\\F146\"}.fa-minus-square-o:before{content:\"\\F147\"}.fa-level-up:before{content:\"\\F148\"}.fa-level-down:before{content:\"\\F149\"}.fa-check-square:before{content:\"\\F14A\"}.fa-pencil-square:before{content:\"\\F14B\"}.fa-external-link-square:before{content:\"\\F14C\"}.fa-share-square:before{content:\"\\F14D\"}.fa-compass:before{content:\"\\F14E\"}.fa-caret-square-o-down:before,.fa-toggle-down:before{content:\"\\F150\"}.fa-caret-square-o-up:before,.fa-toggle-up:before{content:\"\\F151\"}.fa-caret-square-o-right:before,.fa-toggle-right:before{content:\"\\F152\"}.fa-eur:before,.fa-euro:before{content:\"\\F153\"}.fa-gbp:before{content:\"\\F154\"}.fa-dollar:before,.fa-usd:before{content:\"\\F155\"}.fa-inr:before,.fa-rupee:before{content:\"\\F156\"}.fa-cny:before,.fa-jpy:before,.fa-rmb:before,.fa-yen:before{content:\"\\F157\"}.fa-rouble:before,.fa-rub:before,.fa-ruble:before{content:\"\\F158\"}.fa-krw:before,.fa-won:before{content:\"\\F159\"}.fa-bitcoin:before,.fa-btc:before{content:\"\\F15A\"}.fa-file:before{content:\"\\F15B\"}.fa-file-text:before{content:\"\\F15C\"}.fa-sort-alpha-asc:before{content:\"\\F15D\"}.fa-sort-alpha-desc:before{content:\"\\F15E\"}.fa-sort-amount-asc:before{content:\"\\F160\"}.fa-sort-amount-desc:before{content:\"\\F161\"}.fa-sort-numeric-asc:before{content:\"\\F162\"}.fa-sort-numeric-desc:before{content:\"\\F163\"}.fa-thumbs-up:before{content:\"\\F164\"}.fa-thumbs-down:before{content:\"\\F165\"}.fa-youtube-square:before{content:\"\\F166\"}.fa-youtube:before{content:\"\\F167\"}.fa-xing:before{content:\"\\F168\"}.fa-xing-square:before{content:\"\\F169\"}.fa-youtube-play:before{content:\"\\F16A\"}.fa-dropbox:before{content:\"\\F16B\"}.fa-stack-overflow:before{content:\"\\F16C\"}.fa-instagram:before{content:\"\\F16D\"}.fa-flickr:before{content:\"\\F16E\"}.fa-adn:before{content:\"\\F170\"}.fa-bitbucket:before{content:\"\\F171\"}.fa-bitbucket-square:before{content:\"\\F172\"}.fa-tumblr:before{content:\"\\F173\"}.fa-tumblr-square:before{content:\"\\F174\"}.fa-long-arrow-down:before{content:\"\\F175\"}.fa-long-arrow-up:before{content:\"\\F176\"}.fa-long-arrow-left:before{content:\"\\F177\"}.fa-long-arrow-right:before{content:\"\\F178\"}.fa-apple:before{content:\"\\F179\"}.fa-windows:before{content:\"\\F17A\"}.fa-android:before{content:\"\\F17B\"}.fa-linux:before{content:\"\\F17C\"}.fa-dribbble:before{content:\"\\F17D\"}.fa-skype:before{content:\"\\F17E\"}.fa-foursquare:before{content:\"\\F180\"}.fa-trello:before{content:\"\\F181\"}.fa-female:before{content:\"\\F182\"}.fa-male:before{content:\"\\F183\"}.fa-gittip:before,.fa-gratipay:before{content:\"\\F184\"}.fa-sun-o:before{content:\"\\F185\"}.fa-moon-o:before{content:\"\\F186\"}.fa-archive:before{content:\"\\F187\"}.fa-bug:before{content:\"\\F188\"}.fa-vk:before{content:\"\\F189\"}.fa-weibo:before{content:\"\\F18A\"}.fa-renren:before{content:\"\\F18B\"}.fa-pagelines:before{content:\"\\F18C\"}.fa-stack-exchange:before{content:\"\\F18D\"}.fa-arrow-circle-o-right:before{content:\"\\F18E\"}.fa-arrow-circle-o-left:before{content:\"\\F190\"}.fa-caret-square-o-left:before,.fa-toggle-left:before{content:\"\\F191\"}.fa-dot-circle-o:before{content:\"\\F192\"}.fa-wheelchair:before{content:\"\\F193\"}.fa-vimeo-square:before{content:\"\\F194\"}.fa-try:before,.fa-turkish-lira:before{content:\"\\F195\"}.fa-plus-square-o:before{content:\"\\F196\"}.fa-space-shuttle:before{content:\"\\F197\"}.fa-slack:before{content:\"\\F198\"}.fa-envelope-square:before{content:\"\\F199\"}.fa-wordpress:before{content:\"\\F19A\"}.fa-openid:before{content:\"\\F19B\"}.fa-bank:before,.fa-institution:before,.fa-university:before{content:\"\\F19C\"}.fa-graduation-cap:before,.fa-mortar-board:before{content:\"\\F19D\"}.fa-yahoo:before{content:\"\\F19E\"}.fa-google:before{content:\"\\F1A0\"}.fa-reddit:before{content:\"\\F1A1\"}.fa-reddit-square:before{content:\"\\F1A2\"}.fa-stumbleupon-circle:before{content:\"\\F1A3\"}.fa-stumbleupon:before{content:\"\\F1A4\"}.fa-delicious:before{content:\"\\F1A5\"}.fa-digg:before{content:\"\\F1A6\"}.fa-pied-piper-pp:before{content:\"\\F1A7\"}.fa-pied-piper-alt:before{content:\"\\F1A8\"}.fa-drupal:before{content:\"\\F1A9\"}.fa-joomla:before{content:\"\\F1AA\"}.fa-language:before{content:\"\\F1AB\"}.fa-fax:before{content:\"\\F1AC\"}.fa-building:before{content:\"\\F1AD\"}.fa-child:before{content:\"\\F1AE\"}.fa-paw:before{content:\"\\F1B0\"}.fa-spoon:before{content:\"\\F1B1\"}.fa-cube:before{content:\"\\F1B2\"}.fa-cubes:before{content:\"\\F1B3\"}.fa-behance:before{content:\"\\F1B4\"}.fa-behance-square:before{content:\"\\F1B5\"}.fa-steam:before{content:\"\\F1B6\"}.fa-steam-square:before{content:\"\\F1B7\"}.fa-recycle:before{content:\"\\F1B8\"}.fa-automobile:before,.fa-car:before{content:\"\\F1B9\"}.fa-cab:before,.fa-taxi:before{content:\"\\F1BA\"}.fa-tree:before{content:\"\\F1BB\"}.fa-spotify:before{content:\"\\F1BC\"}.fa-deviantart:before{content:\"\\F1BD\"}.fa-soundcloud:before{content:\"\\F1BE\"}.fa-database:before{content:\"\\F1C0\"}.fa-file-pdf-o:before{content:\"\\F1C1\"}.fa-file-word-o:before{content:\"\\F1C2\"}.fa-file-excel-o:before{content:\"\\F1C3\"}.fa-file-powerpoint-o:before{content:\"\\F1C4\"}.fa-file-image-o:before,.fa-file-photo-o:before,.fa-file-picture-o:before{content:\"\\F1C5\"}.fa-file-archive-o:before,.fa-file-zip-o:before{content:\"\\F1C6\"}.fa-file-audio-o:before,.fa-file-sound-o:before{content:\"\\F1C7\"}.fa-file-movie-o:before,.fa-file-video-o:before{content:\"\\F1C8\"}.fa-file-code-o:before{content:\"\\F1C9\"}.fa-vine:before{content:\"\\F1CA\"}.fa-codepen:before{content:\"\\F1CB\"}.fa-jsfiddle:before{content:\"\\F1CC\"}.fa-life-bouy:before,.fa-life-buoy:before,.fa-life-ring:before,.fa-life-saver:before,.fa-support:before{content:\"\\F1CD\"}.fa-circle-o-notch:before{content:\"\\F1CE\"}.fa-ra:before,.fa-rebel:before,.fa-resistance:before{content:\"\\F1D0\"}.fa-empire:before,.fa-ge:before{content:\"\\F1D1\"}.fa-git-square:before{content:\"\\F1D2\"}.fa-git:before{content:\"\\F1D3\"}.fa-hacker-news:before,.fa-y-combinator-square:before,.fa-yc-square:before{content:\"\\F1D4\"}.fa-tencent-weibo:before{content:\"\\F1D5\"}.fa-qq:before{content:\"\\F1D6\"}.fa-wechat:before,.fa-weixin:before{content:\"\\F1D7\"}.fa-paper-plane:before,.fa-send:before{content:\"\\F1D8\"}.fa-paper-plane-o:before,.fa-send-o:before{content:\"\\F1D9\"}.fa-history:before{content:\"\\F1DA\"}.fa-circle-thin:before{content:\"\\F1DB\"}.fa-header:before{content:\"\\F1DC\"}.fa-paragraph:before{content:\"\\F1DD\"}.fa-sliders:before{content:\"\\F1DE\"}.fa-share-alt:before{content:\"\\F1E0\"}.fa-share-alt-square:before{content:\"\\F1E1\"}.fa-bomb:before{content:\"\\F1E2\"}.fa-futbol-o:before,.fa-soccer-ball-o:before{content:\"\\F1E3\"}.fa-tty:before{content:\"\\F1E4\"}.fa-binoculars:before{content:\"\\F1E5\"}.fa-plug:before{content:\"\\F1E6\"}.fa-slideshare:before{content:\"\\F1E7\"}.fa-twitch:before{content:\"\\F1E8\"}.fa-yelp:before{content:\"\\F1E9\"}.fa-newspaper-o:before{content:\"\\F1EA\"}.fa-wifi:before{content:\"\\F1EB\"}.fa-calculator:before{content:\"\\F1EC\"}.fa-paypal:before{content:\"\\F1ED\"}.fa-google-wallet:before{content:\"\\F1EE\"}.fa-cc-visa:before{content:\"\\F1F0\"}.fa-cc-mastercard:before{content:\"\\F1F1\"}.fa-cc-discover:before{content:\"\\F1F2\"}.fa-cc-amex:before{content:\"\\F1F3\"}.fa-cc-paypal:before{content:\"\\F1F4\"}.fa-cc-stripe:before{content:\"\\F1F5\"}.fa-bell-slash:before{content:\"\\F1F6\"}.fa-bell-slash-o:before{content:\"\\F1F7\"}.fa-trash:before{content:\"\\F1F8\"}.fa-copyright:before{content:\"\\F1F9\"}.fa-at:before{content:\"\\F1FA\"}.fa-eyedropper:before{content:\"\\F1FB\"}.fa-paint-brush:before{content:\"\\F1FC\"}.fa-birthday-cake:before{content:\"\\F1FD\"}.fa-area-chart:before{content:\"\\F1FE\"}.fa-pie-chart:before{content:\"\\F200\"}.fa-line-chart:before{content:\"\\F201\"}.fa-lastfm:before{content:\"\\F202\"}.fa-lastfm-square:before{content:\"\\F203\"}.fa-toggle-off:before{content:\"\\F204\"}.fa-toggle-on:before{content:\"\\F205\"}.fa-bicycle:before{content:\"\\F206\"}.fa-bus:before{content:\"\\F207\"}.fa-ioxhost:before{content:\"\\F208\"}.fa-angellist:before{content:\"\\F209\"}.fa-cc:before{content:\"\\F20A\"}.fa-ils:before,.fa-shekel:before,.fa-sheqel:before{content:\"\\F20B\"}.fa-meanpath:before{content:\"\\F20C\"}.fa-buysellads:before{content:\"\\F20D\"}.fa-connectdevelop:before{content:\"\\F20E\"}.fa-dashcube:before{content:\"\\F210\"}.fa-forumbee:before{content:\"\\F211\"}.fa-leanpub:before{content:\"\\F212\"}.fa-sellsy:before{content:\"\\F213\"}.fa-shirtsinbulk:before{content:\"\\F214\"}.fa-simplybuilt:before{content:\"\\F215\"}.fa-skyatlas:before{content:\"\\F216\"}.fa-cart-plus:before{content:\"\\F217\"}.fa-cart-arrow-down:before{content:\"\\F218\"}.fa-diamond:before{content:\"\\F219\"}.fa-ship:before{content:\"\\F21A\"}.fa-user-secret:before{content:\"\\F21B\"}.fa-motorcycle:before{content:\"\\F21C\"}.fa-street-view:before{content:\"\\F21D\"}.fa-heartbeat:before{content:\"\\F21E\"}.fa-venus:before{content:\"\\F221\"}.fa-mars:before{content:\"\\F222\"}.fa-mercury:before{content:\"\\F223\"}.fa-intersex:before,.fa-transgender:before{content:\"\\F224\"}.fa-transgender-alt:before{content:\"\\F225\"}.fa-venus-double:before{content:\"\\F226\"}.fa-mars-double:before{content:\"\\F227\"}.fa-venus-mars:before{content:\"\\F228\"}.fa-mars-stroke:before{content:\"\\F229\"}.fa-mars-stroke-v:before{content:\"\\F22A\"}.fa-mars-stroke-h:before{content:\"\\F22B\"}.fa-neuter:before{content:\"\\F22C\"}.fa-genderless:before{content:\"\\F22D\"}.fa-facebook-official:before{content:\"\\F230\"}.fa-pinterest-p:before{content:\"\\F231\"}.fa-whatsapp:before{content:\"\\F232\"}.fa-server:before{content:\"\\F233\"}.fa-user-plus:before{content:\"\\F234\"}.fa-user-times:before{content:\"\\F235\"}.fa-bed:before,.fa-hotel:before{content:\"\\F236\"}.fa-viacoin:before{content:\"\\F237\"}.fa-train:before{content:\"\\F238\"}.fa-subway:before{content:\"\\F239\"}.fa-medium:before{content:\"\\F23A\"}.fa-y-combinator:before,.fa-yc:before{content:\"\\F23B\"}.fa-optin-monster:before{content:\"\\F23C\"}.fa-opencart:before{content:\"\\F23D\"}.fa-expeditedssl:before{content:\"\\F23E\"}.fa-battery-4:before,.fa-battery-full:before,.fa-battery:before{content:\"\\F240\"}.fa-battery-3:before,.fa-battery-three-quarters:before{content:\"\\F241\"}.fa-battery-2:before,.fa-battery-half:before{content:\"\\F242\"}.fa-battery-1:before,.fa-battery-quarter:before{content:\"\\F243\"}.fa-battery-0:before,.fa-battery-empty:before{content:\"\\F244\"}.fa-mouse-pointer:before{content:\"\\F245\"}.fa-i-cursor:before{content:\"\\F246\"}.fa-object-group:before{content:\"\\F247\"}.fa-object-ungroup:before{content:\"\\F248\"}.fa-sticky-note:before{content:\"\\F249\"}.fa-sticky-note-o:before{content:\"\\F24A\"}.fa-cc-jcb:before{content:\"\\F24B\"}.fa-cc-diners-club:before{content:\"\\F24C\"}.fa-clone:before{content:\"\\F24D\"}.fa-balance-scale:before{content:\"\\F24E\"}.fa-hourglass-o:before{content:\"\\F250\"}.fa-hourglass-1:before,.fa-hourglass-start:before{content:\"\\F251\"}.fa-hourglass-2:before,.fa-hourglass-half:before{content:\"\\F252\"}.fa-hourglass-3:before,.fa-hourglass-end:before{content:\"\\F253\"}.fa-hourglass:before{content:\"\\F254\"}.fa-hand-grab-o:before,.fa-hand-rock-o:before{content:\"\\F255\"}.fa-hand-paper-o:before,.fa-hand-stop-o:before{content:\"\\F256\"}.fa-hand-scissors-o:before{content:\"\\F257\"}.fa-hand-lizard-o:before{content:\"\\F258\"}.fa-hand-spock-o:before{content:\"\\F259\"}.fa-hand-pointer-o:before{content:\"\\F25A\"}.fa-hand-peace-o:before{content:\"\\F25B\"}.fa-trademark:before{content:\"\\F25C\"}.fa-registered:before{content:\"\\F25D\"}.fa-creative-commons:before{content:\"\\F25E\"}.fa-gg:before{content:\"\\F260\"}.fa-gg-circle:before{content:\"\\F261\"}.fa-tripadvisor:before{content:\"\\F262\"}.fa-odnoklassniki:before{content:\"\\F263\"}.fa-odnoklassniki-square:before{content:\"\\F264\"}.fa-get-pocket:before{content:\"\\F265\"}.fa-wikipedia-w:before{content:\"\\F266\"}.fa-safari:before{content:\"\\F267\"}.fa-chrome:before{content:\"\\F268\"}.fa-firefox:before{content:\"\\F269\"}.fa-opera:before{content:\"\\F26A\"}.fa-internet-explorer:before{content:\"\\F26B\"}.fa-television:before,.fa-tv:before{content:\"\\F26C\"}.fa-contao:before{content:\"\\F26D\"}.fa-500px:before{content:\"\\F26E\"}.fa-amazon:before{content:\"\\F270\"}.fa-calendar-plus-o:before{content:\"\\F271\"}.fa-calendar-minus-o:before{content:\"\\F272\"}.fa-calendar-times-o:before{content:\"\\F273\"}.fa-calendar-check-o:before{content:\"\\F274\"}.fa-industry:before{content:\"\\F275\"}.fa-map-pin:before{content:\"\\F276\"}.fa-map-signs:before{content:\"\\F277\"}.fa-map-o:before{content:\"\\F278\"}.fa-map:before{content:\"\\F279\"}.fa-commenting:before{content:\"\\F27A\"}.fa-commenting-o:before{content:\"\\F27B\"}.fa-houzz:before{content:\"\\F27C\"}.fa-vimeo:before{content:\"\\F27D\"}.fa-black-tie:before{content:\"\\F27E\"}.fa-fonticons:before{content:\"\\F280\"}.fa-reddit-alien:before{content:\"\\F281\"}.fa-edge:before{content:\"\\F282\"}.fa-credit-card-alt:before{content:\"\\F283\"}.fa-codiepie:before{content:\"\\F284\"}.fa-modx:before{content:\"\\F285\"}.fa-fort-awesome:before{content:\"\\F286\"}.fa-usb:before{content:\"\\F287\"}.fa-product-hunt:before{content:\"\\F288\"}.fa-mixcloud:before{content:\"\\F289\"}.fa-scribd:before{content:\"\\F28A\"}.fa-pause-circle:before{content:\"\\F28B\"}.fa-pause-circle-o:before{content:\"\\F28C\"}.fa-stop-circle:before{content:\"\\F28D\"}.fa-stop-circle-o:before{content:\"\\F28E\"}.fa-shopping-bag:before{content:\"\\F290\"}.fa-shopping-basket:before{content:\"\\F291\"}.fa-hashtag:before{content:\"\\F292\"}.fa-bluetooth:before{content:\"\\F293\"}.fa-bluetooth-b:before{content:\"\\F294\"}.fa-percent:before{content:\"\\F295\"}.fa-gitlab:before{content:\"\\F296\"}.fa-wpbeginner:before{content:\"\\F297\"}.fa-wpforms:before{content:\"\\F298\"}.fa-envira:before{content:\"\\F299\"}.fa-universal-access:before{content:\"\\F29A\"}.fa-wheelchair-alt:before{content:\"\\F29B\"}.fa-question-circle-o:before{content:\"\\F29C\"}.fa-blind:before{content:\"\\F29D\"}.fa-audio-description:before{content:\"\\F29E\"}.fa-volume-control-phone:before{content:\"\\F2A0\"}.fa-braille:before{content:\"\\F2A1\"}.fa-assistive-listening-systems:before{content:\"\\F2A2\"}.fa-american-sign-language-interpreting:before,.fa-asl-interpreting:before{content:\"\\F2A3\"}.fa-deaf:before,.fa-deafness:before,.fa-hard-of-hearing:before{content:\"\\F2A4\"}.fa-glide:before{content:\"\\F2A5\"}.fa-glide-g:before{content:\"\\F2A6\"}.fa-sign-language:before,.fa-signing:before{content:\"\\F2A7\"}.fa-low-vision:before{content:\"\\F2A8\"}.fa-viadeo:before{content:\"\\F2A9\"}.fa-viadeo-square:before{content:\"\\F2AA\"}.fa-snapchat:before{content:\"\\F2AB\"}.fa-snapchat-ghost:before{content:\"\\F2AC\"}.fa-snapchat-square:before{content:\"\\F2AD\"}.fa-pied-piper:before{content:\"\\F2AE\"}.fa-first-order:before{content:\"\\F2B0\"}.fa-yoast:before{content:\"\\F2B1\"}.fa-themeisle:before{content:\"\\F2B2\"}.fa-google-plus-circle:before,.fa-google-plus-official:before{content:\"\\F2B3\"}.fa-fa:before,.fa-font-awesome:before{content:\"\\F2B4\"}.fa-handshake-o:before{content:\"\\F2B5\"}.fa-envelope-open:before{content:\"\\F2B6\"}.fa-envelope-open-o:before{content:\"\\F2B7\"}.fa-linode:before{content:\"\\F2B8\"}.fa-address-book:before{content:\"\\F2B9\"}.fa-address-book-o:before{content:\"\\F2BA\"}.fa-address-card:before,.fa-vcard:before{content:\"\\F2BB\"}.fa-address-card-o:before,.fa-vcard-o:before{content:\"\\F2BC\"}.fa-user-circle:before{content:\"\\F2BD\"}.fa-user-circle-o:before{content:\"\\F2BE\"}.fa-user-o:before{content:\"\\F2C0\"}.fa-id-badge:before{content:\"\\F2C1\"}.fa-drivers-license:before,.fa-id-card:before{content:\"\\F2C2\"}.fa-drivers-license-o:before,.fa-id-card-o:before{content:\"\\F2C3\"}.fa-quora:before{content:\"\\F2C4\"}.fa-free-code-camp:before{content:\"\\F2C5\"}.fa-telegram:before{content:\"\\F2C6\"}.fa-thermometer-4:before,.fa-thermometer-full:before,.fa-thermometer:before{content:\"\\F2C7\"}.fa-thermometer-3:before,.fa-thermometer-three-quarters:before{content:\"\\F2C8\"}.fa-thermometer-2:before,.fa-thermometer-half:before{content:\"\\F2C9\"}.fa-thermometer-1:before,.fa-thermometer-quarter:before{content:\"\\F2CA\"}.fa-thermometer-0:before,.fa-thermometer-empty:before{content:\"\\F2CB\"}.fa-shower:before{content:\"\\F2CC\"}.fa-bath:before,.fa-bathtub:before,.fa-s15:before{content:\"\\F2CD\"}.fa-podcast:before{content:\"\\F2CE\"}.fa-window-maximize:before{content:\"\\F2D0\"}.fa-window-minimize:before{content:\"\\F2D1\"}.fa-window-restore:before{content:\"\\F2D2\"}.fa-times-rectangle:before,.fa-window-close:before{content:\"\\F2D3\"}.fa-times-rectangle-o:before,.fa-window-close-o:before{content:\"\\F2D4\"}.fa-bandcamp:before{content:\"\\F2D5\"}.fa-grav:before{content:\"\\F2D6\"}.fa-etsy:before{content:\"\\F2D7\"}.fa-imdb:before{content:\"\\F2D8\"}.fa-ravelry:before{content:\"\\F2D9\"}.fa-eercast:before{content:\"\\F2DA\"}.fa-microchip:before{content:\"\\F2DB\"}.fa-snowflake-o:before{content:\"\\F2DC\"}.fa-superpowers:before{content:\"\\F2DD\"}.fa-wpexplorer:before{content:\"\\F2DE\"}.fa-meetup:before{content:\"\\F2E0\"}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}.sr-only-focusable:active,.sr-only-focusable:focus{position:static;width:auto;height:auto;margin:0;overflow:visible;clip:auto}", ""]);

// exports


/***/ }),
/* 56 */
/***/ (function(module, exports, __webpack_require__) {

var escape = __webpack_require__(90);
exports = module.exports = __webpack_require__(21)(false);
// imports


// module
exports.push([module.i, "/*!\n * Fancytree \"bootstrap\" skin.\n *\n * DON'T EDIT THE CSS FILE DIRECTLY, since it is automatically generated from\n * the LESS templates.\n */.fancytree-helper-hidden{display:none}.fancytree-helper-indeterminate-cb{color:#777}.fancytree-helper-disabled{color:#333}.fancytree-helper-spin{-webkit-animation:spin 1s infinite linear;animation:spin 1s infinite linear}@-webkit-keyframes spin{0%{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}@keyframes spin{0%{-webkit-transform:rotate(0);transform:rotate(0)}to{-webkit-transform:rotate(359deg);transform:rotate(359deg)}}ul.fancytree-container{font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:14px;white-space:nowrap;padding:3px;margin:0;background-color:#fff;border:1px dotted gray;min-height:0;position:relative}ul.fancytree-container ul>li:before{content:none}ul.fancytree-container li{-moz-background-clip:border;-moz-background-inline-policy:continuous;-moz-background-origin:padding;background-attachment:scroll;background-color:transparent;background-position:0 0;background-repeat:repeat-y;background-image:none;margin:0;list-style:none}img.fancytree-icon,span.fancytree-checkbox,span.fancytree-icon{margin-left:.5em}ul.fancytree-container li.fancytree-lastsib{background-image:none}.ui-fancytree-disabled ul.fancytree-container{opacity:.5;background-color:silver}ul.fancytree-connectors.fancytree-container li{background-image:url(" + escape(__webpack_require__(300)) + ");background-position:0 0}.fancytree-loading span.fancytree-expander,.fancytree-loading span.fancytree-expander:hover,.fancytree-statusnode-loading span.fancytree-icon,.fancytree-statusnode-loading span.fancytree-icon:hover,ul.fancytree-container li.fancytree-lastsib,ul.fancytree-no-connector>li{background-image:none}li.fancytree-animating{position:relative}#fancytree-drop-marker,span.fancytree-checkbox,span.fancytree-drag-helper-img,span.fancytree-empty,span.fancytree-expander,span.fancytree-icon,span.fancytree-vline{width:1em;height:1em;display:inline-block;vertical-align:top;background-repeat:no-repeat;background-position:0 0}span.fancytree-checkbox,span.fancytree-custom-icon,span.fancytree-expander,span.fancytree-icon{margin-top:2px}span.fancytree-custom-icon{width:1em;height:1em;display:inline-block;margin-left:.5em;background-position:0 0}img.fancytree-icon{width:1em;height:1em;margin-top:2px;vertical-align:top;border-style:none}span.fancytree-expander{cursor:pointer}.fancytree-exp-nl span.fancytree-expander,.fancytree-exp-n span.fancytree-expander{background-image:none;cursor:default}.fancytree-connectors .fancytree-exp-nl span.fancytree-expander,.fancytree-connectors .fancytree-exp-n span.fancytree-expander{margin-top:0}.fancytree-fade-expander span.fancytree-expander{transition:opacity 1.5s;opacity:0}.fancytree-fade-expander.fancytree-treefocus span.fancytree-expander,.fancytree-fade-expander .fancytree-treefocus span.fancytree-expander,.fancytree-fade-expander:hover span.fancytree-expander,.fancytree-fade-expander [class*=fancytree-statusnode-] span.fancytree-expander{transition:opacity .6s;opacity:1}.fancytree-unselectable span.fancytree-checkbox{opacity:.4;filter:alpha(opacity=40)}span.fancytree-node{display:inherit;width:100%;margin-top:0;min-height:1em}span.fancytree-title{color:#333;cursor:pointer;display:inline-block;vertical-align:top;min-height:1em;padding:0 3px;margin:0 0 0 .5em;border:1px solid transparent;-webkit-border-radius:3px;-moz-border-radius:3px;-ms-border-radius:3px;-o-border-radius:3px;border-radius:3px}span.fancytree-node.fancytree-error span.fancytree-title{color:#d9534f}span.fancytree-childcounter{color:#fff;background:#337ab7;border:1px solid gray;border-radius:10px;padding:2px;text-align:center}div.fancytree-drag-helper span.fancytree-childcounter,div.fancytree-drag-helper span.fancytree-dnd-modifier{display:inline-block;color:#fff;background:#337ab7;border:1px solid gray;min-width:10px;height:10px;line-height:1;vertical-align:baseline;border-radius:10px;padding:2px;text-align:center;font-size:9px}div.fancytree-drag-helper span.fancytree-childcounter{position:absolute;top:-6px;right:-6px}div.fancytree-drag-helper span.fancytree-dnd-modifier{background:#5cb85c;border:none;font-weight:bolder}#fancytree-drop-marker{width:2em;position:absolute;margin:0}#fancytree-drop-marker.fancytree-drop-after,#fancytree-drop-marker.fancytree-drop-before{width:4em}span.fancytree-drag-source.fancytree-drag-remove{opacity:.15}.fancytree-container.fancytree-rtl .fancytree-exp-nl span.fancytree-expander,.fancytree-container.fancytree-rtl .fancytree-exp-n span.fancytree-expander{background-image:none}ul.fancytree-container.fancytree-rtl ul{padding:0 16px 0 0}ul.fancytree-container.fancytree-rtl.fancytree-connectors li{background-position:right 0;background-image:url(" + escape(__webpack_require__(301)) + ")}ul.fancytree-container.fancytree-rtl.fancytree-no-connector>li,ul.fancytree-container.fancytree-rtl li.fancytree-lastsib{background-image:none}table.fancytree-ext-table{border-collapse:collapse}table.fancytree-ext-table span.fancytree-node{display:inline-block;box-sizing:border-box}table.fancytree-ext-columnview tbody tr td{position:relative;border:1px solid gray;vertical-align:top;overflow:auto}table.fancytree-ext-columnview tbody tr td>ul{padding:0}table.fancytree-ext-columnview tbody tr td>ul li{-moz-background-clip:border;-moz-background-inline-policy:continuous;-moz-background-origin:padding;background-attachment:scroll;background-color:transparent;background-position:0 0;background-repeat:repeat-y;background-image:none;margin:0;list-style:none}table.fancytree-ext-columnview span.fancytree-node{position:relative;display:inline-block}.fancytree-ext-filter-hide span.fancytree-node.fancytree-hide,.fancytree-ext-filter-hide tr.fancytree-hide,.fancytree-ext-fixed-wrapper .fancytree-ext-fixed-hidden{display:none}table.fancytree-ext-columnview span.fancytree-node.fancytree-expanded{background-color:#cbe8f6}table.fancytree-ext-columnview .fancytree-has-children span.fancytree-cv-right{position:absolute;right:3px}.fancytree-ext-filter-dimm span.fancytree-node span.fancytree-title{color:#333;font-weight:lighter}.fancytree-ext-filter-dimm span.fancytree-node.fancytree-submatch span.fancytree-title,.fancytree-ext-filter-dimm tr.fancytree-submatch span.fancytree-title{color:#000;font-weight:400}.fancytree-ext-filter-dimm span.fancytree-node.fancytree-match span.fancytree-title,.fancytree-ext-filter-dimm tr.fancytree-match span.fancytree-title{color:#000;font-weight:700}.fancytree-ext-filter-hide span.fancytree-node.fancytree-submatch span.fancytree-title,.fancytree-ext-filter-hide tr.fancytree-submatch span.fancytree-title{color:#333;font-weight:lighter}.fancytree-ext-filter-hide span.fancytree-node.fancytree-match span.fancytree-title,.fancytree-ext-filter-hide tr.fancytree-match span.fancytree-title{color:#000;font-weight:400}.fancytree-ext-filter-hide-expanders span.fancytree-node.fancytree-match span.fancytree-expander,.fancytree-ext-filter-hide-expanders tr.fancytree-match span.fancytree-expander{visibility:hidden}.fancytree-ext-filter-hide-expanders span.fancytree-node.fancytree-submatch span.fancytree-expander,.fancytree-ext-filter-hide-expanders tr.fancytree-submatch span.fancytree-expander{visibility:visible}.fancytree-ext-childcounter span.fancytree-icon,.fancytree-ext-filter span.fancytree-icon{position:relative}.fancytree-ext-childcounter span.fancytree-childcounter,.fancytree-ext-filter span.fancytree-childcounter{color:#fff;background:#777;border:1px solid gray;position:absolute;top:-6px;right:-6px;min-width:10px;height:10px;line-height:1;vertical-align:baseline;border-radius:10px;padding:2px;text-align:center;font-size:9px}ul.fancytree-ext-wide,ul.fancytree-ext-wide span.fancytree-node>span{position:relative;z-index:2}ul.fancytree-ext-wide,ul.fancytree-ext-wide span.fancytree-node span.fancytree-title{min-width:100%;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}ul.fancytree-ext-wide span.fancytree-node span.fancytree-title{position:absolute;z-index:1;left:0;margin-left:0;margin-right:0}.fancytree-ext-fixed-wrapper div.fancytree-ext-fixed-scroll-border-bottom{border-bottom:3px solid rgba(0,0,0,.75)}.fancytree-ext-fixed-wrapper div.fancytree-ext-fixed-scroll-border-right{border-right:3px solid rgba(0,0,0,.75)}.fancytree-ext-fixed-wrapper div.fancytree-ext-fixed-wrapper-tl{position:absolute;overflow:hidden;z-index:3;top:0;left:0}.fancytree-ext-fixed-wrapper div.fancytree-ext-fixed-wrapper-tr{position:absolute;overflow:hidden;z-index:2;top:0}.fancytree-ext-fixed-wrapper div.fancytree-ext-fixed-wrapper-bl{position:absolute;overflow:hidden;z-index:2;left:0}.fancytree-ext-fixed-wrapper div.fancytree-ext-fixed-wrapper-br{position:absolute;overflow:scroll;z-index:1}ul.fancytree-container ul{padding:0 0 0 1.5em;margin:0}.fancytree-container:focus{outline:0}.fancytree-container .fancytree-active span.fancytree-title input,.fancytree-container.fancytree-colorize-selected .fancytree-selected span.fancytree-title input{color:#000}.fancytree-container span.fancytree-statusnode-error span.fancytree-expander,div.fancytree-drag-helper.fancytree-drop-reject,div.fancytree-drag-helper.fancytree-drop-reject span.fancytree-title{color:#d9534f}span.fancytree-node.fancytree-drag-source{background-color:#5bc0de!important}span.fancytree-node.fancytree-drop-target.fancytree-drop-reject span.fancytree.title{background-color:#d9534f!important}span.fancytree-expander{color:#999}.fancytree-expanded span.fancytree-expander{color:#333}span.fancytree-node span.fancytree-expander:hover{color:#0ff}.fancytree-plain.fancytree-colorize-selected span.fancytree-node.fancytree-selected,.fancytree-plain.fancytree-colorize-selected span.fancytree-node.fancytree-selected span.fancytree-title{background-color:#80c780;border-color:#80c780;color:#fff}.fancytree-plain.fancytree-colorize-selected span.fancytree-node.fancytree-selected:hover span.fancytree-title{background-color:#6ec06e}.fancytree-plain.fancytree-colorize-selected span.fancytree-node.fancytree-active.fancytree-selected span.fancytree-title{color:#80c780}.fancytree-plain.fancytree-colorize-selected.fancytree-treefocus span.fancytree-title:hover{background-color:#f5f5f5}.fancytree-plain.fancytree-colorize-selected.fancytree-treefocus span.fancytree-node.fancytree-selected span.fancytree-title{background-color:#5cb85c}.fancytree-plain.fancytree-colorize-selected.fancytree-treefocus span.fancytree-node.fancytree-selected:hover span.fancytree-title{background-color:#4cae4c}.fancytree-plain.fancytree-colorize-selected.fancytree-treefocus span.fancytree-node.fancytree-active.fancytree-selected span.fancytree-title{color:#5cb85c}.fancytree-plain.fancytree-container.fancytree-ext-wide span.fancytree-node.fancytree-active,table.fancytree-ext-table.fancytree-colorize-selected>tbody>tr.fancytree-selected>td,table.fancytree-ext-table.fancytree-colorize-selected>tbody>tr.fancytree-selected>td span.fancytree-title,table.fancytree-ext-table.fancytree-container>tbody>tr.fancytree-active>td,table.fancytree-ext-table.fancytree-container>tbody>tr.fancytree-active>td span.fancytree-title{color:#fff}.fancytree-plain.fancytree-container span.fancytree-node{margin-top:2px;margin-bottom:2px}.fancytree-plain.fancytree-container span.fancytree-title{border:1px solid transparent;border-radius:3px;outline-radius:3px}.fancytree-plain.fancytree-container span.fancytree-title:hover{background-color:#f5f5f5}.fancytree-plain.fancytree-container span.fancytree-node.fancytree-active span.fancytree-title{background-color:#5094ce;color:#fff}.fancytree-plain.fancytree-container span.fancytree-node.fancytree-active:hover span.fancytree-title{background-color:#3c87c8}.fancytree-plain.fancytree-container.fancytree-treefocus span.fancytree-node.fancytree-focused span.fancytree-title{border-color:#337ab7}.fancytree-plain.fancytree-container.fancytree-treefocus span.fancytree-node.fancytree-active span.fancytree-title{background-color:#337ab7;border-color:#337ab7}.fancytree-plain.fancytree-container.fancytree-treefocus span.fancytree-node.fancytree-active:hover span.fancytree-title{background-color:#2e6da4}table.fancytree-ext-table>tbody>tr>td span.fancytree-title{border:none}table.fancytree-ext-table.fancytree-colorize-selected>tbody>tr.fancytree-selected>td{background-color:#80c780}table.fancytree-ext-table.fancytree-colorize-selected.fancytree-treefocus>tbody>tr.fancytree-selected>td{background-color:#5cb85c}table.fancytree-ext-table.fancytree-colorize-selected.table-hover>tbody>tr.fancytree-selected:hover>td{background-color:#6ec06e}table.fancytree-ext-table.fancytree-colorize-selected.fancytree-treefocus.table-hover>tbody>tr.fancytree-selected:hover>td{background-color:#4cae4c}table.fancytree-ext-table.fancytree-colorize-selected.fancytree-treefocus.table-hover>tbody>tr.fancytree-selected.fancytree-active:hover>td,table.fancytree-ext-table.fancytree-colorize-selected.table-hover>tbody>tr.fancytree-selected.fancytree-active:hover>td{background-color:#2e6da4}table.fancytree-ext-table.fancytree-colorize-selected>tbody>tr.fancytree-active.fancytree-selected{outline-offset:-2px;outline:2px solid #80c780}table.fancytree-ext-table.fancytree-container>tbody>tr.fancytree-active>td{background-color:#5094ce}table.fancytree-ext-table.fancytree-treefocus.fancytree-container>tbody>tr.fancytree-focused span.fancytree-title{outline:1px dotted #000}table.fancytree-ext-table.fancytree-treefocus.fancytree-container>tbody>tr.fancytree-active>td{background-color:#337ab7}table.fancytree-ext-table.fancytree-treefocus.fancytree-container.table-hover>tbody>tr.fancytree-active:hover>td{background-color:#2e6da4}", ""]);

// exports


/***/ }),
/* 57 */
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(21)(false);
// imports


// module
exports.push([module.i, ".select2-container{box-sizing:border-box;display:inline-block;margin:0;position:relative;vertical-align:middle}.select2-container .select2-selection--single{box-sizing:border-box;cursor:pointer;display:block;height:28px;user-select:none;-webkit-user-select:none}.select2-container .select2-selection--single .select2-selection__rendered{display:block;padding-left:8px;padding-right:20px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.select2-container .select2-selection--single .select2-selection__clear{position:relative}.select2-container[dir=rtl] .select2-selection--single .select2-selection__rendered{padding-right:8px;padding-left:20px}.select2-container .select2-selection--multiple{box-sizing:border-box;cursor:pointer;display:block;min-height:32px;user-select:none;-webkit-user-select:none}.select2-container .select2-selection--multiple .select2-selection__rendered{display:inline-block;overflow:hidden;padding-left:8px;text-overflow:ellipsis;white-space:nowrap}.select2-container .select2-search--inline{float:left}.select2-container .select2-search--inline .select2-search__field{box-sizing:border-box;border:none;font-size:100%;margin-top:5px;padding:0}.select2-container .select2-search--inline .select2-search__field::-webkit-search-cancel-button{-webkit-appearance:none}.select2-dropdown{background-color:#fff;border:1px solid #aaa;border-radius:4px;box-sizing:border-box;display:block;position:absolute;left:-100000px;width:100%;z-index:1051}.select2-results{display:block}.select2-results__options{list-style:none;margin:0;padding:0}.select2-results__option{padding:6px;user-select:none;-webkit-user-select:none}.select2-results__option[aria-selected]{cursor:pointer}.select2-container--open .select2-dropdown{left:0}.select2-container--open .select2-dropdown--above{border-bottom:none;border-bottom-left-radius:0;border-bottom-right-radius:0}.select2-container--open .select2-dropdown--below{border-top:none;border-top-left-radius:0;border-top-right-radius:0}.select2-search--dropdown{display:block;padding:4px}.select2-search--dropdown .select2-search__field{padding:4px;width:100%;box-sizing:border-box}.select2-search--dropdown .select2-search__field::-webkit-search-cancel-button{-webkit-appearance:none}.select2-search--dropdown.select2-search--hide{display:none}.select2-close-mask{border:0;margin:0;padding:0;display:block;position:fixed;left:0;top:0;min-height:100%;min-width:100%;height:auto;width:auto;opacity:0;z-index:99;background-color:#fff;filter:alpha(opacity=0)}.select2-hidden-accessible{border:0!important;clip:rect(0 0 0 0)!important;-webkit-clip-path:inset(50%)!important;clip-path:inset(50%)!important;height:1px!important;overflow:hidden!important;padding:0!important;position:absolute!important;width:1px!important;white-space:nowrap!important}.select2-container--default .select2-selection--single{background-color:#fff;border:1px solid #aaa;border-radius:4px}.select2-container--default .select2-selection--single .select2-selection__rendered{color:#444;line-height:28px}.select2-container--default .select2-selection--single .select2-selection__clear{cursor:pointer;float:right;font-weight:700}.select2-container--default .select2-selection--single .select2-selection__placeholder{color:#999}.select2-container--default .select2-selection--single .select2-selection__arrow{height:26px;position:absolute;top:1px;right:1px;width:20px}.select2-container--default .select2-selection--single .select2-selection__arrow b{border-color:#888 transparent transparent;border-style:solid;border-width:5px 4px 0;height:0;left:50%;margin-left:-4px;margin-top:-2px;position:absolute;top:50%;width:0}.select2-container--default[dir=rtl] .select2-selection--single .select2-selection__clear{float:left}.select2-container--default[dir=rtl] .select2-selection--single .select2-selection__arrow{left:1px;right:auto}.select2-container--default.select2-container--disabled .select2-selection--single{background-color:#eee;cursor:default}.select2-container--default.select2-container--disabled .select2-selection--single .select2-selection__clear{display:none}.select2-container--default.select2-container--open .select2-selection--single .select2-selection__arrow b{border-color:transparent transparent #888;border-width:0 4px 5px}.select2-container--default .select2-selection--multiple{background-color:#fff;border:1px solid #aaa;border-radius:4px;cursor:text}.select2-container--default .select2-selection--multiple .select2-selection__rendered{box-sizing:border-box;list-style:none;margin:0;padding:0 5px;width:100%}.select2-container--default .select2-selection--multiple .select2-selection__rendered li{list-style:none}.select2-container--default .select2-selection--multiple .select2-selection__placeholder{color:#999;margin-top:5px;float:left}.select2-container--default .select2-selection--multiple .select2-selection__clear{cursor:pointer;float:right;font-weight:700;margin-top:5px;margin-right:10px}.select2-container--default .select2-selection--multiple .select2-selection__choice{background-color:#e4e4e4;border:1px solid #aaa;border-radius:4px;cursor:default;float:left;margin-right:5px;margin-top:5px;padding:0 5px}.select2-container--default .select2-selection--multiple .select2-selection__choice__remove{color:#999;cursor:pointer;display:inline-block;font-weight:700;margin-right:2px}.select2-container--default .select2-selection--multiple .select2-selection__choice__remove:hover{color:#333}.select2-container--default[dir=rtl] .select2-selection--multiple .select2-search--inline,.select2-container--default[dir=rtl] .select2-selection--multiple .select2-selection__choice,.select2-container--default[dir=rtl] .select2-selection--multiple .select2-selection__placeholder{float:right}.select2-container--default[dir=rtl] .select2-selection--multiple .select2-selection__choice{margin-left:5px;margin-right:auto}.select2-container--default[dir=rtl] .select2-selection--multiple .select2-selection__choice__remove{margin-left:2px;margin-right:auto}.select2-container--default.select2-container--focus .select2-selection--multiple{border:1px solid #000;outline:0}.select2-container--default.select2-container--disabled .select2-selection--multiple{background-color:#eee;cursor:default}.select2-container--default.select2-container--disabled .select2-selection__choice__remove{display:none}.select2-container--default.select2-container--open.select2-container--above .select2-selection--multiple,.select2-container--default.select2-container--open.select2-container--above .select2-selection--single{border-top-left-radius:0;border-top-right-radius:0}.select2-container--default.select2-container--open.select2-container--below .select2-selection--multiple,.select2-container--default.select2-container--open.select2-container--below .select2-selection--single{border-bottom-left-radius:0;border-bottom-right-radius:0}.select2-container--default .select2-search--dropdown .select2-search__field{border:1px solid #aaa}.select2-container--default .select2-search--inline .select2-search__field{background:transparent;border:none;outline:0;box-shadow:none;-webkit-appearance:textfield}.select2-container--default .select2-results>.select2-results__options{max-height:200px;overflow-y:auto}.select2-container--default .select2-results__option[role=group]{padding:0}.select2-container--default .select2-results__option[aria-disabled=true]{color:#999}.select2-container--default .select2-results__option[aria-selected=true]{background-color:#ddd}.select2-container--default .select2-results__option .select2-results__option{padding-left:1em}.select2-container--default .select2-results__option .select2-results__option .select2-results__group{padding-left:0}.select2-container--default .select2-results__option .select2-results__option .select2-results__option{margin-left:-1em;padding-left:2em}.select2-container--default .select2-results__option .select2-results__option .select2-results__option .select2-results__option{margin-left:-2em;padding-left:3em}.select2-container--default .select2-results__option .select2-results__option .select2-results__option .select2-results__option .select2-results__option{margin-left:-3em;padding-left:4em}.select2-container--default .select2-results__option .select2-results__option .select2-results__option .select2-results__option .select2-results__option .select2-results__option{margin-left:-4em;padding-left:5em}.select2-container--default .select2-results__option .select2-results__option .select2-results__option .select2-results__option .select2-results__option .select2-results__option .select2-results__option{margin-left:-5em;padding-left:6em}.select2-container--default .select2-results__option--highlighted[aria-selected]{background-color:#5897fb;color:#fff}.select2-container--default .select2-results__group{cursor:default;display:block;padding:6px}.select2-container--classic .select2-selection--single{background-color:#f7f7f7;border:1px solid #aaa;border-radius:4px;outline:0;background-image:-webkit-linear-gradient(top,#fff 50%,#eee);background-image:-o-linear-gradient(top,#fff 50%,#eee 100%);background-image:linear-gradient(180deg,#fff 50%,#eee);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=\"#FFFFFFFF\",endColorstr=\"#FFEEEEEE\",GradientType=0)}.select2-container--classic .select2-selection--single:focus{border:1px solid #5897fb}.select2-container--classic .select2-selection--single .select2-selection__rendered{color:#444;line-height:28px}.select2-container--classic .select2-selection--single .select2-selection__clear{cursor:pointer;float:right;font-weight:700;margin-right:10px}.select2-container--classic .select2-selection--single .select2-selection__placeholder{color:#999}.select2-container--classic .select2-selection--single .select2-selection__arrow{background-color:#ddd;border:none;border-left:1px solid #aaa;border-top-right-radius:4px;border-bottom-right-radius:4px;height:26px;position:absolute;top:1px;right:1px;width:20px;background-image:-webkit-linear-gradient(top,#eee 50%,#ccc);background-image:-o-linear-gradient(top,#eee 50%,#ccc 100%);background-image:linear-gradient(180deg,#eee 50%,#ccc);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=\"#FFEEEEEE\",endColorstr=\"#FFCCCCCC\",GradientType=0)}.select2-container--classic .select2-selection--single .select2-selection__arrow b{border-color:#888 transparent transparent;border-style:solid;border-width:5px 4px 0;height:0;left:50%;margin-left:-4px;margin-top:-2px;position:absolute;top:50%;width:0}.select2-container--classic[dir=rtl] .select2-selection--single .select2-selection__clear{float:left}.select2-container--classic[dir=rtl] .select2-selection--single .select2-selection__arrow{border:none;border-right:1px solid #aaa;border-radius:0;border-top-left-radius:4px;border-bottom-left-radius:4px;left:1px;right:auto}.select2-container--classic.select2-container--open .select2-selection--single{border:1px solid #5897fb}.select2-container--classic.select2-container--open .select2-selection--single .select2-selection__arrow{background:transparent;border:none}.select2-container--classic.select2-container--open .select2-selection--single .select2-selection__arrow b{border-color:transparent transparent #888;border-width:0 4px 5px}.select2-container--classic.select2-container--open.select2-container--above .select2-selection--single{border-top:none;border-top-left-radius:0;border-top-right-radius:0;background-image:-webkit-linear-gradient(top,#fff,#eee 50%);background-image:-o-linear-gradient(top,#fff 0,#eee 50%);background-image:linear-gradient(180deg,#fff 0,#eee 50%);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=\"#FFFFFFFF\",endColorstr=\"#FFEEEEEE\",GradientType=0)}.select2-container--classic.select2-container--open.select2-container--below .select2-selection--single{border-bottom:none;border-bottom-left-radius:0;border-bottom-right-radius:0;background-image:-webkit-linear-gradient(top,#eee 50%,#fff);background-image:-o-linear-gradient(top,#eee 50%,#fff 100%);background-image:linear-gradient(180deg,#eee 50%,#fff);background-repeat:repeat-x;filter:progid:DXImageTransform.Microsoft.gradient(startColorstr=\"#FFEEEEEE\",endColorstr=\"#FFFFFFFF\",GradientType=0)}.select2-container--classic .select2-selection--multiple{background-color:#fff;border:1px solid #aaa;border-radius:4px;cursor:text;outline:0}.select2-container--classic .select2-selection--multiple:focus{border:1px solid #5897fb}.select2-container--classic .select2-selection--multiple .select2-selection__rendered{list-style:none;margin:0;padding:0 5px}.select2-container--classic .select2-selection--multiple .select2-selection__clear{display:none}.select2-container--classic .select2-selection--multiple .select2-selection__choice{background-color:#e4e4e4;border:1px solid #aaa;border-radius:4px;cursor:default;float:left;margin-right:5px;margin-top:5px;padding:0 5px}.select2-container--classic .select2-selection--multiple .select2-selection__choice__remove{color:#888;cursor:pointer;display:inline-block;font-weight:700;margin-right:2px}.select2-container--classic .select2-selection--multiple .select2-selection__choice__remove:hover{color:#555}.select2-container--classic[dir=rtl] .select2-selection--multiple .select2-selection__choice{float:right;margin-left:5px;margin-right:auto}.select2-container--classic[dir=rtl] .select2-selection--multiple .select2-selection__choice__remove{margin-left:2px;margin-right:auto}.select2-container--classic.select2-container--open .select2-selection--multiple{border:1px solid #5897fb}.select2-container--classic.select2-container--open.select2-container--above .select2-selection--multiple{border-top:none;border-top-left-radius:0;border-top-right-radius:0}.select2-container--classic.select2-container--open.select2-container--below .select2-selection--multiple{border-bottom:none;border-bottom-left-radius:0;border-bottom-right-radius:0}.select2-container--classic .select2-search--dropdown .select2-search__field{border:1px solid #aaa;outline:0}.select2-container--classic .select2-search--inline .select2-search__field{outline:0;box-shadow:none}.select2-container--classic .select2-dropdown{background-color:#fff;border:1px solid transparent}.select2-container--classic .select2-dropdown--above{border-bottom:none}.select2-container--classic .select2-dropdown--below{border-top:none}.select2-container--classic .select2-results>.select2-results__options{max-height:200px;overflow-y:auto}.select2-container--classic .select2-results__option[role=group]{padding:0}.select2-container--classic .select2-results__option[aria-disabled=true]{color:grey}.select2-container--classic .select2-results__option--highlighted[aria-selected]{background-color:#3875d7;color:#fff}.select2-container--classic .select2-results__group{cursor:default;display:block;padding:6px}.select2-container--classic.select2-container--open .select2-dropdown{border-color:#5897fb}", ""]);

// exports


/***/ }),
/* 58 */
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(21)(false);
// imports


// module
exports.push([module.i, "/*!\n * Datetimepicker for Bootstrap 3\n * version : 4.17.47\n * https://github.com/Eonasdan/bootstrap-datetimepicker/\n */.bootstrap-datetimepicker-widget{list-style:none}.bootstrap-datetimepicker-widget.dropdown-menu{display:block;margin:2px 0;padding:4px;width:19em}@media (min-width:768px){.bootstrap-datetimepicker-widget.dropdown-menu.timepicker-sbs{width:38em}}@media (min-width:992px){.bootstrap-datetimepicker-widget.dropdown-menu.timepicker-sbs{width:38em}}@media (min-width:1200px){.bootstrap-datetimepicker-widget.dropdown-menu.timepicker-sbs{width:38em}}.bootstrap-datetimepicker-widget.dropdown-menu:after,.bootstrap-datetimepicker-widget.dropdown-menu:before{content:\"\";display:inline-block;position:absolute}.bootstrap-datetimepicker-widget.dropdown-menu.bottom:before{border-left:7px solid transparent;border-right:7px solid transparent;border-bottom:7px solid #ccc;border-bottom-color:rgba(0,0,0,.2);top:-7px;left:7px}.bootstrap-datetimepicker-widget.dropdown-menu.bottom:after{border-left:6px solid transparent;border-right:6px solid transparent;border-bottom:6px solid #fff;top:-6px;left:8px}.bootstrap-datetimepicker-widget.dropdown-menu.top:before{border-left:7px solid transparent;border-right:7px solid transparent;border-top:7px solid #ccc;border-top-color:rgba(0,0,0,.2);bottom:-7px;left:6px}.bootstrap-datetimepicker-widget.dropdown-menu.top:after{border-left:6px solid transparent;border-right:6px solid transparent;border-top:6px solid #fff;bottom:-6px;left:7px}.bootstrap-datetimepicker-widget.dropdown-menu.pull-right:before{left:auto;right:6px}.bootstrap-datetimepicker-widget.dropdown-menu.pull-right:after{left:auto;right:7px}.bootstrap-datetimepicker-widget .list-unstyled{margin:0}.bootstrap-datetimepicker-widget a[data-action]{padding:6px 0}.bootstrap-datetimepicker-widget a[data-action]:active{box-shadow:none}.bootstrap-datetimepicker-widget .timepicker-hour,.bootstrap-datetimepicker-widget .timepicker-minute,.bootstrap-datetimepicker-widget .timepicker-second{width:54px;font-weight:700;font-size:1.2em;margin:0}.bootstrap-datetimepicker-widget button[data-action]{padding:6px}.bootstrap-datetimepicker-widget .btn[data-action=incrementHours]:after{position:absolute;width:1px;height:1px;margin:-1px;padding:0;overflow:hidden;clip:rect(0,0,0,0);border:0;content:\"Increment Hours\"}.bootstrap-datetimepicker-widget .btn[data-action=incrementMinutes]:after{position:absolute;width:1px;height:1px;margin:-1px;padding:0;overflow:hidden;clip:rect(0,0,0,0);border:0;content:\"Increment Minutes\"}.bootstrap-datetimepicker-widget .btn[data-action=decrementHours]:after{position:absolute;width:1px;height:1px;margin:-1px;padding:0;overflow:hidden;clip:rect(0,0,0,0);border:0;content:\"Decrement Hours\"}.bootstrap-datetimepicker-widget .btn[data-action=decrementMinutes]:after{position:absolute;width:1px;height:1px;margin:-1px;padding:0;overflow:hidden;clip:rect(0,0,0,0);border:0;content:\"Decrement Minutes\"}.bootstrap-datetimepicker-widget .btn[data-action=showHours]:after{position:absolute;width:1px;height:1px;margin:-1px;padding:0;overflow:hidden;clip:rect(0,0,0,0);border:0;content:\"Show Hours\"}.bootstrap-datetimepicker-widget .btn[data-action=showMinutes]:after{position:absolute;width:1px;height:1px;margin:-1px;padding:0;overflow:hidden;clip:rect(0,0,0,0);border:0;content:\"Show Minutes\"}.bootstrap-datetimepicker-widget .btn[data-action=togglePeriod]:after{position:absolute;width:1px;height:1px;margin:-1px;padding:0;overflow:hidden;clip:rect(0,0,0,0);border:0;content:\"Toggle AM/PM\"}.bootstrap-datetimepicker-widget .btn[data-action=clear]:after{position:absolute;width:1px;height:1px;margin:-1px;padding:0;overflow:hidden;clip:rect(0,0,0,0);border:0;content:\"Clear the picker\"}.bootstrap-datetimepicker-widget .btn[data-action=today]:after{position:absolute;width:1px;height:1px;margin:-1px;padding:0;overflow:hidden;clip:rect(0,0,0,0);border:0;content:\"Set the date to today\"}.bootstrap-datetimepicker-widget .picker-switch{text-align:center}.bootstrap-datetimepicker-widget .picker-switch:after{position:absolute;width:1px;height:1px;margin:-1px;padding:0;overflow:hidden;clip:rect(0,0,0,0);border:0;content:\"Toggle Date and Time Screens\"}.bootstrap-datetimepicker-widget .picker-switch td{padding:0;margin:0;height:auto;width:auto;line-height:inherit}.bootstrap-datetimepicker-widget .picker-switch td span{line-height:2.5;height:2.5em;width:100%}.bootstrap-datetimepicker-widget table{width:100%;margin:0}.bootstrap-datetimepicker-widget table td,.bootstrap-datetimepicker-widget table th{text-align:center;border-radius:4px}.bootstrap-datetimepicker-widget table th{height:20px;line-height:20px;width:20px}.bootstrap-datetimepicker-widget table th.picker-switch{width:145px}.bootstrap-datetimepicker-widget table th.disabled,.bootstrap-datetimepicker-widget table th.disabled:hover{background:none;color:#777;cursor:not-allowed}.bootstrap-datetimepicker-widget table th.prev:after{position:absolute;width:1px;height:1px;margin:-1px;padding:0;overflow:hidden;clip:rect(0,0,0,0);border:0;content:\"Previous Month\"}.bootstrap-datetimepicker-widget table th.next:after{position:absolute;width:1px;height:1px;margin:-1px;padding:0;overflow:hidden;clip:rect(0,0,0,0);border:0;content:\"Next Month\"}.bootstrap-datetimepicker-widget table thead tr:first-child th{cursor:pointer}.bootstrap-datetimepicker-widget table thead tr:first-child th:hover{background:#eee}.bootstrap-datetimepicker-widget table td{height:54px;line-height:54px;width:54px}.bootstrap-datetimepicker-widget table td.cw{font-size:.8em;height:20px;line-height:20px;color:#777}.bootstrap-datetimepicker-widget table td.day{height:20px;line-height:20px;width:20px}.bootstrap-datetimepicker-widget table td.day:hover,.bootstrap-datetimepicker-widget table td.hour:hover,.bootstrap-datetimepicker-widget table td.minute:hover,.bootstrap-datetimepicker-widget table td.second:hover{background:#eee;cursor:pointer}.bootstrap-datetimepicker-widget table td.new,.bootstrap-datetimepicker-widget table td.old{color:#777}.bootstrap-datetimepicker-widget table td.today{position:relative}.bootstrap-datetimepicker-widget table td.today:before{content:\"\";display:inline-block;border:solid transparent;border-width:0 0 7px 7px;border-bottom-color:#337ab7;border-top-color:rgba(0,0,0,.2);position:absolute;bottom:4px;right:4px}.bootstrap-datetimepicker-widget table td.active,.bootstrap-datetimepicker-widget table td.active:hover{background-color:#337ab7;color:#fff;text-shadow:0 -1px 0 rgba(0,0,0,.25)}.bootstrap-datetimepicker-widget table td.active.today:before{border-bottom-color:#fff}.bootstrap-datetimepicker-widget table td.disabled,.bootstrap-datetimepicker-widget table td.disabled:hover{background:none;color:#777;cursor:not-allowed}.bootstrap-datetimepicker-widget table td span{display:inline-block;width:54px;height:54px;line-height:54px;margin:2px 1.5px;cursor:pointer;border-radius:4px}.bootstrap-datetimepicker-widget table td span:hover{background:#eee}.bootstrap-datetimepicker-widget table td span.active{background-color:#337ab7;color:#fff;text-shadow:0 -1px 0 rgba(0,0,0,.25)}.bootstrap-datetimepicker-widget table td span.old{color:#777}.bootstrap-datetimepicker-widget table td span.disabled,.bootstrap-datetimepicker-widget table td span.disabled:hover{background:none;color:#777;cursor:not-allowed}.bootstrap-datetimepicker-widget.usetwentyfour td.hour{height:27px;line-height:27px}.bootstrap-datetimepicker-widget.wider{width:21em}.bootstrap-datetimepicker-widget .datepicker-decades .decade{line-height:1.8em!important}.input-group.date .input-group-addon{cursor:pointer}.sr-only{position:absolute;width:1px;height:1px;margin:-1px;padding:0;overflow:hidden;clip:rect(0,0,0,0);border:0}", ""]);

// exports


/***/ }),
/* 59 */
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(21)(false);
// imports


// module
exports.push([module.i, "div.action-format-type{margin:15px}div.panel-heading.current{background:repeating-linear-gradient(45deg,#ddd,#ddd 10px,#f5f5f5 0,#f5f5f5 25px);font-weight:700}div.panel-heading.action-current>a:before{font-family:FontAwesome;content:\"\\F192\";padding-left:5px;padding-right:5px;font-size:1.1em;color:inherit}div.panel-heading.action-current>a,div.panel-heading.action-done>a,div.panel-heading.action-next>a{color:inherit}div.panel-heading.action-done>a:before{font-family:FontAwesome;content:\"\\F058\";padding-left:5px;padding-right:5px;color:inherit}div.panel-heading.action-next>a:before{font-family:FontAwesome;content:\"\\F10C\";padding-left:5px;padding-right:5px;color:inherit}", ""]);

// exports


/***/ }),
/* 60 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file layouttype.js
 * @brief Base class for any descriptor layout type widgets.
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-09-13
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);

let LayoutType = Marionette.View.extend({
    className: 'layout-type-details-data',
    template: "<div></div>",

    initialize: function() {
        this.listenTo(this.model, 'change', this.render, this);
    },

    onRender: function() {
    },

    getData: function() {
        return {}
    }
});

LayoutType.layoutTarget = null;

module.exports = LayoutType;


/***/ }),
/* 61 */
/***/ (function(module, exports) {

/**
 * @file actionstepformatmanager.js
 * @brief Manager for action step format.
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-12-14
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let ActionStepFormatManager = function() {
    this.actionStepFormat = {};
};

ActionStepFormatManager.prototype = {
    registerElement: function (stepFormatName, actionStepFormat) {
        this.actionStepFormat[stepFormatName] = actionStepFormat;
    },

    getElement: function(formatType) {
        return this.actionStepFormat[formatType];
    },

    newElement: function(formatType) {
        let Element = this.actionStepFormat[formatType];
        if (Element) {
            return new Element();
        }
        return null;
    }
};

module.exports = ActionStepFormatManager;


/***/ }),
/* 62 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file accessionaction.js
 * @brief Accession element view from action progression
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2018-05-03
 * @copyright Copyright (c) 2018 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);

let View = Marionette.View.extend({
    tagName: 'tr',
    className: 'object accession element',
    attributes: function () {
        return {
            'scope': 'row',
            'element-id': this.model.get('id')
        }
    },
    template: __webpack_require__(12),

    templateContext: function () {
        return {
            columnsList: this.getOption('columnsList'),
            columnsOptions: this.getOption('columnsOptions')
        }
    },

    ui: {
        details: 'td.view-accession-details',
        primary_classification_entry: 'td.view-primary-classification-entry-details'
    },

    events: {
        'click @ui.details': 'viewDetails',
        'click @ui.primary_classification_entry': 'viewPrimaryClassificationEntry'
    },

    behaviors: {
        ActionBtnEvents: {
            behaviorClass: __webpack_require__(8),
            actions: {
                edit: {display: false},
                manage: {display: true, event: 'viewDetails'}
            }
        }
    },

    initialize: function () {
        this.listenTo(this.model, 'change', this.render, this);
    },

    actionsProperties: function () {
        let properties = {
            manage: {disabled: false},
            remove: {disabled: false}
        };

        // @todo manage permissions

        if (/*!this.model.get('can_delete') ||*/0) {
            properties.remove.disabled = true;
        }

        return properties;
    },

    onRender: function () {
    },

    viewDetails: function () {
        Backbone.history.navigate('app/accession/accession/' + this.model.get('id') + '/', {trigger: true});
    },

    viewPrimaryClassificationEntry: function () {
        Backbone.history.navigate('app/classification/classificationentry/' + this.model.get('primary_classification_entry') + '/', {trigger: true});
    },

    synonymCell: function (td) {
        let synonyms = this.model.get('synonyms');

        // @todo which one ?
        if (synonyms.length > 2) {
            let text = this.model.get('synonyms')[2].name;

            td.html(text);
        }
    },

    primaryClassificationEntryCell: function (td, value) {
        if (value && value.rank) {
            td.popupcell('init', {
                label: value.name,
                className: 'classification-rank',
                type: 'entity',
                format: {
                    model: 'classification.classificationrank',
                    details: true
                },
                value: value.rank
            });
        }
    },

    removeAccessionFromStep: function(action) {

    }
});

module.exports = View;


/***/ }),
/* 63 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {/**
 * @file accessionconsumerbatchproducer.js
 * @brief Accession consumer - Batch producer step
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2018-02-06
 * @copyright Copyright (c) 2018 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let ActionStepFormat = __webpack_require__(23);

let Format = function() {
    ActionStepFormat.call(this);

    this.name = "accessionconsumer_batchproducer";
    this.group = "standard";
    this.description = _t("Take a list of accession in input and generate one or many batch in output.");

    this.acceptFormat = ['accession_id'];
    this.dataFormat = ['batch_id'];
};

_.extend(Format.prototype, ActionStepFormat.prototype, {
    defaultFormat: function() {
       return {
            'options': {},
            'producers': []
        };
    }
});

Format.ActionStepProcessView = ActionStepFormat.ActionStepProcessView.extend({
    className: 'action-step-process',
    template: __webpack_require__(327),

    ui: {
        accession_list: 'select[name=get-accession-list]',
        batch_group: 'div[name=batch-details]'
    },

    events: {
        'change @ui.accession_list': 'onGetAccessionList'
    },

    initialize: function(options) {
        options || (options = {readonly: true});

        this.listenTo(this.model, 'change', this.render, this);
    },

    onRender: function() {
        this.ui.batch_group.css('display', 'none');
        this.ui.accession_list.selectpicker({});

        // get accession list from the previous step
        if (this.getOption("stepIndex") < 1) {
            this.ui.accession_list.prop('disabled', true);
        }
    },

    onBeforeDestroy: function() {
        this.ui.accession_list.selectpicker('destroy');
    },

    inputsType: function() {
        return 'none';
    },

    inputsData: function() {
        return null;
    },

    onGetAccessionList: function () {
        let type = this.ui.accession_list.val();

        if (this.getOption("stepIndex") < 1) {
            return;
        }

        if (type === 'original-csv') {
            this.downloadData('csv', this.getOption("stepIndex")-1);
        } else if (type === 'original-xlsx') {
            this.downloadData('xlsx', this.getOption("stepIndex")-1);
        } else if (type === 'original-panel') {
            // @todo a dialog to name the panel
            alert("todo");
        }

        this.ui.accession_list.val("").selectpicker('refresh');
    }
});

Format.ActionStepReadView = ActionStepFormat.ActionStepReadView.extend({
});

Format.ActionStepFormatDetailsView = ActionStepFormat.ActionStepFormatDetailsView.extend({
    className: 'action-step-format-details',
    template: __webpack_require__(328),

    regions: {
        'options': 'div[name=options]',
        'producer': 'div[name=producer]',
    },

    ui: {
        producerIndex: 'select[name=producer_index]',
        options: 'div[name=options]',
        producer: 'div[name=producer]',
        add_producer: 'button[name=add-producer]',
        delete_producer: 'button[name=delete-producer]'
    },

    events: {
        'click @ui.add_producer': 'onAddProducer',
        'click @ui.delete_producer': 'onDeleteCurrentProducer'
    },

    initialize: function(options) {
        Format.ActionStepFormatDetailsView.__super__.initialize.apply(this, arguments);
        this.listenTo(this.model, 'change', this.render, this);

        this.namingOptions = options.namingOptions || [];
        this.namingFormat = options.namingFormat || "";

        this.stepIndex = options.stepIndex || 0;
        this.currentProducerIndex= -1;
    },

    onRender: function() {
        let format = this.model.get('format')['steps'][this.stepIndex];

        for (let i = 0; i < format.producers.length; ++i) {
            this.ui.producerIndex.append('<option value="' + i + '">' + _t("Producer") + " " + i + '</option>');
        }

        this.ui.producerIndex.selectpicker({}).on('change', $.proxy(this.onChangeProducer, this));

        if (format.producers.length) {
            this.currentProducerIndex = 0;
            this.ui.producerIndex.val(0).selectpicker('refresh');
            this.loadCurrentProducer();
        }
    },

    onBeforeDetach: function () {
        this.ui.producerIndex.selectpicker('destroy');
    },

    defaultProducer: function() {
        return {
            'index': -1,
            'naming_options': {},
            'options': {}
        };
    },

    storeData: function() {
        this.storeCurrentProducer();
    },

    numProducers: function() {
        let format = this.model.get('format')['steps'][this.stepIndex];
        return format['producers'].length;
    },

    loadCurrentProducer: function() {
        if (this.currentProducerIndex >= 0) {
            let producer = this.model.get('format')['steps'][this.stepIndex]['producers'][this.currentProducerIndex];

            // naming option
            let NamingOptionsView = __webpack_require__(36);
            let namingOptionsView = new NamingOptionsView({
                namingFormat: this.namingFormat,
                namingOptions: this.namingOptions
            });

            this.showChildView('producer', namingOptionsView);
            namingOptionsView.setNamingOptions(producer.naming_options);
        }
    },

    storeCurrentProducer: function() {
        if (this.currentProducerIndex >= 0) {
            let producer = this.model.get('format')['steps'][this.stepIndex]['producers'][this.currentProducerIndex];
            producer.naming_options = this.getChildView('producer').getNamingOptions();
        }
    },

    onAddProducer: function() {
        let format = this.model.get('format')['steps'][this.stepIndex];
        let idx = parseInt(this.ui.producerIndex.val());
        let producers =  format.producers;
        let producer = undefined;

        if (producers.length >= 5) {
            $.alert.warning(_t("Cannot create more than 5 producers"));
        } else {
            let nextIdx = producers.length;

            producer = this.defaultProducer();
            producer.index = nextIdx;

            // initial producer data
            producers.push(producer);

            this.ui.producerIndex
                .append('<option value="' + nextIdx + '">' + _t("Producer") + " " + nextIdx + '</option>')
                .val(nextIdx)
                .selectpicker('refresh');

            idx = nextIdx;
        }

        this.storeCurrentProducer();
        this.currentProducerIndex = idx;
        this.loadCurrentProducer();
    },

    onChangeProducer: function() {
        let idx = parseInt(this.ui.producerIndex.val());

        this.storeCurrentProducer();
        this.currentProducerIndex = idx;
        this.loadCurrentProducer();
    },

    onRemoveProducer: function(idx) {
        let count = this.numProducers();

        if (idx >= 0 && idx < count) {
            // @todo
        }
    },

    onDeleteCurrentProducer: function () {
        if (this.currentProducerIndex >= 0) {
            let stepData = this.model.get('format').steps[this.stepIndex];
            stepData.producers.splice(this.currentProducerIndex, 1);

            this.getRegion('producer').empty();

            this.ui.producerIndex.find('option:not([value=-1])').remove();

            for (let i = 0; i < stepData.producers.length; ++i) {
               this.ui.producerIndex.append('<option value="' + i + '">' + _t("Producer") + " " + i + '</option>');
            }

            if (this.currentProducerIndex > 1) {
                --this.currentProducerIndex;
                this.loadCurrentProducer();
                this.ui.producerIndex.val(this.currentProducerIndex).selectpicker('refresh');
            } else if (this.currentProducerIndex === 0 && stepData.producers.length > 0) {
                this.loadCurrentProducer();
                this.ui.producerIndex.val(this.currentProducerIndex).selectpicker('refresh');
            } else {
                this.currentProducerIndex = -1;
            }

            this.ui.producerIndex.val(this.currentProducerIndex).selectpicker('refresh');
        }
    }
});

module.exports = Format;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 64 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {/**
 * @file accessionrefinementlist.js
 * @brief Accession list view for refinement selection during refinement step
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2018-04-28
 * @copyright Copyright (c) 2018 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let AccessionView = __webpack_require__(62);
let AdvancedTable = __webpack_require__(6);
let DescriptorsColumnsView = __webpack_require__(11);

let View = AdvancedTable.extend({
    className: 'accession-refinement-list advanced-table-container',
    childView: AccessionView,
    userSettingName: 'accessions_refinement_list_columns',
    userSettingVersion: '0.2',

    defaultColumns: [
        {name: 'select', width: 'auto', sort_by: null},
        {name: 'code', width: 'auto', sort_by: null},
        {name: 'name', width: 'auto', sort_by: '+0'},
        {name: 'remove', width: 'auto', sort_by: null},
        {name: 'primary_classification_entry', width: 'auto', sort_by: null},
        {name: 'layout', width: 'auto', sort_by: null}
    ],

    columnsOptions: {
        'select': {
            label: '',
            width: 'auto',
            type: 'checkbox',
            glyphicon: ['fa-square-o', 'fa-square-o'],
            event: 'accession-select',
            fixed: true
        },
        'code': {label: _t('Code'), width: 'auto', minWidth: true, event: 'view-accession-details'},
        'name': {label: _t('Name'), width: 'auto', minWidth: true, event: 'view-accession-details'},
        'primary_classification_entry': {
            label: _t('Classification'),
            width: 'auto',
            minWidth: true,
            event: 'view-primary-classification-entry-details',
            custom: 'primaryClassificationEntryCell',
            field: 'name'
        },
        'layout': {label: _t('Layout'), width: 'auto', minWidth: true},
        'remove': {
            label: 'Remove',
            width: 'auto',
            minWidth: true,
            custom: 'removeAccessionFromStep',
        }
    },

    initialize: function (options) {
        View.__super__.initialize.apply(this, arguments);

        this.relatedEntity = this.getOption('relatedEntity');
        this.filters = this.getOption('filters');
        this.processingMode = 'auto';
    },

    onShowTab: function () {
        let view = this;

        let contextLayout = window.application.getView().getChildView('right');
        if (!contextLayout) {
            let DefaultLayout = __webpack_require__(3);
            contextLayout = new DefaultLayout();
            window.application.getView().showChildView('right', contextLayout);
        }

        let TitleView = __webpack_require__(4);
        contextLayout.showChildView('title', new TitleView({title: _t("Accession actions"), glyphicon: 'fa-wrench'}));

        let actions = [
            'create-panel',
            'action-toggle-mode',
            'export-list',
            'import-list'
        ];

        let AccessionListContextView = __webpack_require__(46);
        let contextView = new AccessionListContextView({actions: actions});
        contextLayout.showChildView('content', contextView);

        contextView.on("panel:create", function () {
            view.onCreatePanel();
        });

        contextView.on("action:toggle-mode", function () {
            view.onActionToggleMode();
        });

        View.__super__.onShowTab.apply(this, arguments);
    },

    onBeforeDetach: function () {
        window.application.main.defaultRightView();
    },

    onCreatePanel: function () {
        if (!this.getSelection('select')) {
            $.alert.warning(_t("No accession selected"));
        } else {
            window.application.accession.controllers.accessionpanel.create(
                this.getSelection('select'), this.relatedEntity, this.collection.filters, this.collection.search);
        }
    },

    onLinkToPanel: function () {
        window.application.accession.controllers.accessionpanel.linkAccessions(
            this.getSelection('select'), this.relatedEntity, this.collection.filters, this.collection.search);
    },

    onActionToggleMode: function() {
        this.processingMode = 'auto';

        if (this.processingMode === 'auto') {
            this.processingMode = 'manual';
//            this.ui.
        } else {
            this.processingMode = 'auto';
        }
    }
});

// support of descriptors columns extension
_.extend(View.prototype, DescriptorsColumnsView);

module.exports = View;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 65 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file actiontype.js
 * @brief Action type collection
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-02-23
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let BatchActionTypeModel = __webpack_require__(38);
let CountableCollection = __webpack_require__(9);

let Collection = CountableCollection.extend({
    url: window.application.url(['accession', 'actiontype']),
    model: BatchActionTypeModel,

    cache: function() {
        return {
            category: 'accession',
            key: 'action_types:*'
        }
    },

    initialize: function (models, options) {
        options || (options = {});

        Collection.__super__.initialize.apply(this, arguments);
    },

    findValue: function(id) {
        for (let r in this.models) {
            let m = this.models[r];
            if (m.get('id') === id)
                return m.get('value');
        }
    },

    findLabel: function(value) {
        for (let r in this.models) {
            let m = this.models[r];
            if (m.get('value') === value)
                return m.get('label');
        }
    }
});

module.exports = Collection;


/***/ }),
/* 66 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file contentbottomlayout.js
 * @brief Two rows content+bottom layout
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-02-01
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Marionette = __webpack_require__(1);

let View = Marionette.View.extend({
    template: __webpack_require__(346),

    attributes: {
        style: "height: 100%; display: flex; flex-direction: column;"
    },

    regions: {
        'content': "div.content",
        'bottom': "div.layout-bottom"
    },

    childViewEvents: {
        'select:tab': function (region, child) {
            this.triggerMethod('select:tab', region, child);
        },
        'dom:refresh': function(child) {
            // call onShowTab when the view is inserted and directly visible
            if (child && child.onShowTab && this.$el.isInViewport() && child.$el.isInViewport()) {
                if (this._lastRegion && this._lastRegion.currentView === this) {
                    child.onShowTab(this._lastRegion);
                }
            }
        }
    },

    onShowTab: function(tabView) {
        this._lastRegion = tabView;

        let view = this.getChildView('content');
        if (view && view.onShowTab) {
            view.onShowTab(tabView);
        }

        view = this.getChildView('bottom');
        if (view && view.onShowTab) {
            view.onShowTab(tabView);
        }
    },

    onHideTab: function(tabView) {
        this._lastRegion = null;

        let view = this.getChildView('content');
        if (view && view.onHideTab) {
            view.onHideTab(tabView);
        }

        view = this.getChildView('bottom');
        if (view && view.onHideTab) {
            view.onHideTab(tabView);
        }
    },

    onResize: function() {
        let view = this.getChildView('content');
        if (view && view.onResize) {
    //        view.onResize();
        }

        view = this.getChildView('bottom');
        if (view && view.onResize) {
      //      view.onResize();
        }
    }
});

module.exports = View;


/***/ }),
/* 67 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file accessiondescriptor.js
 * @brief Accession descriptor item view
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-12-19
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let DescribableDetails = __webpack_require__(34);
let AccessionDescriptorEditView = __webpack_require__(221);

let View = DescribableDetails.extend({
    onShowTab: function () {
        let view = this;

        let contextLayout = application.getView().getChildView('right');
        if (!contextLayout) {
            let DefaultLayout = __webpack_require__(3);
            contextLayout = new DefaultLayout();
            application.getView().showChildView('right', contextLayout);
        }

        let TitleView = __webpack_require__(4);
        contextLayout.showChildView('title', new TitleView({title: _t("Descriptors"), glyphicon: 'fa-wrench'}));

        let actions = ['modify'];

        let AccessionDescriptorContextView = __webpack_require__(68);
        let contextView = new AccessionDescriptorContextView({actions: actions});
        contextLayout.showChildView('content', contextView);

        contextView.on("describable:modify", function () {
            view.onModify();
        });
    },

    onHideTab: function () {
        application.main.defaultRightView();
    },

    onModify: function () {
        // does not reload models, just redo the views

        // update the layout content
        let accessionLayout = application.main.viewContent().getChildView('content');
        let view = this;

        let accessionDescriptorEditView = new AccessionDescriptorEditView({
            model: view.model,
            layoutData: view.layoutData,
            descriptorCollection: view.descriptorCollection

        });
        accessionLayout.showChildView('descriptors', accessionDescriptorEditView);

    }
});

module.exports = View;


/***/ }),
/* 68 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file accessiondescriptorcontext.js
 * @brief Accession descriptors context menu
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-02-14
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Marionette = __webpack_require__(1);

let View = Marionette.View.extend({
    tagName: 'div',
    template: __webpack_require__(15),
    className: "context accession",
    templateContext: function () {
        return {
            actions: this.getOption('actions'),
            options: {
                'modify': {className: 'btn-default', label: _t('Modify')},
                'apply': {className: 'btn-success', label: _t('Apply')},
                'cancel': {className: 'btn-default', label: _t('Cancel')}
            }
        }
    },

    ui: {
        'modify': 'button[name="modify"]',
        'apply': 'button[name="apply"]',
        'cancel': 'button[name="cancel"]'
    },

    triggers: {
        "click @ui.modify": "describable:modify",
        "click @ui.apply": "describable:apply",
        "click @ui.cancel": "describable:cancel"
    },

    initialize: function(options) {
        options || (options = {actions: []});
    }
});

module.exports = View;


/***/ }),
/* 69 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {/**
 * @file batchlist.js
 * @brief Batch list view
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-02-14
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let BatchView = __webpack_require__(224);
let AdvancedTable = __webpack_require__(6);
let DescriptorsColumnsView = __webpack_require__(11);

let View = AdvancedTable.extend({
    className: "batch-list advanced-table-container",
    childView: BatchView,
    childViewContainer: 'tbody.entity-list',
    userSettingVersion: '1.0',

    userSettingName: function () {
        if (this.collection.batch_type === 'parents') {
            return 'parents_batches_list_columns';
        } else if (this.collection.batch_type === 'children') {
            return 'children_batches_list_columns';
        } else {
            return 'batches_list_columns';
        }
    },

    defaultColumns: [
        {name: 'select', width: 'auto', sort_by: null},
        {name: 'name', width: 'auto', sort_by: '+0'},
    ],

    columnsOptions: {
        'select': {
            label: '',
            width: 'auto',
            type: 'checkbox',
            glyphicon: ['fa-square-o', 'fa-square-o'],
            event: 'selectBatch',
            fixed: true
        },
        'name': {label: _t('Name'), width: 'auto', minWidth: true, event: 'view-batch-details'},
    },

    templateContext: function () {
        return {
            columnsList: this.displayedColumns,
            columnsOptions: this.getOption('columns')
        }
    },

    childViewOptions: function () {
        return {
            columnsList: this.displayedColumns,
            columnsOptions: this.getOption('columns')
        }
    },

    initialize: function (options) {
        View.__super__.initialize.apply(this, arguments);
        this.accessionId = options.accessionId || -1;
    },

    onShowTab: function () {
        View.__super__.onShowTab.apply(this);

        let self = this;

        // query now to avoid useless queries
        this.query();

        let contextLayout = window.application.getView().getChildView('right');
        if (!contextLayout) {
            let DefaultLayout = __webpack_require__(3);
            contextLayout = new DefaultLayout();
            window.application.getView().showChildView('right', contextLayout);
        }

        let TitleView = __webpack_require__(4);
        contextLayout.showChildView('title', new TitleView({title: _t("Batches actions")}));

        let actions = [
            'create-panel',
            'link-to-panel',
            'export-list',
            'import-list'
        ];

        let BatchListContextView = __webpack_require__(49);
        let contextView = new BatchListContextView({
            actions: actions,
            advancedTable: self,
            accessionId: self.accessionId
        });

        contextLayout.showChildView('content', contextView);

        contextView.on("panel:create", function () {
            self.onCreatePanel();
        });

        contextView.on("panel:link-batches", function () {
            self.onLinkToPanel();
        });

        View.__super__.onShowTab.apply(this);
    },

    onCreatePanel: function () {
        if (!this.getSelection('select')) {
            $.alert.warning(_t("No batch selected"));
        } else {
            window.application.accession.controllers.batchpanel.create(
                this.getSelection('select'),
                this.relatedEntity,
                this.collection.filters,
                this.collection.search);
        }
    },

    onBeforeDetach: function () {
        window.application.main.defaultRightView();
    },

    onLinkToPanel: function () {
        window.application.accession.controllers.batchpanel.linkBatches(
            this.getSelection('select'),
            this.relatedEntity,
            this.collection.filters,
            this.collection.search);
    },

    onHideTab: function () {
        window.application.main.defaultRightView();
    },
});

// support of descriptors columns extension
_.extend(View.prototype, DescriptorsColumnsView);

module.exports = View;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 70 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file classificationentry.js
 * @brief Classification entry item view
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-04-20
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Marionette = __webpack_require__(1);

let ClassificationEntryView = Marionette.View.extend({
    tagName: 'tr',
    className: 'object classification-entry element',
    attributes: function() {
        return {
            'scope': 'row',
            'element-id': this.model.get('id')
        }
    },
    template: __webpack_require__(12),

    templateContext: function () {
        return {
            columnsList: this.getOption('columnsList'),
            columnsOptions: this.getOption('columnsOptions')
        }
    },

    ui: {
        "classification_entry": "td.view-classification-entry-details",
        "remove_classification_entry": ".remove-classification-entry",
        "synonym_name": ".synonym-name",
        "synonym_language": ".synonym-languages",
        "classification_entry_synonym_type": ".entity-synonym-types",
        "classification_rank": ".classification-rank",
        "parent_details": ".view-parent-details"
    },

    events: {
        "click @ui.classification_entry": "onClassificationEntryDetails",
        "click @ui.parent_details": "onParentClassificationEntryDetails",
        "click @ui.remove_classification_entry": "onRemoveClassificationEntry"
    },

    behaviors: {
        ActionBtnEvents: {
            behaviorClass: __webpack_require__(8),
            actions: {
                edit: {display: false},
                manage: {display: true, event: 'onClassificationEntryDetails'},
                remove: {display: true, event: 'onRemoveClassificationEntry'}
            }
        }
    },

    initialize: function() {
        this.listenTo(this.model, 'change', this.render, this);
    },

    actionsProperties: function() {
        let properties = {
            manage: {disabled: false},
            remove: {disabled: false}
        };

        // @todo manage permissions

        if (/*!this.model.get('can_delete') ||*/0) {
            properties.remove.disabled = true;
        }

        return properties;
    },

    onRender: function() {
        window.application.main.views.languages.htmlFromValue(this.el);


    },

    onClassificationEntryDetails: function() {
        Backbone.history.navigate("app/classification/classificationentry/" + this.model.get('id') + "/", {trigger: true});
    },

    onParentClassificationEntryDetails: function() {
        if (this.model.get('parent')) {
            Backbone.history.navigate("app/classification/classificationentry/" + this.model.get('parent') + "/", {trigger: true});
        }
    },

    onRemoveClassificationEntry: function() {
        this.model.destroy({wait: true}).then(function() {
            $.alert.success(_t("Successfully removed !"));
        });
    },

    rankCell: function(td, value) {
        if (value && value.label) {
            let text = value.label;
            td.html(text);
        }
    },

    synonymCell: function(td) {
        let synonyms = this.model.get('synonyms');

        if (synonyms.length > 1) {
            let text = this.model.get('synonyms')[1].name;
            td.html(text);
        }
    },

    parentCell: function(td, value) {
        if (value && value.rank) {
            if (value && value.rank) {
                td.popupcell('init', {
                    label: value.name,
                    className: 'classification-rank',
                    type: 'entity',
                    format: {
                        model: 'classification.classificationrank',
                        details: true
                    },
                    value: value.rank
                });
            }
        }
    }
});

module.exports = ClassificationEntryView;


/***/ }),
/* 71 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file panel.js
 * @brief
 * @author Medhi BOULNEMOUR (INRA UMR1095)
 * @date 2017-09-12
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Backbone = __webpack_require__(7);

let Model = Backbone.Model.extend({
    url: function () {
        if (this.isNew())
            return window.application.url(['accession', 'accessionpanel']);
        else
            return window.application.url(['accession', 'accessionpanel', this.get('id')]);
    },

    defaults: {
        id: null,
        name: '',
        selection: {},
        layout: null,
        descriptors: {}
    },

    parse: function (data) {
        return data;
    },

    validate: function (attrs) {
        let errors = {};
        let hasError = false;
        if (!attrs.name) {
            errors.name = 'Name must be valid and at least 3 characters length';
            hasError = true;
        }

        if (hasError) {
            return errors;
        }
    }
});

module.exports = Model;


/***/ }),
/* 72 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file batchlayout.js
 * @brief Optimized layout for batch details
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-02-15
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let LayoutView = __webpack_require__(17);
let AccessionModel = __webpack_require__(37);
let ScrollingMoreView = __webpack_require__(10);
let ContentBottomFooterLayout = __webpack_require__(25);
let BatchDescriptorEditView = __webpack_require__(227);
let DescriptorCollection = __webpack_require__(18);
let EntityListFilterView = __webpack_require__(14);

let Layout = LayoutView.extend({
    template: __webpack_require__(378),

    attributes: {
        style: "height: 100%;"
    },

    ui: {
        descriptors_tab: 'a[aria-controls=descriptors]',
        parents_tab: 'a[aria-controls=parents]',
        batches_tab: 'a[aria-controls=batches]',
        actions_tab: 'a[aria-controls=actions]',
        panels_tab: 'a[aria-controls=panels]',
        comments_tab: 'a[aria-controls=comments]'
    },

    regions: {
        'details': "div.batch-details",
        'descriptors': "div.tab-pane[name=descriptors]",
        'parents': "div.tab-pane[name=parents]",
        'batches': "div.tab-pane[name=batches]",
        'actions': "div.tab-pane[name=actions]",
        'panels': "div.tab-pane[name=panels]",
        'comments': "div.tab-pane[name=comments]"
    },

    initialize: function (model, options) {
        Layout.__super__.initialize.apply(this, arguments);

        this.listenTo(this.model, 'change:layout', this.onLayoutChange, this);

        if (this.model.isNew()) {
            this.listenTo(this.model, 'change:id', this.onBatchCreate, this);
        }
    },

    onBatchCreate: function () {
        // re-render once created
        this.render();

        // and update history
        Backbone.history.navigate('app/accession/batch/' + this.model.get('id') + '/', {
            /*trigger: true,*/
            replace: false
        });
    },

    disableParentsTab: function () {
        this.ui.parents_tab.parent().addClass('disabled');
    },

    disableBatchesTab: function () {
        this.ui.batches_tab.parent().addClass('disabled');
    },

    disableActionsTab: function () {
        this.ui.actions_tab.parent().addClass('disabled');
    },

    disablePanelsTab: function () {
        this.ui.panels_tab.parent().addClass('disabled');
    },

    disableCommentsTab: function () {
        this.ui.comments_tab.parent().addClass('disabled');
    },

    enableTabs: function () {
        this.ui.parents_tab.parent().removeClass('disabled');
        this.ui.batches_tab.parent().removeClass('disabled');
        this.ui.actions_tab.parent().removeClass('disabled');
        this.ui.panels_tab.parent().removeClass('disabled');
        this.ui.comments_tab.parent().removeClass('disabled');
    },

    onLayoutChange: function (model, value) {
        if (value == null) {
            this.getRegion('descriptors').empty();
        } else {
            let batchLayout = this;

            // get the layout before creating the view
            $.ajax({
                method: "GET",
                url: window.application.url(['descriptor', 'layout', value]),
                dataType: 'json'
            }).done(function (data) {
                let view = this;

                this.descriptorCollection = new DescriptorCollection([], {
                    model_id: data.id
                });
                this.descriptorCollection.fetch().then(function () {
                    if (!batchLayout.isRendered()) {
                        return;
                    }

                    let BatchDescriptorView = __webpack_require__(73);
                    let batchDescriptorView = new BatchDescriptorView({
                        model: batchLayout.model,
                        layoutData: data,
                        descriptorCollection: view.descriptorCollection

                    });
                    batchLayout.showChildView('descriptors', batchDescriptorView);
                });

                // // manually called
                // if (batchLayout.activeTab === 'descriptors') {
                //     batchDescriptorView.onShowTab();
                // }
            });
        }
    },

    onRender: function () {
        let batchLayout = this;

        if (!this.model.isNew()) {
            // get available columns
            let columns = window.application.main.cache.lookup({
                type: 'entity_columns',
                format: {model: 'accession.batch'}
            });

            // parents batches tab
            let BatchCollection = __webpack_require__(47);
            let parentBatches = new BatchCollection([], {batch_id: this.model.get('id'), batch_type: 'parents'});

            columns.then(function (data) {
                if (!batchLayout.isRendered()) {
                    return;
                }

                let BatchListView = __webpack_require__(69);
                let batchListView = new BatchListView({
                    collection: parentBatches,
                    model: batchLayout.model,
                    accessionId: batchLayout.model.get('accession'),
                    columns: data[0].value
                });

                let contentBottomFooterLayout = new ContentBottomFooterLayout();
                batchLayout.showChildView('parents', contentBottomFooterLayout);

                contentBottomFooterLayout.showChildView('content', batchListView);
                contentBottomFooterLayout.showChildView('bottom', new ScrollingMoreView({
                    targetView: batchListView,
                    collection: parentBatches
                }));

                contentBottomFooterLayout.showChildView('footer', new EntityListFilterView({
                    collection: parentBatches,
                    columns: data[0].value
                }));
            });

            // children batches tab
            let childrenBatches = new BatchCollection([], {batch_id: this.model.get('id'), batch_type: 'children'});

            columns.then(function (data) {
                if (!batchLayout.isRendered()) {
                    return;
                }

                let BatchChildrenListView = __webpack_require__(379);
                let batchChildrenListView = new BatchChildrenListView({
                    collection: childrenBatches,
                    accessionId: batchLayout.model.get('accession'),
                    model: batchLayout.model,
                    columns: data[0].columns
                });

                let contentBottomFooterLayout = new ContentBottomFooterLayout();
                batchLayout.showChildView('batches', contentBottomFooterLayout);

                contentBottomFooterLayout.showChildView('content', batchChildrenListView);
                contentBottomFooterLayout.showChildView('bottom', new ScrollingMoreView({
                    targetView: batchChildrenListView,
                    collection: childrenBatches
                }));

                contentBottomFooterLayout.showChildView('footer', new EntityListFilterView({
                    collection: childrenBatches,
                    columns: data[0].value
                }));
            });

            // panels tab
            let PanelCollection = __webpack_require__(228);
            let batchPanels = new PanelCollection({batch_id: this.model.get('id')});

            // get available columns
            window.application.main.cache.lookup({
                type: 'entity_columns',
                format: {model: 'accession.batchpanel'}
            }).then(function (data) {
                if (!batchLayout.isRendered()) {
                    return;
                }

                let BatchPanelListView = __webpack_require__(380);
                let batchPanelListView = new BatchPanelListView({
                    collection: batchPanels,
                    accessionId: batchLayout.model.get('accession'),
                    model: batchLayout.model,
                    columns: data[0].value
                });

                let contentBottomFooterLayout = new ContentBottomFooterLayout();
                batchLayout.showChildView('panels', contentBottomFooterLayout);

                contentBottomFooterLayout.showChildView('content', batchPanelListView);
                contentBottomFooterLayout.showChildView('bottom', new ScrollingMoreView({
                    targetView: batchPanelListView,
                    collection: batchPanels
                }));

                contentBottomFooterLayout.showChildView('footer', new EntityListFilterView({
                    collection: batchPanels,
                    columns: data[0].value
                }));
            });

            let accession = new AccessionModel({id: this.model.get('accession')});
            accession.fetch().then(function () {
                if (!batchLayout.isRendered()) {
                    return;
                }

                // batch path
                let BatchPath = __webpack_require__(382);
                let batchPath = new BatchPath({accession: accession, model: batchLayout.model});

                batchLayout.showChildView('details', batchPath);

                // actions list tab
                let ActionCollection = __webpack_require__(229);
                let actions = new ActionCollection({batch_id: batchLayout.model.get('id')});

                // get available columns
                window.application.main.cache.lookup({
                    type: 'entity_columns',
                    format: {model: 'accession.action'}
                }).then(function (data) {
                    if (!batchLayout.isRendered()) {
                        return;
                    }

                    let ActionListView = __webpack_require__(230);
                    let actionListView = new ActionListView({
                        collection: actions, model: batchLayout.model, columns: data[0].value
                    });

                    let contentBottomFooterLayout = new ContentBottomFooterLayout();
                    batchLayout.showChildView('actions', contentBottomFooterLayout);

                    contentBottomFooterLayout.showChildView('content', actionListView);
                    contentBottomFooterLayout.showChildView('bottom', new ScrollingMoreView({
                        targetView: actionListView,
                        collection: actions
                    }));

                    contentBottomFooterLayout.showChildView('footer', new EntityListFilterView({
                        collection: actions,
                        columns: data[0].value
                    }));
                });
            });

            this.onLayoutChange(this.model, this.model.get('layout'));

            // comments
            let CommentListView = __webpack_require__(28);

            // classifications entry tab (query on show tab)
            let CommentCollection = __webpack_require__(29);
            let comments = new CommentCollection([], {entity: this.model});

            let commentListView = new CommentListView({entity: this.model, collection: comments});
            batchLayout.showChildView('comments', commentListView);

            this.enableTabs();
        } else {
            // descriptors edit tab
            $.ajax({
                method: "GET",
                url: window.application.url(['descriptor', 'layout', this.model.get('layout')]),
                dataType: 'json'
            }).done(function (data) {
                let view = this;

                this.descriptorCollection = new DescriptorCollection([], {
                    model_id: data.id
                });
                this.descriptorCollection.fetch().then(function () {
                    if (!batchLayout.isRendered()) {
                        return;
                    }

                    // let AccessionDescriptorView = require('./accessiondescriptor');
                    let batchDescriptorView = new BatchDescriptorEditView({
                        model: batchLayout.model,
                        layoutData: data,
                        descriptorCollection: view.descriptorCollection

                    });
                    batchLayout.showChildView('descriptors', batchDescriptorView);
                });
            });

            // not available tabs
            this.disableParentsTab();
            this.disableBatchesTab();
            this.disableActionsTab();
            this.disableCommentsTab();
        }
    }
});

module.exports = Layout;


/***/ }),
/* 73 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file batchdescriptor.js
 * @brief Batch descriptor item view
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-02-15
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let DescribableDetails = __webpack_require__(34);
let BatchDescriptorEditView = __webpack_require__(227);

let View = DescribableDetails.extend({
    onShowTab: function() {
        let view = this;

        let contextLayout = application.getView().getChildView('right');
        if (!contextLayout) {
            let DefaultLayout = __webpack_require__(3);
            contextLayout = new DefaultLayout();
            application.getView().showChildView('right', contextLayout);
        }

        let TitleView = __webpack_require__(4);
        contextLayout.showChildView('title', new TitleView({title: _t("Descriptors"), glyphicon: 'fa-wrench'}));

        let actions = ['modify'];

        let BatchDescriptorContextView = __webpack_require__(74);
        let contextView = new BatchDescriptorContextView({actions: actions});
        contextLayout.showChildView('content', contextView);

        contextView.on("describable:modify", function () {
            view.onModify();
        });
    },

    onHideTab: function() {
        application.main.defaultRightView();
    },

    onModify: function () {
        // does not reload models, just redo the views
        let name = this.model.get('name');

        // update the layout content
        let batchLayout = application.main.viewContent().getChildView('content');

        let view = new BatchDescriptorEditView({model: this.model, layoutData: this.layoutData,
            descriptorCollection: this.descriptorCollection
        });
        batchLayout.showChildView('descriptors', view);
    }
});

module.exports = View;



/***/ }),
/* 74 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file batchdescriptorcontext.js
 * @brief Batch descriptors context menu
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-02-14
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Marionette = __webpack_require__(1);

let View = Marionette.View.extend({
    tagName: 'div',
    template: __webpack_require__(15),
    className: "context batch",
    templateContext: function () {
        return {
            actions: this.getOption('actions'),
            options: {
                'modify': {className: 'btn-default', label: _t('Modify')},
                'apply': {className: 'btn-success', label: _t('Apply')},
                'cancel': {className: 'btn-default', label: _t('Cancel')}
            }
        }
    },

    ui: {
        'modify': 'button[name="modify"]',
        'apply': 'button[name="apply"]',
        'cancel': 'button[name="cancel"]'
    },

    triggers: {
        "click @ui.modify": "describable:modify",
        "click @ui.apply": "describable:apply",
        "click @ui.cancel": "describable:cancel"
    },

    initialize: function(options) {
        options || (options = {actions: []});
    }
});

module.exports = View;


/***/ }),
/* 75 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file batchpanel.js
 * @brief
 * @author Medhi BOULNEMOUR (INRA UMR1095)
 * @date 2017-11-03
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Backbone = __webpack_require__(7);

let Model = Backbone.Model.extend({
    url: function () {
        if (this.isNew())
            return window.application.url(['accession', 'batchpanel']);
        else
            return window.application.url(['accession', 'batchpanel', this.get('id')]);
    },

    defaults: {
        id: null,
        name: '',
        selection: {},
        layout: null,
        descriptors: {}
    },

    parse: function (data) {
        return data;
    },

    validate: function (attrs) {
        let errors = {};
        let hasError = false;
        if (!attrs.name) {
            errors.name = 'Name must be valid and at least 3 characters length';
            hasError = true;
        }

        if (hasError) {
            return errors;
        }
    }
});

module.exports = Model;


/***/ }),
/* 76 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file accessionpaneldescriptor.js
 * @brief
 * @author Medhi BOULNEMOUR (INRA UMR1095)
 * @date 2017-09-13
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let DescribableDetails = __webpack_require__(34);
let AccessionPanelDescriptorEditView = __webpack_require__(388);

let View = DescribableDetails.extend({

    onShowTab: function () {
        let view = this;

        let contextLayout = application.getView().getChildView('right');
        if (!contextLayout) {
            let DefaultLayout = __webpack_require__(3);
            contextLayout = new DefaultLayout();
            application.getView().showChildView('right', contextLayout);
        }

        let TitleView = __webpack_require__(4);
        contextLayout.showChildView('title', new TitleView({title: _t("Descriptors"), glyphicon: 'fa-wrench'}));

        let actions = ['modify'];

        let AccessionPanelDescriptorContextView = __webpack_require__(235);
        let contextView = new AccessionPanelDescriptorContextView({actions: actions});
        contextLayout.showChildView('content', contextView);

        contextView.on("describable:modify", function () {
            view.onModify();
        });

        contextView.on("layout:replace", function () {
            view.onReplace();
        });
    },

    onReplace: function () {
        // this will update the model and so on the view
        let AccessionPanelDescriptorCreateView = __webpack_require__(232);
        let accessionPanelDescriptorCreateView = new AccessionPanelDescriptorCreateView({model: this.model});

        accessionPanelDescriptorCreateView.onDefine();
    },

    onHideTab: function () {
        application.main.defaultRightView();
    },

    onModify: function () {
        // does not reload models, just redo the views

        // update the layout content
        let accessionPanelLayout = application.main.viewContent().getChildView('content');

        let view = new AccessionPanelDescriptorEditView({
            model: this.model,
            layoutData: this.layoutData,
            descriptorCollection: this.descriptorCollection
        });
        accessionPanelLayout.showChildView('descriptors', view);
    }
});

module.exports = View;


/***/ }),
/* 77 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file paneldescriptor.js
 * @brief
 * @author Medhi BOULNEMOUR (INRA UMR1095)
 * @date 2017-11-07
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let DescribableDetails = __webpack_require__(34);
let BatchPanelDescriptorEditView = __webpack_require__(394);

let View = DescribableDetails.extend({

    onShowTab: function () {
        let view = this;

        let contextLayout = application.getView().getChildView('right');
        if (!contextLayout) {
            let DefaultLayout = __webpack_require__(3);
            contextLayout = new DefaultLayout();
            application.getView().showChildView('right', contextLayout);
        }

        let TitleView = __webpack_require__(4);
        contextLayout.showChildView('title', new TitleView({title: _t("Descriptors"), glyphicon: 'fa-wrench'}));

        let actions = ['modify'];

        let BatchPanelDescriptorContextView = __webpack_require__(239);
        let contextView = new BatchPanelDescriptorContextView({actions: actions});
        contextLayout.showChildView('content', contextView);

        contextView.on("describable:modify", function () {
            view.onModify();
        });

        contextView.on("layout:replace", function () {
            view.onReplace();
        });
    },

    onReplace: function () {
        // this will update the model and so on the view
        let BatchPanelDescriptorCreateView = __webpack_require__(238);
        let batchPanelDescriptorCreateView = new BatchPanelDescriptorCreateView({model: this.model});

        batchPanelDescriptorCreateView.onDefine();
    },

    onHideTab: function () {
        application.main.defaultRightView();
    },

    onModify: function () {
        // does not reload models, just redo the views

        // update the layout content
        let batchPanelLayout = application.main.viewContent().getChildView('content');

        let view = new BatchPanelDescriptorEditView({
            model: this.model,
            layoutData: this.layoutData,
            descriptorCollection: this.descriptorCollection
        });
        batchPanelLayout.showChildView('descriptors', view);
    }
});

module.exports = View;


/***/ }),
/* 78 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file classificationentrydescriptor.js
 * @brief Classification entry descriptors view
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-12-29
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let DescribableDetails = __webpack_require__(34);
let ClassificationEntryDescriptorEditView = __webpack_require__(248);

let View = DescribableDetails.extend({
    onShowTab: function () {
        let view = this;

        let contextLayout = application.getView().getChildView('right');
        if (!contextLayout) {
            let DefaultLayout = __webpack_require__(3);
            contextLayout = new DefaultLayout();
            application.getView().showChildView('right', contextLayout);
        }

        let TitleView = __webpack_require__(4);
        contextLayout.showChildView('title', new TitleView({title: _t("Descriptors"), glyphicon: 'fa-wrench'}));

        let actions = [];

        if (!this.model.get('layout')) {
            actions.push('add');
        } else {
            actions.push('modify');
            // actions.push('replace');
            // actions.push('delete');
        }

        let ClassificationEntryDescriptorContextView = __webpack_require__(249);
        let contextView = new ClassificationEntryDescriptorContextView({actions: actions});
        contextLayout.showChildView('content', contextView);

        contextView.on("describable:modify", function () {
            view.onModify();
        });

        // contextView.on("layout:replace", function () {
        //     // this will update the model and so on the view
        //     let ClassificationEntryDescriptorCreateView = require('./classificationentrydescriptorcreate');
        //     let classificationEntryDescriptorCreateView = new ClassificationEntryDescriptorCreateView({model: view.model});
        //
        //     classificationEntryDescriptorCreateView.onDefine();
        // });
        //
        // contextView.on("layout:delete", function () {
        //     let ConfirmDialog = require('../../main/views/confirmdialog');
        //     let confirmDialog = new ConfirmDialog({
        //         title: _t('Delete descriptors'),
        //         label: _t('Are you sure you want to delete any descriptors for this classification entry ?')
        //     });
        //     confirmDialog.render();
        //
        //     confirmDialog.on('dialog:confirm', function() {
        //         // this will update the model and so on the view
        //         view.model.save({layout: null}, {patch: true, trigger: true});
        //     });
        // });
    },

    onHideTab: function () {
        application.main.defaultRightView();
    },

    onModify: function () {
        // does not reload models, just redo the views

        // update the descriptor part of the classificationEntry layout
        let classificationEntryLayout = application.main.viewContent().getChildView('content');

        let view = new ClassificationEntryDescriptorEditView({
            model: this.model,
            layoutData: this.layoutData,
            descriptorCollection: this.descriptorCollection
        });

        classificationEntryLayout.showChildView('descriptors', view);
    }
});

module.exports = View;


/***/ }),
/* 79 */
/***/ (function(module, exports) {

/**
 * @file menuentrybase.js
 * @brief Menu entry base class.
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-08-24
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let MenuEntryBase = function(name, order, auth) {
    this.name = name || "";
    this.order = order || -1;
    this.auth = auth || "ANY";
};

MenuEntryBase.prototype = {
    hasLabel: function() {
        return false;
    },

    /**
     * Get authentication type class name
     * @returns {*}
     */
    authTypeClassName: function() {
        if (this.auth === "any") {
            return "auth-any"
        } else if (this.auth === "guest") {
            return "auth-guest"
        } else if (this.auth === "user") {
            return "auth-user"
        } else if (this.auth === "staff") {
            return "auth-staff"
        } else if (this.auth === "superuser") {
            return "auth-superuser"
        } else {
            return "";
        }
    },

    /**
     * Render the menu entry.
     * @param parent
     */
    render: function(parent) {
        /* nothing */
    },

    /**
     * Destroy the view.
     */
    destroy: function() {
        if (this.$el) {
            this.$el.remove();
            this.$el = null;
        }
    }
};

module.exports = MenuEntryBase;


/***/ }),
/* 80 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file menuentryseparator.js
 * @brief Separator menu entry class.
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-08-24
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let MenuEntryBase = __webpack_require__(79);

let MenuSeparator = function(order, auth) {
    MenuEntryBase.call(this, null, order, auth);
};

MenuSeparator.prototype = Object.create(MenuEntryBase.prototype);
MenuSeparator.prototype.constructor = MenuSeparator;

/**
 * Render the menu entry.
 * @param parent
 */
MenuSeparator.prototype.render = function(parent) {
    let entry = $('<li role="presentation" class="divider" name="' + this.name + '"></li>');
    entry.addClass(this.authTypeClassName());

    parent.append(entry);
};

module.exports = MenuSeparator;


/***/ }),
/* 81 */
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(21)(false);
// imports


// module
exports.push([module.i, "div.descriptor-column.selected span.glyphicon-ok{display:inline}div.descriptor-column.selected span.glyphicon-plus,div.descriptor-column.unselected span.glyphicon-ok{display:none}div.descriptor-column.unselected span.glyphicon-plus{display:inline}ul.comment-value-history,ul.descriptor-value-history{padding-left:0}span.history-details h4{margin-bottom:0}span.history-date,span.history-username{border-bottom-left-radius:0;border-bottom-right-radius:0}span.history-username{float:right;right:15px;position:absolute}span.history-value input{border-top-left-radius:0}span.history-value span.input-group-addon{border-top-right-radius:0}", ""]);

// exports


/***/ }),
/* 82 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file descriptor.js
 * @brief Descriptor collection
 * @author Medhi BOULNEMOUR (INRA UMR1095)
 * @date 2018-01-10
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let DescriptorModel = __webpack_require__(40);
let CountableCollection = __webpack_require__(9);

let Collection = CountableCollection.extend({
    url: function() {
        return window.application.url(['descriptor', 'descriptor']);
    },
    model: DescriptorModel
});

module.exports = Collection;

/***/ }),
/* 83 */
/***/ (function(module, exports) {

/**
 * @file descriptorformattypemanager.js
 * @brief Base class for any descriptor format type widgets.
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-01-20
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let DescriptorFormatTypeManager = function() {
    this.descriptorFormatType = {};
};

DescriptorFormatTypeManager.prototype = {
    registerElement: function (formatType, descriptorFormatType) {
        this.descriptorFormatType[formatType] = descriptorFormatType;
    },

    getElement: function(formatType) {
        return this.descriptorFormatType[formatType];
    },

    newElement: function(formatType) {
        let Element = this.descriptorFormatType[formatType];
        if (Element) {
            return new Element();
        }
        return null;
    }
};

module.exports = DescriptorFormatTypeManager;


/***/ }),
/* 84 */
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(21)(false);
// imports


// module
exports.push([module.i, "div.root-left-bar{padding:5px}div.root-content{padding:5px;height:100%;min-height:200px}div.root-right-bar{padding:5px}div.column{height:100%;margin:0}div.left,div.right{padding-left:5px;padding-right:5px;height:calc(100% - 2px)}@media (max-width:768px){div.root-content,div.root-left-bar,div.root-right-bar{padding:0}div.container{width:100%;padding:0}div.root-content div div.panel{border:none;height:100%}div.root-right-bar-grabber{margin-right:0;margin-top:0;right:0;width:5px;height:100%}}@media (min-width:992px){div.column-left,div.column-right{width:calc(50% - 1px)}div.row-down,div.row-up{height:50%}}div.root-right-bar-grabber{margin-right:0;margin-top:5px;position:absolute;width:5px;right:-15px;top:0;height:calc(100% - 10px);border-right:5px solid #444}div.column-spacer{width:0;height:calc(100% - 2px);border-left:1px solid #d8d8d8;padding:0}div.panel{display:flex;flex-flow:column;height:100%;margin:0}div.insider-panel div.panel-heading{padding-top:5px;padding-bottom:5px;height:30px}div.panel div.panel-heading{flex:0 1 auto}div.panel div.panel-body{overflow-y:auto;overflow-x:hidden;flex:1 1 auto;height:100%;padding:10px}.help-block{margin-bottom:0}div.layout-bottom{height:auto}div.right-down,div.right-up{height:calc(50% - 1px)}div.row-spacer{height:3px;border-bottom:1px solid #d8d8d8}.form-group-margin-sm{margin-bottom:0}div.left-content,div.right-content,div.right-down-content,div.right-up-content{overflow-y:auto;height:calc(100% - 20px - 5px)}div.panel div.panel-body-bottom,div.panel div.panel-bottom{height:auto;flex:0 1 auto}.event-message+.event-message{border-top:1px solid #a0bd2e}div.event-message>span.remove-event-message{display:none}div.event-message:hover>span.remove-event-message{display:inline-block}.collapsing{-webkit-transition:none;transition:none}.action,span.url{cursor:pointer}.action-forbidden{cursor:not-allowed}.left-margin{margin-left:10px}.heading{background-color:#6c995a;padding:5px;margin-left:.25em;border-radius:5px}.unselectable{-moz-user-select:none;-khtml-user-select:none;-webkit-user-select:none;-o-user-select:none}div.element:hover,span.element:hover input,tr.element:hover{background:#5cb85c!important}[draggable=true]{cursor:grab;cursor:-webkit-grab}[draggable=true]:active{cursor:move}li[draggable=true]:active{border:1px dotted #a9a9a9;color:#a9a9a9;background-color:#f5f5f5}[draggable=true]:hover{-webkit-box-shadow:inset 0 0 20px 3px rgba(0,0,0,.075),0 0 6px #a9a9a9;box-shadow:inset 0 0 20px 3px rgba(0,0,0,.075),0 0 6px #a9a9a9}[draggable]{-moz-user-select:none;-khtml-user-select:none;-webkit-user-select:none;user-select:none;-khtml-user-drag:element;-webkit-user-drag:element}.draggable-over{border:2px dashed #000;border-radius:5px}span[name=label]:empty~span.label-placeholder{display:inline}span[name=label]:not(:empty)~span.label-placeholder{display:none}.panel-heading .accordion-toggle:after{font-family:FontAwesome;content:\"\\F078\";float:right;color:grey}.panel-heading .accordion-toggle.collapsed:after{font-family:FontAwesome;content:\"\\F054\";float:right;color:grey}.mandatory-field{font-weight:700;font-style:italic}.mandatory-field:after{content:\"*\"}li.disabled>a[role=tab]{pointer-events:none}.input-group span.select2.select2-container>span.selection>span{border-top-right-radius:0;border-bottom-right-radius:0}.badge.action:hover,.label.action:hover,td.action:hover>.badge,td.action:hover>.label,th.action:hover>.badge,th.action:hover>.label{background-color:#999}.fa.action:hover,.glyphicon.action:hover,td.action:hover>.fa,td.action:hover>.glyphicon,th.action:hover>.fa,th.action:hover>.glyphicon{opacity:.3}span.action:not(.glyphicon):not(.fa):not(.parenthesis):hover,td.action:hover,th.action:hover{text-decoration:underline}span.config-id{border-bottom-left-radius:0;border-bottom-right-radius:0}div.config-value-box{border-top-left-radius:0}div.advanced-table-container{height:100%;overflow-y:auto;overflow-x:hidden;display:flex;flex-direction:column}.table.table-advanced{margin-bottom:0}.table.table-advanced thead{-moz-user-select:none;-khtml-user-select:none;-webkit-user-select:none;-o-user-select:none}.table.table-advanced thead tr th{white-space:nowrap;border:none;height:32px}div.table-advanced-head{flex:0 1 auto;border-bottom:1px solid #ddd}div.table-advanced-body{overflow:auto;flex:1 1 auto}.table.table-advanced thead tr th div.table-advanced-label{background:transparent;line-height:normal;border:none;position:absolute;overflow:hidden;text-overflow:ellipsis;margin:-17px 0 0 -3px;padding:1px 0 1px 3px}.table.table-advanced thead tr th:first-child div{border-left:none;min-width:21px}.table.table-advanced thead tr th:first-child{border-left:none;min-width:32px}.table.table-advanced tbody tr td:not(:first-child){border-left:1px solid #ddd;min-width:32px}.table.table-advanced tbody tr:first-child td,.table.table-advanced tbody tr:first-child th{border-top:none;min-width:32px}div.placeholder-column{position:absolute;margin-top:8px;margin-left:4px;right:18px;background:transparent;line-height:normal;border-style:none;overflow:hidden}span.column-action{margin-right:3px}.table.table-advanced tbody tr td.glyph-fixed-column,.table.table-advanced tbody tr th.glyph-fixed-column,.table.table-advanced thead tr td.glyph-fixed-column,.table.table-advanced thead tr th.glyph-fixed-column{width:32px;min-width:32px;max-width:32px}.table.table-advanced thead tr td.glyph-fixed-column div,.table.table-advanced thead tr th.glyph-fixed-column div{width:22px}.table.table-advanced thead tr th div.column-sizer{height:32px;position:absolute;margin:-24px 0 0 -14px;background:transparent;border-left:none;overflow:visible;padding-left:6px;padding-right:6px;padding-top:0}.table.table-advanced thead tr th div.column-sizer.active{cursor:col-resize}.table.table-advanced thead tr th div.column-sizer div{height:100%;width:1px;background-color:#ddd}div.row-action-group{display:none;position:relative;width:100%;height:100%}div.row-action-group div{position:absolute;top:0;float:right;right:0}div.glasspane{background-color:#000;opacity:.5;z-index:10000}div.glasspane.glasspane-full{position:fixed;top:0;left:0;width:100%;height:100%}.glasspane-top-of{z-index:10001}.select2-container--default .select2-selection--single{height:34px;padding:0 0 0 8px}.select2-container--default .select2-selection--single .select2-selection__rendered{padding-top:2px}.select2-container--default .select2-selection--single .select2-selection__arrow{top:3px}.table.table-advanced thead tr th div.table-advanced-label.highlight-label{background-color:#aedd36;border-radius:8px}span.parenthesis{margin:-5px 5px;font-size:4em;opacity:.025}span.parenthesis:hover{opacity:.13}span.parenthesis.activated{opacity:1}div.add-column-menu{min-width:200px;width:80vw;max-width:365px;background-color:#fff;border-radius:5px}div.add-column-menu div.input-group{margin:10px}div.add-column-menu ul.columns-list{overflow-y:auto;max-height:80vh;list-style-type:none;border:1px solid #ddd;border-radius:5px;margin:10px;padding:10px}div.add-column-menu ul.columns-list li.column label{margin-bottom:0;font-weight:400}div.add-column-menu ul.columns-list li.column label input{position:relative;top:1px}div.add-column-menu div.btn-group{float:right;margin:0 10px 10px}td.glyph-fixed-column>span,th.glyph-fixed-column>div>span{padding-left:3px}span.fa.fa-lg{font-size:1.27em}span.fa.fa-fw{width:1em;text-align:left}abbr[title]{border-bottom:none}span[title]{cursor:help}.fa-form-control-feedback{top:0;right:0;width:34px;height:34px;line-height:34px}.text-selection-all{user-select:all}.text-selection-none{user-select:none}span.form-clean-btn{z-index:100;top:10px;right:50px;position:absolute}div.cell-context-menu{position:absolute;background:#fff;border:1px solid #ddd;border-radius:5px}div.cell-context-menu ul.actions-list{overflow-y:auto;max-height:80vh;list-style-type:none;margin:5px;padding:0}div.cell-context-menu ul.actions-list li{padding:5px}div.cell-context-menu ul.actions-list li:hover{background:#ddd}div.cell-context-menu ul.actions-list li a:hover{text-color:inherit;text-decoration:none}.panel-editable{border-color:#ddd}.panel-editable>.panel-heading{color:#333;font-weight:700;border-color:#ddd;background:repeating-linear-gradient(45deg,#ddd,#ddd 10px,#f5f5f5 0,#f5f5f5 25px)}.panel-editable>.panel-heading+.panel-collapse>.panel-body{border-top-color:#ddd}.panel-editable>.panel-heading .badge{color:#f5f5f5;background-color:#333}.panel-editable>.panel-footer+.panel-collapse>.panel-body{border-bottom-color:#ddd}.panel-ghost{color:#00000030;border:2px dashed #00000030}.panel-ghost>.panel-heading{color:#00000030;font-weight:700;border-bottom:2px dashed #00000030;background:repeating-linear-gradient(45deg,#dddddd40,#dddddd40 10px,#f5f5f540 0,#f5f5f540 25px)}.panel-ghost:active{background-color:#f5f5f5}.panel-ghost:hover{-webkit-box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 6px #a9a9a9;box-shadow:inset 0 1px 1px rgba(0,0,0,.075),0 0 6px #a9a9a9}.panel-descriptors[aria-expanded=false]{padding:0!important}@-webkit-keyframes vertical{0%{-webkit-transform:translateY(-3px);transform:translateY(-3px)}30%{-webkit-transform:translateY(3px);transform:translateY(3px)}}@keyframes vertical{0%{-webkit-transform:translateY(-3px);-ms-transform:translateY(-3px);transform:translateY(-3px)}30%{-webkit-transform:translateY(3px);-ms-transform:translateY(3px);transform:translateY(3px)}}.faa-parent.animated-hover:hover>.faa-vertical,.faa-vertical.animated,.faa-vertical.animated-hover:hover{-webkit-animation:vertical .3s ease infinite;animation:vertical .3s ease infinite}.tab-frame{margin:15px}div.panel-heading>a.accordion-toggle:focus,div.panel-heading>a.accordion-toggle:hover{text-decoration:none!important}ul.fancytree-container{border:none;font-size:17px}", ""]);

// exports


/***/ }),
/* 85 */
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(21)(false);
// imports


// module
exports.push([module.i, "span.media-download.contextual{padding:4px;width:24px;height:24px;display:none}img.media-image:hover~span.media-download.contextual,span.media-download.contextual:hover{display:inline;position:relative;top:-38px;left:-24px}div.media-image-collection{padding:3px 12px;margin:0;border:1px solid #ccc;border-top-left-radius:4px;border-bottom-left-radius:4px;background-color:#eee}", ""]);

// exports


/***/ }),
/* 86 */
/***/ (function(module, exports, __webpack_require__) {

exports = module.exports = __webpack_require__(21)(false);
// imports


// module
exports.push([module.i, "/*!\n * Viewer v0.6.0\n * https://github.com/fengyuanchen/viewer\n *\n * Copyright (c) 2014-2017 Fengyuan Chen\n * Released under the MIT license\n *\n * Date: 2017-10-07T09:53:32.834Z\n */.viewer-close:before,.viewer-flip-horizontal:before,.viewer-flip-vertical:before,.viewer-fullscreen-exit:before,.viewer-fullscreen:before,.viewer-next:before,.viewer-one-to-one:before,.viewer-play:before,.viewer-prev:before,.viewer-reset:before,.viewer-rotate-left:before,.viewer-rotate-right:before,.viewer-zoom-in:before,.viewer-zoom-out:before{background-image:url(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAARgAAAAUCAYAAABWOyJDAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNui8sowAAAQPSURBVHic7Zs/iFxVFMa/0U2UaJGksUgnIVhYxVhpjDbZCBmLdAYECxsRFBTUamcXUiSNncgKQbSxsxH8gzAP3FU2jY0kKKJNiiiIghFlccnP4p3nPCdv3p9778vsLOcHB2bfveeb7955c3jvvNkBIMdxnD64a94GHMfZu3iBcRynN7zAOI7TG15gHCeeNUkr8zaxG2lbYDYsdgMbktBsP03jdQwljSXdtBhLOmtjowC9Mg9L+knSlcD8TNKpSA9lBpK2JF2VdDSR5n5J64m0qli399hNFMUlpshQii5jbXTbHGviB0nLNeNDSd9VO4A2UdB2fp+x0eCnaXxWXGA2X0au/3HgN9P4LFCjIANOJdrLr0zzZ+BEpNYDwKbpnQMeAw4m8HjQtM6Z9qa917zPQwFr3M5KgA6J5rTJCdFZJj9/lyvGhsDvwFNVuV2MhhjrK6b9bFiE+j1r87eBl4HDwCF7/U/k+ofAX5b/EXBv5JoLMuILzf3Ap6Z3EzgdqHMCuF7hcQf4HDgeoHnccncqdK/TvSDWffFXI/exICY/xZyqc6XLWF1UFZna4gJ7q8BsRvgd2/xXpo6P+D9dfT7PpECtA3cnWPM0GXGFZh/wgWltA+cDNC7X+AP4GzjZQe+k5dRxuYPeiuXU7e1qwLpDz7dFjXKRaSwuMLvAlG8zZlG+YmiK1HoFqT7wP2z+4Q45TfEGcMt01xLoNZEBTwRqD4BLpnMLeC1A41UmVxsXgXeBayV/Wx20rpTyrpnWRft7p6O/FdqzGrDukPNtkaMoMo3FBdBSQMOnYBCReyf05s126fU9ytfX98+mY54Kxnp7S9K3kj6U9KYdG0h6UdLbkh7poFXMfUnSOyVvL0h6VtIXHbS6nOP+s/Zm9mvyXW1uuC9ohZ72E9uDmXWLJOB1GxsH+DxPftsB8B6wlGDN02TAkxG6+4D3TWsbeC5CS8CDFce+AW500LhhOW2020TRjK3b21HEmgti9m0RonxbdMZeVzV+/4tF3cBpP7E9mKHNL5q8h5g0eYsCMQz0epq8gQrwMXAgcs0FGXGFRcB9wCemF9PkbYqM/Bas7fxLwNeJPdTdpo4itQti8lPMqTpXuozVRVXPpbHI3KkNTB1NfkL81j2mvhDp91HgV9MKuRIqrykj3WPq4rHyL+axj8/qGPmTqi6F9YDlHOvJU6oYcTsh/TYSzWmTE6JT19CtLTJt32D6CmHe0eQn1O8z5AXgT4sx4Vcu0/EQecMydB8z0hUWkTd2t4CrwNEePqMBcAR4mrBbwyXLPWJa8zrXmmLEhNBmfpkuY2102xxrih+pb+ieAb6vGhuA97UcJ5KR8gZ77K+99xxeYBzH6Q3/Z0fHcXrDC4zjOL3hBcZxnN74F+zlvXFWXF9PAAAAAElFTkSuQmCC\");background-repeat:no-repeat;color:transparent;display:block;font-size:0;height:20px;line-height:0;width:20px}.viewer-zoom-in:before{background-position:0 0;content:\"Zoom In\"}.viewer-zoom-out:before{background-position:-20px 0;content:\"Zoom Out\"}.viewer-one-to-one:before{background-position:-40px 0;content:\"One to One\"}.viewer-reset:before{background-position:-60px 0;content:\"Reset\"}.viewer-prev:before{background-position:-80px 0;content:\"Previous\"}.viewer-play:before{background-position:-100px 0;content:\"Play\"}.viewer-next:before{background-position:-120px 0;content:\"Next\"}.viewer-rotate-left:before{background-position:-140px 0;content:\"Rotate Left\"}.viewer-rotate-right:before{background-position:-160px 0;content:\"Rotate Right\"}.viewer-flip-horizontal:before{background-position:-180px 0;content:\"Flip Horizontal\"}.viewer-flip-vertical:before{background-position:-200px 0;content:\"Flip Vertical\"}.viewer-fullscreen:before{background-position:-220px 0;content:\"Enter Full Screen\"}.viewer-fullscreen-exit:before{background-position:-240px 0;content:\"Exit Full Screen\"}.viewer-close:before{background-position:-260px 0;content:\"Close\"}.viewer-container{background-color:rgba(0,0,0,.5);bottom:0;direction:ltr;font-size:0;left:0;line-height:0;overflow:hidden;position:absolute;right:0;-webkit-tap-highlight-color:transparent;top:0;-webkit-touch-callout:none;-ms-touch-action:none;touch-action:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.viewer-container::-moz-selection,.viewer-container ::-moz-selection{background-color:transparent}.viewer-container::selection,.viewer-container ::selection{background-color:transparent}.viewer-container img{display:block;height:auto;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;width:100%}.viewer-canvas{bottom:0;left:0;overflow:hidden;position:absolute;right:0;top:0}.viewer-canvas>img{height:auto;margin:15px auto;max-width:90%!important;width:auto}.viewer-footer{bottom:0;left:0;overflow:hidden;position:absolute;right:0;text-align:center}.viewer-navbar{background-color:rgba(0,0,0,.5);overflow:hidden}.viewer-list{box-sizing:content-box;height:50px;margin:0;overflow:hidden;padding:1px 0}.viewer-list>li{color:transparent;cursor:pointer;float:left;font-size:0;height:50px;line-height:0;opacity:.5;overflow:hidden;width:30px}.viewer-list>li+li{margin-left:1px}.viewer-list>.viewer-active{opacity:1}.viewer-player{background-color:#000;bottom:0;cursor:none;display:none;right:0}.viewer-player,.viewer-player>img{left:0;position:absolute;top:0}.viewer-toolbar{margin:0 auto 5px;overflow:hidden;padding:3px 0;width:280px}.viewer-toolbar>li{background-color:rgba(0,0,0,.5);border-radius:50%;cursor:pointer;float:left;height:24px;overflow:hidden;width:24px}.viewer-toolbar>li:hover{background-color:rgba(0,0,0,.8)}.viewer-toolbar>li:before{margin:2px}.viewer-toolbar>li+li{margin-left:1px}.viewer-toolbar>.viewer-play{height:30px;margin-bottom:-3px;margin-top:-3px;width:30px}.viewer-toolbar>.viewer-play:before{margin:5px}.viewer-tooltip{background-color:rgba(0,0,0,.8);border-radius:10px;color:#fff;display:none;font-size:12px;height:20px;left:50%;line-height:20px;margin-left:-25px;margin-top:-10px;position:absolute;text-align:center;top:50%;width:50px}.viewer-title{color:#ccc;display:inline-block;font-size:12px;line-height:1;margin:0 5% 5px;max-width:90%;opacity:.8;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.viewer-title:hover{opacity:1}.viewer-button{background-color:rgba(0,0,0,.5);border-radius:50%;cursor:pointer;height:80px;overflow:hidden;position:absolute;right:-40px;top:-40px;width:80px}.viewer-button:before{bottom:15px;left:15px;position:absolute}.viewer-fixed{position:fixed}.viewer-open{overflow:hidden}.viewer-show{display:block}.viewer-hide{display:none}.viewer-invisible{visibility:hidden}.viewer-move{cursor:move;cursor:-webkit-grab;cursor:grab}.viewer-fade{opacity:0}.viewer-in{opacity:1}.viewer-transition{transition:all .3s}@media (max-width:767px){.viewer-hide-xs-down{display:none}}@media (max-width:991px){.viewer-hide-sm-down{display:none}}@media (max-width:1199px){.viewer-hide-md-down{display:none}}", ""]);

// exports


/***/ }),
/* 87 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file conservatory.js
 * @brief Conservatory model
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2018-06-21
 * @copyright Copyright (c) 2018 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Backbone = __webpack_require__(7);

let Model = Backbone.Model.extend({
    url: function() {
        if (this.isNew())
            return window.application.url(['organisation', 'conservatory']);
        else
            return window.application.url(['organisation', 'conservatory', this.get('id')]);
    },

    defaults: {
        id: null,
        name: "",
        organisation: null,
        layout: null,
        descriptors: {},
        comments: []
    }
});

module.exports = Model;


/***/ }),
/* 88 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file person.js
 * @brief Person model
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2018-06-01
 * @copyright Copyright (c) 2018 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Backbone = __webpack_require__(7);

let Model = Backbone.Model.extend({
    url: function() {
        if (this.isNew())
            return window.application.url(['organisation', 'person']);
        else
            return window.application.url(['organisation', 'person', this.get('id')]);
    },

    defaults: {
        id: null,
        code: "",
        establishment: null,
        layout: null,
        descriptors: {},
        comments: []
    }
});

module.exports = Model;


/***/ }),
/* 89 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file permission.js
 * @brief Permission model
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-05-26
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Backbone = __webpack_require__(7);

let Permission = Backbone.Model.extend({
    defaults: {
        model: undefined,
        object: undefined,
        permissions: []  // { id: '', name: '', app_label: ''}
    },

    initialize: function(attributes, options) {
        options || (options = {});
    },

    parse: function(data) {
        return data;
    },

    validate: function(attrs) {
        let errors = {};
        let hasError = false;

        if (hasError) {
          return errors;
        }
    },

    hasPerm: function (app_label, perm) {
        for (let i = 0; i < this.permissions.length; ++i) {
            if (app_label == this.permissions[i].app_label) {
                if (perm == this.permissions[i].id) {
                    return true;
                }
            }
        }
        return false;
    }
});

module.exports = Permission;



/***/ }),
/* 90 */
/***/ (function(module, exports) {

module.exports = function escape(url) {
    if (typeof url !== 'string') {
        return url
    }
    // If url is already wrapped in quotes, remove them
    if (/^['"].*['"]$/.test(url)) {
        url = url.slice(1, -1);
    }
    // Should url be wrapped?
    // See https://drafts.csswg.org/css-values-3/#urls
    if (/["'() \t\n]/.test(url)) {
        return '"' + url.replace(/"/g, '\\"').replace(/\n/g, '\\n') + '"'
    }

    return url
}


/***/ }),
/* 91 */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*!
 * jquery.fancytree.js
 * Tree view control with support for lazy loading and much more.
 * https://github.com/mar10/fancytree/
 *
 * Copyright (c) 2008-2018, Martin Wendt (http://wwWendt.de)
 * Released under the MIT license
 * https://github.com/mar10/fancytree/wiki/LicenseInfo
 *
 * @version 2.28.1
 * @date 2018-03-19T06:47:37Z
 */

/** Core Fancytree module.
 */

// UMD wrapper for the Fancytree core module
;(function( factory ) {
	if ( true ) {
		// AMD. Register as an anonymous module.
		!(__WEBPACK_AMD_DEFINE_ARRAY__ = [ __webpack_require__(27), __webpack_require__(302) ], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),
				__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?
				(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
	} else if ( typeof module === "object" && module.exports ) {
		// Node/CommonJS
		require("./jquery.fancytree.ui-deps");
		module.exports = factory(require("jquery"));
	} else {
		// Browser globals
		factory( jQuery );
	}

}( function( $ ) {

"use strict";

// prevent duplicate loading
if ( $.ui && $.ui.fancytree ) {
	$.ui.fancytree.warn("Fancytree: ignored duplicate include");
	return;
}


/* *****************************************************************************
 * Private functions and variables
 */

var i, attr,
	FT = null, // initialized below
	TEST_IMG = new RegExp(/\.|\//),  // strings are considered image urls if they contain '.' or '/'
	REX_HTML = /[&<>"'\/]/g,  // Escape those characters
	REX_TOOLTIP = /[<>"'\/]/g,  // Don't escape `&` in tooltips
	RECURSIVE_REQUEST_ERROR = "$recursive_request",
	ENTITY_MAP = {"&": "&amp;", "<": "&lt;", ">": "&gt;", "\"": "&quot;", "'": "&#39;", "/": "&#x2F;"},
	IGNORE_KEYCODES = { 16: true, 17: true, 18: true },
	SPECIAL_KEYCODES = {
		8: "backspace", 9: "tab", 10: "return", 13: "return",
		// 16: null, 17: null, 18: null, // ignore shift, ctrl, alt
		19: "pause", 20: "capslock", 27: "esc", 32: "space", 33: "pageup",
		34: "pagedown", 35: "end", 36: "home", 37: "left", 38: "up",
		39: "right", 40: "down", 45: "insert", 46: "del", 59: ";", 61: "=",
		96: "0", 97: "1", 98: "2", 99: "3", 100: "4", 101: "5", 102: "6",
		103: "7", 104: "8", 105: "9", 106: "*", 107: "+", 109: "-", 110: ".",
		111: "/", 112: "f1", 113: "f2", 114: "f3", 115: "f4", 116: "f5",
		117: "f6", 118: "f7", 119: "f8", 120: "f9", 121: "f10", 122: "f11",
		123: "f12", 144: "numlock", 145: "scroll", 173: "-", 186: ";", 187: "=",
		188: ",", 189: "-", 190: ".", 191: "/", 192: "`", 219: "[", 220: "\\",
		221: "]", 222: "'"},
	MOUSE_BUTTONS = { 0: "", 1: "left", 2: "middle", 3: "right" },
	// Boolean attributes that can be set with equivalent class names in the LI tags
	// Note: v2.23: checkbox and hideCheckbox are *not* in this list
	CLASS_ATTRS = "active expanded focus folder lazy radiogroup selected unselectable unselectableIgnore".split(" "),
	CLASS_ATTR_MAP = {},
	// Top-level Fancytree attributes, that can be set by dict
	TREE_ATTRS = "columns types".split(" "),
	// TREE_ATTR_MAP = {},
	// Top-level FancytreeNode attributes, that can be set by dict
	NODE_ATTRS = "checkbox expanded extraClasses folder icon iconTooltip key lazy partsel radiogroup refKey selected statusNodeType title tooltip type unselectable unselectableIgnore unselectableStatus".split(" "),
	NODE_ATTR_MAP = {},
	// Mapping of lowercase -> real name (because HTML5 data-... attribute only supports lowercase)
	NODE_ATTR_LOWERCASE_MAP = {},
	// Attribute names that should NOT be added to node.data
	NONE_NODE_DATA_MAP = {"active": true, "children": true, "data": true, "focus": true};

for(i=0; i<CLASS_ATTRS.length; i++){ CLASS_ATTR_MAP[CLASS_ATTRS[i]] = true; }
for(i=0; i<NODE_ATTRS.length; i++) {
	attr = NODE_ATTRS[i];
	NODE_ATTR_MAP[attr] = true;
	if( attr !== attr.toLowerCase() ) {
		NODE_ATTR_LOWERCASE_MAP[attr.toLowerCase()] = attr;
	}
}
// for(i=0; i<TREE_ATTRS.length; i++) {
// 	TREE_ATTR_MAP[TREE_ATTRS[i]] = true;
// }


function _assert(cond, msg){
	// TODO: see qunit.js extractStacktrace()
	if(!cond){
		msg = msg ? ": " + msg : "";
		// consoleApply("assert", [!!cond, msg]);
		$.error("Fancytree assertion failed" + msg);
	}
}

_assert($.ui, "Fancytree requires jQuery UI (http://jqueryui.com)");

function consoleApply(method, args){
	var i, s,
		fn = window.console ? window.console[method] : null;

	if(fn){
		try{
			fn.apply(window.console, args);
		} catch(e) {
			// IE 8?
			s = "";
			for( i=0; i<args.length; i++ ) {
				s += args[i];
			}
			fn(s);
		}
	}
}

/* support: IE8 Polyfil for Date.now() */
if( !Date.now ) {
	Date.now = function now() { return new Date().getTime(); };
}

/*Return true if x is a FancytreeNode.*/
function _isNode(x){
	return !!(x.tree && x.statusNodeType !== undefined);
}

/** Return true if dotted version string is equal or higher than requested version.
 *
 * See http://jsfiddle.net/mar10/FjSAN/
 */
function isVersionAtLeast(dottedVersion, major, minor, patch){
	var i, v, t,
		verParts = $.map($.trim(dottedVersion).split("."), function(e){ return parseInt(e, 10); }),
		testParts = $.map(Array.prototype.slice.call(arguments, 1), function(e){ return parseInt(e, 10); });

	for( i = 0; i < testParts.length; i++ ){
		v = verParts[i] || 0;
		t = testParts[i] || 0;
		if( v !== t ){
			return ( v > t );
		}
	}
	return true;
}

/** Return a wrapper that calls sub.methodName() and exposes
 *  this             : tree
 *  this._local      : tree.ext.EXTNAME
 *  this._super      : base.methodName.call()
 *  this._superApply : base.methodName.apply()
 */
function _makeVirtualFunction(methodName, tree, base, extension, extName){
	// $.ui.fancytree.debug("_makeVirtualFunction", methodName, tree, base, extension, extName);
	// if(rexTestSuper && !rexTestSuper.test(func)){
	//     // extension.methodName() doesn't call _super(), so no wrapper required
	//     return func;
	// }
	// Use an immediate function as closure
	var proxy = (function(){
		var prevFunc = tree[methodName],      // org. tree method or prev. proxy
			baseFunc = extension[methodName], //
			_local = tree.ext[extName],
			_super = function(){
				return prevFunc.apply(tree, arguments);
			},
			_superApply = function(args){
				return prevFunc.apply(tree, args);
			};

		// Return the wrapper function
		return function(){
			var prevLocal = tree._local,
				prevSuper = tree._super,
				prevSuperApply = tree._superApply;

			try{
				tree._local = _local;
				tree._super = _super;
				tree._superApply = _superApply;
				return  baseFunc.apply(tree, arguments);
			}finally{
				tree._local = prevLocal;
				tree._super = prevSuper;
				tree._superApply = prevSuperApply;
			}
		};
	})(); // end of Immediate Function
	return proxy;
}

/**
 * Subclass `base` by creating proxy functions
 */
function _subclassObject(tree, base, extension, extName){
	// $.ui.fancytree.debug("_subclassObject", tree, base, extension, extName);
	for(var attrName in extension){
		if(typeof extension[attrName] === "function"){
			if(typeof tree[attrName] === "function"){
				// override existing method
				tree[attrName] = _makeVirtualFunction(attrName, tree, base, extension, extName);
			}else if(attrName.charAt(0) === "_"){
				// Create private methods in tree.ext.EXTENSION namespace
				tree.ext[extName][attrName] = _makeVirtualFunction(attrName, tree, base, extension, extName);
			}else{
				$.error("Could not override tree." + attrName + ". Use prefix '_' to create tree." + extName + "._" + attrName);
			}
		}else{
			// Create member variables in tree.ext.EXTENSION namespace
			if(attrName !== "options"){
				tree.ext[extName][attrName] = extension[attrName];
			}
		}
	}
}


function _getResolvedPromise(context, argArray){
	if(context === undefined){
		return $.Deferred(function(){this.resolve();}).promise();
	}else{
		return $.Deferred(function(){this.resolveWith(context, argArray);}).promise();
	}
}


function _getRejectedPromise(context, argArray){
	if(context === undefined){
		return $.Deferred(function(){this.reject();}).promise();
	}else{
		return $.Deferred(function(){this.rejectWith(context, argArray);}).promise();
	}
}


function _makeResolveFunc(deferred, context){
	return function(){
		deferred.resolveWith(context);
	};
}


function _getElementDataAsDict($el){
	// Evaluate 'data-NAME' attributes with special treatment for 'data-json'.
	var d = $.extend({}, $el.data()),
		json = d.json;

	delete d.fancytree; // added to container by widget factory (old jQuery UI)
	delete d.uiFancytree; // added to container by widget factory

	if( json ) {
		delete d.json;
		// <li data-json='...'> is already returned as object (http://api.jquery.com/data/#data-html5)
		d = $.extend(d, json);
	}
	return d;
}


function _escapeTooltip(s){
	return ("" + s).replace(REX_TOOLTIP, function(s) {
		return ENTITY_MAP[s];
	});
}


// TODO: use currying
function _makeNodeTitleMatcher(s){
	s = s.toLowerCase();
	return function(node){
		return node.title.toLowerCase().indexOf(s) >= 0;
	};
}


function _makeNodeTitleStartMatcher(s){
	var reMatch = new RegExp("^" + s, "i");
	return function(node){
		return reMatch.test(node.title);
	};
}


/* *****************************************************************************
 * FancytreeNode
 */


/**
 * Creates a new FancytreeNode
 *
 * @class FancytreeNode
 * @classdesc A FancytreeNode represents the hierarchical data model and operations.
 *
 * @param {FancytreeNode} parent
 * @param {NodeData} obj
 *
 * @property {Fancytree} tree The tree instance
 * @property {FancytreeNode} parent The parent node
 * @property {string} key Node id (must be unique inside the tree)
 * @property {string} title Display name (may contain HTML)
 * @property {object} data Contains all extra data that was passed on node creation
 * @property {FancytreeNode[] | null | undefined} children Array of child nodes.<br>
 *     For lazy nodes, null or undefined means 'not yet loaded'. Use an empty array
 *     to define a node that has no children.
 * @property {boolean} expanded Use isExpanded(), setExpanded() to access this property.
 * @property {string} extraClasses Additional CSS classes, added to the node's `&lt;span>`.<br>
 *     Note: use `node.add/remove/toggleClass()` to modify.
 * @property {boolean} folder Folder nodes have different default icons and click behavior.<br>
 *     Note: Also non-folders may have children.
 * @property {string} statusNodeType null for standard nodes. Otherwise type of special system node: 'error', 'loading', 'nodata', or 'paging'.
 * @property {boolean} lazy True if this node is loaded on demand, i.e. on first expansion.
 * @property {boolean} selected Use isSelected(), setSelected() to access this property.
 * @property {string} tooltip Alternative description used as hover popup
 * @property {string} iconTooltip Description used as hover popup for icon. @since 2.27
 * @property {string} type Node type, used with tree.types map. @since 2.27
 */
function FancytreeNode(parent, obj){
	var i, l, name, cl;

	this.parent = parent;
	this.tree = parent.tree;
	this.ul = null;
	this.li = null;  // <li id='key' ftnode=this> tag
	this.statusNodeType = null; // if this is a temp. node to display the status of its parent
	this._isLoading = false;    // if this node itself is loading
	this._error = null;         // {message: '...'} if a load error occurred
	this.data = {};

	// TODO: merge this code with node.toDict()
	// copy attributes from obj object
	for(i=0, l=NODE_ATTRS.length; i<l; i++){
		name = NODE_ATTRS[i];
		this[name] = obj[name];
	}
	// unselectableIgnore and unselectableStatus imply unselectable
	if( this.unselectableIgnore != null || this.unselectableStatus != null ) {
		this.unselectable = true;
	}
	if( obj.hideCheckbox ) {
		$.error("'hideCheckbox' node option was removed in v2.23.0: use 'checkbox: false'");
	}
	// node.data += obj.data
	if(obj.data){
		$.extend(this.data, obj.data);
	}
	// Copy all other attributes to this.data.NAME
	for(name in obj){
		if(!NODE_ATTR_MAP[name] && !$.isFunction(obj[name]) && !NONE_NODE_DATA_MAP[name]){
			// node.data.NAME = obj.NAME
			this.data[name] = obj[name];
		}
	}

	// Fix missing key
	if( this.key == null ){ // test for null OR undefined
		if( this.tree.options.defaultKey ) {
			this.key = this.tree.options.defaultKey(this);
			_assert(this.key, "defaultKey() must return a unique key");
		} else {
			this.key = "_" + (FT._nextNodeKey++);
		}
	} else {
		this.key = "" + this.key; // Convert to string (#217)
	}

	// Fix tree.activeNode
	// TODO: not elegant: we use obj.active as marker to set tree.activeNode
	// when loading from a dictionary.
	if(obj.active){
		_assert(this.tree.activeNode === null, "only one active node allowed");
		this.tree.activeNode = this;
	}
	if( obj.selected ){ // #186
		this.tree.lastSelectedNode = this;
	}
	// TODO: handle obj.focus = true

	// Create child nodes
	cl = obj.children;
	if( cl ){
		if( cl.length ){
			this._setChildren(cl);
		} else {
			// if an empty array was passed for a lazy node, keep it, in order to mark it 'loaded'
			this.children = this.lazy ? [] : null;
		}
	} else {
		this.children = null;
	}
	// Add to key/ref map (except for root node)
//	if( parent ) {
	this.tree._callHook("treeRegisterNode", this.tree, true, this);
//	}
}


FancytreeNode.prototype = /** @lends FancytreeNode# */{
	/* Return the direct child FancytreeNode with a given key, index. */
	_findDirectChild: function(ptr){
		var i, l,
			cl = this.children;

		if(cl){
			if(typeof ptr === "string"){
				for(i=0, l=cl.length; i<l; i++){
					if(cl[i].key === ptr){
						return cl[i];
					}
				}
			}else if(typeof ptr === "number"){
				return this.children[ptr];
			}else if(ptr.parent === this){
				return ptr;
			}
		}
		return null;
	},
	// TODO: activate()
	// TODO: activateSilently()
	/* Internal helper called in recursive addChildren sequence.*/
	_setChildren: function(children){
		_assert(children && (!this.children || this.children.length === 0), "only init supported");
		this.children = [];
		for(var i=0, l=children.length; i<l; i++){
			this.children.push(new FancytreeNode(this, children[i]));
		}
	},
	/**
	 * Append (or insert) a list of child nodes.
	 *
	 * @param {NodeData[]} children array of child node definitions (also single child accepted)
	 * @param {FancytreeNode | string | Integer} [insertBefore] child node (or key or index of such).
	 *     If omitted, the new children are appended.
	 * @returns {FancytreeNode} first child added
	 *
	 * @see FancytreeNode#applyPatch
	 */
	addChildren: function(children, insertBefore){
		var i, l, pos,
			origFirstChild = this.getFirstChild(),
			origLastChild = this.getLastChild(),
			firstNode = null,
			nodeList = [];

		if($.isPlainObject(children) ){
			children = [children];
		}
		if(!this.children){
			this.children = [];
		}
		for(i=0, l=children.length; i<l; i++){
			nodeList.push(new FancytreeNode(this, children[i]));
		}
		firstNode = nodeList[0];
		if(insertBefore == null){
			this.children = this.children.concat(nodeList);
		}else{
			// Returns null if insertBefore is not a direct child:
			insertBefore = this._findDirectChild(insertBefore);
			pos = $.inArray(insertBefore, this.children);
			_assert(pos >= 0, "insertBefore must be an existing child");
			// insert nodeList after children[pos]
			this.children.splice.apply(this.children, [pos, 0].concat(nodeList));
		}
		if ( origFirstChild && !insertBefore ) {
			// #708: Fast path -- don't render every child of root, just the new ones!
			// #723, #729: but only if it's appended to an existing child list
			for(i=0, l=nodeList.length; i<l; i++) {
				nodeList[i].render();   // New nodes were never rendered before
			}
			// Adjust classes where status may have changed
			// Has a first child
			if (origFirstChild !== this.getFirstChild()) {
				// Different first child -- recompute classes
				origFirstChild.renderStatus();
			}
			if (origLastChild !== this.getLastChild()) {
				// Different last child -- recompute classes
				origLastChild.renderStatus();
			}
		} else if( !this.parent || this.parent.ul || this.tr ){
			// render if the parent was rendered (or this is a root node)
			this.render();
		}
		if( this.tree.options.selectMode === 3 ){
			this.fixSelection3FromEndNodes();
		}
		this.triggerModifyChild("add", nodeList.length === 1 ? nodeList[0] : null);
		return firstNode;
	},
	/**
	 * Add class to node's span tag and to .extraClasses.
	 *
	 * @param {string} className class name
	 *
	 * @since 2.17
	 */
	addClass: function(className){
		return this.toggleClass(className, true);
	},
	/**
	 * Append or prepend a node, or append a child node.
	 *
	 * This a convenience function that calls addChildren()
	 *
	 * @param {NodeData} node node definition
	 * @param {string} [mode=child] 'before', 'after', 'firstChild', or 'child' ('over' is a synonym for 'child')
	 * @returns {FancytreeNode} new node
	 */
	addNode: function(node, mode){
		if(mode === undefined || mode === "over"){
			mode = "child";
		}
		switch(mode){
		case "after":
			return this.getParent().addChildren(node, this.getNextSibling());
		case "before":
			return this.getParent().addChildren(node, this);
		case "firstChild":
			// Insert before the first child if any
			var insertBefore = (this.children ? this.children[0] : null);
			return this.addChildren(node, insertBefore);
		case "child":
		case "over":
			return this.addChildren(node);
		}
		_assert(false, "Invalid mode: " + mode);
	},
	/**Add child status nodes that indicate 'More...', etc.
	 *
	 * This also maintains the node's `partload` property.
	 * @param {boolean|object} node optional node definition. Pass `false` to remove all paging nodes.
	 * @param {string} [mode='child'] 'child'|firstChild'
	 * @since 2.15
	 */
	addPagingNode: function(node, mode){
		var i, n;

		mode = mode || "child";
		if( node === false ) {
			for(i=this.children.length-1; i >= 0; i--) {
				n = this.children[i];
				if( n.statusNodeType === "paging" ) {
					this.removeChild(n);
				}
			}
			this.partload = false;
			return;
		}
		node = $.extend({
			title: this.tree.options.strings.moreData,
			statusNodeType: "paging",
			icon: false
		}, node);
		this.partload = true;
		return this.addNode(node, mode);
	},
	/**
	 * Append new node after this.
	 *
	 * This a convenience function that calls addNode(node, 'after')
	 *
	 * @param {NodeData} node node definition
	 * @returns {FancytreeNode} new node
	 */
	appendSibling: function(node){
		return this.addNode(node, "after");
	},
	/**
	 * Modify existing child nodes.
	 *
	 * @param {NodePatch} patch
	 * @returns {$.Promise}
	 * @see FancytreeNode#addChildren
	 */
	applyPatch: function(patch) {
		// patch [key, null] means 'remove'
		if(patch === null){
			this.remove();
			return _getResolvedPromise(this);
		}
		// TODO: make sure that root node is not collapsed or modified
		// copy (most) attributes to node.ATTR or node.data.ATTR
		var name, promise, v,
			IGNORE_MAP = { children: true, expanded: true, parent: true }; // TODO: should be global

		for(name in patch){
			v = patch[name];
			if( !IGNORE_MAP[name] && !$.isFunction(v)){
				if(NODE_ATTR_MAP[name]){
					this[name] = v;
				}else{
					this.data[name] = v;
				}
			}
		}
		// Remove and/or create children
		if(patch.hasOwnProperty("children")){
			this.removeChildren();
			if(patch.children){ // only if not null and not empty list
				// TODO: addChildren instead?
				this._setChildren(patch.children);
			}
			// TODO: how can we APPEND or INSERT child nodes?
		}
		if(this.isVisible()){
			this.renderTitle();
			this.renderStatus();
		}
		// Expand collapse (final step, since this may be async)
		if(patch.hasOwnProperty("expanded")){
			promise = this.setExpanded(patch.expanded);
		}else{
			promise = _getResolvedPromise(this);
		}
		return promise;
	},
	/** Collapse all sibling nodes.
	 * @returns {$.Promise}
	 */
	collapseSiblings: function() {
		return this.tree._callHook("nodeCollapseSiblings", this);
	},
	/** Copy this node as sibling or child of `node`.
	 *
	 * @param {FancytreeNode} node source node
	 * @param {string} [mode=child] 'before' | 'after' | 'child'
	 * @param {Function} [map] callback function(NodeData) that could modify the new node
	 * @returns {FancytreeNode} new
	 */
	copyTo: function(node, mode, map) {
		return node.addNode(this.toDict(true, map), mode);
	},
	/** Count direct and indirect children.
	 *
	 * @param {boolean} [deep=true] pass 'false' to only count direct children
	 * @returns {int} number of child nodes
	 */
	countChildren: function(deep) {
		var cl = this.children, i, l, n;
		if( !cl ){
			return 0;
		}
		n = cl.length;
		if(deep !== false){
			for(i=0, l=n; i<l; i++){
				n += cl[i].countChildren();
			}
		}
		return n;
	},
	// TODO: deactivate()
	/** Write to browser console if debugLevel >= 4 (prepending node info)
	 *
	 * @param {*} msg string or object or array of such
	 */
	debug: function(msg){
		if( this.tree.options.debugLevel >= 4 ) {
			Array.prototype.unshift.call(arguments, this.toString());
			consoleApply("log", arguments);
		}
	},
	/** Deprecated.
	 * @deprecated since 2014-02-16. Use resetLazy() instead.
	 */
	discard: function(){
		this.warn("FancytreeNode.discard() is deprecated since 2014-02-16. Use .resetLazy() instead.");
		return this.resetLazy();
	},
	/** Remove DOM elements for all descendents. May be called on .collapse event
	 * to keep the DOM small.
	 * @param {boolean} [includeSelf=false]
	 */
	discardMarkup: function(includeSelf){
		var fn = includeSelf ? "nodeRemoveMarkup" : "nodeRemoveChildMarkup";
		this.tree._callHook(fn, this);
	},
	/** Write error to browser console if debugLevel >= 1 (prepending tree info)
	*
	* @param {*} msg string or object or array of such
	*/
	error: function(msg){
		if( this.options.debugLevel >= 1 ) {
			Array.prototype.unshift.call(arguments, this.toString());
			consoleApply("error", arguments);
		}
	},
	/**Find all nodes that match condition (excluding self).
	 *
	 * @param {string | function(node)} match title string to search for, or a
	 *     callback function that returns `true` if a node is matched.
	 * @returns {FancytreeNode[]} array of nodes (may be empty)
	 */
	findAll: function(match) {
		match = $.isFunction(match) ? match : _makeNodeTitleMatcher(match);
		var res = [];
		this.visit(function(n){
			if(match(n)){
				res.push(n);
			}
		});
		return res;
	},
	/**Find first node that matches condition (excluding self).
	 *
	 * @param {string | function(node)} match title string to search for, or a
	 *     callback function that returns `true` if a node is matched.
	 * @returns {FancytreeNode} matching node or null
	 * @see FancytreeNode#findAll
	 */
	findFirst: function(match) {
		match = $.isFunction(match) ? match : _makeNodeTitleMatcher(match);
		var res = null;
		this.visit(function(n){
			if(match(n)){
				res = n;
				return false;
			}
		});
		return res;
	},
	/* Apply selection state (internal use only) */
	_changeSelectStatusAttrs: function(state) {
		var changed = false,
			opts = this.tree.options,
			unselectable = FT.evalOption("unselectable", this, this, opts, false),
			unselectableStatus = FT.evalOption("unselectableStatus", this, this, opts, undefined);

		if( unselectable && unselectableStatus != null ) {
			state = unselectableStatus;
		}
		switch(state){
		case false:
			changed = ( this.selected || this.partsel );
			this.selected = false;
			this.partsel = false;
			break;
		case true:
			changed = ( !this.selected || !this.partsel );
			this.selected = true;
			this.partsel = true;
			break;
		case undefined:
			changed = ( this.selected || !this.partsel );
			this.selected = false;
			this.partsel = true;
			break;
		default:
			_assert(false, "invalid state: " + state);
		}
		// this.debug("fixSelection3AfterLoad() _changeSelectStatusAttrs()", state, changed);
		if( changed ){
			this.renderStatus();
		}
		return changed;
	},
	/**
	 * Fix selection status, after this node was (de)selected in multi-hier mode.
	 * This includes (de)selecting all children.
	 */
	fixSelection3AfterClick: function(callOpts) {
		var flag = this.isSelected();

//		this.debug("fixSelection3AfterClick()");

		this.visit(function(node){
			node._changeSelectStatusAttrs(flag);
		});
		this.fixSelection3FromEndNodes(callOpts);
	},
	/**
	 * Fix selection status for multi-hier mode.
	 * Only end-nodes are considered to update the descendants branch and parents.
	 * Should be called after this node has loaded new children or after
	 * children have been modified using the API.
	 */
	fixSelection3FromEndNodes: function(callOpts) {
		var opts = this.tree.options;

//		this.debug("fixSelection3FromEndNodes()");
		_assert(opts.selectMode === 3, "expected selectMode 3");

		// Visit all end nodes and adjust their parent's `selected` and `partsel`
		// attributes. Return selection state true, false, or undefined.
		function _walk(node){
			var i, l, child, s, state, allSelected, someSelected, unselIgnore, unselState,
				children = node.children;

			if( children && children.length ){
				// check all children recursively
				allSelected = true;
				someSelected = false;

				for( i=0, l=children.length; i<l; i++ ){
					child = children[i];
					// the selection state of a node is not relevant; we need the end-nodes
					s = _walk(child);
					// if( !child.unselectableIgnore ) {
					unselIgnore = FT.evalOption("unselectableIgnore", child, child, opts, false);
					if( !unselIgnore ) {
						if( s !== false ) {
							someSelected = true;
						}
						if( s !== true ) {
							allSelected = false;
						}
					}
				}
				state = allSelected ? true : (someSelected ? undefined : false);
			}else{
				// This is an end-node: simply report the status
				unselState = FT.evalOption("unselectableStatus", node, node, opts, undefined);
				state = ( unselState == null ) ? !!node.selected : !!unselState;
			}
			node._changeSelectStatusAttrs(state);
			return state;
		}
		_walk(this);

		// Update parent's state
		this.visitParents(function(node){
			var i, l, child, state, unselIgnore, unselState,
				children = node.children,
				allSelected = true,
				someSelected = false;

			for( i=0, l=children.length; i<l; i++ ){
				child = children[i];
				unselIgnore = FT.evalOption("unselectableIgnore", child, child, opts, false);
				if( !unselIgnore ) {
					unselState = FT.evalOption("unselectableStatus", child,  child, opts, undefined);
					state = ( unselState == null ) ? !!child.selected : !!unselState;
					// When fixing the parents, we trust the sibling status (i.e.
					// we don't recurse)
					if( state || child.partsel ) {
						someSelected = true;
					}
					if( !state ) {
						allSelected = false;
					}
				}
			}
			state = allSelected ? true : (someSelected ? undefined : false);
			node._changeSelectStatusAttrs(state);
		});
	},
	// TODO: focus()
	/**
	 * Update node data. If dict contains 'children', then also replace
	 * the hole sub tree.
	 * @param {NodeData} dict
	 *
	 * @see FancytreeNode#addChildren
	 * @see FancytreeNode#applyPatch
	 */
	fromDict: function(dict) {
		// copy all other attributes to this.data.xxx
		for(var name in dict){
			if(NODE_ATTR_MAP[name]){
				// node.NAME = dict.NAME
				this[name] = dict[name];
			}else if(name === "data"){
				// node.data += dict.data
				$.extend(this.data, dict.data);
			}else if(!$.isFunction(dict[name]) && !NONE_NODE_DATA_MAP[name]){
				// node.data.NAME = dict.NAME
				this.data[name] = dict[name];
			}
		}
		if(dict.children){
			// recursively set children and render
			this.removeChildren();
			this.addChildren(dict.children);
		}
		this.renderTitle();
/*
		var children = dict.children;
		if(children === undefined){
			this.data = $.extend(this.data, dict);
			this.render();
			return;
		}
		dict = $.extend({}, dict);
		dict.children = undefined;
		this.data = $.extend(this.data, dict);
		this.removeChildren();
		this.addChild(children);
*/
	},
	/** Return the list of child nodes (undefined for unexpanded lazy nodes).
	 * @returns {FancytreeNode[] | undefined}
	 */
	getChildren: function() {
		if(this.hasChildren() === undefined){ // TODO: only required for lazy nodes?
			return undefined; // Lazy node: unloaded, currently loading, or load error
		}
		return this.children;
	},
	/** Return the first child node or null.
	 * @returns {FancytreeNode | null}
	 */
	getFirstChild: function() {
		return this.children ? this.children[0] : null;
	},
	/** Return the 0-based child index.
	 * @returns {int}
	 */
	getIndex: function() {
//		return this.parent.children.indexOf(this);
		return $.inArray(this, this.parent.children); // indexOf doesn't work in IE7
	},
	/** Return the hierarchical child index (1-based, e.g. '3.2.4').
	 * @param {string} [separator="."]
	 * @param {int} [digits=1]
	 * @returns {string}
	 */
	getIndexHier: function(separator, digits) {
		separator = separator || ".";
		var s,
			res = [];
		$.each(this.getParentList(false, true), function(i, o){
			s = "" + (o.getIndex() + 1);
			if( digits ){
				// prepend leading zeroes
				s = ("0000000" + s).substr(-digits);
			}
			res.push(s);
		});
		return res.join(separator);
	},
	/** Return the parent keys separated by options.keyPathSeparator, e.g. "id_1/id_17/id_32".
	 * @param {boolean} [excludeSelf=false]
	 * @returns {string}
	 */
	getKeyPath: function(excludeSelf) {
		var path = [],
			sep = this.tree.options.keyPathSeparator;
		this.visitParents(function(n){
			if(n.parent){
				path.unshift(n.key);
			}
		}, !excludeSelf);
		return sep + path.join(sep);
	},
	/** Return the last child of this node or null.
	 * @returns {FancytreeNode | null}
	 */
	getLastChild: function() {
		return this.children ? this.children[this.children.length - 1] : null;
	},
	/** Return node depth. 0: System root node, 1: visible top-level node, 2: first sub-level, ... .
	 * @returns {int}
	 */
	getLevel: function() {
		var level = 0,
			dtn = this.parent;
		while( dtn ) {
			level++;
			dtn = dtn.parent;
		}
		return level;
	},
	/** Return the successor node (under the same parent) or null.
	 * @returns {FancytreeNode | null}
	 */
	getNextSibling: function() {
		// TODO: use indexOf, if available: (not in IE6)
		if( this.parent ){
			var i, l,
				ac = this.parent.children;

			for(i=0, l=ac.length-1; i<l; i++){ // up to length-2, so next(last) = null
				if( ac[i] === this ){
					return ac[i+1];
				}
			}
		}
		return null;
	},
	/** Return the parent node (null for the system root node).
	 * @returns {FancytreeNode | null}
	 */
	getParent: function() {
		// TODO: return null for top-level nodes?
		return this.parent;
	},
	/** Return an array of all parent nodes (top-down).
	 * @param {boolean} [includeRoot=false] Include the invisible system root node.
	 * @param {boolean} [includeSelf=false] Include the node itself.
	 * @returns {FancytreeNode[]}
	 */
	getParentList: function(includeRoot, includeSelf) {
		var l = [],
			dtn = includeSelf ? this : this.parent;
		while( dtn ) {
			if( includeRoot || dtn.parent ){
				l.unshift(dtn);
			}
			dtn = dtn.parent;
		}
		return l;
	},
	/** Return the predecessor node (under the same parent) or null.
	 * @returns {FancytreeNode | null}
	 */
	getPrevSibling: function() {
		if( this.parent ){
			var i, l,
				ac = this.parent.children;

			for(i=1, l=ac.length; i<l; i++){ // start with 1, so prev(first) = null
				if( ac[i] === this ){
					return ac[i-1];
				}
			}
		}
		return null;
	},
	/**
	 * Return an array of selected descendant nodes.
	 * @param {boolean} [stopOnParents=false] only return the topmost selected
	 *     node (useful with selectMode 3)
	 * @returns {FancytreeNode[]}
	 */
	getSelectedNodes: function(stopOnParents) {
		var nodeList = [];
		this.visit(function(node){
			if( node.selected ) {
				nodeList.push(node);
				if( stopOnParents === true ){
					return "skip"; // stop processing this branch
				}
			}
		});
		return nodeList;
	},
	/** Return true if node has children. Return undefined if not sure, i.e. the node is lazy and not yet loaded).
	 * @returns {boolean | undefined}
	 */
	hasChildren: function() {
		if(this.lazy){
			if(this.children == null ){
				// null or undefined: Not yet loaded
				return undefined;
			}else if(this.children.length === 0){
				// Loaded, but response was empty
				return false;
			}else if(this.children.length === 1 && this.children[0].isStatusNode() ){
				// Currently loading or load error
				return undefined;
			}
			return true;
		}
		return !!( this.children && this.children.length );
	},
	/** Return true if node has keyboard focus.
	 * @returns {boolean}
	 */
	hasFocus: function() {
		return (this.tree.hasFocus() && this.tree.focusNode === this);
	},
	/** Write to browser console if debugLevel >= 3 (prepending node info)
	 *
	 * @param {*} msg string or object or array of such
	 */
	info: function(msg){
		if( this.tree.options.debugLevel >= 3 ) {
			Array.prototype.unshift.call(arguments, this.toString());
			consoleApply("info", arguments);
		}
	},
	/** Return true if node is active (see also FancytreeNode#isSelected).
	 * @returns {boolean}
	 */
	isActive: function() {
		return (this.tree.activeNode === this);
	},
	/** Return true if node is vertically below `otherNode`, i.e. rendered in a subsequent row.
	 * @param {FancytreeNode} otherNode
	 * @returns {boolean}
	 * @since 2.28
	 */
	isBelowOf: function(otherNode) {
		return (this.getIndexHier(".", 5) > otherNode.getIndexHier(".", 5));
	},
	/** Return true if node is a direct child of otherNode.
	 * @param {FancytreeNode} otherNode
	 * @returns {boolean}
	 */
	isChildOf: function(otherNode) {
		return (this.parent && this.parent === otherNode);
	},
	/** Return true, if node is a direct or indirect sub node of otherNode.
	 * @param {FancytreeNode} otherNode
	 * @returns {boolean}
	 */
	isDescendantOf: function(otherNode) {
		if(!otherNode || otherNode.tree !== this.tree){
			return false;
		}
		var p = this.parent;
		while( p ) {
			if( p === otherNode ){
				return true;
			}
			if( p === p.parent ) { $.error("Recursive parent link: " + p); }
			p = p.parent;
		}
		return false;
	},
	/** Return true if node is expanded.
	 * @returns {boolean}
	 */
	isExpanded: function() {
		return !!this.expanded;
	},
	/** Return true if node is the first node of its parent's children.
	 * @returns {boolean}
	 */
	isFirstSibling: function() {
		var p = this.parent;
		return !p || p.children[0] === this;
	},
	/** Return true if node is a folder, i.e. has the node.folder attribute set.
	 * @returns {boolean}
	 */
	isFolder: function() {
		return !!this.folder;
	},
	/** Return true if node is the last node of its parent's children.
	 * @returns {boolean}
	 */
	isLastSibling: function() {
		var p = this.parent;
		return !p || p.children[p.children.length-1] === this;
	},
	/** Return true if node is lazy (even if data was already loaded)
	 * @returns {boolean}
	 */
	isLazy: function() {
		return !!this.lazy;
	},
	/** Return true if node is lazy and loaded. For non-lazy nodes always return true.
	 * @returns {boolean}
	 */
	isLoaded: function() {
		return !this.lazy || this.hasChildren() !== undefined; // Also checks if the only child is a status node
	},
	/** Return true if children are currently beeing loaded, i.e. a Ajax request is pending.
	 * @returns {boolean}
	 */
	isLoading: function() {
		return !!this._isLoading;
	},
	/*
	 * @deprecated since v2.4.0:  Use isRootNode() instead
	 */
	isRoot: function() {
		return this.isRootNode();
	},
	/** Return true if node is partially selected (tri-state).
	 * @returns {boolean}
	 * @since 2.23
	 */
	isPartsel: function() {
		return !this.selected && !!this.partsel;
	},
	/** (experimental) Return true if this is partially loaded.
	 * @returns {boolean}
	 * @since 2.15
	 */
	isPartload: function() {
		return !!this.partload;
	},
	/** Return true if this is the (invisible) system root node.
	 * @returns {boolean}
	 * @since 2.4
	 */
	isRootNode: function() {
		return (this.tree.rootNode === this);
	},
	/** Return true if node is selected, i.e. has a checkmark set (see also FancytreeNode#isActive).
	 * @returns {boolean}
	 */
	isSelected: function() {
		return !!this.selected;
	},
	/** Return true if this node is a temporarily generated system node like
	 * 'loading', 'paging', or 'error' (node.statusNodeType contains the type).
	 * @returns {boolean}
	 */
	isStatusNode: function() {
		return !!this.statusNodeType;
	},
	/** Return true if this node is a status node of type 'paging'.
	 * @returns {boolean}
	 * @since 2.15
	 */
	isPagingNode: function() {
		return this.statusNodeType === "paging";
	},
	/** Return true if this a top level node, i.e. a direct child of the (invisible) system root node.
	 * @returns {boolean}
	 * @since 2.4
	 */
	isTopLevel: function() {
		return (this.tree.rootNode === this.parent);
	},
	/** Return true if node is lazy and not yet loaded. For non-lazy nodes always return false.
	 * @returns {boolean}
	 */
	isUndefined: function() {
		return this.hasChildren() === undefined; // also checks if the only child is a status node
	},
	/** Return true if all parent nodes are expanded. Note: this does not check
	 * whether the node is scrolled into the visible part of the screen.
	 * @returns {boolean}
	 */
	isVisible: function() {
		var i, l,
			parents = this.getParentList(false, false);

		for(i=0, l=parents.length; i<l; i++){
			if( ! parents[i].expanded ){ return false; }
		}
		return true;
	},
	/** Deprecated.
	 * @deprecated since 2014-02-16: use load() instead.
	 */
	lazyLoad: function(discard) {
		this.warn("FancytreeNode.lazyLoad() is deprecated since 2014-02-16. Use .load() instead.");
		return this.load(discard);
	},
	/**
	 * Load all children of a lazy node if neccessary. The <i>expanded</i> state is maintained.
	 * @param {boolean} [forceReload=false] Pass true to discard any existing nodes before. Otherwise this method does nothing if the node was already loaded.
	 * @returns {$.Promise}
	 */
	load: function(forceReload) {
		var res, source,
			that = this,
			wasExpanded = this.isExpanded();

		_assert( this.isLazy(), "load() requires a lazy node" );
		// _assert( forceReload || this.isUndefined(), "Pass forceReload=true to re-load a lazy node" );
		if( !forceReload && !this.isUndefined() ) {
			return _getResolvedPromise(this);
		}
		if( this.isLoaded() ){
			this.resetLazy(); // also collapses
		}
		// This method is also called by setExpanded() and loadKeyPath(), so we
		// have to avoid recursion.
		source = this.tree._triggerNodeEvent("lazyLoad", this);
		if( source === false ) { // #69
			return _getResolvedPromise(this);
		}
		_assert(typeof source !== "boolean", "lazyLoad event must return source in data.result");
		res = this.tree._callHook("nodeLoadChildren", this, source);
		if( wasExpanded ) {
			this.expanded = true;
			res.always(function(){
				that.render();
			});
		} else {
			res.always(function(){
				that.renderStatus();  // fix expander icon to 'loaded'
			});
		}
		return res;
	},
	/** Expand all parents and optionally scroll into visible area as neccessary.
	 * Promise is resolved, when lazy loading and animations are done.
	 * @param {object} [opts] passed to `setExpanded()`.
	 *     Defaults to {noAnimation: false, noEvents: false, scrollIntoView: true}
	 * @returns {$.Promise}
	 */
	makeVisible: function(opts) {
		var i,
			that = this,
			deferreds = [],
			dfd = new $.Deferred(),
			parents = this.getParentList(false, false),
			len = parents.length,
			effects = !(opts && opts.noAnimation === true),
			scroll = !(opts && opts.scrollIntoView === false);

		// Expand bottom-up, so only the top node is animated
		for(i = len - 1; i >= 0; i--){
			// that.debug("pushexpand" + parents[i]);
			deferreds.push(parents[i].setExpanded(true, opts));
		}
		$.when.apply($, deferreds).done(function(){
			// All expands have finished
			// that.debug("expand DONE", scroll);
			if( scroll ){
				that.scrollIntoView(effects).done(function(){
					// that.debug("scroll DONE");
					dfd.resolve();
				});
			} else {
				dfd.resolve();
			}
		});
		return dfd.promise();
	},
	/** Move this node to targetNode.
	 *  @param {FancytreeNode} targetNode
	 *  @param {string} mode <pre>
	 *      'child': append this node as last child of targetNode.
	 *               This is the default. To be compatble with the D'n'd
	 *               hitMode, we also accept 'over'.
	 *      'firstChild': add this node as first child of targetNode.
	 *      'before': add this node as sibling before targetNode.
	 *      'after': add this node as sibling after targetNode.</pre>
	 *  @param {function} [map] optional callback(FancytreeNode) to allow modifcations
	 */
	moveTo: function(targetNode, mode, map) {
		if(mode === undefined || mode === "over"){
			mode = "child";
		} else if ( mode === "firstChild" ) {
			if( targetNode.children && targetNode.children.length ) {
				mode = "before";
				targetNode = targetNode.children[0];
			} else {
				mode = "child";
			}
		}
		var pos,
			prevParent = this.parent,
			targetParent = (mode === "child") ? targetNode : targetNode.parent;

		if(this === targetNode){
			return;
		}else if( !this.parent  ){
			$.error("Cannot move system root");
		}else if( targetParent.isDescendantOf(this) ){
			$.error("Cannot move a node to its own descendant");
		}
		if( targetParent !== prevParent ) {
			prevParent.triggerModifyChild("remove", this);
		}
		// Unlink this node from current parent
		if( this.parent.children.length === 1 ) {
			if( this.parent === targetParent ){
				return; // #258
			}
			this.parent.children = this.parent.lazy ? [] : null;
			this.parent.expanded = false;
		} else {
			pos = $.inArray(this, this.parent.children);
			_assert(pos >= 0, "invalid source parent");
			this.parent.children.splice(pos, 1);
		}
		// Remove from source DOM parent
//		if(this.parent.ul){
//			this.parent.ul.removeChild(this.li);
//		}

		// Insert this node to target parent's child list
		this.parent = targetParent;
		if( targetParent.hasChildren() ) {
			switch(mode) {
			case "child":
				// Append to existing target children
				targetParent.children.push(this);
				break;
			case "before":
				// Insert this node before target node
				pos = $.inArray(targetNode, targetParent.children);
				_assert(pos >= 0, "invalid target parent");
				targetParent.children.splice(pos, 0, this);
				break;
			case "after":
				// Insert this node after target node
				pos = $.inArray(targetNode, targetParent.children);
				_assert(pos >= 0, "invalid target parent");
				targetParent.children.splice(pos+1, 0, this);
				break;
			default:
				$.error("Invalid mode " + mode);
			}
		} else {
			targetParent.children = [ this ];
		}
		// Parent has no <ul> tag yet:
//		if( !targetParent.ul ) {
//			// This is the parent's first child: create UL tag
//			// (Hidden, because it will be
//			targetParent.ul = document.createElement("ul");
//			targetParent.ul.style.display = "none";
//			targetParent.li.appendChild(targetParent.ul);
//		}
//		// Issue 319: Add to target DOM parent (only if node was already rendered(expanded))
//		if(this.li){
//			targetParent.ul.appendChild(this.li);
//		}^

		// Let caller modify the nodes
		if( map ){
			targetNode.visit(map, true);
		}
		if( targetParent === prevParent ) {
			targetParent.triggerModifyChild("move", this);
		} else {
			// prevParent.triggerModifyChild("remove", this);
			targetParent.triggerModifyChild("add", this);
		}
		// Handle cross-tree moves
		if( this.tree !== targetNode.tree ) {
			// Fix node.tree for all source nodes
//			_assert(false, "Cross-tree move is not yet implemented.");
			this.warn("Cross-tree moveTo is experimantal!");
			this.visit(function(n){
				// TODO: fix selection state and activation, ...
				n.tree = targetNode.tree;
			}, true);
		}

		// A collaposed node won't re-render children, so we have to remove it manually
		// if( !targetParent.expanded ){
		//   prevParent.ul.removeChild(this.li);
		// }

		// Update HTML markup
		if( !prevParent.isDescendantOf(targetParent)) {
			prevParent.render();
		}
		if( !targetParent.isDescendantOf(prevParent) && targetParent !== prevParent) {
			targetParent.render();
		}
		// TODO: fix selection state
		// TODO: fix active state

/*
		var tree = this.tree;
		var opts = tree.options;
		var pers = tree.persistence;


		// Always expand, if it's below minExpandLevel
//		tree.logDebug ("%s._addChildNode(%o), l=%o", this, ftnode, ftnode.getLevel());
		if ( opts.minExpandLevel >= ftnode.getLevel() ) {
//			tree.logDebug ("Force expand for %o", ftnode);
			this.bExpanded = true;
		}

		// In multi-hier mode, update the parents selection state
		// DT issue #82: only if not initializing, because the children may not exist yet
//		if( !ftnode.data.isStatusNode() && opts.selectMode==3 && !isInitializing )
//			ftnode._fixSelectionState();

		// In multi-hier mode, update the parents selection state
		if( ftnode.bSelected && opts.selectMode==3 ) {
			var p = this;
			while( p ) {
				if( !p.hasSubSel )
					p._setSubSel(true);
				p = p.parent;
			}
		}
		// render this node and the new child
		if ( tree.bEnableUpdate )
			this.render();

		return ftnode;

*/
	},
	/** Set focus relative to this node and optionally activate.
	 *
	 * @param {number} where The keyCode that would normally trigger this move,
	 *		e.g. `$.ui.keyCode.LEFT` would collapse the node if it
	 *      is expanded or move to the parent oterwise.
	 * @param {boolean} [activate=true]
	 * @returns {$.Promise}
	 */
	navigate: function(where, activate) {
		var i, parents, res,
			handled = true,
			KC = $.ui.keyCode,
			sib = null;

		// Navigate to node
		function _goto(n){
			if( n ){
				// setFocus/setActive will scroll later (if autoScroll is specified)
				try { n.makeVisible({scrollIntoView: false}); } catch(e) {} // #272
				// Node may still be hidden by a filter
				if( ! $(n.span).is(":visible") ) {
					n.debug("Navigate: skipping hidden node");
					n.navigate(where, activate);
					return;
				}
				return activate === false ? n.setFocus() : n.setActive();
			}
		}

		switch( where ) {
			case KC.BACKSPACE:
				if( this.parent && this.parent.parent ) {
					res = _goto(this.parent);
				}
				break;
			case KC.HOME:
				this.tree.visit(function(n){  // goto first visible node
					if( $(n.span).is(":visible") ) {
						res = _goto(n);
						return false;
					}
				});
				break;
			case KC.END:
				this.tree.visit(function(n){  // goto last visible node
					if( $(n.span).is(":visible") ) {
						res = n;
					}
				});
				if( res ) {
					res = _goto(res);
				}
				break;
			case KC.LEFT:
				if( this.expanded ) {
					this.setExpanded(false);
					res = _goto(this);
				} else if( this.parent && this.parent.parent ) {
					res = _goto(this.parent);
				}
				break;
			case KC.RIGHT:
				if( !this.expanded && (this.children || this.lazy) ) {
					this.setExpanded();
					res = _goto(this);
				} else if( this.children && this.children.length ) {
					res = _goto(this.children[0]);
				}
				break;
			case KC.UP:
				sib = this.getPrevSibling();
				// #359: skip hidden sibling nodes, preventing a _goto() recursion
				while( sib && !$(sib.span).is(":visible") ) {
					sib = sib.getPrevSibling();
				}
				while( sib && sib.expanded && sib.children && sib.children.length ) {
					sib = sib.children[sib.children.length - 1];
				}
				if( !sib && this.parent && this.parent.parent ){
					sib = this.parent;
				}
				res = _goto(sib);
				break;
			case KC.DOWN:
				if( this.expanded && this.children && this.children.length ) {
					sib = this.children[0];
				} else {
					parents = this.getParentList(false, true);
					for(i=parents.length-1; i>=0; i--) {
						sib = parents[i].getNextSibling();
						// #359: skip hidden sibling nodes, preventing a _goto() recursion
						while( sib && !$(sib.span).is(":visible") ) {
							sib = sib.getNextSibling();
						}
						if( sib ){ break; }
					}
				}
				res = _goto(sib);
				break;
			default:
				handled = false;
		}
		return res || _getResolvedPromise();
	},
	/**
	 * Remove this node (not allowed for system root).
	 */
	remove: function() {
		return this.parent.removeChild(this);
	},
	/**
	 * Remove childNode from list of direct children.
	 * @param {FancytreeNode} childNode
	 */
	removeChild: function(childNode) {
		return this.tree._callHook("nodeRemoveChild", this, childNode);
	},
	/**
	 * Remove all child nodes and descendents. This converts the node into a leaf.<br>
	 * If this was a lazy node, it is still considered 'loaded'; call node.resetLazy()
	 * in order to trigger lazyLoad on next expand.
	 */
	removeChildren: function() {
		return this.tree._callHook("nodeRemoveChildren", this);
	},
	/**
	 * Remove class from node's span tag and .extraClasses.
	 *
	 * @param {string} className class name
	 *
	 * @since 2.17
	 */
	removeClass: function(className){
		return this.toggleClass(className, false);
	},
	/**
	 * This method renders and updates all HTML markup that is required
	 * to display this node in its current state.<br>
	 * Note:
	 * <ul>
	 * <li>It should only be neccessary to call this method after the node object
	 *     was modified by direct access to its properties, because the common
	 *     API methods (node.setTitle(), moveTo(), addChildren(), remove(), ...)
	 *     already handle this.
	 * <li> {@link FancytreeNode#renderTitle} and {@link FancytreeNode#renderStatus}
	 *     are implied. If changes are more local, calling only renderTitle() or
	 *     renderStatus() may be sufficient and faster.
	 * </ul>
	 *
	 * @param {boolean} [force=false] re-render, even if html markup was already created
	 * @param {boolean} [deep=false] also render all descendants, even if parent is collapsed
	 */
	render: function(force, deep) {
		return this.tree._callHook("nodeRender", this, force, deep);
	},
	/** Create HTML markup for the node's outer &lt;span> (expander, checkbox, icon, and title).
	 * Implies {@link FancytreeNode#renderStatus}.
	 * @see Fancytree_Hooks#nodeRenderTitle
	 */
	renderTitle: function() {
		return this.tree._callHook("nodeRenderTitle", this);
	},
	/** Update element's CSS classes according to node state.
	 * @see Fancytree_Hooks#nodeRenderStatus
	 */
	renderStatus: function() {
		return this.tree._callHook("nodeRenderStatus", this);
	},
	/**
	 * (experimental) Replace this node with `source`.
	 * (Currently only available for paging nodes.)
	 * @param {NodeData[]} source List of child node definitions
	 * @since 2.15
	 */
	replaceWith: function(source) {
		var res,
			parent = this.parent,
			pos = $.inArray(this, parent.children),
			that = this;

		_assert( this.isPagingNode(), "replaceWith() currently requires a paging status node" );

		res = this.tree._callHook("nodeLoadChildren", this, source);
		res.done(function(data){
			// New nodes are currently children of `this`.
			var children = that.children;
			// Prepend newly loaded child nodes to `this`
			// Move new children after self
			for( i=0; i<children.length; i++ ) {
				children[i].parent = parent;
			}
			parent.children.splice.apply(parent.children, [pos + 1, 0].concat(children));

			// Remove self
			that.children = null;
			that.remove();
			// Redraw new nodes
			parent.render();
			// TODO: set node.partload = false if this was tha last paging node?
			// parent.addPagingNode(false);
		}).fail(function(){
			that.setExpanded();
		});
		return res;
		// $.error("Not implemented: replaceWith()");
	},
	/**
	 * Remove all children, collapse, and set the lazy-flag, so that the lazyLoad
	 * event is triggered on next expand.
	 */
	resetLazy: function() {
		this.removeChildren();
		this.expanded = false;
		this.lazy = true;
		this.children = undefined;
		this.renderStatus();
	},
	/** Schedule activity for delayed execution (cancel any pending request).
	 *  scheduleAction('cancel') will only cancel a pending request (if any).
	 * @param {string} mode
	 * @param {number} ms
	 */
	scheduleAction: function(mode, ms) {
		if( this.tree.timer ) {
			clearTimeout(this.tree.timer);
//            this.tree.debug("clearTimeout(%o)", this.tree.timer);
		}
		this.tree.timer = null;
		var self = this; // required for closures
		switch (mode) {
		case "cancel":
			// Simply made sure that timer was cleared
			break;
		case "expand":
			this.tree.timer = setTimeout(function(){
				self.tree.debug("setTimeout: trigger expand");
				self.setExpanded(true);
			}, ms);
			break;
		case "activate":
			this.tree.timer = setTimeout(function(){
				self.tree.debug("setTimeout: trigger activate");
				self.setActive(true);
			}, ms);
			break;
		default:
			$.error("Invalid mode " + mode);
		}
//        this.tree.debug("setTimeout(%s, %s): %s", mode, ms, this.tree.timer);
	},
	/**
	 *
	 * @param {boolean | PlainObject} [effects=false] animation options.
	 * @param {object} [options=null] {topNode: null, effects: ..., parent: ...} this node will remain visible in
	 *     any case, even if `this` is outside the scroll pane.
	 * @returns {$.Promise}
	 */
	scrollIntoView: function(effects, options) {
		if( options !== undefined && _isNode(options) ) {
			this.warn("scrollIntoView() with 'topNode' option is deprecated since 2014-05-08. Use 'options.topNode' instead.");
			options = {topNode: options};
		}
		// this.$scrollParent = (this.options.scrollParent === "auto") ? $ul.scrollParent() : $(this.options.scrollParent);
		// this.$scrollParent = this.$scrollParent.length ? this.$scrollParent || this.$container;

		var topNodeY, nodeY, horzScrollbarHeight, containerOffsetTop,
			opts = $.extend({
				effects: (effects === true) ? {duration: 200, queue: false} : effects,
				scrollOfs: this.tree.options.scrollOfs,
				scrollParent: this.tree.options.scrollParent || this.tree.$container,
				topNode: null
			}, options),
			dfd = new $.Deferred(),
			that = this,
			nodeHeight = $(this.span).height(),
			$container = $(opts.scrollParent),
			topOfs = opts.scrollOfs.top || 0,
			bottomOfs = opts.scrollOfs.bottom || 0,
			containerHeight = $container.height(),// - topOfs - bottomOfs,
			scrollTop = $container.scrollTop(),
			$animateTarget = $container,
			isParentWindow = $container[0] === window,
			topNode = opts.topNode || null,
			newScrollTop = null;

		// this.debug("scrollIntoView(), scrollTop=" + scrollTop, opts.scrollOfs);
//		_assert($(this.span).is(":visible"), "scrollIntoView node is invisible"); // otherwise we cannot calc offsets
		if( !$(this.span).is(":visible") ) {
			// We cannot calc offsets for hidden elements
			this.warn("scrollIntoView(): node is invisible.");
			return _getResolvedPromise();
		}
		if( isParentWindow ) {
			nodeY = $(this.span).offset().top;
			topNodeY = (topNode && topNode.span) ? $(topNode.span).offset().top : 0;
			$animateTarget = $("html,body");

		} else {
			_assert($container[0] !== document && $container[0] !== document.body,
				"scrollParent should be a simple element or `window`, not document or body.");

			containerOffsetTop = $container.offset().top,
			nodeY = $(this.span).offset().top - containerOffsetTop + scrollTop; // relative to scroll parent
			topNodeY = topNode ? $(topNode.span).offset().top - containerOffsetTop + scrollTop : 0;
			horzScrollbarHeight = Math.max(0, ($container.innerHeight() - $container[0].clientHeight));
			containerHeight -= horzScrollbarHeight;
		}

		// this.debug("    scrollIntoView(), nodeY=" + nodeY + ", containerHeight=" + containerHeight);
		if( nodeY < (scrollTop + topOfs) ){
			// Node is above visible container area
			newScrollTop = nodeY - topOfs;
			// this.debug("    scrollIntoView(), UPPER newScrollTop=" + newScrollTop);

		}else if((nodeY + nodeHeight) > (scrollTop + containerHeight - bottomOfs)){
			newScrollTop = nodeY + nodeHeight - containerHeight + bottomOfs;
			// this.debug("    scrollIntoView(), LOWER newScrollTop=" + newScrollTop);
			// If a topNode was passed, make sure that it is never scrolled
			// outside the upper border
			if(topNode){
				_assert(topNode.isRootNode() || $(topNode.span).is(":visible"), "topNode must be visible");
				if( topNodeY < newScrollTop ){
					newScrollTop = topNodeY - topOfs;
					// this.debug("    scrollIntoView(), TOP newScrollTop=" + newScrollTop);
				}
			}
		}

		if(newScrollTop !== null){
			// this.debug("    scrollIntoView(), SET newScrollTop=" + newScrollTop);
			if(opts.effects){
				opts.effects.complete = function(){
					dfd.resolveWith(that);
				};
				$animateTarget.stop(true).animate({
					scrollTop: newScrollTop
				}, opts.effects);
			}else{
				$animateTarget[0].scrollTop = newScrollTop;
				dfd.resolveWith(this);
			}
		}else{
			dfd.resolveWith(this);
		}
		return dfd.promise();
	},

	/**Activate this node.
	 * @param {boolean} [flag=true] pass false to deactivate
	 * @param {object} [opts] additional options. Defaults to {noEvents: false, noFocus: false}
	 * @returns {$.Promise}
	 */
	setActive: function(flag, opts){
		return this.tree._callHook("nodeSetActive", this, flag, opts);
	},
	/**Expand or collapse this node. Promise is resolved, when lazy loading and animations are done.
	 * @param {boolean} [flag=true] pass false to collapse
	 * @param {object} [opts] additional options. Defaults to {noAnimation: false, noEvents: false}
	 * @returns {$.Promise}
	 */
	setExpanded: function(flag, opts){
		return this.tree._callHook("nodeSetExpanded", this, flag, opts);
	},
	/**Set keyboard focus to this node.
	 * @param {boolean} [flag=true] pass false to blur
	 * @see Fancytree#setFocus
	 */
	setFocus: function(flag){
		return this.tree._callHook("nodeSetFocus", this, flag);
	},
	/**Select this node, i.e. check the checkbox.
	 * @param {boolean} [flag=true] pass false to deselect
	 * @param {object} [opts] additional options. Defaults to {noEvents: false, p
	 *     propagateDown: null, propagateUp: null, callback: null }
	 */
	setSelected: function(flag, opts){
		return this.tree._callHook("nodeSetSelected", this, flag, opts);
	},
	/**Mark a lazy node as 'error', 'loading', 'nodata', or 'ok'.
	 * @param {string} status 'error'|'empty'|'ok'
	 * @param {string} [message]
	 * @param {string} [details]
	 */
	setStatus: function(status, message, details){
		return this.tree._callHook("nodeSetStatus", this, status, message, details);
	},
	/**Rename this node.
	 * @param {string} title
	 */
	setTitle: function(title){
		this.title = title;
		this.renderTitle();
		this.triggerModify("rename");
	},
	/**Sort child list by title.
	 * @param {function} [cmp] custom compare function(a, b) that returns -1, 0, or 1 (defaults to sort by title).
	 * @param {boolean} [deep=false] pass true to sort all descendant nodes
	 */
	sortChildren: function(cmp, deep) {
		var i,l,
			cl = this.children;

		if( !cl ){
			return;
		}
		cmp = cmp || function(a, b) {
			var x = a.title.toLowerCase(),
				y = b.title.toLowerCase();
			return x === y ? 0 : x > y ? 1 : -1;
			};
		cl.sort(cmp);
		if( deep ){
			for(i=0, l=cl.length; i<l; i++){
				if( cl[i].children ){
					cl[i].sortChildren(cmp, "$norender$");
				}
			}
		}
		if( deep !== "$norender$" ){
			this.render();
		}
		this.triggerModifyChild("sort");
	},
	/** Convert node (or whole branch) into a plain object.
	 *
	 * The result is compatible with node.addChildren().
	 *
	 * @param {boolean} [recursive=false] include child nodes
	 * @param {function} [callback] callback(dict, node) is called for every node, in order to allow modifications
	 * @returns {NodeData}
	 */
	toDict: function(recursive, callback) {
		var i, l, node,
			dict = {},
			self = this;

		$.each(NODE_ATTRS, function(i, a){
			if(self[a] || self[a] === false){
				dict[a] = self[a];
			}
		});
		if(!$.isEmptyObject(this.data)){
			dict.data = $.extend({}, this.data);
			if($.isEmptyObject(dict.data)){
				delete dict.data;
			}
		}
		if( callback ){
			callback(dict, self);
		}
		if( recursive ) {
			if(this.hasChildren()){
				dict.children = [];
				for(i=0, l=this.children.length; i<l; i++ ){
					node = this.children[i];
					if( !node.isStatusNode() ){
						dict.children.push(node.toDict(true, callback));
					}
				}
			}else{
//                dict.children = null;
			}
		}
		return dict;
	},
	/**
	 * Set, clear, or toggle class of node's span tag and .extraClasses.
	 *
	 * @param {string} className class name (separate multiple classes by space)
	 * @param {boolean} [flag] true/false to add/remove class. If omitted, class is toggled.
	 * @returns {boolean} true if a class was added
	 *
	 * @since 2.17
	 */
	toggleClass: function(value, flag){
		var className, hasClass,
			rnotwhite = ( /\S+/g ),
			classNames = value.match( rnotwhite ) || [],
			i = 0,
			wasAdded = false,
			statusElem = this[this.tree.statusClassPropName],
			curClasses = (" " + (this.extraClasses || "") + " ");

		// this.info("toggleClass('" + value + "', " + flag + ")", curClasses);
		// Modify DOM element directly if it already exists
		if( statusElem ) {
			$(statusElem).toggleClass(value, flag);
		}
		// Modify node.extraClasses to make this change persistent
		// Toggle if flag was not passed
		while ( className = classNames[ i++ ] ) {
			hasClass = curClasses.indexOf(" " + className + " ") >= 0;
			flag = (flag === undefined) ? (!hasClass) : !!flag;
			if ( flag ) {
				if( !hasClass ) {
					curClasses += className + " ";
					wasAdded = true;
				}
			} else {
				while ( curClasses.indexOf( " " + className + " " ) > -1 ) {
					curClasses = curClasses.replace( " " + className + " ", " " );
				}
			}
		}
		this.extraClasses = $.trim(curClasses);
		// this.info("-> toggleClass('" + value + "', " + flag + "): '" + this.extraClasses + "'");
		return wasAdded;
	},
	/** Flip expanded status. */
	toggleExpanded: function(){
		return this.tree._callHook("nodeToggleExpanded", this);
	},
	/** Flip selection status. */
	toggleSelected: function(){
		return this.tree._callHook("nodeToggleSelected", this);
	},
	toString: function() {
		return "FancytreeNode@" + this.key + "[title='" + this.title + "']";
		// return "<FancytreeNode(#" + this.key + ", '" + this.title + "')>";
	},
	/**
	 * Trigger `modifyChild` event on a parent to signal that a child was modified.
	 * @param {string} operation Type of change: 'add', 'remove', 'rename', 'move', 'data', ...
	 * @param {FancytreeNode} [childNode]
	 * @param {object} [extra]
	 */
	triggerModifyChild: function(operation, childNode, extra){
		var data,
			modifyChild = this.tree.options.modifyChild;

		if ( modifyChild ){
			if( childNode && childNode.parent !== this ) {
				$.error("childNode " + childNode + " is not a child of " + this);
			}
			data = {
				node: this,
				tree: this.tree,
				operation: operation,
				childNode: childNode || null
			};
			if( extra ) {
				$.extend(data, extra);
			}
			modifyChild({type: "modifyChild"}, data);
		}
	},
	/**
	 * Trigger `modifyChild` event on node.parent(!).
	 * @param {string} operation Type of change: 'add', 'remove', 'rename', 'move', 'data', ...
	 * @param {object} [extra]
	 */
	triggerModify: function(operation, extra){
		this.parent.triggerModifyChild(operation, this, extra);
	},
	/** Call fn(node) for all child nodes in hierarchical order (depth-first).<br>
	 * Stop iteration, if fn() returns false. Skip current branch, if fn() returns "skip".<br>
	 * Return false if iteration was stopped.
	 *
	 * @param {function} fn the callback function.
	 *     Return false to stop iteration, return "skip" to skip this node and
	 *     its children only.
	 * @param {boolean} [includeSelf=false]
	 * @returns {boolean}
	 */
	visit: function(fn, includeSelf) {
		var i, l,
			res = true,
			children = this.children;

		if( includeSelf === true ) {
			res = fn(this);
			if( res === false || res === "skip" ){
				return res;
			}
		}
		if(children){
			for(i=0, l=children.length; i<l; i++){
				res = children[i].visit(fn, true);
				if( res === false ){
					break;
				}
			}
		}
		return res;
	},
	/** Call fn(node) for all child nodes and recursively load lazy children.<br>
	 * <b>Note:</b> If you need this method, you probably should consider to review
	 * your architecture! Recursivley loading nodes is a perfect way for lazy
	 * programmers to flood the server with requests ;-)
	 *
	 * @param {function} [fn] optional callback function.
	 *     Return false to stop iteration, return "skip" to skip this node and
	 *     its children only.
	 * @param {boolean} [includeSelf=false]
	 * @returns {$.Promise}
	 * @since 2.4
	 */
	visitAndLoad: function(fn, includeSelf, _recursion) {
		var dfd, res, loaders,
			node = this;

		// node.debug("visitAndLoad");
		if( fn && includeSelf === true ) {
			res = fn(node);
			if( res === false || res === "skip" ) {
				return _recursion ? res : _getResolvedPromise();
			}
		}
		if( !node.children && !node.lazy ) {
			return _getResolvedPromise();
		}
		dfd = new $.Deferred();
		loaders = [];
		// node.debug("load()...");
		node.load().done(function(){
			// node.debug("load()... done.");
			for(var i=0, l=node.children.length; i<l; i++){
				res = node.children[i].visitAndLoad(fn, true, true);
				if( res === false ) {
					dfd.reject();
					break;
				} else if ( res !== "skip" ) {
					loaders.push(res); // Add promise to the list
				}
			}
			$.when.apply(this, loaders).then(function(){
				dfd.resolve();
			});
		});
		return dfd.promise();
	},
	/** Call fn(node) for all parent nodes, bottom-up, including invisible system root.<br>
	 * Stop iteration, if fn() returns false.<br>
	 * Return false if iteration was stopped.
	 *
	 * @param {function} fn the callback function.
	 *     Return false to stop iteration, return "skip" to skip this node and children only.
	 * @param {boolean} [includeSelf=false]
	 * @returns {boolean}
	 */
	visitParents: function(fn, includeSelf) {
		// Visit parent nodes (bottom up)
		if(includeSelf && fn(this) === false){
			return false;
		}
		var p = this.parent;
		while( p ) {
			if(fn(p) === false){
				return false;
			}
			p = p.parent;
		}
		return true;
	},
	/** Call fn(node) for all sibling nodes.<br>
	 * Stop iteration, if fn() returns false.<br>
	 * Return false if iteration was stopped.
	 *
	 * @param {function} fn the callback function.
	 *     Return false to stop iteration.
	 * @param {boolean} [includeSelf=false]
	 * @returns {boolean}
	 */
	visitSiblings: function(fn, includeSelf) {
		var i, l, n,
			ac = this.parent.children;

		for (i=0, l=ac.length; i<l; i++) {
			n = ac[i];
			if ( includeSelf || n !== this ){
				if( fn(n) === false ) {
					return false;
				}
			}
		}
		return true;
	},
	/** Write warning to browser console if debugLevel >= 2 (prepending node info)
	 *
	 * @param {*} msg string or object or array of such
	 */
	warn: function(msg){
		if( this.tree.options.debugLevel >= 2 ) {
			Array.prototype.unshift.call(arguments, this.toString());
			consoleApply("warn", arguments);
		}
	}
};


/* *****************************************************************************
 * Fancytree
 */
/**
 * Construct a new tree object.
 *
 * @class Fancytree
 * @classdesc The controller behind a fancytree.
 * This class also contains 'hook methods': see {@link Fancytree_Hooks}.
 *
 * @param {Widget} widget
 *
 * @property {string} _id Automatically generated unique tree instance ID, e.g. "1".
 * @property {string} _ns Automatically generated unique tree namespace, e.g. ".fancytree-1".
 * @property {FancytreeNode} activeNode Currently active node or null.
 * @property {string} ariaPropName Property name of FancytreeNode that contains the element which will receive the aria attributes.
 *     Typically "li", but "tr" for table extension.
 * @property {jQueryObject} $container Outer &lt;ul> element (or &lt;table> element for ext-table).
 * @property {jQueryObject} $div A jQuery object containing the element used to instantiate the tree widget (`widget.element`)
 * @property {object|array} columns Recommended place to store shared column meta data. @since 2.27
 * @property {object} data Metadata, i.e. properties that may be passed to `source` in addition to a children array.
 * @property {object} ext Hash of all active plugin instances.
 * @property {FancytreeNode} focusNode Currently focused node or null.
 * @property {FancytreeNode} lastSelectedNode Used to implement selectMode 1 (single select)
 * @property {string} nodeContainerAttrName Property name of FancytreeNode that contains the outer element of single nodes.
 *     Typically "li", but "tr" for table extension.
 * @property {FancytreeOptions} options Current options, i.e. default options + options passed to constructor.
 * @property {FancytreeNode} rootNode Invisible system root node.
 * @property {string} statusClassPropName Property name of FancytreeNode that contains the element which will receive the status classes.
 *     Typically "span", but "tr" for table extension.
 * @property {object} types Map for shared type specific meta data, used with node.type attribute. @since 2.27
 * @property {object} widget Base widget instance.
 */
function Fancytree(widget) {
	this.widget = widget;
	this.$div = widget.element;
	this.options = widget.options;
	if( this.options ) {
		if(  $.isFunction(this.options.lazyload ) && !$.isFunction(this.options.lazyLoad) ) {
			this.options.lazyLoad = function() {
				FT.warn("The 'lazyload' event is deprecated since 2014-02-25. Use 'lazyLoad' (with uppercase L) instead.");
				return widget.options.lazyload.apply(this, arguments);
			};
		}
		if( $.isFunction(this.options.loaderror) ) {
			$.error("The 'loaderror' event was renamed since 2014-07-03. Use 'loadError' (with uppercase E) instead.");
		}
		if( this.options.fx !== undefined ) {
			FT.warn("The 'fx' option was replaced by 'toggleEffect' since 2014-11-30.");
		}
		if( this.options.removeNode !== undefined ) {
			$.error("The 'removeNode' event was replaced by 'modifyChild' since 2.20 (2016-09-10).");
		}
	}
	this.ext = {}; // Active extension instances
	this.types = {};
	this.columns = {};
	// allow to init tree.data.foo from <div data-foo=''>
	this.data = _getElementDataAsDict(this.$div);
	// TODO: use widget.uuid instead?
	this._id = $.ui.fancytree._nextId++;
	// TODO: use widget.eventNamespace instead?
	this._ns = ".fancytree-" + this._id; // append for namespaced events
	this.activeNode = null;
	this.focusNode = null;
	this._hasFocus = null;
	this._tempCache = {};
	this._lastMousedownNode = null;
	this._enableUpdate = true;
	this.lastSelectedNode = null;
	this.systemFocusElement = null;
	this.lastQuicksearchTerm = "";
	this.lastQuicksearchTime = 0;

	this.statusClassPropName = "span";
	this.ariaPropName = "li";
	this.nodeContainerAttrName = "li";

	// Remove previous markup if any
	this.$div.find(">ul.fancytree-container").remove();

	// Create a node without parent.
	var fakeParent = { tree: this },
		$ul;
	this.rootNode = new FancytreeNode(fakeParent, {
		title: "root",
		key: "root_" + this._id,
		children: null,
		expanded: true
	});
	this.rootNode.parent = null;

	// Create root markup
	$ul = $("<ul>", {
		"class": "ui-fancytree fancytree-container fancytree-plain"
	}).appendTo(this.$div);
	this.$container = $ul;
	this.rootNode.ul = $ul[0];

	if(this.options.debugLevel == null){
		this.options.debugLevel = FT.debugLevel;
	}
	// // Add container to the TAB chain
	// // See http://www.w3.org/TR/wai-aria-practices/#focus_activedescendant
	// // #577: Allow to set tabindex to "0", "-1" and ""
	// this.$container.attr("tabindex", this.options.tabindex);

	// if( this.options.rtl ) {
	// 	this.$container.attr("DIR", "RTL").addClass("fancytree-rtl");
	// // }else{
	// //	this.$container.attr("DIR", null).removeClass("fancytree-rtl");
	// }
	// if(this.options.aria){
	// 	this.$container.attr("role", "tree");
	// 	if( this.options.selectMode !== 1 ) {
	// 		this.$container.attr("aria-multiselectable", true);
	// 	}
	// }
}


Fancytree.prototype = /** @lends Fancytree# */{
	/* Return a context object that can be re-used for _callHook().
	 * @param {Fancytree | FancytreeNode | EventData} obj
	 * @param {Event} originalEvent
	 * @param {Object} extra
	 * @returns {EventData}
	 */
	_makeHookContext: function(obj, originalEvent, extra) {
		var ctx, tree;
		if(obj.node !== undefined){
			// obj is already a context object
			if(originalEvent && obj.originalEvent !== originalEvent){
				$.error("invalid args");
			}
			ctx = obj;
		}else if(obj.tree){
			// obj is a FancytreeNode
			tree = obj.tree;
			ctx = { node: obj, tree: tree, widget: tree.widget, options: tree.widget.options, originalEvent: originalEvent,
					typeInfo: tree.types[obj.type] || {}};
		}else if(obj.widget){
			// obj is a Fancytree
			ctx = { node: null, tree: obj, widget: obj.widget, options: obj.widget.options, originalEvent: originalEvent };
		}else{
			$.error("invalid args");
		}
		if(extra){
			$.extend(ctx, extra);
		}
		return ctx;
	},
	/* Trigger a hook function: funcName(ctx, [...]).
	 *
	 * @param {string} funcName
	 * @param {Fancytree|FancytreeNode|EventData} contextObject
	 * @param {any}  [_extraArgs] optional additional arguments
	 * @returns {any}
	 */
	_callHook: function(funcName, contextObject, _extraArgs) {
		var ctx = this._makeHookContext(contextObject),
			fn = this[funcName],
			args = Array.prototype.slice.call(arguments, 2);
		if(!$.isFunction(fn)){
			$.error("_callHook('" + funcName + "') is not a function");
		}
		args.unshift(ctx);
//		this.debug("_hook", funcName, ctx.node && ctx.node.toString() || ctx.tree.toString(), args);
		return fn.apply(this, args);
	},
	_setExpiringValue: function(key, value, ms){
		this._tempCache[key] = {value: value, expire: Date.now() + (+ms || 50)};
	},
	_getExpiringValue: function(key){
		var entry = this._tempCache[key];
		if( entry && entry.expire > Date.now() ) {
			return entry.value;
		}
		delete this._tempCache[key];
		return null;
	},
	/* Check if current extensions dependencies are met and throw an error if not.
	 *
	 * This method may be called inside the `treeInit` hook for custom extensions.
	 *
	 * @param {string} extension name of the required extension
	 * @param {boolean} [required=true] pass `false` if the extension is optional, but we want to check for order if it is present
	 * @param {boolean} [before] `true` if `name` must be included before this, `false` otherwise (use `null` if order doesn't matter)
	 * @param {string} [message] optional error message (defaults to a descriptve error message)
	 */
	_requireExtension: function(name, required, before, message) {
		before = !!before;
		var thisName = this._local.name,
			extList = this.options.extensions,
			isBefore = $.inArray(name, extList) < $.inArray(thisName, extList),
			isMissing = required && this.ext[name] == null,
			badOrder = !isMissing && before != null && (before !== isBefore);

		_assert(thisName && thisName !== name, "invalid or same name");

		if( isMissing || badOrder ){
			if( !message ){
				if( isMissing || required ){
					message = "'" + thisName + "' extension requires '" + name + "'";
					if( badOrder ){
						message += " to be registered " + (before ? "before" : "after") + " itself";
					}
				}else{
					message = "If used together, `" + name + "` must be registered " + (before ? "before" : "after") + " `" + thisName + "`";
				}
			}
			$.error(message);
			return false;
		}
		return true;
	},
	/** Activate node with a given key and fire focus and activate events.
	 *
	 * A previously activated node will be deactivated.
	 * If activeVisible option is set, all parents will be expanded as necessary.
	 * Pass key = false, to deactivate the current node only.
	 * @param {string} key
	 * @returns {FancytreeNode} activated node (null, if not found)
	 */
	activateKey: function(key) {
		var node = this.getNodeByKey(key);
		if(node){
			node.setActive();
		}else if(this.activeNode){
			this.activeNode.setActive(false);
		}
		return node;
	},
	/** (experimental) Add child status nodes that indicate 'More...', ....
	 * @param {boolean|object} node optional node definition. Pass `false` to remove all paging nodes.
	 * @param {string} [mode='append'] 'child'|firstChild'
	 * @since 2.15
	 */
	addPagingNode: function(node, mode){
		return this.rootNode.addPagingNode(node, mode);
	},
	/** (experimental) Modify existing data model.
	 *
	 * @param {Array} patchList array of [key, NodePatch] arrays
	 * @returns {$.Promise} resolved, when all patches have been applied
	 * @see TreePatch
	 */
	applyPatch: function(patchList) {
		var dfd, i, p2, key, patch, node,
			patchCount = patchList.length,
			deferredList = [];

		for(i=0; i<patchCount; i++){
			p2 = patchList[i];
			_assert(p2.length === 2, "patchList must be an array of length-2-arrays");
			key = p2[0];
			patch = p2[1];
			node = (key === null) ? this.rootNode : this.getNodeByKey(key);
			if(node){
				dfd = new $.Deferred();
				deferredList.push(dfd);
				node.applyPatch(patch).always(_makeResolveFunc(dfd, node));
			}else{
				this.warn("could not find node with key '" + key + "'");
			}
		}
		// Return a promise that is resolved, when ALL patches were applied
		return $.when.apply($, deferredList).promise();
	},
	/* TODO: implement in dnd extension
	cancelDrag: function() {
		var dd = $.ui.ddmanager.current;
		if(dd){
			dd.cancel();
		}
	},
   */
	/** Remove all nodes.
	 * @since 2.14
	 */
	clear: function(source) {
		this._callHook("treeClear", this);
	},
   /** Return the number of nodes.
	* @returns {integer}
	*/
	count: function() {
		return this.rootNode.countChildren();
	},
	/** Write to browser console if debugLevel >= 4 (prepending tree name)
	 *
	 * @param {*} msg string or object or array of such
	 */
	debug: function(msg){
		if( this.options.debugLevel >= 4 ) {
			Array.prototype.unshift.call(arguments, this.toString());
			consoleApply("log", arguments);
		}
	},
	// TODO: disable()
	// TODO: enable()
	/** Temporarily suppress rendering to improve performance on bulk-updates.
	 *
	 * @param {boolean} flag
	 * @returns {boolean} previous status
	 * @since 2.19
	 */
	enableUpdate: function(flag) {
		flag = ( flag !== false );
		/*jshint -W018 */  // Confusing use of '!'
		if ( !!this._enableUpdate === !!flag ) {
			return flag;
		}
		/*jshint +W018 */
		this._enableUpdate = flag;
		if ( flag ) {
			this.debug("enableUpdate(true): redraw ");  //, this._dirtyRoots);
			this.render();
		} else {
		// 	this._dirtyRoots = null;
			this.debug("enableUpdate(false)...");
		}
		return !flag; // return previous value
	},
	/**Find all nodes that matches condition.
	 *
	 * @param {string | function(node)} match title string to search for, or a
	 *     callback function that returns `true` if a node is matched.
	 * @returns {FancytreeNode[]} array of nodes (may be empty)
	 * @see FancytreeNode#findAll
	 * @since 2.12
	 */
	findAll: function(match) {
		return this.rootNode.findAll(match);
	},
	/**Find first node that matches condition.
	 *
	 * @param {string | function(node)} match title string to search for, or a
	 *     callback function that returns `true` if a node is matched.
	 * @returns {FancytreeNode} matching node or null
	 * @see FancytreeNode#findFirst
	 * @since 2.12
	 */
	findFirst: function(match) {
		return this.rootNode.findFirst(match);
	},
	/** Find the next visible node that starts with `match`, starting at `startNode`
	 * and wrap-around at the end.
	 *
	 * @param {string|function} match
	 * @param {FancytreeNode} [startNode] defaults to first node
	 * @returns {FancytreeNode} matching node or null
	 */
	findNextNode: function(match, startNode, visibleOnly) {
		match = (typeof match === "string") ? _makeNodeTitleStartMatcher(match) : match;
		startNode = startNode || this.getFirstChild();

		var stopNode = null,
			parentChildren = startNode.parent.children,
			matchingNode = null,
			walkVisible = function(parent, idx, fn) {
				var i, grandParent,
					parentChildren = parent.children,
					siblingCount = parentChildren.length,
					node = parentChildren[idx];
				// visit node itself
				if( node && fn(node) === false ) {
					return false;
				}
				// visit descendants
				if( node && node.children && node.expanded ) {
					if( walkVisible(node, 0, fn) === false ) {
						return false;
					}
				}
				// visit subsequent siblings
				for( i = idx + 1; i < siblingCount; i++ ) {
					if( walkVisible(parent, i, fn) === false ) {
						return false;
					}
				}
				// visit parent's subsequent siblings
				grandParent = parent.parent;
				if( grandParent ) {
					return walkVisible(grandParent, grandParent.children.indexOf(parent) + 1, fn);
				} else {
					// wrap-around: restart with first node
					return walkVisible(parent, 0, fn);
				}
			};

		walkVisible(startNode.parent, parentChildren.indexOf(startNode), function(node){
			// Stop iteration if we see the start node a second time
			if( node === stopNode ) {
				return false;
			}
			stopNode = stopNode || node;
			// Ignore nodes hidden by a filter
			if( ! $(node.span).is(":visible") ) {
				node.debug("quicksearch: skipping hidden node");
				return;
			}
			// Test if we found a match, but search for a second match if this
			// was the currently active node
			if( match(node) ) {
				// node.debug("quicksearch match " + node.title, startNode);
				matchingNode = node;
				if( matchingNode !== startNode ) {
					return false;
				}
			}
		});
		return matchingNode;
	},
	// TODO: fromDict
	/**
	 * Generate INPUT elements that can be submitted with html forms.
	 *
	 * In selectMode 3 only the topmost selected nodes are considered, unless
	 * `opts.stopOnParents: false` is passed.
	 *
	 * @example
	 * // Generate input elements for active and selected nodes
	 * tree.generateFormElements();
	 * // Generate input elements selected nodes, using a custom `name` attribute
	 * tree.generateFormElements("cust_sel", false);
	 * // Generate input elements using a custom filter
	 * tree.generateFormElements(true, true, { filter: function(node) {
	 *     return node.isSelected() && node.data.yes;
	 * }});
	 *
	 * @param {boolean | string} [selected=true] Pass false to disable, pass a string to override the field name (default: 'ft_ID[]')
	 * @param {boolean | string} [active=true] Pass false to disable, pass a string to override the field name (default: 'ft_ID_active')
	 * @param {object} [opts] default { filter: null, stopOnParents: true }
	 */
	generateFormElements: function(selected, active, opts) {
		opts = opts || {};

		var nodeList,
			selectedName = (typeof selected === "string") ? selected : "ft_" + this._id + "[]",
			activeName = (typeof active === "string") ? active : "ft_" + this._id + "_active",
			id = "fancytree_result_" + this._id,
			$result = $("#" + id),
			stopOnParents = this.options.selectMode === 3 && opts.stopOnParents !== false;

		if($result.length){
			$result.empty();
		}else{
			$result = $("<div>", {
				id: id
			}).hide().insertAfter(this.$container);
		}
		if(active !== false && this.activeNode){
			$result.append($("<input>", {
				type: "radio",
				name: activeName,
				value: this.activeNode.key,
				checked: true
			}));
		}
		function _appender( node ) {
			$result.append($("<input>", {
				type: "checkbox",
				name: selectedName,
				value: node.key,
				checked: true
			}));
		}
		if ( opts.filter ) {
			this.visit(function(node) {
				var res = opts.filter(node);
				if( res === "skip" ) { return res; }
				if ( res !== false ) {
					_appender(node);
				}
			});
		} else if ( selected !== false ) {
			nodeList = this.getSelectedNodes(stopOnParents);
			$.each(nodeList, function(idx, node) {
				_appender(node);
			});
		}
	},
	/**
	 * Return the currently active node or null.
	 * @returns {FancytreeNode}
	 */
	getActiveNode: function() {
		return this.activeNode;
	},
	/** Return the first top level node if any (not the invisible root node).
	 * @returns {FancytreeNode | null}
	 */
	getFirstChild: function() {
		return this.rootNode.getFirstChild();
	},
	/**
	 * Return node that has keyboard focus or null.
	 * @returns {FancytreeNode}
	 */
	getFocusNode: function() {
		return this.focusNode;
	},
	/**
	 * Return node with a given key or null if not found.
	 *
	 * Not
	 * @param {string} key
	 * @param {FancytreeNode} [searchRoot] only search below this node
	 * @returns {FancytreeNode | null}
	 */
	getNodeByKey: function(key, searchRoot) {
		// Search the DOM by element ID (assuming this is faster than traversing all nodes).
		var el, match;
		// TODO: use tree.keyMap if available
		// TODO: check opts.generateIds === true
		if(!searchRoot){
			el = document.getElementById(this.options.idPrefix + key);
			if( el ){
				return el.ftnode ? el.ftnode : null;
			}
		}
		// Not found in the DOM, but still may be in an unrendered part of tree
		searchRoot = searchRoot || this.rootNode;
		match = null;
		searchRoot.visit(function(node){
			if(node.key === key) {
				match = node;
				return false;  // Stop iteration
			}
		}, true);
		return match;
	},
	/** Return the invisible system root node.
	 * @returns {FancytreeNode}
	 */
	getRootNode: function() {
		return this.rootNode;
	},
	/**
	 * Return an array of selected nodes.
	 * @param {boolean} [stopOnParents=false] only return the topmost selected
	 *     node (useful with selectMode 3)
	 * @returns {FancytreeNode[]}
	 */
	getSelectedNodes: function(stopOnParents) {
		return this.rootNode.getSelectedNodes(stopOnParents);
	},
	/** Return true if the tree control has keyboard focus
	 * @returns {boolean}
	 */
	hasFocus: function(){
		return !!this._hasFocus;
	},
	/** Write to browser console if debugLevel >= 3 (prepending tree name)
	 * @param {*} msg string or object or array of such
	 */
	info: function(msg){
		if( this.options.debugLevel >= 3 ) {
			Array.prototype.unshift.call(arguments, this.toString());
			consoleApply("info", arguments);
		}
	},
/*
	TODO: isInitializing: function() {
		return ( this.phase=="init" || this.phase=="postInit" );
	},
	TODO: isReloading: function() {
		return ( this.phase=="init" || this.phase=="postInit" ) && this.options.persist && this.persistence.cookiesFound;
	},
	TODO: isUserEvent: function() {
		return ( this.phase=="userEvent" );
	},
*/

	/**
	 * Make sure that a node with a given ID is loaded, by traversing - and
	 * loading - its parents. This method is meant for lazy hierarchies.
	 * A callback is executed for every node as we go.
	 * @example
	 * // Resolve using node.key:
	 * tree.loadKeyPath("/_3/_23/_26/_27", function(node, status){
	 *   if(status === "loaded") {
	 *     console.log("loaded intermediate node " + node);
	 *   }else if(status === "ok") {
	 *     node.activate();
	 *   }
	 * });
	 * // Use deferred promise:
	 * tree.loadKeyPath("/_3/_23/_26/_27").progress(function(data){
	 *   if(data.status === "loaded") {
	 *     console.log("loaded intermediate node " + data.node);
	 *   }else if(data.status === "ok") {
	 *     node.activate();
	 *   }
	 * }).done(function(){
	 *    ...
	 * });
	 * // Custom path segment resolver:
	 * tree.loadKeyPath("/321/431/21/2", {
	 *   matchKey: function(node, key){
	 *     return node.data.refKey === key;
	 *   },
	 *   callback: function(node, status){
	 *     if(status === "loaded") {
	 *       console.log("loaded intermediate node " + node);
	 *     }else if(status === "ok") {
	 *       node.activate();
	 *     }
	 *   }
	 * });
	 * @param {string | string[]} keyPathList one or more key paths (e.g. '/3/2_1/7')
	 * @param {function | object} optsOrCallback callback(node, status) is called for every visited node ('loading', 'loaded', 'ok', 'error').
	 *     Pass an object to define custom key matchers for the path segments: {callback: function, matchKey: function}.
	 * @returns {$.Promise}
	 */
	loadKeyPath: function(keyPathList, optsOrCallback) {
		var callback, i, path,
			self = this,
			dfd = new $.Deferred(),
			parent = this.getRootNode(),
			sep = this.options.keyPathSeparator,
			pathSegList = [],
			opts = $.extend({}, optsOrCallback);

		// Prepare options
		if( typeof optsOrCallback === "function" ) {
			callback = optsOrCallback;
		} else if ( optsOrCallback && optsOrCallback.callback ) {
			callback = optsOrCallback.callback;
		}
		opts.callback = function(ctx, node, status){
			if( callback ) {
				callback.call(ctx, node, status);
			}
			dfd.notifyWith(ctx, [{node: node, status: status}]);
		};
		if( opts.matchKey == null ) {
			opts.matchKey = function(node, key) { return node.key === key; };
		}
		// Convert array of path strings to array of segment arrays
		if(!$.isArray(keyPathList)){
			keyPathList = [keyPathList];
		}
		for(i=0; i<keyPathList.length; i++){
			path = keyPathList[i];
			// strip leading slash
			if(path.charAt(0) === sep){
				path = path.substr(1);
			}
			// segListMap[path] = { parent: parent, segList: path.split(sep) };
			pathSegList.push(path.split(sep));
			// targetList.push({ parent: parent, segList: path.split(sep)/* , path: path*/});
		}
		// The timeout forces async behavior always (even if nodes are all loaded)
		// This way a potential progress() event will fire.
		setTimeout(function(){
			self._loadKeyPathImpl(dfd, opts, parent, pathSegList).done(function(){
				dfd.resolve();
			});
		}, 0);
		return dfd.promise();
	},
	/*
	 * Resolve a list of paths, relative to one parent node.
	 */
	_loadKeyPathImpl: function(dfd, opts, parent, pathSegList) {
		var deferredList, i, key, node, remainMap, tmpParent, segList, subDfd,
			self = this;

		function __findChild(parent, key){
			// console.log("__findChild", key, parent);
			var i, l,
				cl = parent.children;

			if( cl ) {
				for(i=0, l=cl.length; i<l; i++){
					if( opts.matchKey(cl[i], key)) { return cl[i]; }
				}
			}
			return null;
		}

		// console.log("_loadKeyPathImpl, parent=", parent, ", pathSegList=", pathSegList);

		// Pass 1:
		// Handle all path segments for nodes that are already loaded.
		// Collect distinct top-most lazy nodes in a map.
		// Note that we can use node.key to de-dupe entries, even if a custom matcher would
		// look for other node attributes.
		// map[node.key] => {node: node, pathList: [list of remaining rest-paths]}
		remainMap = {};

		for(i=0; i<pathSegList.length; i++){
			segList = pathSegList[i];
			// target = targetList[i];

			// Traverse and pop path segments (i.e. keys), until we hit a lazy, unloaded node
			tmpParent = parent;
			while(segList.length){
				key = segList.shift();
				node = __findChild(tmpParent, key);
				if(!node){
					this.warn("loadKeyPath: key not found: " + key + " (parent: " + tmpParent + ")");
					opts.callback(this, key, "error");
					break;
				}else if(segList.length === 0){
					opts.callback(this, node, "ok");
					break;
				}else if(!node.lazy || (node.hasChildren() !== undefined )){
					opts.callback(this, node, "loaded");
					tmpParent = node;
				}else{
					opts.callback(this, node, "loaded");
					key = node.key;  //target.segList.join(sep);
					if(remainMap[key]){
						remainMap[key].pathSegList.push(segList);
					}else{
						remainMap[key] = {parent: node, pathSegList: [segList]};
					}
					break;
				}
			}
		}
		// console.log("_loadKeyPathImpl AFTER pass 1, remainMap=", remainMap);

		// Now load all lazy nodes and continue iteration for remaining paths
		deferredList = [];

		// Avoid jshint warning 'Don't make functions within a loop.':
		function __lazyload(dfd, parent, pathSegList){
			// console.log("__lazyload", parent, "pathSegList=", pathSegList);
			opts.callback(self, parent, "loading");
			parent.load().done(function(){
				self._loadKeyPathImpl.call(self, dfd, opts, parent, pathSegList)
					.always(_makeResolveFunc(dfd, self));
			}).fail(function(errMsg){
				self.warn("loadKeyPath: error loading lazy " + parent);
				opts.callback(self, node, "error");
				dfd.rejectWith(self);
			});
		}
		// remainMap contains parent nodes, each with a list of relative sub-paths.
		// We start loading all of them now, and pass the the list to each loader.
		for(var nodeKey in remainMap){
			var remain = remainMap[nodeKey];
			// console.log("for(): remain=", remain, "remainMap=", remainMap);
			// key = remain.segList.shift();
			// node = __findChild(remain.parent, key);
			// if (node == null) {  // #576
			// 	// Issue #576, refactored for v2.27:
			// 	// The root cause was, that sometimes the wrong parent was used here
			// 	// to find the next segment.
			// 	// Falling back to getNodeByKey() was a hack that no longer works if a custom
			// 	// matcher is used, because we cannot assume that a single segment-key is unique
			// 	// throughout the tree.
			// 	self.error("loadKeyPath: error loading child by key '" + key + "' (parent: " + target.parent + ")", target);
			// 	// 	node = self.getNodeByKey(key);
			// 	continue;
			// }
			subDfd = new $.Deferred();
			deferredList.push(subDfd);
			__lazyload(subDfd, remain.parent, remain.pathSegList);
		}
		// Return a promise that is resolved, when ALL paths were loaded
		return $.when.apply($, deferredList).promise();
	},
	/** Re-fire beforeActivate, activate, and (optional) focus events.
	 * Calling this method in the `init` event, will activate the node that
	 * was marked 'active' in the source data, and optionally set the keyboard
	 * focus.
	 * @param [setFocus=false]
	 */
	reactivate: function(setFocus) {
		var res,
			node = this.activeNode;

		if( !node ) {
			return _getResolvedPromise();
		}
		this.activeNode = null; // Force re-activating
		res = node.setActive(true, {noFocus: true});
		if( setFocus ){
			node.setFocus();
		}
		return res;
	},
	/** Reload tree from source and return a promise.
	 * @param [source] optional new source (defaults to initial source data)
	 * @returns {$.Promise}
	 */
	reload: function(source) {
		this._callHook("treeClear", this);
		return this._callHook("treeLoad", this, source);
	},
	/**Render tree (i.e. create DOM elements for all top-level nodes).
	 * @param {boolean} [force=false] create DOM elemnts, even if parent is collapsed
	 * @param {boolean} [deep=false]
	 */
	render: function(force, deep) {
		return this.rootNode.render(force, deep);
	},
	/**(De)select all nodes.
	 * @param {boolean} [flag=true]
	 * @since 2.28
	 */
	selectAll: function(flag) {
		this.visit(function(node){
			node.setSelected(flag);
		});
	},
	// TODO: selectKey: function(key, select)
	// TODO: serializeArray: function(stopOnParents)
	/**
	 * @param {boolean} [flag=true]
	 */
	setFocus: function(flag) {
		return this._callHook("treeSetFocus", this, flag);
	},
	/**
	 * Return all nodes as nested list of {@link NodeData}.
	 *
	 * @param {boolean} [includeRoot=false] Returns the hidden system root node (and its children)
	 * @param {function} [callback] callback(dict, node) is called for every node, in order to allow modifications
	 * @returns {Array | object}
	 * @see FancytreeNode#toDict
	 */
	toDict: function(includeRoot, callback){
		var res = this.rootNode.toDict(true, callback);
		return includeRoot ? res : res.children;
	},
	/* Implicitly called for string conversions.
	 * @returns {string}
	 */
	toString: function(){
		return "Fancytree@" + this._id;
		// return "<Fancytree(#" + this._id + ")>";
	},
	/* _trigger a widget event with additional node ctx.
	 * @see EventData
	 */
	_triggerNodeEvent: function(type, node, originalEvent, extra) {
//		this.debug("_trigger(" + type + "): '" + ctx.node.title + "'", ctx);
		var ctx = this._makeHookContext(node, originalEvent, extra),
			res = this.widget._trigger(type, originalEvent, ctx);
		if(res !== false && ctx.result !== undefined){
			return ctx.result;
		}
		return res;
	},
	/* _trigger a widget event with additional tree data. */
	_triggerTreeEvent: function(type, originalEvent, extra) {
//		this.debug("_trigger(" + type + ")", ctx);
		var ctx = this._makeHookContext(this, originalEvent, extra),
			res = this.widget._trigger(type, originalEvent, ctx);

		if(res !== false && ctx.result !== undefined){
			return ctx.result;
		}
		return res;
	},
	/** Call fn(node) for all nodes in hierarchical order (depth-first).
	 *
	 * @param {function} fn the callback function.
	 *     Return false to stop iteration, return "skip" to skip this node and children only.
	 * @returns {boolean} false, if the iterator was stopped.
	 */
	visit: function(fn) {
		return this.rootNode.visit(fn, false);
	},
	/** Call fn(node) for all nodes in vertical order, top down (or bottom up).<br>
	 * Stop iteration, if fn() returns false.<br>
	 * Return false if iteration was stopped.
	 *
	 * @param {function} fn the callback function.
	 *     Return false to stop iteration, return "skip" to skip this node and children only.
	 * @param {object} [options]
	 *     Defaults:
	 *     {start: First top node, reverse: false, includeSelf: true, includeHidden: false}
	 * @returns {boolean}
	 * @since 2.28
	 */
	visitRows: function(fn, opts) {
		if( opts && opts.reverse ) {
			delete opts.reverse;
			return this._visitRowsUp(fn, opts);
		}
		var i, nextIdx, parent, res, siblings,
			siblingOfs = 0,
			skipFirstNode = (opts.includeSelf === false),
			includeHidden = !!opts.includeHidden,
			node = opts.start || this.rootNode.children[0];

		parent = node.parent;
		while( parent ) {
			// visit siblings
			siblings = parent.children;
			nextIdx = siblings.indexOf(node) + siblingOfs;

			for( i=nextIdx; i<siblings.length; i++) {
				node = siblings[i];
				if( !skipFirstNode && fn(node) === false ) {
					return false;
				}
				skipFirstNode = false;
				// Dive into node's child nodes
				if( node.children && node.children.length && (includeHidden || node.expanded) ) {
					// Disable warning: Functions declared within loops referencing an outer
					// scoped variable may lead to confusing semantics:
					/*jshint -W083 */
					res = node.visit(function(n) {
						if( fn(n) === false ) {
							return false;
						}
						if( !includeHidden && n.children && !n.expanded ) {
							return "skip";
						}
					}, false);
					/*jshint +W083 */
					if( res === false ) {
						return false;
					}
				}
			}
			// Visit parent nodes (bottom up)
			node = parent;
			parent = parent.parent;
			siblingOfs = 1;  //
		}
		return true;
	},
	/* Call fn(node) for all nodes in vertical order, bottom up.
	 */
	_visitRowsUp: function(fn, opts) {
		var children, idx, parent,
			includeHidden = !!opts.includeHidden,
			node = opts.start || this.rootNode.children[0];

		while( true ) {
			parent = node.parent;
			children = parent.children;

			if( children[0] === node ) {
				// If this is already the first sibling, goto parent
				node = parent;
				children = parent.children;
			} else {
				// Otherwise, goto prev. sibling
				idx = children.indexOf(node);
				node = children[idx-1];
				// If the prev. sibling has children, follow down to last descendant
				while( (includeHidden || node.expanded) && node.children && node.children.length ) {
					children = node.children;
					parent = node;
					node = children[children.length - 1];
				}
			}
			// Skip invisible
			if( !includeHidden && !$(node.span).is(":visible") ) {
				continue;
			}
			if( fn(node) === false ) {
				return false;
			}
		}
	},
	/** Write warning to browser console if debugLevel >= 2 (prepending tree info)
	 *
	 * @param {*} msg string or object or array of such
	 */
	warn: function(msg){
		if( this.options.debugLevel >= 2 ) {
			Array.prototype.unshift.call(arguments, this.toString());
			consoleApply("warn", arguments);
		}
	}
};

/**
 * These additional methods of the {@link Fancytree} class are 'hook functions'
 * that can be used and overloaded by extensions.
 * (See <a href="https://github.com/mar10/fancytree/wiki/TutorialExtensions">writing extensions</a>.)
 * @mixin Fancytree_Hooks
 */
$.extend(Fancytree.prototype,
	/** @lends Fancytree_Hooks# */
	{
	/** Default handling for mouse click events.
	 *
	 * @param {EventData} ctx
	 */
	nodeClick: function(ctx) {
		var activate, expand,
			// event = ctx.originalEvent,
			targetType = ctx.targetType,
			node = ctx.node;

//	    this.debug("ftnode.onClick(" + event.type + "): ftnode:" + this + ", button:" + event.button + ", which: " + event.which, ctx);
		// TODO: use switch
		// TODO: make sure clicks on embedded <input> doesn't steal focus (see table sample)
		if( targetType === "expander" ) {
			if( node.isLoading() ) {
				// #495: we probably got a click event while a lazy load is pending.
				// The 'expanded' state is not yet set, so 'toggle' would expand
				// and trigger lazyLoad again.
				// It would be better to allow to collapse/expand the status node
				// while loading (instead of ignoring), but that would require some
				// more work.
				node.debug("Got 2nd click while loading: ignored");
				return;
			}
			// Clicking the expander icon always expands/collapses
			this._callHook("nodeToggleExpanded", ctx);

		} else if( targetType === "checkbox" ) {
			// Clicking the checkbox always (de)selects
			this._callHook("nodeToggleSelected", ctx);
			if( ctx.options.focusOnSelect ) { // #358
				this._callHook("nodeSetFocus", ctx, true);
			}

		} else {
			// Honor `clickFolderMode` for
			expand = false;
			activate = true;
			if( node.folder ) {
				switch( ctx.options.clickFolderMode ) {
				case 2: // expand only
					expand = true;
					activate = false;
					break;
				case 3: // expand and activate
					activate = true;
					expand = true; //!node.isExpanded();
					break;
				// else 1 or 4: just activate
				}
			}
			if( activate ) {
				this.nodeSetFocus(ctx);
				this._callHook("nodeSetActive", ctx, true);
			}
			if( expand ) {
				if(!activate){
//                    this._callHook("nodeSetFocus", ctx);
				}
//				this._callHook("nodeSetExpanded", ctx, true);
				this._callHook("nodeToggleExpanded", ctx);
			}
		}
		// Make sure that clicks stop, otherwise <a href='#'> jumps to the top
		// if(event.target.localName === "a" && event.target.className === "fancytree-title"){
		// 	event.preventDefault();
		// }
		// TODO: return promise?
	},
	/** Collapse all other  children of same parent.
	 *
	 * @param {EventData} ctx
	 * @param {object} callOpts
	 */
	nodeCollapseSiblings: function(ctx, callOpts) {
		// TODO: return promise?
		var ac, i, l,
			node = ctx.node;

		if( node.parent ){
			ac = node.parent.children;
			for (i=0, l=ac.length; i<l; i++) {
				if ( ac[i] !== node && ac[i].expanded ){
					this._callHook("nodeSetExpanded", ac[i], false, callOpts);
				}
			}
		}
	},
	/** Default handling for mouse douleclick events.
	 * @param {EventData} ctx
	 */
	nodeDblclick: function(ctx) {
		// TODO: return promise?
		if( ctx.targetType === "title" && ctx.options.clickFolderMode === 4) {
//			this.nodeSetFocus(ctx);
//			this._callHook("nodeSetActive", ctx, true);
			this._callHook("nodeToggleExpanded", ctx);
		}
		// TODO: prevent text selection on dblclicks
		if( ctx.targetType === "title" ) {
			ctx.originalEvent.preventDefault();
		}
	},
	/** Default handling for mouse keydown events.
	 *
	 * NOTE: this may be called with node == null if tree (but no node) has focus.
	 * @param {EventData} ctx
	 */
	nodeKeydown: function(ctx) {
		// TODO: return promise?
		var matchNode, stamp, res, focusNode,
			event = ctx.originalEvent,
			node = ctx.node,
			tree = ctx.tree,
			opts = ctx.options,
			which = event.which,
			whichChar = String.fromCharCode(which),
			clean = !(event.altKey || event.ctrlKey || event.metaKey || event.shiftKey),
			$target = $(event.target),
			handled = true,
			activate = !(event.ctrlKey || !opts.autoActivate );

		// (node || FT).debug("ftnode.nodeKeydown(" + event.type + "): ftnode:" + this + ", charCode:" + event.charCode + ", keyCode: " + event.keyCode + ", which: " + event.which);
		// FT.debug("eventToString", which, '"' + String.fromCharCode(which) + '"', '"' + FT.eventToString(event) + '"');

		// Set focus to active (or first node) if no other node has the focus yet
		if( !node ){
			focusNode = (this.getActiveNode() || this.getFirstChild());
			if (focusNode){
				focusNode.setFocus();
				node = ctx.node = this.focusNode;
				node.debug("Keydown force focus on active node");
			}
		}

		if( opts.quicksearch && clean && /\w/.test(whichChar) &&
				!SPECIAL_KEYCODES[which] &&  // #659
				!$target.is(":input:enabled") ) {
			// Allow to search for longer streaks if typed in quickly
			stamp = Date.now();
			if( stamp - tree.lastQuicksearchTime > 500 ) {
				tree.lastQuicksearchTerm = "";
			}
			tree.lastQuicksearchTime = stamp;
			tree.lastQuicksearchTerm += whichChar;
			// tree.debug("quicksearch find", tree.lastQuicksearchTerm);
			matchNode = tree.findNextNode(tree.lastQuicksearchTerm, tree.getActiveNode());
			if( matchNode ) {
				matchNode.setActive();
			}
			event.preventDefault();
			return;
		}
		switch( FT.eventToString(event) ) {
			case "+":
			case "=": // 187: '+' @ Chrome, Safari
				tree.nodeSetExpanded(ctx, true);
				break;
			case "-":
				tree.nodeSetExpanded(ctx, false);
				break;
			case "space":
				if( node.isPagingNode() ) {
					tree._triggerNodeEvent("clickPaging", ctx, event);
				} else if( FT.evalOption("checkbox", node, node, opts, false) ) {  // #768
					tree.nodeToggleSelected(ctx);
				}else{
					tree.nodeSetActive(ctx, true);
				}
				break;
			case "return":
				tree.nodeSetActive(ctx, true);
				break;
			case "home":
			case "end":
			case "backspace":
			case "left":
			case "right":
			case "up":
			case "down":
				res = node.navigate(event.which, activate);
				break;
			default:
				handled = false;
		}
		if(handled){
			event.preventDefault();
		}
	},


	// /** Default handling for mouse keypress events. */
	// nodeKeypress: function(ctx) {
	//     var event = ctx.originalEvent;
	// },

	// /** Trigger lazyLoad event (async). */
	// nodeLazyLoad: function(ctx) {
	//     var node = ctx.node;
	//     if(this._triggerNodeEvent())
	// },
	/** Load child nodes (async).
	 *
	 * @param {EventData} ctx
	 * @param {object[]|object|string|$.Promise|function} source
	 * @returns {$.Promise} The deferred will be resolved as soon as the (ajax)
	 *     data was rendered.
	 */
	nodeLoadChildren: function(ctx, source) {
		var ajax, delay, dfd,
			tree = ctx.tree,
			node = ctx.node,
			requestId = Date.now();

		if($.isFunction(source)){
			source = source.call(tree, {type: "source"}, ctx);
			_assert(!$.isFunction(source), "source callback must not return another function");
		}
		if(source.url){
			if( node._requestId ) {
				node.warn("Recursive load request #" + requestId + " while #" + node._requestId + " is pending.");
			// } else {
			// 	node.debug("Send load request #" + requestId);
			}
			// `source` is an Ajax options object
			ajax = $.extend({}, ctx.options.ajax, source);
			node._requestId = requestId;
			if(ajax.debugDelay){
				// simulate a slow server
				delay = ajax.debugDelay;
				if($.isArray(delay)){ // random delay range [min..max]
					delay = delay[0] + Math.random() * (delay[1] - delay[0]);
				}
				node.warn("nodeLoadChildren waiting debugDelay " + Math.round(delay) + " ms ...");
				ajax.debugDelay = false;
				dfd = $.Deferred(function (dfd) {
					setTimeout(function () {
						$.ajax(ajax)
							.done(function () {	dfd.resolveWith(this, arguments); })
							.fail(function () {	dfd.rejectWith(this, arguments); });
					}, delay);
				});
			}else{
				dfd = $.ajax(ajax);
			}

			// Defer the deferred: we want to be able to reject, even if ajax
			// resolved ok.
			source = new $.Deferred();
			dfd.done(function (data, textStatus, jqXHR) {
				var errorObj, res;

				if((this.dataType === "json" || this.dataType === "jsonp") && typeof data === "string"){
					$.error("Ajax request returned a string (did you get the JSON dataType wrong?).");
				}
				if( node._requestId && node._requestId > requestId ) {
					// The expected request time stamp is later than `requestId`
					// (which was kept as as closure variable to this handler function)
					// node.warn("Ignored load response for obsolete request #" + requestId + " (expected #" + node._requestId + ")");
					source.rejectWith(this, [RECURSIVE_REQUEST_ERROR]);
					return;
				// } else {
				// 	node.debug("Response returned for load request #" + requestId);
				}
				// postProcess is similar to the standard ajax dataFilter hook,
				// but it is also called for JSONP
				if( ctx.options.postProcess ){
					try {
						res = tree._triggerNodeEvent("postProcess", ctx, ctx.originalEvent, {
							response: data, error: null, dataType: this.dataType
						});
					} catch(e) {
						res = { error: e, message: "" + e, details: "postProcess failed"};
					}
					if( res.error ) {
						errorObj = $.isPlainObject(res.error) ? res.error : {message: res.error};
						errorObj = tree._makeHookContext(node, null, errorObj);
						source.rejectWith(this, [errorObj]);
						return;
					}
					data = $.isArray(res) ? res : data;

				} else if (data && data.hasOwnProperty("d") && ctx.options.enableAspx ) {
					// Process ASPX WebMethod JSON object inside "d" property
					data = (typeof data.d === "string") ? $.parseJSON(data.d) : data.d;
				}
				source.resolveWith(this, [data]);
			}).fail(function (jqXHR, textStatus, errorThrown) {
				var errorObj = tree._makeHookContext(node, null, {
					error: jqXHR,
					args: Array.prototype.slice.call(arguments),
					message: errorThrown,
					details: jqXHR.status + ": " + errorThrown
				});
				source.rejectWith(this, [errorObj]);
			});
		}
		// #383: accept and convert ECMAScript 6 Promise
		if( $.isFunction(source.then) && $.isFunction(source["catch"]) ) {
			dfd = source;
			source = new $.Deferred();
			dfd.then(function(value){
				source.resolve(value);
			}, function(reason){
				source.reject(reason);
			});
		}
		if($.isFunction(source.promise)){
			// `source` is a deferred, i.e. ajax request
			// _assert(!node.isLoading(), "recursive load");
			tree.nodeSetStatus(ctx, "loading");

			source.done(function (children) {
				tree.nodeSetStatus(ctx, "ok");
				node._requestId = null;
			}).fail(function(error){
				var ctxErr;

				if ( error === RECURSIVE_REQUEST_ERROR ) {
					node.warn("Ignored response for obsolete load request #" + requestId + " (expected #" + node._requestId + ")");
					return;
				} else if (error.node && error.error && error.message) {
					// error is already a context object
					ctxErr = error;
				} else {
					ctxErr = tree._makeHookContext(node, null, {
						error: error, // it can be jqXHR or any custom error
						args: Array.prototype.slice.call(arguments),
						message: error ? (error.message || error.toString()) : ""
					});
					if( ctxErr.message === "[object Object]" ) {
						ctxErr.message = "";
					}
				}
				node.warn("Load children failed (" + ctxErr.message + ")", ctxErr);
				if( tree._triggerNodeEvent("loadError", ctxErr, null) !== false ) {
					tree.nodeSetStatus(ctx, "error", ctxErr.message, ctxErr.details);
				}
			});
		} else {
			if( ctx.options.postProcess ){
				// #792: Call postProcess for non-deferred source
				var res = tree._triggerNodeEvent("postProcess", ctx, ctx.originalEvent, {
					response: source, error: null, dataType: typeof source
				});

				source = $.isArray(res) ? res : source;
			}
		}
		// $.when(source) resolves also for non-deferreds
		return $.when(source).done(function(children){
			var metaData;

			if( $.isPlainObject(children) ){
				// We got {foo: 'abc', children: [...]}
				// Copy extra properties to tree.data.foo
				_assert(node.isRootNode(), "source may only be an object for root nodes (expecting an array of child objects otherwise)");
				_assert($.isArray(children.children), "if an object is passed as source, it must contain a 'children' array (all other properties are added to 'tree.data')");
				metaData = children;
				children = children.children;
				delete metaData.children;
				// Copy some attributes to tree.data
				$.each(TREE_ATTRS, function(i, attr) {
					if( metaData[attr] !== undefined ){
						tree[attr] = metaData[attr];
						delete metaData[attr];
					}
				});
				// Copy all other attributes to tree.data.NAME
				$.extend(tree.data, metaData);
			}
			_assert($.isArray(children), "expected array of children");
			node._setChildren(children);
			// trigger fancytreeloadchildren
			tree._triggerNodeEvent("loadChildren", node);
		});
	},
	/** [Not Implemented]  */
	nodeLoadKeyPath: function(ctx, keyPathList) {
		// TODO: implement and improve
		// http://code.google.com/p/dynatree/issues/detail?id=222
	},
	/**
	 * Remove a single direct child of ctx.node.
	 * @param {EventData} ctx
	 * @param {FancytreeNode} childNode dircect child of ctx.node
	 */
	nodeRemoveChild: function(ctx, childNode) {
		var idx,
			node = ctx.node,
			// opts = ctx.options,
			subCtx = $.extend({}, ctx, {node: childNode}),
			children = node.children;

		// FT.debug("nodeRemoveChild()", node.toString(), childNode.toString());

		if( children.length === 1 ) {
			_assert(childNode === children[0], "invalid single child");
			return this.nodeRemoveChildren(ctx);
		}
		if( this.activeNode && (childNode === this.activeNode || this.activeNode.isDescendantOf(childNode))){
			this.activeNode.setActive(false); // TODO: don't fire events
		}
		if( this.focusNode && (childNode === this.focusNode || this.focusNode.isDescendantOf(childNode))){
			this.focusNode = null;
		}
		// TODO: persist must take care to clear select and expand cookies
		this.nodeRemoveMarkup(subCtx);
		this.nodeRemoveChildren(subCtx);
		idx = $.inArray(childNode, children);
		_assert(idx >= 0, "invalid child");
		// Notify listeners
		node.triggerModifyChild("remove", childNode);
		// Unlink to support GC
		childNode.visit(function(n){
			n.parent = null;
		}, true);
		this._callHook("treeRegisterNode", this, false, childNode);
		// remove from child list
		children.splice(idx, 1);
	},
	/**Remove HTML markup for all descendents of ctx.node.
	 * @param {EventData} ctx
	 */
	nodeRemoveChildMarkup: function(ctx) {
		var node = ctx.node;

		// FT.debug("nodeRemoveChildMarkup()", node.toString());
		// TODO: Unlink attr.ftnode to support GC
		if(node.ul){
			if( node.isRootNode() ) {
				$(node.ul).empty();
			} else {
				$(node.ul).remove();
				node.ul = null;
			}
			node.visit(function(n){
				n.li = n.ul = null;
			});
		}
	},
	/**Remove all descendants of ctx.node.
	* @param {EventData} ctx
	*/
	nodeRemoveChildren: function(ctx) {
		var subCtx,
			tree = ctx.tree,
			node = ctx.node,
			children = node.children;
			// opts = ctx.options;

		// FT.debug("nodeRemoveChildren()", node.toString());
		if(!children){
			return;
		}
		if( this.activeNode && this.activeNode.isDescendantOf(node)){
			this.activeNode.setActive(false); // TODO: don't fire events
		}
		if( this.focusNode && this.focusNode.isDescendantOf(node)){
			this.focusNode = null;
		}
		// TODO: persist must take care to clear select and expand cookies
		this.nodeRemoveChildMarkup(ctx);
		// Unlink children to support GC
		// TODO: also delete this.children (not possible using visit())
		subCtx = $.extend({}, ctx);
		node.triggerModifyChild("remove", null);
		node.visit(function(n){
			n.parent = null;
			tree._callHook("treeRegisterNode", tree, false, n);
		});
		if( node.lazy ){
			// 'undefined' would be interpreted as 'not yet loaded' for lazy nodes
			node.children = [];
		} else{
			node.children = null;
		}
		if( !node.isRootNode() ) {
			node.expanded = false;  // #449, #459
		}
		this.nodeRenderStatus(ctx);
	},
	/**Remove HTML markup for ctx.node and all its descendents.
	 * @param {EventData} ctx
	 */
	nodeRemoveMarkup: function(ctx) {
		var node = ctx.node;
		// FT.debug("nodeRemoveMarkup()", node.toString());
		// TODO: Unlink attr.ftnode to support GC
		if(node.li){
			$(node.li).remove();
			node.li = null;
		}
		this.nodeRemoveChildMarkup(ctx);
	},
	/**
	 * Create `&lt;li>&lt;span>..&lt;/span> .. &lt;/li>` tags for this node.
	 *
	 * This method takes care that all HTML markup is created that is required
	 * to display this node in its current state.
	 *
	 * Call this method to create new nodes, or after the strucuture
	 * was changed (e.g. after moving this node or adding/removing children)
	 * nodeRenderTitle() and nodeRenderStatus() are implied.
	 *
	 * &lt;code>
	 * &lt;li id='KEY' ftnode=NODE>
	 *     &lt;span class='fancytree-node fancytree-expanded fancytree-has-children fancytree-lastsib fancytree-exp-el fancytree-ico-e'>
	 *         &lt;span class="fancytree-expander">&lt;/span>
	 *         &lt;span class="fancytree-checkbox">&lt;/span> // only present in checkbox mode
	 *         &lt;span class="fancytree-icon">&lt;/span>
	 *         &lt;a href="#" class="fancytree-title"> Node 1 &lt;/a>
	 *     &lt;/span>
	 *     &lt;ul> // only present if node has children
	 *         &lt;li id='KEY' ftnode=NODE> child1 ... &lt;/li>
	 *         &lt;li id='KEY' ftnode=NODE> child2 ... &lt;/li>
	 *     &lt;/ul>
	 * &lt;/li>
	 * &lt;/code>
	 *
	 * @param {EventData} ctx
	 * @param {boolean} [force=false] re-render, even if html markup was already created
	 * @param {boolean} [deep=false] also render all descendants, even if parent is collapsed
	 * @param {boolean} [collapsed=false] force root node to be collapsed, so we can apply animated expand later
	 */
	nodeRender: function(ctx, force, deep, collapsed, _recursive) {
		/* This method must take care of all cases where the current data mode
		 * (i.e. node hierarchy) does not match the current markup.
		 *
		 * - node was not yet rendered:
		 *   create markup
		 * - node was rendered: exit fast
		 * - children have been added
		 * - children have been removed
		 */
		var childLI, childNode1, childNode2, i, l, next, subCtx,
			node = ctx.node,
			tree = ctx.tree,
			opts = ctx.options,
			aria = opts.aria,
			firstTime = false,
			parent = node.parent,
			isRootNode = !parent,
			children = node.children,
			successorLi = null;
		// FT.debug("nodeRender(" + !!force + ", " + !!deep + ")", node.toString());

		if( tree._enableUpdate === false ) {
			// tree.debug("no render", tree._enableUpdate);
			return;
		}
		if( ! isRootNode && ! parent.ul ) {
			// Calling node.collapse on a deep, unrendered node
			return;
		}
		_assert(isRootNode || parent.ul, "parent UL must exist");

		// Render the node
		if( !isRootNode ){
			// Discard markup on force-mode, or if it is not linked to parent <ul>
			if(node.li && (force || (node.li.parentNode !== node.parent.ul) ) ){
				if( node.li.parentNode === node.parent.ul ){
					// #486: store following node, so we can insert the new markup there later
					successorLi = node.li.nextSibling;
				}else{
					// May happen, when a top-level node was dropped over another
					this.debug("Unlinking " + node + " (must be child of " + node.parent + ")");
				}
//	            this.debug("nodeRemoveMarkup...");
				this.nodeRemoveMarkup(ctx);
			}
			// Create <li><span /> </li>
//			node.debug("render...");
			if( !node.li ) {
//	            node.debug("render... really");
				firstTime = true;
				node.li = document.createElement("li");
				node.li.ftnode = node;

				if( node.key && opts.generateIds ){
					node.li.id = opts.idPrefix + node.key;
				}
				node.span = document.createElement("span");
				node.span.className = "fancytree-node";
				if( aria && !node.tr ) {
					$(node.li).attr("role", "treeitem");
				}
				node.li.appendChild(node.span);

				// Create inner HTML for the <span> (expander, checkbox, icon, and title)
				this.nodeRenderTitle(ctx);

				// Allow tweaking and binding, after node was created for the first time
				if ( opts.createNode ){
					opts.createNode.call(tree, {type: "createNode"}, ctx);
				}
			}else{
//				this.nodeRenderTitle(ctx);
				this.nodeRenderStatus(ctx);
			}
			// Allow tweaking after node state was rendered
			if ( opts.renderNode ){
				opts.renderNode.call(tree, {type: "renderNode"}, ctx);
			}
		}

		// Visit child nodes
		if( children ){
			if( isRootNode || node.expanded || deep === true ) {
				// Create a UL to hold the children
				if( !node.ul ){
					node.ul = document.createElement("ul");
					if((collapsed === true && !_recursive) || !node.expanded){
						// hide top UL, so we can use an animation to show it later
						node.ul.style.display = "none";
					}
					if(aria){
						$(node.ul).attr("role", "group");
					}
					if ( node.li ) { // issue #67
						node.li.appendChild(node.ul);
					} else {
						node.tree.$div.append(node.ul);
					}
				}
				// Add child markup
				for(i=0, l=children.length; i<l; i++) {
					subCtx = $.extend({}, ctx, {node: children[i]});
					this.nodeRender(subCtx, force, deep, false, true);
				}
				// Remove <li> if nodes have moved to another parent
				childLI = node.ul.firstChild;
				while( childLI ){
					childNode2 = childLI.ftnode;
					if( childNode2 && childNode2.parent !== node ) {
						node.debug("_fixParent: remove missing " + childNode2, childLI);
						next = childLI.nextSibling;
						childLI.parentNode.removeChild(childLI);
						childLI = next;
					}else{
						childLI = childLI.nextSibling;
					}
				}
				// Make sure, that <li> order matches node.children order.
				childLI = node.ul.firstChild;
				for(i=0, l=children.length-1; i<l; i++) {
					childNode1 = children[i];
					childNode2 = childLI.ftnode;
					if( childNode1 !== childNode2 ) {
						// node.debug("_fixOrder: mismatch at index " + i + ": " + childNode1 + " != " + childNode2);
						node.ul.insertBefore(childNode1.li, childNode2.li);
					} else {
						childLI = childLI.nextSibling;
					}
				}
			}
		}else{
			// No children: remove markup if any
			if( node.ul ){
//				alert("remove child markup for " + node);
				this.warn("remove child markup for " + node);
				this.nodeRemoveChildMarkup(ctx);
			}
		}
		if( !isRootNode ){
			// Update element classes according to node state
			// this.nodeRenderStatus(ctx);
			// Finally add the whole structure to the DOM, so the browser can render
			if( firstTime ){
				// #486: successorLi is set, if we re-rendered (i.e. discarded)
				// existing markup, which  we want to insert at the same position.
				// (null is equivalent to append)
//				parent.ul.appendChild(node.li);
				parent.ul.insertBefore(node.li, successorLi);
			}
		}
	},
	/** Create HTML inside the node's outer &lt;span> (i.e. expander, checkbox,
	 * icon, and title).
	 *
	 * nodeRenderStatus() is implied.
	 * @param {EventData} ctx
	 * @param {string} [title] optinal new title
	 */
	nodeRenderTitle: function(ctx, title) {
		// set node connector images, links and text
		var checkbox, className, icon, nodeTitle, role, tabindex, tooltip, iconTooltip,
			node = ctx.node,
			tree = ctx.tree,
			opts = ctx.options,
			aria = opts.aria,
			level = node.getLevel(),
			ares = [];

		if(title !== undefined){
			node.title = title;
		}
		if ( !node.span || tree._enableUpdate === false ) {
			// Silently bail out if node was not rendered yet, assuming
			// node.render() will be called as the node becomes visible
			return;
		}
		// Connector (expanded, expandable or simple)
		role = (aria && node.hasChildren() !== false) ? " role='button'" : "";
		if( level < opts.minExpandLevel ) {
			if( !node.lazy ) {
				node.expanded = true;
			}
			if(level > 1){
				ares.push("<span " + role + " class='fancytree-expander fancytree-expander-fixed'></span>");
			}
			// .. else (i.e. for root level) skip expander/connector alltogether
		} else {
			ares.push("<span " + role + " class='fancytree-expander'></span>");
		}
		// Checkbox mode
		checkbox = FT.evalOption("checkbox", node, node, opts, false);

		if( checkbox && !node.isStatusNode() ) {
			role = aria ? " role='checkbox'" : "";
			className = "fancytree-checkbox";
			if( checkbox === "radio" || (node.parent && node.parent.radiogroup) ) {
				className += " fancytree-radio";
			}
			ares.push("<span " + role + " class='" + className + "'></span>");
		}
		// Folder or doctype icon
		if( node.data.iconClass !== undefined ) {  // 2015-11-16
			// Handle / warn about backward compatibility
			if( node.icon ) {
				$.error("'iconClass' node option is deprecated since v2.14.0: use 'icon' only instead");
			} else {
				node.warn("'iconClass' node option is deprecated since v2.14.0: use 'icon' instead");
				node.icon = node.data.iconClass;
			}
		}
		// If opts.icon is a callback and returns something other than undefined, use that
		// else if node.icon is a boolean or string, use that
		// else if opts.icon is a boolean or string, use that
		// else show standard icon (which may be different for folders or documents)
		icon = FT.evalOption("icon", node, node, opts, true);
		// if( typeof icon !== "boolean" ) {
		// 	// icon is defined, but not true/false: must be a string
		// 	icon = "" + icon;
		// }
		if( icon !== false ) {
			role = aria ? " role='presentation'" : "";

			iconTooltip = FT.evalOption("iconTooltip", node, node, opts, null);
			iconTooltip = iconTooltip ? " title='" + _escapeTooltip(iconTooltip) + "'" : "";

			if ( typeof icon === "string" ) {
				if( TEST_IMG.test(icon) ) {
					// node.icon is an image url. Prepend imagePath
					icon = (icon.charAt(0) === "/") ? icon : ((opts.imagePath || "") + icon);
					ares.push("<img src='" + icon + "' class='fancytree-icon'" + iconTooltip + " alt='' />");
				} else {
					ares.push("<span " + role + " class='fancytree-custom-icon " + icon +  "'" + iconTooltip + "></span>");
				}
			} else if ( icon.text ) {
				ares.push("<span " + role + " class='fancytree-custom-icon " +
					(icon.addClass || "") + "'" + iconTooltip + ">" + FT.escapeHtml(icon.text) + "</span>");
			} else if ( icon.html ) {
				ares.push("<span " + role + " class='fancytree-custom-icon " +
					(icon.addClass || "") + "'" + iconTooltip + ">" + icon.html + "</span>");
			} else {
				// standard icon: theme css will take care of this
				ares.push("<span " + role + " class='fancytree-icon'" + iconTooltip + "></span>");
			}
		}
		// Node title
		nodeTitle = "";
		if ( opts.renderTitle ){
			nodeTitle = opts.renderTitle.call(tree, {type: "renderTitle"}, ctx) || "";
		}
		if ( !nodeTitle ) {
			tooltip = FT.evalOption("tooltip", node, node, opts, null);
			if( tooltip === true ) {
				tooltip = node.title;
			}
			// if( node.tooltip ) {
			// 	tooltip = node.tooltip;
			// } else if ( opts.tooltip ) {
			// 	tooltip = opts.tooltip === true ? node.title : opts.tooltip.call(tree, node);
			// }
			tooltip = tooltip ? " title='" + _escapeTooltip(tooltip) + "'" : "";
			tabindex = opts.titlesTabbable ? " tabindex='0'" : "";

			nodeTitle = "<span class='fancytree-title'" +
				tooltip + tabindex + ">" +
				(opts.escapeTitles ? FT.escapeHtml(node.title) : node.title) +
				"</span>";
		}
		ares.push(nodeTitle);
		// Note: this will trigger focusout, if node had the focus
		//$(node.span).html(ares.join("")); // it will cleanup the jQuery data currently associated with SPAN (if any), but it executes more slowly
		node.span.innerHTML = ares.join("");
		// Update CSS classes
		this.nodeRenderStatus(ctx);
		if ( opts.enhanceTitle ){
			ctx.$title = $(">span.fancytree-title", node.span);
			nodeTitle = opts.enhanceTitle.call(tree, {type: "enhanceTitle"}, ctx) || "";
		}
	},
	/** Update element classes according to node state.
	 * @param {EventData} ctx
	 */
	nodeRenderStatus: function(ctx) {
		// Set classes for current status
		var $ariaElem,
			node = ctx.node,
			tree = ctx.tree,
			opts = ctx.options,
//			nodeContainer = node[tree.nodeContainerAttrName],
			hasChildren = node.hasChildren(),
			isLastSib = node.isLastSibling(),
			aria = opts.aria,
			cn = opts._classNames,
			cnList = [],
			statusElem = node[tree.statusClassPropName];

		if( !statusElem || tree._enableUpdate === false ){
			// if this function is called for an unrendered node, ignore it (will be updated on nect render anyway)
			return;
		}
		if( aria ) {
			$ariaElem = $(node.tr || node.li);
		}
		// Build a list of class names that we will add to the node <span>
		cnList.push(cn.node);
		if( tree.activeNode === node ){
			cnList.push(cn.active);
//			$(">span.fancytree-title", statusElem).attr("tabindex", "0");
//			tree.$container.removeAttr("tabindex");
		// }else{
//			$(">span.fancytree-title", statusElem).removeAttr("tabindex");
//			tree.$container.attr("tabindex", "0");
		}
		if( tree.focusNode === node ){
			cnList.push(cn.focused);
		}
		if( node.expanded ){
			cnList.push(cn.expanded);
		}
		if( aria ){
			if (hasChildren !== false) {
				$ariaElem.attr("aria-expanded", Boolean(node.expanded));
			}
			else {
				$ariaElem.removeAttr("aria-expanded");
			}
		}
		if( node.folder ){
			cnList.push(cn.folder);
		}
		if( hasChildren !== false ){
			cnList.push(cn.hasChildren);
		}
		// TODO: required?
		if( isLastSib ){
			cnList.push(cn.lastsib);
		}
		if( node.lazy && node.children == null ){
			cnList.push(cn.lazy);
		}
		if( node.partload ){
			cnList.push(cn.partload);
		}
		if( node.partsel ){
			cnList.push(cn.partsel);
		}
		if( FT.evalOption("unselectable", node, node, opts, false) ){
			cnList.push(cn.unselectable);
		}
		if( node._isLoading ){
			cnList.push(cn.loading);
		}
		if( node._error ){
			cnList.push(cn.error);
		}
		if( node.statusNodeType ) {
			cnList.push(cn.statusNodePrefix + node.statusNodeType);
		}
		if( node.selected ){
			cnList.push(cn.selected);
			if(aria){
				$ariaElem.attr("aria-selected", true);
			}
		}else if(aria){
			$ariaElem.attr("aria-selected", false);
		}
		if( node.extraClasses ){
			cnList.push(node.extraClasses);
		}
		// IE6 doesn't correctly evaluate multiple class names,
		// so we create combined class names that can be used in the CSS
		if( hasChildren === false ){
			cnList.push(cn.combinedExpanderPrefix + "n" +
					(isLastSib ? "l" : "")
					);
		}else{
			cnList.push(cn.combinedExpanderPrefix +
					(node.expanded ? "e" : "c") +
					(node.lazy && node.children == null ? "d" : "") +
					(isLastSib ? "l" : "")
					);
		}
		cnList.push(cn.combinedIconPrefix +
				(node.expanded ? "e" : "c") +
				(node.folder ? "f" : "")
				);
//        node.span.className = cnList.join(" ");
		statusElem.className = cnList.join(" ");

		// TODO: we should not set this in the <span> tag also, if we set it here:
		// Maybe most (all) of the classes should be set in LI instead of SPAN?
		if(node.li){
			// #719: we have to consider that there may be already other classes:
			$(node.li).toggleClass(cn.lastsib, isLastSib);
		}
	},
	/** Activate node.
	 * flag defaults to true.
	 * If flag is true, the node is activated (must be a synchronous operation)
	 * If flag is false, the node is deactivated (must be a synchronous operation)
	 * @param {EventData} ctx
	 * @param {boolean} [flag=true]
	 * @param {object} [opts] additional options. Defaults to {noEvents: false, noFocus: false}
	 * @returns {$.Promise}
	 */
	nodeSetActive: function(ctx, flag, callOpts) {
		// Handle user click / [space] / [enter], according to clickFolderMode.
		callOpts = callOpts || {};
		var subCtx,
			node = ctx.node,
			tree = ctx.tree,
			opts = ctx.options,
			noEvents = (callOpts.noEvents === true),
			noFocus = (callOpts.noFocus === true),
			isActive = (node === tree.activeNode);

		// flag defaults to true
		flag = (flag !== false);
		// node.debug("nodeSetActive", flag);

		if(isActive === flag){
			// Nothing to do
			return _getResolvedPromise(node);
		}else if(flag && !noEvents && this._triggerNodeEvent("beforeActivate", node, ctx.originalEvent) === false ){
			// Callback returned false
			return _getRejectedPromise(node, ["rejected"]);
		}
		if(flag){
			if(tree.activeNode){
				_assert(tree.activeNode !== node, "node was active (inconsistency)");
				subCtx = $.extend({}, ctx, {node: tree.activeNode});
				tree.nodeSetActive(subCtx, false);
				_assert(tree.activeNode === null, "deactivate was out of sync?");
			}
			if(opts.activeVisible){
				// If no focus is set (noFocus: true) and there is no focused node, this node is made visible.
				node.makeVisible({scrollIntoView: noFocus && tree.focusNode == null});
			}
			tree.activeNode = node;
			tree.nodeRenderStatus(ctx);
			if( !noFocus ) {
				tree.nodeSetFocus(ctx);
			}
			if( !noEvents ) {
				tree._triggerNodeEvent("activate", node, ctx.originalEvent);
			}
		}else{
			_assert(tree.activeNode === node, "node was not active (inconsistency)");
			tree.activeNode = null;
			this.nodeRenderStatus(ctx);
			if( !noEvents ) {
				ctx.tree._triggerNodeEvent("deactivate", node, ctx.originalEvent);
			}
		}
		return _getResolvedPromise(node);
	},
	/** Expand or collapse node, return Deferred.promise.
	 *
	 * @param {EventData} ctx
	 * @param {boolean} [flag=true]
	 * @param {object} [opts] additional options. Defaults to {noAnimation: false, noEvents: false}
	 * @returns {$.Promise} The deferred will be resolved as soon as the (lazy)
	 *     data was retrieved, rendered, and the expand animation finshed.
	 */
	nodeSetExpanded: function(ctx, flag, callOpts) {
		callOpts = callOpts || {};
		var _afterLoad, dfd, i, l, parents, prevAC,
			node = ctx.node,
			tree = ctx.tree,
			opts = ctx.options,
			noAnimation = (callOpts.noAnimation === true),
			noEvents = (callOpts.noEvents === true);

		// flag defaults to true
		flag = (flag !== false);

		// node.debug("nodeSetExpanded(" + flag + ")");

		if((node.expanded && flag) || (!node.expanded && !flag)){
			// Nothing to do
			// node.debug("nodeSetExpanded(" + flag + "): nothing to do");
			return _getResolvedPromise(node);
		}else if(flag && !node.lazy && !node.hasChildren() ){
			// Prevent expanding of empty nodes
			// return _getRejectedPromise(node, ["empty"]);
			return _getResolvedPromise(node);
		}else if( !flag && node.getLevel() < opts.minExpandLevel ) {
			// Prevent collapsing locked levels
			return _getRejectedPromise(node, ["locked"]);
		}else if ( !noEvents && this._triggerNodeEvent("beforeExpand", node, ctx.originalEvent) === false ){
			// Callback returned false
			return _getRejectedPromise(node, ["rejected"]);
		}
		// If this node inside a collpased node, no animation and scrolling is needed
		if( !noAnimation && !node.isVisible() ) {
			noAnimation = callOpts.noAnimation = true;
		}

		dfd = new $.Deferred();

		// Auto-collapse mode: collapse all siblings
		if( flag && !node.expanded && opts.autoCollapse ) {
			parents = node.getParentList(false, true);
			prevAC = opts.autoCollapse;
			try{
				opts.autoCollapse = false;
				for(i=0, l=parents.length; i<l; i++){
					// TODO: should return promise?
					this._callHook("nodeCollapseSiblings", parents[i], callOpts);
				}
			}finally{
				opts.autoCollapse = prevAC;
			}
		}
		// Trigger expand/collapse after expanding
		dfd.done(function(){
			var	lastChild = node.getLastChild();

			if( flag && opts.autoScroll && !noAnimation && lastChild ) {
				// Scroll down to last child, but keep current node visible
				lastChild.scrollIntoView(true, {topNode: node}).always(function(){
					if( !noEvents ) {
						ctx.tree._triggerNodeEvent(flag ? "expand" : "collapse", ctx);
					}
				});
			} else {
				if( !noEvents ) {
					ctx.tree._triggerNodeEvent(flag ? "expand" : "collapse", ctx);
				}
			}
		});
		// vvv Code below is executed after loading finished:
		_afterLoad = function(callback){
			var cn = opts._classNames,
				isVisible, isExpanded,
				effect = opts.toggleEffect;

			node.expanded = flag;
			// Create required markup, but make sure the top UL is hidden, so we
			// can animate later
			tree._callHook("nodeRender", ctx, false, false, true);

			// Hide children, if node is collapsed
			if( node.ul ) {
				isVisible = (node.ul.style.display !== "none");
				isExpanded = !!node.expanded;
				if ( isVisible === isExpanded ) {
					node.warn("nodeSetExpanded: UL.style.display already set");

				} else if ( !effect || noAnimation ) {
					node.ul.style.display = ( node.expanded || !parent ) ? "" : "none";

				} else {
					// The UI toggle() effect works with the ext-wide extension,
					// while jQuery.animate() has problems when the title span
					// has positon: absolute.
					// Since jQuery UI 1.12, the blind effect requires the parent
					// element to have 'position: relative'.
					// See #716, #717
					$(node.li).addClass(cn.animating);  // #717
//					node.info("fancytree-animating start: " + node.li.className);
					$(node.ul)
						.addClass(cn.animating)  // # 716
						.toggle(effect.effect, effect.options, effect.duration, function(){
//							node.info("fancytree-animating end: " + node.li.className);
							$(this).removeClass(cn.animating);  // #716
							$(node.li).removeClass(cn.animating);  // #717
							callback();
						});
					return;
				}
			}
			callback();
		};
		// ^^^ Code above is executed after loading finshed.

		// Load lazy nodes, if any. Then continue with _afterLoad()
		if(flag && node.lazy && node.hasChildren() === undefined){
			// node.debug("nodeSetExpanded: load start...");
			node.load().done(function(){
				// node.debug("nodeSetExpanded: load done");
				if(dfd.notifyWith){ // requires jQuery 1.6+
					dfd.notifyWith(node, ["loaded"]);
				}
				_afterLoad(function () { dfd.resolveWith(node); });
			}).fail(function(errMsg){
				_afterLoad(function () { dfd.rejectWith(node, ["load failed (" + errMsg + ")"]); });
			});
/*
			var source = tree._triggerNodeEvent("lazyLoad", node, ctx.originalEvent);
			_assert(typeof source !== "boolean", "lazyLoad event must return source in data.result");
			node.debug("nodeSetExpanded: load start...");
			this._callHook("nodeLoadChildren", ctx, source).done(function(){
				node.debug("nodeSetExpanded: load done");
				if(dfd.notifyWith){ // requires jQuery 1.6+
					dfd.notifyWith(node, ["loaded"]);
				}
				_afterLoad.call(tree);
			}).fail(function(errMsg){
				dfd.rejectWith(node, ["load failed (" + errMsg + ")"]);
			});
*/
		}else{
			_afterLoad(function () { dfd.resolveWith(node); });
		}
		// node.debug("nodeSetExpanded: returns");
		return dfd.promise();
	},
	/** Focus or blur this node.
	 * @param {EventData} ctx
	 * @param {boolean} [flag=true]
	 */
	nodeSetFocus: function(ctx, flag) {
		// ctx.node.debug("nodeSetFocus(" + flag + ")");
		var ctx2,
			tree = ctx.tree,
			node = ctx.node,
			opts = tree.options,
			// et = ctx.originalEvent && ctx.originalEvent.type,
			isInput = ctx.originalEvent ? $(ctx.originalEvent.target).is(":input") : false;

		flag = (flag !== false);

		// (node || tree).debug("nodeSetFocus(" + flag + "), event: " + et + ", isInput: "+ isInput);
		// Blur previous node if any
		if(tree.focusNode){
			if(tree.focusNode === node && flag){
				// node.debug("nodeSetFocus(" + flag + "): nothing to do");
				return;
			}
			ctx2 = $.extend({}, ctx, {node: tree.focusNode});
			tree.focusNode = null;
			this._triggerNodeEvent("blur", ctx2);
			this._callHook("nodeRenderStatus", ctx2);
		}
		// Set focus to container and node
		if(flag){
			if( !this.hasFocus() ){
				node.debug("nodeSetFocus: forcing container focus");
				this._callHook("treeSetFocus", ctx, true, {calledByNode: true});
			}
			node.makeVisible({scrollIntoView: false});
			tree.focusNode = node;
			if( opts.titlesTabbable ) {
				if( !isInput ) { // #621
					$(node.span).find(".fancytree-title").focus();
				}
			} else {
				// We cannot set KB focus to a node, so use the tree container
				// #563, #570: IE scrolls on every call to .focus(), if the container
				// is partially outside the viewport. So do it only, when absolutely
				// neccessary:
				if( $(document.activeElement).closest(".fancytree-container").length === 0 ) {
					$(tree.$container).focus();
				}
			}
			if( opts.aria ){
				// Set active descendant to node's span ID (create one, if needed)
				$(tree.$container).attr("aria-activedescendant",
					$( node.tr || node.li ).uniqueId().attr("id"));
					// "ftal_" + opts.idPrefix + node.key);
			}
//			$(node.span).find(".fancytree-title").focus();
			this._triggerNodeEvent("focus", ctx);
//          if( opts.autoActivate ){
//              tree.nodeSetActive(ctx, true);
//          }
			if( opts.autoScroll ){
				node.scrollIntoView();
			}
			this._callHook("nodeRenderStatus", ctx);
		}
	},
	/** (De)Select node, return new status (sync).
	 *
	 * @param {EventData} ctx
	 * @param {boolean} [flag=true]
	 * @param {object} [opts] additional options. Defaults to {noEvents: false,
	 *     propagateDown: null, propagateUp: null,
	 *     callback: null,
	 *     }
	 * @returns {boolean} previous status
	 */
	nodeSetSelected: function(ctx, flag, callOpts) {
		callOpts = callOpts || {};
		var node = ctx.node,
			tree = ctx.tree,
			opts = ctx.options,
			noEvents = (callOpts.noEvents === true),
			parent = node.parent;

		// flag defaults to true
		flag = (flag !== false);

		// node.debug("nodeSetSelected(" + flag + ")", ctx);

		// Cannot (de)select unselectable nodes directly (only by propagation or
		// by setting the `.selected` property)
		if( FT.evalOption("unselectable", node, node, opts, false) ){
			return;
		}

		// Remember the user's intent, in case down -> up propagation prevents
		// applying it to node.selected
		node._lastSelectIntent = flag;

		// Nothing to do?
		/*jshint -W018 */  // Confusing use of '!'
		if( !!node.selected === flag ){
			if( opts.selectMode === 3 && node.partsel && !flag ){
				// If propagation prevented selecting this node last time, we still
				// want to allow to apply setSelected(false) now
			}else{
				return flag;
			}
		}
		/*jshint +W018 */

		if( !noEvents &&
			this._triggerNodeEvent("beforeSelect", node, ctx.originalEvent) === false ) {
				return !!node.selected;
		}
		if(flag && opts.selectMode === 1){
			// single selection mode (we don't uncheck all tree nodes, for performance reasons)
			if(tree.lastSelectedNode){
				tree.lastSelectedNode.setSelected(false);
			}
			node.selected = flag;
		}else if(opts.selectMode === 3 && parent && !parent.radiogroup && !node.radiogroup){
			// multi-hierarchical selection mode
			node.selected = flag;
			node.fixSelection3AfterClick(callOpts);
		}else if(parent && parent.radiogroup){
			node.visitSiblings(function(n){
				n._changeSelectStatusAttrs(flag && n === node);
			}, true);
		}else{
			// default: selectMode: 2, multi selection mode
			node.selected = flag;
		}
		this.nodeRenderStatus(ctx);
		tree.lastSelectedNode = flag ? node : null;
		if( !noEvents ) {
			tree._triggerNodeEvent("select", ctx);
		}
	},
	/** Show node status (ok, loading, error, nodata) using styles and a dummy child node.
	 *
	 * @param {EventData} ctx
	 * @param status
	 * @param message
	 * @param details
	 * @since 2.3
	 */
	nodeSetStatus: function(ctx, status, message, details) {
		var node = ctx.node,
			tree = ctx.tree;

		function _clearStatusNode() {
			// Remove dedicated dummy node, if any
			var firstChild = ( node.children ? node.children[0] : null );
			if ( firstChild && firstChild.isStatusNode() ) {
				try{
					// I've seen exceptions here with loadKeyPath...
					if(node.ul){
						node.ul.removeChild(firstChild.li);
						firstChild.li = null; // avoid leaks (DT issue 215)
					}
				}catch(e){}
				if( node.children.length === 1 ){
					node.children = [];
				}else{
					node.children.shift();
				}
			}
		}
		function _setStatusNode(data, type) {
			// Create/modify the dedicated dummy node for 'loading...' or
			// 'error!' status. (only called for direct child of the invisible
			// system root)
			var firstChild = ( node.children ? node.children[0] : null );
			if ( firstChild && firstChild.isStatusNode() ) {
				$.extend(firstChild, data);
				firstChild.statusNodeType = type;
				tree._callHook("nodeRenderTitle", firstChild);
			} else {
				node._setChildren([data]);
				node.children[0].statusNodeType = type;
				tree.render();
			}
			return node.children[0];
		}

		switch( status ){
		case "ok":
			_clearStatusNode();
			node._isLoading = false;
			node._error = null;
			node.renderStatus();
			break;
		case "loading":
			if( !node.parent ) {
				_setStatusNode({
					title: tree.options.strings.loading + (message ? " (" + message + ")" : ""),
					// icon: true,  // needed for 'loding' icon
					checkbox: false,
					tooltip: details
				}, status);
			}
			node._isLoading = true;
			node._error = null;
			node.renderStatus();
			break;
		case "error":
			_setStatusNode({
				title: tree.options.strings.loadError + (message ? " (" + message + ")" : ""),
				// icon: false,
				checkbox: false,
				tooltip: details
			}, status);
			node._isLoading = false;
			node._error = { message: message, details: details };
			node.renderStatus();
			break;
		case "nodata":
			_setStatusNode({
				title: tree.options.strings.noData,
				// icon: false,
				checkbox: false,
				tooltip: details
			}, status);
			node._isLoading = false;
			node._error = null;
			node.renderStatus();
			break;
		default:
			$.error("invalid node status " + status);
		}
	},
	/**
	 *
	 * @param {EventData} ctx
	 */
	nodeToggleExpanded: function(ctx) {
		return this.nodeSetExpanded(ctx, !ctx.node.expanded);
	},
	/**
	 * @param {EventData} ctx
	 */
	nodeToggleSelected: function(ctx) {
		var node = ctx.node,
			flag = !node.selected;

		// In selectMode: 3 this node may be unselected+partsel, even if
		// setSelected(true) was called before, due to `unselectable` children.
		// In this case, we now toggle as `setSelected(false)`
		if( node.partsel && !node.selected && node._lastSelectIntent === true ) {
			flag = false;
			node.selected = true;  // so it is not considered 'nothing to do'
		}
		node._lastSelectIntent = flag;
		return this.nodeSetSelected(ctx, flag);
	},
	/** Remove all nodes.
	 * @param {EventData} ctx
	 */
	treeClear: function(ctx) {
		var tree = ctx.tree;
		tree.activeNode = null;
		tree.focusNode = null;
		tree.$div.find(">ul.fancytree-container").empty();
		// TODO: call destructors and remove reference loops
		tree.rootNode.children = null;
	},
	/** Widget was created (called only once, even it re-initialized).
	 * @param {EventData} ctx
	 */
	treeCreate: function(ctx) {
	},
	/** Widget was destroyed.
	 * @param {EventData} ctx
	 */
	treeDestroy: function(ctx) {
		this.$div.find(">ul.fancytree-container").remove();
		this.$source && this.$source.removeClass("fancytree-helper-hidden");
	},
	/** Widget was (re-)initialized.
	 * @param {EventData} ctx
	 */
	treeInit: function(ctx) {
		var tree = ctx.tree,
			opts = tree.options;

		//this.debug("Fancytree.treeInit()");
		// Add container to the TAB chain
		// See http://www.w3.org/TR/wai-aria-practices/#focus_activedescendant
		// #577: Allow to set tabindex to "0", "-1" and ""
		tree.$container.attr("tabindex", opts.tabindex);

		// Copy some attributes to tree.data
		$.each(TREE_ATTRS, function(i, attr) {
			if( opts[attr] !== undefined ){
				tree.info("Move option " + attr + " to tree");
				tree[attr] = opts[attr];
				delete opts[attr];
			}
		});

		if( opts.rtl ) {
			tree.$container.attr("DIR", "RTL").addClass("fancytree-rtl");
		}else{
			tree.$container.removeAttr("DIR").removeClass("fancytree-rtl");
		}
		if( opts.aria ){
			tree.$container.attr("role", "tree");
			if( opts.selectMode !== 1 ) {
				tree.$container.attr("aria-multiselectable", true);
			}
		}
		this.treeLoad(ctx);
	},
	/** Parse Fancytree from source, as configured in the options.
	 * @param {EventData} ctx
	 * @param {object} [source] optional new source (use last data otherwise)
	 */
	treeLoad: function(ctx, source) {
		var metaData, type, $ul,
			tree = ctx.tree,
			$container = ctx.widget.element,
			dfd,
			// calling context for root node
			rootCtx = $.extend({}, ctx, {node: this.rootNode});

		if(tree.rootNode.children){
			this.treeClear(ctx);
		}
		source = source || this.options.source;

		if(!source){
			type = $container.data("type") || "html";
			switch(type){
			case "html":
				$ul = $container.find(">ul:first");
				$ul.addClass("ui-fancytree-source fancytree-helper-hidden");
				source = $.ui.fancytree.parseHtml($ul);
				// allow to init tree.data.foo from <ul data-foo=''>
				this.data = $.extend(this.data, _getElementDataAsDict($ul));
				break;
			case "json":
				source = $.parseJSON($container.text());
				// $container already contains the <ul>, but we remove the plain (json) text
				// $container.empty();
				$container.contents().filter(function(){
					return (this.nodeType === 3);
				}).remove();
				if( $.isPlainObject(source) ){
					// We got {foo: 'abc', children: [...]}
					_assert($.isArray(source.children), "if an object is passed as source, it must contain a 'children' array (all other properties are added to 'tree.data')");
					metaData = source;
					source = source.children;
					delete metaData.children;
					// Copy some attributes to tree.data
					$.each(TREE_ATTRS, function(i, attr) {
						if( metaData[attr] !== undefined ){
							tree[attr] = metaData[attr];
							delete metaData[attr];
						}
					});
					// Copy extra properties to tree.data.foo
					$.extend(tree.data, metaData);
				}
				break;
			default:
				$.error("Invalid data-type: " + type);
			}
		}else if(typeof source === "string"){
			// TODO: source is an element ID
			$.error("Not implemented");
		}

		// Trigger fancytreeinit after nodes have been loaded
		dfd = this.nodeLoadChildren(rootCtx, source).done(function(){
			tree.render();
			if( ctx.options.selectMode === 3 ){
				tree.rootNode.fixSelection3FromEndNodes();
			}
			if( tree.activeNode && tree.options.activeVisible ) {
				tree.activeNode.makeVisible();
			}
			tree._triggerTreeEvent("init", null, { status: true });
		}).fail(function(){
			tree.render();
			tree._triggerTreeEvent("init", null, { status: false });
		});
		return dfd;
	},
	/** Node was inserted into or removed from the tree.
	 * @param {EventData} ctx
	 * @param {boolean} add
	 * @param {FancytreeNode} node
	 */
	treeRegisterNode: function(ctx, add, node) {
	},
	/** Widget got focus.
	 * @param {EventData} ctx
	 * @param {boolean} [flag=true]
	 */
	treeSetFocus: function(ctx, flag, callOpts) {
		var targetNode;

		flag = (flag !== false);

		// this.debug("treeSetFocus(" + flag + "), callOpts: ", callOpts, this.hasFocus());
		// this.debug("    focusNode: " + this.focusNode);
		// this.debug("    activeNode: " + this.activeNode);
		if( flag !== this.hasFocus() ){
			this._hasFocus = flag;
			if( !flag && this.focusNode ) {
				// Node also looses focus if widget blurs
				this.focusNode.setFocus(false);
			} else if ( flag && (!callOpts || !callOpts.calledByNode) ) {
				$(this.$container).focus();
			}
			this.$container.toggleClass("fancytree-treefocus", flag);
			this._triggerTreeEvent(flag ? "focusTree" : "blurTree");
			if( flag && !this.activeNode ) {
				// #712: Use last mousedowned node ('click' event fires after focusin)
				targetNode = this._lastMousedownNode || this.getFirstChild();
				targetNode && targetNode.setFocus();
			}
		}
	},
	/** Widget option was set using `$().fancytree("option", "foo", "bar")`.
	 * @param {EventData} ctx
	 * @param {string} key option name
	 * @param {any} value option value
	 */
	treeSetOption: function(ctx, key, value) {
		var tree = ctx.tree,
			callDefault = true,
			callCreate = false,
			callRender = false;

		switch( key ) {
		case "aria":
		case "checkbox":
		case "icon":
		case "minExpandLevel":
		case "tabindex":
			// tree._callHook("treeCreate", tree);
			callCreate = true;
			callRender = true;
			break;
		case "escapeTitles":
		case "tooltip":
			callRender = true;
			break;
		case "rtl":
			if( value === false ) {
				tree.$container.removeAttr("DIR").removeClass("fancytree-rtl");
			}else{
				tree.$container.attr("DIR", "RTL").addClass("fancytree-rtl");
			}
			callRender = true;
			break;
		case "source":
			callDefault = false;
			tree._callHook("treeLoad", tree, value);
			callRender = true;
			break;
		}
		tree.debug("set option " + key + "=" + value + " <" + typeof(value) + ">");
		if(callDefault){
			if( this.widget._super ) {
				// jQuery UI 1.9+
				this.widget._super.call( this.widget, key, value );
			} else {
				// jQuery UI <= 1.8, we have to manually invoke the _setOption method from the base widget
				$.Widget.prototype._setOption.call(this.widget, key, value);
			}
		}
		if(callCreate){
			tree._callHook("treeCreate", tree);
		}
		if(callRender){
			tree.render(true, false);  // force, not-deep
		}
	}
});


/* ******************************************************************************
 * jQuery UI widget boilerplate
 */

/**
 * The plugin (derrived from <a href=" http://api.jqueryui.com/jQuery.widget/">jQuery.Widget</a>).<br>
 * This constructor is not called directly. Use `$(selector).fancytree({})`
 * to initialize the plugin instead.<br>
 * <pre class="sh_javascript sunlight-highlight-javascript">// Access widget methods and members:
 * var tree = $("#tree").fancytree("getTree");
 * var node = $("#tree").fancytree("getActiveNode", "1234");
 * </pre>
 *
 * @mixin Fancytree_Widget
 */

$.widget("ui.fancytree",
	/** @lends Fancytree_Widget# */
	{
	/**These options will be used as defaults
	 * @type {FancytreeOptions}
	 */
	options:
	{
		activeVisible: true,
		ajax: {
			type: "GET",
			cache: false, // false: Append random '_' argument to the request url to prevent caching.
//          timeout: 0, // >0: Make sure we get an ajax error if server is unreachable
			dataType: "json" // Expect json format and pass json object to callbacks.
		},  //
		aria: true,
		autoActivate: true,
		autoCollapse: false,
		autoScroll: false,
		checkbox: false,
		clickFolderMode: 4,
		debugLevel: null, // 0..4 (null: use global setting $.ui.fancytree.debugInfo)
		disabled: false, // TODO: required anymore?
		enableAspx: true,
		escapeTitles: false,
		extensions: [],
		// fx: { height: "toggle", duration: 200 },
		// toggleEffect: { effect: "drop", options: {direction: "left"}, duration: 200 },
		// toggleEffect: { effect: "slide", options: {direction: "up"}, duration: 200 },
		toggleEffect: { effect: "blind", options: {direction: "vertical", scale: "box"}, duration: 200 },
		generateIds: false,
		icon: true,
		idPrefix: "ft_",
		focusOnSelect: false,
		keyboard: true,
		keyPathSeparator: "/",
		minExpandLevel: 1,
		quicksearch: false,
		rtl: false,
		scrollOfs: {top: 0, bottom: 0},
		scrollParent: null,
		selectMode: 2,
		strings: {
			loading: "Loading...",  // &#8230; would be escaped when escapeTitles is true
			loadError: "Load error!",
			moreData: "More...",
			noData: "No data."
		},
		tabindex: "0",
		titlesTabbable: false,
		tooltip: false,
		_classNames: {
			node: "fancytree-node",
			folder: "fancytree-folder",
			animating: "fancytree-animating",
			combinedExpanderPrefix: "fancytree-exp-",
			combinedIconPrefix: "fancytree-ico-",
			hasChildren: "fancytree-has-children",
			active: "fancytree-active",
			selected: "fancytree-selected",
			expanded: "fancytree-expanded",
			lazy: "fancytree-lazy",
			focused: "fancytree-focused",
			partload: "fancytree-partload",
			partsel: "fancytree-partsel",
			radio: "fancytree-radio",
			// radiogroup: "fancytree-radiogroup",
			unselectable: "fancytree-unselectable",
			lastsib: "fancytree-lastsib",
			loading: "fancytree-loading",
			error: "fancytree-error",
			statusNodePrefix: "fancytree-statusnode-"
		},
		// events
		lazyLoad: null,
		postProcess: null
	},
	/* Set up the widget, Called on first $().fancytree() */
	_create: function() {
		this.tree = new Fancytree(this);

		this.$source = this.source || this.element.data("type") === "json" ? this.element
			: this.element.find(">ul:first");
		// Subclass Fancytree instance with all enabled extensions
		var extension, extName, i,
			opts = this.options,
			extensions = opts.extensions,
			base = this.tree;

		for(i=0; i<extensions.length; i++){
			extName = extensions[i];
			extension = $.ui.fancytree._extensions[extName];
			if(!extension){
				$.error("Could not apply extension '" + extName + "' (it is not registered, did you forget to include it?)");
			}
			// Add extension options as tree.options.EXTENSION
//			_assert(!this.tree.options[extName], "Extension name must not exist as option name: " + extName);
			this.tree.options[extName] = $.extend(true, {}, extension.options, this.tree.options[extName]);
			// Add a namespace tree.ext.EXTENSION, to hold instance data
			_assert(this.tree.ext[extName] === undefined, "Extension name must not exist as Fancytree.ext attribute: '" + extName + "'");
//			this.tree[extName] = extension;
			this.tree.ext[extName] = {};
			// Subclass Fancytree methods using proxies.
			_subclassObject(this.tree, base, extension, extName);
			// current extension becomes base for the next extension
			base = extension;
		}
		//
		if( opts.icons !== undefined ) {  // 2015-11-16
			if( opts.icon !== true ) {
				$.error("'icons' tree option is deprecated since v2.14.0: use 'icon' only instead");
			} else {
				this.tree.warn("'icons' tree option is deprecated since v2.14.0: use 'icon' instead");
				opts.icon = opts.icons;
			}
		}
		if( opts.iconClass !== undefined ) {  // 2015-11-16
			if( opts.icon ) {
				$.error("'iconClass' tree option is deprecated since v2.14.0: use 'icon' only instead");
			} else {
				this.tree.warn("'iconClass' tree option is deprecated since v2.14.0: use 'icon' instead");
				opts.icon = opts.iconClass;
			}
		}
		if( opts.tabbable !== undefined ) {  // 2016-04-04
			opts.tabindex = opts.tabbable ? "0" : "-1";
			this.tree.warn("'tabbable' tree option is deprecated since v2.17.0: use 'tabindex='" + opts.tabindex + "' instead");
		}
		//
		this.tree._callHook("treeCreate", this.tree);
		// Note: 'fancytreecreate' event is fired by widget base class
//        this.tree._triggerTreeEvent("create");
	},

	/* Called on every $().fancytree() */
	_init: function() {
		this.tree._callHook("treeInit", this.tree);
		// TODO: currently we call bind after treeInit, because treeInit
		// might change tree.$container.
		// It would be better, to move event binding into hooks altogether
		this._bind();
	},

	/* Use the _setOption method to respond to changes to options */
	_setOption: function(key, value) {
		return this.tree._callHook("treeSetOption", this.tree, key, value);
	},

	/** Use the destroy method to clean up any modifications your widget has made to the DOM */
	destroy: function() {
		this._unbind();
		this.tree._callHook("treeDestroy", this.tree);
		// In jQuery UI 1.8, you must invoke the destroy method from the base widget
		$.Widget.prototype.destroy.call(this);
		// TODO: delete tree and nodes to make garbage collect easier?
		// TODO: In jQuery UI 1.9 and above, you would define _destroy instead of destroy and not call the base method
	},

	// -------------------------------------------------------------------------

	/* Remove all event handlers for our namespace */
	_unbind: function() {
		var ns = this.tree._ns;
		this.element.off(ns);
		this.tree.$container.off(ns);
		$(document).off(ns);
	},
	/* Add mouse and kyboard handlers to the container */
	_bind: function() {
		var that = this,
			opts = this.options,
			tree = this.tree,
			ns = tree._ns
			// selstartEvent = ( $.support.selectstart ? "selectstart" : "mousedown" )
			;

		// Remove all previuous handlers for this tree
		this._unbind();

		//alert("keydown" + ns + "foc=" + tree.hasFocus() + tree.$container);
		// tree.debug("bind events; container: ", tree.$container);
		tree.$container.on("focusin" + ns + " focusout" + ns, function(event){
			var node = FT.getNode(event),
				flag = (event.type === "focusin");

			if( !flag && node && $(event.target).is("a") ) {
				// #764
				node.debug("Ignored focusout on embedded <a> element.");
				return;
			}
			// tree.treeOnFocusInOut.call(tree, event);
			// tree.debug("Tree container got event " + event.type, node, event, FT.getEventTarget(event));
			if( flag ) {
				if( tree._getExpiringValue("focusin") ) {
					// #789: IE 11 may send duplicate focusin events
					FT.info("Ignored double focusin.");
					return;
				}
				tree._setExpiringValue("focusin", true, 50);

				if( !node ) {
					// #789: IE 11 may send focusin before mousdown(?)
					node = tree._getExpiringValue("mouseDownNode");
					if( node ) { FT.info("Reconstruct mouse target for focusin from recent event."); }
				}
			}
			if(node){
				// For example clicking into an <input> that is part of a node
				tree._callHook("nodeSetFocus", tree._makeHookContext(node, event), flag);
			}else{
				if( tree.tbody && $(event.target).parents("table.fancytree-container > thead").length ) {
					// #767: ignore events in the table's header
					tree.debug("Ignore focus event outside table body.", event);
				} else {
					tree._callHook("treeSetFocus", tree, flag);
				}
			}

		}).on("selectstart" + ns, "span.fancytree-title", function(event){
			// prevent mouse-drags to select text ranges
			// tree.debug("<span title> got event " + event.type);
			event.preventDefault();

		}).on("keydown" + ns, function(event){
			// TODO: also bind keyup and keypress
			// tree.debug("got event " + event.type + ", hasFocus:" + tree.hasFocus());
			// if(opts.disabled || opts.keyboard === false || !tree.hasFocus() ){
			if(opts.disabled || opts.keyboard === false ){
				return true;
			}
			var res,
				node = tree.focusNode, // node may be null
				ctx = tree._makeHookContext(node || tree, event),
				prevPhase = tree.phase;

			try {
				tree.phase = "userEvent";
				// If a 'fancytreekeydown' handler returns false, skip the default
				// handling (implemented by tree.nodeKeydown()).
				if(node){
					res = tree._triggerNodeEvent("keydown", node, event);
				}else{
					res = tree._triggerTreeEvent("keydown", event);
				}
				if ( res === "preventNav" ){
					res = true; // prevent keyboard navigation, but don't prevent default handling of embedded input controls
				} else if ( res !== false ){
					res = tree._callHook("nodeKeydown", ctx);
				}
				return res;
			} finally {
				tree.phase = prevPhase;
			}

		}).on("mousedown" + ns, function(event){
			var et = FT.getEventTarget(event);
			// that.tree.debug("event(" + event.type + "): node: ", et.node);
			// #712: Store the clicked node, so we can use it when we get a focusin event
			//       ('click' event fires after focusin)
			// tree.debug("event(" + event.type + "): node: ", et.node);
			tree._lastMousedownNode = et ? et.node : null;
			// #789: Store the node also for a short period, so we can use it
			// in a *resulting* focusin event
			tree._setExpiringValue("mouseDownNode", tree._lastMousedownNode);

		}).on("click" + ns + " dblclick" + ns, function(event){
			if(opts.disabled){
				return true;
			}
			var ctx,
				et = FT.getEventTarget(event),
				node = et.node,
				tree = that.tree,
				prevPhase = tree.phase;

			// that.tree.debug("event(" + event.type + "): node: ", node);
			if( !node ){
				return true;  // Allow bubbling of other events
			}
			ctx = tree._makeHookContext(node, event);
			// that.tree.debug("event(" + event.type + "): node: ", node);
			try {
				tree.phase = "userEvent";
				switch(event.type) {
				case "click":
					ctx.targetType = et.type;
					if( node.isPagingNode() ) {
						return tree._triggerNodeEvent("clickPaging", ctx, event) === true;
					}
					return ( tree._triggerNodeEvent("click", ctx, event) === false ) ? false : tree._callHook("nodeClick", ctx);
				case "dblclick":
					ctx.targetType = et.type;
					return ( tree._triggerNodeEvent("dblclick", ctx, event) === false ) ? false : tree._callHook("nodeDblclick", ctx);
				}
			} finally {
				tree.phase = prevPhase;
			}
		});
	},
	/** Return the active node or null.
	 * @returns {FancytreeNode}
	 */
	getActiveNode: function() {
		return this.tree.activeNode;
	},
	/** Return the matching node or null.
	 * @param {string} key
	 * @returns {FancytreeNode}
	 */
	getNodeByKey: function(key) {
		return this.tree.getNodeByKey(key);
	},
	/** Return the invisible system root node.
	 * @returns {FancytreeNode}
	 */
	getRootNode: function() {
		return this.tree.rootNode;
	},
	/** Return the current tree instance.
	 * @returns {Fancytree}
	 */
	getTree: function() {
		return this.tree;
	}
});

// $.ui.fancytree was created by the widget factory. Create a local shortcut:
FT = $.ui.fancytree;

/**
 * Static members in the `$.ui.fancytree` namespace.<br>
 * <br>
 * <pre class="sh_javascript sunlight-highlight-javascript">// Access static members:
 * var node = $.ui.fancytree.getNode(element);
 * alert($.ui.fancytree.version);
 * </pre>
 *
 * @mixin Fancytree_Static
 */
$.extend($.ui.fancytree,
	/** @lends Fancytree_Static# */
	{
	/** @type {string} */
	version: "2.28.1",      // Set to semver by 'grunt release'
	/** @type {string} */
	buildType: "production", // Set to 'production' by 'grunt build'
	/** @type {int} */
	debugLevel: 3,            // Set to 3 by 'grunt build'
							  // Used by $.ui.fancytree.debug() and as default for tree.options.debugLevel

	_nextId: 1,
	_nextNodeKey: 1,
	_extensions: {},
	// focusTree: null,

	/** Expose class object as $.ui.fancytree._FancytreeClass */
	_FancytreeClass: Fancytree,
	/** Expose class object as $.ui.fancytree._FancytreeNodeClass */
	_FancytreeNodeClass: FancytreeNode,
	/* Feature checks to provide backwards compatibility */
	jquerySupports: {
		// http://jqueryui.com/upgrade-guide/1.9/#deprecated-offset-option-merged-into-my-and-at
		positionMyOfs: isVersionAtLeast($.ui.version, 1, 9)
		},
	/** Throw an error if condition fails (debug method).
	 * @param {boolean} cond
	 * @param {string} msg
	 */
	assert: function(cond, msg){
		return _assert(cond, msg);
	},
	/** Create a new Fancytree instance on a target element.
	 *
	 * @param {Element | jQueryObject | string} el Target DOM element or selector
	 * @param {FancytreeOptions} [opts] Fancytree options
	 * @returns {Fancytree} new tree instance
	 * @example
	 * var tree = $.ui.fancytree.createTree("#tree", {
	 *     source: {url: "my/webservice"}
	 * }); // Create tree for this matching element
	 *
	 * @since 2.25
	 */
	createTree: function(el, opts){
		var tree = $(el).fancytree(opts).fancytree("getTree");
		return tree;
	},
	/** Return a function that executes *fn* at most every *timeout* ms.
	 * @param {integer} timeout
	 * @param {function} fn
	 * @param {boolean} [invokeAsap=false]
	 * @param {any} [ctx]
	 */
	debounce: function(timeout, fn, invokeAsap, ctx) {
		var timer;
		if(arguments.length === 3 && typeof invokeAsap !== "boolean") {
			ctx = invokeAsap;
			invokeAsap = false;
		}
		return function() {
			var args = arguments;
			ctx = ctx || this;
			invokeAsap && !timer && fn.apply(ctx, args);
			clearTimeout(timer);
			timer = setTimeout(function() {
				invokeAsap || fn.apply(ctx, args);
				timer = null;
			}, timeout);
		};
	},
	/** Write message to console if debugLevel >= 4
	 * @param {string} msg
	 */
	debug: function(msg){
		/*jshint expr:true */
		($.ui.fancytree.debugLevel >= 4) && consoleApply("log", arguments);
	},
	/** Write error message to console if debugLevel >= 1.
	 * @param {string} msg
	 */
	error: function(msg){
		($.ui.fancytree.debugLevel >= 1) && consoleApply("error", arguments);
	},
	/** Convert &lt;, &gt;, &amp;, &quot;, &#39;, &#x2F; to the equivalent entities.
	 *
	 * @param {string} s
	 * @returns {string}
	 */
	escapeHtml: function(s){
		return ("" + s).replace(REX_HTML, function(s) {
			return ENTITY_MAP[s];
		});
	},
	/** Make jQuery.position() arguments backwards compatible, i.e. if
	 * jQuery UI version <= 1.8, convert
	 *   { my: "left+3 center", at: "left bottom", of: $target }
	 * to
	 *   { my: "left center", at: "left bottom", of: $target, offset: "3  0" }
	 *
	 * See http://jqueryui.com/upgrade-guide/1.9/#deprecated-offset-option-merged-into-my-and-at
	 * and http://jsfiddle.net/mar10/6xtu9a4e/
	 *
	 * @param {object} opts
	 * @returns {object} the (potentially modified) original opts hash object
	 */
	fixPositionOptions: function(opts) {
		if( opts.offset || ("" + opts.my + opts.at ).indexOf("%") >= 0 ) {
		   $.error("expected new position syntax (but '%' is not supported)");
		}
		if( ! $.ui.fancytree.jquerySupports.positionMyOfs ) {
			var // parse 'left+3 center' into ['left+3 center', 'left', '+3', 'center', undefined]
				myParts = /(\w+)([+-]?\d+)?\s+(\w+)([+-]?\d+)?/.exec(opts.my),
				atParts = /(\w+)([+-]?\d+)?\s+(\w+)([+-]?\d+)?/.exec(opts.at),
				// convert to numbers
				dx = (myParts[2] ? (+myParts[2]) : 0) + (atParts[2] ? (+atParts[2]) : 0),
				dy = (myParts[4] ? (+myParts[4]) : 0) + (atParts[4] ? (+atParts[4]) : 0);

			opts = $.extend({}, opts, { // make a copy and overwrite
				my: myParts[1] + " " + myParts[3],
				at: atParts[1] + " " + atParts[3]
			});
			if( dx || dy ) {
				opts.offset = "" + dx + " " + dy;
			}
		}
		return opts;
	},
	/** Return a {node: FancytreeNode, type: TYPE} object for a mouse event.
	 *
	 * @param {Event} event Mouse event, e.g. click, ...
	 * @returns {object} Return a {node: FancytreeNode, type: TYPE} object
	 *     TYPE: 'title' | 'prefix' | 'expander' | 'checkbox' | 'icon' | undefined
	 */
	getEventTarget: function(event){
		var $target,
			tcn = event && event.target ? event.target.className : "",
			res = {node: this.getNode(event.target), type: undefined};
		// We use a fast version of $(res.node).hasClass()
		// See http://jsperf.com/test-for-classname/2
		if( /\bfancytree-title\b/.test(tcn) ){
			res.type = "title";
		}else if( /\bfancytree-expander\b/.test(tcn) ){
			res.type = (res.node.hasChildren() === false ? "prefix" : "expander");
		// }else if( /\bfancytree-checkbox\b/.test(tcn) || /\bfancytree-radio\b/.test(tcn) ){
		}else if( /\bfancytree-checkbox\b/.test(tcn) ){
			res.type = "checkbox";
		}else if( /\bfancytree(-custom)?-icon\b/.test(tcn) ){
			res.type = "icon";
		}else if( /\bfancytree-node\b/.test(tcn) ){
			// Somewhere near the title
			res.type = "title";
		}else if( event && event.target ) {
			$target = $(event.target);
			if( $target.is("ul[role=group]") ) {
				// #nnn: Clicking right to a node may hit the surrounding UL
				FT.info("Ignoring click on outer UL.");
				res.node = null;
			}else if( $target.closest(".fancytree-title").length ) {
				// #228: clicking an embedded element inside a title
				res.type = "title";
			}else if( $target.closest(".fancytree-checkbox").length ) {
				// E.g. <svg> inside checkbox span
				res.type = "checkbox";
			}else if( $target.closest(".fancytree-expander").length ) {
				res.type = "expander";
			}
		}
		return res;
	},
	/** Return a string describing the affected node region for a mouse event.
	 *
	 * @param {Event} event Mouse event, e.g. click, mousemove, ...
	 * @returns {string} 'title' | 'prefix' | 'expander' | 'checkbox' | 'icon' | undefined
	 */
	getEventTargetType: function(event){
		return this.getEventTarget(event).type;
	},
	/** Return a FancytreeNode instance from element, event, or jQuery object.
	 *
	 * @param {Element | jQueryObject | Event} el
	 * @returns {FancytreeNode} matching node or null
	 */
	getNode: function(el){
		if(el instanceof FancytreeNode){
			return el; // el already was a FancytreeNode
		}else if( el instanceof $ ){
			el = el[0]; // el was a jQuery object: use the DOM element
		}else if(el.originalEvent !== undefined){
			el = el.target; // el was an Event
		}
		while( el ) {
			if(el.ftnode) {
				return el.ftnode;
			}
			el = el.parentNode;
		}
		return null;
	},
	/** Return a Fancytree instance, from element, index, event, or jQueryObject.
	 *
	 * @param {Element | jQueryObject | Event | integer | string} [el]
	 * @returns {Fancytree} matching tree or null
	 * @example
	 * $.ui.fancytree.getTree();   // Get first Fancytree instance on page
	 * $.ui.fancytree.getTree(1);  // Get second Fancytree instance on page
	 * $.ui.fancytree.getTree("#tree"); // Get tree for this matching element
	 *
	 * @since 2.13
	 */
	getTree: function(el){
		var widget;

		if( el instanceof Fancytree ) {
			return el; // el already was a Fancytree
		}
		if( el === undefined ) {
			el = 0;  // get first tree
		}
		if( typeof el === "number" ) {
			el = $(".fancytree-container").eq(el); // el was an integer: return nth instance
		} else if( typeof el === "string" ) {
			el = $(el).eq(0); // el was a selector: use first match
		} else if( el.selector !== undefined ) {
			el = el.eq(0); // el was a jQuery object: use the first DOM element
		} else if( el.originalEvent !== undefined ) {
			el = $(el.target); // el was an Event
		}
		el = el.closest(":ui-fancytree");
		widget = el.data("ui-fancytree") || el.data("fancytree"); // the latter is required by jQuery <= 1.8
		return widget ? widget.tree : null;
	},
	/** Return an option value that has a default, but may be overridden by a
	 * callback or a node instance attribute.
	 *
	 * Evaluation sequence:<br>
	 *
	 * If tree.options.<optionName> is a callback that returns something, use that.<br>
	 * Else if node.<optionName> is defined, use that.<br>
	 * Else if tree.options.<optionName> is a value, use that.<br>
	 * Else use `defaultValue`.
	 *
	 * @param {string} optionName name of the option property (on node and tree)
	 * @param {FancytreeNode} node passed to the callback
	 * @param {object} nodeObject where to look for the local option property, e.g. `node` or `node.data`
	 * @param {object} treeOption where to look for the tree option, e.g. `tree.options` or `tree.options.dnd5`
	 * @param {any} [defaultValue]
	 * @returns {any}
	 *
	 * @example
	 * // Check for node.foo, tree,options.foo(), and tree.options.foo:
	 * $.ui.fancytree.evalOption("foo", node, node, tree.options);
	 * // Check for node.data.bar, tree,options.qux.bar(), and tree.options.qux.bar:
	 * $.ui.fancytree.evalOption("bar", node, node.data, tree.options.qux);
	 *
	 * @since 2.22
	 */
	evalOption: function(optionName, node, nodeObject, treeOptions, defaultValue) {
		var ctx, res,
			tree = node.tree,
			treeOpt = treeOptions[optionName],
			nodeOpt = nodeObject[optionName];

		if( $.isFunction(treeOpt) ) {
			ctx = {
				node: node, tree: tree, widget: tree.widget, options: tree.widget.options,
				typeInfo: tree.types[node.type] || {}
				};
			res = treeOpt.call(tree, {type: optionName}, ctx);
			if( res == null ) {
				res = nodeOpt;
			}
		} else {
			res = (nodeOpt != null) ? nodeOpt : treeOpt;
		}
		if( res == null ) {
			res = defaultValue;  // no option set at all: return default
		}
		return res;
	},
	/** Set expander, checkbox, or node icon, supporting string and object format.
	 *
	 * @param {Element | jQueryObject} span
	 * @param {string} baseClass
	 * @param {string | object} icon
	 * @since 2.27
	 */
	setSpanIcon: function( span, baseClass, icon ) {
		var $span = $( span );

		if( typeof icon === "string" ) {
			$span.attr( "class", baseClass + " " + icon );
		} else {  // support object syntax: { text: ligature, addClasse: classname }
			if( icon.text ) {
				$span.text( "" + icon.text );
			} else if ( icon.html ) {
				span.innerHTML = icon.html;
			}
			$span.attr( "class", baseClass + " " + ( icon.addClass || "" ) );
		}
	},
	/** Convert a keydown or mouse event to a canonical string like 'ctrl+a',
	 * 'ctrl+shift+f2', 'shift+leftdblclick'.
	 *
	 * This is especially handy for switch-statements in event handlers.
	 *
	 * @param {event}
	 * @returns {string}
	 *
	 * @example

	switch( $.ui.fancytree.eventToString(event) ) {
		case "-":
			tree.nodeSetExpanded(ctx, false);
			break;
		case "shift+return":
			tree.nodeSetActive(ctx, true);
			break;
		case "down":
			res = node.navigate(event.which, activate);
			break;
		default:
			handled = false;
	}
	if( handled ){
		event.preventDefault();
	}
	 */
	eventToString: function(event) {
		// Poor-man's hotkeys. See here for a complete implementation:
		//   https://github.com/jeresig/jquery.hotkeys
		var which = event.which,
			et = event.type,
			s = [];

		if( event.altKey ) { s.push("alt"); }
		if( event.ctrlKey ) { s.push("ctrl"); }
		if( event.metaKey ) { s.push("meta"); }
		if( event.shiftKey ) { s.push("shift"); }

		if( et === "click" || et === "dblclick" ) {
			s.push(MOUSE_BUTTONS[event.button] + et);
		} else {
			if( !IGNORE_KEYCODES[which] ) {
				s.push( SPECIAL_KEYCODES[which] || String.fromCharCode(which).toLowerCase() );
			}
		}
		return s.join("+");
	},
	/** Write message to console if debugLevel >= 3
	 * @param {string} msg
	 */
	info: function(msg){
		/*jshint expr:true */
		($.ui.fancytree.debugLevel >= 3) && consoleApply("info", arguments);
	},
	/* @deprecated: use eventToString(event) instead.
	 */
	keyEventToString: function(event) {
		this.warn("keyEventToString() is deprecated: use eventToString()");
		return this.eventToString(event);
	},
	/** Return a wrapped handler method, that provides `this.super`.
	 *
	 * @example
		// Implement `opts.createNode` event to add the 'draggable' attribute
		$.ui.fancytree.overrideMethod(ctx.options, "createNode", function(event, data) {
			// Default processing if any
			this._super.apply(this, arguments);
			// Add 'draggable' attribute
			data.node.span.draggable = true;
		});
	 *
	 * @param {object} instance
	 * @param {string} methodName
	 * @param {function} handler
	 */
	overrideMethod: function(instance, methodName, handler){
		var prevSuper,
			_super = instance[methodName] || $.noop;

		// context = context || this;

		instance[methodName] = function() {
			try {
				prevSuper = this._super;
				this._super = _super;
				return handler.apply(this, arguments);
			} finally {
				this._super = prevSuper;
			}
		};
	},
	/**
	 * Parse tree data from HTML <ul> markup
	 *
	 * @param {jQueryObject} $ul
	 * @returns {NodeData[]}
	 */
	parseHtml: function($ul) {
		// TODO: understand this:
		/*jshint validthis:true */
		var classes, className, extraClasses, i, iPos, l, tmp, tmp2,
			$children = $ul.find(">li"),
			children = [];

		$children.each(function() {
			var allData, lowerCaseAttr,
				$li = $(this),
				$liSpan = $li.find(">span:first", this),
				$liA = $liSpan.length ? null : $li.find(">a:first"),
				d = { tooltip: null, data: {} };

			if( $liSpan.length ) {
				d.title = $liSpan.html();

			} else if( $liA && $liA.length ) {
				// If a <li><a> tag is specified, use it literally and extract href/target.
				d.title = $liA.html();
				d.data.href = $liA.attr("href");
				d.data.target = $liA.attr("target");
				d.tooltip = $liA.attr("title");

			} else {
				// If only a <li> tag is specified, use the trimmed string up to
				// the next child <ul> tag.
				d.title = $li.html();
				iPos = d.title.search(/<ul/i);
				if( iPos >= 0 ){
					d.title = d.title.substring(0, iPos);
				}
			}
			d.title = $.trim(d.title);

			// Make sure all fields exist
			for(i=0, l=CLASS_ATTRS.length; i<l; i++){
				d[CLASS_ATTRS[i]] = undefined;
			}
			// Initialize to `true`, if class is set and collect extraClasses
			classes = this.className.split(" ");
			extraClasses = [];
			for(i=0, l=classes.length; i<l; i++){
				className = classes[i];
				if(CLASS_ATTR_MAP[className]){
					d[className] = true;
				}else{
					extraClasses.push(className);
				}
			}
			d.extraClasses = extraClasses.join(" ");

			// Parse node options from ID, title and class attributes
			tmp = $li.attr("title");
			if( tmp ){
				d.tooltip = tmp; // overrides <a title='...'>
			}
			tmp = $li.attr("id");
			if( tmp ){
				d.key = tmp;
			}
			// Translate hideCheckbox -> checkbox:false
			if( $li.attr("hideCheckbox") ){
				d.checkbox = false;
			}
			// Add <li data-NAME='...'> as node.data.NAME
			allData = _getElementDataAsDict($li);
			if( allData && !$.isEmptyObject(allData) ) {
				// #507: convert data-hidecheckbox (lower case) to hideCheckbox
				for( lowerCaseAttr in NODE_ATTR_LOWERCASE_MAP ) {
					if( allData.hasOwnProperty(lowerCaseAttr) ) {
						allData[NODE_ATTR_LOWERCASE_MAP[lowerCaseAttr]] = allData[lowerCaseAttr];
						delete allData[lowerCaseAttr];
					}
				}
				// #56: Allow to set special node.attributes from data-...
				for(i=0, l=NODE_ATTRS.length; i<l; i++){
					tmp = NODE_ATTRS[i];
					tmp2 = allData[tmp];
					if( tmp2 != null ) {
						delete allData[tmp];
						d[tmp] = tmp2;
					}
				}
				// All other data-... goes to node.data...
				$.extend(d.data, allData);
			}
			// Recursive reading of child nodes, if LI tag contains an UL tag
			$ul = $li.find(">ul:first");
			if( $ul.length ) {
				d.children = $.ui.fancytree.parseHtml($ul);
			}else{
				d.children = d.lazy ? undefined : null;
			}
			children.push(d);
//            FT.debug("parse ", d, children);
		});
		return children;
	},
	/** Add Fancytree extension definition to the list of globally available extensions.
	 *
	 * @param {object} definition
	 */
	registerExtension: function(definition){
		_assert(definition.name != null, "extensions must have a `name` property.");
		_assert(definition.version != null, "extensions must have a `version` property.");
		$.ui.fancytree._extensions[definition.name] = definition;
	},
	/** Inverse of escapeHtml().
	 *
	 * @param {string} s
	 * @returns {string}
	 */
	unescapeHtml: function(s){
		var e = document.createElement("div");
		e.innerHTML = s;
		return e.childNodes.length === 0 ? "" : e.childNodes[0].nodeValue;
	},
	/** Write warning message to console if debugLevel >= 2.
	 * @param {string} msg
	 */
	warn: function(msg){
		($.ui.fancytree.debugLevel >= 2) && consoleApply("warn", arguments);
	}
});

// Value returned by `require('jquery.fancytree')`
return $.ui.fancytree;
}));  // End of closure


/***/ }),
/* 92 */
/***/ (function(module, exports) {

module.exports = function(module) {
	if(!module.webpackPolyfill) {
		module.deprecate = function() {};
		module.paths = [];
		// module.parent = undefined by default
		if(!module.children) module.children = [];
		Object.defineProperty(module, "loaded", {
			enumerable: true,
			get: function() {
				return module.l;
			}
		});
		Object.defineProperty(module, "id", {
			enumerable: true,
			get: function() {
				return module.i;
			}
		});
		module.webpackPolyfill = 1;
	}
	return module;
};


/***/ }),
/* 93 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Afrikaans [af]
//! author : Werner Mollentze : https://github.com/wernerm

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var af = moment.defineLocale('af', {
    months : 'Januarie_Februarie_Maart_April_Mei_Junie_Julie_Augustus_September_Oktober_November_Desember'.split('_'),
    monthsShort : 'Jan_Feb_Mrt_Apr_Mei_Jun_Jul_Aug_Sep_Okt_Nov_Des'.split('_'),
    weekdays : 'Sondag_Maandag_Dinsdag_Woensdag_Donderdag_Vrydag_Saterdag'.split('_'),
    weekdaysShort : 'Son_Maa_Din_Woe_Don_Vry_Sat'.split('_'),
    weekdaysMin : 'So_Ma_Di_Wo_Do_Vr_Sa'.split('_'),
    meridiemParse: /vm|nm/i,
    isPM : function (input) {
        return /^nm$/i.test(input);
    },
    meridiem : function (hours, minutes, isLower) {
        if (hours < 12) {
            return isLower ? 'vm' : 'VM';
        } else {
            return isLower ? 'nm' : 'NM';
        }
    },
    longDateFormat : {
        LT : 'HH:mm',
        LTS : 'HH:mm:ss',
        L : 'DD/MM/YYYY',
        LL : 'D MMMM YYYY',
        LLL : 'D MMMM YYYY HH:mm',
        LLLL : 'dddd, D MMMM YYYY HH:mm'
    },
    calendar : {
        sameDay : '[Vandag om] LT',
        nextDay : '[Môre om] LT',
        nextWeek : 'dddd [om] LT',
        lastDay : '[Gister om] LT',
        lastWeek : '[Laas] dddd [om] LT',
        sameElse : 'L'
    },
    relativeTime : {
        future : 'oor %s',
        past : '%s gelede',
        s : '\'n paar sekondes',
        m : '\'n minuut',
        mm : '%d minute',
        h : '\'n uur',
        hh : '%d ure',
        d : '\'n dag',
        dd : '%d dae',
        M : '\'n maand',
        MM : '%d maande',
        y : '\'n jaar',
        yy : '%d jaar'
    },
    dayOfMonthOrdinalParse: /\d{1,2}(ste|de)/,
    ordinal : function (number) {
        return number + ((number === 1 || number === 8 || number >= 20) ? 'ste' : 'de'); // Thanks to Joris Röling : https://github.com/jjupiter
    },
    week : {
        dow : 1, // Maandag is die eerste dag van die week.
        doy : 4  // Die week wat die 4de Januarie bevat is die eerste week van die jaar.
    }
});

return af;

})));


/***/ }),
/* 94 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Arabic [ar]
//! author : Abdel Said: https://github.com/abdelsaid
//! author : Ahmed Elkhatib
//! author : forabi https://github.com/forabi

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var symbolMap = {
    '1': '١',
    '2': '٢',
    '3': '٣',
    '4': '٤',
    '5': '٥',
    '6': '٦',
    '7': '٧',
    '8': '٨',
    '9': '٩',
    '0': '٠'
};
var numberMap = {
    '١': '1',
    '٢': '2',
    '٣': '3',
    '٤': '4',
    '٥': '5',
    '٦': '6',
    '٧': '7',
    '٨': '8',
    '٩': '9',
    '٠': '0'
};
var pluralForm = function (n) {
    return n === 0 ? 0 : n === 1 ? 1 : n === 2 ? 2 : n % 100 >= 3 && n % 100 <= 10 ? 3 : n % 100 >= 11 ? 4 : 5;
};
var plurals = {
    s : ['أقل من ثانية', 'ثانية واحدة', ['ثانيتان', 'ثانيتين'], '%d ثوان', '%d ثانية', '%d ثانية'],
    m : ['أقل من دقيقة', 'دقيقة واحدة', ['دقيقتان', 'دقيقتين'], '%d دقائق', '%d دقيقة', '%d دقيقة'],
    h : ['أقل من ساعة', 'ساعة واحدة', ['ساعتان', 'ساعتين'], '%d ساعات', '%d ساعة', '%d ساعة'],
    d : ['أقل من يوم', 'يوم واحد', ['يومان', 'يومين'], '%d أيام', '%d يومًا', '%d يوم'],
    M : ['أقل من شهر', 'شهر واحد', ['شهران', 'شهرين'], '%d أشهر', '%d شهرا', '%d شهر'],
    y : ['أقل من عام', 'عام واحد', ['عامان', 'عامين'], '%d أعوام', '%d عامًا', '%d عام']
};
var pluralize = function (u) {
    return function (number, withoutSuffix, string, isFuture) {
        var f = pluralForm(number),
            str = plurals[u][pluralForm(number)];
        if (f === 2) {
            str = str[withoutSuffix ? 0 : 1];
        }
        return str.replace(/%d/i, number);
    };
};
var months = [
    'كانون الثاني يناير',
    'شباط فبراير',
    'آذار مارس',
    'نيسان أبريل',
    'أيار مايو',
    'حزيران يونيو',
    'تموز يوليو',
    'آب أغسطس',
    'أيلول سبتمبر',
    'تشرين الأول أكتوبر',
    'تشرين الثاني نوفمبر',
    'كانون الأول ديسمبر'
];

var ar = moment.defineLocale('ar', {
    months : months,
    monthsShort : months,
    weekdays : 'الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت'.split('_'),
    weekdaysShort : 'أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت'.split('_'),
    weekdaysMin : 'ح_ن_ث_ر_خ_ج_س'.split('_'),
    weekdaysParseExact : true,
    longDateFormat : {
        LT : 'HH:mm',
        LTS : 'HH:mm:ss',
        L : 'D/\u200FM/\u200FYYYY',
        LL : 'D MMMM YYYY',
        LLL : 'D MMMM YYYY HH:mm',
        LLLL : 'dddd D MMMM YYYY HH:mm'
    },
    meridiemParse: /ص|م/,
    isPM : function (input) {
        return 'م' === input;
    },
    meridiem : function (hour, minute, isLower) {
        if (hour < 12) {
            return 'ص';
        } else {
            return 'م';
        }
    },
    calendar : {
        sameDay: '[اليوم عند الساعة] LT',
        nextDay: '[غدًا عند الساعة] LT',
        nextWeek: 'dddd [عند الساعة] LT',
        lastDay: '[أمس عند الساعة] LT',
        lastWeek: 'dddd [عند الساعة] LT',
        sameElse: 'L'
    },
    relativeTime : {
        future : 'بعد %s',
        past : 'منذ %s',
        s : pluralize('s'),
        m : pluralize('m'),
        mm : pluralize('m'),
        h : pluralize('h'),
        hh : pluralize('h'),
        d : pluralize('d'),
        dd : pluralize('d'),
        M : pluralize('M'),
        MM : pluralize('M'),
        y : pluralize('y'),
        yy : pluralize('y')
    },
    preparse: function (string) {
        return string.replace(/[١٢٣٤٥٦٧٨٩٠]/g, function (match) {
            return numberMap[match];
        }).replace(/،/g, ',');
    },
    postformat: function (string) {
        return string.replace(/\d/g, function (match) {
            return symbolMap[match];
        }).replace(/,/g, '،');
    },
    week : {
        dow : 6, // Saturday is the first day of the week.
        doy : 12  // The week that contains Jan 1st is the first week of the year.
    }
});

return ar;

})));


/***/ }),
/* 95 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Arabic (Algeria) [ar-dz]
//! author : Noureddine LOUAHEDJ : https://github.com/noureddineme

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var arDz = moment.defineLocale('ar-dz', {
    months : 'جانفي_فيفري_مارس_أفريل_ماي_جوان_جويلية_أوت_سبتمبر_أكتوبر_نوفمبر_ديسمبر'.split('_'),
    monthsShort : 'جانفي_فيفري_مارس_أفريل_ماي_جوان_جويلية_أوت_سبتمبر_أكتوبر_نوفمبر_ديسمبر'.split('_'),
    weekdays : 'الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت'.split('_'),
    weekdaysShort : 'احد_اثنين_ثلاثاء_اربعاء_خميس_جمعة_سبت'.split('_'),
    weekdaysMin : 'أح_إث_ثلا_أر_خم_جم_سب'.split('_'),
    weekdaysParseExact : true,
    longDateFormat : {
        LT : 'HH:mm',
        LTS : 'HH:mm:ss',
        L : 'DD/MM/YYYY',
        LL : 'D MMMM YYYY',
        LLL : 'D MMMM YYYY HH:mm',
        LLLL : 'dddd D MMMM YYYY HH:mm'
    },
    calendar : {
        sameDay: '[اليوم على الساعة] LT',
        nextDay: '[غدا على الساعة] LT',
        nextWeek: 'dddd [على الساعة] LT',
        lastDay: '[أمس على الساعة] LT',
        lastWeek: 'dddd [على الساعة] LT',
        sameElse: 'L'
    },
    relativeTime : {
        future : 'في %s',
        past : 'منذ %s',
        s : 'ثوان',
        m : 'دقيقة',
        mm : '%d دقائق',
        h : 'ساعة',
        hh : '%d ساعات',
        d : 'يوم',
        dd : '%d أيام',
        M : 'شهر',
        MM : '%d أشهر',
        y : 'سنة',
        yy : '%d سنوات'
    },
    week : {
        dow : 0, // Sunday is the first day of the week.
        doy : 4  // The week that contains Jan 1st is the first week of the year.
    }
});

return arDz;

})));


/***/ }),
/* 96 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Arabic (Kuwait) [ar-kw]
//! author : Nusret Parlak: https://github.com/nusretparlak

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var arKw = moment.defineLocale('ar-kw', {
    months : 'يناير_فبراير_مارس_أبريل_ماي_يونيو_يوليوز_غشت_شتنبر_أكتوبر_نونبر_دجنبر'.split('_'),
    monthsShort : 'يناير_فبراير_مارس_أبريل_ماي_يونيو_يوليوز_غشت_شتنبر_أكتوبر_نونبر_دجنبر'.split('_'),
    weekdays : 'الأحد_الإتنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت'.split('_'),
    weekdaysShort : 'احد_اتنين_ثلاثاء_اربعاء_خميس_جمعة_سبت'.split('_'),
    weekdaysMin : 'ح_ن_ث_ر_خ_ج_س'.split('_'),
    weekdaysParseExact : true,
    longDateFormat : {
        LT : 'HH:mm',
        LTS : 'HH:mm:ss',
        L : 'DD/MM/YYYY',
        LL : 'D MMMM YYYY',
        LLL : 'D MMMM YYYY HH:mm',
        LLLL : 'dddd D MMMM YYYY HH:mm'
    },
    calendar : {
        sameDay: '[اليوم على الساعة] LT',
        nextDay: '[غدا على الساعة] LT',
        nextWeek: 'dddd [على الساعة] LT',
        lastDay: '[أمس على الساعة] LT',
        lastWeek: 'dddd [على الساعة] LT',
        sameElse: 'L'
    },
    relativeTime : {
        future : 'في %s',
        past : 'منذ %s',
        s : 'ثوان',
        m : 'دقيقة',
        mm : '%d دقائق',
        h : 'ساعة',
        hh : '%d ساعات',
        d : 'يوم',
        dd : '%d أيام',
        M : 'شهر',
        MM : '%d أشهر',
        y : 'سنة',
        yy : '%d سنوات'
    },
    week : {
        dow : 0, // Sunday is the first day of the week.
        doy : 12  // The week that contains Jan 1st is the first week of the year.
    }
});

return arKw;

})));


/***/ }),
/* 97 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Arabic (Lybia) [ar-ly]
//! author : Ali Hmer: https://github.com/kikoanis

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var symbolMap = {
    '1': '1',
    '2': '2',
    '3': '3',
    '4': '4',
    '5': '5',
    '6': '6',
    '7': '7',
    '8': '8',
    '9': '9',
    '0': '0'
};
var pluralForm = function (n) {
    return n === 0 ? 0 : n === 1 ? 1 : n === 2 ? 2 : n % 100 >= 3 && n % 100 <= 10 ? 3 : n % 100 >= 11 ? 4 : 5;
};
var plurals = {
    s : ['أقل من ثانية', 'ثانية واحدة', ['ثانيتان', 'ثانيتين'], '%d ثوان', '%d ثانية', '%d ثانية'],
    m : ['أقل من دقيقة', 'دقيقة واحدة', ['دقيقتان', 'دقيقتين'], '%d دقائق', '%d دقيقة', '%d دقيقة'],
    h : ['أقل من ساعة', 'ساعة واحدة', ['ساعتان', 'ساعتين'], '%d ساعات', '%d ساعة', '%d ساعة'],
    d : ['أقل من يوم', 'يوم واحد', ['يومان', 'يومين'], '%d أيام', '%d يومًا', '%d يوم'],
    M : ['أقل من شهر', 'شهر واحد', ['شهران', 'شهرين'], '%d أشهر', '%d شهرا', '%d شهر'],
    y : ['أقل من عام', 'عام واحد', ['عامان', 'عامين'], '%d أعوام', '%d عامًا', '%d عام']
};
var pluralize = function (u) {
    return function (number, withoutSuffix, string, isFuture) {
        var f = pluralForm(number),
            str = plurals[u][pluralForm(number)];
        if (f === 2) {
            str = str[withoutSuffix ? 0 : 1];
        }
        return str.replace(/%d/i, number);
    };
};
var months = [
    'يناير',
    'فبراير',
    'مارس',
    'أبريل',
    'مايو',
    'يونيو',
    'يوليو',
    'أغسطس',
    'سبتمبر',
    'أكتوبر',
    'نوفمبر',
    'ديسمبر'
];

var arLy = moment.defineLocale('ar-ly', {
    months : months,
    monthsShort : months,
    weekdays : 'الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت'.split('_'),
    weekdaysShort : 'أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت'.split('_'),
    weekdaysMin : 'ح_ن_ث_ر_خ_ج_س'.split('_'),
    weekdaysParseExact : true,
    longDateFormat : {
        LT : 'HH:mm',
        LTS : 'HH:mm:ss',
        L : 'D/\u200FM/\u200FYYYY',
        LL : 'D MMMM YYYY',
        LLL : 'D MMMM YYYY HH:mm',
        LLLL : 'dddd D MMMM YYYY HH:mm'
    },
    meridiemParse: /ص|م/,
    isPM : function (input) {
        return 'م' === input;
    },
    meridiem : function (hour, minute, isLower) {
        if (hour < 12) {
            return 'ص';
        } else {
            return 'م';
        }
    },
    calendar : {
        sameDay: '[اليوم عند الساعة] LT',
        nextDay: '[غدًا عند الساعة] LT',
        nextWeek: 'dddd [عند الساعة] LT',
        lastDay: '[أمس عند الساعة] LT',
        lastWeek: 'dddd [عند الساعة] LT',
        sameElse: 'L'
    },
    relativeTime : {
        future : 'بعد %s',
        past : 'منذ %s',
        s : pluralize('s'),
        m : pluralize('m'),
        mm : pluralize('m'),
        h : pluralize('h'),
        hh : pluralize('h'),
        d : pluralize('d'),
        dd : pluralize('d'),
        M : pluralize('M'),
        MM : pluralize('M'),
        y : pluralize('y'),
        yy : pluralize('y')
    },
    preparse: function (string) {
        return string.replace(/،/g, ',');
    },
    postformat: function (string) {
        return string.replace(/\d/g, function (match) {
            return symbolMap[match];
        }).replace(/,/g, '،');
    },
    week : {
        dow : 6, // Saturday is the first day of the week.
        doy : 12  // The week that contains Jan 1st is the first week of the year.
    }
});

return arLy;

})));


/***/ }),
/* 98 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Arabic (Morocco) [ar-ma]
//! author : ElFadili Yassine : https://github.com/ElFadiliY
//! author : Abdel Said : https://github.com/abdelsaid

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var arMa = moment.defineLocale('ar-ma', {
    months : 'يناير_فبراير_مارس_أبريل_ماي_يونيو_يوليوز_غشت_شتنبر_أكتوبر_نونبر_دجنبر'.split('_'),
    monthsShort : 'يناير_فبراير_مارس_أبريل_ماي_يونيو_يوليوز_غشت_شتنبر_أكتوبر_نونبر_دجنبر'.split('_'),
    weekdays : 'الأحد_الإتنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت'.split('_'),
    weekdaysShort : 'احد_اتنين_ثلاثاء_اربعاء_خميس_جمعة_سبت'.split('_'),
    weekdaysMin : 'ح_ن_ث_ر_خ_ج_س'.split('_'),
    weekdaysParseExact : true,
    longDateFormat : {
        LT : 'HH:mm',
        LTS : 'HH:mm:ss',
        L : 'DD/MM/YYYY',
        LL : 'D MMMM YYYY',
        LLL : 'D MMMM YYYY HH:mm',
        LLLL : 'dddd D MMMM YYYY HH:mm'
    },
    calendar : {
        sameDay: '[اليوم على الساعة] LT',
        nextDay: '[غدا على الساعة] LT',
        nextWeek: 'dddd [على الساعة] LT',
        lastDay: '[أمس على الساعة] LT',
        lastWeek: 'dddd [على الساعة] LT',
        sameElse: 'L'
    },
    relativeTime : {
        future : 'في %s',
        past : 'منذ %s',
        s : 'ثوان',
        m : 'دقيقة',
        mm : '%d دقائق',
        h : 'ساعة',
        hh : '%d ساعات',
        d : 'يوم',
        dd : '%d أيام',
        M : 'شهر',
        MM : '%d أشهر',
        y : 'سنة',
        yy : '%d سنوات'
    },
    week : {
        dow : 6, // Saturday is the first day of the week.
        doy : 12  // The week that contains Jan 1st is the first week of the year.
    }
});

return arMa;

})));


/***/ }),
/* 99 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Arabic (Saudi Arabia) [ar-sa]
//! author : Suhail Alkowaileet : https://github.com/xsoh

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var symbolMap = {
    '1': '١',
    '2': '٢',
    '3': '٣',
    '4': '٤',
    '5': '٥',
    '6': '٦',
    '7': '٧',
    '8': '٨',
    '9': '٩',
    '0': '٠'
};
var numberMap = {
    '١': '1',
    '٢': '2',
    '٣': '3',
    '٤': '4',
    '٥': '5',
    '٦': '6',
    '٧': '7',
    '٨': '8',
    '٩': '9',
    '٠': '0'
};

var arSa = moment.defineLocale('ar-sa', {
    months : 'يناير_فبراير_مارس_أبريل_مايو_يونيو_يوليو_أغسطس_سبتمبر_أكتوبر_نوفمبر_ديسمبر'.split('_'),
    monthsShort : 'يناير_فبراير_مارس_أبريل_مايو_يونيو_يوليو_أغسطس_سبتمبر_أكتوبر_نوفمبر_ديسمبر'.split('_'),
    weekdays : 'الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت'.split('_'),
    weekdaysShort : 'أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت'.split('_'),
    weekdaysMin : 'ح_ن_ث_ر_خ_ج_س'.split('_'),
    weekdaysParseExact : true,
    longDateFormat : {
        LT : 'HH:mm',
        LTS : 'HH:mm:ss',
        L : 'DD/MM/YYYY',
        LL : 'D MMMM YYYY',
        LLL : 'D MMMM YYYY HH:mm',
        LLLL : 'dddd D MMMM YYYY HH:mm'
    },
    meridiemParse: /ص|م/,
    isPM : function (input) {
        return 'م' === input;
    },
    meridiem : function (hour, minute, isLower) {
        if (hour < 12) {
            return 'ص';
        } else {
            return 'م';
        }
    },
    calendar : {
        sameDay: '[اليوم على الساعة] LT',
        nextDay: '[غدا على الساعة] LT',
        nextWeek: 'dddd [على الساعة] LT',
        lastDay: '[أمس على الساعة] LT',
        lastWeek: 'dddd [على الساعة] LT',
        sameElse: 'L'
    },
    relativeTime : {
        future : 'في %s',
        past : 'منذ %s',
        s : 'ثوان',
        m : 'دقيقة',
        mm : '%d دقائق',
        h : 'ساعة',
        hh : '%d ساعات',
        d : 'يوم',
        dd : '%d أيام',
        M : 'شهر',
        MM : '%d أشهر',
        y : 'سنة',
        yy : '%d سنوات'
    },
    preparse: function (string) {
        return string.replace(/[١٢٣٤٥٦٧٨٩٠]/g, function (match) {
            return numberMap[match];
        }).replace(/،/g, ',');
    },
    postformat: function (string) {
        return string.replace(/\d/g, function (match) {
            return symbolMap[match];
        }).replace(/,/g, '،');
    },
    week : {
        dow : 0, // Sunday is the first day of the week.
        doy : 6  // The week that contains Jan 1st is the first week of the year.
    }
});

return arSa;

})));


/***/ }),
/* 100 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale  :  Arabic (Tunisia) [ar-tn]
//! author : Nader Toukabri : https://github.com/naderio

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var arTn = moment.defineLocale('ar-tn', {
    months: 'جانفي_فيفري_مارس_أفريل_ماي_جوان_جويلية_أوت_سبتمبر_أكتوبر_نوفمبر_ديسمبر'.split('_'),
    monthsShort: 'جانفي_فيفري_مارس_أفريل_ماي_جوان_جويلية_أوت_سبتمبر_أكتوبر_نوفمبر_ديسمبر'.split('_'),
    weekdays: 'الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت'.split('_'),
    weekdaysShort: 'أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت'.split('_'),
    weekdaysMin: 'ح_ن_ث_ر_خ_ج_س'.split('_'),
    weekdaysParseExact : true,
    longDateFormat: {
        LT: 'HH:mm',
        LTS: 'HH:mm:ss',
        L: 'DD/MM/YYYY',
        LL: 'D MMMM YYYY',
        LLL: 'D MMMM YYYY HH:mm',
        LLLL: 'dddd D MMMM YYYY HH:mm'
    },
    calendar: {
        sameDay: '[اليوم على الساعة] LT',
        nextDay: '[غدا على الساعة] LT',
        nextWeek: 'dddd [على الساعة] LT',
        lastDay: '[أمس على الساعة] LT',
        lastWeek: 'dddd [على الساعة] LT',
        sameElse: 'L'
    },
    relativeTime: {
        future: 'في %s',
        past: 'منذ %s',
        s: 'ثوان',
        m: 'دقيقة',
        mm: '%d دقائق',
        h: 'ساعة',
        hh: '%d ساعات',
        d: 'يوم',
        dd: '%d أيام',
        M: 'شهر',
        MM: '%d أشهر',
        y: 'سنة',
        yy: '%d سنوات'
    },
    week: {
        dow: 1, // Monday is the first day of the week.
        doy: 4 // The week that contains Jan 4th is the first week of the year.
    }
});

return arTn;

})));


/***/ }),
/* 101 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Azerbaijani [az]
//! author : topchiyev : https://github.com/topchiyev

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var suffixes = {
    1: '-inci',
    5: '-inci',
    8: '-inci',
    70: '-inci',
    80: '-inci',
    2: '-nci',
    7: '-nci',
    20: '-nci',
    50: '-nci',
    3: '-üncü',
    4: '-üncü',
    100: '-üncü',
    6: '-ncı',
    9: '-uncu',
    10: '-uncu',
    30: '-uncu',
    60: '-ıncı',
    90: '-ıncı'
};

var az = moment.defineLocale('az', {
    months : 'yanvar_fevral_mart_aprel_may_iyun_iyul_avqust_sentyabr_oktyabr_noyabr_dekabr'.split('_'),
    monthsShort : 'yan_fev_mar_apr_may_iyn_iyl_avq_sen_okt_noy_dek'.split('_'),
    weekdays : 'Bazar_Bazar ertəsi_Çərşənbə axşamı_Çərşənbə_Cümə axşamı_Cümə_Şənbə'.split('_'),
    weekdaysShort : 'Baz_BzE_ÇAx_Çər_CAx_Cüm_Şən'.split('_'),
    weekdaysMin : 'Bz_BE_ÇA_Çə_CA_Cü_Şə'.split('_'),
    weekdaysParseExact : true,
    longDateFormat : {
        LT : 'HH:mm',
        LTS : 'HH:mm:ss',
        L : 'DD.MM.YYYY',
        LL : 'D MMMM YYYY',
        LLL : 'D MMMM YYYY HH:mm',
        LLLL : 'dddd, D MMMM YYYY HH:mm'
    },
    calendar : {
        sameDay : '[bugün saat] LT',
        nextDay : '[sabah saat] LT',
        nextWeek : '[gələn həftə] dddd [saat] LT',
        lastDay : '[dünən] LT',
        lastWeek : '[keçən həftə] dddd [saat] LT',
        sameElse : 'L'
    },
    relativeTime : {
        future : '%s sonra',
        past : '%s əvvəl',
        s : 'birneçə saniyyə',
        m : 'bir dəqiqə',
        mm : '%d dəqiqə',
        h : 'bir saat',
        hh : '%d saat',
        d : 'bir gün',
        dd : '%d gün',
        M : 'bir ay',
        MM : '%d ay',
        y : 'bir il',
        yy : '%d il'
    },
    meridiemParse: /gecə|səhər|gündüz|axşam/,
    isPM : function (input) {
        return /^(gündüz|axşam)$/.test(input);
    },
    meridiem : function (hour, minute, isLower) {
        if (hour < 4) {
            return 'gecə';
        } else if (hour < 12) {
            return 'səhər';
        } else if (hour < 17) {
            return 'gündüz';
        } else {
            return 'axşam';
        }
    },
    dayOfMonthOrdinalParse: /\d{1,2}-(ıncı|inci|nci|üncü|ncı|uncu)/,
    ordinal : function (number) {
        if (number === 0) {  // special case for zero
            return number + '-ıncı';
        }
        var a = number % 10,
            b = number % 100 - a,
            c = number >= 100 ? 100 : null;
        return number + (suffixes[a] || suffixes[b] || suffixes[c]);
    },
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 7  // The week that contains Jan 1st is the first week of the year.
    }
});

return az;

})));


/***/ }),
/* 102 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Belarusian [be]
//! author : Dmitry Demidov : https://github.com/demidov91
//! author: Praleska: http://praleska.pro/
//! Author : Menelion Elensúle : https://github.com/Oire

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


function plural(word, num) {
    var forms = word.split('_');
    return num % 10 === 1 && num % 100 !== 11 ? forms[0] : (num % 10 >= 2 && num % 10 <= 4 && (num % 100 < 10 || num % 100 >= 20) ? forms[1] : forms[2]);
}
function relativeTimeWithPlural(number, withoutSuffix, key) {
    var format = {
        'mm': withoutSuffix ? 'хвіліна_хвіліны_хвілін' : 'хвіліну_хвіліны_хвілін',
        'hh': withoutSuffix ? 'гадзіна_гадзіны_гадзін' : 'гадзіну_гадзіны_гадзін',
        'dd': 'дзень_дні_дзён',
        'MM': 'месяц_месяцы_месяцаў',
        'yy': 'год_гады_гадоў'
    };
    if (key === 'm') {
        return withoutSuffix ? 'хвіліна' : 'хвіліну';
    }
    else if (key === 'h') {
        return withoutSuffix ? 'гадзіна' : 'гадзіну';
    }
    else {
        return number + ' ' + plural(format[key], +number);
    }
}

var be = moment.defineLocale('be', {
    months : {
        format: 'студзеня_лютага_сакавіка_красавіка_траўня_чэрвеня_ліпеня_жніўня_верасня_кастрычніка_лістапада_снежня'.split('_'),
        standalone: 'студзень_люты_сакавік_красавік_травень_чэрвень_ліпень_жнівень_верасень_кастрычнік_лістапад_снежань'.split('_')
    },
    monthsShort : 'студ_лют_сак_крас_трав_чэрв_ліп_жнів_вер_каст_ліст_снеж'.split('_'),
    weekdays : {
        format: 'нядзелю_панядзелак_аўторак_сераду_чацвер_пятніцу_суботу'.split('_'),
        standalone: 'нядзеля_панядзелак_аўторак_серада_чацвер_пятніца_субота'.split('_'),
        isFormat: /\[ ?[Вв] ?(?:мінулую|наступную)? ?\] ?dddd/
    },
    weekdaysShort : 'нд_пн_ат_ср_чц_пт_сб'.split('_'),
    weekdaysMin : 'нд_пн_ат_ср_чц_пт_сб'.split('_'),
    longDateFormat : {
        LT : 'HH:mm',
        LTS : 'HH:mm:ss',
        L : 'DD.MM.YYYY',
        LL : 'D MMMM YYYY г.',
        LLL : 'D MMMM YYYY г., HH:mm',
        LLLL : 'dddd, D MMMM YYYY г., HH:mm'
    },
    calendar : {
        sameDay: '[Сёння ў] LT',
        nextDay: '[Заўтра ў] LT',
        lastDay: '[Учора ў] LT',
        nextWeek: function () {
            return '[У] dddd [ў] LT';
        },
        lastWeek: function () {
            switch (this.day()) {
                case 0:
                case 3:
                case 5:
                case 6:
                    return '[У мінулую] dddd [ў] LT';
                case 1:
                case 2:
                case 4:
                    return '[У мінулы] dddd [ў] LT';
            }
        },
        sameElse: 'L'
    },
    relativeTime : {
        future : 'праз %s',
        past : '%s таму',
        s : 'некалькі секунд',
        m : relativeTimeWithPlural,
        mm : relativeTimeWithPlural,
        h : relativeTimeWithPlural,
        hh : relativeTimeWithPlural,
        d : 'дзень',
        dd : relativeTimeWithPlural,
        M : 'месяц',
        MM : relativeTimeWithPlural,
        y : 'год',
        yy : relativeTimeWithPlural
    },
    meridiemParse: /ночы|раніцы|дня|вечара/,
    isPM : function (input) {
        return /^(дня|вечара)$/.test(input);
    },
    meridiem : function (hour, minute, isLower) {
        if (hour < 4) {
            return 'ночы';
        } else if (hour < 12) {
            return 'раніцы';
        } else if (hour < 17) {
            return 'дня';
        } else {
            return 'вечара';
        }
    },
    dayOfMonthOrdinalParse: /\d{1,2}-(і|ы|га)/,
    ordinal: function (number, period) {
        switch (period) {
            case 'M':
            case 'd':
            case 'DDD':
            case 'w':
            case 'W':
                return (number % 10 === 2 || number % 10 === 3) && (number % 100 !== 12 && number % 100 !== 13) ? number + '-і' : number + '-ы';
            case 'D':
                return number + '-га';
            default:
                return number;
        }
    },
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 7  // The week that contains Jan 1st is the first week of the year.
    }
});

return be;

})));


/***/ }),
/* 103 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Bulgarian [bg]
//! author : Krasen Borisov : https://github.com/kraz

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var bg = moment.defineLocale('bg', {
    months : 'януари_февруари_март_април_май_юни_юли_август_септември_октомври_ноември_декември'.split('_'),
    monthsShort : 'янр_фев_мар_апр_май_юни_юли_авг_сеп_окт_ное_дек'.split('_'),
    weekdays : 'неделя_понеделник_вторник_сряда_четвъртък_петък_събота'.split('_'),
    weekdaysShort : 'нед_пон_вто_сря_чет_пет_съб'.split('_'),
    weekdaysMin : 'нд_пн_вт_ср_чт_пт_сб'.split('_'),
    longDateFormat : {
        LT : 'H:mm',
        LTS : 'H:mm:ss',
        L : 'D.MM.YYYY',
        LL : 'D MMMM YYYY',
        LLL : 'D MMMM YYYY H:mm',
        LLLL : 'dddd, D MMMM YYYY H:mm'
    },
    calendar : {
        sameDay : '[Днес в] LT',
        nextDay : '[Утре в] LT',
        nextWeek : 'dddd [в] LT',
        lastDay : '[Вчера в] LT',
        lastWeek : function () {
            switch (this.day()) {
                case 0:
                case 3:
                case 6:
                    return '[В изминалата] dddd [в] LT';
                case 1:
                case 2:
                case 4:
                case 5:
                    return '[В изминалия] dddd [в] LT';
            }
        },
        sameElse : 'L'
    },
    relativeTime : {
        future : 'след %s',
        past : 'преди %s',
        s : 'няколко секунди',
        m : 'минута',
        mm : '%d минути',
        h : 'час',
        hh : '%d часа',
        d : 'ден',
        dd : '%d дни',
        M : 'месец',
        MM : '%d месеца',
        y : 'година',
        yy : '%d години'
    },
    dayOfMonthOrdinalParse: /\d{1,2}-(ев|ен|ти|ви|ри|ми)/,
    ordinal : function (number) {
        var lastDigit = number % 10,
            last2Digits = number % 100;
        if (number === 0) {
            return number + '-ев';
        } else if (last2Digits === 0) {
            return number + '-ен';
        } else if (last2Digits > 10 && last2Digits < 20) {
            return number + '-ти';
        } else if (lastDigit === 1) {
            return number + '-ви';
        } else if (lastDigit === 2) {
            return number + '-ри';
        } else if (lastDigit === 7 || lastDigit === 8) {
            return number + '-ми';
        } else {
            return number + '-ти';
        }
    },
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 7  // The week that contains Jan 1st is the first week of the year.
    }
});

return bg;

})));


/***/ }),
/* 104 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Bambara [bm]
//! author : Estelle Comment : https://github.com/estellecomment

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';

// Language contact person : Abdoufata Kane : https://github.com/abdoufata

var bm = moment.defineLocale('bm', {
    months : 'Zanwuyekalo_Fewuruyekalo_Marisikalo_Awirilikalo_Mɛkalo_Zuwɛnkalo_Zuluyekalo_Utikalo_Sɛtanburukalo_ɔkutɔburukalo_Nowanburukalo_Desanburukalo'.split('_'),
    monthsShort : 'Zan_Few_Mar_Awi_Mɛ_Zuw_Zul_Uti_Sɛt_ɔku_Now_Des'.split('_'),
    weekdays : 'Kari_Ntɛnɛn_Tarata_Araba_Alamisa_Juma_Sibiri'.split('_'),
    weekdaysShort : 'Kar_Ntɛ_Tar_Ara_Ala_Jum_Sib'.split('_'),
    weekdaysMin : 'Ka_Nt_Ta_Ar_Al_Ju_Si'.split('_'),
    longDateFormat : {
        LT : 'HH:mm',
        LTS : 'HH:mm:ss',
        L : 'DD/MM/YYYY',
        LL : 'MMMM [tile] D [san] YYYY',
        LLL : 'MMMM [tile] D [san] YYYY [lɛrɛ] HH:mm',
        LLLL : 'dddd MMMM [tile] D [san] YYYY [lɛrɛ] HH:mm'
    },
    calendar : {
        sameDay : '[Bi lɛrɛ] LT',
        nextDay : '[Sini lɛrɛ] LT',
        nextWeek : 'dddd [don lɛrɛ] LT',
        lastDay : '[Kunu lɛrɛ] LT',
        lastWeek : 'dddd [tɛmɛnen lɛrɛ] LT',
        sameElse : 'L'
    },
    relativeTime : {
        future : '%s kɔnɔ',
        past : 'a bɛ %s bɔ',
        s : 'sanga dama dama',
        m : 'miniti kelen',
        mm : 'miniti %d',
        h : 'lɛrɛ kelen',
        hh : 'lɛrɛ %d',
        d : 'tile kelen',
        dd : 'tile %d',
        M : 'kalo kelen',
        MM : 'kalo %d',
        y : 'san kelen',
        yy : 'san %d'
    },
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 4  // The week that contains Jan 4th is the first week of the year.
    }
});

return bm;

})));


/***/ }),
/* 105 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Bengali [bn]
//! author : Kaushik Gandhi : https://github.com/kaushikgandhi

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var symbolMap = {
    '1': '১',
    '2': '২',
    '3': '৩',
    '4': '৪',
    '5': '৫',
    '6': '৬',
    '7': '৭',
    '8': '৮',
    '9': '৯',
    '0': '০'
};
var numberMap = {
    '১': '1',
    '২': '2',
    '৩': '3',
    '৪': '4',
    '৫': '5',
    '৬': '6',
    '৭': '7',
    '৮': '8',
    '৯': '9',
    '০': '0'
};

var bn = moment.defineLocale('bn', {
    months : 'জানুয়ারী_ফেব্রুয়ারি_মার্চ_এপ্রিল_মে_জুন_জুলাই_আগস্ট_সেপ্টেম্বর_অক্টোবর_নভেম্বর_ডিসেম্বর'.split('_'),
    monthsShort : 'জানু_ফেব_মার্চ_এপ্র_মে_জুন_জুল_আগ_সেপ্ট_অক্টো_নভে_ডিসে'.split('_'),
    weekdays : 'রবিবার_সোমবার_মঙ্গলবার_বুধবার_বৃহস্পতিবার_শুক্রবার_শনিবার'.split('_'),
    weekdaysShort : 'রবি_সোম_মঙ্গল_বুধ_বৃহস্পতি_শুক্র_শনি'.split('_'),
    weekdaysMin : 'রবি_সোম_মঙ্গ_বুধ_বৃহঃ_শুক্র_শনি'.split('_'),
    longDateFormat : {
        LT : 'A h:mm সময়',
        LTS : 'A h:mm:ss সময়',
        L : 'DD/MM/YYYY',
        LL : 'D MMMM YYYY',
        LLL : 'D MMMM YYYY, A h:mm সময়',
        LLLL : 'dddd, D MMMM YYYY, A h:mm সময়'
    },
    calendar : {
        sameDay : '[আজ] LT',
        nextDay : '[আগামীকাল] LT',
        nextWeek : 'dddd, LT',
        lastDay : '[গতকাল] LT',
        lastWeek : '[গত] dddd, LT',
        sameElse : 'L'
    },
    relativeTime : {
        future : '%s পরে',
        past : '%s আগে',
        s : 'কয়েক সেকেন্ড',
        m : 'এক মিনিট',
        mm : '%d মিনিট',
        h : 'এক ঘন্টা',
        hh : '%d ঘন্টা',
        d : 'এক দিন',
        dd : '%d দিন',
        M : 'এক মাস',
        MM : '%d মাস',
        y : 'এক বছর',
        yy : '%d বছর'
    },
    preparse: function (string) {
        return string.replace(/[১২৩৪৫৬৭৮৯০]/g, function (match) {
            return numberMap[match];
        });
    },
    postformat: function (string) {
        return string.replace(/\d/g, function (match) {
            return symbolMap[match];
        });
    },
    meridiemParse: /রাত|সকাল|দুপুর|বিকাল|রাত/,
    meridiemHour : function (hour, meridiem) {
        if (hour === 12) {
            hour = 0;
        }
        if ((meridiem === 'রাত' && hour >= 4) ||
                (meridiem === 'দুপুর' && hour < 5) ||
                meridiem === 'বিকাল') {
            return hour + 12;
        } else {
            return hour;
        }
    },
    meridiem : function (hour, minute, isLower) {
        if (hour < 4) {
            return 'রাত';
        } else if (hour < 10) {
            return 'সকাল';
        } else if (hour < 17) {
            return 'দুপুর';
        } else if (hour < 20) {
            return 'বিকাল';
        } else {
            return 'রাত';
        }
    },
    week : {
        dow : 0, // Sunday is the first day of the week.
        doy : 6  // The week that contains Jan 1st is the first week of the year.
    }
});

return bn;

})));


/***/ }),
/* 106 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Tibetan [bo]
//! author : Thupten N. Chakrishar : https://github.com/vajradog

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var symbolMap = {
    '1': '༡',
    '2': '༢',
    '3': '༣',
    '4': '༤',
    '5': '༥',
    '6': '༦',
    '7': '༧',
    '8': '༨',
    '9': '༩',
    '0': '༠'
};
var numberMap = {
    '༡': '1',
    '༢': '2',
    '༣': '3',
    '༤': '4',
    '༥': '5',
    '༦': '6',
    '༧': '7',
    '༨': '8',
    '༩': '9',
    '༠': '0'
};

var bo = moment.defineLocale('bo', {
    months : 'ཟླ་བ་དང་པོ_ཟླ་བ་གཉིས་པ_ཟླ་བ་གསུམ་པ_ཟླ་བ་བཞི་པ_ཟླ་བ་ལྔ་པ_ཟླ་བ་དྲུག་པ_ཟླ་བ་བདུན་པ_ཟླ་བ་བརྒྱད་པ_ཟླ་བ་དགུ་པ_ཟླ་བ་བཅུ་པ_ཟླ་བ་བཅུ་གཅིག་པ_ཟླ་བ་བཅུ་གཉིས་པ'.split('_'),
    monthsShort : 'ཟླ་བ་དང་པོ_ཟླ་བ་གཉིས་པ_ཟླ་བ་གསུམ་པ_ཟླ་བ་བཞི་པ_ཟླ་བ་ལྔ་པ_ཟླ་བ་དྲུག་པ_ཟླ་བ་བདུན་པ_ཟླ་བ་བརྒྱད་པ_ཟླ་བ་དགུ་པ_ཟླ་བ་བཅུ་པ_ཟླ་བ་བཅུ་གཅིག་པ_ཟླ་བ་བཅུ་གཉིས་པ'.split('_'),
    weekdays : 'གཟའ་ཉི་མ་_གཟའ་ཟླ་བ་_གཟའ་མིག་དམར་_གཟའ་ལྷག་པ་_གཟའ་ཕུར་བུ_གཟའ་པ་སངས་_གཟའ་སྤེན་པ་'.split('_'),
    weekdaysShort : 'ཉི་མ་_ཟླ་བ་_མིག་དམར་_ལྷག་པ་_ཕུར་བུ_པ་སངས་_སྤེན་པ་'.split('_'),
    weekdaysMin : 'ཉི་མ་_ཟླ་བ་_མིག་དམར་_ལྷག་པ་_ཕུར་བུ_པ་སངས་_སྤེན་པ་'.split('_'),
    longDateFormat : {
        LT : 'A h:mm',
        LTS : 'A h:mm:ss',
        L : 'DD/MM/YYYY',
        LL : 'D MMMM YYYY',
        LLL : 'D MMMM YYYY, A h:mm',
        LLLL : 'dddd, D MMMM YYYY, A h:mm'
    },
    calendar : {
        sameDay : '[དི་རིང] LT',
        nextDay : '[སང་ཉིན] LT',
        nextWeek : '[བདུན་ཕྲག་རྗེས་མ], LT',
        lastDay : '[ཁ་སང] LT',
        lastWeek : '[བདུན་ཕྲག་མཐའ་མ] dddd, LT',
        sameElse : 'L'
    },
    relativeTime : {
        future : '%s ལ་',
        past : '%s སྔན་ལ',
        s : 'ལམ་སང',
        m : 'སྐར་མ་གཅིག',
        mm : '%d སྐར་མ',
        h : 'ཆུ་ཚོད་གཅིག',
        hh : '%d ཆུ་ཚོད',
        d : 'ཉིན་གཅིག',
        dd : '%d ཉིན་',
        M : 'ཟླ་བ་གཅིག',
        MM : '%d ཟླ་བ',
        y : 'ལོ་གཅིག',
        yy : '%d ལོ'
    },
    preparse: function (string) {
        return string.replace(/[༡༢༣༤༥༦༧༨༩༠]/g, function (match) {
            return numberMap[match];
        });
    },
    postformat: function (string) {
        return string.replace(/\d/g, function (match) {
            return symbolMap[match];
        });
    },
    meridiemParse: /མཚན་མོ|ཞོགས་ཀས|ཉིན་གུང|དགོང་དག|མཚན་མོ/,
    meridiemHour : function (hour, meridiem) {
        if (hour === 12) {
            hour = 0;
        }
        if ((meridiem === 'མཚན་མོ' && hour >= 4) ||
                (meridiem === 'ཉིན་གུང' && hour < 5) ||
                meridiem === 'དགོང་དག') {
            return hour + 12;
        } else {
            return hour;
        }
    },
    meridiem : function (hour, minute, isLower) {
        if (hour < 4) {
            return 'མཚན་མོ';
        } else if (hour < 10) {
            return 'ཞོགས་ཀས';
        } else if (hour < 17) {
            return 'ཉིན་གུང';
        } else if (hour < 20) {
            return 'དགོང་དག';
        } else {
            return 'མཚན་མོ';
        }
    },
    week : {
        dow : 0, // Sunday is the first day of the week.
        doy : 6  // The week that contains Jan 1st is the first week of the year.
    }
});

return bo;

})));


/***/ }),
/* 107 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Breton [br]
//! author : Jean-Baptiste Le Duigou : https://github.com/jbleduigou

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


function relativeTimeWithMutation(number, withoutSuffix, key) {
    var format = {
        'mm': 'munutenn',
        'MM': 'miz',
        'dd': 'devezh'
    };
    return number + ' ' + mutation(format[key], number);
}
function specialMutationForYears(number) {
    switch (lastNumber(number)) {
        case 1:
        case 3:
        case 4:
        case 5:
        case 9:
            return number + ' bloaz';
        default:
            return number + ' vloaz';
    }
}
function lastNumber(number) {
    if (number > 9) {
        return lastNumber(number % 10);
    }
    return number;
}
function mutation(text, number) {
    if (number === 2) {
        return softMutation(text);
    }
    return text;
}
function softMutation(text) {
    var mutationTable = {
        'm': 'v',
        'b': 'v',
        'd': 'z'
    };
    if (mutationTable[text.charAt(0)] === undefined) {
        return text;
    }
    return mutationTable[text.charAt(0)] + text.substring(1);
}

var br = moment.defineLocale('br', {
    months : 'Genver_C\'hwevrer_Meurzh_Ebrel_Mae_Mezheven_Gouere_Eost_Gwengolo_Here_Du_Kerzu'.split('_'),
    monthsShort : 'Gen_C\'hwe_Meu_Ebr_Mae_Eve_Gou_Eos_Gwe_Her_Du_Ker'.split('_'),
    weekdays : 'Sul_Lun_Meurzh_Merc\'her_Yaou_Gwener_Sadorn'.split('_'),
    weekdaysShort : 'Sul_Lun_Meu_Mer_Yao_Gwe_Sad'.split('_'),
    weekdaysMin : 'Su_Lu_Me_Mer_Ya_Gw_Sa'.split('_'),
    weekdaysParseExact : true,
    longDateFormat : {
        LT : 'h[e]mm A',
        LTS : 'h[e]mm:ss A',
        L : 'DD/MM/YYYY',
        LL : 'D [a viz] MMMM YYYY',
        LLL : 'D [a viz] MMMM YYYY h[e]mm A',
        LLLL : 'dddd, D [a viz] MMMM YYYY h[e]mm A'
    },
    calendar : {
        sameDay : '[Hiziv da] LT',
        nextDay : '[Warc\'hoazh da] LT',
        nextWeek : 'dddd [da] LT',
        lastDay : '[Dec\'h da] LT',
        lastWeek : 'dddd [paset da] LT',
        sameElse : 'L'
    },
    relativeTime : {
        future : 'a-benn %s',
        past : '%s \'zo',
        s : 'un nebeud segondennoù',
        m : 'ur vunutenn',
        mm : relativeTimeWithMutation,
        h : 'un eur',
        hh : '%d eur',
        d : 'un devezh',
        dd : relativeTimeWithMutation,
        M : 'ur miz',
        MM : relativeTimeWithMutation,
        y : 'ur bloaz',
        yy : specialMutationForYears
    },
    dayOfMonthOrdinalParse: /\d{1,2}(añ|vet)/,
    ordinal : function (number) {
        var output = (number === 1) ? 'añ' : 'vet';
        return number + output;
    },
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 4  // The week that contains Jan 4th is the first week of the year.
    }
});

return br;

})));


/***/ }),
/* 108 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Bosnian [bs]
//! author : Nedim Cholich : https://github.com/frontyard
//! based on (hr) translation by Bojan Marković

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


function translate(number, withoutSuffix, key) {
    var result = number + ' ';
    switch (key) {
        case 'm':
            return withoutSuffix ? 'jedna minuta' : 'jedne minute';
        case 'mm':
            if (number === 1) {
                result += 'minuta';
            } else if (number === 2 || number === 3 || number === 4) {
                result += 'minute';
            } else {
                result += 'minuta';
            }
            return result;
        case 'h':
            return withoutSuffix ? 'jedan sat' : 'jednog sata';
        case 'hh':
            if (number === 1) {
                result += 'sat';
            } else if (number === 2 || number === 3 || number === 4) {
                result += 'sata';
            } else {
                result += 'sati';
            }
            return result;
        case 'dd':
            if (number === 1) {
                result += 'dan';
            } else {
                result += 'dana';
            }
            return result;
        case 'MM':
            if (number === 1) {
                result += 'mjesec';
            } else if (number === 2 || number === 3 || number === 4) {
                result += 'mjeseca';
            } else {
                result += 'mjeseci';
            }
            return result;
        case 'yy':
            if (number === 1) {
                result += 'godina';
            } else if (number === 2 || number === 3 || number === 4) {
                result += 'godine';
            } else {
                result += 'godina';
            }
            return result;
    }
}

var bs = moment.defineLocale('bs', {
    months : 'januar_februar_mart_april_maj_juni_juli_august_septembar_oktobar_novembar_decembar'.split('_'),
    monthsShort : 'jan._feb._mar._apr._maj._jun._jul._aug._sep._okt._nov._dec.'.split('_'),
    monthsParseExact: true,
    weekdays : 'nedjelja_ponedjeljak_utorak_srijeda_četvrtak_petak_subota'.split('_'),
    weekdaysShort : 'ned._pon._uto._sri._čet._pet._sub.'.split('_'),
    weekdaysMin : 'ne_po_ut_sr_če_pe_su'.split('_'),
    weekdaysParseExact : true,
    longDateFormat : {
        LT : 'H:mm',
        LTS : 'H:mm:ss',
        L : 'DD.MM.YYYY',
        LL : 'D. MMMM YYYY',
        LLL : 'D. MMMM YYYY H:mm',
        LLLL : 'dddd, D. MMMM YYYY H:mm'
    },
    calendar : {
        sameDay  : '[danas u] LT',
        nextDay  : '[sutra u] LT',
        nextWeek : function () {
            switch (this.day()) {
                case 0:
                    return '[u] [nedjelju] [u] LT';
                case 3:
                    return '[u] [srijedu] [u] LT';
                case 6:
                    return '[u] [subotu] [u] LT';
                case 1:
                case 2:
                case 4:
                case 5:
                    return '[u] dddd [u] LT';
            }
        },
        lastDay  : '[jučer u] LT',
        lastWeek : function () {
            switch (this.day()) {
                case 0:
                case 3:
                    return '[prošlu] dddd [u] LT';
                case 6:
                    return '[prošle] [subote] [u] LT';
                case 1:
                case 2:
                case 4:
                case 5:
                    return '[prošli] dddd [u] LT';
            }
        },
        sameElse : 'L'
    },
    relativeTime : {
        future : 'za %s',
        past   : 'prije %s',
        s      : 'par sekundi',
        m      : translate,
        mm     : translate,
        h      : translate,
        hh     : translate,
        d      : 'dan',
        dd     : translate,
        M      : 'mjesec',
        MM     : translate,
        y      : 'godinu',
        yy     : translate
    },
    dayOfMonthOrdinalParse: /\d{1,2}\./,
    ordinal : '%d.',
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 7  // The week that contains Jan 1st is the first week of the year.
    }
});

return bs;

})));


/***/ }),
/* 109 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Catalan [ca]
//! author : Juan G. Hurtado : https://github.com/juanghurtado

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var ca = moment.defineLocale('ca', {
    months : {
        standalone: 'gener_febrer_març_abril_maig_juny_juliol_agost_setembre_octubre_novembre_desembre'.split('_'),
        format: 'de gener_de febrer_de març_d\'abril_de maig_de juny_de juliol_d\'agost_de setembre_d\'octubre_de novembre_de desembre'.split('_'),
        isFormat: /D[oD]?(\s)+MMMM/
    },
    monthsShort : 'gen._febr._març_abr._maig_juny_jul._ag._set._oct._nov._des.'.split('_'),
    monthsParseExact : true,
    weekdays : 'diumenge_dilluns_dimarts_dimecres_dijous_divendres_dissabte'.split('_'),
    weekdaysShort : 'dg._dl._dt._dc._dj._dv._ds.'.split('_'),
    weekdaysMin : 'dg_dl_dt_dc_dj_dv_ds'.split('_'),
    weekdaysParseExact : true,
    longDateFormat : {
        LT : 'H:mm',
        LTS : 'H:mm:ss',
        L : 'DD/MM/YYYY',
        LL : 'D MMMM [de] YYYY',
        ll : 'D MMM YYYY',
        LLL : 'D MMMM [de] YYYY [a les] H:mm',
        lll : 'D MMM YYYY, H:mm',
        LLLL : 'dddd D MMMM [de] YYYY [a les] H:mm',
        llll : 'ddd D MMM YYYY, H:mm'
    },
    calendar : {
        sameDay : function () {
            return '[avui a ' + ((this.hours() !== 1) ? 'les' : 'la') + '] LT';
        },
        nextDay : function () {
            return '[demà a ' + ((this.hours() !== 1) ? 'les' : 'la') + '] LT';
        },
        nextWeek : function () {
            return 'dddd [a ' + ((this.hours() !== 1) ? 'les' : 'la') + '] LT';
        },
        lastDay : function () {
            return '[ahir a ' + ((this.hours() !== 1) ? 'les' : 'la') + '] LT';
        },
        lastWeek : function () {
            return '[el] dddd [passat a ' + ((this.hours() !== 1) ? 'les' : 'la') + '] LT';
        },
        sameElse : 'L'
    },
    relativeTime : {
        future : 'd\'aquí %s',
        past : 'fa %s',
        s : 'uns segons',
        m : 'un minut',
        mm : '%d minuts',
        h : 'una hora',
        hh : '%d hores',
        d : 'un dia',
        dd : '%d dies',
        M : 'un mes',
        MM : '%d mesos',
        y : 'un any',
        yy : '%d anys'
    },
    dayOfMonthOrdinalParse: /\d{1,2}(r|n|t|è|a)/,
    ordinal : function (number, period) {
        var output = (number === 1) ? 'r' :
            (number === 2) ? 'n' :
            (number === 3) ? 'r' :
            (number === 4) ? 't' : 'è';
        if (period === 'w' || period === 'W') {
            output = 'a';
        }
        return number + output;
    },
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 4  // The week that contains Jan 4th is the first week of the year.
    }
});

return ca;

})));


/***/ }),
/* 110 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Czech [cs]
//! author : petrbela : https://github.com/petrbela

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var months = 'leden_únor_březen_duben_květen_červen_červenec_srpen_září_říjen_listopad_prosinec'.split('_');
var monthsShort = 'led_úno_bře_dub_kvě_čvn_čvc_srp_zář_říj_lis_pro'.split('_');
function plural(n) {
    return (n > 1) && (n < 5) && (~~(n / 10) !== 1);
}
function translate(number, withoutSuffix, key, isFuture) {
    var result = number + ' ';
    switch (key) {
        case 's':  // a few seconds / in a few seconds / a few seconds ago
            return (withoutSuffix || isFuture) ? 'pár sekund' : 'pár sekundami';
        case 'm':  // a minute / in a minute / a minute ago
            return withoutSuffix ? 'minuta' : (isFuture ? 'minutu' : 'minutou');
        case 'mm': // 9 minutes / in 9 minutes / 9 minutes ago
            if (withoutSuffix || isFuture) {
                return result + (plural(number) ? 'minuty' : 'minut');
            } else {
                return result + 'minutami';
            }
            break;
        case 'h':  // an hour / in an hour / an hour ago
            return withoutSuffix ? 'hodina' : (isFuture ? 'hodinu' : 'hodinou');
        case 'hh': // 9 hours / in 9 hours / 9 hours ago
            if (withoutSuffix || isFuture) {
                return result + (plural(number) ? 'hodiny' : 'hodin');
            } else {
                return result + 'hodinami';
            }
            break;
        case 'd':  // a day / in a day / a day ago
            return (withoutSuffix || isFuture) ? 'den' : 'dnem';
        case 'dd': // 9 days / in 9 days / 9 days ago
            if (withoutSuffix || isFuture) {
                return result + (plural(number) ? 'dny' : 'dní');
            } else {
                return result + 'dny';
            }
            break;
        case 'M':  // a month / in a month / a month ago
            return (withoutSuffix || isFuture) ? 'měsíc' : 'měsícem';
        case 'MM': // 9 months / in 9 months / 9 months ago
            if (withoutSuffix || isFuture) {
                return result + (plural(number) ? 'měsíce' : 'měsíců');
            } else {
                return result + 'měsíci';
            }
            break;
        case 'y':  // a year / in a year / a year ago
            return (withoutSuffix || isFuture) ? 'rok' : 'rokem';
        case 'yy': // 9 years / in 9 years / 9 years ago
            if (withoutSuffix || isFuture) {
                return result + (plural(number) ? 'roky' : 'let');
            } else {
                return result + 'lety';
            }
            break;
    }
}

var cs = moment.defineLocale('cs', {
    months : months,
    monthsShort : monthsShort,
    monthsParse : (function (months, monthsShort) {
        var i, _monthsParse = [];
        for (i = 0; i < 12; i++) {
            // use custom parser to solve problem with July (červenec)
            _monthsParse[i] = new RegExp('^' + months[i] + '$|^' + monthsShort[i] + '$', 'i');
        }
        return _monthsParse;
    }(months, monthsShort)),
    shortMonthsParse : (function (monthsShort) {
        var i, _shortMonthsParse = [];
        for (i = 0; i < 12; i++) {
            _shortMonthsParse[i] = new RegExp('^' + monthsShort[i] + '$', 'i');
        }
        return _shortMonthsParse;
    }(monthsShort)),
    longMonthsParse : (function (months) {
        var i, _longMonthsParse = [];
        for (i = 0; i < 12; i++) {
            _longMonthsParse[i] = new RegExp('^' + months[i] + '$', 'i');
        }
        return _longMonthsParse;
    }(months)),
    weekdays : 'neděle_pondělí_úterý_středa_čtvrtek_pátek_sobota'.split('_'),
    weekdaysShort : 'ne_po_út_st_čt_pá_so'.split('_'),
    weekdaysMin : 'ne_po_út_st_čt_pá_so'.split('_'),
    longDateFormat : {
        LT: 'H:mm',
        LTS : 'H:mm:ss',
        L : 'DD.MM.YYYY',
        LL : 'D. MMMM YYYY',
        LLL : 'D. MMMM YYYY H:mm',
        LLLL : 'dddd D. MMMM YYYY H:mm',
        l : 'D. M. YYYY'
    },
    calendar : {
        sameDay: '[dnes v] LT',
        nextDay: '[zítra v] LT',
        nextWeek: function () {
            switch (this.day()) {
                case 0:
                    return '[v neděli v] LT';
                case 1:
                case 2:
                    return '[v] dddd [v] LT';
                case 3:
                    return '[ve středu v] LT';
                case 4:
                    return '[ve čtvrtek v] LT';
                case 5:
                    return '[v pátek v] LT';
                case 6:
                    return '[v sobotu v] LT';
            }
        },
        lastDay: '[včera v] LT',
        lastWeek: function () {
            switch (this.day()) {
                case 0:
                    return '[minulou neděli v] LT';
                case 1:
                case 2:
                    return '[minulé] dddd [v] LT';
                case 3:
                    return '[minulou středu v] LT';
                case 4:
                case 5:
                    return '[minulý] dddd [v] LT';
                case 6:
                    return '[minulou sobotu v] LT';
            }
        },
        sameElse: 'L'
    },
    relativeTime : {
        future : 'za %s',
        past : 'před %s',
        s : translate,
        m : translate,
        mm : translate,
        h : translate,
        hh : translate,
        d : translate,
        dd : translate,
        M : translate,
        MM : translate,
        y : translate,
        yy : translate
    },
    dayOfMonthOrdinalParse : /\d{1,2}\./,
    ordinal : '%d.',
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 4  // The week that contains Jan 4th is the first week of the year.
    }
});

return cs;

})));


/***/ }),
/* 111 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Chuvash [cv]
//! author : Anatoly Mironov : https://github.com/mirontoli

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var cv = moment.defineLocale('cv', {
    months : 'кӑрлач_нарӑс_пуш_ака_май_ҫӗртме_утӑ_ҫурла_авӑн_юпа_чӳк_раштав'.split('_'),
    monthsShort : 'кӑр_нар_пуш_ака_май_ҫӗр_утӑ_ҫур_авн_юпа_чӳк_раш'.split('_'),
    weekdays : 'вырсарникун_тунтикун_ытларикун_юнкун_кӗҫнерникун_эрнекун_шӑматкун'.split('_'),
    weekdaysShort : 'выр_тун_ытл_юн_кӗҫ_эрн_шӑм'.split('_'),
    weekdaysMin : 'вр_тн_ыт_юн_кҫ_эр_шм'.split('_'),
    longDateFormat : {
        LT : 'HH:mm',
        LTS : 'HH:mm:ss',
        L : 'DD-MM-YYYY',
        LL : 'YYYY [ҫулхи] MMMM [уйӑхӗн] D[-мӗшӗ]',
        LLL : 'YYYY [ҫулхи] MMMM [уйӑхӗн] D[-мӗшӗ], HH:mm',
        LLLL : 'dddd, YYYY [ҫулхи] MMMM [уйӑхӗн] D[-мӗшӗ], HH:mm'
    },
    calendar : {
        sameDay: '[Паян] LT [сехетре]',
        nextDay: '[Ыран] LT [сехетре]',
        lastDay: '[Ӗнер] LT [сехетре]',
        nextWeek: '[Ҫитес] dddd LT [сехетре]',
        lastWeek: '[Иртнӗ] dddd LT [сехетре]',
        sameElse: 'L'
    },
    relativeTime : {
        future : function (output) {
            var affix = /сехет$/i.exec(output) ? 'рен' : /ҫул$/i.exec(output) ? 'тан' : 'ран';
            return output + affix;
        },
        past : '%s каялла',
        s : 'пӗр-ик ҫеккунт',
        m : 'пӗр минут',
        mm : '%d минут',
        h : 'пӗр сехет',
        hh : '%d сехет',
        d : 'пӗр кун',
        dd : '%d кун',
        M : 'пӗр уйӑх',
        MM : '%d уйӑх',
        y : 'пӗр ҫул',
        yy : '%d ҫул'
    },
    dayOfMonthOrdinalParse: /\d{1,2}-мӗш/,
    ordinal : '%d-мӗш',
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 7  // The week that contains Jan 1st is the first week of the year.
    }
});

return cv;

})));


/***/ }),
/* 112 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Welsh [cy]
//! author : Robert Allen : https://github.com/robgallen
//! author : https://github.com/ryangreaves

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var cy = moment.defineLocale('cy', {
    months: 'Ionawr_Chwefror_Mawrth_Ebrill_Mai_Mehefin_Gorffennaf_Awst_Medi_Hydref_Tachwedd_Rhagfyr'.split('_'),
    monthsShort: 'Ion_Chwe_Maw_Ebr_Mai_Meh_Gor_Aws_Med_Hyd_Tach_Rhag'.split('_'),
    weekdays: 'Dydd Sul_Dydd Llun_Dydd Mawrth_Dydd Mercher_Dydd Iau_Dydd Gwener_Dydd Sadwrn'.split('_'),
    weekdaysShort: 'Sul_Llun_Maw_Mer_Iau_Gwe_Sad'.split('_'),
    weekdaysMin: 'Su_Ll_Ma_Me_Ia_Gw_Sa'.split('_'),
    weekdaysParseExact : true,
    // time formats are the same as en-gb
    longDateFormat: {
        LT: 'HH:mm',
        LTS : 'HH:mm:ss',
        L: 'DD/MM/YYYY',
        LL: 'D MMMM YYYY',
        LLL: 'D MMMM YYYY HH:mm',
        LLLL: 'dddd, D MMMM YYYY HH:mm'
    },
    calendar: {
        sameDay: '[Heddiw am] LT',
        nextDay: '[Yfory am] LT',
        nextWeek: 'dddd [am] LT',
        lastDay: '[Ddoe am] LT',
        lastWeek: 'dddd [diwethaf am] LT',
        sameElse: 'L'
    },
    relativeTime: {
        future: 'mewn %s',
        past: '%s yn ôl',
        s: 'ychydig eiliadau',
        m: 'munud',
        mm: '%d munud',
        h: 'awr',
        hh: '%d awr',
        d: 'diwrnod',
        dd: '%d diwrnod',
        M: 'mis',
        MM: '%d mis',
        y: 'blwyddyn',
        yy: '%d flynedd'
    },
    dayOfMonthOrdinalParse: /\d{1,2}(fed|ain|af|il|ydd|ed|eg)/,
    // traditional ordinal numbers above 31 are not commonly used in colloquial Welsh
    ordinal: function (number) {
        var b = number,
            output = '',
            lookup = [
                '', 'af', 'il', 'ydd', 'ydd', 'ed', 'ed', 'ed', 'fed', 'fed', 'fed', // 1af to 10fed
                'eg', 'fed', 'eg', 'eg', 'fed', 'eg', 'eg', 'fed', 'eg', 'fed' // 11eg to 20fed
            ];
        if (b > 20) {
            if (b === 40 || b === 50 || b === 60 || b === 80 || b === 100) {
                output = 'fed'; // not 30ain, 70ain or 90ain
            } else {
                output = 'ain';
            }
        } else if (b > 0) {
            output = lookup[b];
        }
        return number + output;
    },
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 4  // The week that contains Jan 4th is the first week of the year.
    }
});

return cy;

})));


/***/ }),
/* 113 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Danish [da]
//! author : Ulrik Nielsen : https://github.com/mrbase

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var da = moment.defineLocale('da', {
    months : 'januar_februar_marts_april_maj_juni_juli_august_september_oktober_november_december'.split('_'),
    monthsShort : 'jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec'.split('_'),
    weekdays : 'søndag_mandag_tirsdag_onsdag_torsdag_fredag_lørdag'.split('_'),
    weekdaysShort : 'søn_man_tir_ons_tor_fre_lør'.split('_'),
    weekdaysMin : 'sø_ma_ti_on_to_fr_lø'.split('_'),
    longDateFormat : {
        LT : 'HH:mm',
        LTS : 'HH:mm:ss',
        L : 'DD.MM.YYYY',
        LL : 'D. MMMM YYYY',
        LLL : 'D. MMMM YYYY HH:mm',
        LLLL : 'dddd [d.] D. MMMM YYYY [kl.] HH:mm'
    },
    calendar : {
        sameDay : '[i dag kl.] LT',
        nextDay : '[i morgen kl.] LT',
        nextWeek : 'på dddd [kl.] LT',
        lastDay : '[i går kl.] LT',
        lastWeek : '[i] dddd[s kl.] LT',
        sameElse : 'L'
    },
    relativeTime : {
        future : 'om %s',
        past : '%s siden',
        s : 'få sekunder',
        m : 'et minut',
        mm : '%d minutter',
        h : 'en time',
        hh : '%d timer',
        d : 'en dag',
        dd : '%d dage',
        M : 'en måned',
        MM : '%d måneder',
        y : 'et år',
        yy : '%d år'
    },
    dayOfMonthOrdinalParse: /\d{1,2}\./,
    ordinal : '%d.',
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 4  // The week that contains Jan 4th is the first week of the year.
    }
});

return da;

})));


/***/ }),
/* 114 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : German [de]
//! author : lluchs : https://github.com/lluchs
//! author: Menelion Elensúle: https://github.com/Oire
//! author : Mikolaj Dadela : https://github.com/mik01aj

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


function processRelativeTime(number, withoutSuffix, key, isFuture) {
    var format = {
        'm': ['eine Minute', 'einer Minute'],
        'h': ['eine Stunde', 'einer Stunde'],
        'd': ['ein Tag', 'einem Tag'],
        'dd': [number + ' Tage', number + ' Tagen'],
        'M': ['ein Monat', 'einem Monat'],
        'MM': [number + ' Monate', number + ' Monaten'],
        'y': ['ein Jahr', 'einem Jahr'],
        'yy': [number + ' Jahre', number + ' Jahren']
    };
    return withoutSuffix ? format[key][0] : format[key][1];
}

var de = moment.defineLocale('de', {
    months : 'Januar_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember'.split('_'),
    monthsShort : 'Jan._Feb._März_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.'.split('_'),
    monthsParseExact : true,
    weekdays : 'Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag'.split('_'),
    weekdaysShort : 'So._Mo._Di._Mi._Do._Fr._Sa.'.split('_'),
    weekdaysMin : 'So_Mo_Di_Mi_Do_Fr_Sa'.split('_'),
    weekdaysParseExact : true,
    longDateFormat : {
        LT: 'HH:mm',
        LTS: 'HH:mm:ss',
        L : 'DD.MM.YYYY',
        LL : 'D. MMMM YYYY',
        LLL : 'D. MMMM YYYY HH:mm',
        LLLL : 'dddd, D. MMMM YYYY HH:mm'
    },
    calendar : {
        sameDay: '[heute um] LT [Uhr]',
        sameElse: 'L',
        nextDay: '[morgen um] LT [Uhr]',
        nextWeek: 'dddd [um] LT [Uhr]',
        lastDay: '[gestern um] LT [Uhr]',
        lastWeek: '[letzten] dddd [um] LT [Uhr]'
    },
    relativeTime : {
        future : 'in %s',
        past : 'vor %s',
        s : 'ein paar Sekunden',
        m : processRelativeTime,
        mm : '%d Minuten',
        h : processRelativeTime,
        hh : '%d Stunden',
        d : processRelativeTime,
        dd : processRelativeTime,
        M : processRelativeTime,
        MM : processRelativeTime,
        y : processRelativeTime,
        yy : processRelativeTime
    },
    dayOfMonthOrdinalParse: /\d{1,2}\./,
    ordinal : '%d.',
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 4  // The week that contains Jan 4th is the first week of the year.
    }
});

return de;

})));


/***/ }),
/* 115 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : German (Austria) [de-at]
//! author : lluchs : https://github.com/lluchs
//! author: Menelion Elensúle: https://github.com/Oire
//! author : Martin Groller : https://github.com/MadMG
//! author : Mikolaj Dadela : https://github.com/mik01aj

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


function processRelativeTime(number, withoutSuffix, key, isFuture) {
    var format = {
        'm': ['eine Minute', 'einer Minute'],
        'h': ['eine Stunde', 'einer Stunde'],
        'd': ['ein Tag', 'einem Tag'],
        'dd': [number + ' Tage', number + ' Tagen'],
        'M': ['ein Monat', 'einem Monat'],
        'MM': [number + ' Monate', number + ' Monaten'],
        'y': ['ein Jahr', 'einem Jahr'],
        'yy': [number + ' Jahre', number + ' Jahren']
    };
    return withoutSuffix ? format[key][0] : format[key][1];
}

var deAt = moment.defineLocale('de-at', {
    months : 'Jänner_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember'.split('_'),
    monthsShort : 'Jän._Feb._März_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.'.split('_'),
    monthsParseExact : true,
    weekdays : 'Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag'.split('_'),
    weekdaysShort : 'So._Mo._Di._Mi._Do._Fr._Sa.'.split('_'),
    weekdaysMin : 'So_Mo_Di_Mi_Do_Fr_Sa'.split('_'),
    weekdaysParseExact : true,
    longDateFormat : {
        LT: 'HH:mm',
        LTS: 'HH:mm:ss',
        L : 'DD.MM.YYYY',
        LL : 'D. MMMM YYYY',
        LLL : 'D. MMMM YYYY HH:mm',
        LLLL : 'dddd, D. MMMM YYYY HH:mm'
    },
    calendar : {
        sameDay: '[heute um] LT [Uhr]',
        sameElse: 'L',
        nextDay: '[morgen um] LT [Uhr]',
        nextWeek: 'dddd [um] LT [Uhr]',
        lastDay: '[gestern um] LT [Uhr]',
        lastWeek: '[letzten] dddd [um] LT [Uhr]'
    },
    relativeTime : {
        future : 'in %s',
        past : 'vor %s',
        s : 'ein paar Sekunden',
        m : processRelativeTime,
        mm : '%d Minuten',
        h : processRelativeTime,
        hh : '%d Stunden',
        d : processRelativeTime,
        dd : processRelativeTime,
        M : processRelativeTime,
        MM : processRelativeTime,
        y : processRelativeTime,
        yy : processRelativeTime
    },
    dayOfMonthOrdinalParse: /\d{1,2}\./,
    ordinal : '%d.',
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 4  // The week that contains Jan 4th is the first week of the year.
    }
});

return deAt;

})));


/***/ }),
/* 116 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : German (Switzerland) [de-ch]
//! author : sschueller : https://github.com/sschueller

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


// based on: https://www.bk.admin.ch/dokumentation/sprachen/04915/05016/index.html?lang=de#

function processRelativeTime(number, withoutSuffix, key, isFuture) {
    var format = {
        'm': ['eine Minute', 'einer Minute'],
        'h': ['eine Stunde', 'einer Stunde'],
        'd': ['ein Tag', 'einem Tag'],
        'dd': [number + ' Tage', number + ' Tagen'],
        'M': ['ein Monat', 'einem Monat'],
        'MM': [number + ' Monate', number + ' Monaten'],
        'y': ['ein Jahr', 'einem Jahr'],
        'yy': [number + ' Jahre', number + ' Jahren']
    };
    return withoutSuffix ? format[key][0] : format[key][1];
}

var deCh = moment.defineLocale('de-ch', {
    months : 'Januar_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember'.split('_'),
    monthsShort : 'Jan._Feb._März_Apr._Mai_Juni_Juli_Aug._Sep._Okt._Nov._Dez.'.split('_'),
    monthsParseExact : true,
    weekdays : 'Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag'.split('_'),
    weekdaysShort : 'So_Mo_Di_Mi_Do_Fr_Sa'.split('_'),
    weekdaysMin : 'So_Mo_Di_Mi_Do_Fr_Sa'.split('_'),
    weekdaysParseExact : true,
    longDateFormat : {
        LT: 'HH.mm',
        LTS: 'HH.mm.ss',
        L : 'DD.MM.YYYY',
        LL : 'D. MMMM YYYY',
        LLL : 'D. MMMM YYYY HH.mm',
        LLLL : 'dddd, D. MMMM YYYY HH.mm'
    },
    calendar : {
        sameDay: '[heute um] LT [Uhr]',
        sameElse: 'L',
        nextDay: '[morgen um] LT [Uhr]',
        nextWeek: 'dddd [um] LT [Uhr]',
        lastDay: '[gestern um] LT [Uhr]',
        lastWeek: '[letzten] dddd [um] LT [Uhr]'
    },
    relativeTime : {
        future : 'in %s',
        past : 'vor %s',
        s : 'ein paar Sekunden',
        m : processRelativeTime,
        mm : '%d Minuten',
        h : processRelativeTime,
        hh : '%d Stunden',
        d : processRelativeTime,
        dd : processRelativeTime,
        M : processRelativeTime,
        MM : processRelativeTime,
        y : processRelativeTime,
        yy : processRelativeTime
    },
    dayOfMonthOrdinalParse: /\d{1,2}\./,
    ordinal : '%d.',
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 4  // The week that contains Jan 4th is the first week of the year.
    }
});

return deCh;

})));


/***/ }),
/* 117 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Maldivian [dv]
//! author : Jawish Hameed : https://github.com/jawish

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var months = [
    'ޖެނުއަރީ',
    'ފެބްރުއަރީ',
    'މާރިޗު',
    'އޭޕްރީލު',
    'މޭ',
    'ޖޫން',
    'ޖުލައި',
    'އޯގަސްޓު',
    'ސެޕްޓެމްބަރު',
    'އޮކްޓޯބަރު',
    'ނޮވެމްބަރު',
    'ޑިސެމްބަރު'
];
var weekdays = [
    'އާދިއްތަ',
    'ހޯމަ',
    'އަންގާރަ',
    'ބުދަ',
    'ބުރާސްފަތި',
    'ހުކުރު',
    'ހޮނިހިރު'
];

var dv = moment.defineLocale('dv', {
    months : months,
    monthsShort : months,
    weekdays : weekdays,
    weekdaysShort : weekdays,
    weekdaysMin : 'އާދި_ހޯމަ_އަން_ބުދަ_ބުރާ_ހުކު_ހޮނި'.split('_'),
    longDateFormat : {

        LT : 'HH:mm',
        LTS : 'HH:mm:ss',
        L : 'D/M/YYYY',
        LL : 'D MMMM YYYY',
        LLL : 'D MMMM YYYY HH:mm',
        LLLL : 'dddd D MMMM YYYY HH:mm'
    },
    meridiemParse: /މކ|މފ/,
    isPM : function (input) {
        return 'މފ' === input;
    },
    meridiem : function (hour, minute, isLower) {
        if (hour < 12) {
            return 'މކ';
        } else {
            return 'މފ';
        }
    },
    calendar : {
        sameDay : '[މިއަދު] LT',
        nextDay : '[މާދަމާ] LT',
        nextWeek : 'dddd LT',
        lastDay : '[އިއްޔެ] LT',
        lastWeek : '[ފާއިތުވި] dddd LT',
        sameElse : 'L'
    },
    relativeTime : {
        future : 'ތެރޭގައި %s',
        past : 'ކުރިން %s',
        s : 'ސިކުންތުކޮޅެއް',
        m : 'މިނިޓެއް',
        mm : 'މިނިޓު %d',
        h : 'ގަޑިއިރެއް',
        hh : 'ގަޑިއިރު %d',
        d : 'ދުވަހެއް',
        dd : 'ދުވަސް %d',
        M : 'މަހެއް',
        MM : 'މަސް %d',
        y : 'އަހަރެއް',
        yy : 'އަހަރު %d'
    },
    preparse: function (string) {
        return string.replace(/،/g, ',');
    },
    postformat: function (string) {
        return string.replace(/,/g, '،');
    },
    week : {
        dow : 7,  // Sunday is the first day of the week.
        doy : 12  // The week that contains Jan 1st is the first week of the year.
    }
});

return dv;

})));


/***/ }),
/* 118 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Greek [el]
//! author : Aggelos Karalias : https://github.com/mehiel

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';

function isFunction(input) {
    return input instanceof Function || Object.prototype.toString.call(input) === '[object Function]';
}


var el = moment.defineLocale('el', {
    monthsNominativeEl : 'Ιανουάριος_Φεβρουάριος_Μάρτιος_Απρίλιος_Μάιος_Ιούνιος_Ιούλιος_Αύγουστος_Σεπτέμβριος_Οκτώβριος_Νοέμβριος_Δεκέμβριος'.split('_'),
    monthsGenitiveEl : 'Ιανουαρίου_Φεβρουαρίου_Μαρτίου_Απριλίου_Μαΐου_Ιουνίου_Ιουλίου_Αυγούστου_Σεπτεμβρίου_Οκτωβρίου_Νοεμβρίου_Δεκεμβρίου'.split('_'),
    months : function (momentToFormat, format) {
        if (!momentToFormat) {
            return this._monthsNominativeEl;
        } else if (typeof format === 'string' && /D/.test(format.substring(0, format.indexOf('MMMM')))) { // if there is a day number before 'MMMM'
            return this._monthsGenitiveEl[momentToFormat.month()];
        } else {
            return this._monthsNominativeEl[momentToFormat.month()];
        }
    },
    monthsShort : 'Ιαν_Φεβ_Μαρ_Απρ_Μαϊ_Ιουν_Ιουλ_Αυγ_Σεπ_Οκτ_Νοε_Δεκ'.split('_'),
    weekdays : 'Κυριακή_Δευτέρα_Τρίτη_Τετάρτη_Πέμπτη_Παρασκευή_Σάββατο'.split('_'),
    weekdaysShort : 'Κυρ_Δευ_Τρι_Τετ_Πεμ_Παρ_Σαβ'.split('_'),
    weekdaysMin : 'Κυ_Δε_Τρ_Τε_Πε_Πα_Σα'.split('_'),
    meridiem : function (hours, minutes, isLower) {
        if (hours > 11) {
            return isLower ? 'μμ' : 'ΜΜ';
        } else {
            return isLower ? 'πμ' : 'ΠΜ';
        }
    },
    isPM : function (input) {
        return ((input + '').toLowerCase()[0] === 'μ');
    },
    meridiemParse : /[ΠΜ]\.?Μ?\.?/i,
    longDateFormat : {
        LT : 'h:mm A',
        LTS : 'h:mm:ss A',
        L : 'DD/MM/YYYY',
        LL : 'D MMMM YYYY',
        LLL : 'D MMMM YYYY h:mm A',
        LLLL : 'dddd, D MMMM YYYY h:mm A'
    },
    calendarEl : {
        sameDay : '[Σήμερα {}] LT',
        nextDay : '[Αύριο {}] LT',
        nextWeek : 'dddd [{}] LT',
        lastDay : '[Χθες {}] LT',
        lastWeek : function () {
            switch (this.day()) {
                case 6:
                    return '[το προηγούμενο] dddd [{}] LT';
                default:
                    return '[την προηγούμενη] dddd [{}] LT';
            }
        },
        sameElse : 'L'
    },
    calendar : function (key, mom) {
        var output = this._calendarEl[key],
            hours = mom && mom.hours();
        if (isFunction(output)) {
            output = output.apply(mom);
        }
        return output.replace('{}', (hours % 12 === 1 ? 'στη' : 'στις'));
    },
    relativeTime : {
        future : 'σε %s',
        past : '%s πριν',
        s : 'λίγα δευτερόλεπτα',
        m : 'ένα λεπτό',
        mm : '%d λεπτά',
        h : 'μία ώρα',
        hh : '%d ώρες',
        d : 'μία μέρα',
        dd : '%d μέρες',
        M : 'ένας μήνας',
        MM : '%d μήνες',
        y : 'ένας χρόνος',
        yy : '%d χρόνια'
    },
    dayOfMonthOrdinalParse: /\d{1,2}η/,
    ordinal: '%dη',
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 4  // The week that contains Jan 4st is the first week of the year.
    }
});

return el;

})));


/***/ }),
/* 119 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : English (Australia) [en-au]
//! author : Jared Morse : https://github.com/jarcoal

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var enAu = moment.defineLocale('en-au', {
    months : 'January_February_March_April_May_June_July_August_September_October_November_December'.split('_'),
    monthsShort : 'Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec'.split('_'),
    weekdays : 'Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_'),
    weekdaysShort : 'Sun_Mon_Tue_Wed_Thu_Fri_Sat'.split('_'),
    weekdaysMin : 'Su_Mo_Tu_We_Th_Fr_Sa'.split('_'),
    longDateFormat : {
        LT : 'h:mm A',
        LTS : 'h:mm:ss A',
        L : 'DD/MM/YYYY',
        LL : 'D MMMM YYYY',
        LLL : 'D MMMM YYYY h:mm A',
        LLLL : 'dddd, D MMMM YYYY h:mm A'
    },
    calendar : {
        sameDay : '[Today at] LT',
        nextDay : '[Tomorrow at] LT',
        nextWeek : 'dddd [at] LT',
        lastDay : '[Yesterday at] LT',
        lastWeek : '[Last] dddd [at] LT',
        sameElse : 'L'
    },
    relativeTime : {
        future : 'in %s',
        past : '%s ago',
        s : 'a few seconds',
        m : 'a minute',
        mm : '%d minutes',
        h : 'an hour',
        hh : '%d hours',
        d : 'a day',
        dd : '%d days',
        M : 'a month',
        MM : '%d months',
        y : 'a year',
        yy : '%d years'
    },
    dayOfMonthOrdinalParse: /\d{1,2}(st|nd|rd|th)/,
    ordinal : function (number) {
        var b = number % 10,
            output = (~~(number % 100 / 10) === 1) ? 'th' :
            (b === 1) ? 'st' :
            (b === 2) ? 'nd' :
            (b === 3) ? 'rd' : 'th';
        return number + output;
    },
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 4  // The week that contains Jan 4th is the first week of the year.
    }
});

return enAu;

})));


/***/ }),
/* 120 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : English (Canada) [en-ca]
//! author : Jonathan Abourbih : https://github.com/jonbca

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var enCa = moment.defineLocale('en-ca', {
    months : 'January_February_March_April_May_June_July_August_September_October_November_December'.split('_'),
    monthsShort : 'Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec'.split('_'),
    weekdays : 'Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_'),
    weekdaysShort : 'Sun_Mon_Tue_Wed_Thu_Fri_Sat'.split('_'),
    weekdaysMin : 'Su_Mo_Tu_We_Th_Fr_Sa'.split('_'),
    longDateFormat : {
        LT : 'h:mm A',
        LTS : 'h:mm:ss A',
        L : 'YYYY-MM-DD',
        LL : 'MMMM D, YYYY',
        LLL : 'MMMM D, YYYY h:mm A',
        LLLL : 'dddd, MMMM D, YYYY h:mm A'
    },
    calendar : {
        sameDay : '[Today at] LT',
        nextDay : '[Tomorrow at] LT',
        nextWeek : 'dddd [at] LT',
        lastDay : '[Yesterday at] LT',
        lastWeek : '[Last] dddd [at] LT',
        sameElse : 'L'
    },
    relativeTime : {
        future : 'in %s',
        past : '%s ago',
        s : 'a few seconds',
        m : 'a minute',
        mm : '%d minutes',
        h : 'an hour',
        hh : '%d hours',
        d : 'a day',
        dd : '%d days',
        M : 'a month',
        MM : '%d months',
        y : 'a year',
        yy : '%d years'
    },
    dayOfMonthOrdinalParse: /\d{1,2}(st|nd|rd|th)/,
    ordinal : function (number) {
        var b = number % 10,
            output = (~~(number % 100 / 10) === 1) ? 'th' :
            (b === 1) ? 'st' :
            (b === 2) ? 'nd' :
            (b === 3) ? 'rd' : 'th';
        return number + output;
    }
});

return enCa;

})));


/***/ }),
/* 121 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : English (United Kingdom) [en-gb]
//! author : Chris Gedrim : https://github.com/chrisgedrim

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var enGb = moment.defineLocale('en-gb', {
    months : 'January_February_March_April_May_June_July_August_September_October_November_December'.split('_'),
    monthsShort : 'Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec'.split('_'),
    weekdays : 'Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_'),
    weekdaysShort : 'Sun_Mon_Tue_Wed_Thu_Fri_Sat'.split('_'),
    weekdaysMin : 'Su_Mo_Tu_We_Th_Fr_Sa'.split('_'),
    longDateFormat : {
        LT : 'HH:mm',
        LTS : 'HH:mm:ss',
        L : 'DD/MM/YYYY',
        LL : 'D MMMM YYYY',
        LLL : 'D MMMM YYYY HH:mm',
        LLLL : 'dddd, D MMMM YYYY HH:mm'
    },
    calendar : {
        sameDay : '[Today at] LT',
        nextDay : '[Tomorrow at] LT',
        nextWeek : 'dddd [at] LT',
        lastDay : '[Yesterday at] LT',
        lastWeek : '[Last] dddd [at] LT',
        sameElse : 'L'
    },
    relativeTime : {
        future : 'in %s',
        past : '%s ago',
        s : 'a few seconds',
        m : 'a minute',
        mm : '%d minutes',
        h : 'an hour',
        hh : '%d hours',
        d : 'a day',
        dd : '%d days',
        M : 'a month',
        MM : '%d months',
        y : 'a year',
        yy : '%d years'
    },
    dayOfMonthOrdinalParse: /\d{1,2}(st|nd|rd|th)/,
    ordinal : function (number) {
        var b = number % 10,
            output = (~~(number % 100 / 10) === 1) ? 'th' :
            (b === 1) ? 'st' :
            (b === 2) ? 'nd' :
            (b === 3) ? 'rd' : 'th';
        return number + output;
    },
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 4  // The week that contains Jan 4th is the first week of the year.
    }
});

return enGb;

})));


/***/ }),
/* 122 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : English (Ireland) [en-ie]
//! author : Chris Cartlidge : https://github.com/chriscartlidge

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var enIe = moment.defineLocale('en-ie', {
    months : 'January_February_March_April_May_June_July_August_September_October_November_December'.split('_'),
    monthsShort : 'Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec'.split('_'),
    weekdays : 'Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_'),
    weekdaysShort : 'Sun_Mon_Tue_Wed_Thu_Fri_Sat'.split('_'),
    weekdaysMin : 'Su_Mo_Tu_We_Th_Fr_Sa'.split('_'),
    longDateFormat : {
        LT : 'HH:mm',
        LTS : 'HH:mm:ss',
        L : 'DD-MM-YYYY',
        LL : 'D MMMM YYYY',
        LLL : 'D MMMM YYYY HH:mm',
        LLLL : 'dddd D MMMM YYYY HH:mm'
    },
    calendar : {
        sameDay : '[Today at] LT',
        nextDay : '[Tomorrow at] LT',
        nextWeek : 'dddd [at] LT',
        lastDay : '[Yesterday at] LT',
        lastWeek : '[Last] dddd [at] LT',
        sameElse : 'L'
    },
    relativeTime : {
        future : 'in %s',
        past : '%s ago',
        s : 'a few seconds',
        m : 'a minute',
        mm : '%d minutes',
        h : 'an hour',
        hh : '%d hours',
        d : 'a day',
        dd : '%d days',
        M : 'a month',
        MM : '%d months',
        y : 'a year',
        yy : '%d years'
    },
    dayOfMonthOrdinalParse: /\d{1,2}(st|nd|rd|th)/,
    ordinal : function (number) {
        var b = number % 10,
            output = (~~(number % 100 / 10) === 1) ? 'th' :
            (b === 1) ? 'st' :
            (b === 2) ? 'nd' :
            (b === 3) ? 'rd' : 'th';
        return number + output;
    },
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 4  // The week that contains Jan 4th is the first week of the year.
    }
});

return enIe;

})));


/***/ }),
/* 123 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : English (New Zealand) [en-nz]
//! author : Luke McGregor : https://github.com/lukemcgregor

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var enNz = moment.defineLocale('en-nz', {
    months : 'January_February_March_April_May_June_July_August_September_October_November_December'.split('_'),
    monthsShort : 'Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec'.split('_'),
    weekdays : 'Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_'),
    weekdaysShort : 'Sun_Mon_Tue_Wed_Thu_Fri_Sat'.split('_'),
    weekdaysMin : 'Su_Mo_Tu_We_Th_Fr_Sa'.split('_'),
    longDateFormat : {
        LT : 'h:mm A',
        LTS : 'h:mm:ss A',
        L : 'DD/MM/YYYY',
        LL : 'D MMMM YYYY',
        LLL : 'D MMMM YYYY h:mm A',
        LLLL : 'dddd, D MMMM YYYY h:mm A'
    },
    calendar : {
        sameDay : '[Today at] LT',
        nextDay : '[Tomorrow at] LT',
        nextWeek : 'dddd [at] LT',
        lastDay : '[Yesterday at] LT',
        lastWeek : '[Last] dddd [at] LT',
        sameElse : 'L'
    },
    relativeTime : {
        future : 'in %s',
        past : '%s ago',
        s : 'a few seconds',
        m : 'a minute',
        mm : '%d minutes',
        h : 'an hour',
        hh : '%d hours',
        d : 'a day',
        dd : '%d days',
        M : 'a month',
        MM : '%d months',
        y : 'a year',
        yy : '%d years'
    },
    dayOfMonthOrdinalParse: /\d{1,2}(st|nd|rd|th)/,
    ordinal : function (number) {
        var b = number % 10,
            output = (~~(number % 100 / 10) === 1) ? 'th' :
            (b === 1) ? 'st' :
            (b === 2) ? 'nd' :
            (b === 3) ? 'rd' : 'th';
        return number + output;
    },
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 4  // The week that contains Jan 4th is the first week of the year.
    }
});

return enNz;

})));


/***/ }),
/* 124 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Esperanto [eo]
//! author : Colin Dean : https://github.com/colindean
//! author : Mia Nordentoft Imperatori : https://github.com/miestasmia
//! comment : miestasmia corrected the translation by colindean

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var eo = moment.defineLocale('eo', {
    months : 'januaro_februaro_marto_aprilo_majo_junio_julio_aŭgusto_septembro_oktobro_novembro_decembro'.split('_'),
    monthsShort : 'jan_feb_mar_apr_maj_jun_jul_aŭg_sep_okt_nov_dec'.split('_'),
    weekdays : 'dimanĉo_lundo_mardo_merkredo_ĵaŭdo_vendredo_sabato'.split('_'),
    weekdaysShort : 'dim_lun_mard_merk_ĵaŭ_ven_sab'.split('_'),
    weekdaysMin : 'di_lu_ma_me_ĵa_ve_sa'.split('_'),
    longDateFormat : {
        LT : 'HH:mm',
        LTS : 'HH:mm:ss',
        L : 'YYYY-MM-DD',
        LL : 'D[-a de] MMMM, YYYY',
        LLL : 'D[-a de] MMMM, YYYY HH:mm',
        LLLL : 'dddd, [la] D[-a de] MMMM, YYYY HH:mm'
    },
    meridiemParse: /[ap]\.t\.m/i,
    isPM: function (input) {
        return input.charAt(0).toLowerCase() === 'p';
    },
    meridiem : function (hours, minutes, isLower) {
        if (hours > 11) {
            return isLower ? 'p.t.m.' : 'P.T.M.';
        } else {
            return isLower ? 'a.t.m.' : 'A.T.M.';
        }
    },
    calendar : {
        sameDay : '[Hodiaŭ je] LT',
        nextDay : '[Morgaŭ je] LT',
        nextWeek : 'dddd [je] LT',
        lastDay : '[Hieraŭ je] LT',
        lastWeek : '[pasinta] dddd [je] LT',
        sameElse : 'L'
    },
    relativeTime : {
        future : 'post %s',
        past : 'antaŭ %s',
        s : 'sekundoj',
        m : 'minuto',
        mm : '%d minutoj',
        h : 'horo',
        hh : '%d horoj',
        d : 'tago',//ne 'diurno', ĉar estas uzita por proksimumo
        dd : '%d tagoj',
        M : 'monato',
        MM : '%d monatoj',
        y : 'jaro',
        yy : '%d jaroj'
    },
    dayOfMonthOrdinalParse: /\d{1,2}a/,
    ordinal : '%da',
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 7  // The week that contains Jan 1st is the first week of the year.
    }
});

return eo;

})));


/***/ }),
/* 125 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Spanish [es]
//! author : Julio Napurí : https://github.com/julionc

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var monthsShortDot = 'ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.'.split('_');
var monthsShort = 'ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic'.split('_');

var monthsParse = [/^ene/i, /^feb/i, /^mar/i, /^abr/i, /^may/i, /^jun/i, /^jul/i, /^ago/i, /^sep/i, /^oct/i, /^nov/i, /^dic/i];
var monthsRegex = /^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;

var es = moment.defineLocale('es', {
    months : 'enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre'.split('_'),
    monthsShort : function (m, format) {
        if (!m) {
            return monthsShortDot;
        } else if (/-MMM-/.test(format)) {
            return monthsShort[m.month()];
        } else {
            return monthsShortDot[m.month()];
        }
    },
    monthsRegex : monthsRegex,
    monthsShortRegex : monthsRegex,
    monthsStrictRegex : /^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,
    monthsShortStrictRegex : /^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,
    monthsParse : monthsParse,
    longMonthsParse : monthsParse,
    shortMonthsParse : monthsParse,
    weekdays : 'domingo_lunes_martes_miércoles_jueves_viernes_sábado'.split('_'),
    weekdaysShort : 'dom._lun._mar._mié._jue._vie._sáb.'.split('_'),
    weekdaysMin : 'do_lu_ma_mi_ju_vi_sá'.split('_'),
    weekdaysParseExact : true,
    longDateFormat : {
        LT : 'H:mm',
        LTS : 'H:mm:ss',
        L : 'DD/MM/YYYY',
        LL : 'D [de] MMMM [de] YYYY',
        LLL : 'D [de] MMMM [de] YYYY H:mm',
        LLLL : 'dddd, D [de] MMMM [de] YYYY H:mm'
    },
    calendar : {
        sameDay : function () {
            return '[hoy a la' + ((this.hours() !== 1) ? 's' : '') + '] LT';
        },
        nextDay : function () {
            return '[mañana a la' + ((this.hours() !== 1) ? 's' : '') + '] LT';
        },
        nextWeek : function () {
            return 'dddd [a la' + ((this.hours() !== 1) ? 's' : '') + '] LT';
        },
        lastDay : function () {
            return '[ayer a la' + ((this.hours() !== 1) ? 's' : '') + '] LT';
        },
        lastWeek : function () {
            return '[el] dddd [pasado a la' + ((this.hours() !== 1) ? 's' : '') + '] LT';
        },
        sameElse : 'L'
    },
    relativeTime : {
        future : 'en %s',
        past : 'hace %s',
        s : 'unos segundos',
        m : 'un minuto',
        mm : '%d minutos',
        h : 'una hora',
        hh : '%d horas',
        d : 'un día',
        dd : '%d días',
        M : 'un mes',
        MM : '%d meses',
        y : 'un año',
        yy : '%d años'
    },
    dayOfMonthOrdinalParse : /\d{1,2}º/,
    ordinal : '%dº',
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 4  // The week that contains Jan 4th is the first week of the year.
    }
});

return es;

})));


/***/ }),
/* 126 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Spanish (Dominican Republic) [es-do]

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var monthsShortDot = 'ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.'.split('_');
var monthsShort = 'ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic'.split('_');

var monthsParse = [/^ene/i, /^feb/i, /^mar/i, /^abr/i, /^may/i, /^jun/i, /^jul/i, /^ago/i, /^sep/i, /^oct/i, /^nov/i, /^dic/i];
var monthsRegex = /^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre|ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i;

var esDo = moment.defineLocale('es-do', {
    months : 'enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre'.split('_'),
    monthsShort : function (m, format) {
        if (!m) {
            return monthsShortDot;
        } else if (/-MMM-/.test(format)) {
            return monthsShort[m.month()];
        } else {
            return monthsShortDot[m.month()];
        }
    },
    monthsRegex: monthsRegex,
    monthsShortRegex: monthsRegex,
    monthsStrictRegex: /^(enero|febrero|marzo|abril|mayo|junio|julio|agosto|septiembre|octubre|noviembre|diciembre)/i,
    monthsShortStrictRegex: /^(ene\.?|feb\.?|mar\.?|abr\.?|may\.?|jun\.?|jul\.?|ago\.?|sep\.?|oct\.?|nov\.?|dic\.?)/i,
    monthsParse: monthsParse,
    longMonthsParse: monthsParse,
    shortMonthsParse: monthsParse,
    weekdays : 'domingo_lunes_martes_miércoles_jueves_viernes_sábado'.split('_'),
    weekdaysShort : 'dom._lun._mar._mié._jue._vie._sáb.'.split('_'),
    weekdaysMin : 'do_lu_ma_mi_ju_vi_sá'.split('_'),
    weekdaysParseExact : true,
    longDateFormat : {
        LT : 'h:mm A',
        LTS : 'h:mm:ss A',
        L : 'DD/MM/YYYY',
        LL : 'D [de] MMMM [de] YYYY',
        LLL : 'D [de] MMMM [de] YYYY h:mm A',
        LLLL : 'dddd, D [de] MMMM [de] YYYY h:mm A'
    },
    calendar : {
        sameDay : function () {
            return '[hoy a la' + ((this.hours() !== 1) ? 's' : '') + '] LT';
        },
        nextDay : function () {
            return '[mañana a la' + ((this.hours() !== 1) ? 's' : '') + '] LT';
        },
        nextWeek : function () {
            return 'dddd [a la' + ((this.hours() !== 1) ? 's' : '') + '] LT';
        },
        lastDay : function () {
            return '[ayer a la' + ((this.hours() !== 1) ? 's' : '') + '] LT';
        },
        lastWeek : function () {
            return '[el] dddd [pasado a la' + ((this.hours() !== 1) ? 's' : '') + '] LT';
        },
        sameElse : 'L'
    },
    relativeTime : {
        future : 'en %s',
        past : 'hace %s',
        s : 'unos segundos',
        m : 'un minuto',
        mm : '%d minutos',
        h : 'una hora',
        hh : '%d horas',
        d : 'un día',
        dd : '%d días',
        M : 'un mes',
        MM : '%d meses',
        y : 'un año',
        yy : '%d años'
    },
    dayOfMonthOrdinalParse : /\d{1,2}º/,
    ordinal : '%dº',
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 4  // The week that contains Jan 4th is the first week of the year.
    }
});

return esDo;

})));


/***/ }),
/* 127 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Spanish(United State) [es-us]
//! author : bustta : https://github.com/bustta

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var monthsShortDot = 'ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.'.split('_');
var monthsShort = 'ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic'.split('_');

var esUs = moment.defineLocale('es-us', {
    months : 'enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre'.split('_'),
    monthsShort : function (m, format) {
        if (!m) {
            return monthsShortDot;
        } else if (/-MMM-/.test(format)) {
            return monthsShort[m.month()];
        } else {
            return monthsShortDot[m.month()];
        }
    },
    monthsParseExact : true,
    weekdays : 'domingo_lunes_martes_miércoles_jueves_viernes_sábado'.split('_'),
    weekdaysShort : 'dom._lun._mar._mié._jue._vie._sáb.'.split('_'),
    weekdaysMin : 'do_lu_ma_mi_ju_vi_sá'.split('_'),
    weekdaysParseExact : true,
    longDateFormat : {
        LT : 'H:mm',
        LTS : 'H:mm:ss',
        L : 'MM/DD/YYYY',
        LL : 'MMMM [de] D [de] YYYY',
        LLL : 'MMMM [de] D [de] YYYY H:mm',
        LLLL : 'dddd, MMMM [de] D [de] YYYY H:mm'
    },
    calendar : {
        sameDay : function () {
            return '[hoy a la' + ((this.hours() !== 1) ? 's' : '') + '] LT';
        },
        nextDay : function () {
            return '[mañana a la' + ((this.hours() !== 1) ? 's' : '') + '] LT';
        },
        nextWeek : function () {
            return 'dddd [a la' + ((this.hours() !== 1) ? 's' : '') + '] LT';
        },
        lastDay : function () {
            return '[ayer a la' + ((this.hours() !== 1) ? 's' : '') + '] LT';
        },
        lastWeek : function () {
            return '[el] dddd [pasado a la' + ((this.hours() !== 1) ? 's' : '') + '] LT';
        },
        sameElse : 'L'
    },
    relativeTime : {
        future : 'en %s',
        past : 'hace %s',
        s : 'unos segundos',
        m : 'un minuto',
        mm : '%d minutos',
        h : 'una hora',
        hh : '%d horas',
        d : 'un día',
        dd : '%d días',
        M : 'un mes',
        MM : '%d meses',
        y : 'un año',
        yy : '%d años'
    },
    dayOfMonthOrdinalParse : /\d{1,2}º/,
    ordinal : '%dº',
    week : {
        dow : 0, // Sunday is the first day of the week.
        doy : 6  // The week that contains Jan 1st is the first week of the year.
    }
});

return esUs;

})));


/***/ }),
/* 128 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Estonian [et]
//! author : Henry Kehlmann : https://github.com/madhenry
//! improvements : Illimar Tambek : https://github.com/ragulka

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


function processRelativeTime(number, withoutSuffix, key, isFuture) {
    var format = {
        's' : ['mõne sekundi', 'mõni sekund', 'paar sekundit'],
        'm' : ['ühe minuti', 'üks minut'],
        'mm': [number + ' minuti', number + ' minutit'],
        'h' : ['ühe tunni', 'tund aega', 'üks tund'],
        'hh': [number + ' tunni', number + ' tundi'],
        'd' : ['ühe päeva', 'üks päev'],
        'M' : ['kuu aja', 'kuu aega', 'üks kuu'],
        'MM': [number + ' kuu', number + ' kuud'],
        'y' : ['ühe aasta', 'aasta', 'üks aasta'],
        'yy': [number + ' aasta', number + ' aastat']
    };
    if (withoutSuffix) {
        return format[key][2] ? format[key][2] : format[key][1];
    }
    return isFuture ? format[key][0] : format[key][1];
}

var et = moment.defineLocale('et', {
    months        : 'jaanuar_veebruar_märts_aprill_mai_juuni_juuli_august_september_oktoober_november_detsember'.split('_'),
    monthsShort   : 'jaan_veebr_märts_apr_mai_juuni_juuli_aug_sept_okt_nov_dets'.split('_'),
    weekdays      : 'pühapäev_esmaspäev_teisipäev_kolmapäev_neljapäev_reede_laupäev'.split('_'),
    weekdaysShort : 'P_E_T_K_N_R_L'.split('_'),
    weekdaysMin   : 'P_E_T_K_N_R_L'.split('_'),
    longDateFormat : {
        LT   : 'H:mm',
        LTS : 'H:mm:ss',
        L    : 'DD.MM.YYYY',
        LL   : 'D. MMMM YYYY',
        LLL  : 'D. MMMM YYYY H:mm',
        LLLL : 'dddd, D. MMMM YYYY H:mm'
    },
    calendar : {
        sameDay  : '[Täna,] LT',
        nextDay  : '[Homme,] LT',
        nextWeek : '[Järgmine] dddd LT',
        lastDay  : '[Eile,] LT',
        lastWeek : '[Eelmine] dddd LT',
        sameElse : 'L'
    },
    relativeTime : {
        future : '%s pärast',
        past   : '%s tagasi',
        s      : processRelativeTime,
        m      : processRelativeTime,
        mm     : processRelativeTime,
        h      : processRelativeTime,
        hh     : processRelativeTime,
        d      : processRelativeTime,
        dd     : '%d päeva',
        M      : processRelativeTime,
        MM     : processRelativeTime,
        y      : processRelativeTime,
        yy     : processRelativeTime
    },
    dayOfMonthOrdinalParse: /\d{1,2}\./,
    ordinal : '%d.',
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 4  // The week that contains Jan 4th is the first week of the year.
    }
});

return et;

})));


/***/ }),
/* 129 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Basque [eu]
//! author : Eneko Illarramendi : https://github.com/eillarra

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var eu = moment.defineLocale('eu', {
    months : 'urtarrila_otsaila_martxoa_apirila_maiatza_ekaina_uztaila_abuztua_iraila_urria_azaroa_abendua'.split('_'),
    monthsShort : 'urt._ots._mar._api._mai._eka._uzt._abu._ira._urr._aza._abe.'.split('_'),
    monthsParseExact : true,
    weekdays : 'igandea_astelehena_asteartea_asteazkena_osteguna_ostirala_larunbata'.split('_'),
    weekdaysShort : 'ig._al._ar._az._og._ol._lr.'.split('_'),
    weekdaysMin : 'ig_al_ar_az_og_ol_lr'.split('_'),
    weekdaysParseExact : true,
    longDateFormat : {
        LT : 'HH:mm',
        LTS : 'HH:mm:ss',
        L : 'YYYY-MM-DD',
        LL : 'YYYY[ko] MMMM[ren] D[a]',
        LLL : 'YYYY[ko] MMMM[ren] D[a] HH:mm',
        LLLL : 'dddd, YYYY[ko] MMMM[ren] D[a] HH:mm',
        l : 'YYYY-M-D',
        ll : 'YYYY[ko] MMM D[a]',
        lll : 'YYYY[ko] MMM D[a] HH:mm',
        llll : 'ddd, YYYY[ko] MMM D[a] HH:mm'
    },
    calendar : {
        sameDay : '[gaur] LT[etan]',
        nextDay : '[bihar] LT[etan]',
        nextWeek : 'dddd LT[etan]',
        lastDay : '[atzo] LT[etan]',
        lastWeek : '[aurreko] dddd LT[etan]',
        sameElse : 'L'
    },
    relativeTime : {
        future : '%s barru',
        past : 'duela %s',
        s : 'segundo batzuk',
        m : 'minutu bat',
        mm : '%d minutu',
        h : 'ordu bat',
        hh : '%d ordu',
        d : 'egun bat',
        dd : '%d egun',
        M : 'hilabete bat',
        MM : '%d hilabete',
        y : 'urte bat',
        yy : '%d urte'
    },
    dayOfMonthOrdinalParse: /\d{1,2}\./,
    ordinal : '%d.',
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 7  // The week that contains Jan 1st is the first week of the year.
    }
});

return eu;

})));


/***/ }),
/* 130 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Persian [fa]
//! author : Ebrahim Byagowi : https://github.com/ebraminio

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var symbolMap = {
    '1': '۱',
    '2': '۲',
    '3': '۳',
    '4': '۴',
    '5': '۵',
    '6': '۶',
    '7': '۷',
    '8': '۸',
    '9': '۹',
    '0': '۰'
};
var numberMap = {
    '۱': '1',
    '۲': '2',
    '۳': '3',
    '۴': '4',
    '۵': '5',
    '۶': '6',
    '۷': '7',
    '۸': '8',
    '۹': '9',
    '۰': '0'
};

var fa = moment.defineLocale('fa', {
    months : 'ژانویه_فوریه_مارس_آوریل_مه_ژوئن_ژوئیه_اوت_سپتامبر_اکتبر_نوامبر_دسامبر'.split('_'),
    monthsShort : 'ژانویه_فوریه_مارس_آوریل_مه_ژوئن_ژوئیه_اوت_سپتامبر_اکتبر_نوامبر_دسامبر'.split('_'),
    weekdays : 'یک\u200cشنبه_دوشنبه_سه\u200cشنبه_چهارشنبه_پنج\u200cشنبه_جمعه_شنبه'.split('_'),
    weekdaysShort : 'یک\u200cشنبه_دوشنبه_سه\u200cشنبه_چهارشنبه_پنج\u200cشنبه_جمعه_شنبه'.split('_'),
    weekdaysMin : 'ی_د_س_چ_پ_ج_ش'.split('_'),
    weekdaysParseExact : true,
    longDateFormat : {
        LT : 'HH:mm',
        LTS : 'HH:mm:ss',
        L : 'DD/MM/YYYY',
        LL : 'D MMMM YYYY',
        LLL : 'D MMMM YYYY HH:mm',
        LLLL : 'dddd, D MMMM YYYY HH:mm'
    },
    meridiemParse: /قبل از ظهر|بعد از ظهر/,
    isPM: function (input) {
        return /بعد از ظهر/.test(input);
    },
    meridiem : function (hour, minute, isLower) {
        if (hour < 12) {
            return 'قبل از ظهر';
        } else {
            return 'بعد از ظهر';
        }
    },
    calendar : {
        sameDay : '[امروز ساعت] LT',
        nextDay : '[فردا ساعت] LT',
        nextWeek : 'dddd [ساعت] LT',
        lastDay : '[دیروز ساعت] LT',
        lastWeek : 'dddd [پیش] [ساعت] LT',
        sameElse : 'L'
    },
    relativeTime : {
        future : 'در %s',
        past : '%s پیش',
        s : 'چند ثانیه',
        m : 'یک دقیقه',
        mm : '%d دقیقه',
        h : 'یک ساعت',
        hh : '%d ساعت',
        d : 'یک روز',
        dd : '%d روز',
        M : 'یک ماه',
        MM : '%d ماه',
        y : 'یک سال',
        yy : '%d سال'
    },
    preparse: function (string) {
        return string.replace(/[۰-۹]/g, function (match) {
            return numberMap[match];
        }).replace(/،/g, ',');
    },
    postformat: function (string) {
        return string.replace(/\d/g, function (match) {
            return symbolMap[match];
        }).replace(/,/g, '،');
    },
    dayOfMonthOrdinalParse: /\d{1,2}م/,
    ordinal : '%dم',
    week : {
        dow : 6, // Saturday is the first day of the week.
        doy : 12 // The week that contains Jan 1st is the first week of the year.
    }
});

return fa;

})));


/***/ }),
/* 131 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Finnish [fi]
//! author : Tarmo Aidantausta : https://github.com/bleadof

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var numbersPast = 'nolla yksi kaksi kolme neljä viisi kuusi seitsemän kahdeksan yhdeksän'.split(' ');
var numbersFuture = [
        'nolla', 'yhden', 'kahden', 'kolmen', 'neljän', 'viiden', 'kuuden',
        numbersPast[7], numbersPast[8], numbersPast[9]
    ];
function translate(number, withoutSuffix, key, isFuture) {
    var result = '';
    switch (key) {
        case 's':
            return isFuture ? 'muutaman sekunnin' : 'muutama sekunti';
        case 'm':
            return isFuture ? 'minuutin' : 'minuutti';
        case 'mm':
            result = isFuture ? 'minuutin' : 'minuuttia';
            break;
        case 'h':
            return isFuture ? 'tunnin' : 'tunti';
        case 'hh':
            result = isFuture ? 'tunnin' : 'tuntia';
            break;
        case 'd':
            return isFuture ? 'päivän' : 'päivä';
        case 'dd':
            result = isFuture ? 'päivän' : 'päivää';
            break;
        case 'M':
            return isFuture ? 'kuukauden' : 'kuukausi';
        case 'MM':
            result = isFuture ? 'kuukauden' : 'kuukautta';
            break;
        case 'y':
            return isFuture ? 'vuoden' : 'vuosi';
        case 'yy':
            result = isFuture ? 'vuoden' : 'vuotta';
            break;
    }
    result = verbalNumber(number, isFuture) + ' ' + result;
    return result;
}
function verbalNumber(number, isFuture) {
    return number < 10 ? (isFuture ? numbersFuture[number] : numbersPast[number]) : number;
}

var fi = moment.defineLocale('fi', {
    months : 'tammikuu_helmikuu_maaliskuu_huhtikuu_toukokuu_kesäkuu_heinäkuu_elokuu_syyskuu_lokakuu_marraskuu_joulukuu'.split('_'),
    monthsShort : 'tammi_helmi_maalis_huhti_touko_kesä_heinä_elo_syys_loka_marras_joulu'.split('_'),
    weekdays : 'sunnuntai_maanantai_tiistai_keskiviikko_torstai_perjantai_lauantai'.split('_'),
    weekdaysShort : 'su_ma_ti_ke_to_pe_la'.split('_'),
    weekdaysMin : 'su_ma_ti_ke_to_pe_la'.split('_'),
    longDateFormat : {
        LT : 'HH.mm',
        LTS : 'HH.mm.ss',
        L : 'DD.MM.YYYY',
        LL : 'Do MMMM[ta] YYYY',
        LLL : 'Do MMMM[ta] YYYY, [klo] HH.mm',
        LLLL : 'dddd, Do MMMM[ta] YYYY, [klo] HH.mm',
        l : 'D.M.YYYY',
        ll : 'Do MMM YYYY',
        lll : 'Do MMM YYYY, [klo] HH.mm',
        llll : 'ddd, Do MMM YYYY, [klo] HH.mm'
    },
    calendar : {
        sameDay : '[tänään] [klo] LT',
        nextDay : '[huomenna] [klo] LT',
        nextWeek : 'dddd [klo] LT',
        lastDay : '[eilen] [klo] LT',
        lastWeek : '[viime] dddd[na] [klo] LT',
        sameElse : 'L'
    },
    relativeTime : {
        future : '%s päästä',
        past : '%s sitten',
        s : translate,
        m : translate,
        mm : translate,
        h : translate,
        hh : translate,
        d : translate,
        dd : translate,
        M : translate,
        MM : translate,
        y : translate,
        yy : translate
    },
    dayOfMonthOrdinalParse: /\d{1,2}\./,
    ordinal : '%d.',
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 4  // The week that contains Jan 4th is the first week of the year.
    }
});

return fi;

})));


/***/ }),
/* 132 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Faroese [fo]
//! author : Ragnar Johannesen : https://github.com/ragnar123

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var fo = moment.defineLocale('fo', {
    months : 'januar_februar_mars_apríl_mai_juni_juli_august_september_oktober_november_desember'.split('_'),
    monthsShort : 'jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des'.split('_'),
    weekdays : 'sunnudagur_mánadagur_týsdagur_mikudagur_hósdagur_fríggjadagur_leygardagur'.split('_'),
    weekdaysShort : 'sun_mán_týs_mik_hós_frí_ley'.split('_'),
    weekdaysMin : 'su_má_tý_mi_hó_fr_le'.split('_'),
    longDateFormat : {
        LT : 'HH:mm',
        LTS : 'HH:mm:ss',
        L : 'DD/MM/YYYY',
        LL : 'D MMMM YYYY',
        LLL : 'D MMMM YYYY HH:mm',
        LLLL : 'dddd D. MMMM, YYYY HH:mm'
    },
    calendar : {
        sameDay : '[Í dag kl.] LT',
        nextDay : '[Í morgin kl.] LT',
        nextWeek : 'dddd [kl.] LT',
        lastDay : '[Í gjár kl.] LT',
        lastWeek : '[síðstu] dddd [kl] LT',
        sameElse : 'L'
    },
    relativeTime : {
        future : 'um %s',
        past : '%s síðani',
        s : 'fá sekund',
        m : 'ein minutt',
        mm : '%d minuttir',
        h : 'ein tími',
        hh : '%d tímar',
        d : 'ein dagur',
        dd : '%d dagar',
        M : 'ein mánaði',
        MM : '%d mánaðir',
        y : 'eitt ár',
        yy : '%d ár'
    },
    dayOfMonthOrdinalParse: /\d{1,2}\./,
    ordinal : '%d.',
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 4  // The week that contains Jan 4th is the first week of the year.
    }
});

return fo;

})));


/***/ }),
/* 133 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : French [fr]
//! author : John Fischer : https://github.com/jfroffice

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var fr = moment.defineLocale('fr', {
    months : 'janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre'.split('_'),
    monthsShort : 'janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.'.split('_'),
    monthsParseExact : true,
    weekdays : 'dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi'.split('_'),
    weekdaysShort : 'dim._lun._mar._mer._jeu._ven._sam.'.split('_'),
    weekdaysMin : 'Di_Lu_Ma_Me_Je_Ve_Sa'.split('_'),
    weekdaysParseExact : true,
    longDateFormat : {
        LT : 'HH:mm',
        LTS : 'HH:mm:ss',
        L : 'DD/MM/YYYY',
        LL : 'D MMMM YYYY',
        LLL : 'D MMMM YYYY HH:mm',
        LLLL : 'dddd D MMMM YYYY HH:mm'
    },
    calendar : {
        sameDay : '[Aujourd’hui à] LT',
        nextDay : '[Demain à] LT',
        nextWeek : 'dddd [à] LT',
        lastDay : '[Hier à] LT',
        lastWeek : 'dddd [dernier à] LT',
        sameElse : 'L'
    },
    relativeTime : {
        future : 'dans %s',
        past : 'il y a %s',
        s : 'quelques secondes',
        m : 'une minute',
        mm : '%d minutes',
        h : 'une heure',
        hh : '%d heures',
        d : 'un jour',
        dd : '%d jours',
        M : 'un mois',
        MM : '%d mois',
        y : 'un an',
        yy : '%d ans'
    },
    dayOfMonthOrdinalParse: /\d{1,2}(er|)/,
    ordinal : function (number, period) {
        switch (period) {
            // TODO: Return 'e' when day of month > 1. Move this case inside
            // block for masculine words below.
            // See https://github.com/moment/moment/issues/3375
            case 'D':
                return number + (number === 1 ? 'er' : '');

            // Words with masculine grammatical gender: mois, trimestre, jour
            default:
            case 'M':
            case 'Q':
            case 'DDD':
            case 'd':
                return number + (number === 1 ? 'er' : 'e');

            // Words with feminine grammatical gender: semaine
            case 'w':
            case 'W':
                return number + (number === 1 ? 're' : 'e');
        }
    },
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 4  // The week that contains Jan 4th is the first week of the year.
    }
});

return fr;

})));


/***/ }),
/* 134 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : French (Canada) [fr-ca]
//! author : Jonathan Abourbih : https://github.com/jonbca

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var frCa = moment.defineLocale('fr-ca', {
    months : 'janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre'.split('_'),
    monthsShort : 'janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.'.split('_'),
    monthsParseExact : true,
    weekdays : 'dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi'.split('_'),
    weekdaysShort : 'dim._lun._mar._mer._jeu._ven._sam.'.split('_'),
    weekdaysMin : 'Di_Lu_Ma_Me_Je_Ve_Sa'.split('_'),
    weekdaysParseExact : true,
    longDateFormat : {
        LT : 'HH:mm',
        LTS : 'HH:mm:ss',
        L : 'YYYY-MM-DD',
        LL : 'D MMMM YYYY',
        LLL : 'D MMMM YYYY HH:mm',
        LLLL : 'dddd D MMMM YYYY HH:mm'
    },
    calendar : {
        sameDay : '[Aujourd’hui à] LT',
        nextDay : '[Demain à] LT',
        nextWeek : 'dddd [à] LT',
        lastDay : '[Hier à] LT',
        lastWeek : 'dddd [dernier à] LT',
        sameElse : 'L'
    },
    relativeTime : {
        future : 'dans %s',
        past : 'il y a %s',
        s : 'quelques secondes',
        m : 'une minute',
        mm : '%d minutes',
        h : 'une heure',
        hh : '%d heures',
        d : 'un jour',
        dd : '%d jours',
        M : 'un mois',
        MM : '%d mois',
        y : 'un an',
        yy : '%d ans'
    },
    dayOfMonthOrdinalParse: /\d{1,2}(er|e)/,
    ordinal : function (number, period) {
        switch (period) {
            // Words with masculine grammatical gender: mois, trimestre, jour
            default:
            case 'M':
            case 'Q':
            case 'D':
            case 'DDD':
            case 'd':
                return number + (number === 1 ? 'er' : 'e');

            // Words with feminine grammatical gender: semaine
            case 'w':
            case 'W':
                return number + (number === 1 ? 're' : 'e');
        }
    }
});

return frCa;

})));


/***/ }),
/* 135 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : French (Switzerland) [fr-ch]
//! author : Gaspard Bucher : https://github.com/gaspard

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var frCh = moment.defineLocale('fr-ch', {
    months : 'janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre'.split('_'),
    monthsShort : 'janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.'.split('_'),
    monthsParseExact : true,
    weekdays : 'dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi'.split('_'),
    weekdaysShort : 'dim._lun._mar._mer._jeu._ven._sam.'.split('_'),
    weekdaysMin : 'Di_Lu_Ma_Me_Je_Ve_Sa'.split('_'),
    weekdaysParseExact : true,
    longDateFormat : {
        LT : 'HH:mm',
        LTS : 'HH:mm:ss',
        L : 'DD.MM.YYYY',
        LL : 'D MMMM YYYY',
        LLL : 'D MMMM YYYY HH:mm',
        LLLL : 'dddd D MMMM YYYY HH:mm'
    },
    calendar : {
        sameDay : '[Aujourd’hui à] LT',
        nextDay : '[Demain à] LT',
        nextWeek : 'dddd [à] LT',
        lastDay : '[Hier à] LT',
        lastWeek : 'dddd [dernier à] LT',
        sameElse : 'L'
    },
    relativeTime : {
        future : 'dans %s',
        past : 'il y a %s',
        s : 'quelques secondes',
        m : 'une minute',
        mm : '%d minutes',
        h : 'une heure',
        hh : '%d heures',
        d : 'un jour',
        dd : '%d jours',
        M : 'un mois',
        MM : '%d mois',
        y : 'un an',
        yy : '%d ans'
    },
    dayOfMonthOrdinalParse: /\d{1,2}(er|e)/,
    ordinal : function (number, period) {
        switch (period) {
            // Words with masculine grammatical gender: mois, trimestre, jour
            default:
            case 'M':
            case 'Q':
            case 'D':
            case 'DDD':
            case 'd':
                return number + (number === 1 ? 'er' : 'e');

            // Words with feminine grammatical gender: semaine
            case 'w':
            case 'W':
                return number + (number === 1 ? 're' : 'e');
        }
    },
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 4  // The week that contains Jan 4th is the first week of the year.
    }
});

return frCh;

})));


/***/ }),
/* 136 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Frisian [fy]
//! author : Robin van der Vliet : https://github.com/robin0van0der0v

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var monthsShortWithDots = 'jan._feb._mrt._apr._mai_jun._jul._aug._sep._okt._nov._des.'.split('_');
var monthsShortWithoutDots = 'jan_feb_mrt_apr_mai_jun_jul_aug_sep_okt_nov_des'.split('_');

var fy = moment.defineLocale('fy', {
    months : 'jannewaris_febrewaris_maart_april_maaie_juny_july_augustus_septimber_oktober_novimber_desimber'.split('_'),
    monthsShort : function (m, format) {
        if (!m) {
            return monthsShortWithDots;
        } else if (/-MMM-/.test(format)) {
            return monthsShortWithoutDots[m.month()];
        } else {
            return monthsShortWithDots[m.month()];
        }
    },
    monthsParseExact : true,
    weekdays : 'snein_moandei_tiisdei_woansdei_tongersdei_freed_sneon'.split('_'),
    weekdaysShort : 'si._mo._ti._wo._to._fr._so.'.split('_'),
    weekdaysMin : 'Si_Mo_Ti_Wo_To_Fr_So'.split('_'),
    weekdaysParseExact : true,
    longDateFormat : {
        LT : 'HH:mm',
        LTS : 'HH:mm:ss',
        L : 'DD-MM-YYYY',
        LL : 'D MMMM YYYY',
        LLL : 'D MMMM YYYY HH:mm',
        LLLL : 'dddd D MMMM YYYY HH:mm'
    },
    calendar : {
        sameDay: '[hjoed om] LT',
        nextDay: '[moarn om] LT',
        nextWeek: 'dddd [om] LT',
        lastDay: '[juster om] LT',
        lastWeek: '[ôfrûne] dddd [om] LT',
        sameElse: 'L'
    },
    relativeTime : {
        future : 'oer %s',
        past : '%s lyn',
        s : 'in pear sekonden',
        m : 'ien minút',
        mm : '%d minuten',
        h : 'ien oere',
        hh : '%d oeren',
        d : 'ien dei',
        dd : '%d dagen',
        M : 'ien moanne',
        MM : '%d moannen',
        y : 'ien jier',
        yy : '%d jierren'
    },
    dayOfMonthOrdinalParse: /\d{1,2}(ste|de)/,
    ordinal : function (number) {
        return number + ((number === 1 || number === 8 || number >= 20) ? 'ste' : 'de');
    },
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 4  // The week that contains Jan 4th is the first week of the year.
    }
});

return fy;

})));


/***/ }),
/* 137 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Scottish Gaelic [gd]
//! author : Jon Ashdown : https://github.com/jonashdown

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var months = [
    'Am Faoilleach', 'An Gearran', 'Am Màrt', 'An Giblean', 'An Cèitean', 'An t-Ògmhios', 'An t-Iuchar', 'An Lùnastal', 'An t-Sultain', 'An Dàmhair', 'An t-Samhain', 'An Dùbhlachd'
];

var monthsShort = ['Faoi', 'Gear', 'Màrt', 'Gibl', 'Cèit', 'Ògmh', 'Iuch', 'Lùn', 'Sult', 'Dàmh', 'Samh', 'Dùbh'];

var weekdays = ['Didòmhnaich', 'Diluain', 'Dimàirt', 'Diciadain', 'Diardaoin', 'Dihaoine', 'Disathairne'];

var weekdaysShort = ['Did', 'Dil', 'Dim', 'Dic', 'Dia', 'Dih', 'Dis'];

var weekdaysMin = ['Dò', 'Lu', 'Mà', 'Ci', 'Ar', 'Ha', 'Sa'];

var gd = moment.defineLocale('gd', {
    months : months,
    monthsShort : monthsShort,
    monthsParseExact : true,
    weekdays : weekdays,
    weekdaysShort : weekdaysShort,
    weekdaysMin : weekdaysMin,
    longDateFormat : {
        LT : 'HH:mm',
        LTS : 'HH:mm:ss',
        L : 'DD/MM/YYYY',
        LL : 'D MMMM YYYY',
        LLL : 'D MMMM YYYY HH:mm',
        LLLL : 'dddd, D MMMM YYYY HH:mm'
    },
    calendar : {
        sameDay : '[An-diugh aig] LT',
        nextDay : '[A-màireach aig] LT',
        nextWeek : 'dddd [aig] LT',
        lastDay : '[An-dè aig] LT',
        lastWeek : 'dddd [seo chaidh] [aig] LT',
        sameElse : 'L'
    },
    relativeTime : {
        future : 'ann an %s',
        past : 'bho chionn %s',
        s : 'beagan diogan',
        m : 'mionaid',
        mm : '%d mionaidean',
        h : 'uair',
        hh : '%d uairean',
        d : 'latha',
        dd : '%d latha',
        M : 'mìos',
        MM : '%d mìosan',
        y : 'bliadhna',
        yy : '%d bliadhna'
    },
    dayOfMonthOrdinalParse : /\d{1,2}(d|na|mh)/,
    ordinal : function (number) {
        var output = number === 1 ? 'd' : number % 10 === 2 ? 'na' : 'mh';
        return number + output;
    },
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 4  // The week that contains Jan 4th is the first week of the year.
    }
});

return gd;

})));


/***/ }),
/* 138 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Galician [gl]
//! author : Juan G. Hurtado : https://github.com/juanghurtado

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var gl = moment.defineLocale('gl', {
    months : 'xaneiro_febreiro_marzo_abril_maio_xuño_xullo_agosto_setembro_outubro_novembro_decembro'.split('_'),
    monthsShort : 'xan._feb._mar._abr._mai._xuñ._xul._ago._set._out._nov._dec.'.split('_'),
    monthsParseExact: true,
    weekdays : 'domingo_luns_martes_mércores_xoves_venres_sábado'.split('_'),
    weekdaysShort : 'dom._lun._mar._mér._xov._ven._sáb.'.split('_'),
    weekdaysMin : 'do_lu_ma_mé_xo_ve_sá'.split('_'),
    weekdaysParseExact : true,
    longDateFormat : {
        LT : 'H:mm',
        LTS : 'H:mm:ss',
        L : 'DD/MM/YYYY',
        LL : 'D [de] MMMM [de] YYYY',
        LLL : 'D [de] MMMM [de] YYYY H:mm',
        LLLL : 'dddd, D [de] MMMM [de] YYYY H:mm'
    },
    calendar : {
        sameDay : function () {
            return '[hoxe ' + ((this.hours() !== 1) ? 'ás' : 'á') + '] LT';
        },
        nextDay : function () {
            return '[mañá ' + ((this.hours() !== 1) ? 'ás' : 'á') + '] LT';
        },
        nextWeek : function () {
            return 'dddd [' + ((this.hours() !== 1) ? 'ás' : 'a') + '] LT';
        },
        lastDay : function () {
            return '[onte ' + ((this.hours() !== 1) ? 'á' : 'a') + '] LT';
        },
        lastWeek : function () {
            return '[o] dddd [pasado ' + ((this.hours() !== 1) ? 'ás' : 'a') + '] LT';
        },
        sameElse : 'L'
    },
    relativeTime : {
        future : function (str) {
            if (str.indexOf('un') === 0) {
                return 'n' + str;
            }
            return 'en ' + str;
        },
        past : 'hai %s',
        s : 'uns segundos',
        m : 'un minuto',
        mm : '%d minutos',
        h : 'unha hora',
        hh : '%d horas',
        d : 'un día',
        dd : '%d días',
        M : 'un mes',
        MM : '%d meses',
        y : 'un ano',
        yy : '%d anos'
    },
    dayOfMonthOrdinalParse : /\d{1,2}º/,
    ordinal : '%dº',
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 4  // The week that contains Jan 4th is the first week of the year.
    }
});

return gl;

})));


/***/ }),
/* 139 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Konkani Latin script [gom-latn]
//! author : The Discoverer : https://github.com/WikiDiscoverer

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


function processRelativeTime(number, withoutSuffix, key, isFuture) {
    var format = {
        's': ['thodde secondanim', 'thodde second'],
        'm': ['eka mintan', 'ek minute'],
        'mm': [number + ' mintanim', number + ' mintam'],
        'h': ['eka horan', 'ek hor'],
        'hh': [number + ' horanim', number + ' hor'],
        'd': ['eka disan', 'ek dis'],
        'dd': [number + ' disanim', number + ' dis'],
        'M': ['eka mhoinean', 'ek mhoino'],
        'MM': [number + ' mhoineanim', number + ' mhoine'],
        'y': ['eka vorsan', 'ek voros'],
        'yy': [number + ' vorsanim', number + ' vorsam']
    };
    return withoutSuffix ? format[key][0] : format[key][1];
}

var gomLatn = moment.defineLocale('gom-latn', {
    months : 'Janer_Febrer_Mars_Abril_Mai_Jun_Julai_Agost_Setembr_Otubr_Novembr_Dezembr'.split('_'),
    monthsShort : 'Jan._Feb._Mars_Abr._Mai_Jun_Jul._Ago._Set._Otu._Nov._Dez.'.split('_'),
    monthsParseExact : true,
    weekdays : 'Aitar_Somar_Mongllar_Budvar_Brestar_Sukrar_Son\'var'.split('_'),
    weekdaysShort : 'Ait._Som._Mon._Bud._Bre._Suk._Son.'.split('_'),
    weekdaysMin : 'Ai_Sm_Mo_Bu_Br_Su_Sn'.split('_'),
    weekdaysParseExact : true,
    longDateFormat : {
        LT : 'A h:mm [vazta]',
        LTS : 'A h:mm:ss [vazta]',
        L : 'DD-MM-YYYY',
        LL : 'D MMMM YYYY',
        LLL : 'D MMMM YYYY A h:mm [vazta]',
        LLLL : 'dddd, MMMM[achea] Do, YYYY, A h:mm [vazta]',
        llll: 'ddd, D MMM YYYY, A h:mm [vazta]'
    },
    calendar : {
        sameDay: '[Aiz] LT',
        nextDay: '[Faleam] LT',
        nextWeek: '[Ieta to] dddd[,] LT',
        lastDay: '[Kal] LT',
        lastWeek: '[Fatlo] dddd[,] LT',
        sameElse: 'L'
    },
    relativeTime : {
        future : '%s',
        past : '%s adim',
        s : processRelativeTime,
        m : processRelativeTime,
        mm : processRelativeTime,
        h : processRelativeTime,
        hh : processRelativeTime,
        d : processRelativeTime,
        dd : processRelativeTime,
        M : processRelativeTime,
        MM : processRelativeTime,
        y : processRelativeTime,
        yy : processRelativeTime
    },
    dayOfMonthOrdinalParse : /\d{1,2}(er)/,
    ordinal : function (number, period) {
        switch (period) {
            // the ordinal 'er' only applies to day of the month
            case 'D':
                return number + 'er';
            default:
            case 'M':
            case 'Q':
            case 'DDD':
            case 'd':
            case 'w':
            case 'W':
                return number;
        }
    },
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 4  // The week that contains Jan 4th is the first week of the year.
    },
    meridiemParse: /rati|sokalli|donparam|sanje/,
    meridiemHour : function (hour, meridiem) {
        if (hour === 12) {
            hour = 0;
        }
        if (meridiem === 'rati') {
            return hour < 4 ? hour : hour + 12;
        } else if (meridiem === 'sokalli') {
            return hour;
        } else if (meridiem === 'donparam') {
            return hour > 12 ? hour : hour + 12;
        } else if (meridiem === 'sanje') {
            return hour + 12;
        }
    },
    meridiem : function (hour, minute, isLower) {
        if (hour < 4) {
            return 'rati';
        } else if (hour < 12) {
            return 'sokalli';
        } else if (hour < 16) {
            return 'donparam';
        } else if (hour < 20) {
            return 'sanje';
        } else {
            return 'rati';
        }
    }
});

return gomLatn;

})));


/***/ }),
/* 140 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Gujarati [gu]
//! author : Kaushik Thanki : https://github.com/Kaushik1987

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var symbolMap = {
        '1': '૧',
        '2': '૨',
        '3': '૩',
        '4': '૪',
        '5': '૫',
        '6': '૬',
        '7': '૭',
        '8': '૮',
        '9': '૯',
        '0': '૦'
    };
var numberMap = {
        '૧': '1',
        '૨': '2',
        '૩': '3',
        '૪': '4',
        '૫': '5',
        '૬': '6',
        '૭': '7',
        '૮': '8',
        '૯': '9',
        '૦': '0'
    };

var gu = moment.defineLocale('gu', {
    months: 'જાન્યુઆરી_ફેબ્રુઆરી_માર્ચ_એપ્રિલ_મે_જૂન_જુલાઈ_ઑગસ્ટ_સપ્ટેમ્બર_ઑક્ટ્બર_નવેમ્બર_ડિસેમ્બર'.split('_'),
    monthsShort: 'જાન્યુ._ફેબ્રુ._માર્ચ_એપ્રિ._મે_જૂન_જુલા._ઑગ._સપ્ટે._ઑક્ટ્._નવે._ડિસે.'.split('_'),
    monthsParseExact: true,
    weekdays: 'રવિવાર_સોમવાર_મંગળવાર_બુધ્વાર_ગુરુવાર_શુક્રવાર_શનિવાર'.split('_'),
    weekdaysShort: 'રવિ_સોમ_મંગળ_બુધ્_ગુરુ_શુક્ર_શનિ'.split('_'),
    weekdaysMin: 'ર_સો_મં_બુ_ગુ_શુ_શ'.split('_'),
    longDateFormat: {
        LT: 'A h:mm વાગ્યે',
        LTS: 'A h:mm:ss વાગ્યે',
        L: 'DD/MM/YYYY',
        LL: 'D MMMM YYYY',
        LLL: 'D MMMM YYYY, A h:mm વાગ્યે',
        LLLL: 'dddd, D MMMM YYYY, A h:mm વાગ્યે'
    },
    calendar: {
        sameDay: '[આજ] LT',
        nextDay: '[કાલે] LT',
        nextWeek: 'dddd, LT',
        lastDay: '[ગઇકાલે] LT',
        lastWeek: '[પાછલા] dddd, LT',
        sameElse: 'L'
    },
    relativeTime: {
        future: '%s મા',
        past: '%s પેહલા',
        s: 'અમુક પળો',
        m: 'એક મિનિટ',
        mm: '%d મિનિટ',
        h: 'એક કલાક',
        hh: '%d કલાક',
        d: 'એક દિવસ',
        dd: '%d દિવસ',
        M: 'એક મહિનો',
        MM: '%d મહિનો',
        y: 'એક વર્ષ',
        yy: '%d વર્ષ'
    },
    preparse: function (string) {
        return string.replace(/[૧૨૩૪૫૬૭૮૯૦]/g, function (match) {
            return numberMap[match];
        });
    },
    postformat: function (string) {
        return string.replace(/\d/g, function (match) {
            return symbolMap[match];
        });
    },
    // Gujarati notation for meridiems are quite fuzzy in practice. While there exists
    // a rigid notion of a 'Pahar' it is not used as rigidly in modern Gujarati.
    meridiemParse: /રાત|બપોર|સવાર|સાંજ/,
    meridiemHour: function (hour, meridiem) {
        if (hour === 12) {
            hour = 0;
        }
        if (meridiem === 'રાત') {
            return hour < 4 ? hour : hour + 12;
        } else if (meridiem === 'સવાર') {
            return hour;
        } else if (meridiem === 'બપોર') {
            return hour >= 10 ? hour : hour + 12;
        } else if (meridiem === 'સાંજ') {
            return hour + 12;
        }
    },
    meridiem: function (hour, minute, isLower) {
        if (hour < 4) {
            return 'રાત';
        } else if (hour < 10) {
            return 'સવાર';
        } else if (hour < 17) {
            return 'બપોર';
        } else if (hour < 20) {
            return 'સાંજ';
        } else {
            return 'રાત';
        }
    },
    week: {
        dow: 0, // Sunday is the first day of the week.
        doy: 6 // The week that contains Jan 1st is the first week of the year.
    }
});

return gu;

})));


/***/ }),
/* 141 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Hebrew [he]
//! author : Tomer Cohen : https://github.com/tomer
//! author : Moshe Simantov : https://github.com/DevelopmentIL
//! author : Tal Ater : https://github.com/TalAter

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var he = moment.defineLocale('he', {
    months : 'ינואר_פברואר_מרץ_אפריל_מאי_יוני_יולי_אוגוסט_ספטמבר_אוקטובר_נובמבר_דצמבר'.split('_'),
    monthsShort : 'ינו׳_פבר׳_מרץ_אפר׳_מאי_יוני_יולי_אוג׳_ספט׳_אוק׳_נוב׳_דצמ׳'.split('_'),
    weekdays : 'ראשון_שני_שלישי_רביעי_חמישי_שישי_שבת'.split('_'),
    weekdaysShort : 'א׳_ב׳_ג׳_ד׳_ה׳_ו׳_ש׳'.split('_'),
    weekdaysMin : 'א_ב_ג_ד_ה_ו_ש'.split('_'),
    longDateFormat : {
        LT : 'HH:mm',
        LTS : 'HH:mm:ss',
        L : 'DD/MM/YYYY',
        LL : 'D [ב]MMMM YYYY',
        LLL : 'D [ב]MMMM YYYY HH:mm',
        LLLL : 'dddd, D [ב]MMMM YYYY HH:mm',
        l : 'D/M/YYYY',
        ll : 'D MMM YYYY',
        lll : 'D MMM YYYY HH:mm',
        llll : 'ddd, D MMM YYYY HH:mm'
    },
    calendar : {
        sameDay : '[היום ב־]LT',
        nextDay : '[מחר ב־]LT',
        nextWeek : 'dddd [בשעה] LT',
        lastDay : '[אתמול ב־]LT',
        lastWeek : '[ביום] dddd [האחרון בשעה] LT',
        sameElse : 'L'
    },
    relativeTime : {
        future : 'בעוד %s',
        past : 'לפני %s',
        s : 'מספר שניות',
        m : 'דקה',
        mm : '%d דקות',
        h : 'שעה',
        hh : function (number) {
            if (number === 2) {
                return 'שעתיים';
            }
            return number + ' שעות';
        },
        d : 'יום',
        dd : function (number) {
            if (number === 2) {
                return 'יומיים';
            }
            return number + ' ימים';
        },
        M : 'חודש',
        MM : function (number) {
            if (number === 2) {
                return 'חודשיים';
            }
            return number + ' חודשים';
        },
        y : 'שנה',
        yy : function (number) {
            if (number === 2) {
                return 'שנתיים';
            } else if (number % 10 === 0 && number !== 10) {
                return number + ' שנה';
            }
            return number + ' שנים';
        }
    },
    meridiemParse: /אחה"צ|לפנה"צ|אחרי הצהריים|לפני הצהריים|לפנות בוקר|בבוקר|בערב/i,
    isPM : function (input) {
        return /^(אחה"צ|אחרי הצהריים|בערב)$/.test(input);
    },
    meridiem : function (hour, minute, isLower) {
        if (hour < 5) {
            return 'לפנות בוקר';
        } else if (hour < 10) {
            return 'בבוקר';
        } else if (hour < 12) {
            return isLower ? 'לפנה"צ' : 'לפני הצהריים';
        } else if (hour < 18) {
            return isLower ? 'אחה"צ' : 'אחרי הצהריים';
        } else {
            return 'בערב';
        }
    }
});

return he;

})));


/***/ }),
/* 142 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Hindi [hi]
//! author : Mayank Singhal : https://github.com/mayanksinghal

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var symbolMap = {
    '1': '१',
    '2': '२',
    '3': '३',
    '4': '४',
    '5': '५',
    '6': '६',
    '7': '७',
    '8': '८',
    '9': '९',
    '0': '०'
};
var numberMap = {
    '१': '1',
    '२': '2',
    '३': '3',
    '४': '4',
    '५': '5',
    '६': '6',
    '७': '7',
    '८': '8',
    '९': '9',
    '०': '0'
};

var hi = moment.defineLocale('hi', {
    months : 'जनवरी_फ़रवरी_मार्च_अप्रैल_मई_जून_जुलाई_अगस्त_सितम्बर_अक्टूबर_नवम्बर_दिसम्बर'.split('_'),
    monthsShort : 'जन._फ़र._मार्च_अप्रै._मई_जून_जुल._अग._सित._अक्टू._नव._दिस.'.split('_'),
    monthsParseExact: true,
    weekdays : 'रविवार_सोमवार_मंगलवार_बुधवार_गुरूवार_शुक्रवार_शनिवार'.split('_'),
    weekdaysShort : 'रवि_सोम_मंगल_बुध_गुरू_शुक्र_शनि'.split('_'),
    weekdaysMin : 'र_सो_मं_बु_गु_शु_श'.split('_'),
    longDateFormat : {
        LT : 'A h:mm बजे',
        LTS : 'A h:mm:ss बजे',
        L : 'DD/MM/YYYY',
        LL : 'D MMMM YYYY',
        LLL : 'D MMMM YYYY, A h:mm बजे',
        LLLL : 'dddd, D MMMM YYYY, A h:mm बजे'
    },
    calendar : {
        sameDay : '[आज] LT',
        nextDay : '[कल] LT',
        nextWeek : 'dddd, LT',
        lastDay : '[कल] LT',
        lastWeek : '[पिछले] dddd, LT',
        sameElse : 'L'
    },
    relativeTime : {
        future : '%s में',
        past : '%s पहले',
        s : 'कुछ ही क्षण',
        m : 'एक मिनट',
        mm : '%d मिनट',
        h : 'एक घंटा',
        hh : '%d घंटे',
        d : 'एक दिन',
        dd : '%d दिन',
        M : 'एक महीने',
        MM : '%d महीने',
        y : 'एक वर्ष',
        yy : '%d वर्ष'
    },
    preparse: function (string) {
        return string.replace(/[१२३४५६७८९०]/g, function (match) {
            return numberMap[match];
        });
    },
    postformat: function (string) {
        return string.replace(/\d/g, function (match) {
            return symbolMap[match];
        });
    },
    // Hindi notation for meridiems are quite fuzzy in practice. While there exists
    // a rigid notion of a 'Pahar' it is not used as rigidly in modern Hindi.
    meridiemParse: /रात|सुबह|दोपहर|शाम/,
    meridiemHour : function (hour, meridiem) {
        if (hour === 12) {
            hour = 0;
        }
        if (meridiem === 'रात') {
            return hour < 4 ? hour : hour + 12;
        } else if (meridiem === 'सुबह') {
            return hour;
        } else if (meridiem === 'दोपहर') {
            return hour >= 10 ? hour : hour + 12;
        } else if (meridiem === 'शाम') {
            return hour + 12;
        }
    },
    meridiem : function (hour, minute, isLower) {
        if (hour < 4) {
            return 'रात';
        } else if (hour < 10) {
            return 'सुबह';
        } else if (hour < 17) {
            return 'दोपहर';
        } else if (hour < 20) {
            return 'शाम';
        } else {
            return 'रात';
        }
    },
    week : {
        dow : 0, // Sunday is the first day of the week.
        doy : 6  // The week that contains Jan 1st is the first week of the year.
    }
});

return hi;

})));


/***/ }),
/* 143 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Croatian [hr]
//! author : Bojan Marković : https://github.com/bmarkovic

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


function translate(number, withoutSuffix, key) {
    var result = number + ' ';
    switch (key) {
        case 'm':
            return withoutSuffix ? 'jedna minuta' : 'jedne minute';
        case 'mm':
            if (number === 1) {
                result += 'minuta';
            } else if (number === 2 || number === 3 || number === 4) {
                result += 'minute';
            } else {
                result += 'minuta';
            }
            return result;
        case 'h':
            return withoutSuffix ? 'jedan sat' : 'jednog sata';
        case 'hh':
            if (number === 1) {
                result += 'sat';
            } else if (number === 2 || number === 3 || number === 4) {
                result += 'sata';
            } else {
                result += 'sati';
            }
            return result;
        case 'dd':
            if (number === 1) {
                result += 'dan';
            } else {
                result += 'dana';
            }
            return result;
        case 'MM':
            if (number === 1) {
                result += 'mjesec';
            } else if (number === 2 || number === 3 || number === 4) {
                result += 'mjeseca';
            } else {
                result += 'mjeseci';
            }
            return result;
        case 'yy':
            if (number === 1) {
                result += 'godina';
            } else if (number === 2 || number === 3 || number === 4) {
                result += 'godine';
            } else {
                result += 'godina';
            }
            return result;
    }
}

var hr = moment.defineLocale('hr', {
    months : {
        format: 'siječnja_veljače_ožujka_travnja_svibnja_lipnja_srpnja_kolovoza_rujna_listopada_studenoga_prosinca'.split('_'),
        standalone: 'siječanj_veljača_ožujak_travanj_svibanj_lipanj_srpanj_kolovoz_rujan_listopad_studeni_prosinac'.split('_')
    },
    monthsShort : 'sij._velj._ožu._tra._svi._lip._srp._kol._ruj._lis._stu._pro.'.split('_'),
    monthsParseExact: true,
    weekdays : 'nedjelja_ponedjeljak_utorak_srijeda_četvrtak_petak_subota'.split('_'),
    weekdaysShort : 'ned._pon._uto._sri._čet._pet._sub.'.split('_'),
    weekdaysMin : 'ne_po_ut_sr_če_pe_su'.split('_'),
    weekdaysParseExact : true,
    longDateFormat : {
        LT : 'H:mm',
        LTS : 'H:mm:ss',
        L : 'DD.MM.YYYY',
        LL : 'D. MMMM YYYY',
        LLL : 'D. MMMM YYYY H:mm',
        LLLL : 'dddd, D. MMMM YYYY H:mm'
    },
    calendar : {
        sameDay  : '[danas u] LT',
        nextDay  : '[sutra u] LT',
        nextWeek : function () {
            switch (this.day()) {
                case 0:
                    return '[u] [nedjelju] [u] LT';
                case 3:
                    return '[u] [srijedu] [u] LT';
                case 6:
                    return '[u] [subotu] [u] LT';
                case 1:
                case 2:
                case 4:
                case 5:
                    return '[u] dddd [u] LT';
            }
        },
        lastDay  : '[jučer u] LT',
        lastWeek : function () {
            switch (this.day()) {
                case 0:
                case 3:
                    return '[prošlu] dddd [u] LT';
                case 6:
                    return '[prošle] [subote] [u] LT';
                case 1:
                case 2:
                case 4:
                case 5:
                    return '[prošli] dddd [u] LT';
            }
        },
        sameElse : 'L'
    },
    relativeTime : {
        future : 'za %s',
        past   : 'prije %s',
        s      : 'par sekundi',
        m      : translate,
        mm     : translate,
        h      : translate,
        hh     : translate,
        d      : 'dan',
        dd     : translate,
        M      : 'mjesec',
        MM     : translate,
        y      : 'godinu',
        yy     : translate
    },
    dayOfMonthOrdinalParse: /\d{1,2}\./,
    ordinal : '%d.',
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 7  // The week that contains Jan 1st is the first week of the year.
    }
});

return hr;

})));


/***/ }),
/* 144 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Hungarian [hu]
//! author : Adam Brunner : https://github.com/adambrunner

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var weekEndings = 'vasárnap hétfőn kedden szerdán csütörtökön pénteken szombaton'.split(' ');
function translate(number, withoutSuffix, key, isFuture) {
    var num = number,
        suffix;
    switch (key) {
        case 's':
            return (isFuture || withoutSuffix) ? 'néhány másodperc' : 'néhány másodperce';
        case 'm':
            return 'egy' + (isFuture || withoutSuffix ? ' perc' : ' perce');
        case 'mm':
            return num + (isFuture || withoutSuffix ? ' perc' : ' perce');
        case 'h':
            return 'egy' + (isFuture || withoutSuffix ? ' óra' : ' órája');
        case 'hh':
            return num + (isFuture || withoutSuffix ? ' óra' : ' órája');
        case 'd':
            return 'egy' + (isFuture || withoutSuffix ? ' nap' : ' napja');
        case 'dd':
            return num + (isFuture || withoutSuffix ? ' nap' : ' napja');
        case 'M':
            return 'egy' + (isFuture || withoutSuffix ? ' hónap' : ' hónapja');
        case 'MM':
            return num + (isFuture || withoutSuffix ? ' hónap' : ' hónapja');
        case 'y':
            return 'egy' + (isFuture || withoutSuffix ? ' év' : ' éve');
        case 'yy':
            return num + (isFuture || withoutSuffix ? ' év' : ' éve');
    }
    return '';
}
function week(isFuture) {
    return (isFuture ? '' : '[múlt] ') + '[' + weekEndings[this.day()] + '] LT[-kor]';
}

var hu = moment.defineLocale('hu', {
    months : 'január_február_március_április_május_június_július_augusztus_szeptember_október_november_december'.split('_'),
    monthsShort : 'jan_feb_márc_ápr_máj_jún_júl_aug_szept_okt_nov_dec'.split('_'),
    weekdays : 'vasárnap_hétfő_kedd_szerda_csütörtök_péntek_szombat'.split('_'),
    weekdaysShort : 'vas_hét_kedd_sze_csüt_pén_szo'.split('_'),
    weekdaysMin : 'v_h_k_sze_cs_p_szo'.split('_'),
    longDateFormat : {
        LT : 'H:mm',
        LTS : 'H:mm:ss',
        L : 'YYYY.MM.DD.',
        LL : 'YYYY. MMMM D.',
        LLL : 'YYYY. MMMM D. H:mm',
        LLLL : 'YYYY. MMMM D., dddd H:mm'
    },
    meridiemParse: /de|du/i,
    isPM: function (input) {
        return input.charAt(1).toLowerCase() === 'u';
    },
    meridiem : function (hours, minutes, isLower) {
        if (hours < 12) {
            return isLower === true ? 'de' : 'DE';
        } else {
            return isLower === true ? 'du' : 'DU';
        }
    },
    calendar : {
        sameDay : '[ma] LT[-kor]',
        nextDay : '[holnap] LT[-kor]',
        nextWeek : function () {
            return week.call(this, true);
        },
        lastDay : '[tegnap] LT[-kor]',
        lastWeek : function () {
            return week.call(this, false);
        },
        sameElse : 'L'
    },
    relativeTime : {
        future : '%s múlva',
        past : '%s',
        s : translate,
        m : translate,
        mm : translate,
        h : translate,
        hh : translate,
        d : translate,
        dd : translate,
        M : translate,
        MM : translate,
        y : translate,
        yy : translate
    },
    dayOfMonthOrdinalParse: /\d{1,2}\./,
    ordinal : '%d.',
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 4  // The week that contains Jan 4th is the first week of the year.
    }
});

return hu;

})));


/***/ }),
/* 145 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Armenian [hy-am]
//! author : Armendarabyan : https://github.com/armendarabyan

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var hyAm = moment.defineLocale('hy-am', {
    months : {
        format: 'հունվարի_փետրվարի_մարտի_ապրիլի_մայիսի_հունիսի_հուլիսի_օգոստոսի_սեպտեմբերի_հոկտեմբերի_նոյեմբերի_դեկտեմբերի'.split('_'),
        standalone: 'հունվար_փետրվար_մարտ_ապրիլ_մայիս_հունիս_հուլիս_օգոստոս_սեպտեմբեր_հոկտեմբեր_նոյեմբեր_դեկտեմբեր'.split('_')
    },
    monthsShort : 'հնվ_փտր_մրտ_ապր_մյս_հնս_հլս_օգս_սպտ_հկտ_նմբ_դկտ'.split('_'),
    weekdays : 'կիրակի_երկուշաբթի_երեքշաբթի_չորեքշաբթի_հինգշաբթի_ուրբաթ_շաբաթ'.split('_'),
    weekdaysShort : 'կրկ_երկ_երք_չրք_հնգ_ուրբ_շբթ'.split('_'),
    weekdaysMin : 'կրկ_երկ_երք_չրք_հնգ_ուրբ_շբթ'.split('_'),
    longDateFormat : {
        LT : 'HH:mm',
        LTS : 'HH:mm:ss',
        L : 'DD.MM.YYYY',
        LL : 'D MMMM YYYY թ.',
        LLL : 'D MMMM YYYY թ., HH:mm',
        LLLL : 'dddd, D MMMM YYYY թ., HH:mm'
    },
    calendar : {
        sameDay: '[այսօր] LT',
        nextDay: '[վաղը] LT',
        lastDay: '[երեկ] LT',
        nextWeek: function () {
            return 'dddd [օրը ժամը] LT';
        },
        lastWeek: function () {
            return '[անցած] dddd [օրը ժամը] LT';
        },
        sameElse: 'L'
    },
    relativeTime : {
        future : '%s հետո',
        past : '%s առաջ',
        s : 'մի քանի վայրկյան',
        m : 'րոպե',
        mm : '%d րոպե',
        h : 'ժամ',
        hh : '%d ժամ',
        d : 'օր',
        dd : '%d օր',
        M : 'ամիս',
        MM : '%d ամիս',
        y : 'տարի',
        yy : '%d տարի'
    },
    meridiemParse: /գիշերվա|առավոտվա|ցերեկվա|երեկոյան/,
    isPM: function (input) {
        return /^(ցերեկվա|երեկոյան)$/.test(input);
    },
    meridiem : function (hour) {
        if (hour < 4) {
            return 'գիշերվա';
        } else if (hour < 12) {
            return 'առավոտվա';
        } else if (hour < 17) {
            return 'ցերեկվա';
        } else {
            return 'երեկոյան';
        }
    },
    dayOfMonthOrdinalParse: /\d{1,2}|\d{1,2}-(ին|րդ)/,
    ordinal: function (number, period) {
        switch (period) {
            case 'DDD':
            case 'w':
            case 'W':
            case 'DDDo':
                if (number === 1) {
                    return number + '-ին';
                }
                return number + '-րդ';
            default:
                return number;
        }
    },
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 7  // The week that contains Jan 1st is the first week of the year.
    }
});

return hyAm;

})));


/***/ }),
/* 146 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Indonesian [id]
//! author : Mohammad Satrio Utomo : https://github.com/tyok
//! reference: http://id.wikisource.org/wiki/Pedoman_Umum_Ejaan_Bahasa_Indonesia_yang_Disempurnakan

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var id = moment.defineLocale('id', {
    months : 'Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember'.split('_'),
    monthsShort : 'Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nov_Des'.split('_'),
    weekdays : 'Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu'.split('_'),
    weekdaysShort : 'Min_Sen_Sel_Rab_Kam_Jum_Sab'.split('_'),
    weekdaysMin : 'Mg_Sn_Sl_Rb_Km_Jm_Sb'.split('_'),
    longDateFormat : {
        LT : 'HH.mm',
        LTS : 'HH.mm.ss',
        L : 'DD/MM/YYYY',
        LL : 'D MMMM YYYY',
        LLL : 'D MMMM YYYY [pukul] HH.mm',
        LLLL : 'dddd, D MMMM YYYY [pukul] HH.mm'
    },
    meridiemParse: /pagi|siang|sore|malam/,
    meridiemHour : function (hour, meridiem) {
        if (hour === 12) {
            hour = 0;
        }
        if (meridiem === 'pagi') {
            return hour;
        } else if (meridiem === 'siang') {
            return hour >= 11 ? hour : hour + 12;
        } else if (meridiem === 'sore' || meridiem === 'malam') {
            return hour + 12;
        }
    },
    meridiem : function (hours, minutes, isLower) {
        if (hours < 11) {
            return 'pagi';
        } else if (hours < 15) {
            return 'siang';
        } else if (hours < 19) {
            return 'sore';
        } else {
            return 'malam';
        }
    },
    calendar : {
        sameDay : '[Hari ini pukul] LT',
        nextDay : '[Besok pukul] LT',
        nextWeek : 'dddd [pukul] LT',
        lastDay : '[Kemarin pukul] LT',
        lastWeek : 'dddd [lalu pukul] LT',
        sameElse : 'L'
    },
    relativeTime : {
        future : 'dalam %s',
        past : '%s yang lalu',
        s : 'beberapa detik',
        m : 'semenit',
        mm : '%d menit',
        h : 'sejam',
        hh : '%d jam',
        d : 'sehari',
        dd : '%d hari',
        M : 'sebulan',
        MM : '%d bulan',
        y : 'setahun',
        yy : '%d tahun'
    },
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 7  // The week that contains Jan 1st is the first week of the year.
    }
});

return id;

})));


/***/ }),
/* 147 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Icelandic [is]
//! author : Hinrik Örn Sigurðsson : https://github.com/hinrik

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


function plural(n) {
    if (n % 100 === 11) {
        return true;
    } else if (n % 10 === 1) {
        return false;
    }
    return true;
}
function translate(number, withoutSuffix, key, isFuture) {
    var result = number + ' ';
    switch (key) {
        case 's':
            return withoutSuffix || isFuture ? 'nokkrar sekúndur' : 'nokkrum sekúndum';
        case 'm':
            return withoutSuffix ? 'mínúta' : 'mínútu';
        case 'mm':
            if (plural(number)) {
                return result + (withoutSuffix || isFuture ? 'mínútur' : 'mínútum');
            } else if (withoutSuffix) {
                return result + 'mínúta';
            }
            return result + 'mínútu';
        case 'hh':
            if (plural(number)) {
                return result + (withoutSuffix || isFuture ? 'klukkustundir' : 'klukkustundum');
            }
            return result + 'klukkustund';
        case 'd':
            if (withoutSuffix) {
                return 'dagur';
            }
            return isFuture ? 'dag' : 'degi';
        case 'dd':
            if (plural(number)) {
                if (withoutSuffix) {
                    return result + 'dagar';
                }
                return result + (isFuture ? 'daga' : 'dögum');
            } else if (withoutSuffix) {
                return result + 'dagur';
            }
            return result + (isFuture ? 'dag' : 'degi');
        case 'M':
            if (withoutSuffix) {
                return 'mánuður';
            }
            return isFuture ? 'mánuð' : 'mánuði';
        case 'MM':
            if (plural(number)) {
                if (withoutSuffix) {
                    return result + 'mánuðir';
                }
                return result + (isFuture ? 'mánuði' : 'mánuðum');
            } else if (withoutSuffix) {
                return result + 'mánuður';
            }
            return result + (isFuture ? 'mánuð' : 'mánuði');
        case 'y':
            return withoutSuffix || isFuture ? 'ár' : 'ári';
        case 'yy':
            if (plural(number)) {
                return result + (withoutSuffix || isFuture ? 'ár' : 'árum');
            }
            return result + (withoutSuffix || isFuture ? 'ár' : 'ári');
    }
}

var is = moment.defineLocale('is', {
    months : 'janúar_febrúar_mars_apríl_maí_júní_júlí_ágúst_september_október_nóvember_desember'.split('_'),
    monthsShort : 'jan_feb_mar_apr_maí_jún_júl_ágú_sep_okt_nóv_des'.split('_'),
    weekdays : 'sunnudagur_mánudagur_þriðjudagur_miðvikudagur_fimmtudagur_föstudagur_laugardagur'.split('_'),
    weekdaysShort : 'sun_mán_þri_mið_fim_fös_lau'.split('_'),
    weekdaysMin : 'Su_Má_Þr_Mi_Fi_Fö_La'.split('_'),
    longDateFormat : {
        LT : 'H:mm',
        LTS : 'H:mm:ss',
        L : 'DD.MM.YYYY',
        LL : 'D. MMMM YYYY',
        LLL : 'D. MMMM YYYY [kl.] H:mm',
        LLLL : 'dddd, D. MMMM YYYY [kl.] H:mm'
    },
    calendar : {
        sameDay : '[í dag kl.] LT',
        nextDay : '[á morgun kl.] LT',
        nextWeek : 'dddd [kl.] LT',
        lastDay : '[í gær kl.] LT',
        lastWeek : '[síðasta] dddd [kl.] LT',
        sameElse : 'L'
    },
    relativeTime : {
        future : 'eftir %s',
        past : 'fyrir %s síðan',
        s : translate,
        m : translate,
        mm : translate,
        h : 'klukkustund',
        hh : translate,
        d : translate,
        dd : translate,
        M : translate,
        MM : translate,
        y : translate,
        yy : translate
    },
    dayOfMonthOrdinalParse: /\d{1,2}\./,
    ordinal : '%d.',
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 4  // The week that contains Jan 4th is the first week of the year.
    }
});

return is;

})));


/***/ }),
/* 148 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Italian [it]
//! author : Lorenzo : https://github.com/aliem
//! author: Mattia Larentis: https://github.com/nostalgiaz

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var it = moment.defineLocale('it', {
    months : 'gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre'.split('_'),
    monthsShort : 'gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic'.split('_'),
    weekdays : 'domenica_lunedì_martedì_mercoledì_giovedì_venerdì_sabato'.split('_'),
    weekdaysShort : 'dom_lun_mar_mer_gio_ven_sab'.split('_'),
    weekdaysMin : 'do_lu_ma_me_gi_ve_sa'.split('_'),
    longDateFormat : {
        LT : 'HH:mm',
        LTS : 'HH:mm:ss',
        L : 'DD/MM/YYYY',
        LL : 'D MMMM YYYY',
        LLL : 'D MMMM YYYY HH:mm',
        LLLL : 'dddd, D MMMM YYYY HH:mm'
    },
    calendar : {
        sameDay: '[Oggi alle] LT',
        nextDay: '[Domani alle] LT',
        nextWeek: 'dddd [alle] LT',
        lastDay: '[Ieri alle] LT',
        lastWeek: function () {
            switch (this.day()) {
                case 0:
                    return '[la scorsa] dddd [alle] LT';
                default:
                    return '[lo scorso] dddd [alle] LT';
            }
        },
        sameElse: 'L'
    },
    relativeTime : {
        future : function (s) {
            return ((/^[0-9].+$/).test(s) ? 'tra' : 'in') + ' ' + s;
        },
        past : '%s fa',
        s : 'alcuni secondi',
        m : 'un minuto',
        mm : '%d minuti',
        h : 'un\'ora',
        hh : '%d ore',
        d : 'un giorno',
        dd : '%d giorni',
        M : 'un mese',
        MM : '%d mesi',
        y : 'un anno',
        yy : '%d anni'
    },
    dayOfMonthOrdinalParse : /\d{1,2}º/,
    ordinal: '%dº',
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 4  // The week that contains Jan 4th is the first week of the year.
    }
});

return it;

})));


/***/ }),
/* 149 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Japanese [ja]
//! author : LI Long : https://github.com/baryon

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var ja = moment.defineLocale('ja', {
    months : '1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月'.split('_'),
    monthsShort : '1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月'.split('_'),
    weekdays : '日曜日_月曜日_火曜日_水曜日_木曜日_金曜日_土曜日'.split('_'),
    weekdaysShort : '日_月_火_水_木_金_土'.split('_'),
    weekdaysMin : '日_月_火_水_木_金_土'.split('_'),
    longDateFormat : {
        LT : 'HH:mm',
        LTS : 'HH:mm:ss',
        L : 'YYYY/MM/DD',
        LL : 'YYYY年M月D日',
        LLL : 'YYYY年M月D日 HH:mm',
        LLLL : 'YYYY年M月D日 HH:mm dddd',
        l : 'YYYY/MM/DD',
        ll : 'YYYY年M月D日',
        lll : 'YYYY年M月D日 HH:mm',
        llll : 'YYYY年M月D日 HH:mm dddd'
    },
    meridiemParse: /午前|午後/i,
    isPM : function (input) {
        return input === '午後';
    },
    meridiem : function (hour, minute, isLower) {
        if (hour < 12) {
            return '午前';
        } else {
            return '午後';
        }
    },
    calendar : {
        sameDay : '[今日] LT',
        nextDay : '[明日] LT',
        nextWeek : '[来週]dddd LT',
        lastDay : '[昨日] LT',
        lastWeek : '[前週]dddd LT',
        sameElse : 'L'
    },
    dayOfMonthOrdinalParse : /\d{1,2}日/,
    ordinal : function (number, period) {
        switch (period) {
            case 'd':
            case 'D':
            case 'DDD':
                return number + '日';
            default:
                return number;
        }
    },
    relativeTime : {
        future : '%s後',
        past : '%s前',
        s : '数秒',
        m : '1分',
        mm : '%d分',
        h : '1時間',
        hh : '%d時間',
        d : '1日',
        dd : '%d日',
        M : '1ヶ月',
        MM : '%dヶ月',
        y : '1年',
        yy : '%d年'
    }
});

return ja;

})));


/***/ }),
/* 150 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Javanese [jv]
//! author : Rony Lantip : https://github.com/lantip
//! reference: http://jv.wikipedia.org/wiki/Basa_Jawa

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var jv = moment.defineLocale('jv', {
    months : 'Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_Nopember_Desember'.split('_'),
    monthsShort : 'Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nop_Des'.split('_'),
    weekdays : 'Minggu_Senen_Seloso_Rebu_Kemis_Jemuwah_Septu'.split('_'),
    weekdaysShort : 'Min_Sen_Sel_Reb_Kem_Jem_Sep'.split('_'),
    weekdaysMin : 'Mg_Sn_Sl_Rb_Km_Jm_Sp'.split('_'),
    longDateFormat : {
        LT : 'HH.mm',
        LTS : 'HH.mm.ss',
        L : 'DD/MM/YYYY',
        LL : 'D MMMM YYYY',
        LLL : 'D MMMM YYYY [pukul] HH.mm',
        LLLL : 'dddd, D MMMM YYYY [pukul] HH.mm'
    },
    meridiemParse: /enjing|siyang|sonten|ndalu/,
    meridiemHour : function (hour, meridiem) {
        if (hour === 12) {
            hour = 0;
        }
        if (meridiem === 'enjing') {
            return hour;
        } else if (meridiem === 'siyang') {
            return hour >= 11 ? hour : hour + 12;
        } else if (meridiem === 'sonten' || meridiem === 'ndalu') {
            return hour + 12;
        }
    },
    meridiem : function (hours, minutes, isLower) {
        if (hours < 11) {
            return 'enjing';
        } else if (hours < 15) {
            return 'siyang';
        } else if (hours < 19) {
            return 'sonten';
        } else {
            return 'ndalu';
        }
    },
    calendar : {
        sameDay : '[Dinten puniko pukul] LT',
        nextDay : '[Mbenjang pukul] LT',
        nextWeek : 'dddd [pukul] LT',
        lastDay : '[Kala wingi pukul] LT',
        lastWeek : 'dddd [kepengker pukul] LT',
        sameElse : 'L'
    },
    relativeTime : {
        future : 'wonten ing %s',
        past : '%s ingkang kepengker',
        s : 'sawetawis detik',
        m : 'setunggal menit',
        mm : '%d menit',
        h : 'setunggal jam',
        hh : '%d jam',
        d : 'sedinten',
        dd : '%d dinten',
        M : 'sewulan',
        MM : '%d wulan',
        y : 'setaun',
        yy : '%d taun'
    },
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 7  // The week that contains Jan 1st is the first week of the year.
    }
});

return jv;

})));


/***/ }),
/* 151 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Georgian [ka]
//! author : Irakli Janiashvili : https://github.com/irakli-janiashvili

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var ka = moment.defineLocale('ka', {
    months : {
        standalone: 'იანვარი_თებერვალი_მარტი_აპრილი_მაისი_ივნისი_ივლისი_აგვისტო_სექტემბერი_ოქტომბერი_ნოემბერი_დეკემბერი'.split('_'),
        format: 'იანვარს_თებერვალს_მარტს_აპრილის_მაისს_ივნისს_ივლისს_აგვისტს_სექტემბერს_ოქტომბერს_ნოემბერს_დეკემბერს'.split('_')
    },
    monthsShort : 'იან_თებ_მარ_აპრ_მაი_ივნ_ივლ_აგვ_სექ_ოქტ_ნოე_დეკ'.split('_'),
    weekdays : {
        standalone: 'კვირა_ორშაბათი_სამშაბათი_ოთხშაბათი_ხუთშაბათი_პარასკევი_შაბათი'.split('_'),
        format: 'კვირას_ორშაბათს_სამშაბათს_ოთხშაბათს_ხუთშაბათს_პარასკევს_შაბათს'.split('_'),
        isFormat: /(წინა|შემდეგ)/
    },
    weekdaysShort : 'კვი_ორშ_სამ_ოთხ_ხუთ_პარ_შაბ'.split('_'),
    weekdaysMin : 'კვ_ორ_სა_ოთ_ხუ_პა_შა'.split('_'),
    longDateFormat : {
        LT : 'h:mm A',
        LTS : 'h:mm:ss A',
        L : 'DD/MM/YYYY',
        LL : 'D MMMM YYYY',
        LLL : 'D MMMM YYYY h:mm A',
        LLLL : 'dddd, D MMMM YYYY h:mm A'
    },
    calendar : {
        sameDay : '[დღეს] LT[-ზე]',
        nextDay : '[ხვალ] LT[-ზე]',
        lastDay : '[გუშინ] LT[-ზე]',
        nextWeek : '[შემდეგ] dddd LT[-ზე]',
        lastWeek : '[წინა] dddd LT-ზე',
        sameElse : 'L'
    },
    relativeTime : {
        future : function (s) {
            return (/(წამი|წუთი|საათი|წელი)/).test(s) ?
                s.replace(/ი$/, 'ში') :
                s + 'ში';
        },
        past : function (s) {
            if ((/(წამი|წუთი|საათი|დღე|თვე)/).test(s)) {
                return s.replace(/(ი|ე)$/, 'ის უკან');
            }
            if ((/წელი/).test(s)) {
                return s.replace(/წელი$/, 'წლის უკან');
            }
        },
        s : 'რამდენიმე წამი',
        m : 'წუთი',
        mm : '%d წუთი',
        h : 'საათი',
        hh : '%d საათი',
        d : 'დღე',
        dd : '%d დღე',
        M : 'თვე',
        MM : '%d თვე',
        y : 'წელი',
        yy : '%d წელი'
    },
    dayOfMonthOrdinalParse: /0|1-ლი|მე-\d{1,2}|\d{1,2}-ე/,
    ordinal : function (number) {
        if (number === 0) {
            return number;
        }
        if (number === 1) {
            return number + '-ლი';
        }
        if ((number < 20) || (number <= 100 && (number % 20 === 0)) || (number % 100 === 0)) {
            return 'მე-' + number;
        }
        return number + '-ე';
    },
    week : {
        dow : 1,
        doy : 7
    }
});

return ka;

})));


/***/ }),
/* 152 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Kazakh [kk]
//! authors : Nurlan Rakhimzhanov : https://github.com/nurlan

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var suffixes = {
    0: '-ші',
    1: '-ші',
    2: '-ші',
    3: '-ші',
    4: '-ші',
    5: '-ші',
    6: '-шы',
    7: '-ші',
    8: '-ші',
    9: '-шы',
    10: '-шы',
    20: '-шы',
    30: '-шы',
    40: '-шы',
    50: '-ші',
    60: '-шы',
    70: '-ші',
    80: '-ші',
    90: '-шы',
    100: '-ші'
};

var kk = moment.defineLocale('kk', {
    months : 'қаңтар_ақпан_наурыз_сәуір_мамыр_маусым_шілде_тамыз_қыркүйек_қазан_қараша_желтоқсан'.split('_'),
    monthsShort : 'қаң_ақп_нау_сәу_мам_мау_шіл_там_қыр_қаз_қар_жел'.split('_'),
    weekdays : 'жексенбі_дүйсенбі_сейсенбі_сәрсенбі_бейсенбі_жұма_сенбі'.split('_'),
    weekdaysShort : 'жек_дүй_сей_сәр_бей_жұм_сен'.split('_'),
    weekdaysMin : 'жк_дй_сй_ср_бй_жм_сн'.split('_'),
    longDateFormat : {
        LT : 'HH:mm',
        LTS : 'HH:mm:ss',
        L : 'DD.MM.YYYY',
        LL : 'D MMMM YYYY',
        LLL : 'D MMMM YYYY HH:mm',
        LLLL : 'dddd, D MMMM YYYY HH:mm'
    },
    calendar : {
        sameDay : '[Бүгін сағат] LT',
        nextDay : '[Ертең сағат] LT',
        nextWeek : 'dddd [сағат] LT',
        lastDay : '[Кеше сағат] LT',
        lastWeek : '[Өткен аптаның] dddd [сағат] LT',
        sameElse : 'L'
    },
    relativeTime : {
        future : '%s ішінде',
        past : '%s бұрын',
        s : 'бірнеше секунд',
        m : 'бір минут',
        mm : '%d минут',
        h : 'бір сағат',
        hh : '%d сағат',
        d : 'бір күн',
        dd : '%d күн',
        M : 'бір ай',
        MM : '%d ай',
        y : 'бір жыл',
        yy : '%d жыл'
    },
    dayOfMonthOrdinalParse: /\d{1,2}-(ші|шы)/,
    ordinal : function (number) {
        var a = number % 10,
            b = number >= 100 ? 100 : null;
        return number + (suffixes[number] || suffixes[a] || suffixes[b]);
    },
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 7  // The week that contains Jan 1st is the first week of the year.
    }
});

return kk;

})));


/***/ }),
/* 153 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Cambodian [km]
//! author : Kruy Vanna : https://github.com/kruyvanna

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var km = moment.defineLocale('km', {
    months: 'មករា_កុម្ភៈ_មីនា_មេសា_ឧសភា_មិថុនា_កក្កដា_សីហា_កញ្ញា_តុលា_វិច្ឆិកា_ធ្នូ'.split('_'),
    monthsShort: 'មករា_កុម្ភៈ_មីនា_មេសា_ឧសភា_មិថុនា_កក្កដា_សីហា_កញ្ញា_តុលា_វិច្ឆិកា_ធ្នូ'.split('_'),
    weekdays: 'អាទិត្យ_ច័ន្ទ_អង្គារ_ពុធ_ព្រហស្បតិ៍_សុក្រ_សៅរ៍'.split('_'),
    weekdaysShort: 'អាទិត្យ_ច័ន្ទ_អង្គារ_ពុធ_ព្រហស្បតិ៍_សុក្រ_សៅរ៍'.split('_'),
    weekdaysMin: 'អាទិត្យ_ច័ន្ទ_អង្គារ_ពុធ_ព្រហស្បតិ៍_សុក្រ_សៅរ៍'.split('_'),
    longDateFormat: {
        LT: 'HH:mm',
        LTS : 'HH:mm:ss',
        L: 'DD/MM/YYYY',
        LL: 'D MMMM YYYY',
        LLL: 'D MMMM YYYY HH:mm',
        LLLL: 'dddd, D MMMM YYYY HH:mm'
    },
    calendar: {
        sameDay: '[ថ្ងៃនេះ ម៉ោង] LT',
        nextDay: '[ស្អែក ម៉ោង] LT',
        nextWeek: 'dddd [ម៉ោង] LT',
        lastDay: '[ម្សិលមិញ ម៉ោង] LT',
        lastWeek: 'dddd [សប្តាហ៍មុន] [ម៉ោង] LT',
        sameElse: 'L'
    },
    relativeTime: {
        future: '%sទៀត',
        past: '%sមុន',
        s: 'ប៉ុន្មានវិនាទី',
        m: 'មួយនាទី',
        mm: '%d នាទី',
        h: 'មួយម៉ោង',
        hh: '%d ម៉ោង',
        d: 'មួយថ្ងៃ',
        dd: '%d ថ្ងៃ',
        M: 'មួយខែ',
        MM: '%d ខែ',
        y: 'មួយឆ្នាំ',
        yy: '%d ឆ្នាំ'
    },
    week: {
        dow: 1, // Monday is the first day of the week.
        doy: 4 // The week that contains Jan 4th is the first week of the year.
    }
});

return km;

})));


/***/ }),
/* 154 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Kannada [kn]
//! author : Rajeev Naik : https://github.com/rajeevnaikte

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var symbolMap = {
    '1': '೧',
    '2': '೨',
    '3': '೩',
    '4': '೪',
    '5': '೫',
    '6': '೬',
    '7': '೭',
    '8': '೮',
    '9': '೯',
    '0': '೦'
};
var numberMap = {
    '೧': '1',
    '೨': '2',
    '೩': '3',
    '೪': '4',
    '೫': '5',
    '೬': '6',
    '೭': '7',
    '೮': '8',
    '೯': '9',
    '೦': '0'
};

var kn = moment.defineLocale('kn', {
    months : 'ಜನವರಿ_ಫೆಬ್ರವರಿ_ಮಾರ್ಚ್_ಏಪ್ರಿಲ್_ಮೇ_ಜೂನ್_ಜುಲೈ_ಆಗಸ್ಟ್_ಸೆಪ್ಟೆಂಬರ್_ಅಕ್ಟೋಬರ್_ನವೆಂಬರ್_ಡಿಸೆಂಬರ್'.split('_'),
    monthsShort : 'ಜನ_ಫೆಬ್ರ_ಮಾರ್ಚ್_ಏಪ್ರಿಲ್_ಮೇ_ಜೂನ್_ಜುಲೈ_ಆಗಸ್ಟ್_ಸೆಪ್ಟೆಂಬ_ಅಕ್ಟೋಬ_ನವೆಂಬ_ಡಿಸೆಂಬ'.split('_'),
    monthsParseExact: true,
    weekdays : 'ಭಾನುವಾರ_ಸೋಮವಾರ_ಮಂಗಳವಾರ_ಬುಧವಾರ_ಗುರುವಾರ_ಶುಕ್ರವಾರ_ಶನಿವಾರ'.split('_'),
    weekdaysShort : 'ಭಾನು_ಸೋಮ_ಮಂಗಳ_ಬುಧ_ಗುರು_ಶುಕ್ರ_ಶನಿ'.split('_'),
    weekdaysMin : 'ಭಾ_ಸೋ_ಮಂ_ಬು_ಗು_ಶು_ಶ'.split('_'),
    longDateFormat : {
        LT : 'A h:mm',
        LTS : 'A h:mm:ss',
        L : 'DD/MM/YYYY',
        LL : 'D MMMM YYYY',
        LLL : 'D MMMM YYYY, A h:mm',
        LLLL : 'dddd, D MMMM YYYY, A h:mm'
    },
    calendar : {
        sameDay : '[ಇಂದು] LT',
        nextDay : '[ನಾಳೆ] LT',
        nextWeek : 'dddd, LT',
        lastDay : '[ನಿನ್ನೆ] LT',
        lastWeek : '[ಕೊನೆಯ] dddd, LT',
        sameElse : 'L'
    },
    relativeTime : {
        future : '%s ನಂತರ',
        past : '%s ಹಿಂದೆ',
        s : 'ಕೆಲವು ಕ್ಷಣಗಳು',
        m : 'ಒಂದು ನಿಮಿಷ',
        mm : '%d ನಿಮಿಷ',
        h : 'ಒಂದು ಗಂಟೆ',
        hh : '%d ಗಂಟೆ',
        d : 'ಒಂದು ದಿನ',
        dd : '%d ದಿನ',
        M : 'ಒಂದು ತಿಂಗಳು',
        MM : '%d ತಿಂಗಳು',
        y : 'ಒಂದು ವರ್ಷ',
        yy : '%d ವರ್ಷ'
    },
    preparse: function (string) {
        return string.replace(/[೧೨೩೪೫೬೭೮೯೦]/g, function (match) {
            return numberMap[match];
        });
    },
    postformat: function (string) {
        return string.replace(/\d/g, function (match) {
            return symbolMap[match];
        });
    },
    meridiemParse: /ರಾತ್ರಿ|ಬೆಳಿಗ್ಗೆ|ಮಧ್ಯಾಹ್ನ|ಸಂಜೆ/,
    meridiemHour : function (hour, meridiem) {
        if (hour === 12) {
            hour = 0;
        }
        if (meridiem === 'ರಾತ್ರಿ') {
            return hour < 4 ? hour : hour + 12;
        } else if (meridiem === 'ಬೆಳಿಗ್ಗೆ') {
            return hour;
        } else if (meridiem === 'ಮಧ್ಯಾಹ್ನ') {
            return hour >= 10 ? hour : hour + 12;
        } else if (meridiem === 'ಸಂಜೆ') {
            return hour + 12;
        }
    },
    meridiem : function (hour, minute, isLower) {
        if (hour < 4) {
            return 'ರಾತ್ರಿ';
        } else if (hour < 10) {
            return 'ಬೆಳಿಗ್ಗೆ';
        } else if (hour < 17) {
            return 'ಮಧ್ಯಾಹ್ನ';
        } else if (hour < 20) {
            return 'ಸಂಜೆ';
        } else {
            return 'ರಾತ್ರಿ';
        }
    },
    dayOfMonthOrdinalParse: /\d{1,2}(ನೇ)/,
    ordinal : function (number) {
        return number + 'ನೇ';
    },
    week : {
        dow : 0, // Sunday is the first day of the week.
        doy : 6  // The week that contains Jan 1st is the first week of the year.
    }
});

return kn;

})));


/***/ }),
/* 155 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Korean [ko]
//! author : Kyungwook, Park : https://github.com/kyungw00k
//! author : Jeeeyul Lee <jeeeyul@gmail.com>

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var ko = moment.defineLocale('ko', {
    months : '1월_2월_3월_4월_5월_6월_7월_8월_9월_10월_11월_12월'.split('_'),
    monthsShort : '1월_2월_3월_4월_5월_6월_7월_8월_9월_10월_11월_12월'.split('_'),
    weekdays : '일요일_월요일_화요일_수요일_목요일_금요일_토요일'.split('_'),
    weekdaysShort : '일_월_화_수_목_금_토'.split('_'),
    weekdaysMin : '일_월_화_수_목_금_토'.split('_'),
    longDateFormat : {
        LT : 'A h:mm',
        LTS : 'A h:mm:ss',
        L : 'YYYY.MM.DD',
        LL : 'YYYY년 MMMM D일',
        LLL : 'YYYY년 MMMM D일 A h:mm',
        LLLL : 'YYYY년 MMMM D일 dddd A h:mm',
        l : 'YYYY.MM.DD',
        ll : 'YYYY년 MMMM D일',
        lll : 'YYYY년 MMMM D일 A h:mm',
        llll : 'YYYY년 MMMM D일 dddd A h:mm'
    },
    calendar : {
        sameDay : '오늘 LT',
        nextDay : '내일 LT',
        nextWeek : 'dddd LT',
        lastDay : '어제 LT',
        lastWeek : '지난주 dddd LT',
        sameElse : 'L'
    },
    relativeTime : {
        future : '%s 후',
        past : '%s 전',
        s : '몇 초',
        ss : '%d초',
        m : '1분',
        mm : '%d분',
        h : '한 시간',
        hh : '%d시간',
        d : '하루',
        dd : '%d일',
        M : '한 달',
        MM : '%d달',
        y : '일 년',
        yy : '%d년'
    },
    dayOfMonthOrdinalParse : /\d{1,2}(일|월|주)/,
    ordinal : function (number, period) {
        switch (period) {
            case 'd':
            case 'D':
            case 'DDD':
                return number + '일';
            case 'M':
                return number + '월';
            case 'w':
            case 'W':
                return number + '주';
            default:
                return number;
        }
    },
    meridiemParse : /오전|오후/,
    isPM : function (token) {
        return token === '오후';
    },
    meridiem : function (hour, minute, isUpper) {
        return hour < 12 ? '오전' : '오후';
    }
});

return ko;

})));


/***/ }),
/* 156 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Kyrgyz [ky]
//! author : Chyngyz Arystan uulu : https://github.com/chyngyz

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';



var suffixes = {
    0: '-чү',
    1: '-чи',
    2: '-чи',
    3: '-чү',
    4: '-чү',
    5: '-чи',
    6: '-чы',
    7: '-чи',
    8: '-чи',
    9: '-чу',
    10: '-чу',
    20: '-чы',
    30: '-чу',
    40: '-чы',
    50: '-чү',
    60: '-чы',
    70: '-чи',
    80: '-чи',
    90: '-чу',
    100: '-чү'
};

var ky = moment.defineLocale('ky', {
    months : 'январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь'.split('_'),
    monthsShort : 'янв_фев_март_апр_май_июнь_июль_авг_сен_окт_ноя_дек'.split('_'),
    weekdays : 'Жекшемби_Дүйшөмбү_Шейшемби_Шаршемби_Бейшемби_Жума_Ишемби'.split('_'),
    weekdaysShort : 'Жек_Дүй_Шей_Шар_Бей_Жум_Ише'.split('_'),
    weekdaysMin : 'Жк_Дй_Шй_Шр_Бй_Жм_Иш'.split('_'),
    longDateFormat : {
        LT : 'HH:mm',
        LTS : 'HH:mm:ss',
        L : 'DD.MM.YYYY',
        LL : 'D MMMM YYYY',
        LLL : 'D MMMM YYYY HH:mm',
        LLLL : 'dddd, D MMMM YYYY HH:mm'
    },
    calendar : {
        sameDay : '[Бүгүн саат] LT',
        nextDay : '[Эртең саат] LT',
        nextWeek : 'dddd [саат] LT',
        lastDay : '[Кече саат] LT',
        lastWeek : '[Өткен аптанын] dddd [күнү] [саат] LT',
        sameElse : 'L'
    },
    relativeTime : {
        future : '%s ичинде',
        past : '%s мурун',
        s : 'бирнече секунд',
        m : 'бир мүнөт',
        mm : '%d мүнөт',
        h : 'бир саат',
        hh : '%d саат',
        d : 'бир күн',
        dd : '%d күн',
        M : 'бир ай',
        MM : '%d ай',
        y : 'бир жыл',
        yy : '%d жыл'
    },
    dayOfMonthOrdinalParse: /\d{1,2}-(чи|чы|чү|чу)/,
    ordinal : function (number) {
        var a = number % 10,
            b = number >= 100 ? 100 : null;
        return number + (suffixes[number] || suffixes[a] || suffixes[b]);
    },
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 7  // The week that contains Jan 1st is the first week of the year.
    }
});

return ky;

})));


/***/ }),
/* 157 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Luxembourgish [lb]
//! author : mweimerskirch : https://github.com/mweimerskirch
//! author : David Raison : https://github.com/kwisatz

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


function processRelativeTime(number, withoutSuffix, key, isFuture) {
    var format = {
        'm': ['eng Minutt', 'enger Minutt'],
        'h': ['eng Stonn', 'enger Stonn'],
        'd': ['een Dag', 'engem Dag'],
        'M': ['ee Mount', 'engem Mount'],
        'y': ['ee Joer', 'engem Joer']
    };
    return withoutSuffix ? format[key][0] : format[key][1];
}
function processFutureTime(string) {
    var number = string.substr(0, string.indexOf(' '));
    if (eifelerRegelAppliesToNumber(number)) {
        return 'a ' + string;
    }
    return 'an ' + string;
}
function processPastTime(string) {
    var number = string.substr(0, string.indexOf(' '));
    if (eifelerRegelAppliesToNumber(number)) {
        return 'viru ' + string;
    }
    return 'virun ' + string;
}
/**
 * Returns true if the word before the given number loses the '-n' ending.
 * e.g. 'an 10 Deeg' but 'a 5 Deeg'
 *
 * @param number {integer}
 * @returns {boolean}
 */
function eifelerRegelAppliesToNumber(number) {
    number = parseInt(number, 10);
    if (isNaN(number)) {
        return false;
    }
    if (number < 0) {
        // Negative Number --> always true
        return true;
    } else if (number < 10) {
        // Only 1 digit
        if (4 <= number && number <= 7) {
            return true;
        }
        return false;
    } else if (number < 100) {
        // 2 digits
        var lastDigit = number % 10, firstDigit = number / 10;
        if (lastDigit === 0) {
            return eifelerRegelAppliesToNumber(firstDigit);
        }
        return eifelerRegelAppliesToNumber(lastDigit);
    } else if (number < 10000) {
        // 3 or 4 digits --> recursively check first digit
        while (number >= 10) {
            number = number / 10;
        }
        return eifelerRegelAppliesToNumber(number);
    } else {
        // Anything larger than 4 digits: recursively check first n-3 digits
        number = number / 1000;
        return eifelerRegelAppliesToNumber(number);
    }
}

var lb = moment.defineLocale('lb', {
    months: 'Januar_Februar_Mäerz_Abrëll_Mee_Juni_Juli_August_September_Oktober_November_Dezember'.split('_'),
    monthsShort: 'Jan._Febr._Mrz._Abr._Mee_Jun._Jul._Aug._Sept._Okt._Nov._Dez.'.split('_'),
    monthsParseExact : true,
    weekdays: 'Sonndeg_Méindeg_Dënschdeg_Mëttwoch_Donneschdeg_Freideg_Samschdeg'.split('_'),
    weekdaysShort: 'So._Mé._Dë._Më._Do._Fr._Sa.'.split('_'),
    weekdaysMin: 'So_Mé_Dë_Më_Do_Fr_Sa'.split('_'),
    weekdaysParseExact : true,
    longDateFormat: {
        LT: 'H:mm [Auer]',
        LTS: 'H:mm:ss [Auer]',
        L: 'DD.MM.YYYY',
        LL: 'D. MMMM YYYY',
        LLL: 'D. MMMM YYYY H:mm [Auer]',
        LLLL: 'dddd, D. MMMM YYYY H:mm [Auer]'
    },
    calendar: {
        sameDay: '[Haut um] LT',
        sameElse: 'L',
        nextDay: '[Muer um] LT',
        nextWeek: 'dddd [um] LT',
        lastDay: '[Gëschter um] LT',
        lastWeek: function () {
            // Different date string for 'Dënschdeg' (Tuesday) and 'Donneschdeg' (Thursday) due to phonological rule
            switch (this.day()) {
                case 2:
                case 4:
                    return '[Leschten] dddd [um] LT';
                default:
                    return '[Leschte] dddd [um] LT';
            }
        }
    },
    relativeTime : {
        future : processFutureTime,
        past : processPastTime,
        s : 'e puer Sekonnen',
        m : processRelativeTime,
        mm : '%d Minutten',
        h : processRelativeTime,
        hh : '%d Stonnen',
        d : processRelativeTime,
        dd : '%d Deeg',
        M : processRelativeTime,
        MM : '%d Méint',
        y : processRelativeTime,
        yy : '%d Joer'
    },
    dayOfMonthOrdinalParse: /\d{1,2}\./,
    ordinal: '%d.',
    week: {
        dow: 1, // Monday is the first day of the week.
        doy: 4  // The week that contains Jan 4th is the first week of the year.
    }
});

return lb;

})));


/***/ }),
/* 158 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Lao [lo]
//! author : Ryan Hart : https://github.com/ryanhart2

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var lo = moment.defineLocale('lo', {
    months : 'ມັງກອນ_ກຸມພາ_ມີນາ_ເມສາ_ພຶດສະພາ_ມິຖຸນາ_ກໍລະກົດ_ສິງຫາ_ກັນຍາ_ຕຸລາ_ພະຈິກ_ທັນວາ'.split('_'),
    monthsShort : 'ມັງກອນ_ກຸມພາ_ມີນາ_ເມສາ_ພຶດສະພາ_ມິຖຸນາ_ກໍລະກົດ_ສິງຫາ_ກັນຍາ_ຕຸລາ_ພະຈິກ_ທັນວາ'.split('_'),
    weekdays : 'ອາທິດ_ຈັນ_ອັງຄານ_ພຸດ_ພະຫັດ_ສຸກ_ເສົາ'.split('_'),
    weekdaysShort : 'ທິດ_ຈັນ_ອັງຄານ_ພຸດ_ພະຫັດ_ສຸກ_ເສົາ'.split('_'),
    weekdaysMin : 'ທ_ຈ_ອຄ_ພ_ພຫ_ສກ_ສ'.split('_'),
    weekdaysParseExact : true,
    longDateFormat : {
        LT : 'HH:mm',
        LTS : 'HH:mm:ss',
        L : 'DD/MM/YYYY',
        LL : 'D MMMM YYYY',
        LLL : 'D MMMM YYYY HH:mm',
        LLLL : 'ວັນdddd D MMMM YYYY HH:mm'
    },
    meridiemParse: /ຕອນເຊົ້າ|ຕອນແລງ/,
    isPM: function (input) {
        return input === 'ຕອນແລງ';
    },
    meridiem : function (hour, minute, isLower) {
        if (hour < 12) {
            return 'ຕອນເຊົ້າ';
        } else {
            return 'ຕອນແລງ';
        }
    },
    calendar : {
        sameDay : '[ມື້ນີ້ເວລາ] LT',
        nextDay : '[ມື້ອື່ນເວລາ] LT',
        nextWeek : '[ວັນ]dddd[ໜ້າເວລາ] LT',
        lastDay : '[ມື້ວານນີ້ເວລາ] LT',
        lastWeek : '[ວັນ]dddd[ແລ້ວນີ້ເວລາ] LT',
        sameElse : 'L'
    },
    relativeTime : {
        future : 'ອີກ %s',
        past : '%sຜ່ານມາ',
        s : 'ບໍ່ເທົ່າໃດວິນາທີ',
        m : '1 ນາທີ',
        mm : '%d ນາທີ',
        h : '1 ຊົ່ວໂມງ',
        hh : '%d ຊົ່ວໂມງ',
        d : '1 ມື້',
        dd : '%d ມື້',
        M : '1 ເດືອນ',
        MM : '%d ເດືອນ',
        y : '1 ປີ',
        yy : '%d ປີ'
    },
    dayOfMonthOrdinalParse: /(ທີ່)\d{1,2}/,
    ordinal : function (number) {
        return 'ທີ່' + number;
    }
});

return lo;

})));


/***/ }),
/* 159 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Lithuanian [lt]
//! author : Mindaugas Mozūras : https://github.com/mmozuras

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var units = {
    'm' : 'minutė_minutės_minutę',
    'mm': 'minutės_minučių_minutes',
    'h' : 'valanda_valandos_valandą',
    'hh': 'valandos_valandų_valandas',
    'd' : 'diena_dienos_dieną',
    'dd': 'dienos_dienų_dienas',
    'M' : 'mėnuo_mėnesio_mėnesį',
    'MM': 'mėnesiai_mėnesių_mėnesius',
    'y' : 'metai_metų_metus',
    'yy': 'metai_metų_metus'
};
function translateSeconds(number, withoutSuffix, key, isFuture) {
    if (withoutSuffix) {
        return 'kelios sekundės';
    } else {
        return isFuture ? 'kelių sekundžių' : 'kelias sekundes';
    }
}
function translateSingular(number, withoutSuffix, key, isFuture) {
    return withoutSuffix ? forms(key)[0] : (isFuture ? forms(key)[1] : forms(key)[2]);
}
function special(number) {
    return number % 10 === 0 || (number > 10 && number < 20);
}
function forms(key) {
    return units[key].split('_');
}
function translate(number, withoutSuffix, key, isFuture) {
    var result = number + ' ';
    if (number === 1) {
        return result + translateSingular(number, withoutSuffix, key[0], isFuture);
    } else if (withoutSuffix) {
        return result + (special(number) ? forms(key)[1] : forms(key)[0]);
    } else {
        if (isFuture) {
            return result + forms(key)[1];
        } else {
            return result + (special(number) ? forms(key)[1] : forms(key)[2]);
        }
    }
}
var lt = moment.defineLocale('lt', {
    months : {
        format: 'sausio_vasario_kovo_balandžio_gegužės_birželio_liepos_rugpjūčio_rugsėjo_spalio_lapkričio_gruodžio'.split('_'),
        standalone: 'sausis_vasaris_kovas_balandis_gegužė_birželis_liepa_rugpjūtis_rugsėjis_spalis_lapkritis_gruodis'.split('_'),
        isFormat: /D[oD]?(\[[^\[\]]*\]|\s)+MMMM?|MMMM?(\[[^\[\]]*\]|\s)+D[oD]?/
    },
    monthsShort : 'sau_vas_kov_bal_geg_bir_lie_rgp_rgs_spa_lap_grd'.split('_'),
    weekdays : {
        format: 'sekmadienį_pirmadienį_antradienį_trečiadienį_ketvirtadienį_penktadienį_šeštadienį'.split('_'),
        standalone: 'sekmadienis_pirmadienis_antradienis_trečiadienis_ketvirtadienis_penktadienis_šeštadienis'.split('_'),
        isFormat: /dddd HH:mm/
    },
    weekdaysShort : 'Sek_Pir_Ant_Tre_Ket_Pen_Šeš'.split('_'),
    weekdaysMin : 'S_P_A_T_K_Pn_Š'.split('_'),
    weekdaysParseExact : true,
    longDateFormat : {
        LT : 'HH:mm',
        LTS : 'HH:mm:ss',
        L : 'YYYY-MM-DD',
        LL : 'YYYY [m.] MMMM D [d.]',
        LLL : 'YYYY [m.] MMMM D [d.], HH:mm [val.]',
        LLLL : 'YYYY [m.] MMMM D [d.], dddd, HH:mm [val.]',
        l : 'YYYY-MM-DD',
        ll : 'YYYY [m.] MMMM D [d.]',
        lll : 'YYYY [m.] MMMM D [d.], HH:mm [val.]',
        llll : 'YYYY [m.] MMMM D [d.], ddd, HH:mm [val.]'
    },
    calendar : {
        sameDay : '[Šiandien] LT',
        nextDay : '[Rytoj] LT',
        nextWeek : 'dddd LT',
        lastDay : '[Vakar] LT',
        lastWeek : '[Praėjusį] dddd LT',
        sameElse : 'L'
    },
    relativeTime : {
        future : 'po %s',
        past : 'prieš %s',
        s : translateSeconds,
        m : translateSingular,
        mm : translate,
        h : translateSingular,
        hh : translate,
        d : translateSingular,
        dd : translate,
        M : translateSingular,
        MM : translate,
        y : translateSingular,
        yy : translate
    },
    dayOfMonthOrdinalParse: /\d{1,2}-oji/,
    ordinal : function (number) {
        return number + '-oji';
    },
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 4  // The week that contains Jan 4th is the first week of the year.
    }
});

return lt;

})));


/***/ }),
/* 160 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Latvian [lv]
//! author : Kristaps Karlsons : https://github.com/skakri
//! author : Jānis Elmeris : https://github.com/JanisE

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var units = {
    'm': 'minūtes_minūtēm_minūte_minūtes'.split('_'),
    'mm': 'minūtes_minūtēm_minūte_minūtes'.split('_'),
    'h': 'stundas_stundām_stunda_stundas'.split('_'),
    'hh': 'stundas_stundām_stunda_stundas'.split('_'),
    'd': 'dienas_dienām_diena_dienas'.split('_'),
    'dd': 'dienas_dienām_diena_dienas'.split('_'),
    'M': 'mēneša_mēnešiem_mēnesis_mēneši'.split('_'),
    'MM': 'mēneša_mēnešiem_mēnesis_mēneši'.split('_'),
    'y': 'gada_gadiem_gads_gadi'.split('_'),
    'yy': 'gada_gadiem_gads_gadi'.split('_')
};
/**
 * @param withoutSuffix boolean true = a length of time; false = before/after a period of time.
 */
function format(forms, number, withoutSuffix) {
    if (withoutSuffix) {
        // E.g. "21 minūte", "3 minūtes".
        return number % 10 === 1 && number % 100 !== 11 ? forms[2] : forms[3];
    } else {
        // E.g. "21 minūtes" as in "pēc 21 minūtes".
        // E.g. "3 minūtēm" as in "pēc 3 minūtēm".
        return number % 10 === 1 && number % 100 !== 11 ? forms[0] : forms[1];
    }
}
function relativeTimeWithPlural(number, withoutSuffix, key) {
    return number + ' ' + format(units[key], number, withoutSuffix);
}
function relativeTimeWithSingular(number, withoutSuffix, key) {
    return format(units[key], number, withoutSuffix);
}
function relativeSeconds(number, withoutSuffix) {
    return withoutSuffix ? 'dažas sekundes' : 'dažām sekundēm';
}

var lv = moment.defineLocale('lv', {
    months : 'janvāris_februāris_marts_aprīlis_maijs_jūnijs_jūlijs_augusts_septembris_oktobris_novembris_decembris'.split('_'),
    monthsShort : 'jan_feb_mar_apr_mai_jūn_jūl_aug_sep_okt_nov_dec'.split('_'),
    weekdays : 'svētdiena_pirmdiena_otrdiena_trešdiena_ceturtdiena_piektdiena_sestdiena'.split('_'),
    weekdaysShort : 'Sv_P_O_T_C_Pk_S'.split('_'),
    weekdaysMin : 'Sv_P_O_T_C_Pk_S'.split('_'),
    weekdaysParseExact : true,
    longDateFormat : {
        LT : 'HH:mm',
        LTS : 'HH:mm:ss',
        L : 'DD.MM.YYYY.',
        LL : 'YYYY. [gada] D. MMMM',
        LLL : 'YYYY. [gada] D. MMMM, HH:mm',
        LLLL : 'YYYY. [gada] D. MMMM, dddd, HH:mm'
    },
    calendar : {
        sameDay : '[Šodien pulksten] LT',
        nextDay : '[Rīt pulksten] LT',
        nextWeek : 'dddd [pulksten] LT',
        lastDay : '[Vakar pulksten] LT',
        lastWeek : '[Pagājušā] dddd [pulksten] LT',
        sameElse : 'L'
    },
    relativeTime : {
        future : 'pēc %s',
        past : 'pirms %s',
        s : relativeSeconds,
        m : relativeTimeWithSingular,
        mm : relativeTimeWithPlural,
        h : relativeTimeWithSingular,
        hh : relativeTimeWithPlural,
        d : relativeTimeWithSingular,
        dd : relativeTimeWithPlural,
        M : relativeTimeWithSingular,
        MM : relativeTimeWithPlural,
        y : relativeTimeWithSingular,
        yy : relativeTimeWithPlural
    },
    dayOfMonthOrdinalParse: /\d{1,2}\./,
    ordinal : '%d.',
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 4  // The week that contains Jan 4th is the first week of the year.
    }
});

return lv;

})));


/***/ }),
/* 161 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Montenegrin [me]
//! author : Miodrag Nikač <miodrag@restartit.me> : https://github.com/miodragnikac

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var translator = {
    words: { //Different grammatical cases
        m: ['jedan minut', 'jednog minuta'],
        mm: ['minut', 'minuta', 'minuta'],
        h: ['jedan sat', 'jednog sata'],
        hh: ['sat', 'sata', 'sati'],
        dd: ['dan', 'dana', 'dana'],
        MM: ['mjesec', 'mjeseca', 'mjeseci'],
        yy: ['godina', 'godine', 'godina']
    },
    correctGrammaticalCase: function (number, wordKey) {
        return number === 1 ? wordKey[0] : (number >= 2 && number <= 4 ? wordKey[1] : wordKey[2]);
    },
    translate: function (number, withoutSuffix, key) {
        var wordKey = translator.words[key];
        if (key.length === 1) {
            return withoutSuffix ? wordKey[0] : wordKey[1];
        } else {
            return number + ' ' + translator.correctGrammaticalCase(number, wordKey);
        }
    }
};

var me = moment.defineLocale('me', {
    months: 'januar_februar_mart_april_maj_jun_jul_avgust_septembar_oktobar_novembar_decembar'.split('_'),
    monthsShort: 'jan._feb._mar._apr._maj_jun_jul_avg._sep._okt._nov._dec.'.split('_'),
    monthsParseExact : true,
    weekdays: 'nedjelja_ponedjeljak_utorak_srijeda_četvrtak_petak_subota'.split('_'),
    weekdaysShort: 'ned._pon._uto._sri._čet._pet._sub.'.split('_'),
    weekdaysMin: 'ne_po_ut_sr_če_pe_su'.split('_'),
    weekdaysParseExact : true,
    longDateFormat: {
        LT: 'H:mm',
        LTS : 'H:mm:ss',
        L: 'DD.MM.YYYY',
        LL: 'D. MMMM YYYY',
        LLL: 'D. MMMM YYYY H:mm',
        LLLL: 'dddd, D. MMMM YYYY H:mm'
    },
    calendar: {
        sameDay: '[danas u] LT',
        nextDay: '[sjutra u] LT',

        nextWeek: function () {
            switch (this.day()) {
                case 0:
                    return '[u] [nedjelju] [u] LT';
                case 3:
                    return '[u] [srijedu] [u] LT';
                case 6:
                    return '[u] [subotu] [u] LT';
                case 1:
                case 2:
                case 4:
                case 5:
                    return '[u] dddd [u] LT';
            }
        },
        lastDay  : '[juče u] LT',
        lastWeek : function () {
            var lastWeekDays = [
                '[prošle] [nedjelje] [u] LT',
                '[prošlog] [ponedjeljka] [u] LT',
                '[prošlog] [utorka] [u] LT',
                '[prošle] [srijede] [u] LT',
                '[prošlog] [četvrtka] [u] LT',
                '[prošlog] [petka] [u] LT',
                '[prošle] [subote] [u] LT'
            ];
            return lastWeekDays[this.day()];
        },
        sameElse : 'L'
    },
    relativeTime : {
        future : 'za %s',
        past   : 'prije %s',
        s      : 'nekoliko sekundi',
        m      : translator.translate,
        mm     : translator.translate,
        h      : translator.translate,
        hh     : translator.translate,
        d      : 'dan',
        dd     : translator.translate,
        M      : 'mjesec',
        MM     : translator.translate,
        y      : 'godinu',
        yy     : translator.translate
    },
    dayOfMonthOrdinalParse: /\d{1,2}\./,
    ordinal : '%d.',
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 7  // The week that contains Jan 1st is the first week of the year.
    }
});

return me;

})));


/***/ }),
/* 162 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Maori [mi]
//! author : John Corrigan <robbiecloset@gmail.com> : https://github.com/johnideal

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var mi = moment.defineLocale('mi', {
    months: 'Kohi-tāte_Hui-tanguru_Poutū-te-rangi_Paenga-whāwhā_Haratua_Pipiri_Hōngoingoi_Here-turi-kōkā_Mahuru_Whiringa-ā-nuku_Whiringa-ā-rangi_Hakihea'.split('_'),
    monthsShort: 'Kohi_Hui_Pou_Pae_Hara_Pipi_Hōngoi_Here_Mahu_Whi-nu_Whi-ra_Haki'.split('_'),
    monthsRegex: /(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,
    monthsStrictRegex: /(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,
    monthsShortRegex: /(?:['a-z\u0101\u014D\u016B]+\-?){1,3}/i,
    monthsShortStrictRegex: /(?:['a-z\u0101\u014D\u016B]+\-?){1,2}/i,
    weekdays: 'Rātapu_Mane_Tūrei_Wenerei_Tāite_Paraire_Hātarei'.split('_'),
    weekdaysShort: 'Ta_Ma_Tū_We_Tāi_Pa_Hā'.split('_'),
    weekdaysMin: 'Ta_Ma_Tū_We_Tāi_Pa_Hā'.split('_'),
    longDateFormat: {
        LT: 'HH:mm',
        LTS: 'HH:mm:ss',
        L: 'DD/MM/YYYY',
        LL: 'D MMMM YYYY',
        LLL: 'D MMMM YYYY [i] HH:mm',
        LLLL: 'dddd, D MMMM YYYY [i] HH:mm'
    },
    calendar: {
        sameDay: '[i teie mahana, i] LT',
        nextDay: '[apopo i] LT',
        nextWeek: 'dddd [i] LT',
        lastDay: '[inanahi i] LT',
        lastWeek: 'dddd [whakamutunga i] LT',
        sameElse: 'L'
    },
    relativeTime: {
        future: 'i roto i %s',
        past: '%s i mua',
        s: 'te hēkona ruarua',
        m: 'he meneti',
        mm: '%d meneti',
        h: 'te haora',
        hh: '%d haora',
        d: 'he ra',
        dd: '%d ra',
        M: 'he marama',
        MM: '%d marama',
        y: 'he tau',
        yy: '%d tau'
    },
    dayOfMonthOrdinalParse: /\d{1,2}º/,
    ordinal: '%dº',
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 4  // The week that contains Jan 4th is the first week of the year.
    }
});

return mi;

})));


/***/ }),
/* 163 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Macedonian [mk]
//! author : Borislav Mickov : https://github.com/B0k0

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var mk = moment.defineLocale('mk', {
    months : 'јануари_февруари_март_април_мај_јуни_јули_август_септември_октомври_ноември_декември'.split('_'),
    monthsShort : 'јан_фев_мар_апр_мај_јун_јул_авг_сеп_окт_ное_дек'.split('_'),
    weekdays : 'недела_понеделник_вторник_среда_четврток_петок_сабота'.split('_'),
    weekdaysShort : 'нед_пон_вто_сре_чет_пет_саб'.split('_'),
    weekdaysMin : 'нe_пo_вт_ср_че_пе_сa'.split('_'),
    longDateFormat : {
        LT : 'H:mm',
        LTS : 'H:mm:ss',
        L : 'D.MM.YYYY',
        LL : 'D MMMM YYYY',
        LLL : 'D MMMM YYYY H:mm',
        LLLL : 'dddd, D MMMM YYYY H:mm'
    },
    calendar : {
        sameDay : '[Денес во] LT',
        nextDay : '[Утре во] LT',
        nextWeek : '[Во] dddd [во] LT',
        lastDay : '[Вчера во] LT',
        lastWeek : function () {
            switch (this.day()) {
                case 0:
                case 3:
                case 6:
                    return '[Изминатата] dddd [во] LT';
                case 1:
                case 2:
                case 4:
                case 5:
                    return '[Изминатиот] dddd [во] LT';
            }
        },
        sameElse : 'L'
    },
    relativeTime : {
        future : 'после %s',
        past : 'пред %s',
        s : 'неколку секунди',
        m : 'минута',
        mm : '%d минути',
        h : 'час',
        hh : '%d часа',
        d : 'ден',
        dd : '%d дена',
        M : 'месец',
        MM : '%d месеци',
        y : 'година',
        yy : '%d години'
    },
    dayOfMonthOrdinalParse: /\d{1,2}-(ев|ен|ти|ви|ри|ми)/,
    ordinal : function (number) {
        var lastDigit = number % 10,
            last2Digits = number % 100;
        if (number === 0) {
            return number + '-ев';
        } else if (last2Digits === 0) {
            return number + '-ен';
        } else if (last2Digits > 10 && last2Digits < 20) {
            return number + '-ти';
        } else if (lastDigit === 1) {
            return number + '-ви';
        } else if (lastDigit === 2) {
            return number + '-ри';
        } else if (lastDigit === 7 || lastDigit === 8) {
            return number + '-ми';
        } else {
            return number + '-ти';
        }
    },
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 7  // The week that contains Jan 1st is the first week of the year.
    }
});

return mk;

})));


/***/ }),
/* 164 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Malayalam [ml]
//! author : Floyd Pink : https://github.com/floydpink

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var ml = moment.defineLocale('ml', {
    months : 'ജനുവരി_ഫെബ്രുവരി_മാർച്ച്_ഏപ്രിൽ_മേയ്_ജൂൺ_ജൂലൈ_ഓഗസ്റ്റ്_സെപ്റ്റംബർ_ഒക്ടോബർ_നവംബർ_ഡിസംബർ'.split('_'),
    monthsShort : 'ജനു._ഫെബ്രു._മാർ._ഏപ്രി._മേയ്_ജൂൺ_ജൂലൈ._ഓഗ._സെപ്റ്റ._ഒക്ടോ._നവം._ഡിസം.'.split('_'),
    monthsParseExact : true,
    weekdays : 'ഞായറാഴ്ച_തിങ്കളാഴ്ച_ചൊവ്വാഴ്ച_ബുധനാഴ്ച_വ്യാഴാഴ്ച_വെള്ളിയാഴ്ച_ശനിയാഴ്ച'.split('_'),
    weekdaysShort : 'ഞായർ_തിങ്കൾ_ചൊവ്വ_ബുധൻ_വ്യാഴം_വെള്ളി_ശനി'.split('_'),
    weekdaysMin : 'ഞാ_തി_ചൊ_ബു_വ്യാ_വെ_ശ'.split('_'),
    longDateFormat : {
        LT : 'A h:mm -നു',
        LTS : 'A h:mm:ss -നു',
        L : 'DD/MM/YYYY',
        LL : 'D MMMM YYYY',
        LLL : 'D MMMM YYYY, A h:mm -നു',
        LLLL : 'dddd, D MMMM YYYY, A h:mm -നു'
    },
    calendar : {
        sameDay : '[ഇന്ന്] LT',
        nextDay : '[നാളെ] LT',
        nextWeek : 'dddd, LT',
        lastDay : '[ഇന്നലെ] LT',
        lastWeek : '[കഴിഞ്ഞ] dddd, LT',
        sameElse : 'L'
    },
    relativeTime : {
        future : '%s കഴിഞ്ഞ്',
        past : '%s മുൻപ്',
        s : 'അൽപ നിമിഷങ്ങൾ',
        m : 'ഒരു മിനിറ്റ്',
        mm : '%d മിനിറ്റ്',
        h : 'ഒരു മണിക്കൂർ',
        hh : '%d മണിക്കൂർ',
        d : 'ഒരു ദിവസം',
        dd : '%d ദിവസം',
        M : 'ഒരു മാസം',
        MM : '%d മാസം',
        y : 'ഒരു വർഷം',
        yy : '%d വർഷം'
    },
    meridiemParse: /രാത്രി|രാവിലെ|ഉച്ച കഴിഞ്ഞ്|വൈകുന്നേരം|രാത്രി/i,
    meridiemHour : function (hour, meridiem) {
        if (hour === 12) {
            hour = 0;
        }
        if ((meridiem === 'രാത്രി' && hour >= 4) ||
                meridiem === 'ഉച്ച കഴിഞ്ഞ്' ||
                meridiem === 'വൈകുന്നേരം') {
            return hour + 12;
        } else {
            return hour;
        }
    },
    meridiem : function (hour, minute, isLower) {
        if (hour < 4) {
            return 'രാത്രി';
        } else if (hour < 12) {
            return 'രാവിലെ';
        } else if (hour < 17) {
            return 'ഉച്ച കഴിഞ്ഞ്';
        } else if (hour < 20) {
            return 'വൈകുന്നേരം';
        } else {
            return 'രാത്രി';
        }
    }
});

return ml;

})));


/***/ }),
/* 165 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Marathi [mr]
//! author : Harshad Kale : https://github.com/kalehv
//! author : Vivek Athalye : https://github.com/vnathalye

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var symbolMap = {
    '1': '१',
    '2': '२',
    '3': '३',
    '4': '४',
    '5': '५',
    '6': '६',
    '7': '७',
    '8': '८',
    '9': '९',
    '0': '०'
};
var numberMap = {
    '१': '1',
    '२': '2',
    '३': '3',
    '४': '4',
    '५': '5',
    '६': '6',
    '७': '7',
    '८': '8',
    '९': '9',
    '०': '0'
};

function relativeTimeMr(number, withoutSuffix, string, isFuture)
{
    var output = '';
    if (withoutSuffix) {
        switch (string) {
            case 's': output = 'काही सेकंद'; break;
            case 'm': output = 'एक मिनिट'; break;
            case 'mm': output = '%d मिनिटे'; break;
            case 'h': output = 'एक तास'; break;
            case 'hh': output = '%d तास'; break;
            case 'd': output = 'एक दिवस'; break;
            case 'dd': output = '%d दिवस'; break;
            case 'M': output = 'एक महिना'; break;
            case 'MM': output = '%d महिने'; break;
            case 'y': output = 'एक वर्ष'; break;
            case 'yy': output = '%d वर्षे'; break;
        }
    }
    else {
        switch (string) {
            case 's': output = 'काही सेकंदां'; break;
            case 'm': output = 'एका मिनिटा'; break;
            case 'mm': output = '%d मिनिटां'; break;
            case 'h': output = 'एका तासा'; break;
            case 'hh': output = '%d तासां'; break;
            case 'd': output = 'एका दिवसा'; break;
            case 'dd': output = '%d दिवसां'; break;
            case 'M': output = 'एका महिन्या'; break;
            case 'MM': output = '%d महिन्यां'; break;
            case 'y': output = 'एका वर्षा'; break;
            case 'yy': output = '%d वर्षां'; break;
        }
    }
    return output.replace(/%d/i, number);
}

var mr = moment.defineLocale('mr', {
    months : 'जानेवारी_फेब्रुवारी_मार्च_एप्रिल_मे_जून_जुलै_ऑगस्ट_सप्टेंबर_ऑक्टोबर_नोव्हेंबर_डिसेंबर'.split('_'),
    monthsShort: 'जाने._फेब्रु._मार्च._एप्रि._मे._जून._जुलै._ऑग._सप्टें._ऑक्टो._नोव्हें._डिसें.'.split('_'),
    monthsParseExact : true,
    weekdays : 'रविवार_सोमवार_मंगळवार_बुधवार_गुरूवार_शुक्रवार_शनिवार'.split('_'),
    weekdaysShort : 'रवि_सोम_मंगळ_बुध_गुरू_शुक्र_शनि'.split('_'),
    weekdaysMin : 'र_सो_मं_बु_गु_शु_श'.split('_'),
    longDateFormat : {
        LT : 'A h:mm वाजता',
        LTS : 'A h:mm:ss वाजता',
        L : 'DD/MM/YYYY',
        LL : 'D MMMM YYYY',
        LLL : 'D MMMM YYYY, A h:mm वाजता',
        LLLL : 'dddd, D MMMM YYYY, A h:mm वाजता'
    },
    calendar : {
        sameDay : '[आज] LT',
        nextDay : '[उद्या] LT',
        nextWeek : 'dddd, LT',
        lastDay : '[काल] LT',
        lastWeek: '[मागील] dddd, LT',
        sameElse : 'L'
    },
    relativeTime : {
        future: '%sमध्ये',
        past: '%sपूर्वी',
        s: relativeTimeMr,
        m: relativeTimeMr,
        mm: relativeTimeMr,
        h: relativeTimeMr,
        hh: relativeTimeMr,
        d: relativeTimeMr,
        dd: relativeTimeMr,
        M: relativeTimeMr,
        MM: relativeTimeMr,
        y: relativeTimeMr,
        yy: relativeTimeMr
    },
    preparse: function (string) {
        return string.replace(/[१२३४५६७८९०]/g, function (match) {
            return numberMap[match];
        });
    },
    postformat: function (string) {
        return string.replace(/\d/g, function (match) {
            return symbolMap[match];
        });
    },
    meridiemParse: /रात्री|सकाळी|दुपारी|सायंकाळी/,
    meridiemHour : function (hour, meridiem) {
        if (hour === 12) {
            hour = 0;
        }
        if (meridiem === 'रात्री') {
            return hour < 4 ? hour : hour + 12;
        } else if (meridiem === 'सकाळी') {
            return hour;
        } else if (meridiem === 'दुपारी') {
            return hour >= 10 ? hour : hour + 12;
        } else if (meridiem === 'सायंकाळी') {
            return hour + 12;
        }
    },
    meridiem: function (hour, minute, isLower) {
        if (hour < 4) {
            return 'रात्री';
        } else if (hour < 10) {
            return 'सकाळी';
        } else if (hour < 17) {
            return 'दुपारी';
        } else if (hour < 20) {
            return 'सायंकाळी';
        } else {
            return 'रात्री';
        }
    },
    week : {
        dow : 0, // Sunday is the first day of the week.
        doy : 6  // The week that contains Jan 1st is the first week of the year.
    }
});

return mr;

})));


/***/ }),
/* 166 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Malay [ms]
//! author : Weldan Jamili : https://github.com/weldan

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var ms = moment.defineLocale('ms', {
    months : 'Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember'.split('_'),
    monthsShort : 'Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis'.split('_'),
    weekdays : 'Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu'.split('_'),
    weekdaysShort : 'Ahd_Isn_Sel_Rab_Kha_Jum_Sab'.split('_'),
    weekdaysMin : 'Ah_Is_Sl_Rb_Km_Jm_Sb'.split('_'),
    longDateFormat : {
        LT : 'HH.mm',
        LTS : 'HH.mm.ss',
        L : 'DD/MM/YYYY',
        LL : 'D MMMM YYYY',
        LLL : 'D MMMM YYYY [pukul] HH.mm',
        LLLL : 'dddd, D MMMM YYYY [pukul] HH.mm'
    },
    meridiemParse: /pagi|tengahari|petang|malam/,
    meridiemHour: function (hour, meridiem) {
        if (hour === 12) {
            hour = 0;
        }
        if (meridiem === 'pagi') {
            return hour;
        } else if (meridiem === 'tengahari') {
            return hour >= 11 ? hour : hour + 12;
        } else if (meridiem === 'petang' || meridiem === 'malam') {
            return hour + 12;
        }
    },
    meridiem : function (hours, minutes, isLower) {
        if (hours < 11) {
            return 'pagi';
        } else if (hours < 15) {
            return 'tengahari';
        } else if (hours < 19) {
            return 'petang';
        } else {
            return 'malam';
        }
    },
    calendar : {
        sameDay : '[Hari ini pukul] LT',
        nextDay : '[Esok pukul] LT',
        nextWeek : 'dddd [pukul] LT',
        lastDay : '[Kelmarin pukul] LT',
        lastWeek : 'dddd [lepas pukul] LT',
        sameElse : 'L'
    },
    relativeTime : {
        future : 'dalam %s',
        past : '%s yang lepas',
        s : 'beberapa saat',
        m : 'seminit',
        mm : '%d minit',
        h : 'sejam',
        hh : '%d jam',
        d : 'sehari',
        dd : '%d hari',
        M : 'sebulan',
        MM : '%d bulan',
        y : 'setahun',
        yy : '%d tahun'
    },
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 7  // The week that contains Jan 1st is the first week of the year.
    }
});

return ms;

})));


/***/ }),
/* 167 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Malay [ms-my]
//! note : DEPRECATED, the correct one is [ms]
//! author : Weldan Jamili : https://github.com/weldan

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var msMy = moment.defineLocale('ms-my', {
    months : 'Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember'.split('_'),
    monthsShort : 'Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis'.split('_'),
    weekdays : 'Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu'.split('_'),
    weekdaysShort : 'Ahd_Isn_Sel_Rab_Kha_Jum_Sab'.split('_'),
    weekdaysMin : 'Ah_Is_Sl_Rb_Km_Jm_Sb'.split('_'),
    longDateFormat : {
        LT : 'HH.mm',
        LTS : 'HH.mm.ss',
        L : 'DD/MM/YYYY',
        LL : 'D MMMM YYYY',
        LLL : 'D MMMM YYYY [pukul] HH.mm',
        LLLL : 'dddd, D MMMM YYYY [pukul] HH.mm'
    },
    meridiemParse: /pagi|tengahari|petang|malam/,
    meridiemHour: function (hour, meridiem) {
        if (hour === 12) {
            hour = 0;
        }
        if (meridiem === 'pagi') {
            return hour;
        } else if (meridiem === 'tengahari') {
            return hour >= 11 ? hour : hour + 12;
        } else if (meridiem === 'petang' || meridiem === 'malam') {
            return hour + 12;
        }
    },
    meridiem : function (hours, minutes, isLower) {
        if (hours < 11) {
            return 'pagi';
        } else if (hours < 15) {
            return 'tengahari';
        } else if (hours < 19) {
            return 'petang';
        } else {
            return 'malam';
        }
    },
    calendar : {
        sameDay : '[Hari ini pukul] LT',
        nextDay : '[Esok pukul] LT',
        nextWeek : 'dddd [pukul] LT',
        lastDay : '[Kelmarin pukul] LT',
        lastWeek : 'dddd [lepas pukul] LT',
        sameElse : 'L'
    },
    relativeTime : {
        future : 'dalam %s',
        past : '%s yang lepas',
        s : 'beberapa saat',
        m : 'seminit',
        mm : '%d minit',
        h : 'sejam',
        hh : '%d jam',
        d : 'sehari',
        dd : '%d hari',
        M : 'sebulan',
        MM : '%d bulan',
        y : 'setahun',
        yy : '%d tahun'
    },
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 7  // The week that contains Jan 1st is the first week of the year.
    }
});

return msMy;

})));


/***/ }),
/* 168 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Burmese [my]
//! author : Squar team, mysquar.com
//! author : David Rossellat : https://github.com/gholadr
//! author : Tin Aung Lin : https://github.com/thanyawzinmin

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var symbolMap = {
    '1': '၁',
    '2': '၂',
    '3': '၃',
    '4': '၄',
    '5': '၅',
    '6': '၆',
    '7': '၇',
    '8': '၈',
    '9': '၉',
    '0': '၀'
};
var numberMap = {
    '၁': '1',
    '၂': '2',
    '၃': '3',
    '၄': '4',
    '၅': '5',
    '၆': '6',
    '၇': '7',
    '၈': '8',
    '၉': '9',
    '၀': '0'
};

var my = moment.defineLocale('my', {
    months: 'ဇန်နဝါရီ_ဖေဖော်ဝါရီ_မတ်_ဧပြီ_မေ_ဇွန်_ဇူလိုင်_သြဂုတ်_စက်တင်ဘာ_အောက်တိုဘာ_နိုဝင်ဘာ_ဒီဇင်ဘာ'.split('_'),
    monthsShort: 'ဇန်_ဖေ_မတ်_ပြီ_မေ_ဇွန်_လိုင်_သြ_စက်_အောက်_နို_ဒီ'.split('_'),
    weekdays: 'တနင်္ဂနွေ_တနင်္လာ_အင်္ဂါ_ဗုဒ္ဓဟူး_ကြာသပတေး_သောကြာ_စနေ'.split('_'),
    weekdaysShort: 'နွေ_လာ_ဂါ_ဟူး_ကြာ_သော_နေ'.split('_'),
    weekdaysMin: 'နွေ_လာ_ဂါ_ဟူး_ကြာ_သော_နေ'.split('_'),

    longDateFormat: {
        LT: 'HH:mm',
        LTS: 'HH:mm:ss',
        L: 'DD/MM/YYYY',
        LL: 'D MMMM YYYY',
        LLL: 'D MMMM YYYY HH:mm',
        LLLL: 'dddd D MMMM YYYY HH:mm'
    },
    calendar: {
        sameDay: '[ယနေ.] LT [မှာ]',
        nextDay: '[မနက်ဖြန်] LT [မှာ]',
        nextWeek: 'dddd LT [မှာ]',
        lastDay: '[မနေ.က] LT [မှာ]',
        lastWeek: '[ပြီးခဲ့သော] dddd LT [မှာ]',
        sameElse: 'L'
    },
    relativeTime: {
        future: 'လာမည့် %s မှာ',
        past: 'လွန်ခဲ့သော %s က',
        s: 'စက္ကန်.အနည်းငယ်',
        m: 'တစ်မိနစ်',
        mm: '%d မိနစ်',
        h: 'တစ်နာရီ',
        hh: '%d နာရီ',
        d: 'တစ်ရက်',
        dd: '%d ရက်',
        M: 'တစ်လ',
        MM: '%d လ',
        y: 'တစ်နှစ်',
        yy: '%d နှစ်'
    },
    preparse: function (string) {
        return string.replace(/[၁၂၃၄၅၆၇၈၉၀]/g, function (match) {
            return numberMap[match];
        });
    },
    postformat: function (string) {
        return string.replace(/\d/g, function (match) {
            return symbolMap[match];
        });
    },
    week: {
        dow: 1, // Monday is the first day of the week.
        doy: 4 // The week that contains Jan 1st is the first week of the year.
    }
});

return my;

})));


/***/ }),
/* 169 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Norwegian Bokmål [nb]
//! authors : Espen Hovlandsdal : https://github.com/rexxars
//!           Sigurd Gartmann : https://github.com/sigurdga

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var nb = moment.defineLocale('nb', {
    months : 'januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember'.split('_'),
    monthsShort : 'jan._feb._mars_april_mai_juni_juli_aug._sep._okt._nov._des.'.split('_'),
    monthsParseExact : true,
    weekdays : 'søndag_mandag_tirsdag_onsdag_torsdag_fredag_lørdag'.split('_'),
    weekdaysShort : 'sø._ma._ti._on._to._fr._lø.'.split('_'),
    weekdaysMin : 'sø_ma_ti_on_to_fr_lø'.split('_'),
    weekdaysParseExact : true,
    longDateFormat : {
        LT : 'HH:mm',
        LTS : 'HH:mm:ss',
        L : 'DD.MM.YYYY',
        LL : 'D. MMMM YYYY',
        LLL : 'D. MMMM YYYY [kl.] HH:mm',
        LLLL : 'dddd D. MMMM YYYY [kl.] HH:mm'
    },
    calendar : {
        sameDay: '[i dag kl.] LT',
        nextDay: '[i morgen kl.] LT',
        nextWeek: 'dddd [kl.] LT',
        lastDay: '[i går kl.] LT',
        lastWeek: '[forrige] dddd [kl.] LT',
        sameElse: 'L'
    },
    relativeTime : {
        future : 'om %s',
        past : '%s siden',
        s : 'noen sekunder',
        m : 'ett minutt',
        mm : '%d minutter',
        h : 'en time',
        hh : '%d timer',
        d : 'en dag',
        dd : '%d dager',
        M : 'en måned',
        MM : '%d måneder',
        y : 'ett år',
        yy : '%d år'
    },
    dayOfMonthOrdinalParse: /\d{1,2}\./,
    ordinal : '%d.',
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 4  // The week that contains Jan 4th is the first week of the year.
    }
});

return nb;

})));


/***/ }),
/* 170 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Nepalese [ne]
//! author : suvash : https://github.com/suvash

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var symbolMap = {
    '1': '१',
    '2': '२',
    '3': '३',
    '4': '४',
    '5': '५',
    '6': '६',
    '7': '७',
    '8': '८',
    '9': '९',
    '0': '०'
};
var numberMap = {
    '१': '1',
    '२': '2',
    '३': '3',
    '४': '4',
    '५': '5',
    '६': '6',
    '७': '7',
    '८': '8',
    '९': '9',
    '०': '0'
};

var ne = moment.defineLocale('ne', {
    months : 'जनवरी_फेब्रुवरी_मार्च_अप्रिल_मई_जुन_जुलाई_अगष्ट_सेप्टेम्बर_अक्टोबर_नोभेम्बर_डिसेम्बर'.split('_'),
    monthsShort : 'जन._फेब्रु._मार्च_अप्रि._मई_जुन_जुलाई._अग._सेप्ट._अक्टो._नोभे._डिसे.'.split('_'),
    monthsParseExact : true,
    weekdays : 'आइतबार_सोमबार_मङ्गलबार_बुधबार_बिहिबार_शुक्रबार_शनिबार'.split('_'),
    weekdaysShort : 'आइत._सोम._मङ्गल._बुध._बिहि._शुक्र._शनि.'.split('_'),
    weekdaysMin : 'आ._सो._मं._बु._बि._शु._श.'.split('_'),
    weekdaysParseExact : true,
    longDateFormat : {
        LT : 'Aको h:mm बजे',
        LTS : 'Aको h:mm:ss बजे',
        L : 'DD/MM/YYYY',
        LL : 'D MMMM YYYY',
        LLL : 'D MMMM YYYY, Aको h:mm बजे',
        LLLL : 'dddd, D MMMM YYYY, Aको h:mm बजे'
    },
    preparse: function (string) {
        return string.replace(/[१२३४५६७८९०]/g, function (match) {
            return numberMap[match];
        });
    },
    postformat: function (string) {
        return string.replace(/\d/g, function (match) {
            return symbolMap[match];
        });
    },
    meridiemParse: /राति|बिहान|दिउँसो|साँझ/,
    meridiemHour : function (hour, meridiem) {
        if (hour === 12) {
            hour = 0;
        }
        if (meridiem === 'राति') {
            return hour < 4 ? hour : hour + 12;
        } else if (meridiem === 'बिहान') {
            return hour;
        } else if (meridiem === 'दिउँसो') {
            return hour >= 10 ? hour : hour + 12;
        } else if (meridiem === 'साँझ') {
            return hour + 12;
        }
    },
    meridiem : function (hour, minute, isLower) {
        if (hour < 3) {
            return 'राति';
        } else if (hour < 12) {
            return 'बिहान';
        } else if (hour < 16) {
            return 'दिउँसो';
        } else if (hour < 20) {
            return 'साँझ';
        } else {
            return 'राति';
        }
    },
    calendar : {
        sameDay : '[आज] LT',
        nextDay : '[भोलि] LT',
        nextWeek : '[आउँदो] dddd[,] LT',
        lastDay : '[हिजो] LT',
        lastWeek : '[गएको] dddd[,] LT',
        sameElse : 'L'
    },
    relativeTime : {
        future : '%sमा',
        past : '%s अगाडि',
        s : 'केही क्षण',
        m : 'एक मिनेट',
        mm : '%d मिनेट',
        h : 'एक घण्टा',
        hh : '%d घण्टा',
        d : 'एक दिन',
        dd : '%d दिन',
        M : 'एक महिना',
        MM : '%d महिना',
        y : 'एक बर्ष',
        yy : '%d बर्ष'
    },
    week : {
        dow : 0, // Sunday is the first day of the week.
        doy : 6  // The week that contains Jan 1st is the first week of the year.
    }
});

return ne;

})));


/***/ }),
/* 171 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Dutch [nl]
//! author : Joris Röling : https://github.com/jorisroling
//! author : Jacob Middag : https://github.com/middagj

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var monthsShortWithDots = 'jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.'.split('_');
var monthsShortWithoutDots = 'jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec'.split('_');

var monthsParse = [/^jan/i, /^feb/i, /^maart|mrt.?$/i, /^apr/i, /^mei$/i, /^jun[i.]?$/i, /^jul[i.]?$/i, /^aug/i, /^sep/i, /^okt/i, /^nov/i, /^dec/i];
var monthsRegex = /^(januari|februari|maart|april|mei|april|ju[nl]i|augustus|september|oktober|november|december|jan\.?|feb\.?|mrt\.?|apr\.?|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i;

var nl = moment.defineLocale('nl', {
    months : 'januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december'.split('_'),
    monthsShort : function (m, format) {
        if (!m) {
            return monthsShortWithDots;
        } else if (/-MMM-/.test(format)) {
            return monthsShortWithoutDots[m.month()];
        } else {
            return monthsShortWithDots[m.month()];
        }
    },

    monthsRegex: monthsRegex,
    monthsShortRegex: monthsRegex,
    monthsStrictRegex: /^(januari|februari|maart|mei|ju[nl]i|april|augustus|september|oktober|november|december)/i,
    monthsShortStrictRegex: /^(jan\.?|feb\.?|mrt\.?|apr\.?|mei|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i,

    monthsParse : monthsParse,
    longMonthsParse : monthsParse,
    shortMonthsParse : monthsParse,

    weekdays : 'zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag'.split('_'),
    weekdaysShort : 'zo._ma._di._wo._do._vr._za.'.split('_'),
    weekdaysMin : 'zo_ma_di_wo_do_vr_za'.split('_'),
    weekdaysParseExact : true,
    longDateFormat : {
        LT : 'HH:mm',
        LTS : 'HH:mm:ss',
        L : 'DD-MM-YYYY',
        LL : 'D MMMM YYYY',
        LLL : 'D MMMM YYYY HH:mm',
        LLLL : 'dddd D MMMM YYYY HH:mm'
    },
    calendar : {
        sameDay: '[vandaag om] LT',
        nextDay: '[morgen om] LT',
        nextWeek: 'dddd [om] LT',
        lastDay: '[gisteren om] LT',
        lastWeek: '[afgelopen] dddd [om] LT',
        sameElse: 'L'
    },
    relativeTime : {
        future : 'over %s',
        past : '%s geleden',
        s : 'een paar seconden',
        m : 'één minuut',
        mm : '%d minuten',
        h : 'één uur',
        hh : '%d uur',
        d : 'één dag',
        dd : '%d dagen',
        M : 'één maand',
        MM : '%d maanden',
        y : 'één jaar',
        yy : '%d jaar'
    },
    dayOfMonthOrdinalParse: /\d{1,2}(ste|de)/,
    ordinal : function (number) {
        return number + ((number === 1 || number === 8 || number >= 20) ? 'ste' : 'de');
    },
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 4  // The week that contains Jan 4th is the first week of the year.
    }
});

return nl;

})));


/***/ }),
/* 172 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Dutch (Belgium) [nl-be]
//! author : Joris Röling : https://github.com/jorisroling
//! author : Jacob Middag : https://github.com/middagj

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var monthsShortWithDots = 'jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.'.split('_');
var monthsShortWithoutDots = 'jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec'.split('_');

var monthsParse = [/^jan/i, /^feb/i, /^maart|mrt.?$/i, /^apr/i, /^mei$/i, /^jun[i.]?$/i, /^jul[i.]?$/i, /^aug/i, /^sep/i, /^okt/i, /^nov/i, /^dec/i];
var monthsRegex = /^(januari|februari|maart|april|mei|april|ju[nl]i|augustus|september|oktober|november|december|jan\.?|feb\.?|mrt\.?|apr\.?|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i;

var nlBe = moment.defineLocale('nl-be', {
    months : 'januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december'.split('_'),
    monthsShort : function (m, format) {
        if (!m) {
            return monthsShortWithDots;
        } else if (/-MMM-/.test(format)) {
            return monthsShortWithoutDots[m.month()];
        } else {
            return monthsShortWithDots[m.month()];
        }
    },

    monthsRegex: monthsRegex,
    monthsShortRegex: monthsRegex,
    monthsStrictRegex: /^(januari|februari|maart|mei|ju[nl]i|april|augustus|september|oktober|november|december)/i,
    monthsShortStrictRegex: /^(jan\.?|feb\.?|mrt\.?|apr\.?|mei|ju[nl]\.?|aug\.?|sep\.?|okt\.?|nov\.?|dec\.?)/i,

    monthsParse : monthsParse,
    longMonthsParse : monthsParse,
    shortMonthsParse : monthsParse,

    weekdays : 'zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag'.split('_'),
    weekdaysShort : 'zo._ma._di._wo._do._vr._za.'.split('_'),
    weekdaysMin : 'zo_ma_di_wo_do_vr_za'.split('_'),
    weekdaysParseExact : true,
    longDateFormat : {
        LT : 'HH:mm',
        LTS : 'HH:mm:ss',
        L : 'DD/MM/YYYY',
        LL : 'D MMMM YYYY',
        LLL : 'D MMMM YYYY HH:mm',
        LLLL : 'dddd D MMMM YYYY HH:mm'
    },
    calendar : {
        sameDay: '[vandaag om] LT',
        nextDay: '[morgen om] LT',
        nextWeek: 'dddd [om] LT',
        lastDay: '[gisteren om] LT',
        lastWeek: '[afgelopen] dddd [om] LT',
        sameElse: 'L'
    },
    relativeTime : {
        future : 'over %s',
        past : '%s geleden',
        s : 'een paar seconden',
        m : 'één minuut',
        mm : '%d minuten',
        h : 'één uur',
        hh : '%d uur',
        d : 'één dag',
        dd : '%d dagen',
        M : 'één maand',
        MM : '%d maanden',
        y : 'één jaar',
        yy : '%d jaar'
    },
    dayOfMonthOrdinalParse: /\d{1,2}(ste|de)/,
    ordinal : function (number) {
        return number + ((number === 1 || number === 8 || number >= 20) ? 'ste' : 'de');
    },
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 4  // The week that contains Jan 4th is the first week of the year.
    }
});

return nlBe;

})));


/***/ }),
/* 173 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Nynorsk [nn]
//! author : https://github.com/mechuwind

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var nn = moment.defineLocale('nn', {
    months : 'januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember'.split('_'),
    monthsShort : 'jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des'.split('_'),
    weekdays : 'sundag_måndag_tysdag_onsdag_torsdag_fredag_laurdag'.split('_'),
    weekdaysShort : 'sun_mån_tys_ons_tor_fre_lau'.split('_'),
    weekdaysMin : 'su_må_ty_on_to_fr_lø'.split('_'),
    longDateFormat : {
        LT : 'HH:mm',
        LTS : 'HH:mm:ss',
        L : 'DD.MM.YYYY',
        LL : 'D. MMMM YYYY',
        LLL : 'D. MMMM YYYY [kl.] H:mm',
        LLLL : 'dddd D. MMMM YYYY [kl.] HH:mm'
    },
    calendar : {
        sameDay: '[I dag klokka] LT',
        nextDay: '[I morgon klokka] LT',
        nextWeek: 'dddd [klokka] LT',
        lastDay: '[I går klokka] LT',
        lastWeek: '[Føregåande] dddd [klokka] LT',
        sameElse: 'L'
    },
    relativeTime : {
        future : 'om %s',
        past : '%s sidan',
        s : 'nokre sekund',
        m : 'eit minutt',
        mm : '%d minutt',
        h : 'ein time',
        hh : '%d timar',
        d : 'ein dag',
        dd : '%d dagar',
        M : 'ein månad',
        MM : '%d månader',
        y : 'eit år',
        yy : '%d år'
    },
    dayOfMonthOrdinalParse: /\d{1,2}\./,
    ordinal : '%d.',
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 4  // The week that contains Jan 4th is the first week of the year.
    }
});

return nn;

})));


/***/ }),
/* 174 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Punjabi (India) [pa-in]
//! author : Harpreet Singh : https://github.com/harpreetkhalsagtbit

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var symbolMap = {
    '1': '੧',
    '2': '੨',
    '3': '੩',
    '4': '੪',
    '5': '੫',
    '6': '੬',
    '7': '੭',
    '8': '੮',
    '9': '੯',
    '0': '੦'
};
var numberMap = {
    '੧': '1',
    '੨': '2',
    '੩': '3',
    '੪': '4',
    '੫': '5',
    '੬': '6',
    '੭': '7',
    '੮': '8',
    '੯': '9',
    '੦': '0'
};

var paIn = moment.defineLocale('pa-in', {
    // There are months name as per Nanakshahi Calender but they are not used as rigidly in modern Punjabi.
    months : 'ਜਨਵਰੀ_ਫ਼ਰਵਰੀ_ਮਾਰਚ_ਅਪ੍ਰੈਲ_ਮਈ_ਜੂਨ_ਜੁਲਾਈ_ਅਗਸਤ_ਸਤੰਬਰ_ਅਕਤੂਬਰ_ਨਵੰਬਰ_ਦਸੰਬਰ'.split('_'),
    monthsShort : 'ਜਨਵਰੀ_ਫ਼ਰਵਰੀ_ਮਾਰਚ_ਅਪ੍ਰੈਲ_ਮਈ_ਜੂਨ_ਜੁਲਾਈ_ਅਗਸਤ_ਸਤੰਬਰ_ਅਕਤੂਬਰ_ਨਵੰਬਰ_ਦਸੰਬਰ'.split('_'),
    weekdays : 'ਐਤਵਾਰ_ਸੋਮਵਾਰ_ਮੰਗਲਵਾਰ_ਬੁਧਵਾਰ_ਵੀਰਵਾਰ_ਸ਼ੁੱਕਰਵਾਰ_ਸ਼ਨੀਚਰਵਾਰ'.split('_'),
    weekdaysShort : 'ਐਤ_ਸੋਮ_ਮੰਗਲ_ਬੁਧ_ਵੀਰ_ਸ਼ੁਕਰ_ਸ਼ਨੀ'.split('_'),
    weekdaysMin : 'ਐਤ_ਸੋਮ_ਮੰਗਲ_ਬੁਧ_ਵੀਰ_ਸ਼ੁਕਰ_ਸ਼ਨੀ'.split('_'),
    longDateFormat : {
        LT : 'A h:mm ਵਜੇ',
        LTS : 'A h:mm:ss ਵਜੇ',
        L : 'DD/MM/YYYY',
        LL : 'D MMMM YYYY',
        LLL : 'D MMMM YYYY, A h:mm ਵਜੇ',
        LLLL : 'dddd, D MMMM YYYY, A h:mm ਵਜੇ'
    },
    calendar : {
        sameDay : '[ਅਜ] LT',
        nextDay : '[ਕਲ] LT',
        nextWeek : 'dddd, LT',
        lastDay : '[ਕਲ] LT',
        lastWeek : '[ਪਿਛਲੇ] dddd, LT',
        sameElse : 'L'
    },
    relativeTime : {
        future : '%s ਵਿੱਚ',
        past : '%s ਪਿਛਲੇ',
        s : 'ਕੁਝ ਸਕਿੰਟ',
        m : 'ਇਕ ਮਿੰਟ',
        mm : '%d ਮਿੰਟ',
        h : 'ਇੱਕ ਘੰਟਾ',
        hh : '%d ਘੰਟੇ',
        d : 'ਇੱਕ ਦਿਨ',
        dd : '%d ਦਿਨ',
        M : 'ਇੱਕ ਮਹੀਨਾ',
        MM : '%d ਮਹੀਨੇ',
        y : 'ਇੱਕ ਸਾਲ',
        yy : '%d ਸਾਲ'
    },
    preparse: function (string) {
        return string.replace(/[੧੨੩੪੫੬੭੮੯੦]/g, function (match) {
            return numberMap[match];
        });
    },
    postformat: function (string) {
        return string.replace(/\d/g, function (match) {
            return symbolMap[match];
        });
    },
    // Punjabi notation for meridiems are quite fuzzy in practice. While there exists
    // a rigid notion of a 'Pahar' it is not used as rigidly in modern Punjabi.
    meridiemParse: /ਰਾਤ|ਸਵੇਰ|ਦੁਪਹਿਰ|ਸ਼ਾਮ/,
    meridiemHour : function (hour, meridiem) {
        if (hour === 12) {
            hour = 0;
        }
        if (meridiem === 'ਰਾਤ') {
            return hour < 4 ? hour : hour + 12;
        } else if (meridiem === 'ਸਵੇਰ') {
            return hour;
        } else if (meridiem === 'ਦੁਪਹਿਰ') {
            return hour >= 10 ? hour : hour + 12;
        } else if (meridiem === 'ਸ਼ਾਮ') {
            return hour + 12;
        }
    },
    meridiem : function (hour, minute, isLower) {
        if (hour < 4) {
            return 'ਰਾਤ';
        } else if (hour < 10) {
            return 'ਸਵੇਰ';
        } else if (hour < 17) {
            return 'ਦੁਪਹਿਰ';
        } else if (hour < 20) {
            return 'ਸ਼ਾਮ';
        } else {
            return 'ਰਾਤ';
        }
    },
    week : {
        dow : 0, // Sunday is the first day of the week.
        doy : 6  // The week that contains Jan 1st is the first week of the year.
    }
});

return paIn;

})));


/***/ }),
/* 175 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Polish [pl]
//! author : Rafal Hirsz : https://github.com/evoL

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var monthsNominative = 'styczeń_luty_marzec_kwiecień_maj_czerwiec_lipiec_sierpień_wrzesień_październik_listopad_grudzień'.split('_');
var monthsSubjective = 'stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_września_października_listopada_grudnia'.split('_');
function plural(n) {
    return (n % 10 < 5) && (n % 10 > 1) && ((~~(n / 10) % 10) !== 1);
}
function translate(number, withoutSuffix, key) {
    var result = number + ' ';
    switch (key) {
        case 'm':
            return withoutSuffix ? 'minuta' : 'minutę';
        case 'mm':
            return result + (plural(number) ? 'minuty' : 'minut');
        case 'h':
            return withoutSuffix  ? 'godzina'  : 'godzinę';
        case 'hh':
            return result + (plural(number) ? 'godziny' : 'godzin');
        case 'MM':
            return result + (plural(number) ? 'miesiące' : 'miesięcy');
        case 'yy':
            return result + (plural(number) ? 'lata' : 'lat');
    }
}

var pl = moment.defineLocale('pl', {
    months : function (momentToFormat, format) {
        if (!momentToFormat) {
            return monthsNominative;
        } else if (format === '') {
            // Hack: if format empty we know this is used to generate
            // RegExp by moment. Give then back both valid forms of months
            // in RegExp ready format.
            return '(' + monthsSubjective[momentToFormat.month()] + '|' + monthsNominative[momentToFormat.month()] + ')';
        } else if (/D MMMM/.test(format)) {
            return monthsSubjective[momentToFormat.month()];
        } else {
            return monthsNominative[momentToFormat.month()];
        }
    },
    monthsShort : 'sty_lut_mar_kwi_maj_cze_lip_sie_wrz_paź_lis_gru'.split('_'),
    weekdays : 'niedziela_poniedziałek_wtorek_środa_czwartek_piątek_sobota'.split('_'),
    weekdaysShort : 'ndz_pon_wt_śr_czw_pt_sob'.split('_'),
    weekdaysMin : 'Nd_Pn_Wt_Śr_Cz_Pt_So'.split('_'),
    longDateFormat : {
        LT : 'HH:mm',
        LTS : 'HH:mm:ss',
        L : 'DD.MM.YYYY',
        LL : 'D MMMM YYYY',
        LLL : 'D MMMM YYYY HH:mm',
        LLLL : 'dddd, D MMMM YYYY HH:mm'
    },
    calendar : {
        sameDay: '[Dziś o] LT',
        nextDay: '[Jutro o] LT',
        nextWeek: function () {
            switch (this.day()) {
                case 0:
                    return '[W niedzielę o] LT';

                case 2:
                    return '[We wtorek o] LT';

                case 3:
                    return '[W środę o] LT';

                case 6:
                    return '[W sobotę o] LT';

                default:
                    return '[W] dddd [o] LT';
            }
        },
        lastDay: '[Wczoraj o] LT',
        lastWeek: function () {
            switch (this.day()) {
                case 0:
                    return '[W zeszłą niedzielę o] LT';
                case 3:
                    return '[W zeszłą środę o] LT';
                case 6:
                    return '[W zeszłą sobotę o] LT';
                default:
                    return '[W zeszły] dddd [o] LT';
            }
        },
        sameElse: 'L'
    },
    relativeTime : {
        future : 'za %s',
        past : '%s temu',
        s : 'kilka sekund',
        m : translate,
        mm : translate,
        h : translate,
        hh : translate,
        d : '1 dzień',
        dd : '%d dni',
        M : 'miesiąc',
        MM : translate,
        y : 'rok',
        yy : translate
    },
    dayOfMonthOrdinalParse: /\d{1,2}\./,
    ordinal : '%d.',
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 4  // The week that contains Jan 4th is the first week of the year.
    }
});

return pl;

})));


/***/ }),
/* 176 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Portuguese [pt]
//! author : Jefferson : https://github.com/jalex79

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var pt = moment.defineLocale('pt', {
    months : 'janeiro_fevereiro_março_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro'.split('_'),
    monthsShort : 'jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez'.split('_'),
    weekdays : 'Domingo_Segunda-feira_Terça-feira_Quarta-feira_Quinta-feira_Sexta-feira_Sábado'.split('_'),
    weekdaysShort : 'Dom_Seg_Ter_Qua_Qui_Sex_Sáb'.split('_'),
    weekdaysMin : 'Do_2ª_3ª_4ª_5ª_6ª_Sá'.split('_'),
    weekdaysParseExact : true,
    longDateFormat : {
        LT : 'HH:mm',
        LTS : 'HH:mm:ss',
        L : 'DD/MM/YYYY',
        LL : 'D [de] MMMM [de] YYYY',
        LLL : 'D [de] MMMM [de] YYYY HH:mm',
        LLLL : 'dddd, D [de] MMMM [de] YYYY HH:mm'
    },
    calendar : {
        sameDay: '[Hoje às] LT',
        nextDay: '[Amanhã às] LT',
        nextWeek: 'dddd [às] LT',
        lastDay: '[Ontem às] LT',
        lastWeek: function () {
            return (this.day() === 0 || this.day() === 6) ?
                '[Último] dddd [às] LT' : // Saturday + Sunday
                '[Última] dddd [às] LT'; // Monday - Friday
        },
        sameElse: 'L'
    },
    relativeTime : {
        future : 'em %s',
        past : 'há %s',
        s : 'segundos',
        m : 'um minuto',
        mm : '%d minutos',
        h : 'uma hora',
        hh : '%d horas',
        d : 'um dia',
        dd : '%d dias',
        M : 'um mês',
        MM : '%d meses',
        y : 'um ano',
        yy : '%d anos'
    },
    dayOfMonthOrdinalParse: /\d{1,2}º/,
    ordinal : '%dº',
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 4  // The week that contains Jan 4th is the first week of the year.
    }
});

return pt;

})));


/***/ }),
/* 177 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Portuguese (Brazil) [pt-br]
//! author : Caio Ribeiro Pereira : https://github.com/caio-ribeiro-pereira

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var ptBr = moment.defineLocale('pt-br', {
    months : 'janeiro_fevereiro_março_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro'.split('_'),
    monthsShort : 'jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez'.split('_'),
    weekdays : 'Domingo_Segunda-feira_Terça-feira_Quarta-feira_Quinta-feira_Sexta-feira_Sábado'.split('_'),
    weekdaysShort : 'Dom_Seg_Ter_Qua_Qui_Sex_Sáb'.split('_'),
    weekdaysMin : 'Do_2ª_3ª_4ª_5ª_6ª_Sá'.split('_'),
    weekdaysParseExact : true,
    longDateFormat : {
        LT : 'HH:mm',
        LTS : 'HH:mm:ss',
        L : 'DD/MM/YYYY',
        LL : 'D [de] MMMM [de] YYYY',
        LLL : 'D [de] MMMM [de] YYYY [às] HH:mm',
        LLLL : 'dddd, D [de] MMMM [de] YYYY [às] HH:mm'
    },
    calendar : {
        sameDay: '[Hoje às] LT',
        nextDay: '[Amanhã às] LT',
        nextWeek: 'dddd [às] LT',
        lastDay: '[Ontem às] LT',
        lastWeek: function () {
            return (this.day() === 0 || this.day() === 6) ?
                '[Último] dddd [às] LT' : // Saturday + Sunday
                '[Última] dddd [às] LT'; // Monday - Friday
        },
        sameElse: 'L'
    },
    relativeTime : {
        future : 'em %s',
        past : '%s atrás',
        s : 'poucos segundos',
        ss : '%d segundos',
        m : 'um minuto',
        mm : '%d minutos',
        h : 'uma hora',
        hh : '%d horas',
        d : 'um dia',
        dd : '%d dias',
        M : 'um mês',
        MM : '%d meses',
        y : 'um ano',
        yy : '%d anos'
    },
    dayOfMonthOrdinalParse: /\d{1,2}º/,
    ordinal : '%dº'
});

return ptBr;

})));


/***/ }),
/* 178 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Romanian [ro]
//! author : Vlad Gurdiga : https://github.com/gurdiga
//! author : Valentin Agachi : https://github.com/avaly

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


function relativeTimeWithPlural(number, withoutSuffix, key) {
    var format = {
            'mm': 'minute',
            'hh': 'ore',
            'dd': 'zile',
            'MM': 'luni',
            'yy': 'ani'
        },
        separator = ' ';
    if (number % 100 >= 20 || (number >= 100 && number % 100 === 0)) {
        separator = ' de ';
    }
    return number + separator + format[key];
}

var ro = moment.defineLocale('ro', {
    months : 'ianuarie_februarie_martie_aprilie_mai_iunie_iulie_august_septembrie_octombrie_noiembrie_decembrie'.split('_'),
    monthsShort : 'ian._febr._mart._apr._mai_iun._iul._aug._sept._oct._nov._dec.'.split('_'),
    monthsParseExact: true,
    weekdays : 'duminică_luni_marți_miercuri_joi_vineri_sâmbătă'.split('_'),
    weekdaysShort : 'Dum_Lun_Mar_Mie_Joi_Vin_Sâm'.split('_'),
    weekdaysMin : 'Du_Lu_Ma_Mi_Jo_Vi_Sâ'.split('_'),
    longDateFormat : {
        LT : 'H:mm',
        LTS : 'H:mm:ss',
        L : 'DD.MM.YYYY',
        LL : 'D MMMM YYYY',
        LLL : 'D MMMM YYYY H:mm',
        LLLL : 'dddd, D MMMM YYYY H:mm'
    },
    calendar : {
        sameDay: '[azi la] LT',
        nextDay: '[mâine la] LT',
        nextWeek: 'dddd [la] LT',
        lastDay: '[ieri la] LT',
        lastWeek: '[fosta] dddd [la] LT',
        sameElse: 'L'
    },
    relativeTime : {
        future : 'peste %s',
        past : '%s în urmă',
        s : 'câteva secunde',
        m : 'un minut',
        mm : relativeTimeWithPlural,
        h : 'o oră',
        hh : relativeTimeWithPlural,
        d : 'o zi',
        dd : relativeTimeWithPlural,
        M : 'o lună',
        MM : relativeTimeWithPlural,
        y : 'un an',
        yy : relativeTimeWithPlural
    },
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 7  // The week that contains Jan 1st is the first week of the year.
    }
});

return ro;

})));


/***/ }),
/* 179 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Russian [ru]
//! author : Viktorminator : https://github.com/Viktorminator
//! Author : Menelion Elensúle : https://github.com/Oire
//! author : Коренберг Марк : https://github.com/socketpair

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


function plural(word, num) {
    var forms = word.split('_');
    return num % 10 === 1 && num % 100 !== 11 ? forms[0] : (num % 10 >= 2 && num % 10 <= 4 && (num % 100 < 10 || num % 100 >= 20) ? forms[1] : forms[2]);
}
function relativeTimeWithPlural(number, withoutSuffix, key) {
    var format = {
        'mm': withoutSuffix ? 'минута_минуты_минут' : 'минуту_минуты_минут',
        'hh': 'час_часа_часов',
        'dd': 'день_дня_дней',
        'MM': 'месяц_месяца_месяцев',
        'yy': 'год_года_лет'
    };
    if (key === 'm') {
        return withoutSuffix ? 'минута' : 'минуту';
    }
    else {
        return number + ' ' + plural(format[key], +number);
    }
}
var monthsParse = [/^янв/i, /^фев/i, /^мар/i, /^апр/i, /^ма[йя]/i, /^июн/i, /^июл/i, /^авг/i, /^сен/i, /^окт/i, /^ноя/i, /^дек/i];

// http://new.gramota.ru/spravka/rules/139-prop : § 103
// Сокращения месяцев: http://new.gramota.ru/spravka/buro/search-answer?s=242637
// CLDR data:          http://www.unicode.org/cldr/charts/28/summary/ru.html#1753
var ru = moment.defineLocale('ru', {
    months : {
        format: 'января_февраля_марта_апреля_мая_июня_июля_августа_сентября_октября_ноября_декабря'.split('_'),
        standalone: 'январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь'.split('_')
    },
    monthsShort : {
        // по CLDR именно "июл." и "июн.", но какой смысл менять букву на точку ?
        format: 'янв._февр._мар._апр._мая_июня_июля_авг._сент._окт._нояб._дек.'.split('_'),
        standalone: 'янв._февр._март_апр._май_июнь_июль_авг._сент._окт._нояб._дек.'.split('_')
    },
    weekdays : {
        standalone: 'воскресенье_понедельник_вторник_среда_четверг_пятница_суббота'.split('_'),
        format: 'воскресенье_понедельник_вторник_среду_четверг_пятницу_субботу'.split('_'),
        isFormat: /\[ ?[Вв] ?(?:прошлую|следующую|эту)? ?\] ?dddd/
    },
    weekdaysShort : 'вс_пн_вт_ср_чт_пт_сб'.split('_'),
    weekdaysMin : 'вс_пн_вт_ср_чт_пт_сб'.split('_'),
    monthsParse : monthsParse,
    longMonthsParse : monthsParse,
    shortMonthsParse : monthsParse,

    // полные названия с падежами, по три буквы, для некоторых, по 4 буквы, сокращения с точкой и без точки
    monthsRegex: /^(январ[ья]|янв\.?|феврал[ья]|февр?\.?|марта?|мар\.?|апрел[ья]|апр\.?|ма[йя]|июн[ья]|июн\.?|июл[ья]|июл\.?|августа?|авг\.?|сентябр[ья]|сент?\.?|октябр[ья]|окт\.?|ноябр[ья]|нояб?\.?|декабр[ья]|дек\.?)/i,

    // копия предыдущего
    monthsShortRegex: /^(январ[ья]|янв\.?|феврал[ья]|февр?\.?|марта?|мар\.?|апрел[ья]|апр\.?|ма[йя]|июн[ья]|июн\.?|июл[ья]|июл\.?|августа?|авг\.?|сентябр[ья]|сент?\.?|октябр[ья]|окт\.?|ноябр[ья]|нояб?\.?|декабр[ья]|дек\.?)/i,

    // полные названия с падежами
    monthsStrictRegex: /^(январ[яь]|феврал[яь]|марта?|апрел[яь]|ма[яй]|июн[яь]|июл[яь]|августа?|сентябр[яь]|октябр[яь]|ноябр[яь]|декабр[яь])/i,

    // Выражение, которое соотвествует только сокращённым формам
    monthsShortStrictRegex: /^(янв\.|февр?\.|мар[т.]|апр\.|ма[яй]|июн[ья.]|июл[ья.]|авг\.|сент?\.|окт\.|нояб?\.|дек\.)/i,
    longDateFormat : {
        LT : 'HH:mm',
        LTS : 'HH:mm:ss',
        L : 'DD.MM.YYYY',
        LL : 'D MMMM YYYY г.',
        LLL : 'D MMMM YYYY г., HH:mm',
        LLLL : 'dddd, D MMMM YYYY г., HH:mm'
    },
    calendar : {
        sameDay: '[Сегодня в] LT',
        nextDay: '[Завтра в] LT',
        lastDay: '[Вчера в] LT',
        nextWeek: function (now) {
            if (now.week() !== this.week()) {
                switch (this.day()) {
                    case 0:
                        return '[В следующее] dddd [в] LT';
                    case 1:
                    case 2:
                    case 4:
                        return '[В следующий] dddd [в] LT';
                    case 3:
                    case 5:
                    case 6:
                        return '[В следующую] dddd [в] LT';
                }
            } else {
                if (this.day() === 2) {
                    return '[Во] dddd [в] LT';
                } else {
                    return '[В] dddd [в] LT';
                }
            }
        },
        lastWeek: function (now) {
            if (now.week() !== this.week()) {
                switch (this.day()) {
                    case 0:
                        return '[В прошлое] dddd [в] LT';
                    case 1:
                    case 2:
                    case 4:
                        return '[В прошлый] dddd [в] LT';
                    case 3:
                    case 5:
                    case 6:
                        return '[В прошлую] dddd [в] LT';
                }
            } else {
                if (this.day() === 2) {
                    return '[Во] dddd [в] LT';
                } else {
                    return '[В] dddd [в] LT';
                }
            }
        },
        sameElse: 'L'
    },
    relativeTime : {
        future : 'через %s',
        past : '%s назад',
        s : 'несколько секунд',
        m : relativeTimeWithPlural,
        mm : relativeTimeWithPlural,
        h : 'час',
        hh : relativeTimeWithPlural,
        d : 'день',
        dd : relativeTimeWithPlural,
        M : 'месяц',
        MM : relativeTimeWithPlural,
        y : 'год',
        yy : relativeTimeWithPlural
    },
    meridiemParse: /ночи|утра|дня|вечера/i,
    isPM : function (input) {
        return /^(дня|вечера)$/.test(input);
    },
    meridiem : function (hour, minute, isLower) {
        if (hour < 4) {
            return 'ночи';
        } else if (hour < 12) {
            return 'утра';
        } else if (hour < 17) {
            return 'дня';
        } else {
            return 'вечера';
        }
    },
    dayOfMonthOrdinalParse: /\d{1,2}-(й|го|я)/,
    ordinal: function (number, period) {
        switch (period) {
            case 'M':
            case 'd':
            case 'DDD':
                return number + '-й';
            case 'D':
                return number + '-го';
            case 'w':
            case 'W':
                return number + '-я';
            default:
                return number;
        }
    },
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 4  // The week that contains Jan 4th is the first week of the year.
    }
});

return ru;

})));


/***/ }),
/* 180 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Sindhi [sd]
//! author : Narain Sagar : https://github.com/narainsagar

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var months = [
    'جنوري',
    'فيبروري',
    'مارچ',
    'اپريل',
    'مئي',
    'جون',
    'جولاءِ',
    'آگسٽ',
    'سيپٽمبر',
    'آڪٽوبر',
    'نومبر',
    'ڊسمبر'
];
var days = [
    'آچر',
    'سومر',
    'اڱارو',
    'اربع',
    'خميس',
    'جمع',
    'ڇنڇر'
];

var sd = moment.defineLocale('sd', {
    months : months,
    monthsShort : months,
    weekdays : days,
    weekdaysShort : days,
    weekdaysMin : days,
    longDateFormat : {
        LT : 'HH:mm',
        LTS : 'HH:mm:ss',
        L : 'DD/MM/YYYY',
        LL : 'D MMMM YYYY',
        LLL : 'D MMMM YYYY HH:mm',
        LLLL : 'dddd، D MMMM YYYY HH:mm'
    },
    meridiemParse: /صبح|شام/,
    isPM : function (input) {
        return 'شام' === input;
    },
    meridiem : function (hour, minute, isLower) {
        if (hour < 12) {
            return 'صبح';
        }
        return 'شام';
    },
    calendar : {
        sameDay : '[اڄ] LT',
        nextDay : '[سڀاڻي] LT',
        nextWeek : 'dddd [اڳين هفتي تي] LT',
        lastDay : '[ڪالهه] LT',
        lastWeek : '[گزريل هفتي] dddd [تي] LT',
        sameElse : 'L'
    },
    relativeTime : {
        future : '%s پوء',
        past : '%s اڳ',
        s : 'چند سيڪنڊ',
        m : 'هڪ منٽ',
        mm : '%d منٽ',
        h : 'هڪ ڪلاڪ',
        hh : '%d ڪلاڪ',
        d : 'هڪ ڏينهن',
        dd : '%d ڏينهن',
        M : 'هڪ مهينو',
        MM : '%d مهينا',
        y : 'هڪ سال',
        yy : '%d سال'
    },
    preparse: function (string) {
        return string.replace(/،/g, ',');
    },
    postformat: function (string) {
        return string.replace(/,/g, '،');
    },
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 4  // The week that contains Jan 4th is the first week of the year.
    }
});

return sd;

})));


/***/ }),
/* 181 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Northern Sami [se]
//! authors : Bård Rolstad Henriksen : https://github.com/karamell

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';



var se = moment.defineLocale('se', {
    months : 'ođđajagemánnu_guovvamánnu_njukčamánnu_cuoŋománnu_miessemánnu_geassemánnu_suoidnemánnu_borgemánnu_čakčamánnu_golggotmánnu_skábmamánnu_juovlamánnu'.split('_'),
    monthsShort : 'ođđj_guov_njuk_cuo_mies_geas_suoi_borg_čakč_golg_skáb_juov'.split('_'),
    weekdays : 'sotnabeaivi_vuossárga_maŋŋebárga_gaskavahkku_duorastat_bearjadat_lávvardat'.split('_'),
    weekdaysShort : 'sotn_vuos_maŋ_gask_duor_bear_láv'.split('_'),
    weekdaysMin : 's_v_m_g_d_b_L'.split('_'),
    longDateFormat : {
        LT : 'HH:mm',
        LTS : 'HH:mm:ss',
        L : 'DD.MM.YYYY',
        LL : 'MMMM D. [b.] YYYY',
        LLL : 'MMMM D. [b.] YYYY [ti.] HH:mm',
        LLLL : 'dddd, MMMM D. [b.] YYYY [ti.] HH:mm'
    },
    calendar : {
        sameDay: '[otne ti] LT',
        nextDay: '[ihttin ti] LT',
        nextWeek: 'dddd [ti] LT',
        lastDay: '[ikte ti] LT',
        lastWeek: '[ovddit] dddd [ti] LT',
        sameElse: 'L'
    },
    relativeTime : {
        future : '%s geažes',
        past : 'maŋit %s',
        s : 'moadde sekunddat',
        m : 'okta minuhta',
        mm : '%d minuhtat',
        h : 'okta diimmu',
        hh : '%d diimmut',
        d : 'okta beaivi',
        dd : '%d beaivvit',
        M : 'okta mánnu',
        MM : '%d mánut',
        y : 'okta jahki',
        yy : '%d jagit'
    },
    dayOfMonthOrdinalParse: /\d{1,2}\./,
    ordinal : '%d.',
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 4  // The week that contains Jan 4th is the first week of the year.
    }
});

return se;

})));


/***/ }),
/* 182 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Sinhalese [si]
//! author : Sampath Sitinamaluwa : https://github.com/sampathsris

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


/*jshint -W100*/
var si = moment.defineLocale('si', {
    months : 'ජනවාරි_පෙබරවාරි_මාර්තු_අප්‍රේල්_මැයි_ජූනි_ජූලි_අගෝස්තු_සැප්තැම්බර්_ඔක්තෝබර්_නොවැම්බර්_දෙසැම්බර්'.split('_'),
    monthsShort : 'ජන_පෙබ_මාර්_අප්_මැයි_ජූනි_ජූලි_අගෝ_සැප්_ඔක්_නොවැ_දෙසැ'.split('_'),
    weekdays : 'ඉරිදා_සඳුදා_අඟහරුවාදා_බදාදා_බ්‍රහස්පතින්දා_සිකුරාදා_සෙනසුරාදා'.split('_'),
    weekdaysShort : 'ඉරි_සඳු_අඟ_බදා_බ්‍රහ_සිකු_සෙන'.split('_'),
    weekdaysMin : 'ඉ_ස_අ_බ_බ්‍ර_සි_සෙ'.split('_'),
    weekdaysParseExact : true,
    longDateFormat : {
        LT : 'a h:mm',
        LTS : 'a h:mm:ss',
        L : 'YYYY/MM/DD',
        LL : 'YYYY MMMM D',
        LLL : 'YYYY MMMM D, a h:mm',
        LLLL : 'YYYY MMMM D [වැනි] dddd, a h:mm:ss'
    },
    calendar : {
        sameDay : '[අද] LT[ට]',
        nextDay : '[හෙට] LT[ට]',
        nextWeek : 'dddd LT[ට]',
        lastDay : '[ඊයේ] LT[ට]',
        lastWeek : '[පසුගිය] dddd LT[ට]',
        sameElse : 'L'
    },
    relativeTime : {
        future : '%sකින්',
        past : '%sකට පෙර',
        s : 'තත්පර කිහිපය',
        m : 'මිනිත්තුව',
        mm : 'මිනිත්තු %d',
        h : 'පැය',
        hh : 'පැය %d',
        d : 'දිනය',
        dd : 'දින %d',
        M : 'මාසය',
        MM : 'මාස %d',
        y : 'වසර',
        yy : 'වසර %d'
    },
    dayOfMonthOrdinalParse: /\d{1,2} වැනි/,
    ordinal : function (number) {
        return number + ' වැනි';
    },
    meridiemParse : /පෙර වරු|පස් වරු|පෙ.ව|ප.ව./,
    isPM : function (input) {
        return input === 'ප.ව.' || input === 'පස් වරු';
    },
    meridiem : function (hours, minutes, isLower) {
        if (hours > 11) {
            return isLower ? 'ප.ව.' : 'පස් වරු';
        } else {
            return isLower ? 'පෙ.ව.' : 'පෙර වරු';
        }
    }
});

return si;

})));


/***/ }),
/* 183 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Slovak [sk]
//! author : Martin Minka : https://github.com/k2s
//! based on work of petrbela : https://github.com/petrbela

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var months = 'január_február_marec_apríl_máj_jún_júl_august_september_október_november_december'.split('_');
var monthsShort = 'jan_feb_mar_apr_máj_jún_júl_aug_sep_okt_nov_dec'.split('_');
function plural(n) {
    return (n > 1) && (n < 5);
}
function translate(number, withoutSuffix, key, isFuture) {
    var result = number + ' ';
    switch (key) {
        case 's':  // a few seconds / in a few seconds / a few seconds ago
            return (withoutSuffix || isFuture) ? 'pár sekúnd' : 'pár sekundami';
        case 'm':  // a minute / in a minute / a minute ago
            return withoutSuffix ? 'minúta' : (isFuture ? 'minútu' : 'minútou');
        case 'mm': // 9 minutes / in 9 minutes / 9 minutes ago
            if (withoutSuffix || isFuture) {
                return result + (plural(number) ? 'minúty' : 'minút');
            } else {
                return result + 'minútami';
            }
            break;
        case 'h':  // an hour / in an hour / an hour ago
            return withoutSuffix ? 'hodina' : (isFuture ? 'hodinu' : 'hodinou');
        case 'hh': // 9 hours / in 9 hours / 9 hours ago
            if (withoutSuffix || isFuture) {
                return result + (plural(number) ? 'hodiny' : 'hodín');
            } else {
                return result + 'hodinami';
            }
            break;
        case 'd':  // a day / in a day / a day ago
            return (withoutSuffix || isFuture) ? 'deň' : 'dňom';
        case 'dd': // 9 days / in 9 days / 9 days ago
            if (withoutSuffix || isFuture) {
                return result + (plural(number) ? 'dni' : 'dní');
            } else {
                return result + 'dňami';
            }
            break;
        case 'M':  // a month / in a month / a month ago
            return (withoutSuffix || isFuture) ? 'mesiac' : 'mesiacom';
        case 'MM': // 9 months / in 9 months / 9 months ago
            if (withoutSuffix || isFuture) {
                return result + (plural(number) ? 'mesiace' : 'mesiacov');
            } else {
                return result + 'mesiacmi';
            }
            break;
        case 'y':  // a year / in a year / a year ago
            return (withoutSuffix || isFuture) ? 'rok' : 'rokom';
        case 'yy': // 9 years / in 9 years / 9 years ago
            if (withoutSuffix || isFuture) {
                return result + (plural(number) ? 'roky' : 'rokov');
            } else {
                return result + 'rokmi';
            }
            break;
    }
}

var sk = moment.defineLocale('sk', {
    months : months,
    monthsShort : monthsShort,
    weekdays : 'nedeľa_pondelok_utorok_streda_štvrtok_piatok_sobota'.split('_'),
    weekdaysShort : 'ne_po_ut_st_št_pi_so'.split('_'),
    weekdaysMin : 'ne_po_ut_st_št_pi_so'.split('_'),
    longDateFormat : {
        LT: 'H:mm',
        LTS : 'H:mm:ss',
        L : 'DD.MM.YYYY',
        LL : 'D. MMMM YYYY',
        LLL : 'D. MMMM YYYY H:mm',
        LLLL : 'dddd D. MMMM YYYY H:mm'
    },
    calendar : {
        sameDay: '[dnes o] LT',
        nextDay: '[zajtra o] LT',
        nextWeek: function () {
            switch (this.day()) {
                case 0:
                    return '[v nedeľu o] LT';
                case 1:
                case 2:
                    return '[v] dddd [o] LT';
                case 3:
                    return '[v stredu o] LT';
                case 4:
                    return '[vo štvrtok o] LT';
                case 5:
                    return '[v piatok o] LT';
                case 6:
                    return '[v sobotu o] LT';
            }
        },
        lastDay: '[včera o] LT',
        lastWeek: function () {
            switch (this.day()) {
                case 0:
                    return '[minulú nedeľu o] LT';
                case 1:
                case 2:
                    return '[minulý] dddd [o] LT';
                case 3:
                    return '[minulú stredu o] LT';
                case 4:
                case 5:
                    return '[minulý] dddd [o] LT';
                case 6:
                    return '[minulú sobotu o] LT';
            }
        },
        sameElse: 'L'
    },
    relativeTime : {
        future : 'za %s',
        past : 'pred %s',
        s : translate,
        m : translate,
        mm : translate,
        h : translate,
        hh : translate,
        d : translate,
        dd : translate,
        M : translate,
        MM : translate,
        y : translate,
        yy : translate
    },
    dayOfMonthOrdinalParse: /\d{1,2}\./,
    ordinal : '%d.',
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 4  // The week that contains Jan 4th is the first week of the year.
    }
});

return sk;

})));


/***/ }),
/* 184 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Slovenian [sl]
//! author : Robert Sedovšek : https://github.com/sedovsek

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


function processRelativeTime(number, withoutSuffix, key, isFuture) {
    var result = number + ' ';
    switch (key) {
        case 's':
            return withoutSuffix || isFuture ? 'nekaj sekund' : 'nekaj sekundami';
        case 'm':
            return withoutSuffix ? 'ena minuta' : 'eno minuto';
        case 'mm':
            if (number === 1) {
                result += withoutSuffix ? 'minuta' : 'minuto';
            } else if (number === 2) {
                result += withoutSuffix || isFuture ? 'minuti' : 'minutama';
            } else if (number < 5) {
                result += withoutSuffix || isFuture ? 'minute' : 'minutami';
            } else {
                result += withoutSuffix || isFuture ? 'minut' : 'minutami';
            }
            return result;
        case 'h':
            return withoutSuffix ? 'ena ura' : 'eno uro';
        case 'hh':
            if (number === 1) {
                result += withoutSuffix ? 'ura' : 'uro';
            } else if (number === 2) {
                result += withoutSuffix || isFuture ? 'uri' : 'urama';
            } else if (number < 5) {
                result += withoutSuffix || isFuture ? 'ure' : 'urami';
            } else {
                result += withoutSuffix || isFuture ? 'ur' : 'urami';
            }
            return result;
        case 'd':
            return withoutSuffix || isFuture ? 'en dan' : 'enim dnem';
        case 'dd':
            if (number === 1) {
                result += withoutSuffix || isFuture ? 'dan' : 'dnem';
            } else if (number === 2) {
                result += withoutSuffix || isFuture ? 'dni' : 'dnevoma';
            } else {
                result += withoutSuffix || isFuture ? 'dni' : 'dnevi';
            }
            return result;
        case 'M':
            return withoutSuffix || isFuture ? 'en mesec' : 'enim mesecem';
        case 'MM':
            if (number === 1) {
                result += withoutSuffix || isFuture ? 'mesec' : 'mesecem';
            } else if (number === 2) {
                result += withoutSuffix || isFuture ? 'meseca' : 'mesecema';
            } else if (number < 5) {
                result += withoutSuffix || isFuture ? 'mesece' : 'meseci';
            } else {
                result += withoutSuffix || isFuture ? 'mesecev' : 'meseci';
            }
            return result;
        case 'y':
            return withoutSuffix || isFuture ? 'eno leto' : 'enim letom';
        case 'yy':
            if (number === 1) {
                result += withoutSuffix || isFuture ? 'leto' : 'letom';
            } else if (number === 2) {
                result += withoutSuffix || isFuture ? 'leti' : 'letoma';
            } else if (number < 5) {
                result += withoutSuffix || isFuture ? 'leta' : 'leti';
            } else {
                result += withoutSuffix || isFuture ? 'let' : 'leti';
            }
            return result;
    }
}

var sl = moment.defineLocale('sl', {
    months : 'januar_februar_marec_april_maj_junij_julij_avgust_september_oktober_november_december'.split('_'),
    monthsShort : 'jan._feb._mar._apr._maj._jun._jul._avg._sep._okt._nov._dec.'.split('_'),
    monthsParseExact: true,
    weekdays : 'nedelja_ponedeljek_torek_sreda_četrtek_petek_sobota'.split('_'),
    weekdaysShort : 'ned._pon._tor._sre._čet._pet._sob.'.split('_'),
    weekdaysMin : 'ne_po_to_sr_če_pe_so'.split('_'),
    weekdaysParseExact : true,
    longDateFormat : {
        LT : 'H:mm',
        LTS : 'H:mm:ss',
        L : 'DD.MM.YYYY',
        LL : 'D. MMMM YYYY',
        LLL : 'D. MMMM YYYY H:mm',
        LLLL : 'dddd, D. MMMM YYYY H:mm'
    },
    calendar : {
        sameDay  : '[danes ob] LT',
        nextDay  : '[jutri ob] LT',

        nextWeek : function () {
            switch (this.day()) {
                case 0:
                    return '[v] [nedeljo] [ob] LT';
                case 3:
                    return '[v] [sredo] [ob] LT';
                case 6:
                    return '[v] [soboto] [ob] LT';
                case 1:
                case 2:
                case 4:
                case 5:
                    return '[v] dddd [ob] LT';
            }
        },
        lastDay  : '[včeraj ob] LT',
        lastWeek : function () {
            switch (this.day()) {
                case 0:
                    return '[prejšnjo] [nedeljo] [ob] LT';
                case 3:
                    return '[prejšnjo] [sredo] [ob] LT';
                case 6:
                    return '[prejšnjo] [soboto] [ob] LT';
                case 1:
                case 2:
                case 4:
                case 5:
                    return '[prejšnji] dddd [ob] LT';
            }
        },
        sameElse : 'L'
    },
    relativeTime : {
        future : 'čez %s',
        past   : 'pred %s',
        s      : processRelativeTime,
        m      : processRelativeTime,
        mm     : processRelativeTime,
        h      : processRelativeTime,
        hh     : processRelativeTime,
        d      : processRelativeTime,
        dd     : processRelativeTime,
        M      : processRelativeTime,
        MM     : processRelativeTime,
        y      : processRelativeTime,
        yy     : processRelativeTime
    },
    dayOfMonthOrdinalParse: /\d{1,2}\./,
    ordinal : '%d.',
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 7  // The week that contains Jan 1st is the first week of the year.
    }
});

return sl;

})));


/***/ }),
/* 185 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Albanian [sq]
//! author : Flakërim Ismani : https://github.com/flakerimi
//! author : Menelion Elensúle : https://github.com/Oire
//! author : Oerd Cukalla : https://github.com/oerd

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var sq = moment.defineLocale('sq', {
    months : 'Janar_Shkurt_Mars_Prill_Maj_Qershor_Korrik_Gusht_Shtator_Tetor_Nëntor_Dhjetor'.split('_'),
    monthsShort : 'Jan_Shk_Mar_Pri_Maj_Qer_Kor_Gus_Sht_Tet_Nën_Dhj'.split('_'),
    weekdays : 'E Diel_E Hënë_E Martë_E Mërkurë_E Enjte_E Premte_E Shtunë'.split('_'),
    weekdaysShort : 'Die_Hën_Mar_Mër_Enj_Pre_Sht'.split('_'),
    weekdaysMin : 'D_H_Ma_Më_E_P_Sh'.split('_'),
    weekdaysParseExact : true,
    meridiemParse: /PD|MD/,
    isPM: function (input) {
        return input.charAt(0) === 'M';
    },
    meridiem : function (hours, minutes, isLower) {
        return hours < 12 ? 'PD' : 'MD';
    },
    longDateFormat : {
        LT : 'HH:mm',
        LTS : 'HH:mm:ss',
        L : 'DD/MM/YYYY',
        LL : 'D MMMM YYYY',
        LLL : 'D MMMM YYYY HH:mm',
        LLLL : 'dddd, D MMMM YYYY HH:mm'
    },
    calendar : {
        sameDay : '[Sot në] LT',
        nextDay : '[Nesër në] LT',
        nextWeek : 'dddd [në] LT',
        lastDay : '[Dje në] LT',
        lastWeek : 'dddd [e kaluar në] LT',
        sameElse : 'L'
    },
    relativeTime : {
        future : 'në %s',
        past : '%s më parë',
        s : 'disa sekonda',
        m : 'një minutë',
        mm : '%d minuta',
        h : 'një orë',
        hh : '%d orë',
        d : 'një ditë',
        dd : '%d ditë',
        M : 'një muaj',
        MM : '%d muaj',
        y : 'një vit',
        yy : '%d vite'
    },
    dayOfMonthOrdinalParse: /\d{1,2}\./,
    ordinal : '%d.',
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 4  // The week that contains Jan 4th is the first week of the year.
    }
});

return sq;

})));


/***/ }),
/* 186 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Serbian [sr]
//! author : Milan Janačković<milanjanackovic@gmail.com> : https://github.com/milan-j

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var translator = {
    words: { //Different grammatical cases
        m: ['jedan minut', 'jedne minute'],
        mm: ['minut', 'minute', 'minuta'],
        h: ['jedan sat', 'jednog sata'],
        hh: ['sat', 'sata', 'sati'],
        dd: ['dan', 'dana', 'dana'],
        MM: ['mesec', 'meseca', 'meseci'],
        yy: ['godina', 'godine', 'godina']
    },
    correctGrammaticalCase: function (number, wordKey) {
        return number === 1 ? wordKey[0] : (number >= 2 && number <= 4 ? wordKey[1] : wordKey[2]);
    },
    translate: function (number, withoutSuffix, key) {
        var wordKey = translator.words[key];
        if (key.length === 1) {
            return withoutSuffix ? wordKey[0] : wordKey[1];
        } else {
            return number + ' ' + translator.correctGrammaticalCase(number, wordKey);
        }
    }
};

var sr = moment.defineLocale('sr', {
    months: 'januar_februar_mart_april_maj_jun_jul_avgust_septembar_oktobar_novembar_decembar'.split('_'),
    monthsShort: 'jan._feb._mar._apr._maj_jun_jul_avg._sep._okt._nov._dec.'.split('_'),
    monthsParseExact: true,
    weekdays: 'nedelja_ponedeljak_utorak_sreda_četvrtak_petak_subota'.split('_'),
    weekdaysShort: 'ned._pon._uto._sre._čet._pet._sub.'.split('_'),
    weekdaysMin: 'ne_po_ut_sr_če_pe_su'.split('_'),
    weekdaysParseExact : true,
    longDateFormat: {
        LT: 'H:mm',
        LTS : 'H:mm:ss',
        L: 'DD.MM.YYYY',
        LL: 'D. MMMM YYYY',
        LLL: 'D. MMMM YYYY H:mm',
        LLLL: 'dddd, D. MMMM YYYY H:mm'
    },
    calendar: {
        sameDay: '[danas u] LT',
        nextDay: '[sutra u] LT',
        nextWeek: function () {
            switch (this.day()) {
                case 0:
                    return '[u] [nedelju] [u] LT';
                case 3:
                    return '[u] [sredu] [u] LT';
                case 6:
                    return '[u] [subotu] [u] LT';
                case 1:
                case 2:
                case 4:
                case 5:
                    return '[u] dddd [u] LT';
            }
        },
        lastDay  : '[juče u] LT',
        lastWeek : function () {
            var lastWeekDays = [
                '[prošle] [nedelje] [u] LT',
                '[prošlog] [ponedeljka] [u] LT',
                '[prošlog] [utorka] [u] LT',
                '[prošle] [srede] [u] LT',
                '[prošlog] [četvrtka] [u] LT',
                '[prošlog] [petka] [u] LT',
                '[prošle] [subote] [u] LT'
            ];
            return lastWeekDays[this.day()];
        },
        sameElse : 'L'
    },
    relativeTime : {
        future : 'za %s',
        past   : 'pre %s',
        s      : 'nekoliko sekundi',
        m      : translator.translate,
        mm     : translator.translate,
        h      : translator.translate,
        hh     : translator.translate,
        d      : 'dan',
        dd     : translator.translate,
        M      : 'mesec',
        MM     : translator.translate,
        y      : 'godinu',
        yy     : translator.translate
    },
    dayOfMonthOrdinalParse: /\d{1,2}\./,
    ordinal : '%d.',
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 7  // The week that contains Jan 1st is the first week of the year.
    }
});

return sr;

})));


/***/ }),
/* 187 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Serbian Cyrillic [sr-cyrl]
//! author : Milan Janačković<milanjanackovic@gmail.com> : https://github.com/milan-j

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var translator = {
    words: { //Different grammatical cases
        m: ['један минут', 'једне минуте'],
        mm: ['минут', 'минуте', 'минута'],
        h: ['један сат', 'једног сата'],
        hh: ['сат', 'сата', 'сати'],
        dd: ['дан', 'дана', 'дана'],
        MM: ['месец', 'месеца', 'месеци'],
        yy: ['година', 'године', 'година']
    },
    correctGrammaticalCase: function (number, wordKey) {
        return number === 1 ? wordKey[0] : (number >= 2 && number <= 4 ? wordKey[1] : wordKey[2]);
    },
    translate: function (number, withoutSuffix, key) {
        var wordKey = translator.words[key];
        if (key.length === 1) {
            return withoutSuffix ? wordKey[0] : wordKey[1];
        } else {
            return number + ' ' + translator.correctGrammaticalCase(number, wordKey);
        }
    }
};

var srCyrl = moment.defineLocale('sr-cyrl', {
    months: 'јануар_фебруар_март_април_мај_јун_јул_август_септембар_октобар_новембар_децембар'.split('_'),
    monthsShort: 'јан._феб._мар._апр._мај_јун_јул_авг._сеп._окт._нов._дец.'.split('_'),
    monthsParseExact: true,
    weekdays: 'недеља_понедељак_уторак_среда_четвртак_петак_субота'.split('_'),
    weekdaysShort: 'нед._пон._уто._сре._чет._пет._суб.'.split('_'),
    weekdaysMin: 'не_по_ут_ср_че_пе_су'.split('_'),
    weekdaysParseExact : true,
    longDateFormat: {
        LT: 'H:mm',
        LTS : 'H:mm:ss',
        L: 'DD.MM.YYYY',
        LL: 'D. MMMM YYYY',
        LLL: 'D. MMMM YYYY H:mm',
        LLLL: 'dddd, D. MMMM YYYY H:mm'
    },
    calendar: {
        sameDay: '[данас у] LT',
        nextDay: '[сутра у] LT',
        nextWeek: function () {
            switch (this.day()) {
                case 0:
                    return '[у] [недељу] [у] LT';
                case 3:
                    return '[у] [среду] [у] LT';
                case 6:
                    return '[у] [суботу] [у] LT';
                case 1:
                case 2:
                case 4:
                case 5:
                    return '[у] dddd [у] LT';
            }
        },
        lastDay  : '[јуче у] LT',
        lastWeek : function () {
            var lastWeekDays = [
                '[прошле] [недеље] [у] LT',
                '[прошлог] [понедељка] [у] LT',
                '[прошлог] [уторка] [у] LT',
                '[прошле] [среде] [у] LT',
                '[прошлог] [четвртка] [у] LT',
                '[прошлог] [петка] [у] LT',
                '[прошле] [суботе] [у] LT'
            ];
            return lastWeekDays[this.day()];
        },
        sameElse : 'L'
    },
    relativeTime : {
        future : 'за %s',
        past   : 'пре %s',
        s      : 'неколико секунди',
        m      : translator.translate,
        mm     : translator.translate,
        h      : translator.translate,
        hh     : translator.translate,
        d      : 'дан',
        dd     : translator.translate,
        M      : 'месец',
        MM     : translator.translate,
        y      : 'годину',
        yy     : translator.translate
    },
    dayOfMonthOrdinalParse: /\d{1,2}\./,
    ordinal : '%d.',
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 7  // The week that contains Jan 1st is the first week of the year.
    }
});

return srCyrl;

})));


/***/ }),
/* 188 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : siSwati [ss]
//! author : Nicolai Davies<mail@nicolai.io> : https://github.com/nicolaidavies

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';



var ss = moment.defineLocale('ss', {
    months : "Bhimbidvwane_Indlovana_Indlov'lenkhulu_Mabasa_Inkhwekhweti_Inhlaba_Kholwane_Ingci_Inyoni_Imphala_Lweti_Ingongoni".split('_'),
    monthsShort : 'Bhi_Ina_Inu_Mab_Ink_Inh_Kho_Igc_Iny_Imp_Lwe_Igo'.split('_'),
    weekdays : 'Lisontfo_Umsombuluko_Lesibili_Lesitsatfu_Lesine_Lesihlanu_Umgcibelo'.split('_'),
    weekdaysShort : 'Lis_Umb_Lsb_Les_Lsi_Lsh_Umg'.split('_'),
    weekdaysMin : 'Li_Us_Lb_Lt_Ls_Lh_Ug'.split('_'),
    weekdaysParseExact : true,
    longDateFormat : {
        LT : 'h:mm A',
        LTS : 'h:mm:ss A',
        L : 'DD/MM/YYYY',
        LL : 'D MMMM YYYY',
        LLL : 'D MMMM YYYY h:mm A',
        LLLL : 'dddd, D MMMM YYYY h:mm A'
    },
    calendar : {
        sameDay : '[Namuhla nga] LT',
        nextDay : '[Kusasa nga] LT',
        nextWeek : 'dddd [nga] LT',
        lastDay : '[Itolo nga] LT',
        lastWeek : 'dddd [leliphelile] [nga] LT',
        sameElse : 'L'
    },
    relativeTime : {
        future : 'nga %s',
        past : 'wenteka nga %s',
        s : 'emizuzwana lomcane',
        m : 'umzuzu',
        mm : '%d emizuzu',
        h : 'lihora',
        hh : '%d emahora',
        d : 'lilanga',
        dd : '%d emalanga',
        M : 'inyanga',
        MM : '%d tinyanga',
        y : 'umnyaka',
        yy : '%d iminyaka'
    },
    meridiemParse: /ekuseni|emini|entsambama|ebusuku/,
    meridiem : function (hours, minutes, isLower) {
        if (hours < 11) {
            return 'ekuseni';
        } else if (hours < 15) {
            return 'emini';
        } else if (hours < 19) {
            return 'entsambama';
        } else {
            return 'ebusuku';
        }
    },
    meridiemHour : function (hour, meridiem) {
        if (hour === 12) {
            hour = 0;
        }
        if (meridiem === 'ekuseni') {
            return hour;
        } else if (meridiem === 'emini') {
            return hour >= 11 ? hour : hour + 12;
        } else if (meridiem === 'entsambama' || meridiem === 'ebusuku') {
            if (hour === 0) {
                return 0;
            }
            return hour + 12;
        }
    },
    dayOfMonthOrdinalParse: /\d{1,2}/,
    ordinal : '%d',
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 4  // The week that contains Jan 4th is the first week of the year.
    }
});

return ss;

})));


/***/ }),
/* 189 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Swedish [sv]
//! author : Jens Alm : https://github.com/ulmus

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var sv = moment.defineLocale('sv', {
    months : 'januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december'.split('_'),
    monthsShort : 'jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec'.split('_'),
    weekdays : 'söndag_måndag_tisdag_onsdag_torsdag_fredag_lördag'.split('_'),
    weekdaysShort : 'sön_mån_tis_ons_tor_fre_lör'.split('_'),
    weekdaysMin : 'sö_må_ti_on_to_fr_lö'.split('_'),
    longDateFormat : {
        LT : 'HH:mm',
        LTS : 'HH:mm:ss',
        L : 'YYYY-MM-DD',
        LL : 'D MMMM YYYY',
        LLL : 'D MMMM YYYY [kl.] HH:mm',
        LLLL : 'dddd D MMMM YYYY [kl.] HH:mm',
        lll : 'D MMM YYYY HH:mm',
        llll : 'ddd D MMM YYYY HH:mm'
    },
    calendar : {
        sameDay: '[Idag] LT',
        nextDay: '[Imorgon] LT',
        lastDay: '[Igår] LT',
        nextWeek: '[På] dddd LT',
        lastWeek: '[I] dddd[s] LT',
        sameElse: 'L'
    },
    relativeTime : {
        future : 'om %s',
        past : 'för %s sedan',
        s : 'några sekunder',
        m : 'en minut',
        mm : '%d minuter',
        h : 'en timme',
        hh : '%d timmar',
        d : 'en dag',
        dd : '%d dagar',
        M : 'en månad',
        MM : '%d månader',
        y : 'ett år',
        yy : '%d år'
    },
    dayOfMonthOrdinalParse: /\d{1,2}(e|a)/,
    ordinal : function (number) {
        var b = number % 10,
            output = (~~(number % 100 / 10) === 1) ? 'e' :
            (b === 1) ? 'a' :
            (b === 2) ? 'a' :
            (b === 3) ? 'e' : 'e';
        return number + output;
    },
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 4  // The week that contains Jan 4th is the first week of the year.
    }
});

return sv;

})));


/***/ }),
/* 190 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Swahili [sw]
//! author : Fahad Kassim : https://github.com/fadsel

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var sw = moment.defineLocale('sw', {
    months : 'Januari_Februari_Machi_Aprili_Mei_Juni_Julai_Agosti_Septemba_Oktoba_Novemba_Desemba'.split('_'),
    monthsShort : 'Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ago_Sep_Okt_Nov_Des'.split('_'),
    weekdays : 'Jumapili_Jumatatu_Jumanne_Jumatano_Alhamisi_Ijumaa_Jumamosi'.split('_'),
    weekdaysShort : 'Jpl_Jtat_Jnne_Jtan_Alh_Ijm_Jmos'.split('_'),
    weekdaysMin : 'J2_J3_J4_J5_Al_Ij_J1'.split('_'),
    weekdaysParseExact : true,
    longDateFormat : {
        LT : 'HH:mm',
        LTS : 'HH:mm:ss',
        L : 'DD.MM.YYYY',
        LL : 'D MMMM YYYY',
        LLL : 'D MMMM YYYY HH:mm',
        LLLL : 'dddd, D MMMM YYYY HH:mm'
    },
    calendar : {
        sameDay : '[leo saa] LT',
        nextDay : '[kesho saa] LT',
        nextWeek : '[wiki ijayo] dddd [saat] LT',
        lastDay : '[jana] LT',
        lastWeek : '[wiki iliyopita] dddd [saat] LT',
        sameElse : 'L'
    },
    relativeTime : {
        future : '%s baadaye',
        past : 'tokea %s',
        s : 'hivi punde',
        m : 'dakika moja',
        mm : 'dakika %d',
        h : 'saa limoja',
        hh : 'masaa %d',
        d : 'siku moja',
        dd : 'masiku %d',
        M : 'mwezi mmoja',
        MM : 'miezi %d',
        y : 'mwaka mmoja',
        yy : 'miaka %d'
    },
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 7  // The week that contains Jan 1st is the first week of the year.
    }
});

return sw;

})));


/***/ }),
/* 191 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Tamil [ta]
//! author : Arjunkumar Krishnamoorthy : https://github.com/tk120404

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var symbolMap = {
    '1': '௧',
    '2': '௨',
    '3': '௩',
    '4': '௪',
    '5': '௫',
    '6': '௬',
    '7': '௭',
    '8': '௮',
    '9': '௯',
    '0': '௦'
};
var numberMap = {
    '௧': '1',
    '௨': '2',
    '௩': '3',
    '௪': '4',
    '௫': '5',
    '௬': '6',
    '௭': '7',
    '௮': '8',
    '௯': '9',
    '௦': '0'
};

var ta = moment.defineLocale('ta', {
    months : 'ஜனவரி_பிப்ரவரி_மார்ச்_ஏப்ரல்_மே_ஜூன்_ஜூலை_ஆகஸ்ட்_செப்டெம்பர்_அக்டோபர்_நவம்பர்_டிசம்பர்'.split('_'),
    monthsShort : 'ஜனவரி_பிப்ரவரி_மார்ச்_ஏப்ரல்_மே_ஜூன்_ஜூலை_ஆகஸ்ட்_செப்டெம்பர்_அக்டோபர்_நவம்பர்_டிசம்பர்'.split('_'),
    weekdays : 'ஞாயிற்றுக்கிழமை_திங்கட்கிழமை_செவ்வாய்கிழமை_புதன்கிழமை_வியாழக்கிழமை_வெள்ளிக்கிழமை_சனிக்கிழமை'.split('_'),
    weekdaysShort : 'ஞாயிறு_திங்கள்_செவ்வாய்_புதன்_வியாழன்_வெள்ளி_சனி'.split('_'),
    weekdaysMin : 'ஞா_தி_செ_பு_வி_வெ_ச'.split('_'),
    longDateFormat : {
        LT : 'HH:mm',
        LTS : 'HH:mm:ss',
        L : 'DD/MM/YYYY',
        LL : 'D MMMM YYYY',
        LLL : 'D MMMM YYYY, HH:mm',
        LLLL : 'dddd, D MMMM YYYY, HH:mm'
    },
    calendar : {
        sameDay : '[இன்று] LT',
        nextDay : '[நாளை] LT',
        nextWeek : 'dddd, LT',
        lastDay : '[நேற்று] LT',
        lastWeek : '[கடந்த வாரம்] dddd, LT',
        sameElse : 'L'
    },
    relativeTime : {
        future : '%s இல்',
        past : '%s முன்',
        s : 'ஒரு சில விநாடிகள்',
        m : 'ஒரு நிமிடம்',
        mm : '%d நிமிடங்கள்',
        h : 'ஒரு மணி நேரம்',
        hh : '%d மணி நேரம்',
        d : 'ஒரு நாள்',
        dd : '%d நாட்கள்',
        M : 'ஒரு மாதம்',
        MM : '%d மாதங்கள்',
        y : 'ஒரு வருடம்',
        yy : '%d ஆண்டுகள்'
    },
    dayOfMonthOrdinalParse: /\d{1,2}வது/,
    ordinal : function (number) {
        return number + 'வது';
    },
    preparse: function (string) {
        return string.replace(/[௧௨௩௪௫௬௭௮௯௦]/g, function (match) {
            return numberMap[match];
        });
    },
    postformat: function (string) {
        return string.replace(/\d/g, function (match) {
            return symbolMap[match];
        });
    },
    // refer http://ta.wikipedia.org/s/1er1
    meridiemParse: /யாமம்|வைகறை|காலை|நண்பகல்|எற்பாடு|மாலை/,
    meridiem : function (hour, minute, isLower) {
        if (hour < 2) {
            return ' யாமம்';
        } else if (hour < 6) {
            return ' வைகறை';  // வைகறை
        } else if (hour < 10) {
            return ' காலை'; // காலை
        } else if (hour < 14) {
            return ' நண்பகல்'; // நண்பகல்
        } else if (hour < 18) {
            return ' எற்பாடு'; // எற்பாடு
        } else if (hour < 22) {
            return ' மாலை'; // மாலை
        } else {
            return ' யாமம்';
        }
    },
    meridiemHour : function (hour, meridiem) {
        if (hour === 12) {
            hour = 0;
        }
        if (meridiem === 'யாமம்') {
            return hour < 2 ? hour : hour + 12;
        } else if (meridiem === 'வைகறை' || meridiem === 'காலை') {
            return hour;
        } else if (meridiem === 'நண்பகல்') {
            return hour >= 10 ? hour : hour + 12;
        } else {
            return hour + 12;
        }
    },
    week : {
        dow : 0, // Sunday is the first day of the week.
        doy : 6  // The week that contains Jan 1st is the first week of the year.
    }
});

return ta;

})));


/***/ }),
/* 192 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Telugu [te]
//! author : Krishna Chaitanya Thota : https://github.com/kcthota

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var te = moment.defineLocale('te', {
    months : 'జనవరి_ఫిబ్రవరి_మార్చి_ఏప్రిల్_మే_జూన్_జూలై_ఆగస్టు_సెప్టెంబర్_అక్టోబర్_నవంబర్_డిసెంబర్'.split('_'),
    monthsShort : 'జన._ఫిబ్ర._మార్చి_ఏప్రి._మే_జూన్_జూలై_ఆగ._సెప్._అక్టో._నవ._డిసె.'.split('_'),
    monthsParseExact : true,
    weekdays : 'ఆదివారం_సోమవారం_మంగళవారం_బుధవారం_గురువారం_శుక్రవారం_శనివారం'.split('_'),
    weekdaysShort : 'ఆది_సోమ_మంగళ_బుధ_గురు_శుక్ర_శని'.split('_'),
    weekdaysMin : 'ఆ_సో_మం_బు_గు_శు_శ'.split('_'),
    longDateFormat : {
        LT : 'A h:mm',
        LTS : 'A h:mm:ss',
        L : 'DD/MM/YYYY',
        LL : 'D MMMM YYYY',
        LLL : 'D MMMM YYYY, A h:mm',
        LLLL : 'dddd, D MMMM YYYY, A h:mm'
    },
    calendar : {
        sameDay : '[నేడు] LT',
        nextDay : '[రేపు] LT',
        nextWeek : 'dddd, LT',
        lastDay : '[నిన్న] LT',
        lastWeek : '[గత] dddd, LT',
        sameElse : 'L'
    },
    relativeTime : {
        future : '%s లో',
        past : '%s క్రితం',
        s : 'కొన్ని క్షణాలు',
        m : 'ఒక నిమిషం',
        mm : '%d నిమిషాలు',
        h : 'ఒక గంట',
        hh : '%d గంటలు',
        d : 'ఒక రోజు',
        dd : '%d రోజులు',
        M : 'ఒక నెల',
        MM : '%d నెలలు',
        y : 'ఒక సంవత్సరం',
        yy : '%d సంవత్సరాలు'
    },
    dayOfMonthOrdinalParse : /\d{1,2}వ/,
    ordinal : '%dవ',
    meridiemParse: /రాత్రి|ఉదయం|మధ్యాహ్నం|సాయంత్రం/,
    meridiemHour : function (hour, meridiem) {
        if (hour === 12) {
            hour = 0;
        }
        if (meridiem === 'రాత్రి') {
            return hour < 4 ? hour : hour + 12;
        } else if (meridiem === 'ఉదయం') {
            return hour;
        } else if (meridiem === 'మధ్యాహ్నం') {
            return hour >= 10 ? hour : hour + 12;
        } else if (meridiem === 'సాయంత్రం') {
            return hour + 12;
        }
    },
    meridiem : function (hour, minute, isLower) {
        if (hour < 4) {
            return 'రాత్రి';
        } else if (hour < 10) {
            return 'ఉదయం';
        } else if (hour < 17) {
            return 'మధ్యాహ్నం';
        } else if (hour < 20) {
            return 'సాయంత్రం';
        } else {
            return 'రాత్రి';
        }
    },
    week : {
        dow : 0, // Sunday is the first day of the week.
        doy : 6  // The week that contains Jan 1st is the first week of the year.
    }
});

return te;

})));


/***/ }),
/* 193 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Tetun Dili (East Timor) [tet]
//! author : Joshua Brooks : https://github.com/joshbrooks
//! author : Onorio De J. Afonso : https://github.com/marobo

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var tet = moment.defineLocale('tet', {
    months : 'Janeiru_Fevereiru_Marsu_Abril_Maiu_Juniu_Juliu_Augustu_Setembru_Outubru_Novembru_Dezembru'.split('_'),
    monthsShort : 'Jan_Fev_Mar_Abr_Mai_Jun_Jul_Aug_Set_Out_Nov_Dez'.split('_'),
    weekdays : 'Domingu_Segunda_Tersa_Kuarta_Kinta_Sexta_Sabadu'.split('_'),
    weekdaysShort : 'Dom_Seg_Ters_Kua_Kint_Sext_Sab'.split('_'),
    weekdaysMin : 'Do_Seg_Te_Ku_Ki_Sex_Sa'.split('_'),
    longDateFormat : {
        LT : 'HH:mm',
        LTS : 'HH:mm:ss',
        L : 'DD/MM/YYYY',
        LL : 'D MMMM YYYY',
        LLL : 'D MMMM YYYY HH:mm',
        LLLL : 'dddd, D MMMM YYYY HH:mm'
    },
    calendar : {
        sameDay: '[Ohin iha] LT',
        nextDay: '[Aban iha] LT',
        nextWeek: 'dddd [iha] LT',
        lastDay: '[Horiseik iha] LT',
        lastWeek: 'dddd [semana kotuk] [iha] LT',
        sameElse: 'L'
    },
    relativeTime : {
        future : 'iha %s',
        past : '%s liuba',
        s : 'minutu balun',
        m : 'minutu ida',
        mm : 'minutus %d',
        h : 'horas ida',
        hh : 'horas %d',
        d : 'loron ida',
        dd : 'loron %d',
        M : 'fulan ida',
        MM : 'fulan %d',
        y : 'tinan ida',
        yy : 'tinan %d'
    },
    dayOfMonthOrdinalParse: /\d{1,2}(st|nd|rd|th)/,
    ordinal : function (number) {
        var b = number % 10,
            output = (~~(number % 100 / 10) === 1) ? 'th' :
            (b === 1) ? 'st' :
            (b === 2) ? 'nd' :
            (b === 3) ? 'rd' : 'th';
        return number + output;
    },
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 4  // The week that contains Jan 4th is the first week of the year.
    }
});

return tet;

})));


/***/ }),
/* 194 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Thai [th]
//! author : Kridsada Thanabulpong : https://github.com/sirn

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var th = moment.defineLocale('th', {
    months : 'มกราคม_กุมภาพันธ์_มีนาคม_เมษายน_พฤษภาคม_มิถุนายน_กรกฎาคม_สิงหาคม_กันยายน_ตุลาคม_พฤศจิกายน_ธันวาคม'.split('_'),
    monthsShort : 'ม.ค._ก.พ._มี.ค._เม.ย._พ.ค._มิ.ย._ก.ค._ส.ค._ก.ย._ต.ค._พ.ย._ธ.ค.'.split('_'),
    monthsParseExact: true,
    weekdays : 'อาทิตย์_จันทร์_อังคาร_พุธ_พฤหัสบดี_ศุกร์_เสาร์'.split('_'),
    weekdaysShort : 'อาทิตย์_จันทร์_อังคาร_พุธ_พฤหัส_ศุกร์_เสาร์'.split('_'), // yes, three characters difference
    weekdaysMin : 'อา._จ._อ._พ._พฤ._ศ._ส.'.split('_'),
    weekdaysParseExact : true,
    longDateFormat : {
        LT : 'H:mm',
        LTS : 'H:mm:ss',
        L : 'DD/MM/YYYY',
        LL : 'D MMMM YYYY',
        LLL : 'D MMMM YYYY เวลา H:mm',
        LLLL : 'วันddddที่ D MMMM YYYY เวลา H:mm'
    },
    meridiemParse: /ก่อนเที่ยง|หลังเที่ยง/,
    isPM: function (input) {
        return input === 'หลังเที่ยง';
    },
    meridiem : function (hour, minute, isLower) {
        if (hour < 12) {
            return 'ก่อนเที่ยง';
        } else {
            return 'หลังเที่ยง';
        }
    },
    calendar : {
        sameDay : '[วันนี้ เวลา] LT',
        nextDay : '[พรุ่งนี้ เวลา] LT',
        nextWeek : 'dddd[หน้า เวลา] LT',
        lastDay : '[เมื่อวานนี้ เวลา] LT',
        lastWeek : '[วัน]dddd[ที่แล้ว เวลา] LT',
        sameElse : 'L'
    },
    relativeTime : {
        future : 'อีก %s',
        past : '%sที่แล้ว',
        s : 'ไม่กี่วินาที',
        m : '1 นาที',
        mm : '%d นาที',
        h : '1 ชั่วโมง',
        hh : '%d ชั่วโมง',
        d : '1 วัน',
        dd : '%d วัน',
        M : '1 เดือน',
        MM : '%d เดือน',
        y : '1 ปี',
        yy : '%d ปี'
    }
});

return th;

})));


/***/ }),
/* 195 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Tagalog (Philippines) [tl-ph]
//! author : Dan Hagman : https://github.com/hagmandan

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var tlPh = moment.defineLocale('tl-ph', {
    months : 'Enero_Pebrero_Marso_Abril_Mayo_Hunyo_Hulyo_Agosto_Setyembre_Oktubre_Nobyembre_Disyembre'.split('_'),
    monthsShort : 'Ene_Peb_Mar_Abr_May_Hun_Hul_Ago_Set_Okt_Nob_Dis'.split('_'),
    weekdays : 'Linggo_Lunes_Martes_Miyerkules_Huwebes_Biyernes_Sabado'.split('_'),
    weekdaysShort : 'Lin_Lun_Mar_Miy_Huw_Biy_Sab'.split('_'),
    weekdaysMin : 'Li_Lu_Ma_Mi_Hu_Bi_Sab'.split('_'),
    longDateFormat : {
        LT : 'HH:mm',
        LTS : 'HH:mm:ss',
        L : 'MM/D/YYYY',
        LL : 'MMMM D, YYYY',
        LLL : 'MMMM D, YYYY HH:mm',
        LLLL : 'dddd, MMMM DD, YYYY HH:mm'
    },
    calendar : {
        sameDay: 'LT [ngayong araw]',
        nextDay: '[Bukas ng] LT',
        nextWeek: 'LT [sa susunod na] dddd',
        lastDay: 'LT [kahapon]',
        lastWeek: 'LT [noong nakaraang] dddd',
        sameElse: 'L'
    },
    relativeTime : {
        future : 'sa loob ng %s',
        past : '%s ang nakalipas',
        s : 'ilang segundo',
        m : 'isang minuto',
        mm : '%d minuto',
        h : 'isang oras',
        hh : '%d oras',
        d : 'isang araw',
        dd : '%d araw',
        M : 'isang buwan',
        MM : '%d buwan',
        y : 'isang taon',
        yy : '%d taon'
    },
    dayOfMonthOrdinalParse: /\d{1,2}/,
    ordinal : function (number) {
        return number;
    },
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 4  // The week that contains Jan 4th is the first week of the year.
    }
});

return tlPh;

})));


/***/ }),
/* 196 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Klingon [tlh]
//! author : Dominika Kruk : https://github.com/amaranthrose

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var numbersNouns = 'pagh_wa’_cha’_wej_loS_vagh_jav_Soch_chorgh_Hut'.split('_');

function translateFuture(output) {
    var time = output;
    time = (output.indexOf('jaj') !== -1) ?
    time.slice(0, -3) + 'leS' :
    (output.indexOf('jar') !== -1) ?
    time.slice(0, -3) + 'waQ' :
    (output.indexOf('DIS') !== -1) ?
    time.slice(0, -3) + 'nem' :
    time + ' pIq';
    return time;
}

function translatePast(output) {
    var time = output;
    time = (output.indexOf('jaj') !== -1) ?
    time.slice(0, -3) + 'Hu’' :
    (output.indexOf('jar') !== -1) ?
    time.slice(0, -3) + 'wen' :
    (output.indexOf('DIS') !== -1) ?
    time.slice(0, -3) + 'ben' :
    time + ' ret';
    return time;
}

function translate(number, withoutSuffix, string, isFuture) {
    var numberNoun = numberAsNoun(number);
    switch (string) {
        case 'mm':
            return numberNoun + ' tup';
        case 'hh':
            return numberNoun + ' rep';
        case 'dd':
            return numberNoun + ' jaj';
        case 'MM':
            return numberNoun + ' jar';
        case 'yy':
            return numberNoun + ' DIS';
    }
}

function numberAsNoun(number) {
    var hundred = Math.floor((number % 1000) / 100),
    ten = Math.floor((number % 100) / 10),
    one = number % 10,
    word = '';
    if (hundred > 0) {
        word += numbersNouns[hundred] + 'vatlh';
    }
    if (ten > 0) {
        word += ((word !== '') ? ' ' : '') + numbersNouns[ten] + 'maH';
    }
    if (one > 0) {
        word += ((word !== '') ? ' ' : '') + numbersNouns[one];
    }
    return (word === '') ? 'pagh' : word;
}

var tlh = moment.defineLocale('tlh', {
    months : 'tera’ jar wa’_tera’ jar cha’_tera’ jar wej_tera’ jar loS_tera’ jar vagh_tera’ jar jav_tera’ jar Soch_tera’ jar chorgh_tera’ jar Hut_tera’ jar wa’maH_tera’ jar wa’maH wa’_tera’ jar wa’maH cha’'.split('_'),
    monthsShort : 'jar wa’_jar cha’_jar wej_jar loS_jar vagh_jar jav_jar Soch_jar chorgh_jar Hut_jar wa’maH_jar wa’maH wa’_jar wa’maH cha’'.split('_'),
    monthsParseExact : true,
    weekdays : 'lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj'.split('_'),
    weekdaysShort : 'lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj'.split('_'),
    weekdaysMin : 'lojmItjaj_DaSjaj_povjaj_ghItlhjaj_loghjaj_buqjaj_ghInjaj'.split('_'),
    longDateFormat : {
        LT : 'HH:mm',
        LTS : 'HH:mm:ss',
        L : 'DD.MM.YYYY',
        LL : 'D MMMM YYYY',
        LLL : 'D MMMM YYYY HH:mm',
        LLLL : 'dddd, D MMMM YYYY HH:mm'
    },
    calendar : {
        sameDay: '[DaHjaj] LT',
        nextDay: '[wa’leS] LT',
        nextWeek: 'LLL',
        lastDay: '[wa’Hu’] LT',
        lastWeek: 'LLL',
        sameElse: 'L'
    },
    relativeTime : {
        future : translateFuture,
        past : translatePast,
        s : 'puS lup',
        m : 'wa’ tup',
        mm : translate,
        h : 'wa’ rep',
        hh : translate,
        d : 'wa’ jaj',
        dd : translate,
        M : 'wa’ jar',
        MM : translate,
        y : 'wa’ DIS',
        yy : translate
    },
    dayOfMonthOrdinalParse: /\d{1,2}\./,
    ordinal : '%d.',
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 4  // The week that contains Jan 4th is the first week of the year.
    }
});

return tlh;

})));


/***/ }),
/* 197 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Turkish [tr]
//! authors : Erhan Gundogan : https://github.com/erhangundogan,
//!           Burak Yiğit Kaya: https://github.com/BYK

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var suffixes = {
    1: '\'inci',
    5: '\'inci',
    8: '\'inci',
    70: '\'inci',
    80: '\'inci',
    2: '\'nci',
    7: '\'nci',
    20: '\'nci',
    50: '\'nci',
    3: '\'üncü',
    4: '\'üncü',
    100: '\'üncü',
    6: '\'ncı',
    9: '\'uncu',
    10: '\'uncu',
    30: '\'uncu',
    60: '\'ıncı',
    90: '\'ıncı'
};

var tr = moment.defineLocale('tr', {
    months : 'Ocak_Şubat_Mart_Nisan_Mayıs_Haziran_Temmuz_Ağustos_Eylül_Ekim_Kasım_Aralık'.split('_'),
    monthsShort : 'Oca_Şub_Mar_Nis_May_Haz_Tem_Ağu_Eyl_Eki_Kas_Ara'.split('_'),
    weekdays : 'Pazar_Pazartesi_Salı_Çarşamba_Perşembe_Cuma_Cumartesi'.split('_'),
    weekdaysShort : 'Paz_Pts_Sal_Çar_Per_Cum_Cts'.split('_'),
    weekdaysMin : 'Pz_Pt_Sa_Ça_Pe_Cu_Ct'.split('_'),
    longDateFormat : {
        LT : 'HH:mm',
        LTS : 'HH:mm:ss',
        L : 'DD.MM.YYYY',
        LL : 'D MMMM YYYY',
        LLL : 'D MMMM YYYY HH:mm',
        LLLL : 'dddd, D MMMM YYYY HH:mm'
    },
    calendar : {
        sameDay : '[bugün saat] LT',
        nextDay : '[yarın saat] LT',
        nextWeek : '[gelecek] dddd [saat] LT',
        lastDay : '[dün] LT',
        lastWeek : '[geçen] dddd [saat] LT',
        sameElse : 'L'
    },
    relativeTime : {
        future : '%s sonra',
        past : '%s önce',
        s : 'birkaç saniye',
        m : 'bir dakika',
        mm : '%d dakika',
        h : 'bir saat',
        hh : '%d saat',
        d : 'bir gün',
        dd : '%d gün',
        M : 'bir ay',
        MM : '%d ay',
        y : 'bir yıl',
        yy : '%d yıl'
    },
    dayOfMonthOrdinalParse: /\d{1,2}'(inci|nci|üncü|ncı|uncu|ıncı)/,
    ordinal : function (number) {
        if (number === 0) {  // special case for zero
            return number + '\'ıncı';
        }
        var a = number % 10,
            b = number % 100 - a,
            c = number >= 100 ? 100 : null;
        return number + (suffixes[a] || suffixes[b] || suffixes[c]);
    },
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 7  // The week that contains Jan 1st is the first week of the year.
    }
});

return tr;

})));


/***/ }),
/* 198 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Talossan [tzl]
//! author : Robin van der Vliet : https://github.com/robin0van0der0v
//! author : Iustì Canun

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


// After the year there should be a slash and the amount of years since December 26, 1979 in Roman numerals.
// This is currently too difficult (maybe even impossible) to add.
var tzl = moment.defineLocale('tzl', {
    months : 'Januar_Fevraglh_Març_Avrïu_Mai_Gün_Julia_Guscht_Setemvar_Listopäts_Noemvar_Zecemvar'.split('_'),
    monthsShort : 'Jan_Fev_Mar_Avr_Mai_Gün_Jul_Gus_Set_Lis_Noe_Zec'.split('_'),
    weekdays : 'Súladi_Lúneçi_Maitzi_Márcuri_Xhúadi_Viénerçi_Sáturi'.split('_'),
    weekdaysShort : 'Súl_Lún_Mai_Már_Xhú_Vié_Sát'.split('_'),
    weekdaysMin : 'Sú_Lú_Ma_Má_Xh_Vi_Sá'.split('_'),
    longDateFormat : {
        LT : 'HH.mm',
        LTS : 'HH.mm.ss',
        L : 'DD.MM.YYYY',
        LL : 'D. MMMM [dallas] YYYY',
        LLL : 'D. MMMM [dallas] YYYY HH.mm',
        LLLL : 'dddd, [li] D. MMMM [dallas] YYYY HH.mm'
    },
    meridiemParse: /d\'o|d\'a/i,
    isPM : function (input) {
        return 'd\'o' === input.toLowerCase();
    },
    meridiem : function (hours, minutes, isLower) {
        if (hours > 11) {
            return isLower ? 'd\'o' : 'D\'O';
        } else {
            return isLower ? 'd\'a' : 'D\'A';
        }
    },
    calendar : {
        sameDay : '[oxhi à] LT',
        nextDay : '[demà à] LT',
        nextWeek : 'dddd [à] LT',
        lastDay : '[ieiri à] LT',
        lastWeek : '[sür el] dddd [lasteu à] LT',
        sameElse : 'L'
    },
    relativeTime : {
        future : 'osprei %s',
        past : 'ja%s',
        s : processRelativeTime,
        m : processRelativeTime,
        mm : processRelativeTime,
        h : processRelativeTime,
        hh : processRelativeTime,
        d : processRelativeTime,
        dd : processRelativeTime,
        M : processRelativeTime,
        MM : processRelativeTime,
        y : processRelativeTime,
        yy : processRelativeTime
    },
    dayOfMonthOrdinalParse: /\d{1,2}\./,
    ordinal : '%d.',
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 4  // The week that contains Jan 4th is the first week of the year.
    }
});

function processRelativeTime(number, withoutSuffix, key, isFuture) {
    var format = {
        's': ['viensas secunds', '\'iensas secunds'],
        'm': ['\'n míut', '\'iens míut'],
        'mm': [number + ' míuts', '' + number + ' míuts'],
        'h': ['\'n þora', '\'iensa þora'],
        'hh': [number + ' þoras', '' + number + ' þoras'],
        'd': ['\'n ziua', '\'iensa ziua'],
        'dd': [number + ' ziuas', '' + number + ' ziuas'],
        'M': ['\'n mes', '\'iens mes'],
        'MM': [number + ' mesen', '' + number + ' mesen'],
        'y': ['\'n ar', '\'iens ar'],
        'yy': [number + ' ars', '' + number + ' ars']
    };
    return isFuture ? format[key][0] : (withoutSuffix ? format[key][0] : format[key][1]);
}

return tzl;

})));


/***/ }),
/* 199 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Central Atlas Tamazight [tzm]
//! author : Abdel Said : https://github.com/abdelsaid

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var tzm = moment.defineLocale('tzm', {
    months : 'ⵉⵏⵏⴰⵢⵔ_ⴱⵕⴰⵢⵕ_ⵎⴰⵕⵚ_ⵉⴱⵔⵉⵔ_ⵎⴰⵢⵢⵓ_ⵢⵓⵏⵢⵓ_ⵢⵓⵍⵢⵓⵣ_ⵖⵓⵛⵜ_ⵛⵓⵜⴰⵏⴱⵉⵔ_ⴽⵟⵓⴱⵕ_ⵏⵓⵡⴰⵏⴱⵉⵔ_ⴷⵓⵊⵏⴱⵉⵔ'.split('_'),
    monthsShort : 'ⵉⵏⵏⴰⵢⵔ_ⴱⵕⴰⵢⵕ_ⵎⴰⵕⵚ_ⵉⴱⵔⵉⵔ_ⵎⴰⵢⵢⵓ_ⵢⵓⵏⵢⵓ_ⵢⵓⵍⵢⵓⵣ_ⵖⵓⵛⵜ_ⵛⵓⵜⴰⵏⴱⵉⵔ_ⴽⵟⵓⴱⵕ_ⵏⵓⵡⴰⵏⴱⵉⵔ_ⴷⵓⵊⵏⴱⵉⵔ'.split('_'),
    weekdays : 'ⴰⵙⴰⵎⴰⵙ_ⴰⵢⵏⴰⵙ_ⴰⵙⵉⵏⴰⵙ_ⴰⴽⵔⴰⵙ_ⴰⴽⵡⴰⵙ_ⴰⵙⵉⵎⵡⴰⵙ_ⴰⵙⵉⴹⵢⴰⵙ'.split('_'),
    weekdaysShort : 'ⴰⵙⴰⵎⴰⵙ_ⴰⵢⵏⴰⵙ_ⴰⵙⵉⵏⴰⵙ_ⴰⴽⵔⴰⵙ_ⴰⴽⵡⴰⵙ_ⴰⵙⵉⵎⵡⴰⵙ_ⴰⵙⵉⴹⵢⴰⵙ'.split('_'),
    weekdaysMin : 'ⴰⵙⴰⵎⴰⵙ_ⴰⵢⵏⴰⵙ_ⴰⵙⵉⵏⴰⵙ_ⴰⴽⵔⴰⵙ_ⴰⴽⵡⴰⵙ_ⴰⵙⵉⵎⵡⴰⵙ_ⴰⵙⵉⴹⵢⴰⵙ'.split('_'),
    longDateFormat : {
        LT : 'HH:mm',
        LTS: 'HH:mm:ss',
        L : 'DD/MM/YYYY',
        LL : 'D MMMM YYYY',
        LLL : 'D MMMM YYYY HH:mm',
        LLLL : 'dddd D MMMM YYYY HH:mm'
    },
    calendar : {
        sameDay: '[ⴰⵙⴷⵅ ⴴ] LT',
        nextDay: '[ⴰⵙⴽⴰ ⴴ] LT',
        nextWeek: 'dddd [ⴴ] LT',
        lastDay: '[ⴰⵚⴰⵏⵜ ⴴ] LT',
        lastWeek: 'dddd [ⴴ] LT',
        sameElse: 'L'
    },
    relativeTime : {
        future : 'ⴷⴰⴷⵅ ⵙ ⵢⴰⵏ %s',
        past : 'ⵢⴰⵏ %s',
        s : 'ⵉⵎⵉⴽ',
        m : 'ⵎⵉⵏⵓⴺ',
        mm : '%d ⵎⵉⵏⵓⴺ',
        h : 'ⵙⴰⵄⴰ',
        hh : '%d ⵜⴰⵙⵙⴰⵄⵉⵏ',
        d : 'ⴰⵙⵙ',
        dd : '%d oⵙⵙⴰⵏ',
        M : 'ⴰⵢoⵓⵔ',
        MM : '%d ⵉⵢⵢⵉⵔⵏ',
        y : 'ⴰⵙⴳⴰⵙ',
        yy : '%d ⵉⵙⴳⴰⵙⵏ'
    },
    week : {
        dow : 6, // Saturday is the first day of the week.
        doy : 12  // The week that contains Jan 1st is the first week of the year.
    }
});

return tzm;

})));


/***/ }),
/* 200 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Central Atlas Tamazight Latin [tzm-latn]
//! author : Abdel Said : https://github.com/abdelsaid

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var tzmLatn = moment.defineLocale('tzm-latn', {
    months : 'innayr_brˤayrˤ_marˤsˤ_ibrir_mayyw_ywnyw_ywlywz_ɣwšt_šwtanbir_ktˤwbrˤ_nwwanbir_dwjnbir'.split('_'),
    monthsShort : 'innayr_brˤayrˤ_marˤsˤ_ibrir_mayyw_ywnyw_ywlywz_ɣwšt_šwtanbir_ktˤwbrˤ_nwwanbir_dwjnbir'.split('_'),
    weekdays : 'asamas_aynas_asinas_akras_akwas_asimwas_asiḍyas'.split('_'),
    weekdaysShort : 'asamas_aynas_asinas_akras_akwas_asimwas_asiḍyas'.split('_'),
    weekdaysMin : 'asamas_aynas_asinas_akras_akwas_asimwas_asiḍyas'.split('_'),
    longDateFormat : {
        LT : 'HH:mm',
        LTS : 'HH:mm:ss',
        L : 'DD/MM/YYYY',
        LL : 'D MMMM YYYY',
        LLL : 'D MMMM YYYY HH:mm',
        LLLL : 'dddd D MMMM YYYY HH:mm'
    },
    calendar : {
        sameDay: '[asdkh g] LT',
        nextDay: '[aska g] LT',
        nextWeek: 'dddd [g] LT',
        lastDay: '[assant g] LT',
        lastWeek: 'dddd [g] LT',
        sameElse: 'L'
    },
    relativeTime : {
        future : 'dadkh s yan %s',
        past : 'yan %s',
        s : 'imik',
        m : 'minuḍ',
        mm : '%d minuḍ',
        h : 'saɛa',
        hh : '%d tassaɛin',
        d : 'ass',
        dd : '%d ossan',
        M : 'ayowr',
        MM : '%d iyyirn',
        y : 'asgas',
        yy : '%d isgasn'
    },
    week : {
        dow : 6, // Saturday is the first day of the week.
        doy : 12  // The week that contains Jan 1st is the first week of the year.
    }
});

return tzmLatn;

})));


/***/ }),
/* 201 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Ukrainian [uk]
//! author : zemlanin : https://github.com/zemlanin
//! Author : Menelion Elensúle : https://github.com/Oire

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


function plural(word, num) {
    var forms = word.split('_');
    return num % 10 === 1 && num % 100 !== 11 ? forms[0] : (num % 10 >= 2 && num % 10 <= 4 && (num % 100 < 10 || num % 100 >= 20) ? forms[1] : forms[2]);
}
function relativeTimeWithPlural(number, withoutSuffix, key) {
    var format = {
        'mm': withoutSuffix ? 'хвилина_хвилини_хвилин' : 'хвилину_хвилини_хвилин',
        'hh': withoutSuffix ? 'година_години_годин' : 'годину_години_годин',
        'dd': 'день_дні_днів',
        'MM': 'місяць_місяці_місяців',
        'yy': 'рік_роки_років'
    };
    if (key === 'm') {
        return withoutSuffix ? 'хвилина' : 'хвилину';
    }
    else if (key === 'h') {
        return withoutSuffix ? 'година' : 'годину';
    }
    else {
        return number + ' ' + plural(format[key], +number);
    }
}
function weekdaysCaseReplace(m, format) {
    var weekdays = {
        'nominative': 'неділя_понеділок_вівторок_середа_четвер_п’ятниця_субота'.split('_'),
        'accusative': 'неділю_понеділок_вівторок_середу_четвер_п’ятницю_суботу'.split('_'),
        'genitive': 'неділі_понеділка_вівторка_середи_четверга_п’ятниці_суботи'.split('_')
    };

    if (!m) {
        return weekdays['nominative'];
    }

    var nounCase = (/(\[[ВвУу]\]) ?dddd/).test(format) ?
        'accusative' :
        ((/\[?(?:минулої|наступної)? ?\] ?dddd/).test(format) ?
            'genitive' :
            'nominative');
    return weekdays[nounCase][m.day()];
}
function processHoursFunction(str) {
    return function () {
        return str + 'о' + (this.hours() === 11 ? 'б' : '') + '] LT';
    };
}

var uk = moment.defineLocale('uk', {
    months : {
        'format': 'січня_лютого_березня_квітня_травня_червня_липня_серпня_вересня_жовтня_листопада_грудня'.split('_'),
        'standalone': 'січень_лютий_березень_квітень_травень_червень_липень_серпень_вересень_жовтень_листопад_грудень'.split('_')
    },
    monthsShort : 'січ_лют_бер_квіт_трав_черв_лип_серп_вер_жовт_лист_груд'.split('_'),
    weekdays : weekdaysCaseReplace,
    weekdaysShort : 'нд_пн_вт_ср_чт_пт_сб'.split('_'),
    weekdaysMin : 'нд_пн_вт_ср_чт_пт_сб'.split('_'),
    longDateFormat : {
        LT : 'HH:mm',
        LTS : 'HH:mm:ss',
        L : 'DD.MM.YYYY',
        LL : 'D MMMM YYYY р.',
        LLL : 'D MMMM YYYY р., HH:mm',
        LLLL : 'dddd, D MMMM YYYY р., HH:mm'
    },
    calendar : {
        sameDay: processHoursFunction('[Сьогодні '),
        nextDay: processHoursFunction('[Завтра '),
        lastDay: processHoursFunction('[Вчора '),
        nextWeek: processHoursFunction('[У] dddd ['),
        lastWeek: function () {
            switch (this.day()) {
                case 0:
                case 3:
                case 5:
                case 6:
                    return processHoursFunction('[Минулої] dddd [').call(this);
                case 1:
                case 2:
                case 4:
                    return processHoursFunction('[Минулого] dddd [').call(this);
            }
        },
        sameElse: 'L'
    },
    relativeTime : {
        future : 'за %s',
        past : '%s тому',
        s : 'декілька секунд',
        m : relativeTimeWithPlural,
        mm : relativeTimeWithPlural,
        h : 'годину',
        hh : relativeTimeWithPlural,
        d : 'день',
        dd : relativeTimeWithPlural,
        M : 'місяць',
        MM : relativeTimeWithPlural,
        y : 'рік',
        yy : relativeTimeWithPlural
    },
    // M. E.: those two are virtually unused but a user might want to implement them for his/her website for some reason
    meridiemParse: /ночі|ранку|дня|вечора/,
    isPM: function (input) {
        return /^(дня|вечора)$/.test(input);
    },
    meridiem : function (hour, minute, isLower) {
        if (hour < 4) {
            return 'ночі';
        } else if (hour < 12) {
            return 'ранку';
        } else if (hour < 17) {
            return 'дня';
        } else {
            return 'вечора';
        }
    },
    dayOfMonthOrdinalParse: /\d{1,2}-(й|го)/,
    ordinal: function (number, period) {
        switch (period) {
            case 'M':
            case 'd':
            case 'DDD':
            case 'w':
            case 'W':
                return number + '-й';
            case 'D':
                return number + '-го';
            default:
                return number;
        }
    },
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 7  // The week that contains Jan 1st is the first week of the year.
    }
});

return uk;

})));


/***/ }),
/* 202 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Urdu [ur]
//! author : Sawood Alam : https://github.com/ibnesayeed
//! author : Zack : https://github.com/ZackVision

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var months = [
    'جنوری',
    'فروری',
    'مارچ',
    'اپریل',
    'مئی',
    'جون',
    'جولائی',
    'اگست',
    'ستمبر',
    'اکتوبر',
    'نومبر',
    'دسمبر'
];
var days = [
    'اتوار',
    'پیر',
    'منگل',
    'بدھ',
    'جمعرات',
    'جمعہ',
    'ہفتہ'
];

var ur = moment.defineLocale('ur', {
    months : months,
    monthsShort : months,
    weekdays : days,
    weekdaysShort : days,
    weekdaysMin : days,
    longDateFormat : {
        LT : 'HH:mm',
        LTS : 'HH:mm:ss',
        L : 'DD/MM/YYYY',
        LL : 'D MMMM YYYY',
        LLL : 'D MMMM YYYY HH:mm',
        LLLL : 'dddd، D MMMM YYYY HH:mm'
    },
    meridiemParse: /صبح|شام/,
    isPM : function (input) {
        return 'شام' === input;
    },
    meridiem : function (hour, minute, isLower) {
        if (hour < 12) {
            return 'صبح';
        }
        return 'شام';
    },
    calendar : {
        sameDay : '[آج بوقت] LT',
        nextDay : '[کل بوقت] LT',
        nextWeek : 'dddd [بوقت] LT',
        lastDay : '[گذشتہ روز بوقت] LT',
        lastWeek : '[گذشتہ] dddd [بوقت] LT',
        sameElse : 'L'
    },
    relativeTime : {
        future : '%s بعد',
        past : '%s قبل',
        s : 'چند سیکنڈ',
        m : 'ایک منٹ',
        mm : '%d منٹ',
        h : 'ایک گھنٹہ',
        hh : '%d گھنٹے',
        d : 'ایک دن',
        dd : '%d دن',
        M : 'ایک ماہ',
        MM : '%d ماہ',
        y : 'ایک سال',
        yy : '%d سال'
    },
    preparse: function (string) {
        return string.replace(/،/g, ',');
    },
    postformat: function (string) {
        return string.replace(/,/g, '،');
    },
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 4  // The week that contains Jan 4th is the first week of the year.
    }
});

return ur;

})));


/***/ }),
/* 203 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Uzbek [uz]
//! author : Sardor Muminov : https://github.com/muminoff

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var uz = moment.defineLocale('uz', {
    months : 'январ_феврал_март_апрел_май_июн_июл_август_сентябр_октябр_ноябр_декабр'.split('_'),
    monthsShort : 'янв_фев_мар_апр_май_июн_июл_авг_сен_окт_ноя_дек'.split('_'),
    weekdays : 'Якшанба_Душанба_Сешанба_Чоршанба_Пайшанба_Жума_Шанба'.split('_'),
    weekdaysShort : 'Якш_Душ_Сеш_Чор_Пай_Жум_Шан'.split('_'),
    weekdaysMin : 'Як_Ду_Се_Чо_Па_Жу_Ша'.split('_'),
    longDateFormat : {
        LT : 'HH:mm',
        LTS : 'HH:mm:ss',
        L : 'DD/MM/YYYY',
        LL : 'D MMMM YYYY',
        LLL : 'D MMMM YYYY HH:mm',
        LLLL : 'D MMMM YYYY, dddd HH:mm'
    },
    calendar : {
        sameDay : '[Бугун соат] LT [да]',
        nextDay : '[Эртага] LT [да]',
        nextWeek : 'dddd [куни соат] LT [да]',
        lastDay : '[Кеча соат] LT [да]',
        lastWeek : '[Утган] dddd [куни соат] LT [да]',
        sameElse : 'L'
    },
    relativeTime : {
        future : 'Якин %s ичида',
        past : 'Бир неча %s олдин',
        s : 'фурсат',
        m : 'бир дакика',
        mm : '%d дакика',
        h : 'бир соат',
        hh : '%d соат',
        d : 'бир кун',
        dd : '%d кун',
        M : 'бир ой',
        MM : '%d ой',
        y : 'бир йил',
        yy : '%d йил'
    },
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 7  // The week that contains Jan 4th is the first week of the year.
    }
});

return uz;

})));


/***/ }),
/* 204 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Uzbek Latin [uz-latn]
//! author : Rasulbek Mirzayev : github.com/Rasulbeeek

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var uzLatn = moment.defineLocale('uz-latn', {
    months : 'Yanvar_Fevral_Mart_Aprel_May_Iyun_Iyul_Avgust_Sentabr_Oktabr_Noyabr_Dekabr'.split('_'),
    monthsShort : 'Yan_Fev_Mar_Apr_May_Iyun_Iyul_Avg_Sen_Okt_Noy_Dek'.split('_'),
    weekdays : 'Yakshanba_Dushanba_Seshanba_Chorshanba_Payshanba_Juma_Shanba'.split('_'),
    weekdaysShort : 'Yak_Dush_Sesh_Chor_Pay_Jum_Shan'.split('_'),
    weekdaysMin : 'Ya_Du_Se_Cho_Pa_Ju_Sha'.split('_'),
    longDateFormat : {
        LT : 'HH:mm',
        LTS : 'HH:mm:ss',
        L : 'DD/MM/YYYY',
        LL : 'D MMMM YYYY',
        LLL : 'D MMMM YYYY HH:mm',
        LLLL : 'D MMMM YYYY, dddd HH:mm'
    },
    calendar : {
        sameDay : '[Bugun soat] LT [da]',
        nextDay : '[Ertaga] LT [da]',
        nextWeek : 'dddd [kuni soat] LT [da]',
        lastDay : '[Kecha soat] LT [da]',
        lastWeek : '[O\'tgan] dddd [kuni soat] LT [da]',
        sameElse : 'L'
    },
    relativeTime : {
        future : 'Yaqin %s ichida',
        past : 'Bir necha %s oldin',
        s : 'soniya',
        m : 'bir daqiqa',
        mm : '%d daqiqa',
        h : 'bir soat',
        hh : '%d soat',
        d : 'bir kun',
        dd : '%d kun',
        M : 'bir oy',
        MM : '%d oy',
        y : 'bir yil',
        yy : '%d yil'
    },
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 7  // The week that contains Jan 1st is the first week of the year.
    }
});

return uzLatn;

})));


/***/ }),
/* 205 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Vietnamese [vi]
//! author : Bang Nguyen : https://github.com/bangnk

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var vi = moment.defineLocale('vi', {
    months : 'tháng 1_tháng 2_tháng 3_tháng 4_tháng 5_tháng 6_tháng 7_tháng 8_tháng 9_tháng 10_tháng 11_tháng 12'.split('_'),
    monthsShort : 'Th01_Th02_Th03_Th04_Th05_Th06_Th07_Th08_Th09_Th10_Th11_Th12'.split('_'),
    monthsParseExact : true,
    weekdays : 'chủ nhật_thứ hai_thứ ba_thứ tư_thứ năm_thứ sáu_thứ bảy'.split('_'),
    weekdaysShort : 'CN_T2_T3_T4_T5_T6_T7'.split('_'),
    weekdaysMin : 'CN_T2_T3_T4_T5_T6_T7'.split('_'),
    weekdaysParseExact : true,
    meridiemParse: /sa|ch/i,
    isPM : function (input) {
        return /^ch$/i.test(input);
    },
    meridiem : function (hours, minutes, isLower) {
        if (hours < 12) {
            return isLower ? 'sa' : 'SA';
        } else {
            return isLower ? 'ch' : 'CH';
        }
    },
    longDateFormat : {
        LT : 'HH:mm',
        LTS : 'HH:mm:ss',
        L : 'DD/MM/YYYY',
        LL : 'D MMMM [năm] YYYY',
        LLL : 'D MMMM [năm] YYYY HH:mm',
        LLLL : 'dddd, D MMMM [năm] YYYY HH:mm',
        l : 'DD/M/YYYY',
        ll : 'D MMM YYYY',
        lll : 'D MMM YYYY HH:mm',
        llll : 'ddd, D MMM YYYY HH:mm'
    },
    calendar : {
        sameDay: '[Hôm nay lúc] LT',
        nextDay: '[Ngày mai lúc] LT',
        nextWeek: 'dddd [tuần tới lúc] LT',
        lastDay: '[Hôm qua lúc] LT',
        lastWeek: 'dddd [tuần rồi lúc] LT',
        sameElse: 'L'
    },
    relativeTime : {
        future : '%s tới',
        past : '%s trước',
        s : 'vài giây',
        m : 'một phút',
        mm : '%d phút',
        h : 'một giờ',
        hh : '%d giờ',
        d : 'một ngày',
        dd : '%d ngày',
        M : 'một tháng',
        MM : '%d tháng',
        y : 'một năm',
        yy : '%d năm'
    },
    dayOfMonthOrdinalParse: /\d{1,2}/,
    ordinal : function (number) {
        return number;
    },
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 4  // The week that contains Jan 4th is the first week of the year.
    }
});

return vi;

})));


/***/ }),
/* 206 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Pseudo [x-pseudo]
//! author : Andrew Hood : https://github.com/andrewhood125

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var xPseudo = moment.defineLocale('x-pseudo', {
    months : 'J~áñúá~rý_F~ébrú~árý_~Márc~h_Áp~ríl_~Máý_~Júñé~_Júl~ý_Áú~gúst~_Sép~témb~ér_Ó~ctób~ér_Ñ~óvém~bér_~Décé~mbér'.split('_'),
    monthsShort : 'J~áñ_~Féb_~Már_~Ápr_~Máý_~Júñ_~Júl_~Áúg_~Sép_~Óct_~Ñóv_~Déc'.split('_'),
    monthsParseExact : true,
    weekdays : 'S~úñdá~ý_Mó~ñdáý~_Túé~sdáý~_Wéd~ñésd~áý_T~húrs~dáý_~Fríd~áý_S~átúr~dáý'.split('_'),
    weekdaysShort : 'S~úñ_~Móñ_~Túé_~Wéd_~Thú_~Frí_~Sát'.split('_'),
    weekdaysMin : 'S~ú_Mó~_Tú_~Wé_T~h_Fr~_Sá'.split('_'),
    weekdaysParseExact : true,
    longDateFormat : {
        LT : 'HH:mm',
        L : 'DD/MM/YYYY',
        LL : 'D MMMM YYYY',
        LLL : 'D MMMM YYYY HH:mm',
        LLLL : 'dddd, D MMMM YYYY HH:mm'
    },
    calendar : {
        sameDay : '[T~ódá~ý át] LT',
        nextDay : '[T~ómó~rró~w át] LT',
        nextWeek : 'dddd [át] LT',
        lastDay : '[Ý~ést~érdá~ý át] LT',
        lastWeek : '[L~ást] dddd [át] LT',
        sameElse : 'L'
    },
    relativeTime : {
        future : 'í~ñ %s',
        past : '%s á~gó',
        s : 'á ~féw ~sécó~ñds',
        m : 'á ~míñ~úté',
        mm : '%d m~íñú~tés',
        h : 'á~ñ hó~úr',
        hh : '%d h~óúrs',
        d : 'á ~dáý',
        dd : '%d d~áýs',
        M : 'á ~móñ~th',
        MM : '%d m~óñt~hs',
        y : 'á ~ýéár',
        yy : '%d ý~éárs'
    },
    dayOfMonthOrdinalParse: /\d{1,2}(th|st|nd|rd)/,
    ordinal : function (number) {
        var b = number % 10,
            output = (~~(number % 100 / 10) === 1) ? 'th' :
            (b === 1) ? 'st' :
            (b === 2) ? 'nd' :
            (b === 3) ? 'rd' : 'th';
        return number + output;
    },
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 4  // The week that contains Jan 4th is the first week of the year.
    }
});

return xPseudo;

})));


/***/ }),
/* 207 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Yoruba Nigeria [yo]
//! author : Atolagbe Abisoye : https://github.com/andela-batolagbe

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var yo = moment.defineLocale('yo', {
    months : 'Sẹ́rẹ́_Èrèlè_Ẹrẹ̀nà_Ìgbé_Èbibi_Òkùdu_Agẹmo_Ògún_Owewe_Ọ̀wàrà_Bélú_Ọ̀pẹ̀̀'.split('_'),
    monthsShort : 'Sẹ́r_Èrl_Ẹrn_Ìgb_Èbi_Òkù_Agẹ_Ògú_Owe_Ọ̀wà_Bél_Ọ̀pẹ̀̀'.split('_'),
    weekdays : 'Àìkú_Ajé_Ìsẹ́gun_Ọjọ́rú_Ọjọ́bọ_Ẹtì_Àbámẹ́ta'.split('_'),
    weekdaysShort : 'Àìk_Ajé_Ìsẹ́_Ọjr_Ọjb_Ẹtì_Àbá'.split('_'),
    weekdaysMin : 'Àì_Aj_Ìs_Ọr_Ọb_Ẹt_Àb'.split('_'),
    longDateFormat : {
        LT : 'h:mm A',
        LTS : 'h:mm:ss A',
        L : 'DD/MM/YYYY',
        LL : 'D MMMM YYYY',
        LLL : 'D MMMM YYYY h:mm A',
        LLLL : 'dddd, D MMMM YYYY h:mm A'
    },
    calendar : {
        sameDay : '[Ònì ni] LT',
        nextDay : '[Ọ̀la ni] LT',
        nextWeek : 'dddd [Ọsẹ̀ tón\'bọ] [ni] LT',
        lastDay : '[Àna ni] LT',
        lastWeek : 'dddd [Ọsẹ̀ tólọ́] [ni] LT',
        sameElse : 'L'
    },
    relativeTime : {
        future : 'ní %s',
        past : '%s kọjá',
        s : 'ìsẹjú aayá die',
        m : 'ìsẹjú kan',
        mm : 'ìsẹjú %d',
        h : 'wákati kan',
        hh : 'wákati %d',
        d : 'ọjọ́ kan',
        dd : 'ọjọ́ %d',
        M : 'osù kan',
        MM : 'osù %d',
        y : 'ọdún kan',
        yy : 'ọdún %d'
    },
    dayOfMonthOrdinalParse : /ọjọ́\s\d{1,2}/,
    ordinal : 'ọjọ́ %d',
    week : {
        dow : 1, // Monday is the first day of the week.
        doy : 4 // The week that contains Jan 4th is the first week of the year.
    }
});

return yo;

})));


/***/ }),
/* 208 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Chinese (China) [zh-cn]
//! author : suupic : https://github.com/suupic
//! author : Zeno Zeng : https://github.com/zenozeng

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var zhCn = moment.defineLocale('zh-cn', {
    months : '一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月'.split('_'),
    monthsShort : '1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月'.split('_'),
    weekdays : '星期日_星期一_星期二_星期三_星期四_星期五_星期六'.split('_'),
    weekdaysShort : '周日_周一_周二_周三_周四_周五_周六'.split('_'),
    weekdaysMin : '日_一_二_三_四_五_六'.split('_'),
    longDateFormat : {
        LT : 'HH:mm',
        LTS : 'HH:mm:ss',
        L : 'YYYY年MMMD日',
        LL : 'YYYY年MMMD日',
        LLL : 'YYYY年MMMD日Ah点mm分',
        LLLL : 'YYYY年MMMD日ddddAh点mm分',
        l : 'YYYY年MMMD日',
        ll : 'YYYY年MMMD日',
        lll : 'YYYY年MMMD日 HH:mm',
        llll : 'YYYY年MMMD日dddd HH:mm'
    },
    meridiemParse: /凌晨|早上|上午|中午|下午|晚上/,
    meridiemHour: function (hour, meridiem) {
        if (hour === 12) {
            hour = 0;
        }
        if (meridiem === '凌晨' || meridiem === '早上' ||
                meridiem === '上午') {
            return hour;
        } else if (meridiem === '下午' || meridiem === '晚上') {
            return hour + 12;
        } else {
            // '中午'
            return hour >= 11 ? hour : hour + 12;
        }
    },
    meridiem : function (hour, minute, isLower) {
        var hm = hour * 100 + minute;
        if (hm < 600) {
            return '凌晨';
        } else if (hm < 900) {
            return '早上';
        } else if (hm < 1130) {
            return '上午';
        } else if (hm < 1230) {
            return '中午';
        } else if (hm < 1800) {
            return '下午';
        } else {
            return '晚上';
        }
    },
    calendar : {
        sameDay : '[今天]LT',
        nextDay : '[明天]LT',
        nextWeek : '[下]ddddLT',
        lastDay : '[昨天]LT',
        lastWeek : '[上]ddddLT',
        sameElse : 'L'
    },
    dayOfMonthOrdinalParse: /\d{1,2}(日|月|周)/,
    ordinal : function (number, period) {
        switch (period) {
            case 'd':
            case 'D':
            case 'DDD':
                return number + '日';
            case 'M':
                return number + '月';
            case 'w':
            case 'W':
                return number + '周';
            default:
                return number;
        }
    },
    relativeTime : {
        future : '%s内',
        past : '%s前',
        s : '几秒',
        m : '1 分钟',
        mm : '%d 分钟',
        h : '1 小时',
        hh : '%d 小时',
        d : '1 天',
        dd : '%d 天',
        M : '1 个月',
        MM : '%d 个月',
        y : '1 年',
        yy : '%d 年'
    },
    week : {
        // GB/T 7408-1994《数据元和交换格式·信息交换·日期和时间表示法》与ISO 8601:1988等效
        dow : 1, // Monday is the first day of the week.
        doy : 4  // The week that contains Jan 4th is the first week of the year.
    }
});

return zhCn;

})));


/***/ }),
/* 209 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Chinese (Hong Kong) [zh-hk]
//! author : Ben : https://github.com/ben-lin
//! author : Chris Lam : https://github.com/hehachris
//! author : Konstantin : https://github.com/skfd

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var zhHk = moment.defineLocale('zh-hk', {
    months : '一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月'.split('_'),
    monthsShort : '1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月'.split('_'),
    weekdays : '星期日_星期一_星期二_星期三_星期四_星期五_星期六'.split('_'),
    weekdaysShort : '週日_週一_週二_週三_週四_週五_週六'.split('_'),
    weekdaysMin : '日_一_二_三_四_五_六'.split('_'),
    longDateFormat : {
        LT : 'HH:mm',
        LTS : 'HH:mm:ss',
        L : 'YYYY年MMMD日',
        LL : 'YYYY年MMMD日',
        LLL : 'YYYY年MMMD日 HH:mm',
        LLLL : 'YYYY年MMMD日dddd HH:mm',
        l : 'YYYY年MMMD日',
        ll : 'YYYY年MMMD日',
        lll : 'YYYY年MMMD日 HH:mm',
        llll : 'YYYY年MMMD日dddd HH:mm'
    },
    meridiemParse: /凌晨|早上|上午|中午|下午|晚上/,
    meridiemHour : function (hour, meridiem) {
        if (hour === 12) {
            hour = 0;
        }
        if (meridiem === '凌晨' || meridiem === '早上' || meridiem === '上午') {
            return hour;
        } else if (meridiem === '中午') {
            return hour >= 11 ? hour : hour + 12;
        } else if (meridiem === '下午' || meridiem === '晚上') {
            return hour + 12;
        }
    },
    meridiem : function (hour, minute, isLower) {
        var hm = hour * 100 + minute;
        if (hm < 600) {
            return '凌晨';
        } else if (hm < 900) {
            return '早上';
        } else if (hm < 1130) {
            return '上午';
        } else if (hm < 1230) {
            return '中午';
        } else if (hm < 1800) {
            return '下午';
        } else {
            return '晚上';
        }
    },
    calendar : {
        sameDay : '[今天]LT',
        nextDay : '[明天]LT',
        nextWeek : '[下]ddddLT',
        lastDay : '[昨天]LT',
        lastWeek : '[上]ddddLT',
        sameElse : 'L'
    },
    dayOfMonthOrdinalParse: /\d{1,2}(日|月|週)/,
    ordinal : function (number, period) {
        switch (period) {
            case 'd' :
            case 'D' :
            case 'DDD' :
                return number + '日';
            case 'M' :
                return number + '月';
            case 'w' :
            case 'W' :
                return number + '週';
            default :
                return number;
        }
    },
    relativeTime : {
        future : '%s內',
        past : '%s前',
        s : '幾秒',
        m : '1 分鐘',
        mm : '%d 分鐘',
        h : '1 小時',
        hh : '%d 小時',
        d : '1 天',
        dd : '%d 天',
        M : '1 個月',
        MM : '%d 個月',
        y : '1 年',
        yy : '%d 年'
    }
});

return zhHk;

})));


/***/ }),
/* 210 */
/***/ (function(module, exports, __webpack_require__) {

//! moment.js locale configuration
//! locale : Chinese (Taiwan) [zh-tw]
//! author : Ben : https://github.com/ben-lin
//! author : Chris Lam : https://github.com/hehachris

;(function (global, factory) {
    true ? factory(__webpack_require__(2)) :
   typeof define === 'function' && define.amd ? define(['../moment'], factory) :
   factory(global.moment)
}(this, (function (moment) { 'use strict';


var zhTw = moment.defineLocale('zh-tw', {
    months : '一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月'.split('_'),
    monthsShort : '1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月'.split('_'),
    weekdays : '星期日_星期一_星期二_星期三_星期四_星期五_星期六'.split('_'),
    weekdaysShort : '週日_週一_週二_週三_週四_週五_週六'.split('_'),
    weekdaysMin : '日_一_二_三_四_五_六'.split('_'),
    longDateFormat : {
        LT : 'HH:mm',
        LTS : 'HH:mm:ss',
        L : 'YYYY年MMMD日',
        LL : 'YYYY年MMMD日',
        LLL : 'YYYY年MMMD日 HH:mm',
        LLLL : 'YYYY年MMMD日dddd HH:mm',
        l : 'YYYY年MMMD日',
        ll : 'YYYY年MMMD日',
        lll : 'YYYY年MMMD日 HH:mm',
        llll : 'YYYY年MMMD日dddd HH:mm'
    },
    meridiemParse: /凌晨|早上|上午|中午|下午|晚上/,
    meridiemHour : function (hour, meridiem) {
        if (hour === 12) {
            hour = 0;
        }
        if (meridiem === '凌晨' || meridiem === '早上' || meridiem === '上午') {
            return hour;
        } else if (meridiem === '中午') {
            return hour >= 11 ? hour : hour + 12;
        } else if (meridiem === '下午' || meridiem === '晚上') {
            return hour + 12;
        }
    },
    meridiem : function (hour, minute, isLower) {
        var hm = hour * 100 + minute;
        if (hm < 600) {
            return '凌晨';
        } else if (hm < 900) {
            return '早上';
        } else if (hm < 1130) {
            return '上午';
        } else if (hm < 1230) {
            return '中午';
        } else if (hm < 1800) {
            return '下午';
        } else {
            return '晚上';
        }
    },
    calendar : {
        sameDay : '[今天]LT',
        nextDay : '[明天]LT',
        nextWeek : '[下]ddddLT',
        lastDay : '[昨天]LT',
        lastWeek : '[上]ddddLT',
        sameElse : 'L'
    },
    dayOfMonthOrdinalParse: /\d{1,2}(日|月|週)/,
    ordinal : function (number, period) {
        switch (period) {
            case 'd' :
            case 'D' :
            case 'DDD' :
                return number + '日';
            case 'M' :
                return number + '月';
            case 'w' :
            case 'W' :
                return number + '週';
            default :
                return number;
        }
    },
    relativeTime : {
        future : '%s內',
        past : '%s前',
        s : '幾秒',
        m : '1 分鐘',
        mm : '%d 分鐘',
        h : '1 小時',
        hh : '%d 小時',
        d : '1 天',
        dd : '%d 天',
        M : '1 個月',
        MM : '%d 個月',
        y : '1 年',
        yy : '%d 年'
    }
});

return zhTw;

})));


/***/ }),
/* 211 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file accession.js
 * @brief Accession specialization for descriptor layout type.
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-09-13
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let LayoutType = __webpack_require__(60);

let Accession = LayoutType.extend({
    template: __webpack_require__(320),

    regions: {
        "namingOptions": "div.accession-naming-options"
    },

    ui: {
        'primary_classification': 'select.primary-classification',
        'batch_layouts_group': 'div.batch-layouts-group'
    },

    onRender: function () {
        let primaryClassification = this.ui.primary_classification;

        // classifications list according to the related meta model of accession
        let ClassificationCollection = __webpack_require__(31);
        let classificationCollection = new ClassificationCollection();

        let SelectOption = __webpack_require__(19);
        let classifications = new SelectOption({
            className: "classification",
            collection: classificationCollection
        });

        let primaryClassificationValue = Object.resolve('data.primary_classification', this.model.get('parameters'));

        classifications.drawSelect(primaryClassification, true, true, primaryClassificationValue).done(function () {
        });

        // batches list
        let batchesListValues = Object.resolve('data.batch_layouts', this.model.get('parameters')) || [];

        this.batchesWidget = window.application.descriptor.widgets.newElement('layout');
        this.batchesWidget.create(
            {model: 'accession.batch'},
            this.ui.batch_layouts_group, {
                readOnly: false,
                multiple: true
            });

        if (batchesListValues.length) {
            this.batchesWidget.set({model: 'accession.batch'}, true, batchesListValues);
        }

        // naming options
        let self = this;

        let namingOptions = Object.resolve('data.naming_options', this.model.get('parameters')) || [];

        $.ajax({
            type: "GET",
            url: window.application.url(['accession', 'naming', 'accession']),
            dataType: 'json',
        }).done(function(data) {
            let NamingOptionsView = __webpack_require__(36);
            let len = (data.format.match(/{CONST}/g) || []).length;

            if (namingOptions.length !== len) {
                namingOptions = new Array(len);
            }

            self.showChildView("namingOptions", new NamingOptionsView({
                namingFormat: data.format,
                namingOptions: namingOptions
            }));
        });
    },

    getData: function () {
        return {
            'primary_classification': parseInt(this.ui.primary_classification.val()),
            'naming_options': this.getChildView("namingOptions").getNamingOptions(),
            'batch_layouts': this.batchesWidget.values() || []
        }
    },

    onBeforeDestroy: function () {
        if (this.batchesWidget) {
            this.batchesWidget.destroy();
            delete this.batchesWidget;
        }
    }
});

Accession.layoutTarget = 'accession.accession';

module.exports = Accession;


/***/ }),
/* 212 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file batch.js
 * @brief Batch specialization for descriptor layout type.
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-09-13
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let LayoutType = __webpack_require__(60);

let Batch = LayoutType.extend({
    template: __webpack_require__(323),

    regions: {
        "namingOptions": "div.accession-naming-options"
    },

    onRender: function() {
        // naming options
        let self = this;

        let namingOptions = Object.resolve('data.naming_options', this.model.get('parameters')) || [];

        $.ajax({
            type: "GET",
            url: window.application.url(['accession', 'naming', 'batch']),
            dataType: 'json',
        }).done(function(data) {
            let NamingOptionsView = __webpack_require__(36);
            let len = (data.format.match(/{CONST}/g) || []).length;

            if (namingOptions.length !== len) {
                namingOptions = new Array(len);
            }

            self.showChildView("namingOptions", new NamingOptionsView({
                namingFormat: data.format,
                namingOptions: namingOptions
            }));
        });
    },

    getData: function() {
        return {
            'naming_options': this.getChildView("namingOptions").getNamingOptions()
        }
    }
});

Batch.layoutTarget = 'accession.batch';

module.exports = Batch;


/***/ }),
/* 213 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {/**
 * @file accessionconsumerbatchproducerit.js
 * @brief Accession consumer - Batch producer step iterative version
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2018-04-10
 * @copyright Copyright (c) 2018 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let ActionStepFormat = __webpack_require__(23);
let AccessionConsumerBatchProducer = __webpack_require__(63);
let AccessionCollection = __webpack_require__(45);

let Format = function() {
    ActionStepFormat.call(this);

    this.name = "accessionconsumer_batchproducer_it";
    this.group = "standard";
    this.description = _t("Take a list of accession in input and generate one or many batch in output.");

    this.type = this.ACTION_TYPE_ITERATIVE;
    this.acceptFormat = ['accession_id'];
    this.dataFormat = ['batch_id'];
};

_.extend(Format.prototype, ActionStepFormat.prototype, {
    defaultFormat: function() {
       return {
            'options': {},
            'producers': []
        };
    }
});

Format.ActionStepProcessView = AccessionConsumerBatchProducer.ActionStepProcessView.extend({
    // @todo what needed in this case
});

Format.ActionStepFormatDetailsView = AccessionConsumerBatchProducer.ActionStepFormatDetailsView.extend({
});

Format.ActionStepFormatDetailsView = AccessionConsumerBatchProducer.ActionStepFormatDetailsView.extend({
});

// Format.ActionStepProgressView = ProgressActionList.extend({
//
//     initialize: function (options) {
//         this.collection = new AccessionCollection([], {
//             action_id: this.model.get('id'),
//             action_step_idx: options.action_step_idx
//         });
//
//         ProgressActionList.__super__.initialize.apply(this, arguments);
//     }
// });

module.exports = Format;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 214 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {/**
 * @file accessionlist.js
 * @brief Simple accession list action step
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-12-11
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let ActionStepFormat = __webpack_require__(23);

let AccessionList = function() {
    ActionStepFormat.call(this);

    this.name = "accession_list";
    this.group = "standard";
    this.description = _t("Take a list of accession in input and dispose this same list as output for the next step.");

    this.acceptFormat = ['accession_id'];
    this.dataFormat = ['accession_id'];
};

_.extend(AccessionList.prototype, ActionStepFormat.prototype, {
    defaultFormat: function() {
        return {};
    }
});

AccessionList.ActionStepProcessView = ActionStepFormat.ActionStepProcessView.extend({
    className: 'action-step-process',
    template: __webpack_require__(329),

    ui: {
        list_type: "select[name=accession-list-type]",
        panel_group: "div[name=panel]",
        upload_group: "div[name=upload]",
        manual_group: "div[name=manual]",
        accession_upload: 'input[name=accession-upload]',
        panel: "select[name=accession-panel]",
        manual: "select[name=accession-list]"
    },

    events: {
        'change @ui.list_type': 'onChangeListType',
        'change @ui.accession_upload': 'onAccessionUpload'
    },

    initialize: function(options) {
        options || (options = {readonly: true});

        this.listenTo(this.model, 'change', this.render, this);
    },

    onRender: function () {
        this.ui.list_type.selectpicker({});

        this.ui.panel.select2({
            dropdownParent: this.$el,
            ajax: {
                url: window.application.url(['accession', 'accessionpanel', 'search']),
                dataType: 'json',
                delay: 250,
                data: function (params) {
                    params.term || (params.term = '');

                    return {
                        filters: JSON.stringify({
                            method: 'icontains',
                            fields: ['name'],
                            name: params.term
                        }),
                        cursor: params.next
                    };
                },
                processResults: function (data, params) {
                    params.next = null;

                    if (data.items.length >= 30) {
                        params.next = data.next || null;
                    }

                    let results = [];

                    for (let i = 0; i < data.items.length; ++i) {
                        results.push({
                            id: data.items[i].id,
                            text: data.items[i].label
                        });
                    }

                    return {
                        results: results,
                        pagination: {
                            more: params.next != null
                        }
                    };
                },
                cache: true
            },
            minimumInputLength: 3,
            placeholder: _t("Select a panel")
        });

        this.ui.manual.select2({
            multiple: true,
            dropdownParent: this.$el,
            ajax: {
                url: window.application.url(['accession', 'accession', 'search']),
                dataType: 'json',
                delay: 250,
                data: function (params) {
                    params.term || (params.term = '');

                    return {
                        filters: JSON.stringify({
                            method: 'icontains',
                            fields: ['name', 'code'],
                            name: params.term
                        }),
                        cursor: params.next
                    };
                },
                processResults: function (data, params) {
                    params.next = null;

                    if (data.items.length >= 30) {
                        params.next = data.next || null;
                    }

                    let results = [];

                    for (let i = 0; i < data.items.length; ++i) {
                        results.push({
                            id: data.items[i].id,
                            text: data.items[i].label
                        });
                    }

                    return {
                        results: results,
                        pagination: {
                            more: params.next != null
                        }
                    };
                },
                cache: true
            },
            width: "100%",
            allowClear: true,
            minimumInputLength: 1,
            placeholder: _t("Enter a value.")
        }).fixSelect2Position();
    },

    onBeforeDestroy: function() {
        this.ui.list_type.selectpicker('destroy');
        this.ui.manual.select2('destroy');
        this.ui.panel.select2('destroy');
    },

    inputsType: function() {
        return this.ui.list_type.val();
    },

    inputsData: function() {
        let v = this.ui.list_type.val();

        if (v === "panel") {
            return parseInt(this.ui.panel.val());
        } else if (v === "upload") {
            return "upload";
        } else if (v === "list") {
            let ids = this.ui.manual.val();

            return _.map(ids, function (id) {
                return parseInt(id);
            });
        }

        return null;
    },

    inputsColumns: function() {
        return ['accession_id'];
    },

    onChangeListType: function() {
        let v = this.ui.list_type.val();

        if (v === "panel") {
            this.ui.panel_group.css('display', 'block');
            this.ui.upload_group.css('display', 'none');
            this.ui.manual_group.css('display', 'none');
        } else if (v === "upload") {
            this.ui.panel_group.css('display', 'none');
            this.ui.upload_group.css('display', 'block');
            this.ui.manual_group.css('display', 'none');
        } else if (v === "list") {
            this.ui.panel_group.css('display', 'none');
            this.ui.upload_group.css('display', 'none');
            this.ui.manual_group.css('display', 'block');
        }
    },

    onAccessionUpload: function () {
        let file = this.ui.accession_upload[0].files[0];
        this.uploadFile(file, 'data');
    },

    uploadFile: function (file, target) {
        let self = this;

        let formData = new FormData();
        formData.append('file', file);
        formData.append('target', target);

        $.ajax({
            type: "POST",
            url: window.application.url(['accession', 'action', this.model.get('id'), 'upload']),
            encType: "multipart/form-data",
            data: formData,
            cache: false,
            contentType: false,
            processData: false,
            xhr: function () {
                let xhr = $.ajaxSettings.xhr();

                // progression
                xhr.onprogress = function (e) {
                    self.ui.accession_upload.prop('disabled', true);
                };

                // progression
                xhr.upload.onprogress = function (e) {
                    self.ui.accession_upload.prop('disabled', true);
                };

                return xhr;
            },
            beforeSend: function () {
                // cancel upload button
                // cancelButton.click(xhr.abort); @todo
            }
        }).done(function (data) {
            self.ui.accession_upload.prop('disabled', false);

            // update model data
            self.model.set('data', data.data);

            $.alert.success(_t("Successfully uploaded !"));
        }).fail(function () {
            $.alert.error(_t("Error during file upload"));
            self.ui.accession_upload.prop('disabled', false);
        });
    }
});

AccessionList.ActionStepReadView = ActionStepFormat.ActionStepReadView.extend({
});

AccessionList.ActionStepFormatDetailsView = ActionStepFormat.ActionStepFormatDetailsView.extend({
    className: 'action-step-format-details',
    template: __webpack_require__(330),

    initialize: function() {
        this.listenTo(this.model, 'change', this.render, this);
    },

    onRender: function() {
        let format = this.model.get('format');
    },

    storeData: function() {
        return {
        }
    }
});

module.exports = AccessionList;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 215 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {/**
 * @file accessionrefinement.js
 * @brief Accession refinement
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-12-19
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let ActionStepFormat = __webpack_require__(23);
let Marionette = __webpack_require__(1);

let ScrollingMoreView = __webpack_require__(10);
let ContentBottomFooterLayout = __webpack_require__(25);
let EntityListFilterView = __webpack_require__(14);

let Format = function() {
    ActionStepFormat.call(this);

    this.name = "accession_refinement";
    this.group = "standard";
    this.description = _t("Take a list of accession in input and generate a filtered list of accession based on the input.");

    this.type = this.ACTION_TYPE_USER;
    this.acceptFormat = ['accession_id'];
    this.dataFormat = ['accession_id'];
};

_.extend(Format.prototype, ActionStepFormat.prototype, {
    defaultFormat: function() {
        return {};
    }
});

// @todo user action processing (using a file upload or using the panel of accession with a validation)
Format.ActionStepProcessView = ActionStepFormat.ActionStepProcessView.extend({
    className: 'action-step-process',
    template: __webpack_require__(334),

    ui: {
        accession_list: 'select[name=get-accession-list]',
        upload_group: 'div[name=upload]',
        panel_group: 'div[name=panel-group]',
        accession_upload: 'input[name=accession-upload]',
        accession_upload_group: 'div[name=upload]',
        accession_uploaded_group: 'div[name=uploaded]'
    },

    events: {
        'change @ui.accession_list': 'onGetAccessionList',
        'change @ui.accession_upload': 'onAccessionUpload'
    },

    initialize: function (options) {
        options || (options = {readonly: true});

        this.listenTo(this.model, 'change', this.render, this);
    },

    onRender: function () {
        this.ui.panel_group.css('display', 'none');
        this.ui.accession_list.selectpicker({});

        // get accession list from the previous step
        if (this.getOption("stepIndex") < 1) {
            this.ui.accession_list.prop('disabled', true);
        }

        if (this.stepData().state >= 1) {
            this.ui.accession_upload_group.css('display', 'none');
            this.ui.accession_uploaded_group.css('display', 'block');
        }
    },

    onBeforeDestroy: function () {
        this.ui.accession_list.selectpicker('destroy');
    },

    inputsType: function () {
        return 'none';
    },

    inputsData: function () {
        return null;
    },

    inputsColumns: function() {
        return ['accession_id'];
    },

    onGetAccessionList: function () {
        let type = this.ui.accession_list.val();

        if (this.getOption("stepIndex") < 1) {
            return;
        }

        if (type === 'original-csv') {
            this.downloadData('csv', this.getOption("stepIndex")-1);
        } else if (type === 'original-xlsx') {
            this.downloadData('xlsx', this.getOption("stepIndex")-1);
        } else if (type === 'original-panel') {
            // @todo a dialog to name the panel
            alert("todo");
        }

        this.ui.accession_list.val("").selectpicker('refresh');
    },

    onAccessionUpload: function () {
        let file = this.ui.accession_upload[0].files[0];
        this.uploadFile(file, 'data');
    },

    uploadFile: function (file, target) {
        let self = this;

        let formData = new FormData();
        formData.append('file', file);
        formData.append('target', target);

        $.ajax({
            type: "POST",
            url: window.application.url(['accession', 'action', this.model.get('id'), 'upload']),
            encType: "multipart/form-data",
            data: formData,
            cache: false,
            contentType: false,
            processData: false,
            xhr: function () {
                let xhr = $.ajaxSettings.xhr();

                // progression
                xhr.onprogress = function (e) {
                    self.ui.accession_upload.prop('disabled', true);
                };

                // progression
                xhr.upload.onprogress = function (e) {
                    self.ui.accession_upload.prop('disabled', true);
                };

                return xhr;
            },
            beforeSend: function () {
                // cancel upload button
                // cancelButton.click(xhr.abort); @todo
            }
        }).done(function (data) {
            self.ui.accession_upload.prop('disabled', false);

            // update model data
            self.model.set('data', data.data);

            $.alert.success(_t("Successfully uploaded !"));
        }).fail(function () {
            $.alert.error(_t("Error during file upload"));
            self.ui.accession_upload.prop('disabled', false);
        });
    },

    showTodoPanel: function(region) {
        let self = this;

        if (!this.stepData().panels || !this.stepData().panels.todo) {
            return;
        }

        let panelId = this.stepData().panels.todo.id;

        let AccessionCollection = __webpack_require__(45);
        let accessionPanelAccessions = new AccessionCollection([], {panel_id: panelId});

        let columns = window.application.main.cache.lookup({
            type: 'entity_columns',
            format: {model: 'accession.accession'}
        });

        columns.done(function (data) {
            let AccessionListView = __webpack_require__(64);
            let accessionListView = new AccessionListView({
                collection: accessionPanelAccessions,
                model: self.model,
                columns: data[0].value,
                collectionEvents: {
                    // 'update': 'updateAmount'
                },
                /// layoutView: region,
                relatedEntity: {
                    'content_type': 'accession.accessionpanel',
                    'id': self.model.get('id')
                }
            });

            let contentBottomFooterLayout = new ContentBottomFooterLayout();
            region.show(contentBottomFooterLayout);

            contentBottomFooterLayout.showChildView('content', accessionListView);
            contentBottomFooterLayout.showChildView('bottom', new ScrollingMoreView({
                collection: accessionPanelAccessions,
                targetView: accessionListView
            }));

            contentBottomFooterLayout.showChildView('footer', new EntityListFilterView({
                collection: accessionPanelAccessions,
                columns: data[0].value
            }));

            accessionListView.query();
        });
    },

    showDonePanel: function(region) {
        let self = this;

        if (!this.stepData().panels || !this.stepData().panels.done) {
            return;
        }

        let panelId = this.stepData().panels.done.id;
    }
});

Format.ActionStepReadView = ActionStepFormat.ActionStepReadView.extend({
});

Format.ActionStepFormatDetailsView = ActionStepFormat.ActionStepFormatDetailsView.extend({
    className: 'action-step-format-details',
    template: __webpack_require__(337),

    initialize: function() {
        this.listenTo(this.model, 'change', this.render, this);
    },

    onRender: function() {
        let format = this.model.get('format');
    },

    storeData: function() {
        return {
        }
    }
});

module.exports = Format;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 216 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {/**
 * @file batchconsumerbatchmodifier.js
 * @brief Batch consumer - batch modifier step
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-12-19
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let ActionStepFormat = __webpack_require__(23);
let Marionette = __webpack_require__(1);

let Format = function() {
    ActionStepFormat.call(this);

    this.name = "batchconsumer_batchmodifier";
    this.group = "standard";
    this.description = _t("Take a list of batch in input and some descriptors to be defined on those batches, the output list is the list of the batches.");

    this.acceptFormat = ['batch_id'];
    this.dataFormat = ['batch_id'];
};

_.extend(Format.prototype, ActionStepFormat.prototype, {
    defaultFormat: function() {
        return {};
    }
});


Format.ActionStepProcessView = ActionStepFormat.ActionStepProcessView.extend({
    className: 'action-step-process',
    template: __webpack_require__(338),

    initialize: function(options) {
        options || (options = {readonly: true});

        this.listenTo(this.model, 'change', this.render, this);
    },

    onRender: function() {
        if (this.getOption('readonly')) {

        } else {

        }
    },

    onBeforeDestroy: function() {
        if (!this.getOption('readonly')) {
        }
    },

    exportInput: function() {

    },

    importData: function() {

    },

    inputsType: function() {
        return 'none';
    },

    inputsData: function() {
        return null;
    }
});

Format.ActionStepReadView = ActionStepFormat.ActionStepReadView.extend({
});

Format.ActionStepFormatDetailsView = ActionStepFormat.ActionStepFormatDetailsView.extend({
    className: 'action-step-format-details',
    template: __webpack_require__(339),

    initialize: function() {
        this.listenTo(this.model, 'change', this.render, this);
    },

    onRender: function() {
        let format = this.model.get('format');
    },

    storeData: function() {
        return {
        }
    }
});

module.exports = Format;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 217 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {/**
 * @file batchconsumerbatchproducer.js
 * @brief Batch consumer - Batch producer step
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-12-19
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let ActionStepFormat = __webpack_require__(23);
let Marionette = __webpack_require__(1);

let Format = function() {
    ActionStepFormat.call(this);

    this.name = "batchconsumer_batchproducer";
    this.group = "standard";
    this.description = _t("Take a list of batches in input, and generate one or many batch in outputs.");

    this.acceptFormat = ['batch_id'];
    this.dataFormat = ['batch_id'];
};

_.extend(Format.prototype, ActionStepFormat.prototype, {
    defaultFormat: function() {
        return {};
    }
});

Format.ActionStepProcessView = ActionStepFormat.ActionStepProcessView.extend({
    className: 'action-step-process',
    template: __webpack_require__(340),

    initialize: function(options) {
        options || (options = {readonly: true});

        this.listenTo(this.model, 'change', this.render, this);
    },

    onRender: function() {
        if (this.getOption('readonly')) {

        } else {

        }
    },

    onBeforeDestroy: function() {
        if (!this.getOption('readonly')) {
        }
    },

    exportInput: function() {

    },

    importData: function() {

    },

    inputsType: function() {
        return 'none';
    },

    inputsData: function() {
        return null;
    }
});

Format.ActionStepReadView = ActionStepFormat.ActionStepReadView.extend({
});

Format.ActionStepFormatDetailsView = ActionStepFormat.ActionStepFormatDetailsView.extend({
    className: 'action-step-format-details',
    template: __webpack_require__(341),

    initialize: function() {
        this.listenTo(this.model, 'change', this.render, this);
    },

    onRender: function() {
        let format = this.model.get('format');
    },

    storeData: function() {
        return {
        }
    }
});

module.exports = Format;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 218 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {/**
 * @file batchweighting.js
 * @brief Batch weighting
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2018-04-10
 * @copyright Copyright (c) 2018 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let ActionStepFormat = __webpack_require__(23);
let Marionette = __webpack_require__(1);

let Format = function() {
    ActionStepFormat.call(this);

    this.name = "batch_weighting";
    this.group = "standard";
    this.description = _t("Take a list of batches in input, and iteratively weight each.");

    this.type = this.ACTION_TYPE_ITERATIVE;
    this.acceptFormat = ['batch_id'];
    this.dataFormat = ['batch_id'];
};

_.extend(Format.prototype, ActionStepFormat.prototype, {
    defaultFormat: function() {
        return {};
    }
});

Format.ActionStepProcessView = ActionStepFormat.ActionStepProcessView.extend({
    className: 'action-step-process',
    template: __webpack_require__(342),

    initialize: function(options) {
        options || (options = {readonly: true});

        this.listenTo(this.model, 'change', this.render, this);
    },

    onRender: function() {
    },

    onBeforeDestroy: function() {
    },

    exportInput: function() {

    },

    importData: function() {

    },

    inputsType: function() {
        return 'none';
    },

    inputsData: function() {
        return null;
    }
});

Format.ActionStepReadView = ActionStepFormat.ActionStepReadView.extend({
});

Format.ActionStepFormatDetailsView = ActionStepFormat.ActionStepFormatDetailsView.extend({
    className: 'action-step-format-details',
    // template: require('../templates/actionstep/batchweigthingdetails.html'),

    initialize: function() {
        this.listenTo(this.model, 'change', this.render, this);
    },

    onRender: function() {
        let format = this.model.get('format');
    },

    storeData: function() {
        return {
        }
    }
});

module.exports = Format;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 219 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file accessionlayout.js
 * @brief Optimized layout for accession details
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-01-16
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let LayoutView = __webpack_require__(17);
let ClassificationEntryModel = __webpack_require__(26);

let ScrollingMoreView = __webpack_require__(10);
let ContentBottomLayout = __webpack_require__(66);
let ContentBottomFooterLayout = __webpack_require__(25);
let EntityPathView = __webpack_require__(347);
let AccessionDescriptorEditView = __webpack_require__(221);
let EntityListFilterView = __webpack_require__(14);
let DescriptorCollection = __webpack_require__(18);

let Layout = LayoutView.extend({
    template: __webpack_require__(351),

    ui: {
        synonyms_tab: 'a[aria-controls=synonyms]',
        batches_tab: 'a[aria-controls=batches]',
        classifications_entries_tab: 'a[aria-controls=classifications-entries]',
        panels_tab: 'a[aria-controls=panels]',
        comments_tab: 'a[aria-controls=comments]'
    },

    regions: {
        'details': "div[name=details]",
        'descriptors': "div.tab-pane[name=descriptors]",
        'synonyms': "div.tab-pane[name=synonyms]",
        'batches': "div.tab-pane[name=batches]",
        'classifications-entries': "div.tab-pane[name=classifications-entries]",
        'panels': "div.tab-pane[name=panels]",
        'comments': "div.tab-pane[name=comments]"
    },

    initialize: function (options) {
        Layout.__super__.initialize.apply(this, arguments);

        this.listenTo(this.model, 'change:layout', this.onLayoutChange, this);

        if (this.model.isNew()) {
            this.listenTo(this.model, 'change:id', this.onAccessionCreate, this);
        }
    },

    onAccessionCreate: function (model, value) {
        // re-render once created
        this.render();

        // and update history
        Backbone.history.navigate('app/accession/accession/' + this.model.get('id') + '/', {
            /*trigger: true,*/
            replace: false
        });
    },

    disableSynonymsTab: function () {
        this.ui.synonyms_tab.parent().addClass('disabled');
    },

    disableBatchesTab: function () {
        this.ui.batches_tab.parent().addClass('disabled');
    },

    disableClassificationsEntriesTab: function () {
        this.ui.classifications_entries_tab.parent().addClass('disabled');
    },

    disablePanelsTab: function () {
        this.ui.panels_tab.parent().addClass('disabled');
    },

    disableCommentsTab: function () {
        this.ui.comments_tab.parent().addClass('disabled');
    },

    enableTabs: function () {
        this.ui.synonyms_tab.parent().removeClass('disabled');
        this.ui.batches_tab.parent().removeClass('disabled');
        this.ui.classifications_entries_tab.parent().removeClass('disabled');
        this.ui.panels_tab.parent().removeClass('disabled');
        this.ui.comments_tab.parent().removeClass('disabled');
    },

    onLayoutChange: function (model, value) {
        if (value == null) {
            this.getRegion('descriptors').empty();
        } else {
            let accessionLayout = this;

            // get the layout before creating the view
            $.ajax({
                method: "GET",
                url: window.application.url(['descriptor', 'layout', value]),
                dataType: 'json'
            }).done(function (data) {
                let view = this;

                this.descriptorCollection = new DescriptorCollection([], {
                    model_id: data.id
                });
                this.descriptorCollection.fetch().then(function () {
                    if (!accessionLayout.isRendered()) {
                        return;
                    }

                    let AccessionDescriptorView = __webpack_require__(67);
                    let accessionDescriptorView = new AccessionDescriptorView({
                        model: model,
                        layoutData: data,
                        descriptorCollection: view.descriptorCollection

                    });
                    accessionLayout.showChildView('descriptors', accessionDescriptorView);
                });
            });
        }
    },

    onRender: function () {
        let accessionLayout = this;

        // details view
        if (!this.model.isNew()) {
            // classificationEntry parent
            let classificationEntry = new ClassificationEntryModel({id: this.model.get('primary_classification_entry')});
            classificationEntry.fetch().then(function () {
                if (!accessionLayout.isRendered()) {
                    return;
                }

                accessionLayout.showChildView('details', new EntityPathView({
                    model: accessionLayout.model,
                    classificationEntry: classificationEntry
                }));
            });

            // synonyms tab
            let AccessionSynonymsView = __webpack_require__(352);
            accessionLayout.showChildView('synonyms', new AccessionSynonymsView({model: this.model}));

            // batches tab (query on show tab)
            let BatchCollection = __webpack_require__(47);
            let accessionBatches = new BatchCollection([], {accession_id: this.model.get('id')});

            // get available columns
            window.application.main.cache.lookup({
                type: 'entity_columns',
                format: {model: 'accession.batch'}
            }).then(function (data) {
                if (!accessionLayout.isRendered()) {
                    return;
                }

                let BatchListView = __webpack_require__(69);
                let batchListView  = new BatchListView({
                    collection: accessionBatches,
                    model: accessionLayout.model,
                    accessionId: accessionLayout.model.get('id'),
                    columns: data[0].value
                });

                let contentBottomFooterLayout = new ContentBottomFooterLayout();
                accessionLayout.showChildView('batches', contentBottomFooterLayout);

                contentBottomFooterLayout.showChildView('content', batchListView);
                contentBottomFooterLayout.showChildView('bottom', new ScrollingMoreView({
                    targetView: batchListView,
                    collection: accessionBatches
                }));

                contentBottomFooterLayout.showChildView('footer', new EntityListFilterView({
                    collection: accessionBatches,
                    columns: data[0].value
                }));
            });

            // classifications entry tab (query on show tab)
            let AccessionClassificationEntryCollection = __webpack_require__(355);
            let accessionClassificationEntries = new AccessionClassificationEntryCollection([], {accession_id: this.model.get('id')});

            // get available columns
            window.application.main.cache.lookup({
                type: 'entity_columns',
                format: {model: 'classification.classificationentry'}
            }).then(function (data) {
                if (!accessionLayout.isRendered()) {
                    return;
                }

                let AccessionClassificationEntryListView = __webpack_require__(356);
                let accessionClassificationEntryListView = new AccessionClassificationEntryListView({
                    collection: accessionClassificationEntries, model: accessionLayout.model, columns: data[0].value
                });

                let contentBottomFooterLayout = new ContentBottomFooterLayout();
                accessionLayout.showChildView('classifications-entries', contentBottomFooterLayout);

                contentBottomFooterLayout.showChildView('content', accessionClassificationEntryListView);
                // contentBottomFooterLayout.showChildView('bottom', new ScrollingMoreView({targetView: accessionClassificationEntryListView}));

                let AccessionClassificationEntryAdd = __webpack_require__(358);
                contentBottomFooterLayout.showChildView('footer', new AccessionClassificationEntryAdd({collection: accessionClassificationEntries}));
            });

            // panels tab (query on show tab)
            let PanelCollection = __webpack_require__(225);
            let accessionPanels = new PanelCollection([], {accession_id: this.model.get('id')});

            // get available columns
            window.application.main.cache.lookup({
                type: 'entity_columns',
                format: {model: 'accession.accessionpanel'}
            }).then(function (data) {
                if (!accessionLayout.isRendered()) {
                    return;
                }

                let AccessionPanelListView = __webpack_require__(360);
                let accessionPanelListView = new AccessionPanelListView({
                    collection: accessionPanels, model: accessionLayout.model, columns: data[0].value
                });

                let contentBottomLayout = new ContentBottomLayout();
                accessionLayout.showChildView('panels', contentBottomLayout);

                contentBottomLayout.showChildView('content', accessionPanelListView);
                contentBottomLayout.showChildView('bottom', new ScrollingMoreView({targetView: accessionPanelListView}));
            });

            this.onLayoutChange(this.model, this.model.get('layout'));

            // comments
            let CommentListView = __webpack_require__(28);

            // classifications entry tab (query on show tab)
            let CommentCollection = __webpack_require__(29);
            let comments = new CommentCollection([], {entity: this.model});

            let commentListView = new CommentListView({entity: this.model, collection: comments});
            accessionLayout.showChildView('comments', commentListView);

            this.enableTabs();
        } else {
            // details
            let classificationEntry = new ClassificationEntryModel({id: this.model.get('primary_classification_entry')});
            classificationEntry.fetch().then(function () {
                if (!accessionLayout.isRendered()) {
                    return;
                }

                accessionLayout.showChildView('details', new EntityPathView({
                    model: accessionLayout.model, classificationEntry: classificationEntry, noLink: true
                }));
            });

            let model = this.model;

            // descriptors edit tab
            $.ajax({
                method: "GET",
                url: window.application.url(['descriptor', 'layout', this.model.get('layout')]),
                dataType: 'json'
            }).done(function (data) {
                let view = this;

                this.descriptorCollection = new DescriptorCollection([], {
                    model_id: data.id
                });
                this.descriptorCollection.fetch().then(function () {
                    if (!accessionLayout.isRendered()) {
                        return;
                    }

                    // let AccessionDescriptorView = require('./accessiondescriptor');
                    let accessionDescriptorView = new AccessionDescriptorEditView({
                        model: model,
                        layoutData: data,
                        descriptorCollection: view.descriptorCollection

                    });
                    accessionLayout.showChildView('descriptors', accessionDescriptorView);
                });
            });

            // not available tabs
            this.disableSynonymsTab();
            this.disableBatchesTab();
            this.disableClassificationsEntriesTab();
            this.disablePanelsTab();
            this.disableCommentsTab();
        }
    }
});

module.exports = Layout;


/***/ }),
/* 220 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title">' +
__e( _t("Change the direct parent of classification entry") ) +
'</h4></div><div class="modal-body"><form><div class="form-group"><label class="control-label" for="classification_entry_parent">' +
__e( _t("Direct parent") ) +
'</label><select id="classification_entry_parent" style="width:100%" class="form-control"></select></div></form></div><div class="modal-footer"><button type="button" class="btn btn-default cancel" data-dismiss="modal">' +
__e( _t("Cancel") ) +
'</button> <button type="button" class="btn btn-success apply">' +
__e( _t("Apply") ) +
'</button></div></div></div>';

}
return __p
};

/*
original source:

<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title"><%- _t("Change the direct parent of classification entry") %></h4></div><div class="modal-body"><form><div class="form-group"><label class="control-label" for="classification_entry_parent"><%- _t("Direct parent") %></label><select id="classification_entry_parent" style="width:100%" class="form-control"></select></div></form></div><div class="modal-footer"><button type="button" class="btn btn-default cancel" data-dismiss="modal"><%- _t("Cancel") %></button> <button type="button" class="btn btn-success apply"><%- _t("Apply") %></button></div></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 221 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file accessiondescriptoredit.js
 * @brief Accession descriptor item edit view
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-12-15
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let DescribableEdit = __webpack_require__(33);

let View = DescribableEdit.extend({
    onCancel: function() {
        // cancel global widget modifications
        this.cancel();

        // non existing accession, simply reload previous content (url has not changed)
        if (this.model.isNew()) {
            Backbone.history.loadUrl();
            return;
        }

        // does not reload models, just redo the views
        let view = this;

        // update the layout content
        let accessionLayout = window.application.main.viewContent().getChildView('content');

        let AccessionDescriptorView = __webpack_require__(67);
        let accessionDescriptorView = new AccessionDescriptorView({
            model: this.model,
            layoutData: view.layoutData,
            descriptorCollection: view.descriptorCollection
        });

        accessionLayout.showChildView('descriptors', accessionDescriptorView);
    },

    onApply: function () {
        // does not reload models, save and redo the views
        let view = this;
        let model = this.model;

        let descriptors = this.prepareDescriptors();
        if (descriptors === null) {
            return;
        }

        this.model.save({descriptors: descriptors}, {wait: true, patch: !model.isNew(), success: function () {
            let accessionLayout = window.application.main.viewContent().getChildView('content');

            // update the layout content
            let AccessionDescriptorView = __webpack_require__(67);
            let accessionDescriptorView = new AccessionDescriptorView({
                model: model,
                layoutData: view.layoutData,
                descriptorCollection: view.descriptorCollection
            });

            accessionLayout.showChildView('descriptors', accessionDescriptorView);
        }});
    },

    onShowTab: function() {
        let view = this;

        // contextual panel
        let contextLayout = window.application.getView().getChildView('right');
        if (!contextLayout) {
            let DefaultLayout = __webpack_require__(3);
            contextLayout = new DefaultLayout();
            window.application.getView().showChildView('right', contextLayout);
        }

        let TitleView = __webpack_require__(4);
        contextLayout.showChildView('title', new TitleView({title: _t("Descriptors"), glyphicon: 'fa-wrench'}));

        let actions = ['apply', 'cancel'];

        let AccessionDescriptorContextView = __webpack_require__(68);
        let contextView = new AccessionDescriptorContextView({actions: actions});
        contextLayout.showChildView('content', contextView);

        contextView.on("describable:cancel", function() {
            view.onCancel();
        });

        contextView.on("describable:apply", function() {
            view.onApply();
        });
    },

    onHideTab: function() {
        window.application.main.defaultRightView();
    }
});

module.exports = View;


/***/ }),
/* 222 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {/**
 * @file itemview.js
 * @brief Base item view with compoundable properties
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-12-15
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Marionette = __webpack_require__(1);

let View = Marionette.View.extend({
    constructor: function() {
        let prototype = this.constructor.prototype;

        this.events = {};
        this.defaultOptions = {};
        this.ui = {};
        this.attributes = {};
        this.className = "";

        while (prototype) {
            if (prototype.hasOwnProperty("events")) {
                _.defaults(this.events, prototype.events);
            }
            if (prototype.hasOwnProperty("defaultOptions")) {
                _.defaults(this.defaultOptions, prototype.defaultOptions);
            }
            if (prototype.hasOwnProperty("ui")) {
                _.defaults(this.ui, prototype.ui);
            }
            if (prototype.hasOwnProperty("attributes")) {
                _.defaults(this.attributes, prototype.attributes);
            }
            if (prototype.hasOwnProperty("className")) {
                this.className += " " + prototype.className;
            }
            prototype = prototype.constructor.__super__;
        }

        Marionette.View.apply(this, arguments);
    },

    initialize: function (options) {
        View.__super__.initialize.apply(this);
    }
});

module.exports = View;


/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 223 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file layoutdescriptor.js
 * @brief Model of layout descriptor
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-10-13
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Backbone = __webpack_require__(7);

let Model = Backbone.Model.extend({
    url: function() {
        if (this.isNew()) {
            return window.application.url(['descriptor', 'layout', this.collection.model_id, 'panel', this.collection.panel_index, 'descriptor']);
        } else {
            return window.application.url(['descriptor', 'layout', this.collection.model_id, 'panel', this.collection.panel_index, 'descriptor', this.get('position')]);
        }
    },

    defaults: {
        id: null,
        name: '',
        label: '',
        position: null,
        mandatory: false,
        set_once: false
    },

    initialize: function(attributes, options) {
        Model.__super__.initialize.apply(this, arguments);

        options || (options = {});

        if (options.collection) {
            this.model_id = options.collection.model_id;
        }
    },

    parse: function(data) {
        //this.perms = data.perms;
        this.model = data.model;
        return data;
    },

    validate: function(attrs) {
        let errors = {};
        let hasError = false;

        if (hasError) {
          return errors;
        }
    },

    // getModelId: function() {
    //     if (typeof this.model_id != 'undefined') {
    //         return this.model_id;
    //     } else if (this.get('model') != null) {
    //         return this.model;
    //     } else if (typeof this.collection != 'undefined') {
    //         return this.collection.model_id;
    //     }
    // }
});

module.exports = Model;



/***/ }),
/* 224 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file batch.js
 * @brief Batch item view
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-02-14
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Marionette = __webpack_require__(1);

let View = Marionette.View.extend({
    tagName: 'tr',
    className: 'object batch element',
    attributes: function() {
        return {
            'scope': 'row',
            'element-id': this.model.get('id')
        }
    },
    template: __webpack_require__(12),

    templateContext: function () {
        return {
            columnsList: this.getOption('columnsList'),
            columnsOptions: this.getOption('columnsOptions')
        }
    },

    behaviors: {
        ActionBtnEvents: {
            behaviorClass: __webpack_require__(8),
            actions: {
                edit: {display: false},
                manage: {display: true, event: 'viewDetails'},
                remove: {display: true, event: 'onDeleteBatch'}
            }
        }
    },

    ui: {
        details: 'td.view-batch-details',
        accession: 'td.view-accession-details'
    },

    events: {
        'click @ui.details': 'viewDetails',
        'click @ui.accession': 'viewAccession'
    },

    initialize: function() {
        this.listenTo(this.model, 'change', this.render, this);
    },

    onRender: function() {
    },

    viewDetails: function () {
        Backbone.history.navigate('app/accession/batch/' + this.model.get('id') + '/', {trigger: true});
    },

    viewAccession: function () {
        Backbone.history.navigate('app/accession/accession/' + this.model.get('accession') + '/', {trigger: true});
    },

    onDeleteBatch: function() {
        // @todo remove? or may be archives? fate of sub-batches?
        window.application.accession.controllers.batch.destroy(this.model)
    },

    selectBatch: function () {
        // @todo
        alert("not yet implemented !");
    }
});

module.exports = View;


/***/ }),
/* 225 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file panel.js
 * @brief
 * @author Medhi BOULNEMOUR (INRA UMR1095)
 * @date 2017-09-12
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let AccessionPanelModel = __webpack_require__(71);
let CountableCollection = __webpack_require__(9);

let Collection = CountableCollection.extend({
    url: function () {
        if (this.accession_id) {
            return window.application.url(['accession', 'accession', this.accession_id, 'panels'])
        } else {
            return window.application.url(['accession', 'accessionpanel'])
        }
    },
    model: AccessionPanelModel,

    initialize: function (options) {
        options || (options = {});

        Collection.__super__.initialize.apply(this, arguments);

        this.accession_id = options.accession_id;
    }
});

module.exports = Collection;


/***/ }),
/* 226 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file search.js
 * @brief Entity advanced search dialog
 * @author Medhi BOULNEMOUR (INRA UMR1095)
 * @date 2017-05-15
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let ConditionCollection = __webpack_require__(372);
let Dialog = __webpack_require__(5);

let View = Dialog.extend({
    template: __webpack_require__(375),
    templateContext: function () {
        return {
            entity_types: [
                {id: 'accession.accession', label: _t('Accession')},
                {id: 'accession.batch', label: _t('Batch')}
            ],
            layouts: []
        };
    },

    ui: {
        search: "button.search",
        save: "button.save",
        layout: "#layout",
        entity_type: "#entity_type",
        add: "span.action.add",
        error_msg: '#error-msg'
    },

    events: {
        'click @ui.search': 'onSearch',
        'change @ui.entity_type': 'onChangeEntityType',
        'change @ui.layout': 'onChangeLayout',
        'click @ui.add': 'onAddSearchRow',
        'click @ui.save': 'onSave'
    },

    regions: {
        'conditions': '#conditions_part'
    },

    initialize: function (options) {
        View.__super__.initialize.apply(this, arguments);
    },

    onRender: function () {
        View.__super__.onRender.apply(this);

        this.ui.entity_type.selectpicker({}).selectpicker('val', this.getOption('entity'));
        this.ui.layout.selectpicker({});

        this.getRegion('conditions').show(new ConditionCollection({
            collection: window.application.accession.collections.conditionList,
            parent: this
        }));
        this.onChangeEntityType();

    },

    onAddSearchRow: function () {
        let added_model = window.application.accession.collections.conditionList.add({
            row_operator: null,
            field: null,
            condition: "eq",
            field_value: null
        });
        const added_view = this.getChildView('conditions').children.findByModel(added_model);
        this.refreshFieldList(added_view);
    },

    onChangeEntityType: function () {
        let entityType = this.ui.entity_type.selectpicker('val');
        this.ui.layout.prop('disabled', false);
        let view = this;

        $.ajax({
            type: "GET",
            url: window.application.url(['descriptor', 'layout', 'for-describable', entityType]),
            dataType: 'json',
        }).done(function (data) {
            view.ui.layout.children('option').remove();

            for (let i = 0; i < data.length; ++i) {
                let opt = $('<option></option>');
                opt.attr('value', data[i].id);
                opt.html(data[i].label);

                view.ui.layout.append(opt);
            }

            if (data.length === 1) {
                view.ui.layout.selectpicker('val', view.ui.layout.children("option:first").val());
                view.ui.layout.prop('disabled', true)
            }

            view.ui.layout.selectpicker('refresh');

            window.application.accession.collections.conditionList = new Backbone.Collection();
            view.getRegion('conditions').show(new ConditionCollection({
                collection: window.application.accession.collections.conditionList,
                parent: this
            }));
            view.onAddSearchRow();
        });
    },

    onChangeLayout: function () {
        window.application.accession.collections.conditionList = new Backbone.Collection();
        this.getRegion('conditions').show(new ConditionCollection({
            collection: window.application.accession.collections.conditionList,
            parent: this
        }));
        this.onAddSearchRow();
    },

    refreshFieldList: function (childview) {
        let entityType = this.ui.entity_type.selectpicker('val');
        const selectedLayouts = this.ui.layout.selectpicker('val');
        let selects = null;

        if (childview) {
            selects = childview.ui.field;
        } else {
            selects = this.getChildView('conditions').ui.field;
        }

        const view = this;

        let layouts = [];

        if (selectedLayouts) {
            for (let i = 0; i < selectedLayouts.length; ++i) {
                layouts.push(parseInt(selectedLayouts[i]));
            }
        }

        window.application.main.cache.lookup({
            type: 'entity_columns',
            format: {model: entityType, layouts: layouts, mode: 'search'}

        }).done(function (data) {
            $(selects).children('option').remove().end();

            let columns = data[0].value;

            view.getChildView('conditions').children.each(function (childview) {
                childview.columns = columns;
            });

            $.each(columns, function (field) {
                selects.append($('<option>', {
                    value: field,
                    text: columns[field].label,
                    'data-type': columns[field].format.type
                }));
            });

            selects.trigger('change')
                .selectpicker('refresh');
        });
        selects.change();
    },

    onSearch: function () {
        this.getChildView('conditions').children.each(function (view) {
            //todo: Remove this code-block and try to update collection on input (from the childviews)
            view.onUIChange(); //update collection
        });

        if (!this.getChildView('conditions').validParenthesis()) {
            return
        }

        const entityType = this.ui.entity_type.val();

        if (entityType === 'accession.accession') {
            // Accession condition
            const conditions = this.getChildView('conditions').collection.models;
            const query = this.getQuery(conditions);
            const options = {search: query.result};
            window.application.accession.routers.accession.getAccessionList(options);
            Backbone.history.navigate('app/accession/accession/');

            this.destroy();

        } else if (entityType === 'accession.batch') {
            // Batch condition
            const conditions = this.getChildView('conditions').collection.models;
            const query = this.getQuery(conditions);
            const options = {search: query.result};
            console.log(options);
            window.application.accession.routers.batch.getBatchList(options);
            Backbone.history.navigate('app/accession/batch/');

            this.destroy();

        }
    },

    setQuery: function () {
        // todo: display a saved query on the UI
    },

    getQuery: function (conditions, condition, parentheses_to_handle) {
        condition = (condition || 0);
        let result = [];
        let i;
        for (i = condition; i < conditions.length; ++i) {
            if (typeof parentheses_to_handle === 'undefined') {
                parentheses_to_handle = conditions[i].attributes.open_group;
            }
            // remove some useless parentheses
            if ((conditions[i].attributes.open_group === 2 && conditions[i].attributes.close_group !== 0)
                || (conditions[i].attributes.open_group === 1 && conditions[i].attributes.close_group === 2)) {
                conditions[i].attributes.close_group--;
                conditions[i].attributes.open_group--;
            }
            if ((conditions[i].attributes.open_group === 2 && conditions[i].attributes.close_group === 2)
                || (conditions[i].attributes.open_group === 1 && conditions[i].attributes.close_group === 1)) {
                conditions[i].attributes.close_group = 0;
                conditions[i].attributes.open_group = 0;
            }
            // add operator
            if (conditions[i].attributes.row_operator !== null && (parentheses_to_handle === conditions[i].attributes.open_group || parentheses_to_handle > 0 && conditions[i].attributes.open_group !== 2)) {
                result.push({
                    'type': 'op',
                    'value': conditions[i].attributes.row_operator
                });
            }
            // add conditions group
            if (conditions[i].attributes.open_group && parentheses_to_handle !== 0) {
                let group = this.getQuery(conditions, i, parentheses_to_handle - 1);
                result.push(group.result);
                i = (group.end_index || i);

                if (conditions[i].attributes.close_group === 2 && parentheses_to_handle - 1 === 0) {
                    return {result: result, end_index: i};
                }
            } else {
                //add field condition
                result.push({
                    'type': 'term',
                    'field': conditions[i].attributes.field,
                    'value': conditions[i].attributes.field_value,
                    'op': conditions[i].attributes.condition
                });

                if (i + 1 < conditions.length && conditions[i + 1].attributes.open_group) {
                    parentheses_to_handle = conditions[i + 1].attributes.open_group;
                }

                if (conditions[i].attributes.close_group) {
                    return {result: result, end_index: i};
                }
            }
        }
        return {result: result, end_index: i};
    },

    onSave: function () {
        this.getChildView('conditions').children.each(function (view) {
            //todo: Remove this code-block and try to update collection on input (from the childviews)
            view.onUIChange(); //update collection
        });
        const entityType = this.ui.entity_type.val();
        if (entityType === 'accession.accession') {
            let conditions = this.getChildView('conditions').collection.models;
            let query = this.getQuery(conditions);
        }
    },

    onBeforeDestroy: function () {
        this.ui.entity_type.selectpicker('destroy');
        this.ui.layout.selectpicker('destroy');

        let rows = this.$el.find('div.search-condition');
        $.each(rows, function (i, el) {
            $(el).find('div.condition').selectpicker('destroy');
        });

        View.__super__.onBeforeDestroy.apply(this);
    }
});

module.exports = View;


/***/ }),
/* 227 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file batchdescriptoredit.js
 * @brief Batch descriptor item edit view
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-02-15
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let DescribableEdit = __webpack_require__(33);

let View = DescribableEdit.extend({
    onCancel: function() {
        // cancel global widget modifications
        this.cancel();

        // non existing accession, simply reload previous content (url has not changed)
        if (this.model.isNew()) {
            Backbone.history.loadUrl();
            return;
        }

        // does not reload models, just redo the views
        let view = this;

        // update the layout content
        let batchLayout = window.application.main.viewContent().getChildView('content');

        let BatchDescriptorView = __webpack_require__(73);
        let batchDescriptorView = new BatchDescriptorView({
            model: this.model,
            layoutData: view.layoutData,
            descriptorCollection: view.descriptorCollection
        });

        batchLayout.showChildView('descriptors', batchDescriptorView);
    },

    onApply: function () {
        // does not reload models, save and redo the views
        let self = this;
        let model = this.model;

        let descriptors = this.prepareDescriptors();
        if (descriptors === null) {
            return;
        }

        this.model.save({descriptors: descriptors}, {wait: true, patch: !model.isNew(), success: function () {
            //Backbone.history.navigate('app/accession/batch/' + model.get('id') + '/', {trigger: true, replace: true});
            let batchLayout = window.application.main.viewContent().getChildView('content');

            // update the layout content
            let BatchDescriptorView = __webpack_require__(73);
            let batchDescriptorView = new BatchDescriptorView({
                model: model,
                layoutData: self.layoutData,
                descriptorCollection: self.descriptorCollection
            });

            batchLayout.showChildView('descriptors', batchDescriptorView);
        }});
    },

    onShowTab: function() {
        let view = this;

        // contextual panel
        let contextLayout = window.application.getView().getChildView('right');
        if (!contextLayout) {
            let DefaultLayout = __webpack_require__(3);
            contextLayout = new DefaultLayout();
            window.application.getView().showChildView('right', contextLayout);
        }

        let TitleView = __webpack_require__(4);
        contextLayout.showChildView('title', new TitleView({title: _t("Descriptors"), glyphicon: 'fa-wrench'}));

        let actions = ['apply', 'cancel'];

        let BatchDescriptorContextView = __webpack_require__(74);
        let contextView = new BatchDescriptorContextView({actions: actions});
        contextLayout.showChildView('content', contextView);

        contextView.on("describable:cancel", function() {
            view.onCancel();
        });

        contextView.on("describable:apply", function() {
            view.onApply();
        });
    },

    onHideTab: function() {
        window.application.main.defaultRightView();
    }
});

module.exports = View;



/***/ }),
/* 228 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file batchpanel.js
 * @brief
 * @author Medhi BOULNEMOUR (INRA UMR1095)
 * @date 2017-11-03
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let BatchPanelModel = __webpack_require__(75);
let CountableCollection = __webpack_require__(9);

let Collection = CountableCollection.extend({
    url: function () {
        if (this.batch_id) {
            return window.application.url(['accession', 'batch', this.batch_id, 'panels'])
        } else {
            return window.application.url(['accession', 'batchpanel'])
        }
    },
    model: BatchPanelModel,

    initialize: function (options) {
        options || (options = {});

        Collection.__super__.initialize.apply(this, arguments);

        this.batch_id = options.batch_id;
    }
});

module.exports = Collection;


/***/ }),
/* 229 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file action.js
 * @brief
 * @author Frederic SCHERMA (INRA UMR1095)
 * @date 2017-12-08
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let ActionModel = __webpack_require__(39);
let CountableCollection = __webpack_require__(9);

let Collection = CountableCollection.extend({
    url: function () {
        return window.application.url(['accession', 'action'])
    },
    model: ActionModel,

    initialize: function (options) {
        options || (options = {});

        Collection.__super__.initialize.apply(this, arguments);

        // this.entityId = options.entityId;
        // this.entityType = options.entityType;
    }
});

module.exports = Collection;


/***/ }),
/* 230 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {/**
 * @file actionlist.js
 * @brief Batch actions list for a specific batch
 * @author Frederic SCHERMA (INRA UMR1095)
 * @date 2018-01-19
 * @copyright Copyright (c) 2018 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let ActionView = __webpack_require__(384);
let AdvancedTable = __webpack_require__(6);
let Dialog = __webpack_require__(5);
let DefaultLayout = __webpack_require__(3);
let TitleView = __webpack_require__(4);
let DescriptorsColumnsView = __webpack_require__(11);
let ActionModel = __webpack_require__(39);

let View = AdvancedTable.extend({
    template: __webpack_require__(16),
    className: "action-list advanced-table-container",
    childView: ActionView,
    childViewContainer: 'tbody.entity-list',
    userSettingVersion: '1.0',

    userSettingName: function () {
        return 'batch_action_list_columns';
    },

    defaultColumns: [
        {name: 'name', width: 'auto', sort_by: '+2'},
        {name: 'action_type', width: 'auto', sort_by: '+1'},
        {name: 'completed', width: 'auto', sort_by: '+0'},
        {name: 'created_date', width: 'auto', sort_by: null},
        {name: 'user', width: 'auto', sort_by: null},
    ],

    columnsOptions: {
        'name': {label: _t('Name'), width: 'auto', minWidth: true, event: 'view-action-details'},
        'action_type': {
            label: _t('Type'),
            width: 'auto',
            minWidth: true,
            field: 'name'
        },
        'completed': {
            label: _t('Completed'),
            width: 'auto',
            minWidth: true,
        },
        'created_date': {
            label: _t('Creation'),
            width: 'auto',
            minWidth: true
        },
        'user': {
            label: _t('Author'),
            width: 'auto',
            minWidth: true
        }
    },

    templateContext: function () {
        return {
            columnsList: this.displayedColumns,
            columnsOptions: this.getOption('columns')
        }
    },

    childViewOptions: function () {
        return {
            columnsList: this.displayedColumns,
            columnsOptions: this.getOption('columns')
        }
    },

    initialize: function (options) {
        View.__super__.initialize.apply(this, arguments);

        // this.listenTo(this.collection, 'reset', this.render, this);
    },

    onShowTab: function () {
        View.__super__.onShowTab.apply(this);

        let self = this;

        // query now to avoid useless queries
        this.query();

        let contextLayout = window.application.getView().getChildView('right');
        if (!contextLayout) {
            let DefaultLayout = __webpack_require__(3);
            contextLayout = new DefaultLayout();
            window.application.getView().showChildView('right', contextLayout);
        }

        let TitleView = __webpack_require__(4);
        contextLayout.showChildView('title', new TitleView({title: _t("Actions")}));

        let actions = [
        ];

        // @todo what needed
        // let ActionContextView = require('./actionlistcontext');
        // let contextView = new ActionContextView({actions: actions});
        // contextLayout.showChildView('content', contextView);
    },

    onHideTab: function () {
        window.application.main.defaultRightView();
    },
});

// support of descriptors columns extension
_.extend(View.prototype, DescriptorsColumnsView);

module.exports = View;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 231 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file panellayout.js
 * @brief
 * @author Medhi BOULNEMOUR (INRA UMR1095)
 * @date 2017-09-12
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let LayoutView = __webpack_require__(17);
let ContentBottomFooterLayout = __webpack_require__(25);
let ScrollingMoreView = __webpack_require__(10);
let EntityListFilterView = __webpack_require__(14);

let Layout = LayoutView.extend({
    template: __webpack_require__(387),
    templateContext: function () {
        return {
            acc_amount: this.model.get('accessions_amount')
        }
    },

    ui: {
        inputs_tab: 'a[aria-controls=accessions]',
        accessions_badge: '#accessions-badge'
    },

    regions: {
        'descriptors': "div.tab-pane[name=descriptors]",
        'accessions': "div.tab-pane[name=accessions]"
    },

    initialize: function (options) {
        Layout.__super__.initialize.apply(this, arguments);

        this.listenTo(this.model, 'change:layout', this.onLayoutChange, this);

        if (this.model.isNew()) {
            this.listenTo(this.model, 'change:id', this.onPanelCreate, this);
        }
    },

    onPanelCreate: function (model, value) {
        // re-render once created
        this.render();

        // and update history
        Backbone.history.navigate('app/accession/accessionpanel/' + this.model.get('id') + '/', {
            /*trigger: true,*/
            replace: false
        });
    },

    updateAccessionsAmount: function (nb) {
        this.ui.accessions_badge.html(nb);
        // this.childView('bottom').onUpdateCount(nb)
        // this.render()
    },

    disableEntitiesTab: function () {
        this.ui.inputs_tab.parent().addClass('disabled');
    },

    enableTabs: function () {
        this.ui.inputs_tab.parent().removeClass('disabled');
    },

    onLayoutChange: function (model, value) {
        let panelLayout = this;
        if (value == null) {
            let AccessionPanelDescriptorCreateView = __webpack_require__(232);
            let accessionPanelDescriptorCreateView = new AccessionPanelDescriptorCreateView({model: model});

            panelLayout.showChildView('descriptors', accessionPanelDescriptorCreateView);

            if (panelLayout.initialTab === 'descriptors') {
                accessionPanelDescriptorCreateView.onShowTab();
            }
        } else {
            let panelLayout = this;
            let DescriptorCollection = __webpack_require__(18);

            // get the layout before creating the view
            $.ajax({
                method: "GET",
                url: window.application.url(['descriptor', 'layout', value]),
                dataType: 'json'
            }).done(function (data) {
                panelLayout.descriptorCollection = new DescriptorCollection([], {
                    model_id: data.id
                });
                panelLayout.descriptorCollection.fetch().then(function () {
                    if (!panelLayout.isRendered()) {
                        return;
                    }

                    let PanelDescriptorView = __webpack_require__(76);
                    let panelDescriptorView = new PanelDescriptorView({
                        model: model,
                        layoutData: data,
                        descriptorCollection: panelLayout.descriptorCollection
                    });
                    panelLayout.showChildView('descriptors', panelDescriptorView);

                    if (panelLayout.initialTab === 'descriptors') {
                        panelDescriptorView.onShowTab();
                    }
                });
            });
        }
    },

    onRender: function () {
        let panelLayout = this;

        if (this.model.isNew()) {
            this.model.save();
        }

        // accession tab
        let AccessionCollection = __webpack_require__(45);
        let accessionPanelAccessions = new AccessionCollection([], {panel_id: this.model.get('id')});

        let columns = window.application.main.cache.lookup({
            type: 'entity_columns',
            format: {model: 'accession.accession'}
        });

        columns.done(function (data) {
            if (!panelLayout.isRendered()) {
                return;
            }

            let AccessionListView = __webpack_require__(389);
            let accessionListView = new AccessionListView({
                collection: accessionPanelAccessions,
                model: panelLayout.model,
                columns: data[0].value,
                collectionEvents: {
                    'update': 'updateAmount'
                },
                layoutView: panelLayout,
                relatedEntity: {
                    'content_type': 'accession.accessionpanel',
                    'id': panelLayout.model.id
                }
            });

            let contentBottomFooterLayout = new ContentBottomFooterLayout();
            panelLayout.showChildView('accessions', contentBottomFooterLayout);

            contentBottomFooterLayout.showChildView('content', accessionListView);
            contentBottomFooterLayout.showChildView('bottom', new ScrollingMoreView({
                collection: accessionPanelAccessions,
                targetView: accessionListView
            }));

            contentBottomFooterLayout.showChildView('footer', new EntityListFilterView({
                collection: accessionPanelAccessions,
                columns: data[0].value
            }));

            accessionListView.query();

            if (panelLayout.initialTab === 'accessions') {
                accessionListView.onShowTab();
            }
        });

        this.onLayoutChange(this.model, this.model.get('layout'));
        this.enableTabs();
    }
});

module.exports = Layout;


/***/ }),
/* 232 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file paneldescriptorcreate.js
 * @brief
 * @author Medhi BOULNEMOUR (INRA UMR1095)
 * @date 2017-09-18
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);
let Dialog = __webpack_require__(5);

let View = Marionette.View.extend({
        tagName: 'div',
        template: __webpack_require__(233),

        ui: {
            defines: 'button.defines'
        },

        events: {
            'click @ui.defines': 'onDefine'
        },

        initialize: function (options) {
        },

        onRender: function () {
        },

        onDefine: function (e) {
            let model = this.model;

            $.ajax({
                type: "GET",
                url: window.application.url(['descriptor', 'layout', 'for-describable', 'accession.accessionpanel']),
                dataType: 'json'
            }).done(function (data) {
                let CreateDescriptorView = Dialog.extend({
                    attributes: {
                        'id': 'dlg_create_descriptor'
                    },
                    template: __webpack_require__(234),
                    templateContext: function () {
                        return {
                            layouts: data
                        };
                    },

                    ui: {
                        validate: "button.continue",
                        layout: "#layout"
                    },

                    events: {
                        'click @ui.validate': 'onContinue'
                    },

                    onRender: function () {
                        CreateDescriptorView.__super__.onRender.apply(this);

                        this.ui.layout.selectpicker({});
                    },

                    onBeforeDestroy: function () {
                        this.ui.layout.selectpicker('destroy');

                        CreateDescriptorView.__super__.onBeforeDestroy.apply(this);
                    },

                    onContinue: function () {
                        let view = this;
                        let model = this.getOption('model');

                        if (this.ui.layout.val() != null) {
                            let layoutId = parseInt(this.ui.layout.val());

                            view.destroy();

                            // update the descriptor part of the accessionPanel layout
                            // let accessionPanelLayout = application.main.viewContent();

                            // patch the accessionPanel descriptor meta model
                            model.save(
                                {
                                    layout: layoutId
                                },

                                {
                                    patch: true,
                                    wait: false
                                }
                            )

                            // $.ajax({
                            //     method: "GET",
                            //     url: window.application.url(['descriptor', 'layout', layoutId, 'layout']),
                            //     dataType: 'json'
                            // }).done(function (data) {
                            //     let accessionPanelDescriptorView = new AccessionPanelDescriptorView({
                            //         model: model,
                            //         layoutData: data
                            //     });
                            //     accessionPanelLayout.showChildView('descriptors', accessionPanelDescriptorView);
                            // });
                        }
                    }
                });

                let createDescriptorView = new CreateDescriptorView({model: model});
                createDescriptorView.render();
            })
            ;
        },

        onShowTab: function () {
            let view = this;

            let DefaultLayout = __webpack_require__(3);
            let contextLayout = new DefaultLayout();
            window.application.getView().showChildView('right', contextLayout);

            let actions = [];

            actions.push('add');

            let AccessionPanelDescriptorContextView = __webpack_require__(235);
            let contextView = new AccessionPanelDescriptorContextView({actions: actions});

            let TitleView = __webpack_require__(4);
            contextLayout.showChildView('title', new TitleView({title: _t("Descriptors"), glyphicon: 'fa-wrench'}));
            contextLayout.showChildView('content', contextView);

            contextView.on("layout:add", function () {
                view.onDefine();
            });
        }
    })
;

module.exports = View;

/***/ }),
/* 233 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div style="margin: 15px"><p>' +
__e( _t("No layout is defined for this panel.") ) +
'</p><button type="button" class="btn btn-success defines">' +
__e( _t("Defines") ) +
'</button></div>';

}
return __p
};

/*
original source:

<div style="margin: 15px"><p><%- _t("No layout is defined for this panel.") %></p><button type="button" class="btn btn-success defines"><%- _t("Defines") %></button></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 234 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
with (obj) {
__p += '<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title">' +
__e( _t("Defines a layout of descriptors") ) +
'</h4></div><div class="modal-body"><form><div class="form-group"><label class="control-label" for="layout">' +
__e( _t("Template") ) +
'</label><select id="layout" style="width:100%" class="form-control"> ';
 _.each(layouts, function(layout) { ;
__p += ' <option value="' +
__e( layout.id ) +
'">' +
__e( layout.label ) +
'</option> ';
 }) ;
__p += ' </select></div></form></div><div class="modal-footer"><button type="button" class="btn btn-default cancel" data-dismiss="modal">' +
__e( _t("Cancel") ) +
'</button> <button type="button" class="btn btn-success continue">' +
__e( _t("Continue") ) +
'</button></div></div></div>';

}
return __p
};

/*
original source:

<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title"><%- _t("Defines a layout of descriptors") %></h4></div><div class="modal-body"><form><div class="form-group"><label class="control-label" for="layout"><%- _t("Template") %></label><select id="layout" style="width:100%" class="form-control"> <% _.each(layouts, function(layout) { %> <option value="<%- layout.id %>"><%- layout.label %></option> <% }) %> </select></div></form></div><div class="modal-footer"><button type="button" class="btn btn-default cancel" data-dismiss="modal"><%- _t("Cancel") %></button> <button type="button" class="btn btn-success continue"><%- _t("Continue") %></button></div></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 235 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file accessionpaneldescriptorcontext.js
 * @brief
 * @author Medhi BOULNEMOUR (INRA UMR1095)
 * @date 2017-09-15
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);

let View = Marionette.View.extend({
    tagName: 'div',
    template: __webpack_require__(15),
    className: "context-panel",
    templateContext: function () {
        return {
            actions: this.getOption('actions'),
            options: {
                'modify': {className: 'btn-default', label: _t('Modify')},
                'apply': {className: 'btn-success', label: _t('Apply')},
                'cancel': {className: 'btn-default', label: _t('Cancel')},
                'add': {className: 'btn-success', label: _t('Defines')}
            }
        }
    },

    ui: {
        'modify': 'button[name="modify"]',
        'apply': 'button[name="apply"]',
        'cancel': 'button[name="cancel"]',
        'add': 'button[name="add"]'
    },

    triggers: {
        "click @ui.modify": "describable:modify",
        "click @ui.apply": "describable:apply",
        "click @ui.cancel": "describable:cancel",
        "click @ui.add": "layout:add"
    },

    initialize: function(options) {
        options || (options = {actions: []});
    }
});

module.exports = View;


/***/ }),
/* 236 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title">' +
__e( _t("Create a panel from the selection") ) +
'</h4></div><div class="modal-body"><form><div class="form-group"><label class="control-label" for="panel_name">' +
__e( _t("Panel name") ) +
'</label><input class="form-control name" id="panel_name" type="text" name="panel" value="" maxlength="128" autocomplete="off" autofocus="autofocus" style="width:100%"></div></form></div><div class="modal-footer"><button type="button" class="btn btn-default cancel" data-dismiss="modal">' +
__e( _t("Cancel") ) +
' </button> <button type="button" class="btn btn-success create">' +
__e( _t("Create") ) +
'</button></div></div></div>';

}
return __p
};

/*
original source:

<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title"><%- _t("Create a panel from the selection") %></h4></div><div class="modal-body"><form><div class="form-group"><label class="control-label" for="panel_name"><%- _t("Panel name") %></label><input class="form-control name" id="panel_name" type="text" name="panel" value="" maxlength="128" autocomplete="off" autofocus="autofocus" style="width:100%"></div></form></div><div class="modal-footer"><button type="button" class="btn btn-default cancel" data-dismiss="modal"><%- _t("Cancel") %> </button> <button type="button" class="btn btn-success create"><%- _t("Create") %></button></div></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 237 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file panellayout.js
 * @brief
 * @author Medhi BOULNEMOUR (INRA UMR1095)
 * @date 2017-11-06
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let LayoutView = __webpack_require__(17);
let ContentBottomFooterLayout = __webpack_require__(25);
let ScrollingMoreView = __webpack_require__(10);
let EntityListFilterView = __webpack_require__(14);
let DescriptorCollection = __webpack_require__(18);

let Layout = LayoutView.extend({
    template: __webpack_require__(393),
    templateContext: function () {
        return {
            bat_amount: this.model.get('batches_amount')
        }
    },

    ui: {
        batches_tab: 'a[aria-controls=batches]',
        batches_badge: '#batches-badge'
    },

    regions: {
        'descriptors': "div.tab-pane[name=descriptors]",
        'batches': "div.tab-pane[name=batches]"
    },

    initialize: function (options) {
        Layout.__super__.initialize.apply(this, arguments);

        this.listenTo(this.model, 'change:layout', this.onLayoutChange, this);

        if (this.model.isNew()) {
            this.listenTo(this.model, 'change:id', this.onPanelCreate, this);
        }
    },

    onPanelCreate: function () {
        // re-render once created
        this.render();

        // and update history
        Backbone.history.navigate('app/accession/batchpanel/' + this.model.get('id') + '/', {
            /*trigger: true,*/
            replace: false
        });
    },

    updateBatchesAmount: function (nb) {
        this.ui.batches_badge.html(nb);
        // this.childView('bottom').onUpdateCount(nb)
        // this.render()
    },

    disableEntitiesTab: function () {
        this.ui.batches_tab.parent().addClass('disabled');
    },

    enableTabs: function () {
        this.ui.batches_tab.parent().removeClass('disabled');
    },

    onLayoutChange: function (model, value) {
        let panelLayout = this;
        if (value == null) {
            let BatchPanelDescriptorCreateView = __webpack_require__(238);
            let batchPanelDescriptorCreateView = new BatchPanelDescriptorCreateView({model: model});

            panelLayout.showChildView('descriptors', batchPanelDescriptorCreateView);

            if (panelLayout.initialTab === 'descriptors') {
                batchPanelDescriptorCreateView.onShowTab();
            }

        } else {
            // get the layout before creating the view
            $.ajax({
                method: "GET",
                url: window.application.url(['descriptor', 'layout', value]),
                dataType: 'json'
            }).done(function (data) {

                panelLayout.descriptorCollection = new DescriptorCollection([], {
                    model_id: data.id
                });

                panelLayout.descriptorCollection.fetch().then(function () {
                    let PanelDescriptorView = __webpack_require__(77);
                    let panelDescriptorView = new PanelDescriptorView({
                        model: model,
                        layoutData: data,
                        descriptorCollection: panelLayout.descriptorCollection
                    });
                    panelLayout.showChildView('descriptors', panelDescriptorView);

                    if (panelLayout.initialTab === 'descriptors') {
                        panelDescriptorView.onShowTab();
                    }
                });
            });
        }
    },

    onRender: function () {
        let panelLayout = this;

        if (this.model.isNew()) {
            this.model.save();
        }

        // batch tab
        let BatchCollection = __webpack_require__(47);
        let batchPanelBatches = new BatchCollection([], {panel_id: this.model.get('id')});


        let columns = application.main.cache.lookup({
            type: 'entity_columns',
            format: {model: 'accession.batch'}
        });

        columns.done(function (data) {
            if (!panelLayout.isRendered()) {
                return;
            }

            let BatchListView = __webpack_require__(395);
            let batchListView = new BatchListView({
                collection: batchPanelBatches,
                model: panelLayout.model,
                columns: data[0].value,
                collectionEvents: {
                    'update': 'updateAmount'
                },
                layoutView: panelLayout,
                relatedEntity: {
                    'content_type': 'accession.batchpanel',
                    'id': panelLayout.model.id
                }
            });

            let contentBottomFooterLayout = new ContentBottomFooterLayout();
            panelLayout.showChildView('batches', contentBottomFooterLayout);

            contentBottomFooterLayout.showChildView('content', batchListView);
            contentBottomFooterLayout.showChildView('bottom', new ScrollingMoreView({
                collection: batchPanelBatches,
                targetView: batchListView
            }));

            contentBottomFooterLayout.showChildView('footer', new EntityListFilterView({
                collection: batchPanelBatches,
                columns: data[0].value
            }));

            batchListView.query();
            batchListView.updateAmount(); // todo: temporary fix... not necessary for ../accession/panellayout.js! why?

            if (panelLayout.initialTab === 'batches') {
                batchListView.onShowTab();
            }
        });

        this.onLayoutChange(this.model, this.model.get('layout'));
        this.enableTabs();
    }
});

module.exports = Layout;


/***/ }),
/* 238 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file paneldescriptorcreate.js
 * @brief
 * @author Medhi BOULNEMOUR (INRA UMR1095)
 * @date 2017-11-06
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);
let Dialog = __webpack_require__(5);

let View = Marionette.View.extend({
        tagName: 'div',
        template: __webpack_require__(233),

        ui: {
            defines: 'button.defines'
        },

        events: {
            'click @ui.defines': 'onDefine'
        },

        initialize: function (options) {
        },

        onRender: function () {
        },

        onDefine: function (e) {
            let model = this.model;

            $.ajax({
                type: "GET",
                url: window.application.url(['descriptor', 'layout', 'for-describable', 'accession.batchpanel']),
                dataType: 'json'
            }).done(function (data) {
                let CreateDescriptorView = Dialog.extend({
                    attributes: {
                        'id': 'dlg_create_descriptor'
                    },
                    template: __webpack_require__(234),
                    templateContext: function () {
                        return {
                            layouts: data
                        };
                    },

                    ui: {
                        validate: "button.continue",
                        layout: "#layout"
                    },

                    events: {
                        'click @ui.validate': 'onContinue'
                    },

                    onRender: function () {
                        CreateDescriptorView.__super__.onRender.apply(this);

                        this.ui.layout.selectpicker({});
                    },

                    onBeforeDestroy: function () {
                        this.ui.layout.selectpicker('destroy');

                        CreateDescriptorView.__super__.onBeforeDestroy.apply(this);
                    },

                    onContinue: function () {
                        let view = this;
                        let model = this.getOption('model');

                        if (this.ui.layout.val() != null) {
                            let layoutId = parseInt(this.ui.layout.val());

                            view.destroy();

                            model.save(
                                {
                                    layout: layoutId
                                },

                                {
                                    patch: true,
                                    wait: false
                                }
                            )
                        }
                    }
                });

                let createDescriptorView = new CreateDescriptorView({model: model});
                createDescriptorView.render();
            })
            ;
        },

        onShowTab: function () {
            let view = this;

            let DefaultLayout = __webpack_require__(3);
            let contextLayout = new DefaultLayout();
            window.application.getView().showChildView('right', contextLayout);

            let actions = [];

            actions.push('add');

            let BatchPanelDescriptorContextView = __webpack_require__(239);
            let contextView = new BatchPanelDescriptorContextView({actions: actions});

            let TitleView = __webpack_require__(4);
            contextLayout.showChildView('title', new TitleView({title: _t("Descriptors"), glyphicon: 'fa-wrench'}));
            contextLayout.showChildView('content', contextView);

            contextView.on("layout:add", function () {
                view.onDefine();
            });
        }
    })
;

module.exports = View;


/***/ }),
/* 239 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file paneldescriptorcontext.js
 * @brief
 * @author Medhi BOULNEMOUR (INRA UMR1095)
 * @date 2017-11-07
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);

let View = Marionette.View.extend({
    tagName: 'div',
    template: __webpack_require__(15),
    className: "context-panel",
    templateContext: function () {
        return {
            actions: this.getOption('actions'),
            options: {
                'modify': {className: 'btn-default', label: _t('Modify')},
                'apply': {className: 'btn-success', label: _t('Apply')},
                'cancel': {className: 'btn-default', label: _t('Cancel')},
                'add': {className: 'btn-success', label: _t('Defines')}
            }
        }
    },

    ui: {
        'modify': 'button[name="modify"]',
        'apply': 'button[name="apply"]',
        'cancel': 'button[name="cancel"]',
        'add': 'button[name="add"]'
    },

    triggers: {
        "click @ui.modify": "describable:modify",
        "click @ui.apply": "describable:apply",
        "click @ui.cancel": "describable:cancel",
        "click @ui.add": "layout:add"
    },

    initialize: function(options) {
        options || (options = {actions: []});
    }
});

module.exports = View;


/***/ }),
/* 240 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file actiontypelayout.js
 * @brief Optimized layout for action details
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-12-07
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let LayoutView = __webpack_require__(17);
let ActionTypeModel = __webpack_require__(38);
let Dialog = __webpack_require__(5);

let Layout = LayoutView.extend({
    template: __webpack_require__(399),

    attributes: {
        style: "height: 100%;"
    },

    ui: {
        general_tab: 'a[aria-controls=general]',
        steps_tab: 'a[aria-controls=steps]',
        name: 'input[name=name]',
        description: 'textarea[name=description]',
        config_save: 'button[name=save]',
        steps_group: 'div[name=steps-group]',
        delete_step: 'span[name=delete-step]',
        step_description: 'p[name=step-description]',
        add_step: 'div.panel-ghost'
    },

    regions: {
        'general': "div.tab-pane[name=general]",
        'steps': "div.tab-pane[name=steps]",
        'steps-group': 'div[name=steps-group]',
        'contextual': "div.contextual-region"
    },

    events: {
        'click @ui.config_save': 'onUpdateConfig',
        'click @ui.delete_step': 'onDeleteStep',
        'click @ui.add_step': 'onAddStep'
    },

    initialize: function (model, options) {
        Layout.__super__.initialize.apply(this, arguments);

        if (this.model.isNew()) {
            this.listenTo(this.model, 'change:id', this.onActionTypeCreate, this);
        }

        // naming options
        let self = this;
        let namingOptions = Object.resolve('data.naming_options', this.model.get('format')) || [];

        this.namingOptions = null;
        this.namingFormat = null;

        self.namingOptionsPromise = $.ajax({
            type: "GET",
            url: window.application.url(['accession', 'naming', 'batch']),
            dataType: 'json',
        }).done(function(data) {
            let len = (data.format.match(/{CONST}/g) || []).length;

            if (namingOptions.length !== len) {
                namingOptions = new Array(len);
            }

            self.namingOptions = namingOptions;
            self.namingFormat = data.format;
        });
    },

    onActionTypeCreate: function () {
        // re-render once created
        this.render();

        // and update history
        Backbone.history.navigate('app/accession/actiontype/' + this.model.get('id') + '/', {
            /*trigger: true,*/
            replace: false
        });
    },

    enableTabs: function () {
        this.ui.steps_tab.parent().removeClass('disabled');
    },

    storeStepData: function(stepIndex) {
        // retrieve step data from a specific step model and store it into this model
        this.getChildView('step' + stepIndex).storeData();
    },

    setupStructure: function(steps) {
        for (let i = 0; i < steps.length; ++i) {
            this.appendStepStructure(i !== 0);
        }
    },

    setupAllSteps: function(steps) {
        for (let i = 0; i < steps.length; ++i) {
            let step = steps[i];
            if (step !== null) {
                this.setupStepData(i, step);
            }
        }
    },

    setupStepData: function(stepIndex, stepData) {
        if (stepData === null) {
            return;
        }

        let region = this.getRegion('step' + stepIndex);
        if (!region) {
            return;
        }

        region.$el.empty();

        let Element = window.application.accession.actions.getElement(stepData.type);
        if (Element && Element.ActionStepFormatDetailsView) {
            this.showChildView('step' + stepIndex, new Element.ActionStepFormatDetailsView({
                model: this.model,
                namingOptions: this.namingOptions,
                namingFormat: this.namingFormat,
                stepIndex: stepIndex
            }));
        }

        if (Element) {
            let descr = $('<div><p class="well well-sm" name="step-description">' + new Element().description + '</p></div>');
            region.$el.prepend(descr);

            let stepFormat = window.application.accession.collections.actionStepFormats.findWhere({id: stepData.type});
            this.$el.find('div[panel-id=' + stepIndex + ']').find('span[name=step-label]').text((stepIndex+1) + " - " + stepFormat.get('label'));
        }
    },

    appendStepStructure: function(collapsed) {
        let self = this;
        let i = this.ui.steps_group.children('div.panel').length;

        let panel = $('<div class="panel panel-default" style="margin: 10px 0px;"></div>');
        panel.attr('panel-id', i);

        let heading = $('<div class="panel-heading unselectable current" data-toggle="tooltip" data-placement="left" title="' + _t('Collapse/Expand') + '">');
        panel.append(heading);

        // heading title
        let title = $('<span name="step-label" class="action"></span>').on('click', function() {
            self.onChangeFormatType(parseInt(panel.attr('panel-id')));
        });
        heading.append(title);

        // collapse button and options dropdown
        let helpers = $('<div class="pull-right"><div class="btn-group btn-group-sm"><a class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="action fa fa-lg fa-cog" style="color: gray"></span></a></div><a class="accordion-toggle" data-toggle="collapse" href="#action_step' + i + '" style="margin-left: 20px;"></a></div>');
        if (collapsed) {
            helpers.find('a.accordion-toggle').addClass('collapsed');
        }

        let ul = $('<ul class="dropdown-menu dropdown-menu-right">');

        helpers.children('div.btn-group').append(ul);
        ul.append($('<li><a class="action step-format">' + _t("Change format") + '</a></li>').on('click', function() {
            // from attr because can change during remove
            self.onChangeFormatType(parseInt(panel.attr('panel-id')));
        }));
        ul.append($('<li role="separator" class="divider"></li>'));
        ul.append($('<li><a class="action delete-step">' + _t("Remove") + '</a></li>').on('click', function() {
            self.onDeleteStep(parseInt(panel.attr('panel-id')));
        }));

        heading.append(helpers);

        // toggle collapse on double click on heading
        heading.on('dblclick', function(e) {
            heading.parent().children('div.panel-collapse').collapse('toggle');
            return true;
        });

        // collapse-able inner part
        let panelCollapse = $('<div class="panel-collapse collapse"></div>');
        panelCollapse.attr('id', 'action_step' + i);
        if (!collapsed) {
            panelCollapse.addClass('in');
        }
        panel.append(panelCollapse);

        // panel-body make an expand issue so don't use it... it is the content part related to the dynamic region
        let content = $('<div class="panel-body-no" style="margin: 10px;"></div>');
        panelCollapse.append(content);

        this.ui.steps_group.append(panel);
        this.addRegion('step' + i, '#action_step' + i + ' > div');
    },

    checkFormatConsistency(prevStepFormat, stepFormat) {
        let element = window.application.accession.actions.newElement(stepFormat);
        let prevElement = window.application.accession.actions.newElement(prevStepFormat);

        if (element.acceptFormat.length !== prevElement.dataFormat.length) {
            return false;
        } else {
            for (let i = 0; i < element.acceptFormat.length; ++i) {
                if (prevElement.dataFormat[i] !== element.acceptFormat[i]) {
                    return false;
                }
            }
        }

        return true;
    },

    addStepData: function(stepFormat) {
        if (stepFormat) {
            let i = this.model.get('format').steps.length;
            let stepData = {};

            let element = window.application.accession.actions.newElement(stepFormat);
            if (element) {
                stepData = element.defaultFormat();
            }

            if (i > 0) {
                let prevStepFormat = this.model.get('format').steps[i-1].type;
                if (!this.checkFormatConsistency(prevStepFormat, stepFormat)) {
                    $.alert.warning(_t("The input data format is not consistent with the output data format of the previous step"));
                    return;
                }
            }

            this.appendStepStructure(false);

            stepData.index = i;
            stepData.type = stepFormat;

            this.model.get('format').steps.push(stepData);
            this.setupStepData(i, stepData);
        }
    },

    disableStepsTab: function () {
        this.ui.steps_tab.parent().addClass('disabled');
    },

    onRender: function () {
        let actionTypeLayout = this;

        if (actionTypeLayout.model.isNew()) {
            this.disableStepsTab();
        } else {
            this.namingOptionsPromise.then(function() {
                let data = actionTypeLayout.model.get('format').steps;

                actionTypeLayout.setupStructure(data);
                actionTypeLayout.setupAllSteps(data);

                actionTypeLayout.enableTabs();
            });
        }
    },

    onBeforeDetach: function () {
    },

    onUpdateConfig: function() {
        let name = this.ui.name.val().trim();
        let description = this.ui.description.val().trim();

        let model = this.model;
        let format = model.get('format');

        // store possible last changes on current step
        for (let i = 0; i < format.steps.length; ++i) {
            this.storeStepData(i);
        }

        if (model.isNew()) {
            model.save({name: name, description: description, format: format}, {wait: true}).then(function () {
                $.alert.success(_t("Successfully changed !"));
                Backbone.history.navigate('app/accession/actiontype/' + model.get('id') + '/', {trigger: true, replace: true});
            });
        } else {
            model.save({name: name, description: description, format: format}, {wait: true, patch: true}).then(function () {
                $.alert.success(_t("Successfully changed !"));
                Backbone.history.navigate('app/accession/actiontype/' + model.get('id') + '/', {trigger: true, replace: true});
            });
        }
    },

    onChangeFormatType: function (stepIndex) {
        let ChangeStepDialog = Dialog.extend({
            template: __webpack_require__(400),

            ui: {
                step_format: 'select[name=step-format]',
                change_btn: 'button.change'
            },

            events: {
                'click @ui.change_btn': 'onChange'
            },

            triggers: {
                "click @ui.change_btn": "step:change",
            },

            initialize: function (options) {
                ChangeStepDialog.__super__.initialize.apply(this, arguments);
            },

            onRender: function () {
                ChangeStepDialog.__super__.onRender.apply(this);

                window.application.accession.views.actionStepFormats.drawSelect(this.ui.step_format, true, false);
            },

            onBeforeDestroy: function () {
                this.ui.step_format.selectpicker('destroy');

                ChangeStepDialog.__super__.onBeforeDestroy.apply(this);
            },

            onChange: function () {
            }

        });

        let self = this;
        let changeStepDialog = new ChangeStepDialog({
            model: this.model
        });
        changeStepDialog.on('step:change', function () {
            self.changeStepFormat(stepIndex, changeStepDialog.ui.step_format.val());
            changeStepDialog.destroy();
        });
        changeStepDialog.render();
    },

    changeStepFormat: function(stepIndex, stepFormat) {
        let stepData = {};
        let i = this.model.get('format').steps.length;

        if (i > 0) {
            let prevStepFormat = this.model.get('format').steps[i-1].type;
            if (!this.checkFormatConsistency(prevStepFormat, stepFormat)) {
                $.alert.warning(_t("The input data format is not consistent with the output data format of the previous step"));
                return;
            }
        }

        let element = window.application.accession.actions.newElement(stepFormat);
        if (element) {
            stepData = element.defaultFormat();
        }

        stepData.index = stepIndex;
        stepData.type = stepFormat;

        this.model.get('format').steps[stepIndex] = stepData;
        if (stepData !== null) {
            this.setupStepData(stepIndex, stepData);
        }
    },

    onDeleteStep: function (stepIndex) {
        let steps = this.model.get('format').steps;
        let stepsCount = steps.length;

        steps.splice(stepIndex, 1);

        // clear the step region
        this.getRegion('step' + stepIndex).$el.find('div.step-description').remove();
        this.getRegion('step' + stepIndex).empty();

        // shift from top any below steps
        let newI = stepIndex;
        for (let oldI = stepIndex+1; oldI < stepsCount; ++oldI) {
            let oldRegionName = 'step' + oldI;

            this.getRegion(oldRegionName).$el.find('div.step-description').remove();
            this.getRegion(oldRegionName).empty();

            this.setupStepData(newI, steps[newI]);

            ++newI;
        }

        // remove the last remaining step
        this.removeRegion('step' + newI);
        this.ui.steps_group.children('div[panel-id=' + newI + ']').remove();
    },

    onAddStep: function() {
        let AddStepDialog = Dialog.extend({
            template: __webpack_require__(401),

            ui: {
                step_format: 'select[name=step-format]',
                create_btn: 'button.create'
            },

            events: {
                'click @ui.create_btn': 'onCreate'
            },

            triggers: {
                "click @ui.create_btn": "step:create",
            },

            initialize: function (options) {
                AddStepDialog.__super__.initialize.apply(this, arguments);
            },

            onRender: function () {
                AddStepDialog.__super__.onRender.apply(this);

                window.application.accession.views.actionStepFormats.drawSelect(this.ui.step_format, true, false);
            },

            onBeforeDetach: function() {
                this.ui.step_format.selectpicker('destroy');
            },

            onCreate: function () {
            }

        });

        let self = this;
        let addStepDialog = new AddStepDialog({
            model: this.model
        });
        addStepDialog.on('step:create', function() {
            self.addStepData(addStepDialog.ui.step_format.val());
            addStepDialog.destroy();
        });
        addStepDialog.render();
    }
});

module.exports = Layout;


/***/ }),
/* 241 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file actionlayout.js
 * @brief Optimized layout for action details
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2018-02-13
 * @copyright Copyright (c) 2018 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let LayoutView = __webpack_require__(17);
let ActionModel = __webpack_require__(39);
let ActionTypeModel = __webpack_require__(38);
let ScrollingMoreView = __webpack_require__(10);
let ContentBottomLayout = __webpack_require__(66);

let Layout = LayoutView.extend({
    template: __webpack_require__(404),

    attributes: {
        style: "height: 100%;"
    },

    ui: {
        general_tab: 'a[aria-controls=general]',
        steps_tab: 'a[aria-controls=steps]',
        todo_tab: 'a[aria-controls=todo-entities]',
        done_tab: 'a[aria-controls=done-entities]',
        description: 'textarea[name=description]',
        action_type: 'input[name=action-type]',
        name: 'input[name=name]',
        username: 'input[name=username]',
        save: 'button[name=save]',
        steps_group: 'div[name=steps-group]'
    },

    regions: {
        'general': "div.tab-pane[name=general]",
        'steps': "div.tab-pane[name=steps]",
        'steps-group': 'div[name=steps-group]',
        'todo-entities': 'div[name=todo-content]',
        'done-entities': 'div[name=done-content]'
    },

    events: {
        'click @ui.save': 'onSaveAction'
    },

    // steps states consts
    STEP_INIT: 0,
    STEP_SETUP: 1,
    STEP_PROCESS: 2,
    STEP_DONE: 3,

    initialize: function (model, options) {
        Layout.__super__.initialize.apply(this, arguments);

        if (this.model.isNew()) {
            this.listenTo(this.model, 'change:id', this.onActionCreate, this);
        } else {
            this.listenTo(this.model, 'change:data', this.onActionUpdate, this);
        }

        // naming options
        let self = this;
        let namingOptions = Object.resolve('data.naming_options', this.model.get('format')) || [];

        this.actionType = new ActionTypeModel({id: this.model.get('action_type')});
        this.actionTypePromise = this.actionType.fetch();

        this.namingOptions = null;
        this.namingFormat = null;
        this.currentStepIndex = -1;

        self.namingOptionsPromise = $.ajax({
            type: "GET",
            url: window.application.url(['accession', 'naming', 'batch']),
            dataType: 'json',
        }).done(function(data) {
            let len = (data.format.match(/{CONST}/g) || []).length;

            if (namingOptions.length !== len) {
                namingOptions = new Array(len);
            }

            self.namingOptions = namingOptions;
            self.namingFormat = data.format;
        });
    },

    onActionCreate: function () {
        // re-render once created
        this.render();

        // and update history
        Backbone.history.navigate('app/accession/actiontype/' + this.model.get('id') + '/', {
            /*trigger: true,*/
            replace: false
        });
    },

    onActionUpdate: function() {
        this.setupAllSteps(this.actionType.attributes);
    },

    enableTabs: function () {
        this.ui.steps_tab.parent().removeClass('disabled');
    },

    disableStepsTab: function () {
        this.ui.steps_tab.parent().addClass('disabled');
    },

    disableTodoTab: function () {
        this.ui.todo_tab.parent().addClass('disabled');
    },

    disableDoneTab: function () {
        this.ui.done_tab.parent().addClass('disabled');
    },

    enableTodoTab: function () {
        this.ui.todo_tab.parent().removeClass('disabled');
    },

    enableDoneTab: function () {
        this.ui.done_tab.parent().removeClass('disabled');
    },

    collapseStep: function (stepIndex, collapsed) {
        if (stepIndex < this.actionType.attributes['format']['steps'].length) {
            this.$el.find('#action_step' + stepIndex).collapse(collapsed ? 'hide' : 'show');
        }
    },

    setupProgression: function() {
        // @todo
    },

    setupStepData: function(stepIndex, stepFormat, readOnly) {
        if (stepFormat === null) {
            return;
        }

        let region = this.getRegion('step' + stepIndex);
        if (!region) {
            return;
        }

        region.$el.empty();

        // default no working tabs
        this.disableTodoTab();
        this.disableDoneTab();

        let stepData = this.stepData(stepIndex);

        let Element = window.application.accession.actions.getElement(stepFormat.id);
        if (Element && Element.ActionStepReadView && readOnly) {
            this.showChildView('step' + stepIndex, new Element.ActionStepReadView({
                model: this.model,
                namingOptions: this.namingOptions,
                namingFormat: this.namingFormat,
                stepIndex: stepIndex
            }));
        } else if (Element && Element.ActionStepProcessView && !readOnly) {
           let processView = new Element.ActionStepProcessView({
                model: this.model,
                namingOptions: this.namingOptions,
                namingFormat: this.namingFormat,
                stepIndex: stepIndex
            });

            this.showChildView('step' + stepIndex, processView);

            // accessible working tabs for iterative or user action step type and only from at least setup step state
            if (stepData.state >= this.STEP_SETUP && Element.type === Element.ACTION_TYPE_ITERATIVE || Element.type === Element.ACTION_TYPE_USER) {
                this.enableTodoTab();
                this.enableDoneTab();

                processView.showTodoPanel(this.getRegion('todo-entities'));
                processView.showDonePanel(this.getRegion('done-entities'));
            }
        } else {
            this.getRegion('todo-entities').empty();
            this.getRegion('done-entities').empty()
        }

        let iterative = false;

        if (Element) {
            let element = new Element();
            iterative = element.type === Element.ACTION_TYPE_ITERATIVE;

            let descr = $('<div><p class="well well-sm" name="step-description">' + element.description + '</p></div>');
            region.$el.prepend(descr);
        }

        // according to the state of the step adapts the view
        let step = this.stepData(stepIndex);

        if (step && !readOnly) {
            let btnGroup = $('<div class="form-group text-center btn-group" role="group">');
            let resetBtn = $('<button type="button" name="step-reset" class="btn btn-warning btn-secondary"><span class="fa fa-eraser">&nbsp;</span>' + _t('Clear selections') + '</button>');
            let setupBtn = $('<button type="button" name="step-setup" class="btn btn-info btn-secondary"><span class="fa fa-upload">&nbsp;</span>' + _t('Setup selections') + '</button>');
            let iterateBtn = $('<button type="button" name="step-iterate" class="btn btn-success btn-secondary"><span class="fa fa-tasks">&nbsp;</span>' + _t('Progression') + '</button>');
            let processBtn = $('<button type="button" name="step-process" class="btn btn-success btn-secondary">' + _t('Realize') + '&nbsp;<span class="fa fa-step-forward"></span></button>');

            btnGroup.append(resetBtn).append(setupBtn);

            if (iterative) {
                btnGroup.append(iterateBtn);
            } else {
                btnGroup.append(processBtn);
            }

            if (step.state === this.STEP_INIT) {
                resetBtn.prop('disabled', true).removeClass('btn-warning');
                setupBtn.prop('disabled', false).addClass('btn-info').on('click', $.proxy(this.onSetupStepData, this));
                if (iterative) {
                    iterateBtn.prop('disabled', true).removeClass('btn-success');
                } else {
                    processBtn.prop('disabled', true).removeClass('btn-success');
                }
            } else if (step.state === this.STEP_SETUP) {
                resetBtn.prop('disabled', false).addClass('btn-warning').on('click', $.proxy(this.onResetStepData, this));
                setupBtn.prop('disabled', true).removeClass('btn-info');
                if (iterative) {
                    iterateBtn.prop('disabled', false).addClass('btn-success').on('click', $.proxy(this.onProcessIteration, this));
                } else {
                    processBtn.prop('disabled', false).addClass('btn-success').on('click', $.proxy(this.onProcessStep, this));
                }
            } else if (step.state === this.STEP_PROCESS) {
                resetBtn.prop('disabled', true).removeClass('btn-warning');
                setupBtn.prop('disabled', true).removeClass('btn-info');
                if (iterative) {
                    iterateBtn.prop('disabled', false).addClass('btn-success').on('click', $.proxy(this.onProcessIteration, this));
                } else {
                    processBtn.prop('disabled', false).addClass('btn-success').on('click', $.proxy(this.onProcessStep, this));
                }
            } else if (step.state === this.STEP_DONE) {
                resetBtn.prop('disabled', true).removeClass('btn-warning');
                setupBtn.prop('disabled', true).removeClass('btn-info');
                if (iterative) {
                    iterateBtn.prop('disabled', true).removeClass('btn-success');
                } else {
                    processBtn.prop('disabled', true).removeClass('btn-success');
                }
            }

            region.$el.append(btnGroup);
        }
    },

    stepData: function(stepIndex) {
        let steps = this.model.get('data')['steps'];

          if (stepIndex < 0 || stepIndex >= steps.length) {
              return null;
          }

          return steps[stepIndex];
    },

    onResetStepData: function() {
        // reset previously setup data on the current step
        if (this.currentStepIndex >= 0) {
            let self = this;
            let step = this.stepData(this.currentStepIndex);

            if (step && step.state === this.STEP_SETUP) {
                this.model.save({action: 'reset'}, {wait: true, patch: true}).then(function () {
                    $.alert.success(_t("Successfully reset !"));
                    self.setupAllSteps(self.actionType.attributes);
                });
            }
        }
    },

    onSetupStepData: function() {
        // setup input to the current step
        if (this.currentStepIndex >= 0) {
            let self = this;

            let step = this.stepData(this.currentStepIndex);
            if (step && (step.state === this.STEP_SETUP || step.state === this.STEP_INIT)) {
                let child = this.getChildView('step' + this.currentStepIndex);

                let inputsType = child.inputsType();
                let inputsData = child.inputsData();
                let inputsColumns = child.inputsColumns();

                let data = {action: 'setup', inputs_type: inputsType};

                if (inputsType === "list") {
                    data.columns = inputsColumns;
                    data.list = inputsData;
                } else if (inputsType === "panel") {
                    data.panel = inputsData;
                } else if (inputsType === "upload") {
                }

                this.model.save(data, {wait: true, patch: true}).then(function () {
                    $.alert.success(_t("Successfully setup !"));
                    self.setupAllSteps(self.actionType.attributes);
                });
            }
        }
    },

    onProcessStep: function() {
        // store current step before changes to new current one
        if (this.currentStepIndex >= 0) {
            let self = this;

            let step = this.stepData(this.currentStepIndex);
            if (step && step.state === this.STEP_SETUP) {
                this.model.save({action: 'process'}, {wait: true, patch: true}).then(function (data) {
                    self.setupAllSteps(self.actionType.attributes);

                    if (data.data.steps[self.currentStepIndex].state === self.STEP_DONE) {
                        $.alert.success(_t("Successfully processed !"));

                        // collapse and style
                        let prev = self.ui.steps_group.find('div.panel[panel-id=' + self.currentStepIndex + ']').children('div.panel-heading');
                        prev.removeClass('action-current').addClass('action-done').parent().removeClass('panel-warning').addClass('panel-success');

                        self.collapseStep(self.currentStepIndex, true);
                        ++self.currentStepIndex;

                        let next = self.ui.steps_group.find('div.panel[panel-id=' + self.currentStepIndex + ']').children('div.panel-heading');
                        next.removeClass('action-next').addClass('action-current').parent().removeClass('panel-info').addClass('panel-warning');

                        self.collapseStep(self.currentStepIndex, false);
                    }
                });
            }
        }
    },

    onProcessIteration: function() {
        // store current step before changes to new current one
        if (this.currentStepIndex >= 0) {
            let self = this;

            let step = this.stepData(this.currentStepIndex);
            if (step && step.state === this.STEP_SETUP) {
                this.model.save({action: 'process'}, {wait: true, patch: true}).then(function () {
                    // show progression tab
                    self.setActiveTab("todo-entities");
                    self.setupAllSteps(self.actionType.attributes);
                });
            } else if (step && step.state === this.STEP_PROCESS) {
                if (step.progression[0] < step.progression[1]) {
                    // show progression tab
                    self.setActiveTab("todo-entities");
                } else {
                    // step is terminated
                    self.setupAllSteps(self.actionType.attributes);

                    // collapse and style
                    let prev = self.ui.steps_group.find('div.panel[panel-id=' + self.currentStepIndex + ']').children('div.panel-heading');
                    prev.removeClass('action-current').addClass('action-done').parent().removeClass('panel-warning').addClass('panel-success');

                    self.collapseStep(self.currentStepIndex, true);
                    ++self.currentStepIndex;

                    let next = self.ui.steps_group.find('div.panel[panel-id=' + self.currentStepIndex + ']').children('div.panel-heading');
                    next.removeClass('action-next').addClass('action-current').parent().removeClass('panel-info').addClass('panel-warning');

                    self.collapseStep(self.currentStepIndex, false);
                }
            }
        }
    },

    onProcessIterationItem: function() {
        // process one entry of the iteration


        // @todo
    },

    setupStructure: function(data) {
        let currentStepIndex = this.model.get('data').steps.length - 1;

        for (let i = 0; i < data.format.steps.length; ++i) {
            let panel = $('<div class="panel panel-default"></div>');
            panel.attr('panel-id', i);

            let heading = $('<div class="panel-heading" data-toggle="tooltip" data-placement="left" title="' + _t('Collapse/Expand') + '">');
            if (i === currentStepIndex && !this.model.get('completed')) {
                heading.addClass('action-current');
                panel.addClass('panel-warning');
            } else if (i < currentStepIndex || this.model.get('completed')) {
                heading.addClass('action-done');
                panel.addClass('panel-success');
            } else if (i > currentStepIndex) {
                heading.addClass('action-next');
                panel.addClass('panel-info');
            }
            panel.append(heading);

            let title = $('<a class="accordion-toggle" data-toggle="collapse" href="#action_step' + i + '"></a>');
            if (i !== currentStepIndex) {
                title.addClass('collapsed');
            }
            heading.append(title);

            let content = $('<div class="panel-collapse collapse"></div>');
            content.attr('id', 'action_step' + i);
            if (i === currentStepIndex) {
                content.addClass('in');
            } else {
                content.addClass('out');
            }
            content.append($('<div class="panel-body-no" style="margin: 15px;"></div>'));
            panel.append(content);

            this.ui.steps_group.append(panel);
            this.addRegion('step' + i, '#action_step' + i + ' > div');

            let currentStepFormat = data.format.steps[i];
            if (currentStepFormat !== null) {
                let stepFormat = window.application.accession.collections.actionStepFormats.findWhere({id: currentStepFormat.type});
                let suffix = i === currentStepIndex ? _t("current") : i < currentStepIndex ? _t("done") : _t("to be done");

                title.text((i+1) + " - " + stepFormat.get('label') + " (" + suffix + ")" );
            }
        }

        this.currentStepIndex = currentStepIndex;
    },

    setupAllSteps: function(data) {
        let currentStepIndex = this.model.get('data').steps.length - 1;

        for (let i = 0; i < data.format.steps.length; ++i) {
            let currentStepFormat = data.format.steps[i];
            if (currentStepFormat !== null) {
                let stepFormat = window.application.accession.collections.actionStepFormats.findWhere({id: currentStepFormat.type});
                this.setupStepData(i, stepFormat, i !== currentStepIndex);
            }
        }
    },

    onRender: function () {
        let actionLayout = this;

        // creator user name
        let username = this.model.get('user');

        this.actionTypePromise.then(function (data) {
            actionLayout.ui.action_type.val(data.label);
        });

        this.ui.description.val(this.model.get('description'));

        if (this.model.isNew()) {
            if (!username) {
                username = window.session.user.username;
            }

            // not available tabs
            this.disableStepsTab();
            this.disableTodoTab();
        } else {
            this.actionTypePromise.then(function (data) {
                actionLayout.ui.action_type.val(data.label);

                actionLayout.setupStructure(data);
                actionLayout.setupAllSteps(data);

                actionLayout.enableTabs();
            });
        }

        // display complete username
        $.ajax({
            type: "GET",
            url: window.application.url(['permission', 'user', 'username', username]),
            dataType: 'json'
        }).done(function (data) {
            let name = [data.first_name, data.last_name, '(' + data.username + ')'];
            $(actionLayout.ui.username).val(name.join(' '));
        });
    },

    onBeforeDetach: function () {
    },

    onSaveAction: function() {
        let name = this.ui.name.val().trim();
        let description = this.ui.description.val().trim();
        let actionType = parseInt(this.model.get('action_type'));

        // update action info data
        let model = this.model;

        if (model.isNew()) {
            model.save({name: name, description: description, action_type: actionType}, {wait: true}).then(function () {
                $.alert.success(_t("Successfully created !"));
                Backbone.history.navigate('app/accession/action/' + model.get('id') + '/', {trigger: true, replace: true});
            });
        } else {
            model.save({name: name, description: description}, {wait: true, patch: false}).then(function () {
                $.alert.success(_t("Successfully changed !"));
                Backbone.history.navigate('app/accession/action/' + model.get('id') + '/', {trigger: true, replace: true});
            });
        }
    }
});

module.exports = Layout;


/***/ }),
/* 242 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {/**
 * @file exportdialog.js
 * @brief Data export options dialog
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2018-08-31
 * @copyright Copyright (c) 2018 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Dialog = __webpack_require__(5);

let View = Dialog.extend({
    attributes: {
        'id': 'dlg_export'
    },
    template: __webpack_require__(412),

    ui: {
        confirm: 'button.confirm',
        format: 'select[name="format"]'
    },

    events: {
        'click @ui.confirm': 'onConfirm'
    },

    initialize: function(options) {
        View.__super__.initialize.apply(this, arguments);

        this.collection = options.collection;
        this.exportedColumns = options.exportedColumns;

        this.exportFormat = null;
    },

    onRender: function () {
        View.__super__.onRender.apply(this);

        this.ui.format.selectpicker({});
    },

    onBeforeDestroy: function() {
        this.ui.format.selectpicker('destroy');
        View.__super__.onBeforeDestroy.apply(this);
    },

    onConfirm: function() {
        this.exportFormat = this.ui.format.selectpicker('val');
        this.doExport();

        this.destroy();
        this.trigger('dialog:confirm');
    },

    getFormat: function() {
        return this.exportFormat;
    },

    doExport: function() {
        let columns = this.exportedColumns;

        let dataFormat = this.ui.format.selectpicker('val');
        let form = $('<form></form>');

        form.append('<input type="text" name="app_label" value="accession">');
        form.append('<input type="text" name="model" value="accession">');

        if (this.collection.filters && !_.isEmpty(this.collection.filters)) {
            let p = [];
            for (let i = 0; i < this.collection.filters.length; ++i) {
                p.push(JSON.stringify(this.collection.filters[i]));
            }

            let f = '[' + p.join(',') + ']';

            form.append('<input type="text" name="filters">');
            form.children("[name=filters]").attr("value", f);
        }

        if (this.collection.search && !_.isEmpty(this.collection.search)) {
            form.append('<input type="text" name="search" value="' + $.param(this.collection.search) + '">');

            let p = [];
            for (let i = 0; i < this.collection.search.length; ++i) {
                p.push(JSON.stringify(this.collection.search[i]));
            }

            let f = '[' + p.join(',') + ']';

            form.append('<input type="text" name="search">');
            form.children("[name=search]").attr("value", f);
        }

        if (dataFormat === 'csv') {
            // download the document as csv
            form.append('<input type="text" name="format" value="csv">');

            for (let col in columns) {
                form.append('<input type="text" name="columns[]" value="' + columns[col] + '">');
            }

            form.attr('action', window.application.url(['main', 'export'])).appendTo('body').submit().remove();
        } else if (dataFormat === 'xlsx') {
            // download the document as xlsx
            form.append('<input type="text" name="format" value="xlsx">');

            for (let col in columns) {
                form.append('<input type="text" name="columns[]" value="' + columns[col] + '">');
            }

            form.attr('action', window.application.url(['main', 'export'])).appendTo('body').submit().remove();
        }
    }
});

module.exports = View;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 243 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
with (obj) {
__p += '<div class="describable-header" style="width: 100%"><div class="btn-group-vertical" role="group" style="width: 100%"> ';
 for (var i = 0; i < actions.length; ++i) { ;
__p += ' <button type="button" class="btn ' +
__e( options[actions[i]].className ) +
'" name="' +
__e( actions[i] ) +
'">' +
__e( _t(options[actions[i]].label) ) +
'</button> ';
 } ;
__p += ' </div></div>';

}
return __p
};

/*
original source:

<div class="describable-header" style="width: 100%"><div class="btn-group-vertical" role="group" style="width: 100%"> <% for (var i = 0; i < actions.length; ++i) { %> <button type="button" class="btn <%- options[actions[i]].className %>" name="<%- actions[i] %>"><%- _t(options[actions[i]].label) %></button> <% } %> </div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 244 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {/**
 * @file audit.js
 * @brief Audit collection
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-06-24
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let AuditModel = __webpack_require__(437);

let Collection = Backbone.Collection.extend({
    url: function() {
        return window.application.url(['audit' ,'search']);
    },
    model: AuditModel,

    initialize: function(models, options) {
        options || (options = {});

        this.filters = (options.filters || {});
        this.search = (options.search || {});

         if (typeof(options.username) !== "undefined") {
             this.username = options.username;
        } else if (typeof(options.entity) !== "undefined") {
             this.entity = options.entity; /*{
                 app_label: options.app_label,
                 model: options.model,
                 object_id: options.object_id
            }*/
        }
    },

    parse: function(data) {
        this.prev = data.prev;
        this.cursor = data.cursor;
        this.next = data.next;
        this.perms = data.perms;

        this.perms = data.perms;
        return data.items;
    },

    fetch: function(options) {
        options || (options = {});
        let data = (options.data || {});

        let opts = _.clone(options);
        opts.data = data;

        this.cursor = data.cursor;
        this.sort_by = data.sort_by;

        if (typeof(this.username) !== "undefined") {
            data.username = this.username;
        } else if (typeof(this.entity) !== "undefined") {
            data.app_label = this.entity.app_label;
            data.model = this.entity.model;
            data.object_id = this.entity.object_id;
        }

        if (this.search && this.search.length) {
            opts.data.search = JSON.stringify(this.search)
        }

        if (this.filters && this.filters.length) {
            opts.data.filters = JSON.stringify(this.filters)
        }

        if (data.cursor && typeof data.cursor !== 'string') {
            opts.data.cursor = JSON.stringify(data.cursor);
        }

        if (data.sort_by && typeof data.sort_by !== 'string') {
            opts.data.sort_by = JSON.stringify(data.sort_by);
        }

        return Backbone.Collection.prototype.fetch.call(this, opts);
    }
});

module.exports = Collection;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 245 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file auditlist.js
 * @brief Audit list view
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-06-24
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let AuditView = __webpack_require__(438);
let AdvancedTable = __webpack_require__(6);

let View = AdvancedTable.extend({
    template: __webpack_require__(440),
    className: "object audit-list advanced-table-container",
    childView: AuditView,
    childViewContainer: 'tbody.audit-list',

    initialize: function() {
        View.__super__.initialize.apply(this);

        this.listenTo(this.collection, 'reset', this.render, this);
        // this.listenTo(this.collection, 'change', this.render, this);
    },
});

module.exports = View;


/***/ }),
/* 246 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file classification.js
 * @brief Classification specialization for descriptor layout type.
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-09-13
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let LayoutType = __webpack_require__(60);

let ClassificationEntry = LayoutType.extend({
    template: __webpack_require__(449),

    ui: {
        'classification': 'select.classification'
    },

    onRender: function() {
        let select = this.ui.classification;

        // classifications list according to the related meta model of accession
        let ClassificationCollection = __webpack_require__(31);
        let classificationCollection = new ClassificationCollection();

        let SelectOption = __webpack_require__(19);
        let classifications = new SelectOption({
            className: "classification",
            collection: classificationCollection
        });

        let value = Object.resolve('data.classification', this.model.get('parameters'));

        classifications.drawSelect(select, true, true, value).done(function () {
        });
    },

    getData: function() {
        return {
            'classification': parseInt(this.ui.classification.val())
        }
    }
});

ClassificationEntry.layoutTarget = 'classification.classificationentry';

module.exports = ClassificationEntry;


/***/ }),
/* 247 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file classificationentrylayout.js
 * @brief Optimized layout for classification entry details
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-12-27
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let LayoutView = __webpack_require__(17);
let ScrollingMoreView = __webpack_require__(10);
let ContentBottomLayout = __webpack_require__(66);
let ClassificationEntryDescriptorEditView = __webpack_require__(248);
let ClassificationEntryDetailsView = __webpack_require__(453);
let ClassificationEntryModel = __webpack_require__(26);
let DescriptorCollection = __webpack_require__(18);

let Layout = LayoutView.extend({
    template: __webpack_require__(455),

    ui: {
        synonyms_tab: 'a[aria-controls=synonyms]',
        children_tab: 'a[aria-controls=children]',
        entities_tab: 'a[aria-controls=entities]',
        related_tab: 'a[aria-controls=related]',
        comments_tab: 'a[aria-controls=comments]'
    },

    regions: {
        'details': 'div[name=details]',
        'synonyms': 'div.tab-pane[name=synonyms]',
        'descriptors': 'div.tab-pane[name=descriptors]',
        'children': 'div.tab-pane[name=children]',
        'entities': 'div.tab-pane[name=entities]',
        'related': 'div.tab-pane[name=related]',
        'comments': 'div.tab-pane[name=comments]'
    },

    initialize: function (options) {
        Layout.__super__.initialize.apply(this, arguments);

        this.listenTo(this.model, 'change:layout', this.onLayoutChange, this);

        if (this.model.isNew()) {
            this.listenTo(this.model, 'change:id', this.onClassificationEntryCreate, this);
        }
    },

    onClassificationEntryCreate: function (model, value) {
        // re-render once created
        this.render();

        // and update history
        Backbone.history.navigate('app/classification/classificationentry/' + this.model.get('id') + '/', {
            /*trigger: true,*/
            replace: false
        });
    },

    disableSynonymsTab: function () {
        this.ui.synonyms_tab.parent().addClass('disabled');
    },

    disableChildrenTab: function () {
        this.ui.children_tab.parent().addClass('disabled');
    },

    disableEntitiesTab: function () {
        this.ui.entities_tab.parent().addClass('disabled');
    },

    disableRelatedTab: function () {
        this.ui.related_tab.parent().addClass('disabled');
    },

    disableCommentsTab: function () {
        this.ui.comments_tab.parent().addClass('disabled');
    },

    enableTabs: function () {
        this.ui.synonyms_tab.parent().removeClass('disabled');
        this.ui.children_tab.parent().removeClass('disabled');
        this.ui.entities_tab.parent().removeClass('disabled');
        this.ui.related_tab.parent().removeClass('disabled');
        this.ui.comments_tab.parent().removeClass('disabled');
    },

    onLayoutChange: function (model, value) {
        if (value === null) {
            this.getRegion('descriptors').empty();
            // let ClassificationEntryDescriptorCreateView = require('./classificationentrydescriptorcreate');
            // let classificationEntryDescriptorCreateView = new ClassificationEntryDescriptorCreateView({model: model});
            //
            // this.showChildView('descriptors', classificationEntryDescriptorCreateView);
        } else {
            let classificationEntryLayout = this;

            // get the layout before creating the view
            $.ajax({
                method: "GET",
                url: window.application.url(['descriptor', 'layout', value]),
                dataType: 'json'
            }).done(function (data) {
                if (!classificationEntryLayout.isRendered()) {
                    return;
                }

                let descriptorCollection = new DescriptorCollection([], {
                    model_id: data.id
                });
                descriptorCollection.fetch().then(function () {
                    let ClassificationEntryDescriptorView = __webpack_require__(78);
                    let classificationEntryDescriptorView = new ClassificationEntryDescriptorView({
                        model: model,
                        layoutData: data,
                        descriptorCollection: descriptorCollection
                    });

                    classificationEntryLayout.showChildView('descriptors', classificationEntryDescriptorView);

                });
            });
        }
    },

    onRender: function () {
        let classificationEntryLayout = this;

        // details view
        if (!this.model.isNew()) {
            // details views
            this.showChildView('details', new ClassificationEntryDetailsView({model: this.model}));

            // synonyms tab
            let ClassificationEntrySynonymsView = __webpack_require__(456);
            this.showChildView('synonyms', new ClassificationEntrySynonymsView({model: this.model}));

            // direct classification entry sub-levels tab
            let ClassificationEntryChildrenCollection = __webpack_require__(459);
            let classificationEntryChildren = new ClassificationEntryChildrenCollection([], {
                model_id: this.model.id,
                deeply: true
            });

            // get available columns
            let columns = window.application.main.cache.lookup({
                type: 'entity_columns',
                format: {model: 'classification.classificationentry'}
            });

            columns.then(function (data) {
                if (!classificationEntryLayout.isRendered()) {
                    return;
                }

                let ClassificationEntryChildrenView = __webpack_require__(460);
                let classificationEntryChildrenView = new ClassificationEntryChildrenView({
                    collection: classificationEntryChildren,
                    model: classificationEntryLayout.model,
                    columns: data[0].value
                });

                let contentBottomLayout = new ContentBottomLayout();
                classificationEntryLayout.showChildView('children', contentBottomLayout);

                contentBottomLayout.showChildView('content', classificationEntryChildrenView);
                contentBottomLayout.showChildView('bottom', new ScrollingMoreView({
                    targetView: classificationEntryChildrenView, collection: classificationEntryChildren
                }));
            });

            // entities relating this classificationEntry tab
            let ClassificationEntryEntitiesCollection = __webpack_require__(461);
            let classificationEntryEntities = new ClassificationEntryEntitiesCollection([], {model_id: this.model.id});

            {
                if (!classificationEntryLayout.isRendered()) {
                    return;
                }

                let ClassificationEntryEntitiesView = __webpack_require__(463);
                let classificationEntryEntitiesView = new ClassificationEntryEntitiesView({
                    collection: classificationEntryEntities, model: classificationEntryLayout.model
                });

                let contentBottomLayout = new ContentBottomLayout();
                classificationEntryLayout.showChildView('entities', contentBottomLayout);

                contentBottomLayout.showChildView('content', classificationEntryEntitiesView);
                contentBottomLayout.showChildView('bottom', new ScrollingMoreView({targetView: classificationEntryEntitiesView}));
            }

            // related classification entries

            let ClassificationEntryCollection = __webpack_require__(250);
            let classificationEntryRelated = new ClassificationEntryCollection([], {classification_entry_id: this.model.id});

            columns.then(function (data) {
                if (!classificationEntryLayout.isRendered()) {
                    return;
                }

                let ClassificationEntryListView = __webpack_require__(251);
                let classificationEntryListView = new ClassificationEntryListView({
                    // classification_entry: classification,
                    collection: classificationEntryRelated,
                    columns: data[0].value
                });

                let contentBottomLayout = new ContentBottomLayout();
                classificationEntryLayout.showChildView('related', contentBottomLayout);

                contentBottomLayout.showChildView('content', classificationEntryListView);
                contentBottomLayout.showChildView('bottom', new ScrollingMoreView({
                    targetView: classificationEntryListView, collection: classificationEntryRelated
                }));
            });

            // comments
            let CommentListView = __webpack_require__(28);

            // classifications entry tab (query on show tab)
            let CommentCollection = __webpack_require__(29);
            let comments = new CommentCollection([], {entity: this.model});

            let commentListView = new CommentListView({entity: this.model, collection: comments});
            classificationEntryLayout.showChildView('comments', commentListView);

            this.onLayoutChange(this.model, this.model.get('layout'));
            this.enableTabs();
        } else {
            // details views
            if (this.model.get('parent') && !this.model.get('parent_details').length) {
                // query parent details
                let parentClassificationEntry = new ClassificationEntryModel({id: this.model.get('parent')});
                parentClassificationEntry.fetch().then(function () {
                    if (!classificationEntryLayout.isRendered()) {
                        return;
                    }

                    let parentDetails = [];

                    parentDetails.push({
                        id: parentClassificationEntry.get('id'),
                        name: parentClassificationEntry.get('name'),
                        rank: parentClassificationEntry.get('rank'),
                        parent: parentClassificationEntry.get('parent')
                    });

                    parentDetails.push.apply(parentDetails, parentClassificationEntry.get('parent_details'));
                    classificationEntryLayout.model.set('parent_details', parentDetails);

                    classificationEntryLayout.showChildView('details', new ClassificationEntryDetailsView({
                        model: classificationEntryLayout.model, noLink: true
                    }));
                });
            } else {
                // parent details provided
                this.showChildView('details', new ClassificationEntryDetailsView({model: this.model, noLink: true}));
            }

            // descriptors edit tab
            $.ajax({
                method: "GET",
                url: window.application.url(['descriptor', 'layout', this.model.get('layout')]),
                dataType: 'json'
            }).done(function (data) {
                if (!classificationEntryLayout.isRendered()) {
                    return;
                }

                let descriptorCollection = new DescriptorCollection([], {
                    model_id: data.id
                });
                descriptorCollection.fetch().then(function () {
                    let classificationEntryDescriptorView = new ClassificationEntryDescriptorEditView({
                        model: classificationEntryLayout.model,
                        layoutData: data,
                        descriptorCollection: descriptorCollection
                    });

                    classificationEntryLayout.showChildView('descriptors', classificationEntryDescriptorView);

                });
            });

            this.setActiveTab("descriptors");

            this.disableSynonymsTab();
            this.disableChildrenTab();
            this.disableEntitiesTab();
            this.disableRelatedTab();
            this.disableCommentsTab();
        }
    },

    // onDomRefresh: function() {
    //     No longer useful
    //     descriptors tab (on this event because of the child event not fired otherwise)
    //     let ClassificationEntryDescriptorCreateView = require('../views/classificationentrydescriptorcreate');
    //     let classificationEntryDescriptorCreateView = new ClassificationEntryDescriptorCreateView({model: this.model});
    //     this.showChildView('descriptors', classificationEntryDescriptorCreateView);
    // }
});

module.exports = Layout;


/***/ }),
/* 248 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file classificationentrydescriptoredit.js
 * @brief Classification entry descriptor edit view
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-12-29
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let DescribableEdit = __webpack_require__(33);

let View = DescribableEdit.extend({
    onCancel: function() {
        // cancel global widget modifications
        this.cancel();

        // non existing classification entry, simply reload previous content (url has not changed)
        if (this.model.isNew()) {
            Backbone.history.loadUrl();
            return;
        }

        // does not reload models, just redo the views
        let view = this;

        // update the descriptor part of the classification entry layout
        let classificationEntryLayout = application.main.viewContent().getChildView('content');

        let ClassificationEntryDescriptorView = __webpack_require__(78);
        let classificationEntryDescriptorView = new ClassificationEntryDescriptorView({
            model: this.model,
            layoutData: view.layoutData,
            descriptorCollection: this.descriptorCollection
        });

        classificationEntryLayout.showChildView('descriptors', classificationEntryDescriptorView);
    },

    onApply: function () {
        // does not reload models, save and redo the views
        let self = this;
        let model = this.model;

        let descriptors = this.prepareDescriptors();
        if (descriptors === null) {
            return;
        }

        this.model.save({descriptors: descriptors}, {wait: true, patch: !model.isNew()}).then(function () {
            // update the descriptor part of the classification entry layout
            let classificationEntryLayout = application.main.viewContent().getChildView('content');

            let ClassificationEntryDescriptorView = __webpack_require__(78);
            let classificationEntryDescriptorView = new ClassificationEntryDescriptorView({
                model: model,
                layoutData: self.layoutData,
                descriptorCollection: self.descriptorCollection
            });

            classificationEntryLayout.showChildView('descriptors', classificationEntryDescriptorView);
        });
    },

    onShowTab: function() {
        let view = this;

        // contextual panel
        let contextLayout = application.getView().getChildView('right');
        if (!contextLayout) {
            let DefaultLayout = __webpack_require__(3);
            contextLayout = new DefaultLayout();
            application.getView().showChildView('right', contextLayout);
        }

        let TitleView = __webpack_require__(4);
        contextLayout.showChildView('title', new TitleView({title: _t("Descriptors"), glyphicon: 'fa-wrench'}));

        let actions = ['apply', 'cancel'];

        let ClassificationEntryDescriptorContextView = __webpack_require__(249);
        let contextView = new ClassificationEntryDescriptorContextView({actions: actions});
        contextLayout.showChildView('content', contextView);

        contextView.on("describable:cancel", function() {
            view.onCancel();
        });

        contextView.on("describable:apply", function() {
            view.onApply();
        });
    },

    onHideTab: function() {
        application.main.defaultRightView();
    }
});

module.exports = View;


/***/ }),
/* 249 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file classificationentrydescriptorcontext.js
 * @brief Classification entry descriptor context menu
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-01-30
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Marionette = __webpack_require__(1);

let View = Marionette.View.extend({
    tagName: 'div',
    template: __webpack_require__(15),
    className: "context classification-entry",
    templateContext: function () {
        return {
            actions: this.getOption('actions'),
            options: {
                // 'add': {className: 'btn-success', label: _t('Defines')},
                'modify': {className: 'btn-default', label: _t('Modify')},
                // 'replace': {className: 'btn-default', label: _t('Replace all')},
                // 'delete': {className: 'btn-danger', label: _t('Delete all')},
                'apply': {className: 'btn-success', label: _t('Apply')},
                'cancel': {className: 'btn-default', label: _t('Cancel')}
            }
        }
    },

    ui: {
        // 'add': 'button[name="add"]',
        'modify': 'button[name="modify"]',
        // 'replace': 'button[name="replace"]',
        // 'delete': 'button[name="delete"]',
        'apply': 'button[name="apply"]',
        'cancel': 'button[name="cancel"]'
    },

    triggers: {
        // "click @ui.add": "layout:add",
        // "click @ui.replace": "layout:replace",
        // "click @ui.delete": "layout:delete",
        "click @ui.modify": "describable:modify",
        "click @ui.apply": "describable:apply",
        "click @ui.cancel": "describable:cancel"
    },

    initialize: function(options) {
        options || (options = {actions: []});
    }
});

module.exports = View;


/***/ }),
/* 250 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file classificationentry.js
 * @brief Classification entry collection
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-04-13
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let CountableCollection = __webpack_require__(9);
let ClassificationEntryModel = __webpack_require__(26);

let Collection = CountableCollection.extend({
    url: function() {
        if (this.classification_id) {
            return window.application.url(['classification', 'classification', this.classification_id, 'classificationentry']);
        } else if (this.classification_entry_id) {
            return window.application.url(['classification', 'classificationentry', this.classification_entry_id, 'related']);
        } else {
            return window.application.url(['classification', 'classificationentry']);
        }
    },
    model: ClassificationEntryModel,

    // comparator: 'name',

    initialize: function(models, options) {
        options || (options = {});

        Collection.__super__.initialize.apply(this, arguments);

        if (options.classification_id) {
            this.classification_id = options.classification_id;
        }

        if (options.classification_entry_id) {
            this.classification_entry_id = options.classification_entry_id;
        }
    }
});

module.exports = Collection;


/***/ }),
/* 251 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {/**
 * @file classificationentrylist.js
 * @brief Classification entry list view
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-04-20
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let ClassificationEntryView = __webpack_require__(70);
let AdvancedTable = __webpack_require__(6);
let DescriptorsColumnsView = __webpack_require__(11);

let View = AdvancedTable.extend({
    template: __webpack_require__(16),
    className: "classification-entry-list advanced-table-container",
    childView: ClassificationEntryView,
    childViewContainer: 'tbody.entity-list',

    userSettingName: 'classificationentry_list_columns', //function() {
        //return /*this.classification.get('name')*/'classificationentry' + '_classification_list_columns';
    //},
    userSettingVersion: '2.1',

    defaultColumns: [
        {name: 'name', width: 'auto', sort_by: '+1'},
        {name: 'rank', width: 'auto', sort_by: '+0'},
        {name: 'parent', width: 'auto', sort_by: null},
        // {name: 'synonym', width: 'auto', sort_by: null}
    ],

    columnsOptions: {
        'name': {label: _t('Name'), width: 'auto', minWidth: true, event: 'view-classification-entry-details'},
        'rank': {
            label: _t('Rank'),
            width: 'auto',
            minWidth: true,
            custom: 'rankCell',
            field: 'level'
        },
        'parent': {
            label: _t('Parent'),
            width: 'auto',
            minWidth: true,
            event: 'view-parent-details',
            custom: 'parentCell',
            field: 'name'
        },
        // 'synonym': {
        //     label: _t('Synonym'),
        //     width: 'auto',
        //     minWidth: true,
        //     custom: 'synonymCell',
        //     field: 'name'
        // }
    },

    templateContext: function () {
        return {
            columnsList: this.displayedColumns,
            columnsOptions: this.getOption('columns')
        }
    },

    childViewOptions: function () {
        return {
            columnsList: this.displayedColumns,
            columnsOptions: this.getOption('columns')
        }
    },

    initialize: function(options) {
        View.__super__.initialize.apply(this, arguments);

        // this.listenTo(this.collection, 'reset', this.render, this);
    },

    onShowTab: function() {
        View.__super__.onShowTab.apply(this);

        let self = this;

        // query now to avoid useless queries
        this.query();

        let contextLayout = window.application.getView().getChildView('right');
        if (!contextLayout) {
            let DefaultLayout = __webpack_require__(3);
            contextLayout = new DefaultLayout();
            window.application.getView().showChildView('right', contextLayout);
        }

        let TitleView = __webpack_require__(4);
        contextLayout.showChildView('title', new TitleView({
            title: _t("Panel actions"),
            glyphicon: 'fa-wrench'
        }));

        let actions = [
            'export-list',
            'import-list'
        ];

        let ClassificationEntryListContextView = __webpack_require__(467);
        let contextView = new ClassificationEntryListContextView({actions: actions});
        contextLayout.showChildView('content', contextView);

        contextView.on("classifications:import-list", function () {
            // view.onImportList();
        });

        contextView.on("classifications:import-list", function () {
            // view.onExportList();
        });
    },

    onBeforeDetach: function() {
        window.application.main.defaultRightView();
    }
});

// support of descriptors columns extension
_.extend(View.prototype, DescriptorsColumnsView);

module.exports = View;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 252 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file classificationrank.js
 * @brief Classification rank collection
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-04-13
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let ClassificationRankModel = __webpack_require__(469);

let Collection = Backbone.Collection.extend({
    url: function() {
        if (this.classification_id) {
            return window.application.url(['classification', 'classification', this.classification_id, 'classificationrank']);
        } else {
            return window.application.url(['classification', 'classification', 'classificationrank']);
        }
    },

    comparator: 'level',
    model: ClassificationRankModel,

    initialize: function(models, options) {
        options || (options = {});
        this.classification_id = options.classification_id;
    },

    findValue: function(id) {
        for (let r in this.models) {
            let rank = this.models[r];
            if (rank.get('id') === id)
                return rank.get('value');
        }
    },

    findLabel: function(id) {
        for (let r in this.models) {
            let rank = this.models[r];
            if (rank.get('id') === id)
                return rank.get('label');
        }
    },

    /**
     * Move a rank after another given theirs id.
     * @param srcId Source id to move.
     * @param dstId Destination id to move after, or null to move at last.
     */
    moveClassificationRankAfter: function(srcId, dstId) {
        if (!this.classification_id) {
            return;
        }

        let levels = [];
        let srcModel = this.get(srcId);
        let dstModel = dstId ? this.get(dstId) : null;

        let level = srcModel.get('level');
        let newLevel = 0;

        if (dstModel) {
            newLevel = dstModel.get('level');
        } else if (this.last()) {
            newLevel = this.last().get('level')
        }

        if (dstModel && dstModel.get('level') < srcModel.get('level')) {
            let to_rshift = [];

            for (let i in this.models) {
                let model = this.models[i];
                if (model !== srcModel) {
                    if (model.get('level') >= newLevel) {
                        to_rshift.push(model);
                    }
                }
            }

            srcModel.set('level', newLevel);

            let nextLevel = newLevel + 1;

            for (let i = 0; i < to_rshift.length; ++i) {
                to_rshift[i].set('level', nextLevel);
                ++nextLevel;
            }
        } else {
            let to_lshift = [];

            for (let i in this.models) {
                let model = this.models[i];
                if (model !== srcModel) {
                    if (model.get('level') <= newLevel) {
                        to_lshift.push(model);
                    }
                }
            }

            srcModel.set('level', newLevel);

            let nextLevel = 0;

            for (let i = 0; i < to_lshift.length; ++i) {
                to_lshift[i].set('level', nextLevel);
                ++nextLevel;
            }
        }

        for (let i = 0; i < this.models.length; ++i) {
            levels.push({id: this.models[i].get('id'), level: this.models[i].get('level')});
        }

        this.sort();

        $.ajax({
            type: "PATCH",
            url: window.application.url(['classification', 'classification', this.classification_id]),
            contentType: "application/json; charset=utf-8",
            dataType: 'json',
            data: JSON.stringify({
                'levels': levels
            })
        }).done(function (data) {
        });
    }
});

module.exports = Collection;


/***/ }),
/* 253 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file menuentry.js
 * @brief Labeled menu entry class.
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-08-24
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let MenuEntryBase = __webpack_require__(79);

let MenuEntry = function(name, label, url, icon, order, auth) {
    MenuEntryBase.call(this, name, order, auth);

    this.label = label || null;
    this.url = url || "#";
    this.icon = icon || null;
    this.$el = null;
};

MenuEntry.prototype = Object.create(MenuEntryBase.prototype);
MenuEntry.prototype.constructor = MenuEntry;

MenuEntry.prototype.hasLabel = function () {
    return true;
};

/**
 * Render the menu entry.
 * @param parent
 */
MenuEntry.prototype.render = function(parent) {
    let entry = $('<li role="presentation" name="' + this.name + '"></li>');
    entry.addClass(this.authTypeClassName());

    let aEl = $('<a role="menuitem" class="url" tabindex="-1" href="' + this.url + '"></a>');

    if (this.icon) {
        if (this.icon.startsWith('fa-')) {
            let iconEl = $('<i class="fa ' + this.icon + '"></i>');
            aEl.append(iconEl);
        } else {
            let iconEl = $('<i class="glyphicon ' + this.icon + '"></i>');
            aEl.append(iconEl);
        }
    } else {
        let noIconEl = $('<i class="fa fa-user" style="visibility: hidden;"></i>');
        aEl.append(noIconEl);
    }

    aEl.append('&nbsp;' + _t(this.label || ""));

    entry.append(aEl);
    parent.append(entry);

    this.$el = entry;

    // and bind events
    this.bind();
};

MenuEntry.prototype.bind = function() {
    // href starting with ~ are actions that directly call a controller,
    // but doesn't modify the URL neither the history
    if (this.url.startsWith("~") && this.url.length > 1) {
        let aEl = this.$el.children("a.url");
        aEl.attr("href", "#");

        let href = this.url;

        aEl.on("click", function(e) {
            // close the menu and prevent default to open the url
            $(".dropdown").removeClass("open");
            $(".dropdown-toggle").attr("aria-expanded", false);

            let parts = href.slice(1).split('/');
            if (!application[parts[0]]) {
                return false;
            };

            let ctrl = application[parts[0]].controllers[parts[1]];
            if (!ctrl) {
                return false;
            }

            let method = parts[2];
            if (!method || !ctrl[method]) {
                return false;
            }

            // deferred call, because we want this menu closed before and processed outside of the signal
            setTimeout(function() {
                ctrl[method]()
            }, 0);

            return false;
        });
    } else if (this.url.startsWith("#") && this.url.length > 1) {
        // href starting with # are route that must be called using the navigation mechanism
        let aEl = this.$el.children("a.url");

        let href = this.url.replace('#', window.application.url('app'));
        aEl.attr("href", href);

        aEl.on("click", function (e) {
            // close the menu and prevent default to open the url
            $(".dropdown").removeClass("open");
            $(".dropdown-toggle").attr("aria-expanded", false);

            let href = $(this).attr("href").replace('/coll-gate/', '');
            Backbone.history.navigate(href, {trigger: true});

            return false;
        });
    }
};

module.exports = MenuEntry;


/***/ }),
/* 254 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {/**
 * @file boolean.js
 * @brief Display and manage a boolean format of type of descriptor
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-01-20
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let DescriptorFormatType = __webpack_require__(13);
let Marionette = __webpack_require__(1);

let BooleanType = function() {
    DescriptorFormatType.call(this);

    this.name = "boolean";
    this.group = "single";
};

_.extend(BooleanType.prototype, DescriptorFormatType.prototype, {
    create: function(format, parent, options) {
        options || (options = {
            history: false,
            readOnly: false
        });

        if (options.readOnly) {
            let input = this._createStdInput(parent, "fa-check", options.history);

            this.parent = parent;
            this.readOnly = true;
            this.el = input;
        } else {
            let select = $('<select data-width="100%"></select>');
            this.groupEl = this._createInputGroup(parent, "fa-check", select, options.history);

            // undefined
            let option = $("<option></option>");

            option.attr("value", "null");
            option.html(' - ' + _t('Undefined') + ' - ');

            select.append(option);

            // true
            option = $("<option></option>");

            option.attr("value", "true");
            option.html(_t('Yes'));

            select.append(option);

            // false
            option = $("<option></option>");

            option.attr("value", "false");
            option.html(_t('No'));

            select.append(option);

            select.selectpicker({container: 'body', style: 'btn-default'});

            this.parent = parent;
            this.el = select;
        }
    },

    destroy: function() {
        if (this.el && this.parent) {
            if (this.readOnly) {
                this.el.parent().remove();
            } else {
                this.el.selectpicker('destroy');
                this.groupEl.remove();
            }
        }
    },

    enable: function() {
        if (this.el) {
            this.el.prop("disabled", false).selectpicker('refresh');
        }
    },

    disable: function() {
        if (this.el) {
            this.el.prop("disabled", true).selectpicker('refresh');
        }
    },

    set: function (format, definesValues, defaultValues, options) {
        if (!this.el || !this.parent) {
            return;
        }

        definesValues = this.isValueDefined(definesValues, defaultValues);

        if (this.readOnly) {
            if (definesValues) {
                this.el.val(defaultValues ? _t('Yes') : _t('No')).attr('value', defaultValues);

                if (defaultValues === true) {
                    this.el.parent().children('span').children('span').addClass('fa-check-square-o');
                } else {
                    this.el.parent().children('span').children('span').addClass('fa-square-o');
                }
            } else {
                this.el.val("").attr('value', "null");
                this.el.parent().children('span').children('span').addClass('fa-square-o');
            }
        } else {
            if (definesValues) {
                if (defaultValues === true) {
                    this.el.val("true").trigger('change');
                } else if (defaultValues === false) {
                    this.el.val("false").trigger('change');
                } else {
                    this.el.val("null").trigger('change');
                }
            } else {
                this.el.val("null").trigger('change');
            }

            this.el.selectpicker('refresh');
        }
    },

    values: function() {
        if (this.el && this.parent) {
            if (this.readOnly) {
                let attr = this.el.attr("value");
                if (attr === "null") {
                    return null;
                } else {
                    return attr === "true";
                }
            } else {
                let val = this.el.val();
                if (val === "null") {
                    return null;
                } else {
                    return val === "true";
                }
            }
        }

        return false;
    },

    checkCondition: function(condition, values) {
        switch (condition) {
            case 0:
                return this.values() === null;   // false;  // a boolean is always defined
            case 1:
                return this.value() !== null;    // true;   // a boolean is always defined
            case 2:
                return this.values() === values;
            case 3:
                return this.values() !== values;
            default:
                return false;
        }
    },

    bindConditionListener: function(listeners, condition, values) {
        if (this.el && this.parent && !this.readOnly) {
            if (!this.bound) {
                this.el.parent('div.bootstrap-select').on('changed.bs.select', $.proxy(this.onValueChanged, this));
                this.bound = true;
            }

            this.conditionType = condition;
            this.conditionValues = values;
            this.listeners = listeners || [];
        }
    },

    onValueChanged: function(e) {
        let display = this.checkCondition(this.conditionType, this.conditionValues);

        // show or hide the parent element
        if (display) {
            for (let i = 0; i < this.listeners.length; ++i) {
                this.listeners[i].parent.parent().show(true);
            }
        } else {
            for (let i = 0; i < this.listeners.length; ++i) {
                this.listeners[i].parent.parent().hide(true);
            }
        }
    }
});

BooleanType.DescriptorTypeDetailsView = Marionette.View.extend({
    className: 'descriptor-type-details-format',
    template: "<div></div>",

    initialize: function() {
        this.listenTo(this.model, 'change', this.render, this);
    },

    onRender: function() {
    },

    getFormat: function() {
        return {
        }
    }
});

BooleanType.format = function(value) {
    if (value === null || value === undefined) {
        return "";
    } else {
        return value === true ? _t("Yes") : _t("No");
    }
};

module.exports = BooleanType;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 255 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file describablevaluehistory.js
 * @brief Dialog that display a list of value from an history of describable entity
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-11-13
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Dialog = __webpack_require__(5);

let View = Dialog.extend({
    template: __webpack_require__(498),

    templateContext: function () {
        return {
            title: this.title,
            descriptor: this.descriptor,
            values: this.entries,
            unit: ""
        };
    },

    attributes: {
        id: "dlg_describable_show_value_history"
    },

    initialize: function (options) {
        options || (options = {});

        View.__super__.initialize.apply(this, arguments);

        this.descriptor = options.descriptor;
        this.entries = options.entries;

        this.unit = "";

        if (this.descriptor.get('format').unit === "custom" && this.descriptor.get('format').custom_unit !== "") {
            this.unit = this.descriptor.get('format').custom_unit;
        } else if (this.descriptor.get('format').unit) {
            this.unit = window.application.descriptor.collections.formatUnits.findLabel(this.descriptor.get('format').unit);
        }

        this.model = options.model;
        this.readOnly = options.readOnly;
    },

    onRender: function () {
        View.__super__.onRender.apply(this);

        $("ul.descriptor-value-history li").css({
            "list-style-type": "none"
        });

        let self = this;

        // setup widget for each value
        let elts = $("li.descriptor-value span.history-value");

        let descriptor = this.descriptor;
        let format = descriptor.get('format');

        $.each(elts, function(i, elt) {
            let widget = window.application.descriptor.widgets.newElement(format.type);

            if (widget) {
                widget.create(format, $(elt), {
                    readOnly: true,
                    history: false,
                    descriptorId: descriptor.get('id')
                });

                widget.set(format, true, self.entries[i].value, {
                    descriptorId: descriptor.get('id'),
                    descriptor: self.descriptor.attributes
                });
            }

            if (!self.readOnly) {
                $(elt).addClass('element').css('cursor', 'pointer').on('click', function(e) {
                    self.descriptor.widget.set(
                        self.descriptor.get('format'),
                        true,
                        widget.values());

                    self.destroy();
                });
            }
        });
    }
});

module.exports = View;


/***/ }),
/* 256 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {/**
 * @file date.js
 * @brief Display and manage a date format of type of descriptor
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-01-20
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let DescriptorFormatType = __webpack_require__(13);
let Marionette = __webpack_require__(1);

let DateType = function() {
    DescriptorFormatType.call(this);

    this.name = "date";
    this.group = "single";
};

_.extend(DateType.prototype, DescriptorFormatType.prototype, {
    create: function(format, parent, options) {
        options || (options = {
            history: false,
            readOnly: false
        });

        if (options.readOnly) {
            let input = this._createStdInput(parent, "fa-calendar", options.history);

            this.parent = parent;
            this.readOnly = true;
            this.el = input;
        } else {
            let input = $('<input class="form-control" width="100%">');
            this.groupEl = this._createInputGroup(parent, "fa-calendar", input, options.history);

            input.datetimepicker({
                locale: session.language,
                format: $.datepicker._defaults.dateFormat.toUpperCase(),
                showTodayButton: true,
                showClear: true,
                allowInputToggle: true
                //widgetParent:   // view.$el,
                //widgetPositioning: {
                //    vertical: 'auto',
                //    horizontal: 'auto'
                //}
            }).on('dp.show', function (e) {
                // fix position when parent has overflow-y defined
                // https://github.com/Eonasdan/bootstrap-datetimepicker/issues/790
                let dateTimePicker = $('body').find('.bootstrap-datetimepicker-widget:last'),
                    position = dateTimePicker.offset(),
                    parent = dateTimePicker.parent(),
                    parentPos = parent.offset(),
                    width = dateTimePicker.width(),
                    parentWid = parent.width();

                // move dateTimePicker to the exact same place it was but attached to body
                dateTimePicker.appendTo('body');
                dateTimePicker.css({
                    position: 'absolute',
                    top: position.top,
                    bottom: 'auto',
                    left: position.left,
                    right: 'auto',
                    'z-index': 10001
                });

                // if dateTimePicker is wider than the thing it is attached to then move it so the centers line up
                if (parentPos.left + parentWid < position.left + width) {
                    let newLeft = parentPos.left;
                    newLeft += parentWid / 2;
                    newLeft -= width / 2;
                    dateTimePicker.css({left: newLeft});
                }
            });

            this.parent = parent;
            this.el = input;
        }
    },

    destroy: function() {
        if (this.el && this.parent) {
            if (this.readOnly) {
                this.el.parent().remove();
            } else {
                this.el.data('DateTimePicker').destroy();
                this.el.parent().remove();
            }
        }
    },

    enable: function() {
        if (this.el) {
            this.el.data('DateTimePicker').enable();
        }
    },

    disable: function() {
        if (this.el) {
            this.el.data('DateTimePicker').disable();
        }
    },

    set: function (format, definesValues, defaultValues, options) {
        if (!this.el || !this.parent) {
            return;
        }

        definesValues = this.isValueDefined(definesValues, defaultValues);

        if (this.readOnly) {
            if (definesValues) {
                let date = moment(defaultValues);
                this.el.val(date.format("L"));
                this.el.attr('value', defaultValues);
            } else {
                this.el.val("");
                this.el.attr('value', "");
            }
        } else {
            if (definesValues) {
                let date = moment(defaultValues);
                this.el.data('DateTimePicker').date(date);
            } else {
                this.el.data('DateTimePicker').clear();
            }
        }
    },

    values: function() {
        if (this.el && this.parent) {
            if (this.readOnly) {
                let value = this.el.attr('value');
                return value !== "" ? value : null;
            } else {
                let date = this.el.data('DateTimePicker').date();
                if (date != null) {
                    // format to YYYYMMDD date
                    return date.format("YYYYMMDD");
                } else {
                    return null;
                }
            }
        }

        return null;
    },

    checkCondition: function (condition, values) {
        switch (condition) {
            case 0:
                return this.values() == null;
            case 1:
                return this.values() != null;
            case 2:
                return this.values() === values;
            case 3:
                return this.values() !== values;
            default:
                return false;
        }
    },

    bindConditionListener: function(listeners, condition, values) {
        if (this.el && this.parent && !this.readOnly) {
            if (!this.bound) {
                this.el.parent().on('dp.change', $.proxy(this.onValueChanged, this));
                this.bound = true;
            }

            this.conditionType = condition;
            this.conditionValues = values;
            this.listeners = listeners || [];
        }
    },

    onValueChanged: function(e) {
        let display = this.checkCondition(this.conditionType, this.conditionValues);

        // show or hide the parent element
        if (display) {
            for (let i = 0; i < this.listeners.length; ++i) {
                this.listeners[i].parent.parent().show(true);
            }
        } else {
            for (let i = 0; i < this.listeners.length; ++i) {
                this.listeners[i].parent.parent().hide(true);
            }
        }
    }
});

DateType.DescriptorTypeDetailsView = Marionette.View.extend({
    className: 'descriptor-type-details-format',
    template: "<div></div>",

    initialize: function() {
        this.listenTo(this.model, 'change', this.render, this);
    },

    getFormat: function() {
        return {}
    }
});

DateType.format = function (value) {
    return moment(value).format("L");
};

module.exports = DateType;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 257 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {/**
 * @file datetime.js
 * @brief Display and manage a date+time format of type of descriptor
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-01-20
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let DescriptorFormatType = __webpack_require__(13);
let Marionette = __webpack_require__(1);

let DateTimeType = function() {
    DescriptorFormatType.call(this);

    this.name = "datetime";
    this.group = "single";
};

_.extend(DateTimeType.prototype, DescriptorFormatType.prototype, {
    create: function(format, parent, options) {
        options || (options = {
            history: false,
            readOnly: false
        });

        if (options.readOnly) {
            let input = this._createStdInput(parent, "fa-calendar-times-o", options.history);

            this.parent = parent;
            this.readOnly = true;
            this.el = input;
        } else {
            let input = $('<input class="form-control" width="100%">');
            this.groupEl = this._createInputGroup(parent, "fa-calendar-times-o", input, options.history);

            input.datetimepicker({
                locale: window.session.language,
                format: $.datepicker._defaults.dateFormat.toUpperCase() + ' HH:mm:ss',  // 24h
                showTodayButton: true,
                showClear: true,
                allowInputToggle: true
            }).on('dp.show', function (e) {
                // fix position when parent has overflow-y defined
                let dateTimePicker = $('body').find('.bootstrap-datetimepicker-widget:last'),
                    position = dateTimePicker.offset(),
                    parent = dateTimePicker.parent(),
                    parentPos = parent.offset(),
                    width = dateTimePicker.width(),
                    parentWid = parent.width();

                // move dateTimePicker to the exact same place it was but attached to body
                dateTimePicker.appendTo('body');
                dateTimePicker.css({
                    position: 'absolute',
                    top: position.top,
                    bottom: 'auto',
                    left: position.left,
                    right: 'auto',
                    'z-index': 10001
                });

                // if dateTimePicker is wider than the thing it is attached to then move it so the centers line up
                if (parentPos.left + parentWid < position.left + width) {
                    let newLeft = parentPos.left;
                    newLeft += parentWid / 2;
                    newLeft -= width / 2;
                    dateTimePicker.css({left: newLeft});
                }
            });

            this.parent = parent;
            this.el = input;
        }
    },

    destroy: function() {
        if (this.el && this.parent) {
            if (this.readOnly) {
                this.el.parent().remove();
            } else {
                this.el.data('DateTimePicker').destroy();
                this.el.parent().remove();
            }
        }
    },

    enable: function() {
        if (this.el) {
            this.el.data('DateTimePicker').enable();
        }
    },

    disable: function() {
        if (this.el) {
            this.el.data('DateTimePicker').disable();
        }
    },

    set: function (format, definesValues, defaultValues, options) {
        if (!this.el || !this.parent) {
            return;
        }

        definesValues = this.isValueDefined(definesValues, defaultValues);

        if (this.readOnly) {
            if (definesValues) {
                let date = moment(defaultValues);
                this.el.val(date.format($.datepicker._defaults.dateFormat.toUpperCase() + ' HH:mm:ss'));
                this.el.attr('value', defaultValues);
            } else {
                this.el.val("");
                this.el.attr('value', "");
            }
        } else {
            if (definesValues) {
                let date = moment(defaultValues);
                this.el.data('DateTimePicker').date(date);
            } else {
                this.el.data('DateTimePicker').clear();
            }
        }
    },

    values: function() {
        if (this.el && this.parent) {
            if (this.readOnly) {
                let value = this.el.attr('value');
                return value !== "" ? value : null;
            } else {
                // format to YYYYMMDD date
                let date = this.el.data('DateTimePicker').date();
                if (date != null) {
                    // format to iso datetime
                    return date.format("YYYY-MM-DD HH:mm:ss");
                } else {
                    return null;
                }
            }
        }

        return null;
    },

    checkCondition: function (condition, values) {
        switch (condition) {
            case 0:
                return this.values() == null;
            case 1:
                return this.values() != null;
            case 2:
                return this.values() === values;
            case 3:
                return this.values() !== values;
            default:
                return false;
        }
    },

    bindConditionListener: function(listeners, condition, values) {
        if (this.el && this.parent && !this.readOnly) {
            if (!this.bound) {
                this.el.parent().on('dp.change', $.proxy(this.onValueChanged, this));
                this.bound = true;
            }

            this.conditionType = condition;
            this.conditionValues = values;
            this.listeners = listeners || [];
        }
    },

    onValueChanged: function(e) {
        let display = this.checkCondition(this.conditionType, this.conditionValues);

        // show or hide the parent element
        if (display) {
            for (let i = 0; i < this.listeners.length; ++i) {
                this.listeners[i].parent.parent().show(true);
            }
        } else {
            for (let i = 0; i < this.listeners.length; ++i) {
                this.listeners[i].parent.parent().hide(true);
            }
        }
    }
});

DateTimeType.DescriptorTypeDetailsView = Marionette.View.extend({
    className: 'descriptor-type-details-format',
    template: "<div></div>",

    initialize: function() {
        this.listenTo(this.model, 'change', this.render, this);
    },

    getFormat: function() {
        return {}
    }
});

DateTimeType.format = function (value) {
    return moment(value).format("L LT");
};

module.exports = DateTimeType;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 258 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {/**
 * @file entity.js
 * @brief Display and manage an entity reference value format of type of descriptor
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-01-20
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let DescriptorFormatType = __webpack_require__(13);
let Marionette = __webpack_require__(1);

let Entity = function () {
    DescriptorFormatType.call(this);

    this.name = "entity";
    this.group = "reference";

    this.searchUrl = null;
    this.autocomplete = false;
    this.allow_multiple = true
};

_.extend(Entity.prototype, DescriptorFormatType.prototype, {
    create: function (format, parent, options) {
        options || (options = {
            history: false,
            readOnly: false,
            multiple: false,
            container: undefined
        });

        if (options.readOnly) {
            let input = this._createStdInput(parent, "fa-share", options.history);

            this.parent = parent;
            this.readOnly = true;
            this.el = input;
        } else {
            if (!format.list_type || format.list_type === "autocomplete") {
                this.autocomplete = true;

                let select = $('<select style="width: 100%;" ' + (options.multiple ? "multiple" : "") + '></select>');
                this.groupEl = this._createInputGroup(parent, "fa-share", select, options.history);

                // init the autocomplete
                let url = window.application.url() + (this.searchUrl ? this.searchUrl : (format.model.replace('.', '/') + '/'));
                let initials = [];

                let container = parent.closest('div.modal-dialog').parent();
                if (container.length === 0) {
                    container = options.container ? options.container : this.groupEl;  // parent.closest('div.panel');
                }

                let params = {
                    // width: 'element',
                    data: initials,
                    dropdownParent: container,
                    ajax: {
                        url: url + 'search/',
                        dataType: 'json',
                        delay: 250,
                        data: function (params) {
                            params.term || (params.term = '');

                            return {
                                filters: JSON.stringify({
                                    method: 'icontains',
                                    fields: ['name'],
                                    name: params.term
                                }),
                                cursor: params.next
                            };
                        },
                        processResults: function (data, params) {
                            params.next = null;

                            if (data.items.length >= 30) {
                                params.next = data.next || null;
                            }

                            let results = [];

                            for (let i = 0; i < data.items.length; ++i) {
                                results.push({
                                    id: data.items[i].id,
                                    text: data.items[i].label
                                });
                            }

                            return {
                                results: results,
                                pagination: {
                                    more: params.next != null
                                }
                            };
                        },
                        cache: true
                    },
                    allowClear: true,
                    minimumInputLength: 3,
                    placeholder: _t("Enter a value.")
                };

                // make an autocomplete widget on simple_value
                select.select2(params).fixSelect2Position();

                this.parent = parent;
                this.el = select;
            } else if (format.list_type === 'dropdown') {
                this.autocomplete = false;

                let select = $('<select style="width: 100%;" ' + (options.multiple ? "multiple" : "") + '></select>');
                this.groupEl = this._createInputGroup(parent, "fa-share", select, options.history);

                select.selectpicker({container: 'body', style: 'btn-default'});

                // init the selectpicker
                let url = window.application.url() + (this.searchUrl ? this.searchUrl : (format.model.replace('.', '/') + '/'));

                // refresh values
                this.promise = $.ajax({
                    url: url + 'search/',
                    dataType: 'json',
                    data: {filters: "{}"}
                }).done(function (data) {
                    for (let i = 0; i < data.items.length; ++i) {
                        let option = $("<option></option>");
                        let item = data.items[i];

                        option.attr("value", item.value || item.id);
                        option.attr("title", item.label || item.name);
                        option.html(item.label || item.name);

                        select.append(option);
                    }

                    select.selectpicker('refresh');
                });

                this.parent = parent;
                this.el = select;
            }
        }
    },

    destroy: function () {
        if (this.el && this.parent) {
            if (this.readOnly) {
                this.el.parent().remove();
            } else {
                if (this.autocomplete) {
                    this.el.select2('destroy');
                } else {
                    this.el.selectpicker('destroy');
                }
                this.groupEl.remove();
            }
        }
    },

    enable: function () {
        if (this.el) {
            if (this.autocomplete) {
                this.el.prop("disabled", false);
            } else {
                this.el.prop("disabled", false).selectpicker('refresh');
            }
        }
    },

    disable: function () {
        if (this.el) {
            if (this.autocomplete) {
                this.el.prop("disabled", true);
            } else {
                this.el.prop("disabled", true).selectpicker('refresh');
            }
        }
    },

    set: function (format, definesValues, defaultValues, options) {
        if (!this.el || !this.parent) {
            return;
        }

        definesValues = this.isValueDefined(definesValues, defaultValues);

        let url = window.application.url() + (this.searchUrl ? this.searchUrl : (format.model.replace('.', '/') + '/'));

        if (this.readOnly) {
            let type = this;

            if (definesValues) {
                this.el.attr('value', defaultValues);

                $.ajax({
                    type: "GET",
                    url: url + defaultValues + '/',
                    dataType: 'json'
                }).done(function (data) {
                    type.el.val(data.name);
                });
            } else {
                this.el.attr('value', "").val("");
            }
        } else {
            let type = this;

            if (this.autocomplete) {
                if (definesValues) {
                    let initials = [];

                    // @todo multiple ?

                    // is the option exists
                    if (type.el.children('option[value=' + defaultValues + ']').length) {
                        type.el.val(defaultValues).trigger('change');
                    } else {
                        // autoselect the initial value
                        $.ajax({
                            type: "GET",
                            url: url + defaultValues + '/',
                            dataType: 'json'
                        }).done(function (data) {
                            initials.push({id: data.id, text: data.name});

                            let option = new Option(data.name, data.id, true, true);
                            type.el.append(option).trigger('change');

                            type.el.trigger({
                                type: 'select2:select',
                                params: {
                                    data: initials
                                }
                            });
                        });
                    }
                } else {
                    this.el.val(null).trigger('change');
                }
            } else {
                if (definesValues) {
                    // defines temporary value (before waiting)
                    this.el.attr('value', defaultValues);

                    $.when(this.promise).done(function (data) {
                        type.el.val(defaultValues).trigger('change');
                        type.el.selectpicker('refresh');

                        // remove temporary vale
                        type.el.removeAttr('value');
                    });
                } else {
                    this.el.val(null).trigger('change');
                }
            }
        }
    },

    clear: function () {
        if (this.el && this.parent) {
            if (this.readOnly) {
                this.el.attr('value', null);
                this.el.val('');
            } else {
                this.el.val(null).trigger('change');
            }
        }
    },

    values: function () {
        if (this.el && this.parent) {
            if (this.readOnly) {
                return this.el.attr('value');
            } else {
                if (Array.isArray(this.el.val())) {
                    let values = this.el.val();
                    return values.map(function (value) {
                        value = parseInt(value);
                        return isNaN(value) ? null : value
                    })
                } else if (this.el.val() !== "") {
                    let value = parseInt(this.el.val());
                    return isNaN(value) ? null : value;
                } else {
                    return null;
                }
            }
        }

        return null;
    },

    checkCondition: function (condition, values) {
        switch (condition) {
            case 0:
                return this.values() === null;
            case 1:
                return this.values() !== null;
            case 2:
                return this.values() === values;
            case 3:
                return this.values() !== values;
            default:
                return false;
        }
    }
});

Entity.DescriptorTypeDetailsView = Marionette.View.extend({
    className: 'descriptor-type-details-format',
    template: __webpack_require__(499),

    ui: {
        format_model: '#format_model'
    },

    initialize: function () {
        this.listenTo(this.model, 'change', this.render, this);
    },

    onRender: function () {
        let format = this.model.get('format');
        application.descriptor.views.describables.drawSelect(this.ui.format_model, true, false, format.model);
    },

    getFormat: function () {
        return {
            'model': this.ui.format_model.val()
        }
    }
});

module.exports = Entity;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 259 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {/**
 * @file enumordinal.js
 * @brief Display and manage a list of ordinal with text values format of type of descriptor
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-01-20
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let EnumSingle = __webpack_require__(51);
let Marionette = __webpack_require__(1);

let EnumOrdinal = function() {
    EnumSingle.call(this);

    this.name = "enum_ordinal";
    this.group = "list";
    this.allow_multiple = true
};

_.extend(EnumOrdinal.prototype, EnumSingle.prototype, {
});

EnumOrdinal.DescriptorTypeDetailsView = Marionette.View.extend({
    className: 'descriptor-type-details-format',
    template: __webpack_require__(501),

    ui: {
        format_trans: "#format_trans",
        field0: '#type_field0',
        field1: '#type_field1',
        sort_by_field: '#sort_by_field',
        display_fields: '#display_fields',
        search_field: '#search_field',
        list_type: '#list_type',
        format_range_min: '#format_range_min',
        format_range_max: '#format_range_max'
    },

    events: {
        'change @ui.list_type': 'changeListType'
    },

    initialize: function() {
        this.listenTo(this.model, 'change', this.render, this);
    },

    onRender: function() {
        this.ui.format_trans.selectpicker({style: 'btn-default', container: 'body'});

        this.ui.sort_by_field.selectpicker({style: 'btn-default'});
        this.ui.list_type.selectpicker({style: 'btn-default'});
        this.ui.display_fields.selectpicker({style: 'btn-default'});
        this.ui.search_field.selectpicker({style: 'btn-default'});

        this.ui.format_range_min.numeric({decimal : false, negative : false, maxDecimalPlaces: 0});
        this.ui.format_range_max.numeric({decimal : false, negative : false, maxDecimalPlaces: 0});

        let format = this.model.get('format');

        if (format.range !== undefined) {
            this.ui.format_range_min.val(format.range[0]);
            this.ui.format_range_max.val(format.range[1]);
        } else {
            this.ui.format_range_min.val("0");
            this.ui.format_range_max.val("10");
        }

        if (format.trans) {
            this.ui.format_trans.val("true").selectpicker('refresh');
        } else {
            this.ui.format_trans.val("false").selectpicker('refresh');
        }

        if (format.fields != undefined) {
            if (format.fields.length >= 1)
                this.ui.field0.val(format.fields[0]);
        }

        if (format.sortby_field != undefined) {
            this.ui.sort_by_field.selectpicker('val', format.sortby_field);
        }

        if (format.display_fields != undefined) {
            this.ui.display_fields.selectpicker('val', format.display_fields);
        }

        if (format.list_type != undefined) {
            this.ui.list_type.selectpicker('val', format.list_type);
        }

        if (format.list_type != undefined) {
            if (format.list_type === "dropdown") {
                this.ui.search_field.val('value0').prop('disabled', true).selectpicker('refresh');
            } else if (format.search_field) {
                this.ui.search_field.selectpicker('val', format.search_field);
            }
        } else {
            this.ui.search_field.val('value0').prop('disabled', true).selectpicker('refresh');
        }
    },

    changeListType: function () {
        let listType = this.ui.list_type.val();

        switch (listType) {
            case "dropdown":
                this.ui.search_field.val('value0').prop('disabled', true).selectpicker('refresh');
                break;
            default:
                this.ui.search_field.val('value0').prop('disabled', false).selectpicker('refresh');
                break;
        }
    },

    getFormat: function() {
        return {
            'trans': this.ui.format_trans.val() === "true",
            'fields': [this.ui.field0.val()],
            'sortby_field': this.ui.sort_by_field.val(),
            'display_fields': this.ui.display_fields.val(),
            'list_type': this.ui.list_type.val(),
            'search_field': this.ui.search_field.val(),
            'range': [
                this.ui.format_range_min.val(),
                this.ui.format_range_max.val()
            ]
        }
    }
});

module.exports = EnumOrdinal;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 260 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {/**
 * @file enumpair.js
 * @brief Display and manage a list of pair values format of type of descriptor
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-01-20
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let EnumSingle = __webpack_require__(51);
let Marionette = __webpack_require__(1);

let Popover = __webpack_require__(502);

let EnumPair = function() {
    EnumSingle.call(this);

    this.name = "enum_pair";
    this.group = "list";
    this.allow_multiple = true
};

_.extend(EnumPair.prototype, EnumSingle.prototype, {});

EnumPair.DescriptorTypeDetailsView = Marionette.View.extend({
    className: 'descriptor-type-details-format',
    template: __webpack_require__(503),

    ui: {
        format_trans: "#format_trans",
        field0: '#type_field0',
        field1: '#type_field1',
        sort_by_field: '#sort_by_field',
        display_fields: '#display_fields',
        search_field: '#search_field',
        list_type: '#list_type'
    },

    events: {
        'change @ui.list_type': 'changeListType'
    },

    behaviors: {
        Popover: {
            behaviorClass: Popover
        }
    },

    initialize: function() {
        this.listenTo(this.model, 'change', this.render, this);
    },

    onRender: function() {
        this.ui.format_trans.selectpicker({style: 'btn-default'});

        this.ui.sort_by_field.selectpicker({style: 'btn-default'});
        this.ui.list_type.selectpicker({style: 'btn-default'});
        this.ui.display_fields.selectpicker({style: 'btn-default'});
        this.ui.search_field.selectpicker({style: 'btn-default'});

        let format = this.model.get('format');

        if (format.trans) {
            this.ui.format_trans.val("true").selectpicker('refresh');
        } else {
            this.ui.format_trans.val("false").selectpicker('refresh');
        }

        if (format.fields != undefined) {
            if (format.fields.length >= 1)
                this.ui.field0.val(format.fields[0]);

            if (format.fields.length >= 2)
                this.ui.field1.val(format.fields[1]);
        }

        if (format.sortby_field != undefined) {
            this.ui.sort_by_field.selectpicker('val', format.sortby_field);
        }

        if (format.display_fields != undefined) {
            this.ui.display_fields.selectpicker('val', format.display_fields);
        }

        if (format.list_type != undefined) {
            this.ui.list_type.selectpicker('val', format.list_type);
        }

        if (format.list_type != undefined) {
            if (format.list_type === "dropdown") {
                this.ui.search_field.val('value0').prop('disabled', true).selectpicker('refresh');
            } else if (format.search_field) {
                this.ui.search_field.selectpicker('val', format.search_field);
            }
        } else {
            this.ui.search_field.val('value0').prop('disabled', true).selectpicker('refresh');
        }
    },

    changeListType: function () {
        let listType = this.ui.list_type.val();

        switch (listType) {
            case "dropdown":
                this.ui.search_field.val('value0').prop('disabled', true).selectpicker('refresh');
                break;
            default:
                this.ui.search_field.val('value0').prop('disabled', false).selectpicker('refresh');
                break;
        }
    },

    getFormat: function() {
        return {
            'trans': this.ui.format_trans.val() === "true",
            'fields': [this.ui.field0.val(), this.ui.field1.val()],
            'sortby_field': this.ui.sort_by_field.val(),
            'display_fields': this.ui.display_fields.val(),
            'list_type': this.ui.list_type.val(),
            'search_field': this.ui.search_field.val(),
        }
    }
});

module.exports = EnumPair;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 261 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {/**
 * @file imprecisedate.js
 * @brief Display and manage an imprecise date format of type of descriptor
 * @author Medhi BOULNEMOUR (INRA UMR1095)
 * @date 2017-04-11
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let DescriptorFormatType = __webpack_require__(13);
let Marionette = __webpack_require__(1);

let ImpreciseDateType = function () {
    DescriptorFormatType.call(this);

    this.name = "imprecise_date";
    this.group = "single";
    this.display_el = null;
};

_.extend(ImpreciseDateType.prototype, DescriptorFormatType.prototype, {
    create: function (format, parent, options) {
        options || (options = {
            history: false,
            readOnly: false
        });

        if (options.readOnly) {
            let input = this._createStdInput(parent, "fa-calendar", options.history);

            this.parent = parent;
            this.readOnly = true;
            this.el = input;
        } else {
            // hidden input
            let input = $('<input class="form-control" width="100%">').css({
                    height: '0px',
                    visibility: 'hidden',
                    padding: '0px',
                    border: 'none'
            });

            // proxy input
            let display_input = $('<input class="form-control" width="100%" pattern="[0-9\/\s]+">');
            this.groupEl = this._createInputGroup(parent, "fa-calendar", [display_input, input], options.history);

            //
            // Partial datetime
            //

            let accuracy = null; // 0: nothing, 1: year, 2: year-month, 3: year-month-day
            let current_date = null;

            let el = input.datetimepicker({
                locale: window.session.language,
                showClose: true,
                format: "L",
                showTodayButton: true,
                showClear: true,
                viewMode: 'years',
                minDate: '0001-01-01',
                maxDate: '9999-12-31',
                icons: {
                    close: 'OK'
                },
                // widgetPositioning: {
                //    vertical: 'auto',
                //    horizontal: 'auto'
                // }
            });

            let lastFocusedElement = null;

            display_input.mousedown(function(e) {
                // To prevent case when element already had focus
                 if (lastFocusedElement === e.target) {
                     el.data('DateTimePicker').show();
                 }
            }).focus(function(e){
                el.data('DateTimePicker').show();
                lastFocusedElement = e.target;
            }).blur(function(e) {
                el.data('DateTimePicker').hide();
                lastFocusedElement = null;
            });

            display_input.on('keydown', function (e) {
                // Allow: backspace, delete, tab, escape, dash, enter, slash and .
                if ($.inArray(e.keyCode, [46, 8, 9, 27, 13, 109, 110, 111, 190]) !== -1 ||
                    // Allow: Ctrl+A, Command+A
                    (e.keyCode === 65 && (e.ctrlKey === true || e.metaKey === true)) ||
                    // Allow: home, end, left, right, down, up
                    (e.keyCode >= 35 && e.keyCode <= 40)) {
                    // let it happen, don't do anything
                    return;
                }
                // Ensure that it is a number and stop the keypress
                if ((e.shiftKey || (e.keyCode < 48 || e.keyCode > 57)) && (e.keyCode < 96 || e.keyCode > 105)) {
                    e.preventDefault();
                }
            });

            display_input.on('change', function (e) {
                // define date accuracy
                let temp = (display_input.val().match(/[\/\-.]/g) || []).length;
                if (!display_input.val()) {
                    accuracy = 0;
                    current_date = null;
                    el.data('DateTimePicker').format("L");
                    el.data('DateTimePicker').date(current_date);
                } else if (temp === 2) {
                    accuracy = 3;
                    current_date = moment(display_input.val(), "L");
                    el.data('DateTimePicker').format("L");
                    el.data('DateTimePicker').date(current_date);
                    display_input.val(el.data('DateTimePicker').date().format("L"));
                } else if (temp === 1) {
                    accuracy = 2;
                    current_date = moment(display_input.val(), "MM/YYYY");
                    el.data('DateTimePicker').format("MM/YYYY");
                    el.data('DateTimePicker').date(current_date);
                    display_input.val(el.data('DateTimePicker').date().format("MM/YYYY"));
                } else {
                    accuracy = 1;
                    current_date = moment(display_input.val(), "YYYY");
                    el.data('DateTimePicker').format("YYYY");
                    el.data('DateTimePicker').date(current_date);
                    display_input.val(el.data('DateTimePicker').date().format("YYYY"));
                }
                el.data('DateTimePicker').hide();
            });

            el.on('dp.hide', function(e) {
                display_input.trigger('change');
            });

            el.on("dp.change", function(e){
                if (!el.data('DateTimePicker').date()) {
                    display_input.val("");
                } else if (el.data('DateTimePicker').format() === "YYYY") {
                    display_input.val(el.data('DateTimePicker').date().format("YYYY"));
                } else if (el.data('DateTimePicker').format() === "MM/YYYY") {
                    display_input.val(el.data('DateTimePicker').date().format("MM/YYYY"));
                } else if (el.data('DateTimePicker').format() === "L") {
                    display_input.val(el.data('DateTimePicker').date().format("L"));
                }
            });

            let ok_button = null;
            let widget_picker = null;

            el.on("dp.show", function (e) {
                el.data('DateTimePicker').format("L");
                el.data('DateTimePicker').viewMode("years");

                // fix position when parent has overflow-y defined
                // https://github.com/Eonasdan/bootstrap-datetimepicker/issues/790
                let dateTimePicker = $('body').find('.bootstrap-datetimepicker-widget:last'),
                    position = dateTimePicker.offset(),
                    parent = dateTimePicker.parent(),
                    parentPos = parent.offset(),
                    width = dateTimePicker.width(),
                    parentWid = parent.width();

                // move dateTimePicker to the exact same place it was but attached to body
                dateTimePicker.appendTo('body');
                dateTimePicker.css({
                    position: 'absolute',
                    top: position.top + ((position.top < parentPos.top) ? -display_input.outerHeight() : 0),
                    bottom: 'auto',
                    left: position.left,
                    right: 'auto',
                    'z-index': 10001
                });

                // if dateTimePicker is wider than the thing it is attached to then move it so the centers line up
                if (parentPos.left + parentWid < position.left + width) {
                    let newLeft = parentPos.left;
                    newLeft += parentWid / 2;
                    newLeft -= width / 2;
                    dateTimePicker.css({left: newLeft});
                }

                widget_picker = dateTimePicker;

                let button = $('.OK').html(_t("Undefined")).css('display', 'none');
                button.on('click', function (e) {
                    if (accuracy === 1) {
                        el.data('DateTimePicker').format("YYYY");
                        el.data('DateTimePicker').date(current_date);
                        display_input.val(el.data('DateTimePicker').date().format("YYYY"));
                    } else if (accuracy === 2) {
                        el.data('DateTimePicker').format("MM/YYYY");
                        el.data('DateTimePicker').date(current_date);
                        display_input.val(el.data('DateTimePicker').date().format("MM/YYYY"));
                    } else if (el.data('DateTimePicker').date() === null) {
                        accuracy = 0;
                    }
                });

                ok_button = button;

                // manage (undefined/ok) button visibility 1st part
                let picker_view = dateTimePicker.find('.picker-switch');
                picker_view.on('click', function () {
                    if (dateTimePicker.find('.datepicker-days').css('display') === 'block') {
                        accuracy = 1; // fix accuracy of the date
                        ok_button.css('display', 'block');
                    } else {
                        ok_button.css('display', 'none');
                    }
                });
            });

            el.on("dp.update", function (e) {
                // set accuracy of the date
                if (e.change === 'YYYY') {
                    accuracy = 1;
                } else if (e.change === 'M') {
                    accuracy = 2;
                } else {
                    accuracy = 0;
                }

                //set the current date
                current_date = e.viewDate;

                // manage (undefined/ok) button visibility 2nd part
                if (widget_picker.find('.datepicker-days').css('display') === 'block') {
                    ok_button.css('display', 'block');
                } else if (widget_picker.find('.datepicker-months').css('display') === 'block') {
                    ok_button.css('display', 'block');
                } else {
                    ok_button.css('display', 'none');
                }
            });

            this.parent = parent;
            this.el = input;
            this.display_el = display_input;
        }
    },

    destroy: function () {
        if (this.el && this.parent) {
            if (this.readOnly) {
                this.el.parent().remove();
            } else {
                this.el.data('DateTimePicker').destroy();
                this.el.parent().remove();
            }
        }
    },

    enable: function () {
        if (this.el) {
            this.el.data('DateTimePicker').enable();
        }
    },

    disable: function () {
        if (this.el) {
            this.el.data('DateTimePicker').disable();
        }
    },

    set: function (format, definesValues, defaultValues, options) {
        if (!this.el || !this.parent) {
            return;
        }

        definesValues = this.isValueDefined(definesValues, defaultValues);
        let date = null;

        if (this.readOnly) {
            if (definesValues && defaultValues) {
                // defaultValues
                date = moment();
                date.locale(session.language);
                if (defaultValues[0] && !defaultValues[1] && !defaultValues[2]) {
                    // format: YYYY
                    date.year(defaultValues[0]);
                    this.el.val(date.format("YYYY"));
                } else if (defaultValues[0] && defaultValues[1] && !defaultValues[2]) {
                    // format: MM/YYYY
                    date.year(defaultValues[0]);
                    date.month(defaultValues[1] - 1);
                    this.el.val(date.format("MM/YYYY"));
                } else if (defaultValues[0] && defaultValues[1] && defaultValues[2]) {
                    // format: L (ex: 20/05/1992)
                    date.year(defaultValues[0]);
                    date.month(defaultValues[1] - 1);
                    date.date(defaultValues[2]);
                    this.el.val(date.format("L"));
                }
            } else {
                this.el.val("");
            }

            // store value data
            this.readValues = defaultValues;
        } else {
            if (definesValues) {
                date = moment();
                if (defaultValues[0] && !defaultValues[1] && !defaultValues[2]) {
                    // format: YYYY
                    date.year(defaultValues[0]);
                    this.el.data('DateTimePicker').format("YYYY");
                    this.display_el.val(date.format("YYYY"));
                } else if (defaultValues[0] && defaultValues[1] && !defaultValues[2]) {
                    // format: MM/YYYY
                    date.year(defaultValues[0]);
                    date.month(defaultValues[1] - 1);
                    this.el.data('DateTimePicker').format("MM/YYYY");
                    this.display_el.val(date.format("MM/YYYY"));
                } else if (defaultValues[0] && defaultValues[1] && defaultValues[2]) {
                    // format: L (ex: 20/05/1992)
                    date.year(defaultValues[0]);
                    date.month(defaultValues[1] - 1);
                    date.date(defaultValues[2]);
                    this.el.data('DateTimePicker').format("L");
                    this.display_el.val(date.format("L"));
                }
                this.el.data('DateTimePicker').date(date);
            } else {
                this.el.data('DateTimePicker').clear();
            }
        }
    },

    values: function () {
        if (this.el && this.parent) {
            if (this.readOnly) {
                return this.readValues;
            } else {
                let date = this.el.data('DateTimePicker').date();
                let format = this.el.data('DateTimePicker').format();
                if (date != null) {
                    switch (format) {
                        case "YYYY":
                            return [parseInt(date.format("YYYY")), 0, 0];

                        case "MM/YYYY":
                            return [parseInt(date.format("YYYY")), parseInt(date.format("MM")), 0];

                        case "L":
                            return [parseInt(date.format("YYYY")), parseInt(date.format("MM")), parseInt(date.format("DD"))];
                    }
                } else {
                    return null;
                }
            }
        }

        return null;
    },

    checkCondition: function (condition, values) {
        switch (condition) {
            case 0:
                return this.values() == null;
            case 1:
                return this.values() != null;
            case 2:
                return this.values() === values;
            case 3:
                return this.values() !== values;
            default:
                return false;
        }
    },

    bindConditionListener: function (listeners, condition, values) {
        if (this.el && this.parent && !this.readOnly) {
            if (!this.bound) {
                this.el.parent().on('dp.change', $.proxy(this.onValueChanged, this));
                this.bound = true;
            }

            this.conditionType = condition;
            this.conditionValues = values;
            this.listeners = listeners || [];
        }
    },

    onValueChanged: function (e) {
        let display = this.checkCondition(this.conditionType, this.conditionValues);

        // show or hide the parent element
        if (display) {
            for (let i = 0; i < this.listeners.length; ++i) {
                this.listeners[i].parent.parent().show(true);
            }
        } else {
            for (let i = 0; i < this.listeners.length; ++i) {
                this.listeners[i].parent.parent().hide(true);
            }
        }
    }
});

ImpreciseDateType.DescriptorTypeDetailsView = Marionette.View.extend({
    className: 'descriptor-type-details-format',
    template: "<div></div>",

    initialize: function () {
        this.listenTo(this.model, 'change', this.render, this);
    },

    getFormat: function () {
        return {}
    }
});

ImpreciseDateType.format = function (value) {
    if (value === null || value === undefined) {
        return "";
    } else if (value[0] !== 0 && value[1] !== 0 && value[2] !== 0) {
        return moment().locale(session.language).year(value[0]).month(value[1]-1).date(value[2]).format("L");
    } else if (value[0] !== 0 && value[1] !== 0) {
        return moment().locale(session.language).year(value[0]).month(value[1]-1).format("MM/YYYY");
    } else if (value[0] !== 0) {
        return moment().locale(session.language).year(value[0]).format("YYYY");
    } else {
        return ""
    }
};

module.exports = ImpreciseDateType;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 262 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {/**
 * @file layoutmodel.js
 * @brief Display and manage a layout of descriptor reference value format
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-07-10
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let DescriptorFormatType = __webpack_require__(13);

let LayoutModel = function () {
    DescriptorFormatType.call(this);

    this.name = "layout";
    this.group = "reference";

    this.searchUrl = null;
    this.allow_multiple = true
};

_.extend(LayoutModel.prototype, DescriptorFormatType.prototype, {
    create: function (format, parent, options) {
        options || (options = {
            readOnly: false,
            history: false,
            multiple: false
        });

        if (options.readOnly) {
            let input = this._createStdInput(parent, "fa-folder-open", options.history);

            this.parent = parent;
            this.readOnly = true;
            this.el = input;
        } else {
            let select = $('<select style="width: 100%;" ' + (options.multiple ? "multiple" : "") + '></select>');
            this.groupEl = this._createInputGroup(parent, "fa-th-large", select, options.history);

            // init the autocomplete
            let url = window.application.url(['descriptor', 'layout']);
            let initials = [];

            let container = parent.closest('div.modal-dialog').parent();
            if (container.length === 0) {
                container = this.groupEl;  // parent.closest('div.panel');
            }

            let params = {
                // width: 'element',
                data: initials,
                dropdownParent: container,
                ajax: {
                    url: url + 'search/',
                    dataType: 'json',
                    delay: 250,
                    data: function (params) {
                        params.term || (params.term = '');

                        return {
                            filters: JSON.stringify({
                                method: 'icontains',
                                fields: ['name_or_label', 'model'],
                                name: params.term,
                                model: format.model
                            }),
                            cursor: params.next
                        };
                    },
                    processResults: function (data, params) {
                        params.next = null;

                        if (data.items.length >= 30) {
                            params.next = data.next || null;
                        }

                        let results = [];

                        for (let i = 0; i < data.items.length; ++i) {
                            results.push({
                                id: data.items[i].id,
                                text: data.items[i].label
                            });
                        }

                        return {
                            results: results,
                            pagination: {
                                more: params.next != null
                            }
                        };
                    },
                    cache: true
                },
                allowClear: true,
                minimumInputLength: 3,
                placeholder: _t("Enter a value.")
            };

            // make an autocomplete widget on simple_value
            select.select2(params).fixSelect2Position();

            this.parent = parent;
            this.el = select;
        }
    },

    destroy: function () {
        if (this.el && this.parent) {
            if (this.readOnly) {
                this.el.parent().remove();
            } else {
                this.el.select2('destroy');
                this.groupEl.remove();
            }
        }
    },

    enable: function () {
        if (this.el) {
            this.el.prop("disabled", false);
        }
    },

    disable: function () {
        if (this.el) {
            this.el.prop("disabled", true);
        }
    },

    set: function (format, definesValues, defaultValues, options) {
        if (!this.el || !this.parent) {
            return;
        }

        definesValues = this.isValueDefined(definesValues, defaultValues);

        let url = window.application.url(['descriptor', 'layout']);

        if (this.readOnly) {
            let type = this;

            if (definesValues) {
                this.el.attr('value', defaultValues);

                if (this.allow_multiple && Array.isArray(defaultValues)) {
                    // @todo
                } else {
                    $.ajax({
                        type: "GET",
                        url: window.application.url([url, defaultValues]),
                        dataType: 'json'
                    }).done(function (data) {
                        type.el.val(data.name);
                    });
                }
            } else {
                this.el.attr('value', "").val("");
            }
        } else {
            if (definesValues) {
                let type = this;
                let initials = [];

                // is the option exists
                if (type.el.children('option[value=' + defaultValues + ']').length) {
                    type.el.trigger({
                        type: 'select2:select',
                        params: {
                            data: initials
                        }
                    });
                } else {
                    // autoselect the initial value
                    $.ajax({
                        type: "GET",
                        url: url + defaultValues + '/',
                        dataType: 'json'
                    }).done(function (data) {
                        initials.push({id: data.id, text: data.name});

                        let option = new Option(data.name, data.id, true, true);
                        type.el.append(option).trigger('change');

                        type.el.trigger({
                            type: 'select2:select',
                            params: {
                                data: initials
                            }
                        });
                    });
                }
            } else {
                this.el.val(null).trigger('change');
            }
        }
    },

    values: function () {
        if (this.el && this.parent) {
            if (this.readOnly) {
                let value = parseInt(this.el.attr('value'));
                return isNaN(value) ? null : value;
            } else {
                if (this.el.attr('value') !== undefined) {
                    let value = parseInt(this.el.attr('value'));
                    return isNaN(value) ? null : value;
                } else {
                    if (Array.isArray(this.el.val())) {
                        let values = this.el.val();
                        return values.map(function (value) {
                            value = parseInt(value);
                            return isNaN(value) ? null : value
                        })
                    } else if (this.el.val() !== "") {
                        let value = parseInt(this.el.val());
                        return isNaN(value) ? null : value;
                    } else {
                        return null;
                    }
                }
            }
        }
        return null;
    },

    checkCondition: function (condition, values) {
        switch (condition) {
            case 0:
                return this.values() === null;
            case 1:
                return this.values() !== null;
            case 2:
                return this.values() === values;
            case 3:
                return this.values() !== values;
            default:
                return false;
        }
    }
});

// not edition view

module.exports = LayoutModel;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 263 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {/**
 * @file numericrange.js
 * @brief Display and manage a numeric range format of type of descriptor
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-01-20
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let DescriptorFormatType = __webpack_require__(13);

let NumericRange = function() {
    DescriptorFormatType.call(this);

    this.name = "numeric_range";
    this.group = "single";

    this.precision = 0;
};

_.extend(NumericRange.prototype, DescriptorFormatType.prototype, {
    create: function(format, parent, options) {
        options || (options = {
            readOnly: false,
            history: false
        });

        this.precision = format.precision;

        if (options.readOnly) {
            let input = this._createStdInput(parent, "fa-cog", options.history);

            this.parent = parent;
            this.readOnly = true;
            this.el = input;
        } else {
            let input = $('<input class="form-control" width="100%">');
            let clean = $('<span class="form-clean-btn action fa fa-eraser"></span>');
            this.groupEl = this._createInputGroup(parent, "fa-cog", input, options.history);

            clean.insertAfter(input);

            if (options.history) {
                // adjust position
                clean.css('right', '90px');
            }

            clean.on('click', function() {
               input.val("");
            });

            input.numeric({
                allowPlus           : false,
                allowMinus          : format.range[0] < 0,
                allowThouSep        : false,
                allowDecSep         : true,
                allowLeadingSpaces  : false,
                maxDigits           : NaN,
                maxDecimalPlaces    : format.precision,
                maxPreDecimalPlaces : NaN,
                max                 : format.range[1],
                min                 : format.range[0]
            });

            this.parent = parent;
            this.el = input;
        }
    },

    destroy: function() {
        if (this.el && this.parent) {
            if (this.readOnly) {
                this.el.parent().remove();
            } else {
                this.el.parent().remove();
            }
        }
    },

    enable: function() {
        if (this.el) {
            this.el.prop("disabled", false);
        }
    },

    disable: function() {
        if (this.el) {
            this.el.prop("disabled", true);
        }
    },

    set: function (format, definesValues, defaultValues) {
        if (!this.el || !this.parent) {
            return;
        }

        definesValues = this.isValueDefined(definesValues, defaultValues);

        if (this.readOnly) {
            if (definesValues) {
                this.el.val(defaultValues);
            } else {
                this.el.val("");
            }
        } else {
            if (definesValues) {
                this.el.val(defaultValues);
            } else {
                this.el.val("");
            }
        }
    },

    values: function() {
        if (this.el && this.parent) {
            let value = parseFloat(this.el.val());
            return _.isNaN(value) ? null : value.toFixed(this.precision);
        }

        return null;
    },

    checkCondition: function (condition, values) {
        switch (condition) {
            case 0:
                return this.values() == null;
            case 1:
                return this.values() != null;
            case 2:
                return this.values() === values;
            case 3:
                return this.values() !== values;
            default:
                return false;
        }
    },

    bindConditionListener: function(listeners, condition, values) {
        if (this.el && this.parent && !this.readOnly) {
            if (!this.bound) {
                this.el.on('input', $.proxy(this.onValueChanged, this));
                this.bound = true;
            }

            this.conditionType = condition;
            this.conditionValues = values;
            this.listeners = listeners || [];
        }
    },

    onValueChanged: function(e) {
        let display = this.checkCondition(this.conditionType, this.conditionValues);

        // show or hide the parent element
        if (display) {
            for (let i = 0; i < this.listeners.length; ++i) {
                this.listeners[i].parent.parent().show(true);
            }
        } else {
            for (let i = 0; i < this.listeners.length; ++i) {
                this.listeners[i].parent.parent().hide(true);
            }
        }
    }
});

let Numeric = __webpack_require__(52);

NumericRange.DescriptorTypeDetailsView = Numeric.DescriptorTypeDetailsView.extend({
    template: __webpack_require__(505),

    ui: {
        'format_unit': '#format_unit',
        'format_unit_custom': '#format_unit_custom',
        'format_precision': '#format_precision',
        'format_range_min': '#format_range_min',
        'format_range_max': '#format_range_max'
    },

    events: {
        'change @ui.format_unit': 'changeFormatUnit',
        'input @ui.format_unit_custom': 'inputFormatUnitCustom'
    },

    onRender: function() {
        NumericRange.DescriptorTypeDetailsView.__super__.onRender.apply(this);

        this.ui.format_range_min.numeric({decimal: '.', negative: false});
        this.ui.format_range_max.numeric({decimal: '.', negative: false});

        let format = this.model.get('format');

        if (format.range !== undefined) {
            this.ui.format_range_min.val(format.range[0]);
            this.ui.format_range_max.val(format.range[1]);
        } else {
            this.ui.format_range_min.val("0.0");
            this.ui.format_range_max.val("100.0");
        }
    },

    getFormat: function() {
        let format = NumericRange.DescriptorTypeDetailsView.__super__.getFormat.apply(this);

        format.range = [
            this.ui.format_range_min.val(),
            this.ui.format_range_max.val()
        ];

        return format;
    }
});

module.exports = NumericRange;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 264 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {/**
 * @file ordinal.js
 * @brief Display and manage an ordinal format of type of descriptor
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-01-20
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let DescriptorFormatType = __webpack_require__(13);

let Ordinal = function() {
    DescriptorFormatType.call(this);

    this.name = "ordinal";
    this.group = "single";
};

_.extend(Ordinal.prototype, DescriptorFormatType.prototype, {
    create: function(format, parent, options) {
        options || (options = {
            readOnly: false,
            history: false
        });

        this.isInput = (format.range[1] - format.range[0] + 1) > 256;

        if (options.readOnly) {
            let input = this._createStdInput(parent, "fa-ellipsis-v", options.history);

            this.parent = parent;
            this.readOnly = true;
            this.el = input;
        } else {
            if (this.isInput) {
                let input = $('<input" width="100%">');
                let clean = $('<span class="form-clean-btn action fa fa-eraser"></span>');
                this.groupEl = this._createInputGroup(parent, "fa-ellipsis-v", input, options.history);

                clean.insertAfter(input);

                if (options.history) {
                    // adjust position
                    clean.css('right', '90px');
                }

                clean.on('click', function() {
                   input.val("");
                });

                input.numeric({
                    allowPlus: false,
                    allowMinus: format.range[0] < 0,
                    allowThouSep: false,
                    allowDecSep: false,
                    allowLeadingSpaces: false,
                    maxDigits: NaN,
                    maxDecimalPlaces: NaN,
                    maxPreDecimalPlaces: NaN,
                    max: format.range[1],
                    min: format.range[0]
                });

                this.parent = parent;
                this.el = input;
            } else {
                // ordinal with at max 256 values as a dropdown
                let select = $('<select data-width="100%"></select>');
                this.groupEl = this._createInputGroup(parent, "fa-ellipsis-v", select, options.history);

                // undefined
                let option = $("<option></option>");

                option.attr("value", "");
                option.html(' - ' + _t("Undefined") + ' - ');

                select.append(option);

                for (let i = format.range[0]; i <= format.range[1]; ++i) {
                    option = $("<option></option>");

                    option.attr("value", i);
                    option.html(i);

                    select.append(option);
                }

                select.selectpicker({container: 'body', style: 'btn-default'});

                this.parent = parent;
                this.el = select;
            }
        }
    },

    destroy: function() {
        if (this.el && this.parent) {
            if (this.readOnly) {
                this.el.parent().remove();
            } else {
                if (this.isInput) {
                    this.el.parent().remove();
                } else {
                    this.el.selectpicker('destroy');
                    this.groupEl.remove();
                }
            }
        }
    },

    enable: function() {
        if (this.el) {
            this.el.prop("disabled", false);

            if (this.isInput) {
                this.el.selectpicker('refresh');
            }
        }
    },

    disable: function() {
        if (this.el) {
            this.el.prop("disabled", true);

            if (this.isInput) {
                this.selectpicker('refresh');
            }
        }
    },

    set: function (format, definesValues, defaultValues, options) {
        if (!this.el || !this.parent) {
            return;
        }

        definesValues = this.isValueDefined(definesValues, defaultValues);

        if (this.readOnly) {
            if (definesValues) {
                this.el.val(defaultValues);
            } else {
                this.el.val("");
            }
        } else {
            if (definesValues) {
                if (this.isInput) {
                    this.el.val(defaultValues);
                } else {
                    this.el.val(defaultValues.toString()).trigger('change');
                    this.el.selectpicker('refresh');
                }
            } else {
                if (this.isInput) {
                    this.el.val("");
                } else {
                    this.el.val("").trigger('change');
                    this.el.selectpicker('refresh');
                }

            }
        }
    },

    values: function() {
        if (this.el && this.parent) {
            if (this.el.val() !== "") {
                let value = parseInt(this.el.val());
                return isNaN(value) ? null : value;
            } else {
                return null;
            }
        }

        return null;
    },

    checkCondition: function (condition, values) {
        switch (condition) {
            case 0:
                return this.values() === null;
            case 1:
                return this.values() !== null;
            case 2:
                return this.values() === values;
            case 3:
                return this.values() !== values;
            default:
                return false;
        }
    },

    bindConditionListener: function(listeners, condition, values) {
        if (this.el && this.parent && !this.readOnly) {
            if (!this.bound) {
                if (this.isInput) {
                    this.el.on('input', $.proxy(this.onValueChanged, this));
                } else {
                    this.el.parent('div.bootstrap-select').on('changed.bs.select', $.proxy(this.onValueChanged, this));
                }

                this.bound = true;
            }

            this.conditionType = condition;
            this.conditionValues = values;
            this.listeners = listeners || [];
        }
    },

    onValueChanged: function(e) {
        let display = this.checkCondition(this.conditionType, this.conditionValues);

        // show or hide the parent element
        if (display) {
            for (let i = 0; i < this.listeners.length; ++i) {
                this.listeners[i].parent.parent().show(true);
            }
        } else {
            for (let i = 0; i < this.listeners.length; ++i) {
                this.listeners[i].parent.parent().hide(true);
            }
        }
    }
});

let Numeric = __webpack_require__(52);

Ordinal.DescriptorTypeDetailsView = Numeric.DescriptorTypeDetailsView.extend({
    template: __webpack_require__(506),

    ui: {
        'format_unit': '#format_unit',
        'format_unit_custom': '#format_unit_custom',
        'format_range_min': '#format_range_min',
        'format_range_max': '#format_range_max'
    },

    events: {
        'change @ui.format_unit': 'changeFormatUnit',
        'input @ui.format_unit_custom': 'inputFormatUnitCustom'
    },

    onRender: function() {
        // same as numeric excepted the precision
        application.descriptor.views.formatUnits.drawSelect(this.ui.format_unit);

        let format = this.model.get('format');

        if (format.unit != undefined) {
            this.ui.format_unit.selectpicker('val', format.unit);
        }

        this.ui.format_range_min.numeric({decimal : false, negative : false, maxDecimalPlaces: 0});
        this.ui.format_range_max.numeric({decimal : false, negative : false, maxDecimalPlaces: 0});

        format = this.model.get('format');

        if (format.range !== undefined) {
            this.ui.format_range_min.val(format.range[0]);
            this.ui.format_range_max.val(format.range[1]);
        } else {
            this.ui.format_range_min.val("0");
            this.ui.format_range_max.val("10");
        }
    },

    getFormat: function() {
        let customUnit = this.ui.format_unit.val() === "custom" ? this.ui.format_unit_custom.val() : "";

        return {
            'unit': this.ui.format_unit.val(),
            'custom_unit': customUnit,
            'range': [
                this.ui.format_range_min.val(),
                this.ui.format_range_max.val()
            ]
        };
    }
});

module.exports = Ordinal;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 265 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {/**
 * @file string.js
 * @brief Display and manage a string format of type of descriptor
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-01-20
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let DescriptorFormatType = __webpack_require__(13);
let DescribableValueHistoryDialog = __webpack_require__(255);
let Marionette = __webpack_require__(1);

let StringType = function() {
    DescriptorFormatType.call(this);

    this.name = "string";
    this.group = "single";
};

_.extend(StringType.prototype, DescriptorFormatType.prototype, {
    create: function(format, parent, options) {
        options || (options = {
            readOnly: false,
            history: false
        });

        if (options.readOnly) {
            let input = this._createStdInput(parent, "fa-font", options.history);

            // hard limit to 1024 characters
            input.attr('maxlength', 1024);

            this.parent = parent;
            this.readOnly = true;
            this.el = input;
        } else {
            let input = $('<input class="form-control" width="100%">');
            let clean = $('<span class="form-clean-btn action fa fa-eraser"></span>');
            this.groupEl = this._createInputGroup(parent, "fa-font", input, options.history);

            clean.insertAfter(input);

            if (options.history) {
                // adjust position
                clean.css('right', '90px');
            }

            clean.on('click', function() {
               input.val("");
            });

            // hard limit to 1024 characters
            input.attr('maxlength', 1024);

            if (typeof format.regexp !== "undefined") {
                input.on("input", function(e) {
                    // check regexp and max length of 1024
                    let val = $(e.target).val();
                    let re = new RegExp(format.regexp);
                    let el = $(e.target);

                    if (val.length > 1024) {
                        StringType.prototype._validationHelper(el, -1, _t('characters_max', {count: 1024}));
                    } else if (!re.test(val)) {
                        StringType.prototype._validationHelper(el, -1, _t("Invalid format"));
                    } else {
                        StringType.prototype._validationHelper(el, 0, null);
                    }

                    return true;
                });
            } else {
                input.on("input", function(e) {
                    let val = $(e.target).val();
                    let el = $(e.target);

                    // hard limit to 1024 characters
                    if (val.length > 1024) {
                        StringType.prototype._validationHelper(el, -1, _t('characters_max', {count: 1024}));
                    } else {
                        StringType.prototype._validationHelper(el, 0, null);
                    }

                    return true;
                });
            }

            this.parent = parent;
            this.el = input;
        }
    },

    destroy: function() {
        if (this.el && this.parent) {
            if (this.readOnly) {
                this.el.parent().remove();
            } else {
                this.el.parent().remove();
            }
        }
    },

    enable: function() {
        if (this.el) {
            this.el.prop("disabled", false);
        }
    },

    disable: function() {
        if (this.el) {
            this.el.prop("disabled", true);
        }
    },

    set: function (format, definesValues, defaultValues, options) {
        if (!this.el || !this.parent) {
            return;
        }

        definesValues = this.isValueDefined(definesValues, defaultValues);

        if (this.readOnly) {
            if (definesValues) {
                this.el.val(defaultValues);
            } else {
                this.el.val("");
            }
        } else {
            if (definesValues) {
                this.el.val(defaultValues);
            } else {
                this.el.val("");
            }
        }
    },

    values: function() {
        if (this.el && this.parent) {
            let value = this.el.val();
            return value !== "" ? value : null;
        }

        return null;
    },

    checkCondition: function (condition, values) {
        switch (condition) {
            case 0:
                return this.values() === null;
            case 1:
                return this.values() !== null;
            case 2:
                return this.values() === values;
            case 3:
                return this.values() !== values;
            default:
                return false;
        }
    },

    bindConditionListener: function(listeners, condition, values) {
        if (this.el && this.parent && !this.readOnly) {
            if (!this.bound) {
                this.el.on('input', $.proxy(this.onValueChanged, this));
                this.bound = true;
            }

            this.conditionType = condition;
            this.conditionValues = values;
            this.listeners = listeners || [];
        }
    },

    onValueChanged: function(e) {
        let display = this.checkCondition(this.conditionType, this.conditionValues);

        // show or hide the parent element
        if (display) {
            for (let i = 0; i < this.listeners.length; ++i) {
                this.listeners[i].parent.parent().show(true);
            }
        } else {
            for (let i = 0; i < this.listeners.length; ++i) {
                this.listeners[i].parent.parent().hide(true);
            }
        }
    },

    _validationHelper: function(input, type, comment) {
        // validation working on input-group only
        let el = input.parent().parent();

        if (!el.hasClass('has-feedback')) {
            el.addClass('has-feedback');
        }

        let help = input.parent().siblings('span.help-block');
        if (help.length === 0) {
            help = $('<span class="help-block"></span>');
            el.append(help);
        }

        if (type === -1) {
            el.addClass('has-error');
            input.addClass('invalid');

            help.show(false);
            help.text(comment);
        } else {
            el.removeClass('has-error');
            input.removeClass('invalid');

            help.hide(false);
            help.text("");
        }
    },

    showHistory: function(appLabel, modelName, objectId, valueName, descriptor, options) {
        options || (options = {});

        // refresh values
        this.promise = $.ajax({
            url: window.application.url(['audit', 'search', 'history', 'value']),
            dataType: 'json',
            data: {
                app_label: appLabel,
                model: modelName,
                object_id: objectId,
                value: valueName
            }
        }).done(function (data) {
            let dialog = new DescribableValueHistoryDialog({
                entries: data.items,
                readOnly: this.readOnly,
                descriptor: descriptor
            });

            dialog.render();
        });
    }
});

StringType.DescriptorTypeDetailsView = Marionette.View.extend({
    className: 'descriptor-type-details-format',
    template: __webpack_require__(507),

    ui: {
        'format_regexp': '#format_regexp'
    },

    initialize: function() {
        this.listenTo(this.model, 'change', this.render, this);
    },

    onRender: function() {
        let format = this.model.get('format');

        this.ui.format_regexp.val(format.regexp);
    },

    getFormat: function() {
        return {
            'regexp': this.ui.format_regexp.val()
        }
    }
});

module.exports = StringType;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 266 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {/**
 * @file time.js
 * @brief Display and manage a time format of type of descriptor
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-01-20
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let DescriptorFormatType = __webpack_require__(13);
let Marionette = __webpack_require__(1);

let TimeType = function() {
    DescriptorFormatType.call(this);

    this.name = "time";
    this.group = "single";
};

_.extend(TimeType.prototype, DescriptorFormatType.prototype, {
    create: function(format, parent, options) {
        options || (options = {
            readOnly: false,
            history: false
        });

        if (options.readOnly) {
            let input = this._createStdInput(parent, "fa-clock-o", options.history);

            this.parent = parent;
            this.readOnly = true;
            this.el = input;
        } else {
            let input = $('<input class="form-control" width="100%">');
            this.groupEl = this._createInputGroup(parent, "fa-clock-o", input, options.history);

            input.datetimepicker({
                locale: session.language,
                format: 'HH:mm:ss',  // 24h
                showTodayButton: true,
                showClear: true,
                allowInputToggle: true
            }).on('dp.show', function (e) {
                // fix position when parent has overflow-y defined
                let dateTimePicker = $('body').find('.bootstrap-datetimepicker-widget:last'),
                    position = dateTimePicker.offset(),
                    parent = dateTimePicker.parent(),
                    parentPos = parent.offset(),
                    width = dateTimePicker.width(),
                    parentWid = parent.width();

                // move datetimepicker to the exact same place it was but attached to body
                dateTimePicker.appendTo('body');
                dateTimePicker.css({
                    position: 'absolute',
                    top: position.top,
                    bottom: 'auto',
                    left: position.left,
                    right: 'auto',
                    'z-index': 10001
                });

                // if dateTimePicker is wider than the thing it is attached to then move it so the centers line up
                if (parentPos.left + parentWid < position.left + width) {
                    let newLeft = parentPos.left;
                    newLeft += parentWid / 2;
                    newLeft -= width / 2;
                    dateTimePicker.css({left: newLeft});
                }
            });

            this.parent = parent;
            this.el = input;
        }
    },

    destroy: function() {
        if (this.el && this.parent) {
            if (this.readOnly) {
                this.el.parent().remove();
            } else {
                this.el.data('DateTimePicker').destroy();
                this.el.parent().remove();
            }
        }
    },

    enable: function() {
        if (this.el) {
            this.el.data('DateTimePicker').enable();
        }
    },

    disable: function() {
        if (this.el) {
            this.el.data('DateTimePicker').disable();
        }
    },

    set: function (format, definesValues, defaultValues) {
        if (!this.el || !this.parent) {
            return;
        }

        definesValues = this.isValueDefined(definesValues, defaultValues);

        if (this.readOnly) {
            if (definesValues) {
                // HH:mm:ss
                this.el.val(defaultValues);
                this.el.attr('value', defaultValues);
            } else {
                this.el.val("");
                this.el.attr('value', "");
            }
        } else {
            if (definesValues) {
                let date = moment(defaultValues, "HH:mm:ss");
                this.el.data('DateTimePicker').date(date);
            } else {
                this.el.data('DateTimePicker').clear();
            }
        }
    },

    values: function() {
        if (this.el && this.parent) {
            if (this.readOnly) {
                let value = this.el.attr('value');
                return value !== "" ? value : null;
            } else {
                let date = this.el.data('DateTimePicker').date();
                if (date != null) {
                    // format to HH:mm:ss time
                    return date.format("HH:mm:ss");  // .MS
                } else {
                    return null;
                }
            }
        }

        return null;
    },

    checkCondition: function (condition, values) {
        switch (condition) {
            case 0:
                return this.values() == null;
            case 1:
                return this.values() != null;
            case 2:
                return this.values() === values;
            case 3:
                return this.values() !== values;
            default:
                return false;
        }
    },

    bindConditionListener: function(listeners, condition, values) {
        if (this.el && this.parent && !this.readOnly) {
            if (!this.bound) {
                this.el.parent().on('dp.change', $.proxy(this.onValueChanged, this));
                this.bound = true;
            }

            this.conditionType = condition;
            this.conditionValues = values;
            this.listeners = listeners || [];
        }
    },

    onValueChanged: function(e) {
        let display = this.checkCondition(this.conditionType, this.conditionValues);

        // show or hide the parent element
        if (display) {
            for (let i = 0; i < this.listeners.length; ++i) {
                this.listeners[i].parent.parent().show(true);
            }
        } else {
            for (let i = 0; i < this.listeners.length; ++i) {
                this.listeners[i].parent.parent().hide(true);
            }
        }
    }
});

TimeType.DescriptorTypeDetailsView = Marionette.View.extend({
    className: 'descriptor-type-details-format',
    template: "<div></div>",

    initialize: function() {
        this.listenTo(this.model, 'change', this.render, this);
    },

    getFormat: function() {
        return {}
    }
});

TimeType.format = function (value) {
    return moment(value, "HH:mm:ss").format("LTS");
};

module.exports = TimeType;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 267 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {/**
 * @file user.js
 * @brief Display and manage a user reference value format of type of descriptor
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2018-02-15
 * @copyright Copyright (c) 2018 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let DescriptorFormatType = __webpack_require__(13);
let Marionette = __webpack_require__(1);

let User = function () {
    DescriptorFormatType.call(this);

    this.name = "user";
    this.group = "reference";

    this.searchUrl = null;
    this.autocomplete = true;
    this.allow_multiple = false
};

_.extend(User.prototype, DescriptorFormatType.prototype, {
    create: function (format, parent, options) {
        options || (options = {
            history: false,
            readOnly: false,
            multiple: false,
            container: undefined
        });

        if (options.readOnly) {
            let input = this._createStdInput(parent, "fa-user", options.history);

            this.parent = parent;
            this.readOnly = true;
            this.el = input;
        } else {
            if (!format.list_type || format.list_type === "autocomplete") {
                this.autocomplete = true;

                let select = $('<select style="width: 100%;" ' + (options.multiple ? "multiple" : "") + '></select>');
                this.groupEl = this._createInputGroup(parent, "fa-user", select, options.history);

                // init the autocomplete
                let url = window.application.url(['permission', 'user']);
                let initials = [];

                let container = parent.closest('div.modal-dialog').parent();
                if (container.length === 0) {
                    container = options.container ? options.container : this.groupEl;  // parent.closest('div.panel');
                }

                let params = {
                    // width: 'element',
                    data: initials,
                    dropdownParent: container,
                    ajax: {
                        url: url + 'search/',
                        dataType: 'json',
                        delay: 250,
                        data: function (params) {
                            params.term || (params.term = '');

                            return {
                                filters: JSON.stringify({
                                    method: 'icontains',
                                    fields: '*',
                                    '*': [params.term]
                                }),
                                cursor: params.next
                            };
                        },
                        processResults: function (data, params) {
                            params.next = null;

                            if (data.items.length >= 30) {
                                params.next = data.next || null;
                            }

                            let results = [];

                            for (let i = 0; i < data.items.length; ++i) {
                                results.push({
                                    id: data.items[i].id,
                                    text: data.items[i].label
                                });
                            }

                            return {
                                results: results,
                                pagination: {
                                    more: params.next != null
                                }
                            };
                        },
                        cache: true
                    },
                    allowClear: true,
                    minimumInputLength: 3,
                    placeholder: _t("Enter a value.")
                };

                // make an autocomplete widget on simple_value
                select.select2(params).fixSelect2Position();

                this.parent = parent;
                this.el = select;
            } else if (format.list_type === 'dropdown') {
                this.autocomplete = false;

                let select = $('<select style="width: 100%;" ' + (options.multiple ? "multiple" : "") + '></select>');
                this.groupEl = this._createInputGroup(parent, "fa-share", select, options.history);

                select.selectpicker({container: 'body', style: 'btn-default'});

                // init the selectpicker
                let url = window.application.url() + (this.searchUrl ? this.searchUrl : (format.model.replace('.', '/') + '/'));

                // refresh values
                this.promise = $.ajax({
                    url: url + 'search/',
                    dataType: 'json',
                    data: {filters: "{}"}
                }).done(function (data) {
                    for (let i = 0; i < data.items.length; ++i) {
                        let option = $("<option></option>");
                        let item = data.items[i];

                        option.attr("value", item.value || item.id);
                        option.attr("title", item.label || item.name);
                        option.html(item.label || item.name);

                        select.append(option);
                    }

                    select.selectpicker('refresh');
                });

                this.parent = parent;
                this.el = select;
            }
        }
    },

    destroy: function () {
        if (this.el && this.parent) {
            if (this.readOnly) {
                this.el.parent().remove();
            } else {
                if (this.autocomplete) {
                    this.el.select2('destroy');
                } else {
                    this.el.selectpicker('destroy');
                }
                this.groupEl.remove();
            }
        }
    },

    enable: function () {
        if (this.el) {
            if (this.autocomplete) {
                this.el.prop("disabled", false);
            } else {
                this.el.prop("disabled", false).selectpicker('refresh');
            }
        }
    },

    disable: function () {
        if (this.el) {
            if (this.autocomplete) {
                this.el.prop("disabled", true);
            } else {
                this.el.prop("disabled", true).selectpicker('refresh');
            }
        }
    },

    set: function (format, definesValues, defaultValues, options) {
        if (!this.el || !this.parent) {
            return;
        }

        definesValues = this.isValueDefined(definesValues, defaultValues);

        let url = window.application.url(['permission', 'user', 'username']);

        if (this.readOnly) {
            let type = this;

            if (definesValues) {
                this.el.attr('value', defaultValues);

                $.ajax({
                    type: "GET",
                    url: url + defaultValues + '/',
                    dataType: 'json'
                }).done(function (data) {
                    type.el.val(data.name);
                });
            } else {
                this.el.attr('value', "").val("");
            }
        } else {
            let type = this;

            if (this.autocomplete) {
                if (definesValues) {
                    let initials = [];

                    // is the option exists
                    if (type.el.children('option[value=' + defaultValues + ']').length) {
                        type.el.val(defaultValues).trigger('change');
                    } else {
                        // autoselect the initial value
                        $.ajax({
                            type: "GET",
                            url: url + defaultValues + '/',
                            dataType: 'json'
                        }).done(function (data) {
                            initials.push({id: data.id, text: data.name});

                            let option = new Option(data.name, data.id, true, true);
                            type.el.append(option).trigger('change');

                            type.el.trigger({
                                type: 'select2:select',
                                params: {
                                    data: initials
                                }
                            });
                        });
                    }
                } else {
                    this.el.val(null).trigger('change');
                }
            } else {
                if (definesValues) {
                    // defines temporary value (before waiting)
                    this.el.attr('value', defaultValues);

                    $.when(this.promise).done(function (data) {
                        type.el.val(defaultValues).trigger('change');
                        type.el.selectpicker('refresh');

                        // remove temporary vale
                        type.el.removeAttr('value');
                    });
                } else {
                    this.el.val(null).trigger('change');
                }
            }
        }
    },

    clear: function () {
        if (this.el && this.parent) {
            if (this.readOnly) {
                this.el.attr('value', null);
                this.el.val('');
            } else {
                this.el.val(null).trigger('change');
            }
        }
    },

    values: function () {
        if (this.el && this.parent) {
            if (this.readOnly) {
                return this.el.attr('value');
            } else {
                if (Array.isArray(this.el.val())) {
                    let values = this.el.val();
                    return values.map(function (value) {
                        value = parseInt(value);
                        return isNaN(value) ? null : value
                    })
                } else if (this.el.val() !== "") {
                    let value = parseInt(this.el.val());
                    return isNaN(value) ? null : value;
                } else {
                    return null;
                }
            }
        }

        return null;
    },

    checkCondition: function (condition, values) {
        switch (condition) {
            case 0:
                return this.values() === null;
            case 1:
                return this.values() !== null;
            case 2:
                return this.values() === values;
            case 3:
                return this.values() !== values;
            default:
                return false;
        }
    }
});

User.DescriptorTypeDetailsView = Marionette.View.extend({
    className: 'descriptor-type-details-format',
    template: "<div></div>",

    ui: {
        format_model: '#format_model'
    },

    initialize: function () {
        this.listenTo(this.model, 'change', this.render, this);
    },

    onRender: function () {
        let format = this.model.get('format');
        window.application.descriptor.views.describables.drawSelect(this.ui.format_model, true, false, format.model);
    },

    getFormat: function () {
        return {
            'model': this.ui.format_model.val()
        }
    }
});

// User.format = function(value) {
//     if (value === null || value === undefined) {
//         return "";
//     } else {
//         return value === true ? _t("Yes") : _t("No");
//     }
// };

module.exports = User;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 268 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file descriptorlistcontext.js
 * @brief  Descriptor list context menu
 * @author Medhi BOULNEMOUR (INRA UMR1095)
 * @date 2018-01-11
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);

let View = Marionette.View.extend({
    tagName: 'div',
    template: __webpack_require__(15),
    className: "context descriptor-list",
    templateContext: function () {
        return {
            actions: this.getOption('actions'),
            options: {
                'create-descriptor': {className: 'btn-default', label: _t('Create descriptor')},
                'update-descriptor': {className: 'btn-success', label: _t('Update')},
                'apply-descriptor': {className: 'btn-success', label: _t('Apply')},
                'cancel-descriptor': {className: 'btn-default', label: _t('Cancel')}
            }
        }
    },

    ui: {
        'create-descriptor': 'button[name="create-descriptor"]',
        'update-descriptor': 'button[name="update-descriptor"]',
        'apply-descriptor': 'button[name="apply-descriptor"]',
        'cancel-descriptor': 'button[name="cancel-descriptor"]'
    },

    triggers: {
        "click @ui.create-descriptor": "descriptor:create",
        "click @ui.update-descriptor": "descriptor:update",
        "click @ui.apply-descriptor": "descriptor:apply",
        "click @ui.cancel-descriptor": "descriptor:cancel"
    },

    initialize: function(options) {
        options || (options = {actions: []});
    }
});

module.exports = View;


/***/ }),
/* 269 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {/**
 * @file descriptorlayout.js
 * @brief Layout for descriptor details
 * @author Medhi BOULNEMOUR (INRA UMR1095)
 * @date 2018-01-12
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let LayoutView = __webpack_require__(17);
let DescriptorDetails = __webpack_require__(515);
let ContentBottomFooterLayout = __webpack_require__(25);
let ScrollingMoreView = __webpack_require__(10);

let Layout = LayoutView.extend({
    template: __webpack_require__(517),

    attributes: {
        style: "height: 100%;"
    },

    ui: {
        configuration_tab: 'a[aria-controls=configuration]',
        values_tab: 'a[aria-controls=values]',
    },

    regions: {
        'configuration': "div.tab-pane[name=configuration]",
        'values': "div.tab-pane[name=values]"
    },

    initialize: function (model, options) {
        Layout.__super__.initialize.apply(this, arguments);

        if (this.model.isNew()) {
            this.listenTo(this.model, 'change:id', this.onDescriptorCreate, this);
        }
        this.listenTo(this.model, 'change:format', this.onRender, this);
    },

    onDescriptorCreate: function () {
        // re-render once created
        this.render();

        // and update history
        Backbone.history.navigate('app/descriptor/descriptor/' + this.model.get('id') + '/', {
            replace: true
        });
    },

    disableValuesTab: function () {
        this.ui.values_tab.parent().addClass('disabled');
    },

    enableTabs: function () {
        this.ui.values_tab.parent().removeClass('disabled');
    },

    onRender: function () {
        let format = this.model.get('format');
        let descriptorLayout = this;

        // configuration tab
        let descriptorDetails = new DescriptorDetails({model: this.model});
        descriptorLayout.showChildView('configuration', descriptorDetails);

        if (!this.model.isNew()) {
            if (_.indexOf(window.application.descriptor.format_with_value_list, format.type) !== -1) {

                let model = this.model;
                let DescriptorValueCollection = __webpack_require__(518);
                let collection = new DescriptorValueCollection([], {
                    type_id: this.model.id,
                    // filters: (options.filters || {}),
                });

                // values tab
                collection.fetch().then(function () {
                    let valueListView = null;

                    let DescriptorValueListView = __webpack_require__(520);
                    let DescriptorValuePairListView = __webpack_require__(524);
                    let DescriptorValueOrdinalListView = __webpack_require__(528);

                    if (model.get('format').type === "enum_single") {
                        valueListView = new DescriptorValueListView({
                            collection: collection,
                            model: model,
                        });

                    } else if (model.get('format').type === "enum_pair") {
                        valueListView = new DescriptorValuePairListView({
                            collection: collection,
                            model: model,
                        });

                    } else if (model.get('format').type === "enum_ordinal") {
                        valueListView = new DescriptorValueOrdinalListView({
                            collection: collection,
                            model: model,
                        });
                    }

                    if (valueListView) {

                        let contentBottomFooterLayout = new ContentBottomFooterLayout();
                        descriptorLayout.showChildView('values', contentBottomFooterLayout);

                        contentBottomFooterLayout.showChildView('content', valueListView);
                        contentBottomFooterLayout.showChildView('bottom', new ScrollingMoreView({
                            targetView: valueListView,
                            more: -1
                        }));
                    }
                });

                this.enableTabs();
            } else {
                this.disableValuesTab();
            }
        } else {
            // not available tabs
            this.disableValuesTab();
        }
    },
});

module.exports = Layout;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 270 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file valuelistcontext.js
 * @brief Value list context menu
 * @author Medhi BOULNEMOUR (INRA UMR1095)
 * @date 2018-02-26
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);

let View = Marionette.View.extend({
    tagName: 'div',
    template: __webpack_require__(15),
    className: "context value-list",
    templateContext: function () {
        return {
            actions: this.getOption('actions'),
            options: {
                'create-value': {className: 'btn-default', label: _t('Create value')},
            }
        }
    },

    ui: {
        'create-value': 'button[name="create-value"]',
    },

    triggers: {
        "click @ui.create-value": "value:create",
    },

    initialize: function(options) {
        options || (options = {actions: []});
    }
});

module.exports = View;


/***/ }),
/* 271 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file layout.js
 * @brief layout of descriptor
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-10-27
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Backbone = __webpack_require__(7);

let Model = Backbone.Model.extend({
    url: function() {
        if (this.isNew())
            return window.application.url(['descriptor', 'layout']);
        else
            return window.application.url(['descriptor', 'layout', this.get('id')]);
    },

    defaults: {
        id: null,
        name: '',
        label: '',
        description: '',
        target: '',
        parameters: {},
        layout_content: {}
    },

    parse: function(data) {
        //this.perms = data.perms;
        return data;
    },

    validate: function(attrs) {
        let errors = {};
        let hasError = false;

        if (hasError) {
          return errors;
        }
    },
});

module.exports = Model;



/***/ }),
/* 272 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file index.js
 * @brief index of descriptor
 * @author Medhi BOULNEMOUR (INRA UMR1095)
 * @date 2018-02-19
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Backbone = __webpack_require__(7);

let Model = Backbone.Model.extend({
    url: function() {
        if (this.isNew())
            return window.application.url(['descriptor', 'index']);
        else
            return window.application.url(['descriptor', 'index', this.get('id')]);
    },

    defaults: {
        id: null,
        descriptor: null,
        target: null,
        type: null,
    },
});

module.exports = Model;

/***/ }),
/* 273 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {/**
 * @file city.js
 * @brief Geolocation city widget
 * @author Medhi BOULNEMOUR (INRA UMR1095)
 * @date 2017-02-23
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let DescriptorFormatType = __webpack_require__(13);
let Marionette = __webpack_require__(1);

let CityType = function () {
    DescriptorFormatType.call(this);

    this.name = "city";
    this.group = "city";
    this.allow_multiple = true
};

_.extend(CityType.prototype, DescriptorFormatType.prototype, {
    create: function (format, parent, options) {
        options || (options = {
            readOnly: false,
            history: false,
            multiple: false,
            extended_search: true
        });

        if (options.readOnly) {
            let input = this._createStdInput(parent, "fa-map-signs", options.history);

            this.parent = parent;
            this.readOnly = true;
            this.el = input;

        } else if (options.extended_search === false) {
            let select = $('<select style="width: 100%;" ' + (options.multiple ? "multiple" : "") + '></select>');
            parent.append(select);
            this.groupEl = this._createInputGroup(parent, "fa-map-signs", select, options.history);

            // init the autocomplete
            let url = window.application.url(['geolocation', 'city', 'search']);
            let initials = [];

            let container = parent.closest('div.modal-dialog').parent();
            if (container.length === 0) {
                container = this.groupEl;  // parent.closest('div.panel');
            }

            let params = {
                // width: 'element',
                data: initials,
                dropdownParent: container,
                ajax: {
                    url: url,
                    dataType: 'json',
                    delay: 250,
                    data: function (params) {
                        params.term || (params.term = '');

                        return {
                            cursor: params.next,
                            term: params.term
                        };
                    },
                    processResults: function (data, params) {
                        params.next = null;

                        if (data.items.length >= 30) {
                            params.next = data.next || null;
                        }

                        let results = [];

                        for (let i = 0; i < data.items.length; ++i) {

                            let display = '';

                            if (data.items[i].preferred_names) {
                                display = data.items[i].preferred_names;
                            } else if (data.items[i].short_names) {
                                display = data.items[i].short_names;
                            } else if (data.items[i].display_names) {
                                display = data.items[i].display_names;
                            } else {
                                display = data.items[i].name;
                            }

                            results.push({
                                id: data.items[i].id,
                                text: display
                            });
                        }

                        return {
                            results: results,
                            pagination: {
                                more: params.next != null
                            }
                        };
                    },
                    cache: true
                },
                allowClear: true,
                minimumInputLength: 3,
                placeholder: _t("Enter a value.")
            };

            select.select2(params).fixSelect2Position();

            this.parent = parent;
            this.el = select;
        } else {
            let select = $('<select style="width: 100%;"></select>');
            parent.append(select);
            this.groupEl = this._createInputGroup(parent, "fa-map-signs", select, options.history);

            // init the autocomplete
            let url = window.application.url('geolocation');
            let initials = [];

            let container = parent.closest('div.modal-dialog').parent();
            if (container.length === 0) {
                container = this.groupEl;  // parent.closest('div.panel');
            }

            let default_option = null;

            let old_term = '';

            // Change display for the special option "Extend search"
            let formatOption = function (option) {
                if (option.id === 'more') {
                    return $('<span class="text-info">' + _t("Extended search...") + '</span>');
                }
                return option.text
            };

            let selectAjax = function (live_mode) {

                if (live_mode) {
                    return {
                        url: url + 'city/live-search/',
                        dataType: 'json',
                        delay: 250,
                        data: function (params) {
                            params.term || (params.term = old_term);

                            if (old_term != params.term) {
                                old_term = params.term;
                                initSelect2(false, true);
                            }

                            return {
                                cursor: params.next,
                                term: params.term
                            };
                        },
                        processResults: function (data, params) {
                            params.next = null;

                            if (data.items.length >= 30) {
                                params.next = data.next || null;
                            }

                            let results = [];

                            for (let i = 0; i < data.items.length; ++i) {

                                let country_data = data.items[i].country;
                                let display = '';

                                if (data.items[i].preferred_names) {
                                    display = data.items[i].preferred_names;
                                } else if (data.items[i].short_names) {
                                    display = data.items[i].short_names;
                                } else if (data.items[i].display_names) {
                                    display = data.items[i].display_names;
                                } else {
                                    display = data.items[i].name;
                                }

                                if (country_data.preferred_names) {
                                    display += ', ' + country_data.preferred_names;
                                } else if (country_data.short_names) {
                                    display += ', ' + country_data.short_names;
                                } else if (country_data.display_names) {
                                    display += ', ' + country_data.display_names;
                                } else {
                                    display += ', ' + country_data.name;
                                }

                                results.push({
                                    id: data.items[i].geoname_id,
                                    text: display
                                });

                            }

                            return {
                                results: results,
                                pagination: {
                                    more: params.next != null
                                }
                            };

                        },
                        cache: true
                    }
                }

                return {
                    url: url + 'city/search/',
                    dataType: 'json',
                    delay: 250,
                    data: function (params) {
                        params.term || (params.term = old_term);

                        old_term = params.term;

                        return {
                            cursor: params.next,
                            term: params.term
                        };
                    },
                    processResults: function (data, params) {
                        params.next = null;

                        if (data.items.length >= 30) {
                            params.next = data.next || null;
                        }

                        let results = [];

                        for (let i = 0; i < data.items.length; ++i) {
                            let country_data = data.items[i].country;
                            let display = '';

                            if (data.items[i].preferred_names) {
                                display = data.items[i].preferred_names;
                            } else if (data.items[i].short_names) {
                                display = data.items[i].short_names;
                            } else if (data.items[i].display_names) {
                                display = data.items[i].display_names;
                            } else {
                                display = data.items[i].name;
                            }

                            if (country_data.preferred_names) {
                                display += ', ' + country_data.preferred_names;
                            } else if (country_data.short_names) {
                                display += ', ' + country_data.short_names;
                            } else if (country_data.display_names) {
                                display += ', ' + country_data.display_names;
                            } else {
                                display += ', ' + country_data.name;
                            }

                            results.push({
                                id: data.items[i].id,
                                text: display
                            });

                        }

                        if (params.next == null) {
                            results.push({
                                id: 'more',
                                text: 'Extended Search'
                            });
                        }

                        return {
                            results: results,
                            pagination: {
                                more: params.next != null
                            }
                        };

                    },
                    cache: true
                }
            };

            let params = {
                // width: 'element',
                data: initials,
                dropdownParent: container,
                ajax: selectAjax(false),
                allowClear: true,
                minimumInputLength: 1,
                templateResult: formatOption,
                placeholder: _t("Enter a value.")
            };

            let initSelect2 = function (ajx_mode, reset_mode) {
                ajx_mode = ajx_mode || false;
                reset_mode = reset_mode || false;

                if (select.data('select2')) {
                    select.select2('destroy');
                }
                if (!ajx_mode) {
                    if (reset_mode) {
                        // initials.push(default_option);
                        params.data = initials;
                        params.ajax = selectAjax(false);
                        select.select2(params).fixSelect2Position();
                        select.val(default_option).trigger('change.select2');
                    } else {
                        params.ajax = selectAjax(false);
                        select.select2(params).fixSelect2Position();
                    }
                    select.unbind('select2:change');
                    select.unbind('select2:close');
                    select.unbind('select2:select');

                    select.on('select2:select', function () {
                        if (select.select2('val') === 'more') {
                            initSelect2(true);
                        }
                    });
                }
                else {
                    params.ajax = selectAjax(true);
                    select.select2(params).fixSelect2Position();
                    select.on('change.select2', function () {
                        // Add the webservice city to the local database
                        if (select.val()) {
                            select.unbind('select2:close');
                            $.ajax({
                                type: "POST",
                                url: url + 'city/',
                                dataType: 'json',
                                data: {
                                    'external_id': select.val()
                                }
                            }).done(function (data) {
                                let country_data = data.country;
                                let display = '';

                                if (data.preferred_names) {
                                    display = data.preferred_names;
                                } else if (data.short_names) {
                                    display = data.short_names;
                                } else if (data.display_names) {
                                    display = data.display_names;
                                } else {
                                    display = data.name;
                                }

                                if (country_data.preferred_names) {
                                    display += ', ' + country_data.preferred_names;
                                } else if (country_data.short_names) {
                                    display += ', ' + country_data.short_names;
                                } else if (country_data.display_names) {
                                    display += ', ' + country_data.display_names;
                                } else {
                                    display += ', ' + country_data.name;
                                }
                                initials.push({
                                    id: data.id,
                                    text: display
                                });
                                params.data = initials;
                                params.ajax = selectAjax(false);
                                select.select2(params).fixSelect2Position();
                                select.on('select2:select', function () {
                                    if (select.select2('val') == 'more') {
                                        initSelect2(true);
                                    }
                                });
                                select.val(data.id).trigger('change');
                                select.unbind('select2:change');
                            });
                        }
                    });
                    select.on('select2:close', function () {
                        old_term = "";
                        initSelect2(false, true);
                    });
                }
                if (old_term) {
                    let $search = select.data('select2').dropdown.$search || select.data('select2').selection.$search;
                    select.val(null).trigger('change');
                    $search.val(old_term).trigger('keyup');
                }
            };
            initSelect2(false);
            this.parent = parent;
            this.el = select;
        }
    },

    destroy: function () {
        if (this.el && this.parent) {
            if (this.readOnly) {
                this.el.parent().remove();
            } else {
                this.el.select2('destroy');
                this.groupEl.remove();
            }
        }
    },

    enable: function () {
        if (this.el) {
            this.el.prop("disabled", false);
        }
    },

    disable: function () {
        if (this.el) {
            this.el.prop("disabled", true);
        }
    },

    set: function (format, definesValues, defaultValues, options) {
        if (!this.el || !this.parent) {
            return;
        }

        definesValues = this.isValueDefined(definesValues, defaultValues);

        let type = this;

        if (this.readOnly) {
            if (definesValues) {
                // defines value as attribute
                this.el.attr('value', defaultValues);

                $.ajax({
                    type: "GET",
                    url: window.application.url(['geolocation', 'city', defaultValues]),
                    dataType: 'json'
                }).done(function (data) {
                    let country_data = data.country;
                    let display = '';

                    if (data.preferred_names) {
                        display = data.preferred_names;
                    } else if (data.short_names) {
                        display = data.short_names;
                    } else if (data.display_names) {
                        display = data.display_names;
                    } else {
                        display = data.name;
                    }

                    if (country_data.preferred_names) {
                        display += ', ' + country_data.preferred_names;
                    } else if (country_data.short_names) {
                        display += ', ' + country_data.short_names;
                    } else if (country_data.display_names) {
                        display += ', ' + country_data.display_names;
                    } else {
                        display += ', ' + country_data.name;
                    }

                    type.el.val(display);
                });
            } else {
                this.el.attr('value', "").val("");
            }
        } else {
            if (definesValues) {
                // defines value as attribute
                this.el.attr('value', defaultValues);

                let select = this.el;

                // init the autocomplete
                let url = window.application.url('geolocation');
                let initials = [];

                let container = this.parent.closest('div.modal-dialog').parent();
                if (container.length === 0) {
                    container = this.groupEl;  // parent.closest('div.panel');
                }

                let default_option = null;
                let old_term = '';

                // Change display for the special option "Extend search"
                let formatOption = function (option) {
                    if (option.id === 'more') {
                        return $('<span class="text-info">' + _t("Extended search...") + '</span>');
                    }
                    return option.text
                };

                let selectAjax = function (live_mode) {
                    if (live_mode) {
                        return {
                            url: url + 'city/live-search/',
                            dataType: 'json',
                            delay: 250,
                            data: function (params) {
                                params.term || (params.term = old_term);

                                if (old_term != params.term) {
                                    old_term = params.term;
                                    initSelect2(false, true);
                                }

                                return {
                                    cursor: params.next,
                                    term: params.term
                                };
                            },
                            processResults: function (data, params) {
                                params.next = null;

                                if (data.items.length >= 30) {
                                    params.next = data.next || null;
                                }

                                let results = [];

                                for (let i = 0; i < data.items.length; ++i) {

                                    let country_data = data.items[i].country;
                                    let display = '';

                                    if (data.items[i].preferred_names) {
                                        display = data.items[i].preferred_names;
                                    } else if (data.items[i].short_names) {
                                        display = data.items[i].short_names;
                                    } else if (data.items[i].display_names) {
                                        display = data.items[i].display_names;
                                    } else {
                                        display = data.items[i].name;
                                    }

                                    if (country_data.preferred_names) {
                                        display += ', ' + country_data.preferred_names;
                                    } else if (country_data.short_names) {
                                        display += ', ' + country_data.short_names;
                                    } else if (country_data.display_names) {
                                        display += ', ' + country_data.display_names;
                                    } else {
                                        display += ', ' + country_data.name;
                                    }

                                    results.push({
                                        id: data.items[i].geoname_id,
                                        text: display
                                    });

                                }

                                return {
                                    results: results,
                                    pagination: {
                                        more: params.next != null
                                    }
                                };

                            },
                            cache: true
                        }
                    }
                    return {
                        url: url + 'city/search/',
                        dataType: 'json',
                        delay: 250,
                        data: function (params) {
                            params.term || (params.term = old_term);

                            old_term = params.term;

                            return {
                                cursor: params.next,
                                term: params.term
                            };
                        },
                        processResults: function (data, params) {
                            params.next = null;

                            if (data.items.length >= 30) {
                                params.next = data.next || null;
                            }

                            let results = [];

                            for (let i = 0; i < data.items.length; ++i) {

                                let country_data = data.items[i].country;
                                let display = '';

                                if (data.items[i].preferred_names) {
                                    display = data.items[i].preferred_names;
                                } else if (data.items[i].short_names) {
                                    display = data.items[i].short_names;
                                } else if (data.items[i].display_names) {
                                    display = data.items[i].display_names;
                                } else {
                                    display = data.items[i].name;
                                }

                                if (country_data.preferred_names) {
                                    display += ', ' + country_data.preferred_names;
                                } else if (country_data.short_names) {
                                    display += ', ' + country_data.short_names;
                                } else if (country_data.display_names) {
                                    display += ', ' + country_data.display_names;
                                } else {
                                    display += ', ' + country_data.name;
                                }

                                results.push({
                                    id: data.items[i].id,
                                    text: display
                                });

                            }

                            if (params.next == null) {
                                results.push({
                                    id: 'more',
                                    text: 'Extended Search'
                                });
                            }

                            return {
                                results: results,
                                pagination: {
                                    more: params.next != null
                                }
                            };

                        },
                        cache: true
                    }
                };

                let params = {
                    data: initials,
                    dropdownParent: container,
                    ajax: selectAjax(false),
                    allowClear: true,
                    minimumInputLength: 1,
                    templateResult: formatOption,
                    placeholder: _t("Enter a value.")
                };

                let initSelect2 = function (ajx_mode, reset_mode) {
                    ajx_mode = ajx_mode || false;
                    reset_mode = reset_mode || false;

                    if (select.data('select2')) {
                        select.select2('destroy');
                    }

                    if (!ajx_mode) {
                        if (reset_mode) {
                            // initials.push(default_option);
                            params.data = initials;
                            params.ajax = selectAjax(false);
                            select.select2(params).fixSelect2Position();
                            select.val(default_option.id).trigger('change.select2');
                        } else {
                            params.ajax = selectAjax(false);
                            select.select2(params).fixSelect2Position();
                        }
                        select.unbind('select2:change');
                        select.unbind('select2:close');
                        select.unbind('select2:select');

                        select.on('select2:select', function () {
                            if (select.select2('val') === 'more') {
                                initSelect2(true);
                            }
                        });

                    }
                    else {
                        params.ajax = selectAjax(true);
                        select.select2(params).fixSelect2Position();
                        select.on('change.select2', function () {
                                // Add the webservice city to the local database

                                if (select.val()) {
                                    select.unbind('select2:close');
                                    $.ajax({
                                        type: "POST",
                                        url: url + 'city/',
                                        dataType: 'json',
                                        data: {
                                            'external_id': select.val()
                                        }
                                    }).done(function (data) {

                                        let country_data = data.country;
                                        let display = '';

                                        if (data.preferred_names) {
                                            display = data.preferred_names;
                                        } else if (data.short_names) {
                                            display = data.short_names;
                                        } else if (data.display_names) {
                                            display = data.display_names;
                                        } else {
                                            display = data.name;
                                        }

                                        if (country_data.preferred_names) {
                                            display += ', ' + country_data.preferred_names;
                                        } else if (country_data.short_names) {
                                            display += ', ' + country_data.short_names;
                                        } else if (country_data.display_names) {
                                            display += ', ' + country_data.display_names;
                                        } else {
                                            display += ', ' + country_data.name;
                                        }

                                        initials.push({
                                            id: data.id,
                                            text: display
                                        });

                                        params.data = initials;
                                        params.ajax = selectAjax(false);
                                        select.select2(params).fixSelect2Position();
                                        select.on('select2:select', function () {
                                            if (select.select2('val') === 'more') {
                                                initSelect2(true);
                                            }
                                        });
                                        select.val(data.id).trigger('change');
                                        select.unbind('select2:change');
                                    });
                                }
                            }
                        );
                        select.on('select2:close', function () {
                            old_term = "";
                            initSelect2(false, true);
                        });
                    }
                    if (old_term) {
                        let $search = select.data('select2').dropdown.$search || select.data('select2').selection.$search;
                        select.val(null).trigger('change');
                        $search.val(old_term).trigger('keyup');
                    }
                };

                // autoselect the initial value
                $.ajax({
                    type: "GET",
                    url: url + 'city/' + defaultValues + '/',
                    dataType: 'json'
                }).done(function (data) {
                    let country_data = data.country;
                    let display = '';

                    if (data.preferred_names) {
                        display = data.preferred_names;
                    } else if (data.short_names) {
                        display = data.short_names;
                    } else if (data.display_names) {
                        display = data.display_names;
                    } else {
                        display = data.name;
                    }

                    if (country_data.preferred_names) {
                        display += ', ' + country_data.preferred_names;
                    } else if (country_data.short_names) {
                        display += ', ' + country_data.short_names;
                    } else if (country_data.display_names) {
                        display += ', ' + country_data.display_names;
                    } else {
                        display += ', ' + country_data.name;
                    }

                    default_option = {
                        id: data.id,
                        text: display
                    };

                    initials.push(default_option);
                    params.data = initials;
                    params.ajax = selectAjax(false);
                    select.select2(params).fixSelect2Position();
                    select.on('select2:select', function () {
                        if (select.select2('val') === 'more') {
                            initSelect2(true);
                        }
                    });
                    select.val(defaultValues).trigger('change.select2');

                    // remove temporary value
                    select.removeAttr('value');
                });
            } else {
                this.el.val(null).trigger('change');
            }
        }
    },

    values: function () {
        if (this.el && this.parent) {
            if (this.readOnly) {
                let value = parseInt(this.el.attr('value'));
                return isNaN(value) ? null : value;
            } else {
                if (this.el.attr('value') !== undefined) {
                    let value = parseInt(this.el.attr('value'));
                    return isNaN(value) ? null : value;
                } else {
                    if (Array.isArray(this.el.val())) {
                        let values = this.el.val();
                        return values.map(function (value) {
                            value = parseInt(value);
                            return isNaN(value) ? null : value
                        })
                    } else if (this.el.val() !== "") {
                        let value = parseInt(this.el.val());
                        return isNaN(value) ? null : value;
                    } else {
                        return null;
                    }
                }
            }
        }
        return null;
    },

    checkCondition: function (condition, values) {
        switch (condition) {
            case 0:
                return this.values() === null;
            case 1:
                return this.values() !== null;
            case 2:
                return this.values() === values;
            case 3:
                return this.values() !== values;
            default:
                return false;
        }
    },

    bindConditionListener: function (listeners, condition, values) {
        if (this.el && this.parent && !this.readOnly) {
            if (!this.bound) {
                this.el.on("select2:select", $.proxy(this.onValueChanged, this));
                this.el.on("select2:unselect", $.proxy(this.onValueUnselected, this));

                this.bound = true;
            }

            this.conditionType = condition;
            this.conditionValues = values;
            this.listeners = listeners || [];
        }
    },

    onValueChanged: function (e) {
        let display = this.checkCondition(this.conditionType, this.conditionValues);

        // show or hide the parent element
        if (display) {
            for (let i = 0; i < this.listeners.length; ++i) {
                this.listeners[i].parent.parent().show(true);
            }
        } else {
            for (let i = 0; i < this.listeners.length; ++i) {
                this.listeners[i].parent.parent().hide(true);
            }
        }
    },

    onValueUnselected: function (e) {
        let display = false;

        switch (this.conditionType) {
            case 0:
                display = true;
                break;
            case 1:
                display = false;
                break;
            case 2:
                display = false;
                break;
            case 3:
                display = false;
                break;
            default:
                break;
        }

        // show or hide the parent element
        if (display) {
            for (let i = 0; i < this.listeners.length; ++i) {
                this.listeners[i].parent.parent().show(true);
            }
        } else {
            for (let i = 0; i < this.listeners.length; ++i) {
                this.listeners[i].parent.parent().hide(true);
            }
        }
    }
});

CityType.DescriptorTypeDetailsView = Marionette.View.extend({
    className: 'descriptor-type-details-format',
    template: "<div></div>",

    initialize: function () {
        this.listenTo(this.model, 'change', this.render, this);
    },

    onRender: function () {
    },

    getFormat: function () {
        return {}
    }
});

module.exports = CityType;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 274 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {/**
 * @file country.js
 * @brief Geolocation country widget
 * @author Medhi BOULNEMOUR (INRA UMR1095)
 * @date 2017-02-23
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let DescriptorFormatType = __webpack_require__(13);
let Marionette = __webpack_require__(1);

let CountryType = function () {
    DescriptorFormatType.call(this);

    this.name = "country";
    this.group = "country";
    this.allow_multiple = true
};

_.extend(CountryType.prototype, DescriptorFormatType.prototype, {
    create: function (format, parent, options) {
        options || (options = {
            readOnly: false,
            history: false,
            multiple: false
        });

        if (options.readOnly) {
            let input = this._createStdInput(parent, "fa-globe", options.history);

            this.parent = parent;
            this.readOnly = true;
            this.el = input;

        } else {
            let select = $('<select style="width: 100%;" ' + (options.multiple ? "multiple" : "") + '></select>');
            parent.append(select);
            this.groupEl = this._createInputGroup(parent, "fa-globe", select, options.history);

            // init the autocomplete
            let url = window.application.url(['geolocation', 'country', 'search']);
            let initials = [];

            let container = parent.closest('div.modal-dialog').parent();
            if (container.length === 0) {
                container = this.groupEl;  // parent.closest('div.panel');
            }

            let params = {
                // width: 'element',
                data: initials,
                dropdownParent: container,
                ajax: {
                    url: url,
                    dataType: 'json',
                    delay: 250,
                    data: function (params) {
                        params.term || (params.term = '');

                        return {
                            cursor: params.next,
                            term: params.term
                        };
                    },
                    processResults: function (data, params) {
                        params.next = null;

                        if (data.items.length >= 30) {
                            params.next = data.next || null;
                        }

                        let results = [];

                        for (let i = 0; i < data.items.length; ++i) {

                            let display = '';

                            if (data.items[i].preferred_names) {
                                display = data.items[i].preferred_names;
                            } else if (data.items[i].short_names) {
                                display = data.items[i].short_names;
                            } else if (data.items[i].display_names) {
                                display = data.items[i].display_names;
                            } else {
                                display = data.items[i].name;
                            }

                            results.push({
                                id: data.items[i].id,
                                text: display
                            });
                        }

                        return {
                            results: results,
                            pagination: {
                                more: params.next != null
                            }
                        };
                    },
                    cache: true
                },
                allowClear: true,
                minimumInputLength: 3,
                placeholder: _t("Enter a value.")
            };

            select.select2(params).fixSelect2Position();

            this.parent = parent;
            this.el = select;
        }
    },

    destroy: function () {
        if (this.el && this.parent) {
            if (this.readOnly) {
                this.el.parent().remove();
            } else {
                this.el.select2('destroy');
                this.groupEl.remove();
            }
        }
    },

    enable: function () {
        if (this.el) {
            this.el.prop("disabled", false);
        }
    },

    disable: function () {
        if (this.el) {
            this.el.prop("disabled", true);
        }
    },

    set: function (format, definesValues, defaultValues, options) {
        if (!this.el || !this.parent) {
            return;
        }

        definesValues = this.isValueDefined(definesValues, defaultValues);

        let type = this;

        if (this.readOnly) {
            if (defaultValues) {
                // defines value as attribute
                this.el.attr('value', defaultValues);

                $.ajax({
                    type: "GET",
                    url: window.application.url(['geolocation', 'country', defaultValues]),
                    dataType: 'json'
                }).done(function (data) {
                    let display = '';

                    if (data.preferred_names) {
                        display = data.preferred_names;
                    } else if (data.short_names) {
                        display = data.short_names;
                    } else if (data.display_names) {
                        display = data.display_names;
                    } else {
                        display = data.name;
                    }

                    type.el.val(display);
                });
            } else {
                this.el.attr('value', "").val("");
            }
        } else {
            if (definesValues) {
                // defines value as attribute
                this.el.attr('value', defaultValues);

                // need to re-init the select2 widget
                this.el.select2('destroy');

                // init the autocomplete
                let url = window.application.url(['geolocation', 'country']);
                let initials = [];

                let container = this.parent.closest('div.modal-dialog').parent();
                if (container.length === 0) {
                    container = this.groupEl;  // parent.closest('div.panel');
                }

                let params = {
                    data: initials,
                    dropdownParent: container,
                    ajax: {
                        url: url + 'search/',
                        dataType: 'json',
                        delay: 250,
                        data: function (params) {
                            params.term || (params.term = '');

                            return {
                                cursor: params.next,
                                term: params.term
                            };
                        },
                        processResults: function (data, params) {
                            params.next = null;

                            if (data.items.length >= 30) {
                                params.next = data.next || null;
                            }

                            let results = [];

                            for (let i = 0; i < data.items.length; ++i) {
                                let display = '';

                                if (data.items[i].preferred_names) {
                                    display = data.items[i].preferred_names;
                                } else if (data.items[i].short_names) {
                                    display = data.items[i].short_names;
                                } else if (data.items[i].display_names) {
                                    display = data.items[i].display_names;
                                } else {
                                    display = data.items[i].name;
                                }

                                results.push({
                                    id: data.items[i].id,
                                    text: display
                                });
                            }

                            return {
                                results: results,
                                pagination: {
                                    more: params.next != null
                                }
                            };
                        },
                        cache: true
                    },
                    allowClear: true,
                    minimumInputLength: 3,
                    placeholder: _t("Enter a value.")
                };

                // autoselect the initial value
                $.ajax({
                    type: "GET",
                    url: url + defaultValues + '/',
                    dataType: 'json'
                }).done(function (data) {
                    let display = '';

                    if (data.preferred_names) {
                        display = data.preferred_names;
                    } else if (data.short_names) {
                        display = data.short_names;
                    } else if (data.display_names) {
                        display = data.display_names;
                    } else {
                        display = data.name;
                    }

                    initials.push({id: data.id, text: display});
                    params.data = initials;
                    type.el.select2(params).fixSelect2Position();
                    type.el.val(defaultValues).trigger('change');

                    // remove temporary value
                    type.el.removeAttr('value');
                });
            } else {
                this.el.val(null).trigger('change');
            }
        }
    },

    values: function () {
        if (this.el && this.parent) {
            if (this.readOnly) {
                let value = parseInt(this.el.attr('value'));
                return isNaN(value) ? null : value;
            } else {
                if (this.el.attr('value') !== undefined) {
                    let value = parseInt(this.el.attr('value'));
                    return isNaN(value) ? null : value;
                } else {
                    if (Array.isArray(this.el.val())) {
                        let values = this.el.val();
                        return values.map(function (value) {
                            value = parseInt(value);
                            return isNaN(value) ? null : value
                        })
                    } else if (this.el.val() !== "") {
                        let value = parseInt(this.el.val());
                        return isNaN(value) ? null : value;
                    } else {
                        return null;
                    }
                }
            }
        }
        return null;
    },

    checkCondition: function (condition, values) {
        switch (condition) {
            case 0:
                return this.values() === null;
            case 1:
                return this.values() !== null;
            case 2:
                return this.values() === values;
            case 3:
                return this.values() !== values;
            default:
                return false;
        }
    },

    bindConditionListener: function (listeners, condition, values) {
        if (this.el && this.parent && !this.readOnly) {
            if (!this.bound) {
                this.el.on("select2:select", $.proxy(this.onValueChanged, this));
                this.el.on("select2:unselect", $.proxy(this.onValueUnselected, this));

                this.bound = true;
            }

            this.conditionType = condition;
            this.conditionValues = values;
            this.listeners = listeners || [];
        }
    },

    onValueChanged: function (e) {
        let display = this.checkCondition(this.conditionType, this.conditionValues);

        // show or hide the parent element
        if (display) {
            for (let i = 0; i < this.listeners.length; ++i) {
                this.listeners[i].parent.parent().show(true);
            }
        } else {
            for (let i = 0; i < this.listeners.length; ++i) {
                this.listeners[i].parent.parent().hide(true);
            }
        }
    },

    onValueUnselected: function (e) {
        let display = false;

        switch (this.conditionType) {
            case 0:
                display = true;
                break;
            case 1:
                display = false;
                break;
            case 2:
                display = false;
                break;
            case 3:
                display = false;
                break;
            default:
                break;
        }

        // show or hide the parent element
        if (display) {
            for (let i = 0; i < this.listeners.length; ++i) {
                this.listeners[i].parent.parent().show(true);
            }
        } else {
            for (let i = 0; i < this.listeners.length; ++i) {
                this.listeners[i].parent.parent().hide(true);
            }
        }
    }
});

CountryType.DescriptorTypeDetailsView = Marionette.View.extend({
    className: 'descriptor-type-details-format',
    template: "<div></div>",

    initialize: function () {
        this.listenTo(this.model, 'change', this.render, this);
    },

    onRender: function () {
    },

    getFormat: function () {
        return {}
    }
});

module.exports = CountryType;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 275 */
/***/ (function(module, exports) {

/**
 * @file config.js
 * @brief Config model
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-03-22
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

module.exports = Backbone.Model.extend({
    url: window.application.url(['main', 'config', ':id']),

    defaults: function() {
        return {
            id: 0,
            module: '',
            values: []
        }
    }
});



/***/ }),
/* 276 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file entitysynonymtype.js
 * @brief Entity synonym type collection
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-09-20
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let CachedCollection = __webpack_require__(277);
let EntitySynonymTypeModel = __webpack_require__(611);

let Collection = CachedCollection.extend({
    url: function() {
        if (this.target_model) {
            return window.application.url(['main', 'entity-synonym-type', this.target_model, 'values']);
        } else {
            return window.application.url(['main', 'entity-synonym-type']);
        }
    },

    model: EntitySynonymTypeModel,

    cache: function() {
        return {
            category: 'main',
            key: 'entity_synonym_types:*'
        }
    },

    initialize: function(models, options) {
        options || (options = {});

        Collection.__super__.initialize.apply(this, arguments);

        this.target_model = options.target_model || null;
    },

    findValue: function(id) {
        for (let r in this.models) {
            let m = this.models[r];
            if (m.get('id') === id)
                return m.get('name');
        }
    },

    findLabel: function(name) {
        for (let r in this.models) {
            let m = this.models[r];
            if (m.get('name') === name)
                return m.get('label');
        }
    }
});

module.exports = Collection;


/***/ }),
/* 277 */
/***/ (function(module, exports) {

/**
 * @file cachedcollection.js
 * @brief Collection with cache invalidation support
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-10-18
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Collection = Backbone.Collection.extend({
    cache: {
        category: 'main',
        key: undefined
    },

    initialize: function (options) {
        options || (options = {});

        window.application.main.cache.registerCollection(this);
    },

    parse: function(data) {
        return data;
    }
});

module.exports = Collection;


/***/ }),
/* 278 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file menu.js
 * @brief Dynamic menu management.
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-08-24
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let MenuEntryBase = __webpack_require__(79);
let MenuSeparator = __webpack_require__(80);

let Menu = function(name, label, order, auth) {
    this.name = name || "";
    this.label = label || "";
    this.order = order || -1;
    this.auth = auth || 'any';
    this.entries = [];
    this.$el = null;
};

Menu.prototype = {
    /**
     * Add a menu entry and update or not the view.
     * @param entry Menu entry or separator.
     * @param update If true the menu view is update.
     */
    addEntry: function(entry, update) {
        typeof update !== "undefined" || (update = true);

        if (entry) {
            if (!(entry instanceof MenuEntryBase)) {
                throw "entry Must be a MenuEntryBase instance or derived";
            }

            if (entry.name) {
                for (let i = 0; i < this.entries; ++i) {
                    if (this.entries[i].name === entry.name) {
                        throw "Menu entry " + entry.name + " is already defined";
                    }
                }
            }

            let pos = 0;
            for (let i = 0; i < this.entries.length; ++i) {
                if (this.entries[i].order <= entry.order) {
                    ++pos;
                } else {
                    break;
                }
            }

            this.entries.splice(pos, 0, entry);

            if (update && this.$el) {
                entry.render(this.$el.children('ul.dropdown-menu'));
            }
        } else {
            entry = new MenuSeparator();
            this.entries.push(entry);

            if (update && this.$el) {
                entry.render(this.$el.children('ul.dropdown-menu'));
            }
        }
    },

    /**
     * Get authentication type class name
     * @returns {*}
     */
    authTypeClassName: function() {
        if (this.auth === "any") {
            return "auth-any"
        } else if (this.auth === "guest") {
            return "auth-guest"
        } else if (this.auth === "user") {
            return "auth-user"
        } else if (this.auth === "staff") {
            return "auth-staff"
        } else if (this.auth === "superuser") {
            return "auth-superuser"
        } else {
            return "";
        }
    },

    /**
     * Render bootstrap menu.
     * @param parent
     */
    render: function(parent, pos) {
        pos >= 0 || (pos = -1);

        let menuEl = $('<li class="dropdown"></li>');
        menuEl.addClass(this.authTypeClassName());
        menuEl.attr('name', this.name);

        let aEl = $(
            '<a href="#" role="button" class="dropdown-toggle" data-toggle="dropdown">' +
            _t(this.label || "") + '<b class="caret"></b>' +
            '</a>');

        aEl.attr('id', 'drop-' + this.name);
        menuEl.append(aEl);

        // entries container
        let menuEntries = $('<ul class="dropdown-menu" role="menu" aria-labelledby="menu-drop-' + this.name + '">');
        menuEl.append(menuEntries);

        if (pos >= 0 && pos < parent.children('li.dropdown').length) {
            let nextEl = $(parent.children('li.dropdown').get(pos));
            menuEl.insertBefore(nextEl);
        } else {
            parent.append(menuEl);
        }

        // with any entries
        for (let i = 0; i < this.entries.length; ++i) {
            this.entries[i].render(menuEntries);
        }

        this.$el = menuEl;
    },

    /**
     * Remove a menu entry and update the view.
     * @param name Name of the entry to remove.
     * @param destroy By default destroy the view.
     */
    removeEntry: function(name, destroy) {
        typeof destroy !== "undefined" || (destroy = true);

        for (let i = 0; i < this.entries.length; ++i) {
            let entry = this.entries[i];
            if (entry.name === name) {
                if (destroy) {
                    entry.destroy();
                }

                this.entries.splice(i, 1);
                break;
            }
        }
    },

    /**
     * Destroy the view.
     */
    destroy: function () {
        if (this.$el) {
            this.$el.remove();
            this.$el = null;
        }
    }
};

module.exports = Menu;


/***/ }),
/* 279 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file leftbar.js
 * @brief Default left bar view.
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-04-22
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Marionette = __webpack_require__(1);

let View = Marionette.View.extend({
    template: __webpack_require__(630),

    initialize: function(options) {
    },

    onRender: function() {
    }
});

module.exports = View;


/***/ }),
/* 280 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {/**
 * @file media.js
 * @brief Display and manage a media format of type of descriptor
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-01-25
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let DescriptorFormatType = __webpack_require__(13);
let Marionette = __webpack_require__(1);

let Media = function() {
    DescriptorFormatType.call(this);

    this.name = "media";
    this.group = "media";
};

_.extend(Media.prototype, DescriptorFormatType.prototype, {
    create: function(format, parent, options) {
        options || (options = {
            readOnly: false,
            history: false
        });

        this.value = null;

        if (options.readOnly) {
            let group = $('<div class="input-group"></div>');
            let glyph = $('<span class="input-group-addon"><span class="fa fa-file"></span></span>');
            glyph.css(this.spanStyle);

            if (options.history) {
                // @todo
            }

            if (format.media_inline) {
                /* miniature + download */
                let group = $('<div class="input-group"></div>');
                let collection = $('<div class="media-image-collection"></div>');
                let glyph = $('<span class="input-group-addon"><span class="fa fa-file"></span></span>');

                collection.css('height', 'auto');

                group.append(collection);
                group.append(glyph);

                parent.append(group);

                this.image = null;
                this.collection = collection;
                this.el = group;
                this.parent = parent;
            } else {
                let btnGroup = $('<span class="input-group-btn"></span>');
                btnGroup.css({
                    'width': '100%',
                    'height': '24px',
                    'padding': '0px'
                });

                let preview = $('<span class="media-preview btn btn-default"><span class="fa fa-eye"></span>&nbsp;' + _t('Preview') + '</span>');
                preview.css({
                    'padding-top': '1px',
                    'padding-bottom': '1px',
                    'height': '24px',
                    'width': 'calc(50% + 1px)'
                });
                btnGroup.append(preview);

                let download = $('<span class="media-download btn btn-default"><span class="fa fa-download"></span>&nbsp;' + _t('Download') + '</span>');
                download.css({
                    'padding-top': '1px',
                    'padding-bottom': '1px',
                    'height': '24px',
                    'width': 'calc(50% + 1px)'
                });
                btnGroup.append(download);

                group.append(btnGroup);
                group.append(glyph);

                parent.append(group);

                preview.attr('media-target', "").addClass('disabled');
                download.attr('media-target', "").addClass('disabled');

                preview.on('click', $.proxy(function(e) {
                    if (this.value) {
                        let widget = this;

                        // get the media mime-type
                        $.ajax({
                            type: "GET",
                            url: window.application.url(['medialibrary', 'media', this.value]),
                            contentType: "application/json; charset=utf-8"
                        }).done(function(data) {
                            let url = window.application.url(['medialibrary', 'media', data.uuid, 'download']);

                            // get mime-type, and if compatible with a client view show it else download it
                            if (data.mime_type.startsWith('image/')) {
                                let img = $('<img src="' + url + '" alt="' + data.file_name + '"></img>');
                                img.css('display', 'none');

                                $('body').append(img);

                                img.viewer({
                                    transition: false
                                }).viewer('show');

                                img.on('hidden.viewer', $.proxy(function(e) {
                                    img.viewer('destroy').remove();
                                }, this));
                            } else {
                                // download the document
                                $('<form></form>')
                                    .attr('action', window.application.url(['medialibrary', 'media', data.uuid, 'download']))
                                    .appendTo('body').submit().remove();
                            }
                        });
                    }
                }, this));

                download.on('click', $.proxy(function(e) {
                    if (this.value) {
                        // download the document
                        $('<form></form>')
                            .attr('action', window.application.url(['medialibrary', 'media', this.value, 'download']))
                            .appendTo('body').submit().remove();
                    }
                }, this));

                this.preview = preview;
                this.download = download;

                this.parent = parent;
                this.el = btnGroup;
            }

            this.readOnly = true;
        } else {
            /* show upload button and progress bar */
            let group = $('<div class="input-group"></div>');

            let btnGroup = $('<span class="input-group-btn"></span>');
            let browse = $('<span class="btn btn-default btn-file">' + _t('Browse') + '</span>');
            let erase = $('<span class="btn btn-default btn-file"><span class="fa fa-times"></span></span>');

            let input = $('<input type="file" style="display: none;">');
            let progress = $('<span class="input-group-addon progress"><span class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="min-width: 2em;">0%</span></span>');
            let fileName = $('<input type="text" class="form-control" readonly>');
            let glyph = $('<span class="input-group-addon"><span class="fa fa-file"></span></span>');

            if (options.history) {
                // @todo
            }

            progress.css({
                'width': '30%',
                'padding': '0px',
                //'border-top': '0px',
                //'border-bottom': '0px',
                'border-left': '0px'
            });

            btnGroup.append(browse);
            btnGroup.append(erase);

            group.append(btnGroup);
            group.append(input);
            group.append(fileName);
            group.append(progress);
            group.append(glyph);

            parent.append(group);

            // browse button open the hidden input[type=file]
            browse.on('click', $.proxy(function(e) {
                this.el.click();
                return false;
            }, this));

            // upload a file object.
            let uploadFile = function(widget, file) {
                // empty progress bar
                widget.progress.updateProgressBar(0, 0, 0);

                let formData = new FormData();
                formData.append('file', file);

                $.ajax({
                    type: "POST",
                    url: window.application.url(['medialibrary', 'media', 'upload']),
                    encType: "multipart/form-data",
                    data: formData,
                    cache: false,
                    contentType: false,
                    processData: false,
                    xhr: function() {
                        let xhr = $.ajaxSettings.xhr();

                        // progression
                        xhr.onprogress = function(e) {
                            widget.progress.updateProgressBar(0, e.total, e.loaded);
                        };

                        // progression
                        xhr.upload.onprogress = function(e) {
                            widget.progress.updateProgressBar(0, e.total, e.loaded);
                        };

                        return xhr;
                    },
                    beforeSend: function() {
                        // cancel upload button
                        // cancelButton.click(xhr.abort); @todo
                    }
                }).done(function(data) {
                    widget.value = data.uuid;
                    widget.media = data;

                    if (widget.erase.hasClass('disabled')) {
                        widget.erase.removeClass('disabled');
                    }
                }).fail(function() {
                    widget.value = null;
                    $.alert.error(_t("Error during file upload"));
                });
            };

            // upload on change
            input.on('change', $.proxy(function(e) {
                let file = this.el[0].files[0];
                this.fileName.val(file.name);

                uploadFile(this, this.el[0].files[0]);
            }, this));

            // manage the drop on the input
            fileName.on('drop', $.proxy(function(e) {
                if (e.originalEvent.stopPropagation) {
                   e.originalEvent.stopPropagation();
                }

                this.fileName.prop('readonly', true);

                // jquery returns event in originalEvent
                let file = e.originalEvent.dataTransfer.files[0];
                this.fileName.attr('value', file.name);

                uploadFile(this, file);

                return false;
            }, this));

            fileName.on('dragenter', $.proxy(function(e) {
                if (e.originalEvent.stopPropagation) {
                   e.originalEvent.stopPropagation();
                }

                this.fileName.prop('readonly', false);

                return false;
            }, this));

            fileName.on('dragleave', $.proxy(function(e) {
                if (e.originalEvent.stopPropagation) {
                   e.originalEvent.stopPropagation();
                }

                this.fileName.prop('readonly', true);

                return false;
            }, this));

            // erase if not currently uploading and already exists
            erase.on('click', $.proxy(function(e) {
                if (this.initial === this.value) {
                    // just clear the descriptor value, the media will be deleted at describable save
                    this.fileName.val("");
                    this.value = null;
                } else if (this.value != null) {
                    let widget = this;

                    // erase the last uploaded media and set descriptor value to null
                    $.ajax({
                        type: "DELETE",
                        url: window.application.url(['medialibrary', 'media', this.value]),
                        contentType: "application/json; charset=utf-8"
                    }).done(function(data) {
                        widget.fileName.val("");
                        widget.value = null;
                    }).fail(function() {
                        $.alert.error(_t("Unable to remove the media"));
                    });
                }

                this.progress.updateProgressBar(0, 0, 0);
            }, this));


            this.fileName = fileName;
            this.progress = progress;
            this.browse = browse;
            this.erase = erase;
            this.initial = null;

            this.parent = parent;
            this.el = input;
        }
    },

    destroy: function() {
        if (this.el && this.parent) {
            if (this.readOnly) {
                if (this.image) {
                    this.image.viewer('destroy');
                    this.el.remove();
                } else {
                    this.el.parent().remove();
                }
            } else {
                this.el.parent().remove();
            }
        }
    },

    cancel: function() {
        if (this.el && this.parent) {
            if (!this.readOnly && this.value && this.value != this.initial) {
                let widget = this;

                // erase the last uploaded media and set descriptor value to null
                $.ajax({
                    type: "DELETE",
                    url: window.application.url(['medialibrary', 'media', this.value]),
                    contentType: "application/json; charset=utf-8"
                }).done(function(data) {
                    widget.fileName.val("");
                    widget.value = null;
                });

                this.progress.updateProgressBar(0, 0, 0);
            }
        }
    },

    enable: function() {
        if (this.el) {
            if (this.readOnly) {
                if (this.value != null && this.preview.hasClass('disabled')) {
                    this.preview.removeClass('disabled');
                }

                if (this.value != null && this.download.hasClass('disabled')) {
                    this.download.removeClass('disabled');
                }
            } else {
                if (this.browse.hasClass('disabled')) {
                    this.browse.removeClass('disabled');
                }

                if (this.erase.hasClass('disabled')) {
                    this.erase.removeClass('disabled');
                }
            }
        }
    },

    disable: function() {
        if (this.el) {
            if (this.readOnly) {
                if (!this.preview.hasClass('disabled')) {
                    this.preview.addClass('disabled');
                }

                if (!this.download.hasClass('disabled')) {
                    this.download.addClass('disabled');
                }
            } else {
                if (!this.browse.hasClass('disabled')) {
                    this.browse.addClass('disabled');
                }

                if (!this.erase.hasClass('disabled')) {
                    this.erase.addClass('disabled');
                }
            }
        }
    },

    set: function (format, definesValues, defaultValues, options) {
        if (!this.el || !this.parent) {
            return;
        }

        definesValues = this.isValueDefined(definesValues, defaultValues);

        if (this.readOnly) {
            if (definesValues) {
                this.value = defaultValues;

                // mean inline mode for image
                if (this.collection) {
                     let widget = this;

                    // get the media file name
                    $.ajax({
                        type: "GET",
                        url: window.application.url(['medialibrary', 'media', this.value]),
                        contentType: "application/json; charset=utf-8"
                    }).done(function(data) {
                        widget.media = data;

                        let url = window.application.url(['medialibrary', 'media', data.uuid, 'download']);
                        let img = $('<img class="media-image" src="' + url + '" alt="' + data.file_name + '"></img>');

                        // center the miniature
                        img.css({
                            'height': '100px',
                            'margin-left': '43.5%'
                        });

                        let download = $('<span class="media-download contextual btn btn-default"><span class="fa fa-download"></span></span>');
                        download.on('click', $.proxy(function(e) {
                            // download the document
                            $('<form></form>')
                                .attr('action', window.application.url(['medialibrary', 'media', this.value, 'download']))
                                .appendTo('body').submit().remove();
                        }, widget));

                        widget.collection.append(img);
                        widget.collection.append(download);

                        img.viewer({
                            transition: false
                        });

                        widget.image = img;
                    });
                } else {
                    if (this.preview.hasClass('disabled')) {
                        this.preview.removeClass('disabled');
                    }

                    if (this.download.hasClass('disabled')) {
                        this.download.removeClass('disabled');
                    }
                }
            } else {
                this.value = null;

                if (this.collection) {
                    let placeholder = $('<span class="fa fa-ban"></span>');

                    // center the placeholder
                    placeholder.css({
                        'margin-left': '43.5%',
                        'padding': '3px'
                    });

                    this.collection.append(placeholder);
                } else {
                    if (!this.preview.hasClass('disabled')) {
                        this.preview.addClass('disabled');
                    }

                    if (!this.download.hasClass('disabled')) {
                        this.download.addClass('disabled');
                       }
                }
            }
        } else {
            if (definesValues) {
                this.initial = this.value = defaultValues;

                if (this.erase.hasClass('disabled')) {
                    this.erase.removeClass('disabled');
                }

                let widget = this;

                // get the media file name
                $.ajax({
                    type: "GET",
                    url: window.application.url(['medialibrary', 'media', this.value]),
                    contentType: "application/json; charset=utf-8"
                }).done(function(data) {
                    widget.fileName.val(data.file_name);
                    widget.media = data;
                });
            } else {
                this.initial = this.value = null;

                if (!this.erase.hasClass('disabled')) {
                    this.erase.addClass('disabled');
                }
            }
        }
    },

    values: function() {
        if (this.el && this.parent) {
            if (this.readOnly) {
                return this.value;
            } else {
                return this.value;
            }
        }

        return [null];
    },

    checkCondition: function(condition, values) {
        switch (condition) {
            case 0:
                return this.values() === null;
            case 1:
                return this.values() !== null;
            case 2:
                return this.values() === values;
            case 3:
                return this.values() !== values;
            default:
                return false;
        }
    },

    bindConditionListener: function(listeners, condition, values) {
        if (this.el && this.parent && !this.readOnly) {
            if (!this.bound) {
                /* @todo */
                this.bound = true;
            }

            this.conditionType = condition;
            this.conditionValues = values;
            this.listeners = listeners || [];
        }
    },

    onValueChanged: function(e) {
        let display = this.checkCondition(this.conditionType, this.conditionValues);

        // show or hide the parent element
        if (display) {
            for (let i = 0; i < this.listeners.length; ++i) {
                this.listeners[i].parent.parent().show(true);
            }
        } else {
            for (let i = 0; i < this.listeners.length; ++i) {
                this.listeners[i].parent.parent().hide(true);
            }
        }
    }
});

Media.DescriptorTypeDetailsView = Marionette.View.extend({
    className: 'descriptor-type-details-format',
    template: __webpack_require__(640),

    ui: {
        format_media_types: '#format_media_types',
        format_media_inline: '#format_media_inline'
    },

    initialize: function() {
        this.listenTo(this.model, 'change', this.render, this);
    },

    onRender: function() {
        this.ui.format_media_types.selectpicker({
            style: 'btn-default',
            container: 'body'
        });

        this.ui.format_media_inline.selectpicker({style: 'btn-default'});

        let format = this.model.get('format');

        if (format.media_types != undefined) {
            this.ui.format_media_types.selectpicker('val', format.media_types);
        }

        if (format.media_inline != undefined) {
            this.ui.format_media_inline.selectpicker('val', format.media_inline ? "true" : "false");
        } else {
            this.ui.format_media_inline.selectpicker('val', "false");
        }
    },

    getFormat: function() {
        return {
            'media_types': this.ui.format_media_types.val(),
            'media_inline': this.ui.format_media_inline.val() === "true"
        }
    }
});

module.exports = Media;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 281 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {/**
 * @file mediacollection.js
 * @brief Display and manage a collection of medias format of type of descriptor
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-01-25
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let DescriptorFormatType = __webpack_require__(13);
let Marionette = __webpack_require__(1);

let MediaCollection = function() {
    DescriptorFormatType.call(this);

    this.name = "media_collection";
    this.group = "media";
};

_.extend(MediaCollection.prototype, DescriptorFormatType.prototype, {
    create: function(format, parent, options) {
        options || (options = {
            readOnly: false,
            history: false
        });

        if (options.readOnly) {
            let input = this._createStdInput(parent, "fa-check-square-o", options.history);

            this.parent = parent;
            this.readOnly = true;
            this.el = input;
        } else {
            /* @todo */
            if (options.history) {
                // @todo
            }

            this.parent = parent;
            this.el = select;
        }
    },

    destroy: function() {
        if (this.el && this.parent) {
            if (this.readOnly) {
                this.el.parent().remove();
            } else {
                /*this.el.remove(); @todo */
            }
        }
    },

    cancel: function() {
        /* @todo */
    },

    enable: function() {
        if (this.el) {
            this.el.prop("disabled", false).selectpicker('refresh');
        }
    },

    disable: function() {
        if (this.el) {
            this.el.prop("disabled", true).selectpicker('refresh');
        }
    },

    set: function (format, definesValues, defaultValues, options) {
        if (!this.el || !this.parent) {
            return;
        }

        definesValues = this.isValueDefined(definesValues, defaultValues);

        if (this.readOnly) {
            if (definesValues) {
                this.values = defaultValues;

                /* @todo */
            }
        } else {
            if (definesValues) {
                this.initials = this.values = defaultValues;

                /* @todo */
            }
        }
    },

    values: function() {
        if (this.el && this.parent) {
            if (this.readOnly) {
                return [this.el.attr("value")];
            } else {
                return [this.el.val()];
            }
        }

        return [];
    },

    compare: function(a, b) {
        if (!Array.isArray(a) || !Array.isArray(b)) {
            return false;
        }

        if (a.length !== b.length) {
            return false;
        }

        let found = false;

        for (let i = 0; i < a.length; ++i) {
            found = false;
            for (let j = 0; j < b.length; ++j) {
                if (a[i] === b[j]) {
                    found = true;
                    break;
                }
            }

            if (!found) {
                return false;
            }
        }
    },

    checkCondition: function(condition, values) {
        switch (condition) {
            case 0:
                return this.values === null || this.values.length === 0;
            case 1:
                return this.values !== null && this.values.length > 0;
            case 2:
                return this.compare(this.values, values);
            case 3:
                return !this.compare(this.values, values);
            default:
                return false;
        }
    },

    bindConditionListener: function(listeners, condition, values) {
        if (this.el && this.parent && !this.readOnly) {
            if (!this.bound) {
                /* @todo */
                this.bound = true;
            }

            this.conditionType = condition;
            this.conditionValues = values;
            this.listeners = listeners || [];
        }
    },

    onValueChanged: function(e) {
        let display = this.checkCondition(this.conditionType, this.conditionValues);

        // show or hide the parent element
        if (display) {
            for (let i = 0; i < this.listeners.length; ++i) {
                this.listeners[i].parent.parent().show(true);
            }
        } else {
            for (let i = 0; i < this.listeners.length; ++i) {
                this.listeners[i].parent.parent().hide(true);
            }
        }
    }
});

MediaCollection.DescriptorTypeDetailsView = Marionette.View.extend({
    className: 'descriptor-type-details-format',
    template: __webpack_require__(641),

    ui: {
        format_media_types: '#format_media_types',
        format_max_items: '#format_max_items',
        format_media_inline: '#format_media_inline'
    },

    initialize: function() {
        this.listenTo(this.model, 'change', this.render, this);
    },

    onRender: function() {
        this.ui.format_media_types.selectpicker({
            style: 'btn-default',
            container: 'body'
        });

        this.ui.format_media_inline.selectpicker({style: 'btn-default'});

        let format = this.model.get('format');

        if (format.media_types != undefined) {
            this.ui.format_media_types.selectpicker('val', format.media_types);
        }

        if (format.max_items != undefined) {
            this.ui.format_max_items.val(format.max_items);
        } else {
            this.ui.format_max_items.val(2);
        }

        if (format.media_inline != undefined) {
            this.ui.format_media_inline.selectpicker('val', format.media_inline ? "true" : "false");
        } else {
            this.ui.format_media_inline.selectpicker('val', "false");
        }
    },

    getFormat: function() {
        return {
            'media_types': this.ui.format_media_types.val(),
            'max_items': parseInt(this.ui.format_max_items.val()),
            'media_inline': this.ui.format_media_inline.val() === "true"
        }
    }
});

module.exports = MediaCollection;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 282 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file organisationlayout.js
 * @brief Optimized layout for organisation details
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-03-07
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let LayoutView = __webpack_require__(17);
let ScrollingMoreView = __webpack_require__(10);
let ContentBottomFooterLayout = __webpack_require__(25);
let OrganisationDetailsView = __webpack_require__(649);
let DescriptorEditView = __webpack_require__(43);
let EntityListFilterView = __webpack_require__(14);
let DescriptorCollection = __webpack_require__(18);

let Layout = LayoutView.extend({
    template: __webpack_require__(653),

    ui: {
        establishments_tab: 'a[aria-controls=establishments]',
        comments_tab: 'a[aria-controls=comments]'
    },

    regions: {
        'details': "div[name=details]",
        'descriptors': "div.tab-pane[name=descriptors]",
        'establishments': 'div.tab-pane[name=establishments]',
        'comments': 'div.tab-pane[name=comments]'
    },

    initialize: function (options) {
        Layout.__super__.initialize.apply(this, arguments);

        this.listenTo(this.model, 'change:layout', this.onLayoutChange, this);

        if (this.model.isNew()) {
            this.listenTo(this.model, 'change:id', this.onOrganisationCreate, this);
        }
    },

    onOrganisationCreate: function (model, value) {
        // re-render once created
        this.render();

        // and update history
        Backbone.history.navigate('app/organisation/organisation/' + this.model.get('id') + '/', {
            /*trigger: true,*/
            replace: false
        });
    },

    onLayoutChange: function (model, value) {
        if (value == null) {
            this.getRegion('descriptors').empty();
        } else {
            let organisationLayout = this;

            let descriptorCollection = new DescriptorCollection([], {
                model_id: value
            });

            descriptorCollection.fetch().then(function () {
                // get the layout before creating the view
                $.ajax({
                    method: "GET",
                    url: window.application.url(['descriptor', 'layout', value]),
                    dataType: 'json'
                }).done(function (data) {
                    let DescriptorView = __webpack_require__(35);
                    let descriptorView = new DescriptorView({
                        model: model,
                        layoutData: data,
                        descriptorCollection: descriptorCollection
                    });
                    organisationLayout.showChildView('descriptors', descriptorView);
                });
            });
        }
    },

    disableEstablishmentTab: function () {
        this.ui.establishments_tab.parent().addClass('disabled');
    },

    disableCommentsTab: function () {
        this.ui.comments_tab.parent().addClass('disabled');
    },

    onRender: function () {
        let organisationLayout = this;

        // details view
        if (!this.model.isNew()) {
            // details view
            organisationLayout.showChildView('details', new OrganisationDetailsView({model: this.model}));

            // establishments tab
            let EstablishmentCollection = __webpack_require__(654);
            let establishments = new EstablishmentCollection([], {organisation_id: this.model.get('id')});

            // get available columns
            window.application.main.cache.lookup({
                type: 'entity_columns',
                format: {model: 'organisation.establishment'}
            }).then(function (data) {
                if (!organisationLayout.isRendered()) {
                    return;
                }

                let EstablishmentListView = __webpack_require__(655);
                let establishmentListView = new EstablishmentListView({
                    collection: establishments,
                    model: organisationLayout.model,
                    columns: data[0].value
                });

                let contentBottomFooterLayout = new ContentBottomFooterLayout();
                organisationLayout.showChildView('establishments', contentBottomFooterLayout);

                contentBottomFooterLayout.showChildView('content', establishmentListView);
                contentBottomFooterLayout.showChildView('bottom', new ScrollingMoreView({
                    collection: establishments,
                    targetView: establishmentListView
                }));

                contentBottomFooterLayout.showChildView('footer', new EntityListFilterView({
                    collection: establishments, columns: data[0].value
                }));

                establishmentListView.query();
            });

            // comments
            let CommentListView = __webpack_require__(28);

            // classifications entry tab (query on show tab)
            let CommentCollection = __webpack_require__(29);
            let comments = new CommentCollection([], {entity: this.model});

            let commentListView = new CommentListView({entity: this.model, collection: comments});
            organisationLayout.showChildView('comments', commentListView);

            // if necessary enable tabs
            this.ui.establishments_tab.parent().removeClass('disabled');
            this.ui.comments_tab.parent().removeClass('disabled');
        } else {
            // details
            organisationLayout.showChildView('details', new OrganisationDetailsView({model: this.model}));

            let view = this;

            let descriptorCollection = new DescriptorCollection([], {
                model_id: view.model.get('layout')
            });

            descriptorCollection.fetch().then(function () {
                // descriptors edit tab
                $.ajax({
                    method: "GET",
                    url: window.application.url(['descriptor', 'layout', view.model.get('layout')]),
                    dataType: 'json'
                }).done(function (data) {
                    let descriptorView = new DescriptorEditView({
                        model: organisationLayout.model,
                        layoutData: data,
                        descriptorCollection: descriptorCollection
                    });

                    organisationLayout.showChildView('descriptors', descriptorView);
                });

                // not available tabs
                view.disableEstablishmentTab();
                view.disableCommentsTab();
            });

        }
    }
});

module.exports = Layout;


/***/ }),
/* 283 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file descriptorcontext.js
 * @brief Organisation and establishment descriptors context menu
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-02-14
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Marionette = __webpack_require__(1);

let View = Marionette.View.extend({
    tagName: 'div',
    template: __webpack_require__(652),
    className: "context accession",
    templateContext: function () {
        return {
            actions: this.getOption('actions'),
            options: {
                'modify': {className: 'btn-default', label: _t('Modify')},
                'apply': {className: 'btn-success', label: _t('Apply')},
                'cancel': {className: 'btn-default', label: _t('Cancel')}
            }
        }
    },

    ui: {
        'modify': 'button[name="modify"]',
        'apply': 'button[name="apply"]',
        'cancel': 'button[name="cancel"]'
    },

    triggers: {
        "click @ui.modify": "describable:modify",
        "click @ui.apply": "describable:apply",
        "click @ui.cancel": "describable:cancel"
    },

    initialize: function(options) {
        options || (options = {actions: []});
    }
});

module.exports = View;


/***/ }),
/* 284 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file establishmentlayout.js
 * @brief Optimized layout for establishment details
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-04-02
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let LayoutView = __webpack_require__(17);
let ContentBottomFooterLayout = __webpack_require__(25);
let EstablishmentDetailsView = __webpack_require__(660);
let DescriptorEditView = __webpack_require__(43);
let OrganisationModel = __webpack_require__(42);
let DescriptorCollection = __webpack_require__(18);
let ScrollingMoreView = __webpack_require__(10);

let Layout = LayoutView.extend({
    template: __webpack_require__(663),

    ui: {
        conservatories_tab: 'a[aria-controls=conservatories]',
        persons_tab: 'a[aria-controls=persons]',
        comments_tab: 'a[aria-controls=comments]',
    },

    regions: {
        'details': "div[name=details]",
        'descriptors': "div.tab-pane[name=descriptors]",
        'conservatories': 'div.tab-pane[name=conservatories]',
        'persons': "div.tab-pane[name=persons]",
        'comments': "div.tab-pane[name=comments]"
    },

    initialize: function(options) {
        Layout.__super__.initialize.apply(this, arguments);

        this.listenTo(this.model, 'change:layout', this.onLayoutChange, this);

        if (this.model.isNew()) {
            this.listenTo(this.model, 'change:id', this.onEstablishmentCreate, this);
        }
    },

    onEstablishmentCreate: function(model, value) {
        // re-render once created
        this.render();

        // and update history
        Backbone.history.navigate('app/organisation/establishment/' + this.model.get('id') + '/', {/*trigger: true,*/ replace: false});
    },

    onLayoutChange: function(model, value) {
        if (value == null) {
            this.getRegion('descriptors').empty();
        } else {
            let establishmentLayout = this;

            // get the layout before creating the view
            $.ajax({
                method: "GET",
                url: window.application.url(['descriptor', 'layout', value]),
                dataType: 'json'
            }).done(function (data) {

                let descriptorCollection = new DescriptorCollection([], {
                    model_id: data.id
                });

                descriptorCollection.fetch().then(function () {
                    let DescriptorView = __webpack_require__(35);
                    let descriptorView = new DescriptorView({
                        model: model,
                        layoutData: data,
                        descriptorCollection: descriptorCollection
                    });
                    establishmentLayout.showChildView('descriptors', descriptorView);

                });
            });
        }
    },

    disableConservatoriesTab: function () {
        this.ui.conservatories_tab.parent().addClass('disabled');
    },

    disableContactsTab: function () {
        this.ui.persons_tab.parent().addClass('disabled');
    },

    disableCommentsTab: function () {
        this.ui.comments_tab.parent().addClass('disabled');
    },

    onRender: function() {
        let establishmentLayout = this;

        // details view
        if (!this.model.isNew()) {
            // organisation parent
            let organisation = new OrganisationModel({id: this.model.get('organisation')});
            organisation.fetch().then(function () {
                establishmentLayout.showChildView('details', new EstablishmentDetailsView({
                    model: establishmentLayout.model,
                    organisation: organisation
                }));
            });

            // conservatories tab (@todo how to list storage because medhi put them into accession module)
            let ConservatoryCollection = __webpack_require__(664);
            let conservatories = new ConservatoryCollection([], {establishment_id: this.model.get('id')});

            // get available columns
            let columns1 = window.application.main.cache.lookup({
                type: 'entity_columns',
                format: {model: 'organisation.conservatory'}
            });

            $.when(columns1, conservatories.fetch()).then(function (data) {
                let ConservatoryListView = __webpack_require__(665);
                let conservatoryListView  = new ConservatoryListView({
                    collection: conservatories,
                    columns: data[0].value,
                    model: establishmentLayout.model});

                let contentBottomFooterLayout = new ContentBottomFooterLayout();
                establishmentLayout.showChildView('conservatories', contentBottomFooterLayout);

                contentBottomFooterLayout.showChildView('content', conservatoryListView);
                contentBottomFooterLayout.showChildView('bottom', new ScrollingMoreView({
                    collection: conservatories,
                    targetView: conservatoryListView
                }));

                let EntityListFilterView = __webpack_require__(14);
                contentBottomFooterLayout.showChildView('footer', new EntityListFilterView({
                    collection: conservatories,
                    columns: data[0].value
                }));
            });

            // person/contact tab
            let PersonCollection = __webpack_require__(668);
            let persons = new PersonCollection([], {establishment_id: this.model.get('id')});

            // get available columns
            window.application.main.cache.lookup({
                type: 'entity_columns',
                format: {model: 'organisation.person'}
            }).then(function (data) {
                if (!establishmentLayout.isRendered()) {
                    return;
                }

                let PersonListView = __webpack_require__(669);
                let personListView = new PersonListView({
                    collection: persons,
                    columns: data[0].value,
                    model: establishmentLayout.model
                });

                let contentBottomFooterLayout = new ContentBottomFooterLayout();
                establishmentLayout.showChildView('persons', contentBottomFooterLayout);

                contentBottomFooterLayout.showChildView('content', personListView);
                contentBottomFooterLayout.showChildView('bottom', new ScrollingMoreView({
                    collection: persons,
                    targetView: personListView
                }));


                let EntityListFilterView = __webpack_require__(14);
                contentBottomFooterLayout.showChildView('footer', new EntityListFilterView({
                    collection: persons,
                    columns: data[0].value
                }));
            });

            // comments
            let CommentListView = __webpack_require__(28);

            // classifications entry tab (query on show tab)
            let CommentCollection = __webpack_require__(29);
            let comments = new CommentCollection([], {entity: this.model});

            let commentListView = new CommentListView({entity: this.model, collection: comments});
            establishmentLayout.showChildView('comments', commentListView);

            // if necessary enable tabs
            this.ui.conservatories_tab.parent().removeClass('disabled');
            this.ui.persons_tab.parent().removeClass('disabled');
            this.ui.comments_tab.parent().removeClass('disabled');
        } else {
            // organisation parent
            let organisation = new OrganisationModel({id: this.model.get('organisation')});
            organisation.fetch().then(function () {
                establishmentLayout.showChildView('details', new EstablishmentDetailsView({
                    model: establishmentLayout.model,
                    organisation: organisation,
                    noLink: true
                }));
            });

            // descriptors edit tab
            $.ajax({
                method: "GET",
                url: window.application.url(['descriptor', 'layout', this.model.get('layout')]),
                dataType: 'json'
            }).done(function(data) {

                let descriptorCollection = new DescriptorCollection([], {
                    model_id: data.id
                });

                descriptorCollection.fetch().then(function () {
                    let descriptorView = new DescriptorEditView({
                        model: establishmentLayout.model,
                        layoutData: data,
                        descriptorCollection: descriptorCollection
                    });
                    establishmentLayout.showChildView('descriptors', descriptorView);
                });
            });

            // not available tabs
            this.disableConservatoriesTab();
            this.disableContactsTab();
            this.disableCommentsTab();
        }
    }
});

module.exports = Layout;


/***/ }),
/* 285 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file group.js
 * @brief Group model
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-05-30
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Backbone = __webpack_require__(7);

let Model = Backbone.Model.extend({
    url: function() {
        if (this.isNew()) {
            return window.application.url(['permission', 'group']);
        } else {
            return window.application.url(['permission', 'group', this.get('id')]);
        }
    },

    defaults: {
        id: null,
        name: '',
        num_users: 0,
        num_permissions: 0,
    },

    initialize: function(attributes, options) {
        options || (options = {});
    },

    parse: function(data) {
        this.perms = data.perms;
        return data;
    },

    validate: function(attrs) {
        let errors = {};
        let hasError = false;

        if (hasError) {
          return errors;
        }
    },
});

module.exports = Model;


/***/ }),
/* 286 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {/**
 * @file driver.js
 * @brief Client side main entry
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-04-12
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Backbone = __webpack_require__(7);
let Marionette = __webpack_require__(1);

underscore = __webpack_require__(0);

i18next = __webpack_require__(289);
Logger = __webpack_require__(290);

// Font Awesome
__webpack_require__(291);

//Fancy Tree
__webpack_require__(299);
__webpack_require__(91);
__webpack_require__(303);

// select2 as jquery plugin ($.select2)
__webpack_require__(304);
__webpack_require__(305);
// require("select2-bootstrap-theme/dist/select2-bootstrap.min.css");

// alphanum validator ($.alphanum)
__webpack_require__(306);

// versioncompare ($.versioncompare)
moment = __webpack_require__(307);

// datetime picker ($.datetimepicker)
__webpack_require__(308);
__webpack_require__(310);

// moment
moment = __webpack_require__(2);

// some fixtures
__webpack_require__(311);

// utils
_.deepClone = function(obj) {
    return (!obj || (typeof obj !== 'object'))?obj:
        (_.isString(obj))?String.prototype.slice.call(obj):
        (_.isDate(obj))?new Date(obj.valueOf()):
        (_.isFunction(obj.clone))?obj.clone():
        (_.isArray(obj)) ? _.map(obj, function(t){return _.deepClone(t)}):
        _.mapObject(obj, function(val, key) {return _.deepClone(val)});
};

Object.resolve = function(path, obj) {
    return path.split('.').reduce(function(prev, curr) {
        return prev ? prev[curr] : undefined
    }, obj || self)
};

// global application
let Application = Marionette.Application.extend({

    region: '#root',

    initialize: function(options) {
        Application.__super__.initialize.apply(this, arguments);

        Logger.useDefaults({
            defaultLevel: Logger.WARN,
            formatter: function (messages, context) {
                messages.unshift(new Date().toLocaleString());
            }
        });

        if (session.debug) {
            Logger.setLevel(Logger.DEBUG);
        }

        // create a global default logger
        session.logger = Logger.get('default');

        Logger.time('Application startup');

        // capture most of HTTP error and display an alert message
        Backbone.originalSync = Backbone.sync;
        Backbone.sync = function (method, model, opts) {
            let xhr, dfd;

            dfd = $.Deferred();

            // opts.success and opts.error are resolved against the deferred object
            // instead of the xhr object
            if (opts)
                dfd.then(opts.success, opts.error);

            // insert csrf token when necessary
            opts.beforeSend = function(xhr) {
                // always add the csrf token to non safe method ajax query
                if (method !== "read" && !opts.crossDomain) {
                    xhr.setRequestHeader('X-CSRFToken', getCookie('csrftoken'));
                 }
            };

            xhr = Backbone.originalSync(method, model, _.omit(opts, 'success', 'error'));

            // success : forward to the deferred
            xhr.done(dfd.resolve);

            // for each form automatically add the CSRF token
            xhr.done(function() {
                let csrftoken = getCookie('csrftoken');
                $('form').each(function(index, el) {
                    $(this).find('input[name="csrfmiddlewaretoken"]').attr('value', csrftoken)
                });
            });

            // failure : resolve or reject the deferred according to your cases
            xhr.fail(function() {
                if (xhr.statusText && xhr.responseText) {
                    if (xhr.getResponseHeader('Content-Type') === "application/json") {
                        console.log("ajaxError: " + xhr.statusText + " " + xhr.responseText);
                    }
                }

                if (xhr.status === 200 && xhr.responseText === "") {
                    alert("!! this should not arrives, please contact your administrator !!");
                    dfd.resolve.apply(xhr, arguments);
                } else if (xhr.status === 401) {
                    dfd.reject.apply(xhr, arguments);

                    // fallback to home page to force user to log
                    // Backbone.history.navigate('/home/', {trigger: true});
                    if (!window.location.href.endsWith('/app/home/')) {
                        window.location.assign(window.application.url(['app', 'home']));
                    }
                } else {
                    if (typeof(xhr.responseText) !== "undefined") {
                        if (xhr.getResponseHeader('Content-Type') === "application/json") {
                            // let data = JSON.parse(xhr.responseText);
                            // if ((xhr.status >= 400 && xhr.status <= 599) && data && (typeof(data.cause) === "string")) {
                            //     $.alert.error(data.cause);
                            // }
                        }
                    }
                    dfd.reject.apply(xhr, arguments);
                }
            });

            // return the promise to add callbacks if necessary
            return dfd.promise();
        };

        $(document).ajaxError(function(event, jqXHR, settings, thrownError) {
            if (jqXHR.status === 401) {
                if (!window.location.href.endsWith('/app/home/')) {
                    // fallback to home page to force user to login
                    window.location.assign(window.application.url(['app', 'home']));
                }
            }
        });

        $(document).ajaxSuccess(function(event, jqXHR, settings, thrownError) {
            // update the session last action timestamp at each query success
            session.user.lastAction = new Date().getTime();
        });
    },

    onBeforeStart: function(options) {
        //
        // Constants
        //

        this.UI_DEFAULT_SETTING = {display_mode: '2-8-2'};
        this.UI_SETTING_VERSION = '1.0';
        this.BASE_URL = '/coll-gate/';
        this.IS_FIREFOX = navigator.userAgent.toLowerCase().indexOf('firefox') > -1;

        //
        // Methods
        //

        this.url = function(path) {
            if (path instanceof Array) {
                let url = this.BASE_URL;

                for (let i = 0; i < path.length; ++i) {
                    url += path[i];

                    // trailing slash
                    if (!url.endsWith('/')) {
                        url += '/';
                    }
                }

                return url;
            } else if (typeof path === 'string') {
                let url = this.BASE_URL + path;

                // trailing slash
                if (!url.endsWith('/')) {
                    url += '/';
                }

                return url;
            } else {
                return this.BASE_URL;
            }
        }.bind(this);

        this.makeUrl = function(protocol, host, port, path, parameters) {
            let url = protocol;
            if (host) {
                url += host;
            }

            if (port) {
                url += ':' + port;
            }

            if (!url.endsWith('/')) {
                url += '/';
            }

            let params = "";
            if (parameters instanceof Object) {
                for (let p in parameters) {
                    if (params.length === 0) {
                        params += "?";
                    } else {
                        params += "&";
                    }

                    params += window.encodeURIComponent(p) + '=' + window.encodeURIComponent(parameters[p]);
                }
            }

            if (path instanceof Array) {
                for (let i = 0; i < path.length; ++i) {
                    let p = path[i];

                    if (p.startsWith('/')) {
                        p = p.substring(1)
                    }

                    url += p;

                    // trailing slash
                    if (!url.endsWith('/')) {
                        url += '/';
                    }
                }

                return url + params;
            } else if (typeof path === 'string') {
                let p = path;

                if (p.startsWith('/')) {
                    p = p.substring(1)
                }

                url += p;

                // trailing slash
                if (!url.endsWith('/')) {
                    url += '/';
                }

                return url + params;
            } else {
                return url + params;
            }
        };

        /**
         * Update the width and left position of the messenger div.
         */
        this.updateMessengerDisplay = function() {
            let root = $("div.root-content");

            let width = root.width();
            let position = root.position();
            let left = position ? position.left : 15;

            $("#messenger").css('width', width).css('left', left);
        };

        /**
         * @brief Set the display layout of the 3 columns of content (bootstrap layout grid system).
         * @param mode Must be a string with numeric between 1..10 and split by dashes -. The sums of
         * the columns must not exceed 12.
         * @example 2-8-2 Make left column visible with a width of 2, middle size of 8 and right of 2.
         * 0 or empty value mean not displayed column. For a single content column uses -12-.
         */
        this.setDisplay = function(mode) {
            if (typeof(mode) !== 'string' || !mode)
                return;

            let view = application.getView();
            if (view && view.setDisplay) {
                view.setDisplay(mode);
            }

            if (view && view.onResize) {
                view.onResize();
            }
        };

        // when the viewport is resized send a global onResize event
        $(window).resize(function() {
            let view = application.getView();
            if (view && view.onResize) {
                view.onResize();
            }

            application.updateMessengerDisplay();
        });

        /**
         * Update locally and on server a specific user setting object.
         * @param settingName Name of the setting object to modify.
         * @param setting Content that replace the older.
         * @param version Version of the settings to update. Default is "0.1"
         * @note If the name of the setting begin by '_' underscore, it will only kept locally.
         * If the new version string is lesser than the current, nothing is performed and an exception is thrown.
         * If the new version string is greater, this new version mean the current.
         */
        this.updateUserSetting = function(settingName, setting, version) {
            version || (version = '0.1');

            let current = window.session.user.settings[settingName];
            if (current) {
                let cmp = $.versioncompare(version, current.version || '0.1');

                if (cmp === 0) {
                    current.setting = _.deepClone(setting);
                } else if (cmp === 1) {
                    current.version = version;
                    current.setting = _.deepClone(setting);
                } else {
                    return;
                    // throw new Error("User setting version must be greater or equal.");
                }
            } else {
                // validate the version number
                let cmp = $.versioncompare(version, '0.1');

                if (cmp === -1) {
                    throw new Error("User setting minimal version supported is '0.1'.");
                }

                window.session.user.settings[settingName] = {
                    version: version,
                    setting: _.deepClone(setting)
                };
            }

            if (window.session.user.isAuth && !settingName.startsWith('_')) {
                $.ajax({
                    type: "PATCH",
                    url: window.application.url(['main', 'profile', 'settings']),
                    contentType: "application/json; charset=utf-8",
                    dataType: 'json',
                        data: JSON.stringify({
                            name: settingName,
                            version: version,
                            setting: setting
                        }),
                        success: function (data) {
                    }
                });
            }
        };

        /**
         * Is as user setting defined.
         * @param settingName
         * @returns {boolean}
         */
        this.hasUserSetting = function(settingName) {
            return settingName in window.session.user.settings;
        };

        /**
         * Get the value of a specific setting.
         * @param settingName Setting object name.
         * @returns {*} Setting version string.
         */
        this.getUserSettingVersion = function(settingName) {
            let setting = window.session.user.settings[settingName];
            if (setting) {
                return setting.version;
            } else {
                return '0.1';
            }
        };

        /**
         * Get the value of a specific setting.
         * @param settingName Setting object name.
         * @param version Minimum version required. If the version is not satisfied then null is return.
         * @param defaultSetting If no setting found result default setting.
         * @returns {*} Setting data.
         */
        this.getUserSetting = function(settingName, version, defaultSetting) {
            version || (version = '0.1');

            let setting = window.session.user.settings[settingName];
            if (setting && setting.version && ($.versioncompare(version, setting.version) === 0)) {
                return setting.setting;
            } else if (defaultSetting) {
                return defaultSetting;
            } else {
                return null;
            }
        };

        /**
         * Defines the default values of a specific setting if not existing.
         * @param settingName Setting object name.
         * @param defaultSetting Default values.
         * @param version Default version number (Default '0.1').
         */
        this.setDefaultUserSetting = function(settingName, defaultSetting, version) {
            version || (version = '0.1');

            let setting = window.session.user.settings[settingName];
            if (!setting) {
                // validate the version number
                let cmp = $.versioncompare(version, '0.1');

                if (cmp === -1) {
                    throw new Error("User setting minimal version supported is '0.1'.");
                }

                // undefined key
                window.session.user.settings[settingName] = {
                    version: version,
                    setting: _.deepClone(defaultSetting)
                };
            } else {
                // nothing to do
                // setting.setting = _.deepClone(defaultSetting);
            }
        };

        // i18n
        i18next.init({
            initImmediate: false,  // avoid setTimeout
            lng: window.session.language,
            ns: ['default'],
            defaultNS: 'default',
            debug: false,
            fallbackLng: 'en',
            returnNull: false,
            returnEmptyString: false
        });
        i18next.setDefaultNamespace('default');

        window._t = i18next.t;
        window.i18n = i18next;
        window.i18next = i18next;

        // select2
        if (window.session.language === "fr") {
            __webpack_require__(312);
        } else {  // default to english
        }

        $.fn.select2.defaults.set('language', window.session.language);

        // font-awesome use .fa
        $.fn.popover.glyphicon = 'fa fa-question-circle';

        $.fn.validator = {
            className: 'fa-form-control-feedback',
            glyphicon: {
                'placement': '',
                'prefix': 'fa',
                'warning': 'fa-refresh',
                'failed': 'fa-times',
                'ok': 'fa-check'
            }
        };

        // moment
        moment.locale(window.session.language);

        // defaults modules
        window.session.modules || (window.session.modules = ['main']);

        // alert display component
        $.alert({container: '#messenger'/*'div.root-content'*/, className: 'message-alert'});
        $.alert.update();

        // require and initialize each modules
        for (let i = 0; i < window.session.modules.length; ++i) {
            let module = window.session.modules[i];

            try {
                let Module = __webpack_require__(313)("./" + module + '/init');
                this[module] = new Module();
            } catch (e) {
                let msg = i18next.t("Missing client module") + " : " + module + ". " +
                          _t("Please contact your administrator.");

                console.error(e);
                $.alert.error(msg);
            }

            if (this[module] && this[module].initialize) {
                try {
                    Logger.time("Init " + module + " module");
                    this[module].initialize(this, {});
                    Logger.timeEnd("Init " + module + " module");
                } catch (e) {
                    let msg = _t("Module initialization failed") + " : " + module + ". " +
                              _t("Please contact your administrator.");

                    console.error(e);
                    $.alert.error(msg);
                }
            }
        }
    },

    onStart: function(options) {
        // start each module
        for (let i = 0; i < window.session.modules.length; ++i) {
            let module = window.session.modules[i];

            if (this[module] && this[module].start) {
                try {
                    Logger.time("Start " + module + " module");
                    this[module].start(this, {});
                    Logger.timeEnd("Start " + module + " module");
                } catch (e) {
                    let msg = _t("Module startup failed") + " : " + module + ". " +
                              _t("Please contact your administrator.");

                    console.error(e);
                    window.alert(msg);
                }
            }
        }

        // update the messenger display properties
        let uiSettings = this.getUserSetting(
            'ui', window.application.UI_SETTING_VERSION, window.application.UI_DEFAULT_SETTING);

        this.setDisplay(uiSettings['display_mode']);

        // starts the URL handling framework and automatically route as possible
        Backbone.history.start({pushState: true, silent: false, root: '/coll-gate'});

        // add alerts initiated by django server side
        if (typeof window.session.initialsAlerts !== "undefined") {
            for (let i = 0; i < window.session.initialsAlerts.length; ++i) {
                let alert = window.session.initialsAlerts[i];
                $.alert.message(alert.type, alert.msg);
            }

            window.session.initialsAlerts = [];
        }

        Logger.timeEnd('Application startup');
    }
});

application = new Application();
application.start({initialData: ''});

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 287 */
/***/ (function(module, exports) {

var g;

// This works in non-strict mode
g = (function() {
	return this;
})();

try {
	// This works if eval is allowed (see CSP)
	g = g || Function("return this")() || (1,eval)("this");
} catch(e) {
	// This works if the window reference is available
	if(typeof window === "object")
		g = window;
}

// g can still be undefined, but nothing to do about it...
// We return undefined, instead of nothing here, so it's
// easier to handle this case. if(!global) { ...}

module.exports = g;


/***/ }),
/* 288 */
/***/ (function(module, exports, __webpack_require__) {

// Backbone.Radio v2.0.0

(function (global, factory) {
   true ? module.exports = factory(__webpack_require__(0), __webpack_require__(7)) :
  typeof define === 'function' && define.amd ? define(['underscore', 'backbone'], factory) :
  (global.Backbone = global.Backbone || {}, global.Backbone.Radio = factory(global._,global.Backbone));
}(this, function (_,Backbone) { 'use strict';

  _ = 'default' in _ ? _['default'] : _;
  Backbone = 'default' in Backbone ? Backbone['default'] : Backbone;

  var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) {
    return typeof obj;
  } : function (obj) {
    return obj && typeof Symbol === "function" && obj.constructor === Symbol ? "symbol" : typeof obj;
  };

  var previousRadio = Backbone.Radio;

  var Radio = Backbone.Radio = {};

  Radio.VERSION = '2.0.0';

  // This allows you to run multiple instances of Radio on the same
  // webapp. After loading the new version, call `noConflict()` to
  // get a reference to it. At the same time the old version will be
  // returned to Backbone.Radio.
  Radio.noConflict = function () {
    Backbone.Radio = previousRadio;
    return this;
  };

  // Whether or not we're in DEBUG mode or not. DEBUG mode helps you
  // get around the issues of lack of warnings when events are mis-typed.
  Radio.DEBUG = false;

  // Format debug text.
  Radio._debugText = function (warning, eventName, channelName) {
    return warning + (channelName ? ' on the ' + channelName + ' channel' : '') + ': "' + eventName + '"';
  };

  // This is the method that's called when an unregistered event was called.
  // By default, it logs warning to the console. By overriding this you could
  // make it throw an Error, for instance. This would make firing a nonexistent event
  // have the same consequence as firing a nonexistent method on an Object.
  Radio.debugLog = function (warning, eventName, channelName) {
    if (Radio.DEBUG && console && console.warn) {
      console.warn(Radio._debugText(warning, eventName, channelName));
    }
  };

  var eventSplitter = /\s+/;

  // An internal method used to handle Radio's method overloading for Requests.
  // It's borrowed from Backbone.Events. It differs from Backbone's overload
  // API (which is used in Backbone.Events) in that it doesn't support space-separated
  // event names.
  Radio._eventsApi = function (obj, action, name, rest) {
    if (!name) {
      return false;
    }

    var results = {};

    // Handle event maps.
    if ((typeof name === 'undefined' ? 'undefined' : _typeof(name)) === 'object') {
      for (var key in name) {
        var result = obj[action].apply(obj, [key, name[key]].concat(rest));
        eventSplitter.test(key) ? _.extend(results, result) : results[key] = result;
      }
      return results;
    }

    // Handle space separated event names.
    if (eventSplitter.test(name)) {
      var names = name.split(eventSplitter);
      for (var i = 0, l = names.length; i < l; i++) {
        results[names[i]] = obj[action].apply(obj, [names[i]].concat(rest));
      }
      return results;
    }

    return false;
  };

  // An optimized way to execute callbacks.
  Radio._callHandler = function (callback, context, args) {
    var a1 = args[0],
        a2 = args[1],
        a3 = args[2];
    switch (args.length) {
      case 0:
        return callback.call(context);
      case 1:
        return callback.call(context, a1);
      case 2:
        return callback.call(context, a1, a2);
      case 3:
        return callback.call(context, a1, a2, a3);
      default:
        return callback.apply(context, args);
    }
  };

  // A helper used by `off` methods to the handler from the store
  function removeHandler(store, name, callback, context) {
    var event = store[name];
    if ((!callback || callback === event.callback || callback === event.callback._callback) && (!context || context === event.context)) {
      delete store[name];
      return true;
    }
  }

  function removeHandlers(store, name, callback, context) {
    store || (store = {});
    var names = name ? [name] : _.keys(store);
    var matched = false;

    for (var i = 0, length = names.length; i < length; i++) {
      name = names[i];

      // If there's no event by this name, log it and continue
      // with the loop
      if (!store[name]) {
        continue;
      }

      if (removeHandler(store, name, callback, context)) {
        matched = true;
      }
    }

    return matched;
  }

  /*
   * tune-in
   * -------
   * Get console logs of a channel's activity
   *
   */

  var _logs = {};

  // This is to produce an identical function in both tuneIn and tuneOut,
  // so that Backbone.Events unregisters it.
  function _partial(channelName) {
    return _logs[channelName] || (_logs[channelName] = _.bind(Radio.log, Radio, channelName));
  }

  _.extend(Radio, {

    // Log information about the channel and event
    log: function log(channelName, eventName) {
      if (typeof console === 'undefined') {
        return;
      }
      var args = _.toArray(arguments).slice(2);
      console.log('[' + channelName + '] "' + eventName + '"', args);
    },

    // Logs all events on this channel to the console. It sets an
    // internal value on the channel telling it we're listening,
    // then sets a listener on the Backbone.Events
    tuneIn: function tuneIn(channelName) {
      var channel = Radio.channel(channelName);
      channel._tunedIn = true;
      channel.on('all', _partial(channelName));
      return this;
    },

    // Stop logging all of the activities on this channel to the console
    tuneOut: function tuneOut(channelName) {
      var channel = Radio.channel(channelName);
      channel._tunedIn = false;
      channel.off('all', _partial(channelName));
      delete _logs[channelName];
      return this;
    }
  });

  /*
   * Backbone.Radio.Requests
   * -----------------------
   * A messaging system for requesting data.
   *
   */

  function makeCallback(callback) {
    return _.isFunction(callback) ? callback : function () {
      return callback;
    };
  }

  Radio.Requests = {

    // Make a request
    request: function request(name) {
      var args = _.toArray(arguments).slice(1);
      var results = Radio._eventsApi(this, 'request', name, args);
      if (results) {
        return results;
      }
      var channelName = this.channelName;
      var requests = this._requests;

      // Check if we should log the request, and if so, do it
      if (channelName && this._tunedIn) {
        Radio.log.apply(this, [channelName, name].concat(args));
      }

      // If the request isn't handled, log it in DEBUG mode and exit
      if (requests && (requests[name] || requests['default'])) {
        var handler = requests[name] || requests['default'];
        args = requests[name] ? args : arguments;
        return Radio._callHandler(handler.callback, handler.context, args);
      } else {
        Radio.debugLog('An unhandled request was fired', name, channelName);
      }
    },

    // Set up a handler for a request
    reply: function reply(name, callback, context) {
      if (Radio._eventsApi(this, 'reply', name, [callback, context])) {
        return this;
      }

      this._requests || (this._requests = {});

      if (this._requests[name]) {
        Radio.debugLog('A request was overwritten', name, this.channelName);
      }

      this._requests[name] = {
        callback: makeCallback(callback),
        context: context || this
      };

      return this;
    },

    // Set up a handler that can only be requested once
    replyOnce: function replyOnce(name, callback, context) {
      if (Radio._eventsApi(this, 'replyOnce', name, [callback, context])) {
        return this;
      }

      var self = this;

      var once = _.once(function () {
        self.stopReplying(name);
        return makeCallback(callback).apply(this, arguments);
      });

      return this.reply(name, once, context);
    },

    // Remove handler(s)
    stopReplying: function stopReplying(name, callback, context) {
      if (Radio._eventsApi(this, 'stopReplying', name)) {
        return this;
      }

      // Remove everything if there are no arguments passed
      if (!name && !callback && !context) {
        delete this._requests;
      } else if (!removeHandlers(this._requests, name, callback, context)) {
        Radio.debugLog('Attempted to remove the unregistered request', name, this.channelName);
      }

      return this;
    }
  };

  /*
   * Backbone.Radio.channel
   * ----------------------
   * Get a reference to a channel by name.
   *
   */

  Radio._channels = {};

  Radio.channel = function (channelName) {
    if (!channelName) {
      throw new Error('You must provide a name for the channel.');
    }

    if (Radio._channels[channelName]) {
      return Radio._channels[channelName];
    } else {
      return Radio._channels[channelName] = new Radio.Channel(channelName);
    }
  };

  /*
   * Backbone.Radio.Channel
   * ----------------------
   * A Channel is an object that extends from Backbone.Events,
   * and Radio.Requests.
   *
   */

  Radio.Channel = function (channelName) {
    this.channelName = channelName;
  };

  _.extend(Radio.Channel.prototype, Backbone.Events, Radio.Requests, {

    // Remove all handlers from the messaging systems of this channel
    reset: function reset() {
      this.off();
      this.stopListening();
      this.stopReplying();
      return this;
    }
  });

  /*
   * Top-level API
   * -------------
   * Supplies the 'top-level API' for working with Channels directly
   * from Backbone.Radio.
   *
   */

  var channel;
  var args;
  var systems = [Backbone.Events, Radio.Requests];
  _.each(systems, function (system) {
    _.each(system, function (method, methodName) {
      Radio[methodName] = function (channelName) {
        args = _.toArray(arguments).slice(1);
        channel = this.channel(channelName);
        return channel[methodName].apply(channel, args);
      };
    });
  });

  Radio.reset = function (channelName) {
    var channels = !channelName ? this._channels : [this._channels[channelName]];
    _.each(channels, function (channel) {
      channel.reset();
    });
  };

  return Radio;

}));
//# sourceMappingURL=./backbone.radio.js.map

/***/ }),
/* 289 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
Object.defineProperty(__webpack_exports__, "__esModule", { value: true });

// CONCATENATED MODULE: ./node_modules/i18next/dist/es/logger.js
var _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }

var consoleLogger = {
  type: 'logger',

  log: function log(args) {
    this.output('log', args);
  },
  warn: function warn(args) {
    this.output('warn', args);
  },
  error: function error(args) {
    this.output('error', args);
  },
  output: function output(type, args) {
    var _console;

    /* eslint no-console: 0 */
    if (console && console[type]) (_console = console)[type].apply(_console, _toConsumableArray(args));
  }
};

var Logger = function () {
  function Logger(concreteLogger) {
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

    _classCallCheck(this, Logger);

    this.init(concreteLogger, options);
  }

  Logger.prototype.init = function init(concreteLogger) {
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

    this.prefix = options.prefix || 'i18next:';
    this.logger = concreteLogger || consoleLogger;
    this.options = options;
    this.debug = options.debug;
  };

  Logger.prototype.setDebug = function setDebug(bool) {
    this.debug = bool;
  };

  Logger.prototype.log = function log() {
    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    return this.forward(args, 'log', '', true);
  };

  Logger.prototype.warn = function warn() {
    for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
      args[_key2] = arguments[_key2];
    }

    return this.forward(args, 'warn', '', true);
  };

  Logger.prototype.error = function error() {
    for (var _len3 = arguments.length, args = Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {
      args[_key3] = arguments[_key3];
    }

    return this.forward(args, 'error', '');
  };

  Logger.prototype.deprecate = function deprecate() {
    for (var _len4 = arguments.length, args = Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {
      args[_key4] = arguments[_key4];
    }

    return this.forward(args, 'warn', 'WARNING DEPRECATED: ', true);
  };

  Logger.prototype.forward = function forward(args, lvl, prefix, debugOnly) {
    if (debugOnly && !this.debug) return null;
    if (typeof args[0] === 'string') args[0] = '' + prefix + this.prefix + ' ' + args[0];
    return this.logger[lvl](args);
  };

  Logger.prototype.create = function create(moduleName) {
    return new Logger(this.logger, _extends({ prefix: this.prefix + ':' + moduleName + ':' }, this.options));
  };

  return Logger;
}();

/* harmony default export */ var logger = (new Logger());
// CONCATENATED MODULE: ./node_modules/i18next/dist/es/EventEmitter.js
function EventEmitter__classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var EventEmitter = function () {
  function EventEmitter() {
    EventEmitter__classCallCheck(this, EventEmitter);

    this.observers = {};
  }

  EventEmitter.prototype.on = function on(events, listener) {
    var _this = this;

    events.split(' ').forEach(function (event) {
      _this.observers[event] = _this.observers[event] || [];
      _this.observers[event].push(listener);
    });
  };

  EventEmitter.prototype.off = function off(event, listener) {
    var _this2 = this;

    if (!this.observers[event]) {
      return;
    }

    this.observers[event].forEach(function () {
      if (!listener) {
        delete _this2.observers[event];
      } else {
        var index = _this2.observers[event].indexOf(listener);
        if (index > -1) {
          _this2.observers[event].splice(index, 1);
        }
      }
    });
  };

  EventEmitter.prototype.emit = function emit(event) {
    for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
      args[_key - 1] = arguments[_key];
    }

    if (this.observers[event]) {
      var cloned = [].concat(this.observers[event]);
      cloned.forEach(function (observer) {
        observer.apply(undefined, args);
      });
    }

    if (this.observers['*']) {
      var _cloned = [].concat(this.observers['*']);
      _cloned.forEach(function (observer) {
        var _ref;

        observer.apply(observer, (_ref = [event]).concat.apply(_ref, args));
      });
    }
  };

  return EventEmitter;
}();

/* harmony default export */ var es_EventEmitter = (EventEmitter);
// CONCATENATED MODULE: ./node_modules/i18next/dist/es/utils.js
function makeString(object) {
  if (object == null) return '';
  /* eslint prefer-template: 0 */
  return '' + object;
}

function copy(a, s, t) {
  a.forEach(function (m) {
    if (s[m]) t[m] = s[m];
  });
}

function getLastOfPath(object, path, Empty) {
  function cleanKey(key) {
    return key && key.indexOf('###') > -1 ? key.replace(/###/g, '.') : key;
  }

  function canNotTraverseDeeper() {
    return !object || typeof object === 'string';
  }

  var stack = typeof path !== 'string' ? [].concat(path) : path.split('.');
  while (stack.length > 1) {
    if (canNotTraverseDeeper()) return {};

    var key = cleanKey(stack.shift());
    if (!object[key] && Empty) object[key] = new Empty();
    object = object[key];
  }

  if (canNotTraverseDeeper()) return {};
  return {
    obj: object,
    k: cleanKey(stack.shift())
  };
}

function setPath(object, path, newValue) {
  var _getLastOfPath = getLastOfPath(object, path, Object),
      obj = _getLastOfPath.obj,
      k = _getLastOfPath.k;

  obj[k] = newValue;
}

function pushPath(object, path, newValue, concat) {
  var _getLastOfPath2 = getLastOfPath(object, path, Object),
      obj = _getLastOfPath2.obj,
      k = _getLastOfPath2.k;

  obj[k] = obj[k] || [];
  if (concat) obj[k] = obj[k].concat(newValue);
  if (!concat) obj[k].push(newValue);
}

function getPath(object, path) {
  var _getLastOfPath3 = getLastOfPath(object, path),
      obj = _getLastOfPath3.obj,
      k = _getLastOfPath3.k;

  if (!obj) return undefined;
  return obj[k];
}

function deepExtend(target, source, overwrite) {
  /* eslint no-restricted-syntax: 0 */
  for (var prop in source) {
    if (prop in target) {
      // If we reached a leaf string in target or source then replace with source or skip depending on the 'overwrite' switch
      if (typeof target[prop] === 'string' || target[prop] instanceof String || typeof source[prop] === 'string' || source[prop] instanceof String) {
        if (overwrite) target[prop] = source[prop];
      } else {
        deepExtend(target[prop], source[prop], overwrite);
      }
    } else {
      target[prop] = source[prop];
    }
  }
  return target;
}

function regexEscape(str) {
  /* eslint no-useless-escape: 0 */
  return str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, '\\$&');
}

/* eslint-disable */
var _entityMap = {
  "&": "&amp;",
  "<": "&lt;",
  ">": "&gt;",
  '"': '&quot;',
  "'": '&#39;',
  "/": '&#x2F;'
};
/* eslint-enable */

function utils_escape(data) {
  if (typeof data === 'string') {
    return data.replace(/[&<>"'\/]/g, function (s) {
      return _entityMap[s];
    });
  }

  return data;
}
// CONCATENATED MODULE: ./node_modules/i18next/dist/es/ResourceStore.js
var ResourceStore__extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

function _defaults(obj, defaults) { var keys = Object.getOwnPropertyNames(defaults); for (var i = 0; i < keys.length; i++) { var key = keys[i]; var value = Object.getOwnPropertyDescriptor(defaults, key); if (value && value.configurable && obj[key] === undefined) { Object.defineProperty(obj, key, value); } } return obj; }

function ResourceStore__classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : _defaults(subClass, superClass); }




var ResourceStore_ResourceStore = function (_EventEmitter) {
  _inherits(ResourceStore, _EventEmitter);

  function ResourceStore(data) {
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : { ns: ['translation'], defaultNS: 'translation' };

    ResourceStore__classCallCheck(this, ResourceStore);

    var _this = _possibleConstructorReturn(this, _EventEmitter.call(this));

    _this.data = data || {};
    _this.options = options;
    return _this;
  }

  ResourceStore.prototype.addNamespaces = function addNamespaces(ns) {
    if (this.options.ns.indexOf(ns) < 0) {
      this.options.ns.push(ns);
    }
  };

  ResourceStore.prototype.removeNamespaces = function removeNamespaces(ns) {
    var index = this.options.ns.indexOf(ns);
    if (index > -1) {
      this.options.ns.splice(index, 1);
    }
  };

  ResourceStore.prototype.getResource = function getResource(lng, ns, key) {
    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};

    var keySeparator = options.keySeparator || this.options.keySeparator;
    if (keySeparator === undefined) keySeparator = '.';

    var path = [lng, ns];
    if (key && typeof key !== 'string') path = path.concat(key);
    if (key && typeof key === 'string') path = path.concat(keySeparator ? key.split(keySeparator) : key);

    if (lng.indexOf('.') > -1) {
      path = lng.split('.');
    }

    return getPath(this.data, path);
  };

  ResourceStore.prototype.addResource = function addResource(lng, ns, key, value) {
    var options = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : { silent: false };

    var keySeparator = this.options.keySeparator;
    if (keySeparator === undefined) keySeparator = '.';

    var path = [lng, ns];
    if (key) path = path.concat(keySeparator ? key.split(keySeparator) : key);

    if (lng.indexOf('.') > -1) {
      path = lng.split('.');
      value = ns;
      ns = path[1];
    }

    this.addNamespaces(ns);

    setPath(this.data, path, value);

    if (!options.silent) this.emit('added', lng, ns, key, value);
  };

  ResourceStore.prototype.addResources = function addResources(lng, ns, resources) {
    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : { silent: false };

    /* eslint no-restricted-syntax: 0 */
    for (var m in resources) {
      if (typeof resources[m] === 'string') this.addResource(lng, ns, m, resources[m], { silent: true });
    }
    if (!options.silent) this.emit('added', lng, ns, resources);
  };

  ResourceStore.prototype.addResourceBundle = function addResourceBundle(lng, ns, resources, deep, overwrite) {
    var options = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : { silent: false };

    var path = [lng, ns];
    if (lng.indexOf('.') > -1) {
      path = lng.split('.');
      deep = resources;
      resources = ns;
      ns = path[1];
    }

    this.addNamespaces(ns);

    var pack = getPath(this.data, path) || {};

    if (deep) {
      deepExtend(pack, resources, overwrite);
    } else {
      pack = ResourceStore__extends({}, pack, resources);
    }

    setPath(this.data, path, pack);

    if (!options.silent) this.emit('added', lng, ns, resources);
  };

  ResourceStore.prototype.removeResourceBundle = function removeResourceBundle(lng, ns) {
    if (this.hasResourceBundle(lng, ns)) {
      delete this.data[lng][ns];
    }
    this.removeNamespaces(ns);

    this.emit('removed', lng, ns);
  };

  ResourceStore.prototype.hasResourceBundle = function hasResourceBundle(lng, ns) {
    return this.getResource(lng, ns) !== undefined;
  };

  ResourceStore.prototype.getResourceBundle = function getResourceBundle(lng, ns) {
    if (!ns) ns = this.options.defaultNS;

    // COMPATIBILITY: remove extend in v2.1.0
    if (this.options.compatibilityAPI === 'v1') return ResourceStore__extends({}, this.getResource(lng, ns));

    return this.getResource(lng, ns);
  };

  ResourceStore.prototype.toJSON = function toJSON() {
    return this.data;
  };

  return ResourceStore;
}(es_EventEmitter);

/* harmony default export */ var es_ResourceStore = (ResourceStore_ResourceStore);
// CONCATENATED MODULE: ./node_modules/i18next/dist/es/postProcessor.js
/* harmony default export */ var postProcessor = ({

  processors: {},

  addPostProcessor: function addPostProcessor(module) {
    this.processors[module.name] = module;
  },
  handle: function handle(processors, value, key, options, translator) {
    var _this = this;

    processors.forEach(function (processor) {
      if (_this.processors[processor]) value = _this.processors[processor].process(value, key, options, translator);
    });

    return value;
  }
});
// CONCATENATED MODULE: ./node_modules/i18next/dist/es/Translator.js
var Translator__extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

function Translator__defaults(obj, defaults) { var keys = Object.getOwnPropertyNames(defaults); for (var i = 0; i < keys.length; i++) { var key = keys[i]; var value = Object.getOwnPropertyDescriptor(defaults, key); if (value && value.configurable && obj[key] === undefined) { Object.defineProperty(obj, key, value); } } return obj; }

function Translator__classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function Translator__possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function Translator__inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : Translator__defaults(subClass, superClass); }






var Translator_Translator = function (_EventEmitter) {
  Translator__inherits(Translator, _EventEmitter);

  function Translator(services) {
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

    Translator__classCallCheck(this, Translator);

    var _this = Translator__possibleConstructorReturn(this, _EventEmitter.call(this));

    copy(['resourceStore', 'languageUtils', 'pluralResolver', 'interpolator', 'backendConnector'], services, _this);

    _this.options = options;
    _this.logger = logger.create('translator');
    return _this;
  }

  Translator.prototype.changeLanguage = function changeLanguage(lng) {
    if (lng) this.language = lng;
  };

  Translator.prototype.exists = function exists(key) {
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : { interpolation: {} };

    var resolved = this.resolve(key, options);
    return resolved && resolved.res !== undefined;
  };

  Translator.prototype.extractFromKey = function extractFromKey(key, options) {
    var nsSeparator = options.nsSeparator || this.options.nsSeparator;
    if (nsSeparator === undefined) nsSeparator = ':';
    var keySeparator = options.keySeparator || this.options.keySeparator || '.';

    var namespaces = options.ns || this.options.defaultNS;
    if (nsSeparator && key.indexOf(nsSeparator) > -1) {
      var parts = key.split(nsSeparator);
      if (nsSeparator !== keySeparator || nsSeparator === keySeparator && this.options.ns.indexOf(parts[0]) > -1) namespaces = parts.shift();
      key = parts.join(keySeparator);
    }
    if (typeof namespaces === 'string') namespaces = [namespaces];

    return {
      key: key,
      namespaces: namespaces
    };
  };

  Translator.prototype.translate = function translate(keys, options) {
    var _this2 = this;

    if ((typeof options === 'undefined' ? 'undefined' : _typeof(options)) !== 'object' && this.options.overloadTranslationOptionHandler) {
      /* eslint prefer-rest-params: 0 */
      options = this.options.overloadTranslationOptionHandler(arguments);
    }
    if (!options) options = {};

    // non valid keys handling
    if (keys === undefined || keys === null || keys === '') return '';
    if (typeof keys === 'number') keys = String(keys);
    if (typeof keys === 'string') keys = [keys];

    // separators
    var keySeparator = options.keySeparator || this.options.keySeparator || '.';

    // get namespace(s)

    var _extractFromKey = this.extractFromKey(keys[keys.length - 1], options),
        key = _extractFromKey.key,
        namespaces = _extractFromKey.namespaces;

    var namespace = namespaces[namespaces.length - 1];

    // return key on CIMode
    var lng = options.lng || this.language;
    var appendNamespaceToCIMode = options.appendNamespaceToCIMode || this.options.appendNamespaceToCIMode;
    if (lng && lng.toLowerCase() === 'cimode') {
      if (appendNamespaceToCIMode) {
        var nsSeparator = options.nsSeparator || this.options.nsSeparator;
        return namespace + nsSeparator + key;
      }

      return key;
    }

    // resolve from store
    var resolved = this.resolve(keys, options);
    var res = resolved && resolved.res;
    var resUsedKey = resolved && resolved.usedKey || key;

    var resType = Object.prototype.toString.apply(res);
    var noObject = ['[object Number]', '[object Function]', '[object RegExp]'];
    var joinArrays = options.joinArrays !== undefined ? options.joinArrays : this.options.joinArrays;

    // object
    var handleAsObject = typeof res !== 'string' && typeof res !== 'boolean' && typeof res !== 'number';
    if (res && handleAsObject && noObject.indexOf(resType) < 0 && !(joinArrays && resType === '[object Array]')) {
      if (!options.returnObjects && !this.options.returnObjects) {
        this.logger.warn('accessing an object - but returnObjects options is not enabled!');
        return this.options.returnedObjectHandler ? this.options.returnedObjectHandler(resUsedKey, res, options) : 'key \'' + key + ' (' + this.language + ')\' returned an object instead of string.';
      }

      // if we got a separator we loop over children - else we just return object as is
      // as having it set to false means no hierarchy so no lookup for nested values
      if (options.keySeparator || this.options.keySeparator) {
        var copy = resType === '[object Array]' ? [] : {}; // apply child translation on a copy

        /* eslint no-restricted-syntax: 0 */
        for (var m in res) {
          if (Object.prototype.hasOwnProperty.call(res, m)) {
            var deepKey = '' + resUsedKey + keySeparator + m;
            copy[m] = this.translate(deepKey, Translator__extends({}, options, { joinArrays: false, ns: namespaces }));
            if (copy[m] === deepKey) copy[m] = res[m]; // if nothing found use orginal value as fallback
          }
        }
        res = copy;
      }
    } else if (joinArrays && resType === '[object Array]') {
      // array special treatment
      res = res.join(joinArrays);
      if (res) res = this.extendTranslation(res, keys, options);
    } else {
      // string, empty or null
      var usedDefault = false;
      var usedKey = false;

      // fallback value
      if (!this.isValidLookup(res) && options.defaultValue !== undefined) {
        usedDefault = true;
        res = options.defaultValue;
      }
      if (!this.isValidLookup(res)) {
        usedKey = true;
        res = key;
      }

      // save missing
      var updateMissing = options.defaultValue && options.defaultValue !== res && this.options.updateMissing;
      if (usedKey || usedDefault || updateMissing) {
        this.logger.log(updateMissing ? 'updateKey' : 'missingKey', lng, namespace, key, updateMissing ? options.defaultValue : res);

        var lngs = [];
        var fallbackLngs = this.languageUtils.getFallbackCodes(this.options.fallbackLng, options.lng || this.language);
        if (this.options.saveMissingTo === 'fallback' && fallbackLngs && fallbackLngs[0]) {
          for (var i = 0; i < fallbackLngs.length; i++) {
            lngs.push(fallbackLngs[i]);
          }
        } else if (this.options.saveMissingTo === 'all') {
          lngs = this.languageUtils.toResolveHierarchy(options.lng || this.language);
        } else {
          lngs.push(options.lng || this.language);
        }

        var send = function send(l, k) {
          if (_this2.options.missingKeyHandler) {
            _this2.options.missingKeyHandler(l, namespace, k, updateMissing ? options.defaultValue : res, updateMissing, options);
          } else if (_this2.backendConnector && _this2.backendConnector.saveMissing) {
            _this2.backendConnector.saveMissing(l, namespace, k, updateMissing ? options.defaultValue : res, updateMissing, options);
          }
          _this2.emit('missingKey', l, namespace, k, res);
        };

        if (this.options.saveMissing) {
          if (this.options.saveMissingPlurals && options.count) {
            lngs.forEach(function (l) {
              var plurals = _this2.pluralResolver.getPluralFormsOfKey(l, key);

              plurals.forEach(function (p) {
                return send([l], p);
              });
            });
          } else {
            send(lngs, key);
          }
        }
      }

      // extend
      res = this.extendTranslation(res, keys, options);

      // append namespace if still key
      if (usedKey && res === key && this.options.appendNamespaceToMissingKey) res = namespace + ':' + key;

      // parseMissingKeyHandler
      if (usedKey && this.options.parseMissingKeyHandler) res = this.options.parseMissingKeyHandler(res);
    }

    // return
    return res;
  };

  Translator.prototype.extendTranslation = function extendTranslation(res, key, options) {
    var _this3 = this;

    if (options.interpolation) this.interpolator.init(Translator__extends({}, options, { interpolation: Translator__extends({}, this.options.interpolation, options.interpolation) }));

    // interpolate
    var data = options.replace && typeof options.replace !== 'string' ? options.replace : options;
    if (this.options.interpolation.defaultVariables) data = Translator__extends({}, this.options.interpolation.defaultVariables, data);
    res = this.interpolator.interpolate(res, data, options.lng || this.language);

    // nesting
    if (options.nest !== false) res = this.interpolator.nest(res, function () {
      return _this3.translate.apply(_this3, arguments);
    }, options);

    if (options.interpolation) this.interpolator.reset();

    // post process
    var postProcess = options.postProcess || this.options.postProcess;
    var postProcessorNames = typeof postProcess === 'string' ? [postProcess] : postProcess;

    if (res !== undefined && res !== null && postProcessorNames && postProcessorNames.length && options.applyPostProcessor !== false) {
      res = postProcessor.handle(postProcessorNames, res, key, options, this);
    }

    return res;
  };

  Translator.prototype.resolve = function resolve(keys) {
    var _this4 = this;

    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

    var found = void 0;
    var usedKey = void 0;

    if (typeof keys === 'string') keys = [keys];

    // forEach possible key
    keys.forEach(function (k) {
      if (_this4.isValidLookup(found)) return;
      var extracted = _this4.extractFromKey(k, options);
      var key = extracted.key;
      usedKey = key;
      var namespaces = extracted.namespaces;
      if (_this4.options.fallbackNS) namespaces = namespaces.concat(_this4.options.fallbackNS);

      var needsPluralHandling = options.count !== undefined && typeof options.count !== 'string';
      var needsContextHandling = options.context !== undefined && typeof options.context === 'string' && options.context !== '';

      var codes = options.lngs ? options.lngs : _this4.languageUtils.toResolveHierarchy(options.lng || _this4.language);

      namespaces.forEach(function (ns) {
        if (_this4.isValidLookup(found)) return;

        codes.forEach(function (code) {
          if (_this4.isValidLookup(found)) return;

          var finalKey = key;
          var finalKeys = [finalKey];

          var pluralSuffix = void 0;
          if (needsPluralHandling) pluralSuffix = _this4.pluralResolver.getSuffix(code, options.count);

          // fallback for plural if context not found
          if (needsPluralHandling && needsContextHandling) finalKeys.push(finalKey + pluralSuffix);

          // get key for context if needed
          if (needsContextHandling) finalKeys.push(finalKey += '' + _this4.options.contextSeparator + options.context);

          // get key for plural if needed
          if (needsPluralHandling) finalKeys.push(finalKey += pluralSuffix);

          // iterate over finalKeys starting with most specific pluralkey (-> contextkey only) -> singularkey only
          var possibleKey = void 0;
          /* eslint no-cond-assign: 0 */
          while (possibleKey = finalKeys.pop()) {
            if (!_this4.isValidLookup(found)) {
              found = _this4.getResource(code, ns, possibleKey, options);
            }
          }
        });
      });
    });

    return { res: found, usedKey: usedKey };
  };

  Translator.prototype.isValidLookup = function isValidLookup(res) {
    return res !== undefined && !(!this.options.returnNull && res === null) && !(!this.options.returnEmptyString && res === '');
  };

  Translator.prototype.getResource = function getResource(code, ns, key) {
    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};

    return this.resourceStore.getResource(code, ns, key, options);
  };

  return Translator;
}(es_EventEmitter);

/* harmony default export */ var es_Translator = (Translator_Translator);
// CONCATENATED MODULE: ./node_modules/i18next/dist/es/LanguageUtils.js
function LanguageUtils__classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }



function capitalize(string) {
  return string.charAt(0).toUpperCase() + string.slice(1);
}

var LanguageUtils_LanguageUtil = function () {
  function LanguageUtil(options) {
    LanguageUtils__classCallCheck(this, LanguageUtil);

    this.options = options;

    this.whitelist = this.options.whitelist || false;
    this.logger = logger.create('languageUtils');
  }

  LanguageUtil.prototype.getScriptPartFromCode = function getScriptPartFromCode(code) {
    if (!code || code.indexOf('-') < 0) return null;

    var p = code.split('-');
    if (p.length === 2) return null;
    p.pop();
    return this.formatLanguageCode(p.join('-'));
  };

  LanguageUtil.prototype.getLanguagePartFromCode = function getLanguagePartFromCode(code) {
    if (!code || code.indexOf('-') < 0) return code;

    var p = code.split('-');
    return this.formatLanguageCode(p[0]);
  };

  LanguageUtil.prototype.formatLanguageCode = function formatLanguageCode(code) {
    // http://www.iana.org/assignments/language-tags/language-tags.xhtml
    if (typeof code === 'string' && code.indexOf('-') > -1) {
      var specialCases = ['hans', 'hant', 'latn', 'cyrl', 'cans', 'mong', 'arab'];
      var p = code.split('-');

      if (this.options.lowerCaseLng) {
        p = p.map(function (part) {
          return part.toLowerCase();
        });
      } else if (p.length === 2) {
        p[0] = p[0].toLowerCase();
        p[1] = p[1].toUpperCase();

        if (specialCases.indexOf(p[1].toLowerCase()) > -1) p[1] = capitalize(p[1].toLowerCase());
      } else if (p.length === 3) {
        p[0] = p[0].toLowerCase();

        // if lenght 2 guess it's a country
        if (p[1].length === 2) p[1] = p[1].toUpperCase();
        if (p[0] !== 'sgn' && p[2].length === 2) p[2] = p[2].toUpperCase();

        if (specialCases.indexOf(p[1].toLowerCase()) > -1) p[1] = capitalize(p[1].toLowerCase());
        if (specialCases.indexOf(p[2].toLowerCase()) > -1) p[2] = capitalize(p[2].toLowerCase());
      }

      return p.join('-');
    }

    return this.options.cleanCode || this.options.lowerCaseLng ? code.toLowerCase() : code;
  };

  LanguageUtil.prototype.isWhitelisted = function isWhitelisted(code) {
    if (this.options.load === 'languageOnly' || this.options.nonExplicitWhitelist) {
      code = this.getLanguagePartFromCode(code);
    }
    return !this.whitelist || !this.whitelist.length || this.whitelist.indexOf(code) > -1;
  };

  LanguageUtil.prototype.getFallbackCodes = function getFallbackCodes(fallbacks, code) {
    if (!fallbacks) return [];
    if (typeof fallbacks === 'string') fallbacks = [fallbacks];
    if (Object.prototype.toString.apply(fallbacks) === '[object Array]') return fallbacks;

    if (!code) return fallbacks.default || [];

    // asume we have an object defining fallbacks
    var found = fallbacks[code];
    if (!found) found = fallbacks[this.getScriptPartFromCode(code)];
    if (!found) found = fallbacks[this.formatLanguageCode(code)];
    if (!found) found = fallbacks.default;

    return found || [];
  };

  LanguageUtil.prototype.toResolveHierarchy = function toResolveHierarchy(code, fallbackCode) {
    var _this = this;

    var fallbackCodes = this.getFallbackCodes(fallbackCode || this.options.fallbackLng || [], code);

    var codes = [];
    var addCode = function addCode(c) {
      if (!c) return;
      if (_this.isWhitelisted(c)) {
        codes.push(c);
      } else {
        _this.logger.warn('rejecting non-whitelisted language code: ' + c);
      }
    };

    if (typeof code === 'string' && code.indexOf('-') > -1) {
      if (this.options.load !== 'languageOnly') addCode(this.formatLanguageCode(code));
      if (this.options.load !== 'languageOnly' && this.options.load !== 'currentOnly') addCode(this.getScriptPartFromCode(code));
      if (this.options.load !== 'currentOnly') addCode(this.getLanguagePartFromCode(code));
    } else if (typeof code === 'string') {
      addCode(this.formatLanguageCode(code));
    }

    fallbackCodes.forEach(function (fc) {
      if (codes.indexOf(fc) < 0) addCode(_this.formatLanguageCode(fc));
    });

    return codes;
  };

  return LanguageUtil;
}();

/* harmony default export */ var LanguageUtils = (LanguageUtils_LanguageUtil);
// CONCATENATED MODULE: ./node_modules/i18next/dist/es/PluralResolver.js
function PluralResolver__classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }



// definition http://translate.sourceforge.net/wiki/l10n/pluralforms
/* eslint-disable */
var sets = [{ lngs: ['ach', 'ak', 'am', 'arn', 'br', 'fil', 'gun', 'ln', 'mfe', 'mg', 'mi', 'oc', 'pt', 'pt-BR', 'tg', 'ti', 'tr', 'uz', 'wa'], nr: [1, 2], fc: 1 }, { lngs: ['af', 'an', 'ast', 'az', 'bg', 'bn', 'ca', 'da', 'de', 'dev', 'el', 'en', 'eo', 'es', 'et', 'eu', 'fi', 'fo', 'fur', 'fy', 'gl', 'gu', 'ha', 'he', 'hi', 'hu', 'hy', 'ia', 'it', 'kn', 'ku', 'lb', 'mai', 'ml', 'mn', 'mr', 'nah', 'nap', 'nb', 'ne', 'nl', 'nn', 'no', 'nso', 'pa', 'pap', 'pms', 'ps', 'pt-PT', 'rm', 'sco', 'se', 'si', 'so', 'son', 'sq', 'sv', 'sw', 'ta', 'te', 'tk', 'ur', 'yo'], nr: [1, 2], fc: 2 }, { lngs: ['ay', 'bo', 'cgg', 'fa', 'id', 'ja', 'jbo', 'ka', 'kk', 'km', 'ko', 'ky', 'lo', 'ms', 'sah', 'su', 'th', 'tt', 'ug', 'vi', 'wo', 'zh'], nr: [1], fc: 3 }, { lngs: ['be', 'bs', 'dz', 'hr', 'ru', 'sr', 'uk'], nr: [1, 2, 5], fc: 4 }, { lngs: ['ar'], nr: [0, 1, 2, 3, 11, 100], fc: 5 }, { lngs: ['cs', 'sk'], nr: [1, 2, 5], fc: 6 }, { lngs: ['csb', 'pl'], nr: [1, 2, 5], fc: 7 }, { lngs: ['cy'], nr: [1, 2, 3, 8], fc: 8 }, { lngs: ['fr'], nr: [1, 2], fc: 9 }, { lngs: ['ga'], nr: [1, 2, 3, 7, 11], fc: 10 }, { lngs: ['gd'], nr: [1, 2, 3, 20], fc: 11 }, { lngs: ['is'], nr: [1, 2], fc: 12 }, { lngs: ['jv'], nr: [0, 1], fc: 13 }, { lngs: ['kw'], nr: [1, 2, 3, 4], fc: 14 }, { lngs: ['lt'], nr: [1, 2, 10], fc: 15 }, { lngs: ['lv'], nr: [1, 2, 0], fc: 16 }, { lngs: ['mk'], nr: [1, 2], fc: 17 }, { lngs: ['mnk'], nr: [0, 1, 2], fc: 18 }, { lngs: ['mt'], nr: [1, 2, 11, 20], fc: 19 }, { lngs: ['or'], nr: [2, 1], fc: 2 }, { lngs: ['ro'], nr: [1, 2, 20], fc: 20 }, { lngs: ['sl'], nr: [5, 1, 2, 3], fc: 21 }];

var _rulesPluralsTypes = {
  1: function _(n) {
    return Number(n > 1);
  },
  2: function _(n) {
    return Number(n != 1);
  },
  3: function _(n) {
    return 0;
  },
  4: function _(n) {
    return Number(n % 10 == 1 && n % 100 != 11 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2);
  },
  5: function _(n) {
    return Number(n === 0 ? 0 : n == 1 ? 1 : n == 2 ? 2 : n % 100 >= 3 && n % 100 <= 10 ? 3 : n % 100 >= 11 ? 4 : 5);
  },
  6: function _(n) {
    return Number(n == 1 ? 0 : n >= 2 && n <= 4 ? 1 : 2);
  },
  7: function _(n) {
    return Number(n == 1 ? 0 : n % 10 >= 2 && n % 10 <= 4 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2);
  },
  8: function _(n) {
    return Number(n == 1 ? 0 : n == 2 ? 1 : n != 8 && n != 11 ? 2 : 3);
  },
  9: function _(n) {
    return Number(n >= 2);
  },
  10: function _(n) {
    return Number(n == 1 ? 0 : n == 2 ? 1 : n < 7 ? 2 : n < 11 ? 3 : 4);
  },
  11: function _(n) {
    return Number(n == 1 || n == 11 ? 0 : n == 2 || n == 12 ? 1 : n > 2 && n < 20 ? 2 : 3);
  },
  12: function _(n) {
    return Number(n % 10 != 1 || n % 100 == 11);
  },
  13: function _(n) {
    return Number(n !== 0);
  },
  14: function _(n) {
    return Number(n == 1 ? 0 : n == 2 ? 1 : n == 3 ? 2 : 3);
  },
  15: function _(n) {
    return Number(n % 10 == 1 && n % 100 != 11 ? 0 : n % 10 >= 2 && (n % 100 < 10 || n % 100 >= 20) ? 1 : 2);
  },
  16: function _(n) {
    return Number(n % 10 == 1 && n % 100 != 11 ? 0 : n !== 0 ? 1 : 2);
  },
  17: function _(n) {
    return Number(n == 1 || n % 10 == 1 ? 0 : 1);
  },
  18: function _(n) {
    return Number(n == 0 ? 0 : n == 1 ? 1 : 2);
  },
  19: function _(n) {
    return Number(n == 1 ? 0 : n === 0 || n % 100 > 1 && n % 100 < 11 ? 1 : n % 100 > 10 && n % 100 < 20 ? 2 : 3);
  },
  20: function _(n) {
    return Number(n == 1 ? 0 : n === 0 || n % 100 > 0 && n % 100 < 20 ? 1 : 2);
  },
  21: function _(n) {
    return Number(n % 100 == 1 ? 1 : n % 100 == 2 ? 2 : n % 100 == 3 || n % 100 == 4 ? 3 : 0);
  }
};
/* eslint-enable */

function createRules() {
  var rules = {};
  sets.forEach(function (set) {
    set.lngs.forEach(function (l) {
      rules[l] = {
        numbers: set.nr,
        plurals: _rulesPluralsTypes[set.fc]
      };
    });
  });
  return rules;
}

var PluralResolver_PluralResolver = function () {
  function PluralResolver(languageUtils) {
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

    PluralResolver__classCallCheck(this, PluralResolver);

    this.languageUtils = languageUtils;
    this.options = options;

    this.logger = logger.create('pluralResolver');

    this.rules = createRules();
  }

  PluralResolver.prototype.addRule = function addRule(lng, obj) {
    this.rules[lng] = obj;
  };

  PluralResolver.prototype.getRule = function getRule(code) {
    return this.rules[code] || this.rules[this.languageUtils.getLanguagePartFromCode(code)];
  };

  PluralResolver.prototype.needsPlural = function needsPlural(code) {
    var rule = this.getRule(code);

    return rule && rule.numbers.length > 1;
  };

  PluralResolver.prototype.getPluralFormsOfKey = function getPluralFormsOfKey(code, key) {
    var _this = this;

    var ret = [];

    var rule = this.getRule(code);

    if (!rule) return ret;

    rule.numbers.forEach(function (n) {
      var suffix = _this.getSuffix(code, n);
      ret.push('' + key + suffix);
    });

    return ret;
  };

  PluralResolver.prototype.getSuffix = function getSuffix(code, count) {
    var _this2 = this;

    var rule = this.getRule(code);

    if (rule) {
      // if (rule.numbers.length === 1) return ''; // only singular

      var idx = rule.noAbs ? rule.plurals(count) : rule.plurals(Math.abs(count));
      var suffix = rule.numbers[idx];

      // special treatment for lngs only having singular and plural
      if (this.options.simplifyPluralSuffix && rule.numbers.length === 2 && rule.numbers[0] === 1) {
        if (suffix === 2) {
          suffix = 'plural';
        } else if (suffix === 1) {
          suffix = '';
        }
      }

      var returnSuffix = function returnSuffix() {
        return _this2.options.prepend && suffix.toString() ? _this2.options.prepend + suffix.toString() : suffix.toString();
      };

      // COMPATIBILITY JSON
      // v1
      if (this.options.compatibilityJSON === 'v1') {
        if (suffix === 1) return '';
        if (typeof suffix === 'number') return '_plural_' + suffix.toString();
        return returnSuffix();
      } else if ( /* v2 */this.options.compatibilityJSON === 'v2' || rule.numbers.length === 2 && rule.numbers[0] === 1) {
        return returnSuffix();
      } else if ( /* v3 - gettext index */rule.numbers.length === 2 && rule.numbers[0] === 1) {
        return returnSuffix();
      }
      return this.options.prepend && idx.toString() ? this.options.prepend + idx.toString() : idx.toString();
    }

    this.logger.warn('no plural rule found for: ' + code);
    return '';
  };

  return PluralResolver;
}();

/* harmony default export */ var es_PluralResolver = (PluralResolver_PluralResolver);
// CONCATENATED MODULE: ./node_modules/i18next/dist/es/Interpolator.js
var Interpolator__extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

function Interpolator__classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }




var Interpolator_Interpolator = function () {
  function Interpolator() {
    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};

    Interpolator__classCallCheck(this, Interpolator);

    this.logger = logger.create('interpolator');

    this.init(options, true);
  }

  /* eslint no-param-reassign: 0 */


  Interpolator.prototype.init = function init() {
    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    var reset = arguments[1];

    if (reset) {
      this.options = options;
      this.format = options.interpolation && options.interpolation.format || function (value) {
        return value;
      };
      this.escape = options.interpolation && options.interpolation.escape || utils_escape;
    }
    if (!options.interpolation) options.interpolation = { escapeValue: true };

    var iOpts = options.interpolation;

    this.escapeValue = iOpts.escapeValue !== undefined ? iOpts.escapeValue : true;

    this.prefix = iOpts.prefix ? regexEscape(iOpts.prefix) : iOpts.prefixEscaped || '{{';
    this.suffix = iOpts.suffix ? regexEscape(iOpts.suffix) : iOpts.suffixEscaped || '}}';

    this.formatSeparator = iOpts.formatSeparator ? iOpts.formatSeparator : iOpts.formatSeparator || ',';

    this.unescapePrefix = iOpts.unescapeSuffix ? '' : iOpts.unescapePrefix || '-';
    this.unescapeSuffix = this.unescapePrefix ? '' : iOpts.unescapeSuffix || '';

    this.nestingPrefix = iOpts.nestingPrefix ? regexEscape(iOpts.nestingPrefix) : iOpts.nestingPrefixEscaped || regexEscape('$t(');
    this.nestingSuffix = iOpts.nestingSuffix ? regexEscape(iOpts.nestingSuffix) : iOpts.nestingSuffixEscaped || regexEscape(')');

    this.maxReplaces = iOpts.maxReplaces ? iOpts.maxReplaces : 1000;

    // the regexp
    this.resetRegExp();
  };

  Interpolator.prototype.reset = function reset() {
    if (this.options) this.init(this.options);
  };

  Interpolator.prototype.resetRegExp = function resetRegExp() {
    // the regexp
    var regexpStr = this.prefix + '(.+?)' + this.suffix;
    this.regexp = new RegExp(regexpStr, 'g');

    var regexpUnescapeStr = '' + this.prefix + this.unescapePrefix + '(.+?)' + this.unescapeSuffix + this.suffix;
    this.regexpUnescape = new RegExp(regexpUnescapeStr, 'g');

    var nestingRegexpStr = this.nestingPrefix + '(.+?)' + this.nestingSuffix;
    this.nestingRegexp = new RegExp(nestingRegexpStr, 'g');
  };

  Interpolator.prototype.interpolate = function interpolate(str, data, lng) {
    var _this = this;

    var match = void 0;
    var value = void 0;
    var replaces = void 0;

    function regexSafe(val) {
      return val.replace(/\$/g, '$$$$');
    }

    var handleFormat = function handleFormat(key) {
      if (key.indexOf(_this.formatSeparator) < 0) return getPath(data, key);

      var p = key.split(_this.formatSeparator);
      var k = p.shift().trim();
      var f = p.join(_this.formatSeparator).trim();

      return _this.format(getPath(data, k), f, lng);
    };

    this.resetRegExp();

    replaces = 0;
    // unescape if has unescapePrefix/Suffix
    /* eslint no-cond-assign: 0 */
    while (match = this.regexpUnescape.exec(str)) {
      value = handleFormat(match[1].trim());
      str = str.replace(match[0], value);
      this.regexpUnescape.lastIndex = 0;
      replaces++;
      if (replaces >= this.maxReplaces) {
        break;
      }
    }

    replaces = 0;
    // regular escape on demand
    while (match = this.regexp.exec(str)) {
      value = handleFormat(match[1].trim());
      if (typeof value !== 'string') value = makeString(value);
      if (!value) {
        if (typeof this.options.missingInterpolationHandler === 'function') {
          var temp = this.options.missingInterpolationHandler(str, match);
          value = typeof temp === 'string' ? temp : '';
        } else {
          this.logger.warn('missed to pass in variable ' + match[1] + ' for interpolating ' + str);
          value = '';
        }
      }
      value = this.escapeValue ? regexSafe(this.escape(value)) : regexSafe(value);
      str = str.replace(match[0], value);
      this.regexp.lastIndex = 0;
      replaces++;
      if (replaces >= this.maxReplaces) {
        break;
      }
    }
    return str;
  };

  Interpolator.prototype.nest = function nest(str, fc) {
    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};

    var match = void 0;
    var value = void 0;

    var clonedOptions = Interpolator__extends({}, options);
    clonedOptions.applyPostProcessor = false; // avoid post processing on nested lookup

    // if value is something like "myKey": "lorem $(anotherKey, { "count": {{aValueInOptions}} })"
    function handleHasOptions(key, inheritedOptions) {
      if (key.indexOf(',') < 0) return key;

      var p = key.split(',');
      key = p.shift();
      var optionsString = p.join(',');
      optionsString = this.interpolate(optionsString, clonedOptions);
      optionsString = optionsString.replace(/'/g, '"');

      try {
        clonedOptions = JSON.parse(optionsString);

        if (inheritedOptions) clonedOptions = Interpolator__extends({}, inheritedOptions, clonedOptions);
      } catch (e) {
        this.logger.error('failed parsing options string in nesting for key ' + key, e);
      }

      return key;
    }

    // regular escape on demand
    while (match = this.nestingRegexp.exec(str)) {
      value = fc(handleHasOptions.call(this, match[1].trim(), clonedOptions), clonedOptions);

      // is only the nesting key (key1 = '$(key2)') return the value without stringify
      if (value && match[0] === str && typeof value !== 'string') return value;

      // no string to include or empty
      if (typeof value !== 'string') value = makeString(value);
      if (!value) {
        this.logger.warn('missed to resolve ' + match[1] + ' for nesting ' + str);
        value = '';
      }
      // Nested keys should not be escaped by default #854
      // value = this.escapeValue ? regexSafe(utils.escape(value)) : regexSafe(value);
      str = str.replace(match[0], value);
      this.regexp.lastIndex = 0;
    }
    return str;
  };

  return Interpolator;
}();

/* harmony default export */ var es_Interpolator = (Interpolator_Interpolator);
// CONCATENATED MODULE: ./node_modules/i18next/dist/es/BackendConnector.js
var BackendConnector__extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

var _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i["return"]) _i["return"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError("Invalid attempt to destructure non-iterable instance"); } }; }();

function BackendConnector__defaults(obj, defaults) { var keys = Object.getOwnPropertyNames(defaults); for (var i = 0; i < keys.length; i++) { var key = keys[i]; var value = Object.getOwnPropertyDescriptor(defaults, key); if (value && value.configurable && obj[key] === undefined) { Object.defineProperty(obj, key, value); } } return obj; }

function BackendConnector__classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function BackendConnector__possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function BackendConnector__inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : BackendConnector__defaults(subClass, superClass); }





function remove(arr, what) {
  var found = arr.indexOf(what);

  while (found !== -1) {
    arr.splice(found, 1);
    found = arr.indexOf(what);
  }
}

var BackendConnector_Connector = function (_EventEmitter) {
  BackendConnector__inherits(Connector, _EventEmitter);

  function Connector(backend, store, services) {
    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};

    BackendConnector__classCallCheck(this, Connector);

    var _this = BackendConnector__possibleConstructorReturn(this, _EventEmitter.call(this));

    _this.backend = backend;
    _this.store = store;
    _this.languageUtils = services.languageUtils;
    _this.options = options;
    _this.logger = logger.create('backendConnector');

    _this.state = {};
    _this.queue = [];

    if (_this.backend && _this.backend.init) {
      _this.backend.init(services, options.backend, options);
    }
    return _this;
  }

  Connector.prototype.queueLoad = function queueLoad(languages, namespaces, callback) {
    var _this2 = this;

    // find what needs to be loaded
    var toLoad = [];
    var pending = [];
    var toLoadLanguages = [];
    var toLoadNamespaces = [];

    languages.forEach(function (lng) {
      var hasAllNamespaces = true;

      namespaces.forEach(function (ns) {
        var name = lng + '|' + ns;

        if (_this2.store.hasResourceBundle(lng, ns)) {
          _this2.state[name] = 2; // loaded
        } else if (_this2.state[name] < 0) {
          // nothing to do for err
        } else if (_this2.state[name] === 1) {
          if (pending.indexOf(name) < 0) pending.push(name);
        } else {
          _this2.state[name] = 1; // pending

          hasAllNamespaces = false;

          if (pending.indexOf(name) < 0) pending.push(name);
          if (toLoad.indexOf(name) < 0) toLoad.push(name);
          if (toLoadNamespaces.indexOf(ns) < 0) toLoadNamespaces.push(ns);
        }
      });

      if (!hasAllNamespaces) toLoadLanguages.push(lng);
    });

    if (toLoad.length || pending.length) {
      this.queue.push({
        pending: pending,
        loaded: {},
        errors: [],
        callback: callback
      });
    }

    return {
      toLoad: toLoad,
      pending: pending,
      toLoadLanguages: toLoadLanguages,
      toLoadNamespaces: toLoadNamespaces
    };
  };

  Connector.prototype.loaded = function loaded(name, err, data) {
    var _this3 = this;

    var _name$split = name.split('|'),
        _name$split2 = _slicedToArray(_name$split, 2),
        lng = _name$split2[0],
        ns = _name$split2[1];

    if (err) this.emit('failedLoading', lng, ns, err);

    if (data) {
      this.store.addResourceBundle(lng, ns, data);
    }

    // set loaded
    this.state[name] = err ? -1 : 2;

    // callback if ready
    this.queue.forEach(function (q) {
      pushPath(q.loaded, [lng], ns);
      remove(q.pending, name);

      if (err) q.errors.push(err);

      if (q.pending.length === 0 && !q.done) {
        _this3.emit('loaded', q.loaded);
        /* eslint no-param-reassign: 0 */
        q.done = true;
        if (q.errors.length) {
          q.callback(q.errors);
        } else {
          q.callback();
        }
      }
    });

    // remove done load requests
    this.queue = this.queue.filter(function (q) {
      return !q.done;
    });
  };

  Connector.prototype.read = function read(lng, ns, fcName) {
    var tried = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;

    var _this4 = this;

    var wait = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 250;
    var callback = arguments[5];

    if (!lng.length) return callback(null, {}); // noting to load

    return this.backend[fcName](lng, ns, function (err, data) {
      if (err && data /* = retryFlag */ && tried < 5) {
        setTimeout(function () {
          _this4.read.call(_this4, lng, ns, fcName, tried + 1, wait * 2, callback);
        }, wait);
        return;
      }
      callback(err, data);
    });
  };

  /* eslint consistent-return: 0 */


  Connector.prototype.load = function load(languages, namespaces, callback) {
    var _this5 = this;

    if (!this.backend) {
      this.logger.warn('No backend was added via i18next.use. Will not load resources.');
      return callback && callback();
    }
    var options = BackendConnector__extends({}, this.backend.options, this.options.backend);

    if (typeof languages === 'string') languages = this.languageUtils.toResolveHierarchy(languages);
    if (typeof namespaces === 'string') namespaces = [namespaces];

    var toLoad = this.queueLoad(languages, namespaces, callback);
    if (!toLoad.toLoad.length) {
      if (!toLoad.pending.length) callback(); // nothing to load and no pendings...callback now
      return null; // pendings will trigger callback
    }

    // load with multi-load
    if (options.allowMultiLoading && this.backend.readMulti) {
      this.read(toLoad.toLoadLanguages, toLoad.toLoadNamespaces, 'readMulti', null, null, function (err, data) {
        if (err) _this5.logger.warn('loading namespaces ' + toLoad.toLoadNamespaces.join(', ') + ' for languages ' + toLoad.toLoadLanguages.join(', ') + ' via multiloading failed', err);
        if (!err && data) _this5.logger.log('successfully loaded namespaces ' + toLoad.toLoadNamespaces.join(', ') + ' for languages ' + toLoad.toLoadLanguages.join(', ') + ' via multiloading', data);

        toLoad.toLoad.forEach(function (name) {
          var _name$split3 = name.split('|'),
              _name$split4 = _slicedToArray(_name$split3, 2),
              l = _name$split4[0],
              n = _name$split4[1];

          var bundle = getPath(data, [l, n]);
          if (bundle) {
            _this5.loaded(name, err, bundle);
          } else {
            var error = 'loading namespace ' + n + ' for language ' + l + ' via multiloading failed';
            _this5.loaded(name, error);
            _this5.logger.error(error);
          }
        });
      });
    } else {
      toLoad.toLoad.forEach(function (name) {
        _this5.loadOne(name);
      });
    }
  };

  Connector.prototype.reload = function reload(languages, namespaces) {
    var _this6 = this;

    if (!this.backend) {
      this.logger.warn('No backend was added via i18next.use. Will not load resources.');
    }
    var options = BackendConnector__extends({}, this.backend.options, this.options.backend);

    if (typeof languages === 'string') languages = this.languageUtils.toResolveHierarchy(languages);
    if (typeof namespaces === 'string') namespaces = [namespaces];

    // load with multi-load
    if (options.allowMultiLoading && this.backend.readMulti) {
      this.read(languages, namespaces, 'readMulti', null, null, function (err, data) {
        if (err) _this6.logger.warn('reloading namespaces ' + namespaces.join(', ') + ' for languages ' + languages.join(', ') + ' via multiloading failed', err);
        if (!err && data) _this6.logger.log('successfully reloaded namespaces ' + namespaces.join(', ') + ' for languages ' + languages.join(', ') + ' via multiloading', data);

        languages.forEach(function (l) {
          namespaces.forEach(function (n) {
            var bundle = getPath(data, [l, n]);
            if (bundle) {
              _this6.loaded(l + '|' + n, err, bundle);
            } else {
              var error = 'reloading namespace ' + n + ' for language ' + l + ' via multiloading failed';
              _this6.loaded(l + '|' + n, error);
              _this6.logger.error(error);
            }
          });
        });
      });
    } else {
      languages.forEach(function (l) {
        namespaces.forEach(function (n) {
          _this6.loadOne(l + '|' + n, 're');
        });
      });
    }
  };

  Connector.prototype.loadOne = function loadOne(name) {
    var _this7 = this;

    var prefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';

    var _name$split5 = name.split('|'),
        _name$split6 = _slicedToArray(_name$split5, 2),
        lng = _name$split6[0],
        ns = _name$split6[1];

    this.read(lng, ns, 'read', null, null, function (err, data) {
      if (err) _this7.logger.warn(prefix + 'loading namespace ' + ns + ' for language ' + lng + ' failed', err);
      if (!err && data) _this7.logger.log(prefix + 'loaded namespace ' + ns + ' for language ' + lng, data);

      _this7.loaded(name, err, data);
    });
  };

  Connector.prototype.saveMissing = function saveMissing(languages, namespace, key, fallbackValue, isUpdate) {
    var options = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : {};

    if (this.backend && this.backend.create) {
      this.backend.create(languages, namespace, key, fallbackValue, null /* unused callback */, BackendConnector__extends({}, options, { isUpdate: isUpdate }));
    }

    // write to store to avoid resending
    if (!languages || !languages[0]) return;
    this.store.addResource(languages[0], namespace, key, fallbackValue);
  };

  return Connector;
}(es_EventEmitter);

/* harmony default export */ var BackendConnector = (BackendConnector_Connector);
// CONCATENATED MODULE: ./node_modules/i18next/dist/es/CacheConnector.js
var CacheConnector__extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

function CacheConnector__defaults(obj, defaults) { var keys = Object.getOwnPropertyNames(defaults); for (var i = 0; i < keys.length; i++) { var key = keys[i]; var value = Object.getOwnPropertyDescriptor(defaults, key); if (value && value.configurable && obj[key] === undefined) { Object.defineProperty(obj, key, value); } } return obj; }

function CacheConnector__classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function CacheConnector__possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function CacheConnector__inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : CacheConnector__defaults(subClass, superClass); }




var CacheConnector_Connector = function (_EventEmitter) {
  CacheConnector__inherits(Connector, _EventEmitter);

  function Connector(cache, store, services) {
    var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};

    CacheConnector__classCallCheck(this, Connector);

    var _this = CacheConnector__possibleConstructorReturn(this, _EventEmitter.call(this));

    _this.cache = cache;
    _this.store = store;
    _this.services = services;
    _this.options = options;
    _this.logger = logger.create('cacheConnector');

    if (_this.cache && _this.cache.init) _this.cache.init(services, options.cache, options);
    return _this;
  }

  /* eslint consistent-return: 0 */


  Connector.prototype.load = function load(languages, namespaces, callback) {
    var _this2 = this;

    if (!this.cache) return callback && callback();
    var options = CacheConnector__extends({}, this.cache.options, this.options.cache);

    var loadLngs = typeof languages === 'string' ? this.services.languageUtils.toResolveHierarchy(languages) : languages;

    if (options.enabled) {
      this.cache.load(loadLngs, function (err, data) {
        if (err) _this2.logger.error('loading languages ' + loadLngs.join(', ') + ' from cache failed', err);
        if (data) {
          /* eslint no-restricted-syntax: 0 */
          for (var l in data) {
            if (Object.prototype.hasOwnProperty.call(data, l)) {
              for (var n in data[l]) {
                if (Object.prototype.hasOwnProperty.call(data[l], n)) {
                  if (n !== 'i18nStamp') {
                    var bundle = data[l][n];
                    if (bundle) _this2.store.addResourceBundle(l, n, bundle);
                  }
                }
              }
            }
          }
        }
        if (callback) callback();
      });
    } else if (callback) {
      callback();
    }
  };

  Connector.prototype.save = function save() {
    if (this.cache && this.options.cache && this.options.cache.enabled) this.cache.save(this.store.data);
  };

  return Connector;
}(es_EventEmitter);

/* harmony default export */ var CacheConnector = (CacheConnector_Connector);
// CONCATENATED MODULE: ./node_modules/i18next/dist/es/defaults.js

function get() {
  return {
    debug: false,
    initImmediate: true,

    ns: ['translation'],
    defaultNS: ['translation'],
    fallbackLng: ['dev'],
    fallbackNS: false, // string or array of namespaces

    whitelist: false, // array with whitelisted languages
    nonExplicitWhitelist: false,
    load: 'all', // | currentOnly | languageOnly
    preload: false, // array with preload languages

    simplifyPluralSuffix: true,
    keySeparator: '.',
    nsSeparator: ':',
    pluralSeparator: '_',
    contextSeparator: '_',

    saveMissing: false, // enable to send missing values
    updateMissing: false, // enable to update default values if different from translated value (only useful on initial development, or when keeping code as source of truth)
    saveMissingTo: 'fallback', // 'current' || 'all'
    saveMissingPlurals: true, // will save all forms not only singular key
    missingKeyHandler: false, // function(lng, ns, key, fallbackValue) -> override if prefer on handling
    missingInterpolationHandler: false, // function(str, match)

    postProcess: false, // string or array of postProcessor names
    returnNull: true, // allows null value as valid translation
    returnEmptyString: true, // allows empty string value as valid translation
    returnObjects: false,
    joinArrays: false, // or string to join array
    returnedObjectHandler: function returnedObjectHandler() {}, // function(key, value, options) triggered if key returns object but returnObjects is set to false
    parseMissingKeyHandler: false, // function(key) parsed a key that was not found in t() before returning
    appendNamespaceToMissingKey: false,
    appendNamespaceToCIMode: false,
    overloadTranslationOptionHandler: function handle(args) {
      var ret = {};
      if (args[1]) ret.defaultValue = args[1];
      if (args[2]) ret.tDescription = args[2];
      return ret;
    },

    interpolation: {
      escapeValue: true,
      format: function format(value, _format, lng) {
        return value;
      },
      prefix: '{{',
      suffix: '}}',
      formatSeparator: ',',
      // prefixEscaped: '{{',
      // suffixEscaped: '}}',
      // unescapeSuffix: '',
      unescapePrefix: '-',

      nestingPrefix: '$t(',
      nestingSuffix: ')',
      // nestingPrefixEscaped: '$t(',
      // nestingSuffixEscaped: ')',
      // defaultVariables: undefined // object that can have values to interpolate on - extends passed in interpolation data
      maxReplaces: 1000 // max replaces to prevent endless loop
    }
  };
}

/* eslint no-param-reassign: 0 */
function transformOptions(options) {
  // create namespace object if namespace is passed in as string
  if (typeof options.ns === 'string') options.ns = [options.ns];
  if (typeof options.fallbackLng === 'string') options.fallbackLng = [options.fallbackLng];
  if (typeof options.fallbackNS === 'string') options.fallbackNS = [options.fallbackNS];

  // extend whitelist with cimode
  if (options.whitelist && options.whitelist.indexOf('cimode') < 0) {
    options.whitelist = options.whitelist.concat(['cimode']);
  }

  return options;
}
// CONCATENATED MODULE: ./node_modules/i18next/dist/es/i18next.js
var i18next__typeof = typeof Symbol === "function" && typeof Symbol.iterator === "symbol" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === "function" && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj; };

var i18next__extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };

function i18next__defaults(obj, defaults) { var keys = Object.getOwnPropertyNames(defaults); for (var i = 0; i < keys.length; i++) { var key = keys[i]; var value = Object.getOwnPropertyDescriptor(defaults, key); if (value && value.configurable && obj[key] === undefined) { Object.defineProperty(obj, key, value); } } return obj; }

function i18next__classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function i18next__possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function i18next__inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : i18next__defaults(subClass, superClass); }













function noop() {}

var i18next_I18n = function (_EventEmitter) {
  i18next__inherits(I18n, _EventEmitter);

  function I18n() {
    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    var callback = arguments[1];

    i18next__classCallCheck(this, I18n);

    var _this = i18next__possibleConstructorReturn(this, _EventEmitter.call(this));

    _this.options = transformOptions(options);
    _this.services = {};
    _this.logger = logger;
    _this.modules = { external: [] };

    if (callback && !_this.isInitialized && !options.isClone) {
      var _ret;

      // https://github.com/i18next/i18next/issues/879
      if (!_this.options.initImmediate) return _ret = _this.init(options, callback), i18next__possibleConstructorReturn(_this, _ret);
      setTimeout(function () {
        _this.init(options, callback);
      }, 0);
    }
    return _this;
  }

  I18n.prototype.init = function init() {
    var _this2 = this;

    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    var callback = arguments[1];

    if (typeof options === 'function') {
      callback = options;
      options = {};
    }
    this.options = i18next__extends({}, get(), this.options, transformOptions(options));

    this.format = this.options.interpolation.format;
    if (!callback) callback = noop;

    function createClassOnDemand(ClassOrObject) {
      if (!ClassOrObject) return null;
      if (typeof ClassOrObject === 'function') return new ClassOrObject();
      return ClassOrObject;
    }

    // init services
    if (!this.options.isClone) {
      if (this.modules.logger) {
        logger.init(createClassOnDemand(this.modules.logger), this.options);
      } else {
        logger.init(null, this.options);
      }

      var lu = new LanguageUtils(this.options);
      this.store = new es_ResourceStore(this.options.resources, this.options);

      var s = this.services;
      s.logger = logger;
      s.resourceStore = this.store;
      s.resourceStore.on('added removed', function (lng, ns) {
        s.cacheConnector.save();
      });
      s.languageUtils = lu;
      s.pluralResolver = new es_PluralResolver(lu, { prepend: this.options.pluralSeparator, compatibilityJSON: this.options.compatibilityJSON, simplifyPluralSuffix: this.options.simplifyPluralSuffix });
      s.interpolator = new es_Interpolator(this.options);

      s.backendConnector = new BackendConnector(createClassOnDemand(this.modules.backend), s.resourceStore, s, this.options);
      // pipe events from backendConnector
      s.backendConnector.on('*', function (event) {
        for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
          args[_key - 1] = arguments[_key];
        }

        _this2.emit.apply(_this2, [event].concat(args));
      });

      s.backendConnector.on('loaded', function (loaded) {
        s.cacheConnector.save();
      });

      s.cacheConnector = new CacheConnector(createClassOnDemand(this.modules.cache), s.resourceStore, s, this.options);
      // pipe events from backendConnector
      s.cacheConnector.on('*', function (event) {
        for (var _len2 = arguments.length, args = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {
          args[_key2 - 1] = arguments[_key2];
        }

        _this2.emit.apply(_this2, [event].concat(args));
      });

      if (this.modules.languageDetector) {
        s.languageDetector = createClassOnDemand(this.modules.languageDetector);
        s.languageDetector.init(s, this.options.detection, this.options);
      }

      this.translator = new es_Translator(this.services, this.options);
      // pipe events from translator
      this.translator.on('*', function (event) {
        for (var _len3 = arguments.length, args = Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {
          args[_key3 - 1] = arguments[_key3];
        }

        _this2.emit.apply(_this2, [event].concat(args));
      });

      this.modules.external.forEach(function (m) {
        if (m.init) m.init(_this2);
      });
    }

    // append api
    var storeApi = ['getResource', 'addResource', 'addResources', 'addResourceBundle', 'removeResourceBundle', 'hasResourceBundle', 'getResourceBundle'];
    storeApi.forEach(function (fcName) {
      _this2[fcName] = function () {
        var _store;

        return (_store = _this2.store)[fcName].apply(_store, arguments);
      };
    });

    var load = function load() {
      _this2.changeLanguage(_this2.options.lng, function (err, t) {
        _this2.isInitialized = true;
        _this2.logger.log('initialized', _this2.options);
        _this2.emit('initialized', _this2.options);

        callback(err, t);
      });
    };

    if (this.options.resources || !this.options.initImmediate) {
      load();
    } else {
      setTimeout(load, 0);
    }

    return this;
  };

  /* eslint consistent-return: 0 */


  I18n.prototype.loadResources = function loadResources() {
    var _this3 = this;

    var callback = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : noop;

    if (!this.options.resources) {
      if (this.language && this.language.toLowerCase() === 'cimode') return callback(); // avoid loading resources for cimode

      var toLoad = [];

      var append = function append(lng) {
        if (!lng) return;
        var lngs = _this3.services.languageUtils.toResolveHierarchy(lng);
        lngs.forEach(function (l) {
          if (toLoad.indexOf(l) < 0) toLoad.push(l);
        });
      };

      if (!this.language) {
        // at least load fallbacks in this case
        var fallbacks = this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);
        fallbacks.forEach(function (l) {
          return append(l);
        });
      } else {
        append(this.language);
      }

      if (this.options.preload) {
        this.options.preload.forEach(function (l) {
          return append(l);
        });
      }

      this.services.cacheConnector.load(toLoad, this.options.ns, function () {
        _this3.services.backendConnector.load(toLoad, _this3.options.ns, callback);
      });
    } else {
      callback(null);
    }
  };

  I18n.prototype.reloadResources = function reloadResources(lngs, ns) {
    if (!lngs) lngs = this.languages;
    if (!ns) ns = this.options.ns;
    this.services.backendConnector.reload(lngs, ns);
  };

  I18n.prototype.use = function use(module) {
    if (module.type === 'backend') {
      this.modules.backend = module;
    }

    if (module.type === 'cache') {
      this.modules.cache = module;
    }

    if (module.type === 'logger' || module.log && module.warn && module.error) {
      this.modules.logger = module;
    }

    if (module.type === 'languageDetector') {
      this.modules.languageDetector = module;
    }

    if (module.type === 'postProcessor') {
      postProcessor.addPostProcessor(module);
    }

    if (module.type === '3rdParty') {
      this.modules.external.push(module);
    }

    return this;
  };

  I18n.prototype.changeLanguage = function changeLanguage(lng, callback) {
    var _this4 = this;

    var done = function done(err, l) {
      _this4.translator.changeLanguage(l);

      if (l) {
        _this4.emit('languageChanged', l);
        _this4.logger.log('languageChanged', l);
      }

      if (callback) callback(err, function () {
        return _this4.t.apply(_this4, arguments);
      });
    };

    var setLng = function setLng(l) {
      if (l) {
        _this4.language = l;
        _this4.languages = _this4.services.languageUtils.toResolveHierarchy(l);
        if (!_this4.translator.language) _this4.translator.changeLanguage(l);

        if (_this4.services.languageDetector) _this4.services.languageDetector.cacheUserLanguage(l);
      }

      _this4.loadResources(function (err) {
        done(err, l);
      });
    };

    if (!lng && this.services.languageDetector && !this.services.languageDetector.async) {
      setLng(this.services.languageDetector.detect());
    } else if (!lng && this.services.languageDetector && this.services.languageDetector.async) {
      this.services.languageDetector.detect(setLng);
    } else {
      setLng(lng);
    }
  };

  I18n.prototype.getFixedT = function getFixedT(lng, ns) {
    var _this5 = this;

    var fixedT = function fixedT(key, opts) {
      for (var _len4 = arguments.length, rest = Array(_len4 > 2 ? _len4 - 2 : 0), _key4 = 2; _key4 < _len4; _key4++) {
        rest[_key4 - 2] = arguments[_key4];
      }

      var options = i18next__extends({}, opts);
      if ((typeof opts === 'undefined' ? 'undefined' : i18next__typeof(opts)) !== 'object') {
        options = _this5.options.overloadTranslationOptionHandler([key, opts].concat(rest));
      }

      options.lng = options.lng || fixedT.lng;
      options.lngs = options.lngs || fixedT.lngs;
      options.ns = options.ns || fixedT.ns;
      return _this5.t(key, options);
    };
    if (typeof lng === 'string') {
      fixedT.lng = lng;
    } else {
      fixedT.lngs = lng;
    }
    fixedT.ns = ns;
    return fixedT;
  };

  I18n.prototype.t = function t() {
    var _translator;

    return this.translator && (_translator = this.translator).translate.apply(_translator, arguments);
  };

  I18n.prototype.exists = function exists() {
    var _translator2;

    return this.translator && (_translator2 = this.translator).exists.apply(_translator2, arguments);
  };

  I18n.prototype.setDefaultNamespace = function setDefaultNamespace(ns) {
    this.options.defaultNS = ns;
  };

  I18n.prototype.loadNamespaces = function loadNamespaces(ns, callback) {
    var _this6 = this;

    if (!this.options.ns) return callback && callback();
    if (typeof ns === 'string') ns = [ns];

    ns.forEach(function (n) {
      if (_this6.options.ns.indexOf(n) < 0) _this6.options.ns.push(n);
    });

    this.loadResources(callback);
  };

  I18n.prototype.loadLanguages = function loadLanguages(lngs, callback) {
    if (typeof lngs === 'string') lngs = [lngs];
    var preloaded = this.options.preload || [];

    var newLngs = lngs.filter(function (lng) {
      return preloaded.indexOf(lng) < 0;
    });
    // Exit early if all given languages are already preloaded
    if (!newLngs.length) return callback();

    this.options.preload = preloaded.concat(newLngs);
    this.loadResources(callback);
  };

  I18n.prototype.dir = function dir(lng) {
    if (!lng) lng = this.languages && this.languages.length > 0 ? this.languages[0] : this.language;
    if (!lng) return 'rtl';

    var rtlLngs = ['ar', 'shu', 'sqr', 'ssh', 'xaa', 'yhd', 'yud', 'aao', 'abh', 'abv', 'acm', 'acq', 'acw', 'acx', 'acy', 'adf', 'ads', 'aeb', 'aec', 'afb', 'ajp', 'apc', 'apd', 'arb', 'arq', 'ars', 'ary', 'arz', 'auz', 'avl', 'ayh', 'ayl', 'ayn', 'ayp', 'bbz', 'pga', 'he', 'iw', 'ps', 'pbt', 'pbu', 'pst', 'prp', 'prd', 'ur', 'ydd', 'yds', 'yih', 'ji', 'yi', 'hbo', 'men', 'xmn', 'fa', 'jpr', 'peo', 'pes', 'prs', 'dv', 'sam'];

    return rtlLngs.indexOf(this.services.languageUtils.getLanguagePartFromCode(lng)) >= 0 ? 'rtl' : 'ltr';
  };

  /* eslint class-methods-use-this: 0 */


  I18n.prototype.createInstance = function createInstance() {
    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    var callback = arguments[1];

    return new I18n(options, callback);
  };

  I18n.prototype.cloneInstance = function cloneInstance() {
    var _this7 = this;

    var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    var callback = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;

    var mergedOptions = i18next__extends({}, this.options, options, { isClone: true });
    var clone = new I18n(mergedOptions);
    var membersToCopy = ['store', 'services', 'language'];
    membersToCopy.forEach(function (m) {
      clone[m] = _this7[m];
    });
    clone.translator = new es_Translator(clone.services, clone.options);
    clone.translator.on('*', function (event) {
      for (var _len5 = arguments.length, args = Array(_len5 > 1 ? _len5 - 1 : 0), _key5 = 1; _key5 < _len5; _key5++) {
        args[_key5 - 1] = arguments[_key5];
      }

      clone.emit.apply(clone, [event].concat(args));
    });
    clone.init(mergedOptions, callback);
    clone.translator.options = clone.options; // sync options

    return clone;
  };

  return I18n;
}(es_EventEmitter);

/* harmony default export */ var i18next = (new i18next_I18n());
// CONCATENATED MODULE: ./node_modules/i18next/dist/es/index.js
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "changeLanguage", function() { return changeLanguage; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "cloneInstance", function() { return es_cloneInstance; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "createInstance", function() { return createInstance; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "dir", function() { return dir; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "exists", function() { return exists; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "getFixedT", function() { return getFixedT; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "init", function() { return es_init; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "loadLanguages", function() { return loadLanguages; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "loadNamespaces", function() { return loadNamespaces; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "loadResources", function() { return loadResources; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "off", function() { return off; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "on", function() { return on; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "setDefaultNamespace", function() { return setDefaultNamespace; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "t", function() { return t; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "use", function() { return es_use; });


/* harmony default export */ var es = __webpack_exports__["default"] = (i18next);

var changeLanguage = i18next.changeLanguage.bind(i18next);
var es_cloneInstance = i18next.cloneInstance.bind(i18next);
var createInstance = i18next.createInstance.bind(i18next);
var dir = i18next.dir.bind(i18next);
var exists = i18next.exists.bind(i18next);
var getFixedT = i18next.getFixedT.bind(i18next);
var es_init = i18next.init.bind(i18next);
var loadLanguages = i18next.loadLanguages.bind(i18next);
var loadNamespaces = i18next.loadNamespaces.bind(i18next);
var loadResources = i18next.loadResources.bind(i18next);
var off = i18next.off.bind(i18next);
var on = i18next.on.bind(i18next);
var setDefaultNamespace = i18next.setDefaultNamespace.bind(i18next);
var t = i18next.t.bind(i18next);
var es_use = i18next.use.bind(i18next);

/***/ }),
/* 290 */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_RESULT__;/*!
 * js-logger - http://github.com/jonnyreeves/js-logger
 * Jonny Reeves, http://jonnyreeves.co.uk/
 * js-logger may be freely distributed under the MIT license.
 */
(function (global) {
	"use strict";

	// Top level module for the global, static logger instance.
	var Logger = { };

	// For those that are at home that are keeping score.
	Logger.VERSION = "1.4.1";

	// Function which handles all incoming log messages.
	var logHandler;

	// Map of ContextualLogger instances by name; used by Logger.get() to return the same named instance.
	var contextualLoggersByNameMap = {};

	// Polyfill for ES5's Function.bind.
	var bind = function(scope, func) {
		return function() {
			return func.apply(scope, arguments);
		};
	};

	// Super exciting object merger-matron 9000 adding another 100 bytes to your download.
	var merge = function () {
		var args = arguments, target = args[0], key, i;
		for (i = 1; i < args.length; i++) {
			for (key in args[i]) {
				if (!(key in target) && args[i].hasOwnProperty(key)) {
					target[key] = args[i][key];
				}
			}
		}
		return target;
	};

	// Helper to define a logging level object; helps with optimisation.
	var defineLogLevel = function(value, name) {
		return { value: value, name: name };
	};

	// Predefined logging levels.
	Logger.DEBUG = defineLogLevel(1, 'DEBUG');
	Logger.INFO = defineLogLevel(2, 'INFO');
	Logger.TIME = defineLogLevel(3, 'TIME');
	Logger.WARN = defineLogLevel(4, 'WARN');
	Logger.ERROR = defineLogLevel(8, 'ERROR');
	Logger.OFF = defineLogLevel(99, 'OFF');

	// Inner class which performs the bulk of the work; ContextualLogger instances can be configured independently
	// of each other.
	var ContextualLogger = function(defaultContext) {
		this.context = defaultContext;
		this.setLevel(defaultContext.filterLevel);
		this.log = this.info;  // Convenience alias.
	};

	ContextualLogger.prototype = {
		// Changes the current logging level for the logging instance.
		setLevel: function (newLevel) {
			// Ensure the supplied Level object looks valid.
			if (newLevel && "value" in newLevel) {
				this.context.filterLevel = newLevel;
			}
		},
		
		// Gets the current logging level for the logging instance
		getLevel: function () {
			return this.context.filterLevel;
		},

		// Is the logger configured to output messages at the supplied level?
		enabledFor: function (lvl) {
			var filterLevel = this.context.filterLevel;
			return lvl.value >= filterLevel.value;
		},

		debug: function () {
			this.invoke(Logger.DEBUG, arguments);
		},

		info: function () {
			this.invoke(Logger.INFO, arguments);
		},

		warn: function () {
			this.invoke(Logger.WARN, arguments);
		},

		error: function () {
			this.invoke(Logger.ERROR, arguments);
		},

		time: function (label) {
			if (typeof label === 'string' && label.length > 0) {
				this.invoke(Logger.TIME, [ label, 'start' ]);
			}
		},

		timeEnd: function (label) {
			if (typeof label === 'string' && label.length > 0) {
				this.invoke(Logger.TIME, [ label, 'end' ]);
			}
		},

		// Invokes the logger callback if it's not being filtered.
		invoke: function (level, msgArgs) {
			if (logHandler && this.enabledFor(level)) {
				logHandler(msgArgs, merge({ level: level }, this.context));
			}
		}
	};

	// Protected instance which all calls to the to level `Logger` module will be routed through.
	var globalLogger = new ContextualLogger({ filterLevel: Logger.OFF });

	// Configure the global Logger instance.
	(function() {
		// Shortcut for optimisers.
		var L = Logger;

		L.enabledFor = bind(globalLogger, globalLogger.enabledFor);
		L.debug = bind(globalLogger, globalLogger.debug);
		L.time = bind(globalLogger, globalLogger.time);
		L.timeEnd = bind(globalLogger, globalLogger.timeEnd);
		L.info = bind(globalLogger, globalLogger.info);
		L.warn = bind(globalLogger, globalLogger.warn);
		L.error = bind(globalLogger, globalLogger.error);

		// Don't forget the convenience alias!
		L.log = L.info;
	}());

	// Set the global logging handler.  The supplied function should expect two arguments, the first being an arguments
	// object with the supplied log messages and the second being a context object which contains a hash of stateful
	// parameters which the logging function can consume.
	Logger.setHandler = function (func) {
		logHandler = func;
	};

	// Sets the global logging filter level which applies to *all* previously registered, and future Logger instances.
	// (note that named loggers (retrieved via `Logger.get`) can be configured independently if required).
	Logger.setLevel = function(level) {
		// Set the globalLogger's level.
		globalLogger.setLevel(level);

		// Apply this level to all registered contextual loggers.
		for (var key in contextualLoggersByNameMap) {
			if (contextualLoggersByNameMap.hasOwnProperty(key)) {
				contextualLoggersByNameMap[key].setLevel(level);
			}
		}
	};

	// Gets the global logging filter level
	Logger.getLevel = function() {
		return globalLogger.getLevel();
	};

	// Retrieve a ContextualLogger instance.  Note that named loggers automatically inherit the global logger's level,
	// default context and log handler.
	Logger.get = function (name) {
		// All logger instances are cached so they can be configured ahead of use.
		return contextualLoggersByNameMap[name] ||
			(contextualLoggersByNameMap[name] = new ContextualLogger(merge({ name: name }, globalLogger.context)));
	};

	// CreateDefaultHandler returns a handler function which can be passed to `Logger.setHandler()` which will
	// write to the window's console object (if present); the optional options object can be used to customise the
	// formatter used to format each log message.
	Logger.createDefaultHandler = function (options) {
		options = options || {};

		options.formatter = options.formatter || function defaultMessageFormatter(messages, context) {
			// Prepend the logger's name to the log message for easy identification.
			if (context.name) {
				messages.unshift("[" + context.name + "]");
			}
		};

		// Map of timestamps by timer labels used to track `#time` and `#timeEnd()` invocations in environments
		// that don't offer a native console method.
		var timerStartTimeByLabelMap = {};

		// Support for IE8+ (and other, slightly more sane environments)
		var invokeConsoleMethod = function (hdlr, messages) {
			Function.prototype.apply.call(hdlr, console, messages);
		};

		// Check for the presence of a logger.
		if (typeof console === "undefined") {
			return function () { /* no console */ };
		}

		return function(messages, context) {
			// Convert arguments object to Array.
			messages = Array.prototype.slice.call(messages);

			var hdlr = console.log;
			var timerLabel;

			if (context.level === Logger.TIME) {
				timerLabel = (context.name ? '[' + context.name + '] ' : '') + messages[0];

				if (messages[1] === 'start') {
					if (console.time) {
						console.time(timerLabel);
					}
					else {
						timerStartTimeByLabelMap[timerLabel] = new Date().getTime();
					}
				}
				else {
					if (console.timeEnd) {
						console.timeEnd(timerLabel);
					}
					else {
						invokeConsoleMethod(hdlr, [ timerLabel + ': ' +
							(new Date().getTime() - timerStartTimeByLabelMap[timerLabel]) + 'ms' ]);
					}
				}
			}
			else {
				// Delegate through to custom warn/error loggers if present on the console.
				if (context.level === Logger.WARN && console.warn) {
					hdlr = console.warn;
				} else if (context.level === Logger.ERROR && console.error) {
					hdlr = console.error;
				} else if (context.level === Logger.INFO && console.info) {
					hdlr = console.info;
				} else if (context.level === Logger.DEBUG && console.debug) {
					hdlr = console.debug;
				}

				options.formatter(messages, context);
				invokeConsoleMethod(hdlr, messages);
			}
		};
	};

	// Configure and example a Default implementation which writes to the `window.console` (if present).  The
	// `options` hash can be used to configure the default logLevel and provide a custom message formatter.
	Logger.useDefaults = function(options) {
		Logger.setLevel(options && options.defaultLevel || Logger.DEBUG);
		Logger.setHandler(Logger.createDefaultHandler(options));
	};

	// Export to popular environments boilerplate.
	if (true) {
		!(__WEBPACK_AMD_DEFINE_FACTORY__ = (Logger),
				__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?
				(__WEBPACK_AMD_DEFINE_FACTORY__.call(exports, __webpack_require__, exports, module)) :
				__WEBPACK_AMD_DEFINE_FACTORY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
	}
	else if (typeof module !== 'undefined' && module.exports) {
		module.exports = Logger;
	}
	else {
		Logger._prevLogger = global.Logger;

		Logger.noConflict = function () {
			global.Logger = Logger._prevLogger;
			return Logger;
		};

		global.Logger = Logger;
	}
}(this));


/***/ }),
/* 291 */
/***/ (function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__(55);
if(typeof content === 'string') content = [[module.i, content, '']];
// Prepare cssTransformation
var transform;

var options = {"hmr":true}
options.transform = transform
// add the styles to the DOM
var update = __webpack_require__(22)(content, options);
if(content.locals) module.exports = content.locals;
// Hot Module Replacement
if(true) {
	// When the styles change, update the <style> tags
	if(!content.locals) {
		module.hot.accept(55, function() {
			var newContent = __webpack_require__(55);
			if(typeof newContent === 'string') newContent = [[module.i, newContent, '']];
			update(newContent);
		});
	}
	// When the module is disposed, remove the <style> tags
	module.hot.dispose(function() { update(); });
}

/***/ }),
/* 292 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__.p + "674f50d287a8c48dc19ba404d20fe713.eot";

/***/ }),
/* 293 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__.p + "674f50d287a8c48dc19ba404d20fe713.eot";

/***/ }),
/* 294 */
/***/ (function(module, exports) {

module.exports = "data:application/font-woff;base64,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"

/***/ }),
/* 295 */
/***/ (function(module, exports) {

module.exports = "data:application/font-woff;base64,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"

/***/ }),
/* 296 */
/***/ (function(module, exports, __webpack_require__) {

module.exports = __webpack_require__.p + "b06871f281fee6b241d60582ae9369b9.ttf";

/***/ }),
/* 297 */
/***/ (function(module, exports) {

module.exports = "data:image/svg+xml;base64,bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArICI5MTJlYzY2ZDc1NzJmZjgyMTc0OTMxOTM5NjQ3MGJkZS5zdmciOw=="

/***/ }),
/* 298 */
/***/ (function(module, exports) {


/**
 * When source maps are enabled, `style-loader` uses a link element with a data-uri to
 * embed the css on the page. This breaks all relative urls because now they are relative to a
 * bundle instead of the current page.
 *
 * One solution is to only use full urls, but that may be impossible.
 *
 * Instead, this function "fixes" the relative urls to be absolute according to the current page location.
 *
 * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.
 *
 */

module.exports = function (css) {
  // get current location
  var location = typeof window !== "undefined" && window.location;

  if (!location) {
    throw new Error("fixUrls requires window.location");
  }

	// blank or null?
	if (!css || typeof css !== "string") {
	  return css;
  }

  var baseUrl = location.protocol + "//" + location.host;
  var currentDir = baseUrl + location.pathname.replace(/\/[^\/]*$/, "/");

	// convert each url(...)
	/*
	This regular expression is just a way to recursively match brackets within
	a string.

	 /url\s*\(  = Match on the word "url" with any whitespace after it and then a parens
	   (  = Start a capturing group
	     (?:  = Start a non-capturing group
	         [^)(]  = Match anything that isn't a parentheses
	         |  = OR
	         \(  = Match a start parentheses
	             (?:  = Start another non-capturing groups
	                 [^)(]+  = Match anything that isn't a parentheses
	                 |  = OR
	                 \(  = Match a start parentheses
	                     [^)(]*  = Match anything that isn't a parentheses
	                 \)  = Match a end parentheses
	             )  = End Group
              *\) = Match anything and then a close parens
          )  = Close non-capturing group
          *  = Match anything
       )  = Close capturing group
	 \)  = Match a close parens

	 /gi  = Get all matches, not the first.  Be case insensitive.
	 */
	var fixedCss = css.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi, function(fullMatch, origUrl) {
		// strip quotes (if they exist)
		var unquotedOrigUrl = origUrl
			.trim()
			.replace(/^"(.*)"$/, function(o, $1){ return $1; })
			.replace(/^'(.*)'$/, function(o, $1){ return $1; });

		// already a full url? no change
		if (/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(unquotedOrigUrl)) {
		  return fullMatch;
		}

		// convert the url to a full url
		var newUrl;

		if (unquotedOrigUrl.indexOf("//") === 0) {
		  	//TODO: should we add protocol?
			newUrl = unquotedOrigUrl;
		} else if (unquotedOrigUrl.indexOf("/") === 0) {
			// path should be relative to the base url
			newUrl = baseUrl + unquotedOrigUrl; // already starts with '/'
		} else {
			// path should be relative to current directory
			newUrl = currentDir + unquotedOrigUrl.replace(/^\.\//, ""); // Strip leading './'
		}

		// send back the fixed url(...)
		return "url(" + JSON.stringify(newUrl) + ")";
	});

	// send back the fixed css
	return fixedCss;
};


/***/ }),
/* 299 */
/***/ (function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__(56);
if(typeof content === 'string') content = [[module.i, content, '']];
// Prepare cssTransformation
var transform;

var options = {"hmr":true}
options.transform = transform
// add the styles to the DOM
var update = __webpack_require__(22)(content, options);
if(content.locals) module.exports = content.locals;
// Hot Module Replacement
if(true) {
	// When the styles change, update the <style> tags
	if(!content.locals) {
		module.hot.accept(56, function() {
			var newContent = __webpack_require__(56);
			if(typeof newContent === 'string') newContent = [[module.i, newContent, '']];
			update(newContent);
		});
	}
	// When the module is disposed, remove the <style> tags
	module.hot.dispose(function() { update(); });
}

/***/ }),
/* 300 */
/***/ (function(module, exports) {

module.exports = "data:image/gif;base64,R0lGODlhEAAQAPcAAAAAAIAAAACAAICAAAAAgIAAgACAgMDAwMDcwKbK8P///6Wlpf/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////78KCgpICAgP8AAAD/AP//AAAA//8A/wD//////yH5BAEAAP4ALAAAAAAQABAAAAgpAP0JFHhvoMGDCBMiLKiwocOBDB9KXDixosGIFidizPhwI8eGHj8KDAgAOw=="

/***/ }),
/* 301 */
/***/ (function(module, exports) {

module.exports = "data:image/gif;base64,R0lGODlhEAAQAPcAAAAAAIAAAACAAICAAAAAgIAAgACAgMDAwMDcwKbK8P///6Wlpf/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////78KCgpICAgP8AAAD/AP//AAAA//8A/wD//////yH5BAEAAP4ALAAAAAAQABAAAAgnAP0JHEjwHsGDCBMq9GdwocOHDR9KRBhxokWGFzNWzAiRo8WNGQMCADs="

/***/ }),
/* 302 */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*! jQuery UI - v1.12.1 - 2017-02-23
* http://jqueryui.com
* Includes: widget.js, position.js, keycode.js, scroll-parent.js, unique-id.js, effect.js, effects/effect-blind.js
* Copyright jQuery Foundation and other contributors; Licensed MIT */

(function( factory ) {
	if ( true ) {

		// AMD. Register as an anonymous module.
		!(__WEBPACK_AMD_DEFINE_ARRAY__ = [ __webpack_require__(27) ], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),
				__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?
				(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
	} else {

		// Browser globals
		factory( jQuery );
	}
}(function( $ ) {

$.ui = $.ui || {};

var version = $.ui.version = "1.12.1";


/*!
 * jQuery UI Widget 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

//>>label: Widget
//>>group: Core
//>>description: Provides a factory for creating stateful widgets with a common API.
//>>docs: http://api.jqueryui.com/jQuery.widget/
//>>demos: http://jqueryui.com/widget/



var widgetUuid = 0;
var widgetSlice = Array.prototype.slice;

$.cleanData = $.cleanData || ( function( orig ) {
	return function( elems ) {
		var events, elem, i;
		for ( i = 0; ( elem = elems[ i ] ) != null; i++ ) {
			try {

				// Only trigger remove when necessary to save time
				events = $._data( elem, "events" );
				if ( events && events.remove ) {
					$( elem ).triggerHandler( "remove" );
				}

			// Http://bugs.jquery.com/ticket/8235
			} catch ( e ) {}
		}
		orig( elems );
	};
} )( $.cleanData );

$.widget = $.widget || function( name, base, prototype ) {
	var existingConstructor, constructor, basePrototype;

	// ProxiedPrototype allows the provided prototype to remain unmodified
	// so that it can be used as a mixin for multiple widgets (#8876)
	var proxiedPrototype = {};

	var namespace = name.split( "." )[ 0 ];
	name = name.split( "." )[ 1 ];
	var fullName = namespace + "-" + name;

	if ( !prototype ) {
		prototype = base;
		base = $.Widget;
	}

	if ( $.isArray( prototype ) ) {
		prototype = $.extend.apply( null, [ {} ].concat( prototype ) );
	}

	// Create selector for plugin
	$.expr[ ":" ][ fullName.toLowerCase() ] = function( elem ) {
		return !!$.data( elem, fullName );
	};

	$[ namespace ] = $[ namespace ] || {};
	existingConstructor = $[ namespace ][ name ];
	constructor = $[ namespace ][ name ] = function( options, element ) {

		// Allow instantiation without "new" keyword
		if ( !this._createWidget ) {
			return new constructor( options, element );
		}

		// Allow instantiation without initializing for simple inheritance
		// must use "new" keyword (the code above always passes args)
		if ( arguments.length ) {
			this._createWidget( options, element );
		}
	};

	// Extend with the existing constructor to carry over any static properties
	$.extend( constructor, existingConstructor, {
		version: prototype.version,

		// Copy the object used to create the prototype in case we need to
		// redefine the widget later
		_proto: $.extend( {}, prototype ),

		// Track widgets that inherit from this widget in case this widget is
		// redefined after a widget inherits from it
		_childConstructors: []
	} );

	basePrototype = new base();

	// We need to make the options hash a property directly on the new instance
	// otherwise we'll modify the options hash on the prototype that we're
	// inheriting from
	basePrototype.options = $.widget.extend( {}, basePrototype.options );
	$.each( prototype, function( prop, value ) {
		if ( !$.isFunction( value ) ) {
			proxiedPrototype[ prop ] = value;
			return;
		}
		proxiedPrototype[ prop ] = ( function() {
			function _super() {
				return base.prototype[ prop ].apply( this, arguments );
			}

			function _superApply( args ) {
				return base.prototype[ prop ].apply( this, args );
			}

			return function() {
				var __super = this._super;
				var __superApply = this._superApply;
				var returnValue;

				this._super = _super;
				this._superApply = _superApply;

				returnValue = value.apply( this, arguments );

				this._super = __super;
				this._superApply = __superApply;

				return returnValue;
			};
		} )();
	} );
	constructor.prototype = $.widget.extend( basePrototype, {

		// TODO: remove support for widgetEventPrefix
		// always use the name + a colon as the prefix, e.g., draggable:start
		// don't prefix for widgets that aren't DOM-based
		widgetEventPrefix: existingConstructor ? ( basePrototype.widgetEventPrefix || name ) : name
	}, proxiedPrototype, {
		constructor: constructor,
		namespace: namespace,
		widgetName: name,
		widgetFullName: fullName
	} );

	// If this widget is being redefined then we need to find all widgets that
	// are inheriting from it and redefine all of them so that they inherit from
	// the new version of this widget. We're essentially trying to replace one
	// level in the prototype chain.
	if ( existingConstructor ) {
		$.each( existingConstructor._childConstructors, function( i, child ) {
			var childPrototype = child.prototype;

			// Redefine the child widget using the same prototype that was
			// originally used, but inherit from the new version of the base
			$.widget( childPrototype.namespace + "." + childPrototype.widgetName, constructor,
				child._proto );
		} );

		// Remove the list of existing child constructors from the old constructor
		// so the old child constructors can be garbage collected
		delete existingConstructor._childConstructors;
	} else {
		base._childConstructors.push( constructor );
	}

	$.widget.bridge( name, constructor );

	return constructor;
};

$.widget.extend = function( target ) {
	var input = widgetSlice.call( arguments, 1 );
	var inputIndex = 0;
	var inputLength = input.length;
	var key;
	var value;

	for ( ; inputIndex < inputLength; inputIndex++ ) {
		for ( key in input[ inputIndex ] ) {
			value = input[ inputIndex ][ key ];
			if ( input[ inputIndex ].hasOwnProperty( key ) && value !== undefined ) {

				// Clone objects
				if ( $.isPlainObject( value ) ) {
					target[ key ] = $.isPlainObject( target[ key ] ) ?
						$.widget.extend( {}, target[ key ], value ) :

						// Don't extend strings, arrays, etc. with objects
						$.widget.extend( {}, value );

				// Copy everything else by reference
				} else {
					target[ key ] = value;
				}
			}
		}
	}
	return target;
};

$.widget.bridge = function( name, object ) {
	var fullName = object.prototype.widgetFullName || name;
	$.fn[ name ] = function( options ) {
		var isMethodCall = typeof options === "string";
		var args = widgetSlice.call( arguments, 1 );
		var returnValue = this;

		if ( isMethodCall ) {

			// If this is an empty collection, we need to have the instance method
			// return undefined instead of the jQuery instance
			if ( !this.length && options === "instance" ) {
				returnValue = undefined;
			} else {
				this.each( function() {
					var methodValue;
					var instance = $.data( this, fullName );

					if ( options === "instance" ) {
						returnValue = instance;
						return false;
					}

					if ( !instance ) {
						return $.error( "cannot call methods on " + name +
							" prior to initialization; " +
							"attempted to call method '" + options + "'" );
					}

					if ( !$.isFunction( instance[ options ] ) || options.charAt( 0 ) === "_" ) {
						return $.error( "no such method '" + options + "' for " + name +
							" widget instance" );
					}

					methodValue = instance[ options ].apply( instance, args );

					if ( methodValue !== instance && methodValue !== undefined ) {
						returnValue = methodValue && methodValue.jquery ?
							returnValue.pushStack( methodValue.get() ) :
							methodValue;
						return false;
					}
				} );
			}
		} else {

			// Allow multiple hashes to be passed on init
			if ( args.length ) {
				options = $.widget.extend.apply( null, [ options ].concat( args ) );
			}

			this.each( function() {
				var instance = $.data( this, fullName );
				if ( instance ) {
					instance.option( options || {} );
					if ( instance._init ) {
						instance._init();
					}
				} else {
					$.data( this, fullName, new object( options, this ) );
				}
			} );
		}

		return returnValue;
	};
};

$.Widget = $.Widget || function( /* options, element */ ) {};
$.Widget._childConstructors = [];

$.Widget.prototype = {
	widgetName: "widget",
	widgetEventPrefix: "",
	defaultElement: "<div>",

	options: {
		classes: {},
		disabled: false,

		// Callbacks
		create: null
	},

	_createWidget: function( options, element ) {
		element = $( element || this.defaultElement || this )[ 0 ];
		this.element = $( element );
		this.uuid = widgetUuid++;
		this.eventNamespace = "." + this.widgetName + this.uuid;

		this.bindings = $();
		this.hoverable = $();
		this.focusable = $();
		this.classesElementLookup = {};

		if ( element !== this ) {
			$.data( element, this.widgetFullName, this );
			this._on( true, this.element, {
				remove: function( event ) {
					if ( event.target === element ) {
						this.destroy();
					}
				}
			} );
			this.document = $( element.style ?

				// Element within the document
				element.ownerDocument :

				// Element is window or document
				element.document || element );
			this.window = $( this.document[ 0 ].defaultView || this.document[ 0 ].parentWindow );
		}

		this.options = $.widget.extend( {},
			this.options,
			this._getCreateOptions(),
			options );

		this._create();

		if ( this.options.disabled ) {
			this._setOptionDisabled( this.options.disabled );
		}

		this._trigger( "create", null, this._getCreateEventData() );
		this._init();
	},

	_getCreateOptions: function() {
		return {};
	},

	_getCreateEventData: $.noop,

	_create: $.noop,

	_init: $.noop,

	destroy: function() {
		var that = this;

		this._destroy();
		$.each( this.classesElementLookup, function( key, value ) {
			that._removeClass( value, key );
		} );

		// We can probably remove the unbind calls in 2.0
		// all event bindings should go through this._on()
		this.element
			.off( this.eventNamespace )
			.removeData( this.widgetFullName );
		this.widget()
			.off( this.eventNamespace )
			.removeAttr( "aria-disabled" );

		// Clean up events and states
		this.bindings.off( this.eventNamespace );
	},

	_destroy: $.noop,

	widget: function() {
		return this.element;
	},

	option: function( key, value ) {
		var options = key;
		var parts;
		var curOption;
		var i;

		if ( arguments.length === 0 ) {

			// Don't return a reference to the internal hash
			return $.widget.extend( {}, this.options );
		}

		if ( typeof key === "string" ) {

			// Handle nested keys, e.g., "foo.bar" => { foo: { bar: ___ } }
			options = {};
			parts = key.split( "." );
			key = parts.shift();
			if ( parts.length ) {
				curOption = options[ key ] = $.widget.extend( {}, this.options[ key ] );
				for ( i = 0; i < parts.length - 1; i++ ) {
					curOption[ parts[ i ] ] = curOption[ parts[ i ] ] || {};
					curOption = curOption[ parts[ i ] ];
				}
				key = parts.pop();
				if ( arguments.length === 1 ) {
					return curOption[ key ] === undefined ? null : curOption[ key ];
				}
				curOption[ key ] = value;
			} else {
				if ( arguments.length === 1 ) {
					return this.options[ key ] === undefined ? null : this.options[ key ];
				}
				options[ key ] = value;
			}
		}

		this._setOptions( options );

		return this;
	},

	_setOptions: function( options ) {
		var key;

		for ( key in options ) {
			this._setOption( key, options[ key ] );
		}

		return this;
	},

	_setOption: function( key, value ) {
		if ( key === "classes" ) {
			this._setOptionClasses( value );
		}

		this.options[ key ] = value;

		if ( key === "disabled" ) {
			this._setOptionDisabled( value );
		}

		return this;
	},

	_setOptionClasses: function( value ) {
		var classKey, elements, currentElements;

		for ( classKey in value ) {
			currentElements = this.classesElementLookup[ classKey ];
			if ( value[ classKey ] === this.options.classes[ classKey ] ||
					!currentElements ||
					!currentElements.length ) {
				continue;
			}

			// We are doing this to create a new jQuery object because the _removeClass() call
			// on the next line is going to destroy the reference to the current elements being
			// tracked. We need to save a copy of this collection so that we can add the new classes
			// below.
			elements = $( currentElements.get() );
			this._removeClass( currentElements, classKey );

			// We don't use _addClass() here, because that uses this.options.classes
			// for generating the string of classes. We want to use the value passed in from
			// _setOption(), this is the new value of the classes option which was passed to
			// _setOption(). We pass this value directly to _classes().
			elements.addClass( this._classes( {
				element: elements,
				keys: classKey,
				classes: value,
				add: true
			} ) );
		}
	},

	_setOptionDisabled: function( value ) {
		this._toggleClass( this.widget(), this.widgetFullName + "-disabled", null, !!value );

		// If the widget is becoming disabled, then nothing is interactive
		if ( value ) {
			this._removeClass( this.hoverable, null, "ui-state-hover" );
			this._removeClass( this.focusable, null, "ui-state-focus" );
		}
	},

	enable: function() {
		return this._setOptions( { disabled: false } );
	},

	disable: function() {
		return this._setOptions( { disabled: true } );
	},

	_classes: function( options ) {
		var full = [];
		var that = this;

		options = $.extend( {
			element: this.element,
			classes: this.options.classes || {}
		}, options );

		function processClassString( classes, checkOption ) {
			var current, i;
			for ( i = 0; i < classes.length; i++ ) {
				current = that.classesElementLookup[ classes[ i ] ] || $();
				if ( options.add ) {
					current = $( $.unique( current.get().concat( options.element.get() ) ) );
				} else {
					current = $( current.not( options.element ).get() );
				}
				that.classesElementLookup[ classes[ i ] ] = current;
				full.push( classes[ i ] );
				if ( checkOption && options.classes[ classes[ i ] ] ) {
					full.push( options.classes[ classes[ i ] ] );
				}
			}
		}

		this._on( options.element, {
			"remove": "_untrackClassesElement"
		} );

		if ( options.keys ) {
			processClassString( options.keys.match( /\S+/g ) || [], true );
		}
		if ( options.extra ) {
			processClassString( options.extra.match( /\S+/g ) || [] );
		}

		return full.join( " " );
	},

	_untrackClassesElement: function( event ) {
		var that = this;
		$.each( that.classesElementLookup, function( key, value ) {
			if ( $.inArray( event.target, value ) !== -1 ) {
				that.classesElementLookup[ key ] = $( value.not( event.target ).get() );
			}
		} );
	},

	_removeClass: function( element, keys, extra ) {
		return this._toggleClass( element, keys, extra, false );
	},

	_addClass: function( element, keys, extra ) {
		return this._toggleClass( element, keys, extra, true );
	},

	_toggleClass: function( element, keys, extra, add ) {
		add = ( typeof add === "boolean" ) ? add : extra;
		var shift = ( typeof element === "string" || element === null ),
			options = {
				extra: shift ? keys : extra,
				keys: shift ? element : keys,
				element: shift ? this.element : element,
				add: add
			};
		options.element.toggleClass( this._classes( options ), add );
		return this;
	},

	_on: function( suppressDisabledCheck, element, handlers ) {
		var delegateElement;
		var instance = this;

		// No suppressDisabledCheck flag, shuffle arguments
		if ( typeof suppressDisabledCheck !== "boolean" ) {
			handlers = element;
			element = suppressDisabledCheck;
			suppressDisabledCheck = false;
		}

		// No element argument, shuffle and use this.element
		if ( !handlers ) {
			handlers = element;
			element = this.element;
			delegateElement = this.widget();
		} else {
			element = delegateElement = $( element );
			this.bindings = this.bindings.add( element );
		}

		$.each( handlers, function( event, handler ) {
			function handlerProxy() {

				// Allow widgets to customize the disabled handling
				// - disabled as an array instead of boolean
				// - disabled class as method for disabling individual parts
				if ( !suppressDisabledCheck &&
						( instance.options.disabled === true ||
						$( this ).hasClass( "ui-state-disabled" ) ) ) {
					return;
				}
				return ( typeof handler === "string" ? instance[ handler ] : handler )
					.apply( instance, arguments );
			}

			// Copy the guid so direct unbinding works
			if ( typeof handler !== "string" ) {
				handlerProxy.guid = handler.guid =
					handler.guid || handlerProxy.guid || $.guid++;
			}

			var match = event.match( /^([\w:-]*)\s*(.*)$/ );
			var eventName = match[ 1 ] + instance.eventNamespace;
			var selector = match[ 2 ];

			if ( selector ) {
				delegateElement.on( eventName, selector, handlerProxy );
			} else {
				element.on( eventName, handlerProxy );
			}
		} );
	},

	_off: function( element, eventName ) {
		eventName = ( eventName || "" ).split( " " ).join( this.eventNamespace + " " ) +
			this.eventNamespace;
		element.off( eventName ).off( eventName );

		// Clear the stack to avoid memory leaks (#10056)
		this.bindings = $( this.bindings.not( element ).get() );
		this.focusable = $( this.focusable.not( element ).get() );
		this.hoverable = $( this.hoverable.not( element ).get() );
	},

	_delay: function( handler, delay ) {
		function handlerProxy() {
			return ( typeof handler === "string" ? instance[ handler ] : handler )
				.apply( instance, arguments );
		}
		var instance = this;
		return setTimeout( handlerProxy, delay || 0 );
	},

	_hoverable: function( element ) {
		this.hoverable = this.hoverable.add( element );
		this._on( element, {
			mouseenter: function( event ) {
				this._addClass( $( event.currentTarget ), null, "ui-state-hover" );
			},
			mouseleave: function( event ) {
				this._removeClass( $( event.currentTarget ), null, "ui-state-hover" );
			}
		} );
	},

	_focusable: function( element ) {
		this.focusable = this.focusable.add( element );
		this._on( element, {
			focusin: function( event ) {
				this._addClass( $( event.currentTarget ), null, "ui-state-focus" );
			},
			focusout: function( event ) {
				this._removeClass( $( event.currentTarget ), null, "ui-state-focus" );
			}
		} );
	},

	_trigger: function( type, event, data ) {
		var prop, orig;
		var callback = this.options[ type ];

		data = data || {};
		event = $.Event( event );
		event.type = ( type === this.widgetEventPrefix ?
			type :
			this.widgetEventPrefix + type ).toLowerCase();

		// The original event may come from any element
		// so we need to reset the target on the new event
		event.target = this.element[ 0 ];

		// Copy original event properties over to the new event
		orig = event.originalEvent;
		if ( orig ) {
			for ( prop in orig ) {
				if ( !( prop in event ) ) {
					event[ prop ] = orig[ prop ];
				}
			}
		}

		this.element.trigger( event, data );
		return !( $.isFunction( callback ) &&
			callback.apply( this.element[ 0 ], [ event ].concat( data ) ) === false ||
			event.isDefaultPrevented() );
	}
};

$.each( { show: "fadeIn", hide: "fadeOut" }, function( method, defaultEffect ) {
	$.Widget.prototype[ "_" + method ] = function( element, options, callback ) {
		if ( typeof options === "string" ) {
			options = { effect: options };
		}

		var hasOptions;
		var effectName = !options ?
			method :
			options === true || typeof options === "number" ?
				defaultEffect :
				options.effect || defaultEffect;

		options = options || {};
		if ( typeof options === "number" ) {
			options = { duration: options };
		}

		hasOptions = !$.isEmptyObject( options );
		options.complete = callback;

		if ( options.delay ) {
			element.delay( options.delay );
		}

		if ( hasOptions && $.effects && $.effects.effect[ effectName ] ) {
			element[ method ]( options );
		} else if ( effectName !== method && element[ effectName ] ) {
			element[ effectName ]( options.duration, options.easing, callback );
		} else {
			element.queue( function( next ) {
				$( this )[ method ]();
				if ( callback ) {
					callback.call( element[ 0 ] );
				}
				next();
			} );
		}
	};
} );

var widget = $.widget;


/*!
 * jQuery UI Position 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/position/
 */

//>>label: Position
//>>group: Core
//>>description: Positions elements relative to other elements.
//>>docs: http://api.jqueryui.com/position/
//>>demos: http://jqueryui.com/position/


( function() {
var cachedScrollbarWidth,
	max = Math.max,
	abs = Math.abs,
	rhorizontal = /left|center|right/,
	rvertical = /top|center|bottom/,
	roffset = /[\+\-]\d+(\.[\d]+)?%?/,
	rposition = /^\w+/,
	rpercent = /%$/,
	_position = $.fn.position;

function getOffsets( offsets, width, height ) {
	return [
		parseFloat( offsets[ 0 ] ) * ( rpercent.test( offsets[ 0 ] ) ? width / 100 : 1 ),
		parseFloat( offsets[ 1 ] ) * ( rpercent.test( offsets[ 1 ] ) ? height / 100 : 1 )
	];
}

function parseCss( element, property ) {
	return parseInt( $.css( element, property ), 10 ) || 0;
}

function getDimensions( elem ) {
	var raw = elem[ 0 ];
	if ( raw.nodeType === 9 ) {
		return {
			width: elem.width(),
			height: elem.height(),
			offset: { top: 0, left: 0 }
		};
	}
	if ( $.isWindow( raw ) ) {
		return {
			width: elem.width(),
			height: elem.height(),
			offset: { top: elem.scrollTop(), left: elem.scrollLeft() }
		};
	}
	if ( raw.preventDefault ) {
		return {
			width: 0,
			height: 0,
			offset: { top: raw.pageY, left: raw.pageX }
		};
	}
	return {
		width: elem.outerWidth(),
		height: elem.outerHeight(),
		offset: elem.offset()
	};
}

$.position = $.position || {
	scrollbarWidth: function() {
		if ( cachedScrollbarWidth !== undefined ) {
			return cachedScrollbarWidth;
		}
		var w1, w2,
			div = $( "<div " +
				"style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'>" +
				"<div style='height:100px;width:auto;'></div></div>" ),
			innerDiv = div.children()[ 0 ];

		$( "body" ).append( div );
		w1 = innerDiv.offsetWidth;
		div.css( "overflow", "scroll" );

		w2 = innerDiv.offsetWidth;

		if ( w1 === w2 ) {
			w2 = div[ 0 ].clientWidth;
		}

		div.remove();

		return ( cachedScrollbarWidth = w1 - w2 );
	},
	getScrollInfo: function( within ) {
		var overflowX = within.isWindow || within.isDocument ? "" :
				within.element.css( "overflow-x" ),
			overflowY = within.isWindow || within.isDocument ? "" :
				within.element.css( "overflow-y" ),
			hasOverflowX = overflowX === "scroll" ||
				( overflowX === "auto" && within.width < within.element[ 0 ].scrollWidth ),
			hasOverflowY = overflowY === "scroll" ||
				( overflowY === "auto" && within.height < within.element[ 0 ].scrollHeight );
		return {
			width: hasOverflowY ? $.position.scrollbarWidth() : 0,
			height: hasOverflowX ? $.position.scrollbarWidth() : 0
		};
	},
	getWithinInfo: function( element ) {
		var withinElement = $( element || window ),
			isWindow = $.isWindow( withinElement[ 0 ] ),
			isDocument = !!withinElement[ 0 ] && withinElement[ 0 ].nodeType === 9,
			hasOffset = !isWindow && !isDocument;
		return {
			element: withinElement,
			isWindow: isWindow,
			isDocument: isDocument,
			offset: hasOffset ? $( element ).offset() : { left: 0, top: 0 },
			scrollLeft: withinElement.scrollLeft(),
			scrollTop: withinElement.scrollTop(),
			width: withinElement.outerWidth(),
			height: withinElement.outerHeight()
		};
	}
};

$.fn.position = function( options ) {
	if ( !options || !options.of ) {
		return _position.apply( this, arguments );
	}

	// Make a copy, we don't want to modify arguments
	options = $.extend( {}, options );

	var atOffset, targetWidth, targetHeight, targetOffset, basePosition, dimensions,
		target = $( options.of ),
		within = $.position.getWithinInfo( options.within ),
		scrollInfo = $.position.getScrollInfo( within ),
		collision = ( options.collision || "flip" ).split( " " ),
		offsets = {};

	dimensions = getDimensions( target );
	if ( target[ 0 ].preventDefault ) {

		// Force left top to allow flipping
		options.at = "left top";
	}
	targetWidth = dimensions.width;
	targetHeight = dimensions.height;
	targetOffset = dimensions.offset;

	// Clone to reuse original targetOffset later
	basePosition = $.extend( {}, targetOffset );

	// Force my and at to have valid horizontal and vertical positions
	// if a value is missing or invalid, it will be converted to center
	$.each( [ "my", "at" ], function() {
		var pos = ( options[ this ] || "" ).split( " " ),
			horizontalOffset,
			verticalOffset;

		if ( pos.length === 1 ) {
			pos = rhorizontal.test( pos[ 0 ] ) ?
				pos.concat( [ "center" ] ) :
				rvertical.test( pos[ 0 ] ) ?
					[ "center" ].concat( pos ) :
					[ "center", "center" ];
		}
		pos[ 0 ] = rhorizontal.test( pos[ 0 ] ) ? pos[ 0 ] : "center";
		pos[ 1 ] = rvertical.test( pos[ 1 ] ) ? pos[ 1 ] : "center";

		// Calculate offsets
		horizontalOffset = roffset.exec( pos[ 0 ] );
		verticalOffset = roffset.exec( pos[ 1 ] );
		offsets[ this ] = [
			horizontalOffset ? horizontalOffset[ 0 ] : 0,
			verticalOffset ? verticalOffset[ 0 ] : 0
		];

		// Reduce to just the positions without the offsets
		options[ this ] = [
			rposition.exec( pos[ 0 ] )[ 0 ],
			rposition.exec( pos[ 1 ] )[ 0 ]
		];
	} );

	// Normalize collision option
	if ( collision.length === 1 ) {
		collision[ 1 ] = collision[ 0 ];
	}

	if ( options.at[ 0 ] === "right" ) {
		basePosition.left += targetWidth;
	} else if ( options.at[ 0 ] === "center" ) {
		basePosition.left += targetWidth / 2;
	}

	if ( options.at[ 1 ] === "bottom" ) {
		basePosition.top += targetHeight;
	} else if ( options.at[ 1 ] === "center" ) {
		basePosition.top += targetHeight / 2;
	}

	atOffset = getOffsets( offsets.at, targetWidth, targetHeight );
	basePosition.left += atOffset[ 0 ];
	basePosition.top += atOffset[ 1 ];

	return this.each( function() {
		var collisionPosition, using,
			elem = $( this ),
			elemWidth = elem.outerWidth(),
			elemHeight = elem.outerHeight(),
			marginLeft = parseCss( this, "marginLeft" ),
			marginTop = parseCss( this, "marginTop" ),
			collisionWidth = elemWidth + marginLeft + parseCss( this, "marginRight" ) +
				scrollInfo.width,
			collisionHeight = elemHeight + marginTop + parseCss( this, "marginBottom" ) +
				scrollInfo.height,
			position = $.extend( {}, basePosition ),
			myOffset = getOffsets( offsets.my, elem.outerWidth(), elem.outerHeight() );

		if ( options.my[ 0 ] === "right" ) {
			position.left -= elemWidth;
		} else if ( options.my[ 0 ] === "center" ) {
			position.left -= elemWidth / 2;
		}

		if ( options.my[ 1 ] === "bottom" ) {
			position.top -= elemHeight;
		} else if ( options.my[ 1 ] === "center" ) {
			position.top -= elemHeight / 2;
		}

		position.left += myOffset[ 0 ];
		position.top += myOffset[ 1 ];

		collisionPosition = {
			marginLeft: marginLeft,
			marginTop: marginTop
		};

		$.each( [ "left", "top" ], function( i, dir ) {
			if ( $.ui.position[ collision[ i ] ] ) {
				$.ui.position[ collision[ i ] ][ dir ]( position, {
					targetWidth: targetWidth,
					targetHeight: targetHeight,
					elemWidth: elemWidth,
					elemHeight: elemHeight,
					collisionPosition: collisionPosition,
					collisionWidth: collisionWidth,
					collisionHeight: collisionHeight,
					offset: [ atOffset[ 0 ] + myOffset[ 0 ], atOffset [ 1 ] + myOffset[ 1 ] ],
					my: options.my,
					at: options.at,
					within: within,
					elem: elem
				} );
			}
		} );

		if ( options.using ) {

			// Adds feedback as second argument to using callback, if present
			using = function( props ) {
				var left = targetOffset.left - position.left,
					right = left + targetWidth - elemWidth,
					top = targetOffset.top - position.top,
					bottom = top + targetHeight - elemHeight,
					feedback = {
						target: {
							element: target,
							left: targetOffset.left,
							top: targetOffset.top,
							width: targetWidth,
							height: targetHeight
						},
						element: {
							element: elem,
							left: position.left,
							top: position.top,
							width: elemWidth,
							height: elemHeight
						},
						horizontal: right < 0 ? "left" : left > 0 ? "right" : "center",
						vertical: bottom < 0 ? "top" : top > 0 ? "bottom" : "middle"
					};
				if ( targetWidth < elemWidth && abs( left + right ) < targetWidth ) {
					feedback.horizontal = "center";
				}
				if ( targetHeight < elemHeight && abs( top + bottom ) < targetHeight ) {
					feedback.vertical = "middle";
				}
				if ( max( abs( left ), abs( right ) ) > max( abs( top ), abs( bottom ) ) ) {
					feedback.important = "horizontal";
				} else {
					feedback.important = "vertical";
				}
				options.using.call( this, props, feedback );
			};
		}

		elem.offset( $.extend( position, { using: using } ) );
	} );
};

$.ui.position = {
	fit: {
		left: function( position, data ) {
			var within = data.within,
				withinOffset = within.isWindow ? within.scrollLeft : within.offset.left,
				outerWidth = within.width,
				collisionPosLeft = position.left - data.collisionPosition.marginLeft,
				overLeft = withinOffset - collisionPosLeft,
				overRight = collisionPosLeft + data.collisionWidth - outerWidth - withinOffset,
				newOverRight;

			// Element is wider than within
			if ( data.collisionWidth > outerWidth ) {

				// Element is initially over the left side of within
				if ( overLeft > 0 && overRight <= 0 ) {
					newOverRight = position.left + overLeft + data.collisionWidth - outerWidth -
						withinOffset;
					position.left += overLeft - newOverRight;

				// Element is initially over right side of within
				} else if ( overRight > 0 && overLeft <= 0 ) {
					position.left = withinOffset;

				// Element is initially over both left and right sides of within
				} else {
					if ( overLeft > overRight ) {
						position.left = withinOffset + outerWidth - data.collisionWidth;
					} else {
						position.left = withinOffset;
					}
				}

			// Too far left -> align with left edge
			} else if ( overLeft > 0 ) {
				position.left += overLeft;

			// Too far right -> align with right edge
			} else if ( overRight > 0 ) {
				position.left -= overRight;

			// Adjust based on position and margin
			} else {
				position.left = max( position.left - collisionPosLeft, position.left );
			}
		},
		top: function( position, data ) {
			var within = data.within,
				withinOffset = within.isWindow ? within.scrollTop : within.offset.top,
				outerHeight = data.within.height,
				collisionPosTop = position.top - data.collisionPosition.marginTop,
				overTop = withinOffset - collisionPosTop,
				overBottom = collisionPosTop + data.collisionHeight - outerHeight - withinOffset,
				newOverBottom;

			// Element is taller than within
			if ( data.collisionHeight > outerHeight ) {

				// Element is initially over the top of within
				if ( overTop > 0 && overBottom <= 0 ) {
					newOverBottom = position.top + overTop + data.collisionHeight - outerHeight -
						withinOffset;
					position.top += overTop - newOverBottom;

				// Element is initially over bottom of within
				} else if ( overBottom > 0 && overTop <= 0 ) {
					position.top = withinOffset;

				// Element is initially over both top and bottom of within
				} else {
					if ( overTop > overBottom ) {
						position.top = withinOffset + outerHeight - data.collisionHeight;
					} else {
						position.top = withinOffset;
					}
				}

			// Too far up -> align with top
			} else if ( overTop > 0 ) {
				position.top += overTop;

			// Too far down -> align with bottom edge
			} else if ( overBottom > 0 ) {
				position.top -= overBottom;

			// Adjust based on position and margin
			} else {
				position.top = max( position.top - collisionPosTop, position.top );
			}
		}
	},
	flip: {
		left: function( position, data ) {
			var within = data.within,
				withinOffset = within.offset.left + within.scrollLeft,
				outerWidth = within.width,
				offsetLeft = within.isWindow ? within.scrollLeft : within.offset.left,
				collisionPosLeft = position.left - data.collisionPosition.marginLeft,
				overLeft = collisionPosLeft - offsetLeft,
				overRight = collisionPosLeft + data.collisionWidth - outerWidth - offsetLeft,
				myOffset = data.my[ 0 ] === "left" ?
					-data.elemWidth :
					data.my[ 0 ] === "right" ?
						data.elemWidth :
						0,
				atOffset = data.at[ 0 ] === "left" ?
					data.targetWidth :
					data.at[ 0 ] === "right" ?
						-data.targetWidth :
						0,
				offset = -2 * data.offset[ 0 ],
				newOverRight,
				newOverLeft;

			if ( overLeft < 0 ) {
				newOverRight = position.left + myOffset + atOffset + offset + data.collisionWidth -
					outerWidth - withinOffset;
				if ( newOverRight < 0 || newOverRight < abs( overLeft ) ) {
					position.left += myOffset + atOffset + offset;
				}
			} else if ( overRight > 0 ) {
				newOverLeft = position.left - data.collisionPosition.marginLeft + myOffset +
					atOffset + offset - offsetLeft;
				if ( newOverLeft > 0 || abs( newOverLeft ) < overRight ) {
					position.left += myOffset + atOffset + offset;
				}
			}
		},
		top: function( position, data ) {
			var within = data.within,
				withinOffset = within.offset.top + within.scrollTop,
				outerHeight = within.height,
				offsetTop = within.isWindow ? within.scrollTop : within.offset.top,
				collisionPosTop = position.top - data.collisionPosition.marginTop,
				overTop = collisionPosTop - offsetTop,
				overBottom = collisionPosTop + data.collisionHeight - outerHeight - offsetTop,
				top = data.my[ 1 ] === "top",
				myOffset = top ?
					-data.elemHeight :
					data.my[ 1 ] === "bottom" ?
						data.elemHeight :
						0,
				atOffset = data.at[ 1 ] === "top" ?
					data.targetHeight :
					data.at[ 1 ] === "bottom" ?
						-data.targetHeight :
						0,
				offset = -2 * data.offset[ 1 ],
				newOverTop,
				newOverBottom;
			if ( overTop < 0 ) {
				newOverBottom = position.top + myOffset + atOffset + offset + data.collisionHeight -
					outerHeight - withinOffset;
				if ( newOverBottom < 0 || newOverBottom < abs( overTop ) ) {
					position.top += myOffset + atOffset + offset;
				}
			} else if ( overBottom > 0 ) {
				newOverTop = position.top - data.collisionPosition.marginTop + myOffset + atOffset +
					offset - offsetTop;
				if ( newOverTop > 0 || abs( newOverTop ) < overBottom ) {
					position.top += myOffset + atOffset + offset;
				}
			}
		}
	},
	flipfit: {
		left: function() {
			$.ui.position.flip.left.apply( this, arguments );
			$.ui.position.fit.left.apply( this, arguments );
		},
		top: function() {
			$.ui.position.flip.top.apply( this, arguments );
			$.ui.position.fit.top.apply( this, arguments );
		}
	}
};

} )();

var position = $.ui.position;


/*!
 * jQuery UI Keycode 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

//>>label: Keycode
//>>group: Core
//>>description: Provide keycodes as keynames
//>>docs: http://api.jqueryui.com/jQuery.ui.keyCode/


var keycode = $.ui.keyCode = {
	BACKSPACE: 8,
	COMMA: 188,
	DELETE: 46,
	DOWN: 40,
	END: 35,
	ENTER: 13,
	ESCAPE: 27,
	HOME: 36,
	LEFT: 37,
	PAGE_DOWN: 34,
	PAGE_UP: 33,
	PERIOD: 190,
	RIGHT: 39,
	SPACE: 32,
	TAB: 9,
	UP: 38
};


/*!
 * jQuery UI Scroll Parent 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

//>>label: scrollParent
//>>group: Core
//>>description: Get the closest ancestor element that is scrollable.
//>>docs: http://api.jqueryui.com/scrollParent/



var scrollParent = $.fn.scrollParent = function( includeHidden ) {
	var position = this.css( "position" ),
		excludeStaticParent = position === "absolute",
		overflowRegex = includeHidden ? /(auto|scroll|hidden)/ : /(auto|scroll)/,
		scrollParent = this.parents().filter( function() {
			var parent = $( this );
			if ( excludeStaticParent && parent.css( "position" ) === "static" ) {
				return false;
			}
			return overflowRegex.test( parent.css( "overflow" ) + parent.css( "overflow-y" ) +
				parent.css( "overflow-x" ) );
		} ).eq( 0 );

	return position === "fixed" || !scrollParent.length ?
		$( this[ 0 ].ownerDocument || document ) :
		scrollParent;
};


/*!
 * jQuery UI Unique ID 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

//>>label: uniqueId
//>>group: Core
//>>description: Functions to generate and remove uniqueId's
//>>docs: http://api.jqueryui.com/uniqueId/



var uniqueId = $.fn.extend( {
	uniqueId: ( function() {
		var uuid = 0;

		return function() {
			return this.each( function() {
				if ( !this.id ) {
					this.id = "ui-id-" + ( ++uuid );
				}
			} );
		};
	} )(),

	removeUniqueId: function() {
		return this.each( function() {
			if ( /^ui-id-\d+$/.test( this.id ) ) {
				$( this ).removeAttr( "id" );
			}
		} );
	}
} );


/*!
 * jQuery UI Effects 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

//>>label: Effects Core
//>>group: Effects
// jscs:disable maximumLineLength
//>>description: Extends the internal jQuery effects. Includes morphing and easing. Required by all other effects.
// jscs:enable maximumLineLength
//>>docs: http://api.jqueryui.com/category/effects-core/
//>>demos: http://jqueryui.com/effect/



var dataSpace = "ui-effects-",
	dataSpaceStyle = "ui-effects-style",
	dataSpaceAnimated = "ui-effects-animated",

	// Create a local jQuery because jQuery Color relies on it and the
	// global may not exist with AMD and a custom build (#10199)
	jQuery = $;

$.effects = $.effects || {
	effect: {}
};

/*!
 * jQuery Color Animations v2.1.2
 * https://github.com/jquery/jquery-color
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * Date: Wed Jan 16 08:47:09 2013 -0600
 */
( function( jQuery, undefined ) {

	var stepHooks = "backgroundColor borderBottomColor borderLeftColor borderRightColor " +
		"borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",

	// Plusequals test for += 100 -= 100
	rplusequals = /^([\-+])=\s*(\d+\.?\d*)/,

	// A set of RE's that can match strings and generate color tuples.
	stringParsers = [ {
			re: /rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,
			parse: function( execResult ) {
				return [
					execResult[ 1 ],
					execResult[ 2 ],
					execResult[ 3 ],
					execResult[ 4 ]
				];
			}
		}, {
			re: /rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,
			parse: function( execResult ) {
				return [
					execResult[ 1 ] * 2.55,
					execResult[ 2 ] * 2.55,
					execResult[ 3 ] * 2.55,
					execResult[ 4 ]
				];
			}
		}, {

			// This regex ignores A-F because it's compared against an already lowercased string
			re: /#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,
			parse: function( execResult ) {
				return [
					parseInt( execResult[ 1 ], 16 ),
					parseInt( execResult[ 2 ], 16 ),
					parseInt( execResult[ 3 ], 16 )
				];
			}
		}, {

			// This regex ignores A-F because it's compared against an already lowercased string
			re: /#([a-f0-9])([a-f0-9])([a-f0-9])/,
			parse: function( execResult ) {
				return [
					parseInt( execResult[ 1 ] + execResult[ 1 ], 16 ),
					parseInt( execResult[ 2 ] + execResult[ 2 ], 16 ),
					parseInt( execResult[ 3 ] + execResult[ 3 ], 16 )
				];
			}
		}, {
			re: /hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,
			space: "hsla",
			parse: function( execResult ) {
				return [
					execResult[ 1 ],
					execResult[ 2 ] / 100,
					execResult[ 3 ] / 100,
					execResult[ 4 ]
				];
			}
		} ],

	// JQuery.Color( )
	color = jQuery.Color = function( color, green, blue, alpha ) {
		return new jQuery.Color.fn.parse( color, green, blue, alpha );
	},
	spaces = {
		rgba: {
			props: {
				red: {
					idx: 0,
					type: "byte"
				},
				green: {
					idx: 1,
					type: "byte"
				},
				blue: {
					idx: 2,
					type: "byte"
				}
			}
		},

		hsla: {
			props: {
				hue: {
					idx: 0,
					type: "degrees"
				},
				saturation: {
					idx: 1,
					type: "percent"
				},
				lightness: {
					idx: 2,
					type: "percent"
				}
			}
		}
	},
	propTypes = {
		"byte": {
			floor: true,
			max: 255
		},
		"percent": {
			max: 1
		},
		"degrees": {
			mod: 360,
			floor: true
		}
	},
	support = color.support = {},

	// Element for support tests
	supportElem = jQuery( "<p>" )[ 0 ],

	// Colors = jQuery.Color.names
	colors,

	// Local aliases of functions called often
	each = jQuery.each;

// Determine rgba support immediately
supportElem.style.cssText = "background-color:rgba(1,1,1,.5)";
support.rgba = supportElem.style.backgroundColor.indexOf( "rgba" ) > -1;

// Define cache name and alpha properties
// for rgba and hsla spaces
each( spaces, function( spaceName, space ) {
	space.cache = "_" + spaceName;
	space.props.alpha = {
		idx: 3,
		type: "percent",
		def: 1
	};
} );

function clamp( value, prop, allowEmpty ) {
	var type = propTypes[ prop.type ] || {};

	if ( value == null ) {
		return ( allowEmpty || !prop.def ) ? null : prop.def;
	}

	// ~~ is an short way of doing floor for positive numbers
	value = type.floor ? ~~value : parseFloat( value );

	// IE will pass in empty strings as value for alpha,
	// which will hit this case
	if ( isNaN( value ) ) {
		return prop.def;
	}

	if ( type.mod ) {

		// We add mod before modding to make sure that negatives values
		// get converted properly: -10 -> 350
		return ( value + type.mod ) % type.mod;
	}

	// For now all property types without mod have min and max
	return 0 > value ? 0 : type.max < value ? type.max : value;
}

function stringParse( string ) {
	var inst = color(),
		rgba = inst._rgba = [];

	string = string.toLowerCase();

	each( stringParsers, function( i, parser ) {
		var parsed,
			match = parser.re.exec( string ),
			values = match && parser.parse( match ),
			spaceName = parser.space || "rgba";

		if ( values ) {
			parsed = inst[ spaceName ]( values );

			// If this was an rgba parse the assignment might happen twice
			// oh well....
			inst[ spaces[ spaceName ].cache ] = parsed[ spaces[ spaceName ].cache ];
			rgba = inst._rgba = parsed._rgba;

			// Exit each( stringParsers ) here because we matched
			return false;
		}
	} );

	// Found a stringParser that handled it
	if ( rgba.length ) {

		// If this came from a parsed string, force "transparent" when alpha is 0
		// chrome, (and maybe others) return "transparent" as rgba(0,0,0,0)
		if ( rgba.join() === "0,0,0,0" ) {
			jQuery.extend( rgba, colors.transparent );
		}
		return inst;
	}

	// Named colors
	return colors[ string ];
}

color.fn = jQuery.extend( color.prototype, {
	parse: function( red, green, blue, alpha ) {
		if ( red === undefined ) {
			this._rgba = [ null, null, null, null ];
			return this;
		}
		if ( red.jquery || red.nodeType ) {
			red = jQuery( red ).css( green );
			green = undefined;
		}

		var inst = this,
			type = jQuery.type( red ),
			rgba = this._rgba = [];

		// More than 1 argument specified - assume ( red, green, blue, alpha )
		if ( green !== undefined ) {
			red = [ red, green, blue, alpha ];
			type = "array";
		}

		if ( type === "string" ) {
			return this.parse( stringParse( red ) || colors._default );
		}

		if ( type === "array" ) {
			each( spaces.rgba.props, function( key, prop ) {
				rgba[ prop.idx ] = clamp( red[ prop.idx ], prop );
			} );
			return this;
		}

		if ( type === "object" ) {
			if ( red instanceof color ) {
				each( spaces, function( spaceName, space ) {
					if ( red[ space.cache ] ) {
						inst[ space.cache ] = red[ space.cache ].slice();
					}
				} );
			} else {
				each( spaces, function( spaceName, space ) {
					var cache = space.cache;
					each( space.props, function( key, prop ) {

						// If the cache doesn't exist, and we know how to convert
						if ( !inst[ cache ] && space.to ) {

							// If the value was null, we don't need to copy it
							// if the key was alpha, we don't need to copy it either
							if ( key === "alpha" || red[ key ] == null ) {
								return;
							}
							inst[ cache ] = space.to( inst._rgba );
						}

						// This is the only case where we allow nulls for ALL properties.
						// call clamp with alwaysAllowEmpty
						inst[ cache ][ prop.idx ] = clamp( red[ key ], prop, true );
					} );

					// Everything defined but alpha?
					if ( inst[ cache ] &&
							jQuery.inArray( null, inst[ cache ].slice( 0, 3 ) ) < 0 ) {

						// Use the default of 1
						inst[ cache ][ 3 ] = 1;
						if ( space.from ) {
							inst._rgba = space.from( inst[ cache ] );
						}
					}
				} );
			}
			return this;
		}
	},
	is: function( compare ) {
		var is = color( compare ),
			same = true,
			inst = this;

		each( spaces, function( _, space ) {
			var localCache,
				isCache = is[ space.cache ];
			if ( isCache ) {
				localCache = inst[ space.cache ] || space.to && space.to( inst._rgba ) || [];
				each( space.props, function( _, prop ) {
					if ( isCache[ prop.idx ] != null ) {
						same = ( isCache[ prop.idx ] === localCache[ prop.idx ] );
						return same;
					}
				} );
			}
			return same;
		} );
		return same;
	},
	_space: function() {
		var used = [],
			inst = this;
		each( spaces, function( spaceName, space ) {
			if ( inst[ space.cache ] ) {
				used.push( spaceName );
			}
		} );
		return used.pop();
	},
	transition: function( other, distance ) {
		var end = color( other ),
			spaceName = end._space(),
			space = spaces[ spaceName ],
			startColor = this.alpha() === 0 ? color( "transparent" ) : this,
			start = startColor[ space.cache ] || space.to( startColor._rgba ),
			result = start.slice();

		end = end[ space.cache ];
		each( space.props, function( key, prop ) {
			var index = prop.idx,
				startValue = start[ index ],
				endValue = end[ index ],
				type = propTypes[ prop.type ] || {};

			// If null, don't override start value
			if ( endValue === null ) {
				return;
			}

			// If null - use end
			if ( startValue === null ) {
				result[ index ] = endValue;
			} else {
				if ( type.mod ) {
					if ( endValue - startValue > type.mod / 2 ) {
						startValue += type.mod;
					} else if ( startValue - endValue > type.mod / 2 ) {
						startValue -= type.mod;
					}
				}
				result[ index ] = clamp( ( endValue - startValue ) * distance + startValue, prop );
			}
		} );
		return this[ spaceName ]( result );
	},
	blend: function( opaque ) {

		// If we are already opaque - return ourself
		if ( this._rgba[ 3 ] === 1 ) {
			return this;
		}

		var rgb = this._rgba.slice(),
			a = rgb.pop(),
			blend = color( opaque )._rgba;

		return color( jQuery.map( rgb, function( v, i ) {
			return ( 1 - a ) * blend[ i ] + a * v;
		} ) );
	},
	toRgbaString: function() {
		var prefix = "rgba(",
			rgba = jQuery.map( this._rgba, function( v, i ) {
				return v == null ? ( i > 2 ? 1 : 0 ) : v;
			} );

		if ( rgba[ 3 ] === 1 ) {
			rgba.pop();
			prefix = "rgb(";
		}

		return prefix + rgba.join() + ")";
	},
	toHslaString: function() {
		var prefix = "hsla(",
			hsla = jQuery.map( this.hsla(), function( v, i ) {
				if ( v == null ) {
					v = i > 2 ? 1 : 0;
				}

				// Catch 1 and 2
				if ( i && i < 3 ) {
					v = Math.round( v * 100 ) + "%";
				}
				return v;
			} );

		if ( hsla[ 3 ] === 1 ) {
			hsla.pop();
			prefix = "hsl(";
		}
		return prefix + hsla.join() + ")";
	},
	toHexString: function( includeAlpha ) {
		var rgba = this._rgba.slice(),
			alpha = rgba.pop();

		if ( includeAlpha ) {
			rgba.push( ~~( alpha * 255 ) );
		}

		return "#" + jQuery.map( rgba, function( v ) {

			// Default to 0 when nulls exist
			v = ( v || 0 ).toString( 16 );
			return v.length === 1 ? "0" + v : v;
		} ).join( "" );
	},
	toString: function() {
		return this._rgba[ 3 ] === 0 ? "transparent" : this.toRgbaString();
	}
} );
color.fn.parse.prototype = color.fn;

// Hsla conversions adapted from:
// https://code.google.com/p/maashaack/source/browse/packages/graphics/trunk/src/graphics/colors/HUE2RGB.as?r=5021

function hue2rgb( p, q, h ) {
	h = ( h + 1 ) % 1;
	if ( h * 6 < 1 ) {
		return p + ( q - p ) * h * 6;
	}
	if ( h * 2 < 1 ) {
		return q;
	}
	if ( h * 3 < 2 ) {
		return p + ( q - p ) * ( ( 2 / 3 ) - h ) * 6;
	}
	return p;
}

spaces.hsla.to = function( rgba ) {
	if ( rgba[ 0 ] == null || rgba[ 1 ] == null || rgba[ 2 ] == null ) {
		return [ null, null, null, rgba[ 3 ] ];
	}
	var r = rgba[ 0 ] / 255,
		g = rgba[ 1 ] / 255,
		b = rgba[ 2 ] / 255,
		a = rgba[ 3 ],
		max = Math.max( r, g, b ),
		min = Math.min( r, g, b ),
		diff = max - min,
		add = max + min,
		l = add * 0.5,
		h, s;

	if ( min === max ) {
		h = 0;
	} else if ( r === max ) {
		h = ( 60 * ( g - b ) / diff ) + 360;
	} else if ( g === max ) {
		h = ( 60 * ( b - r ) / diff ) + 120;
	} else {
		h = ( 60 * ( r - g ) / diff ) + 240;
	}

	// Chroma (diff) == 0 means greyscale which, by definition, saturation = 0%
	// otherwise, saturation is based on the ratio of chroma (diff) to lightness (add)
	if ( diff === 0 ) {
		s = 0;
	} else if ( l <= 0.5 ) {
		s = diff / add;
	} else {
		s = diff / ( 2 - add );
	}
	return [ Math.round( h ) % 360, s, l, a == null ? 1 : a ];
};

spaces.hsla.from = function( hsla ) {
	if ( hsla[ 0 ] == null || hsla[ 1 ] == null || hsla[ 2 ] == null ) {
		return [ null, null, null, hsla[ 3 ] ];
	}
	var h = hsla[ 0 ] / 360,
		s = hsla[ 1 ],
		l = hsla[ 2 ],
		a = hsla[ 3 ],
		q = l <= 0.5 ? l * ( 1 + s ) : l + s - l * s,
		p = 2 * l - q;

	return [
		Math.round( hue2rgb( p, q, h + ( 1 / 3 ) ) * 255 ),
		Math.round( hue2rgb( p, q, h ) * 255 ),
		Math.round( hue2rgb( p, q, h - ( 1 / 3 ) ) * 255 ),
		a
	];
};

each( spaces, function( spaceName, space ) {
	var props = space.props,
		cache = space.cache,
		to = space.to,
		from = space.from;

	// Makes rgba() and hsla()
	color.fn[ spaceName ] = function( value ) {

		// Generate a cache for this space if it doesn't exist
		if ( to && !this[ cache ] ) {
			this[ cache ] = to( this._rgba );
		}
		if ( value === undefined ) {
			return this[ cache ].slice();
		}

		var ret,
			type = jQuery.type( value ),
			arr = ( type === "array" || type === "object" ) ? value : arguments,
			local = this[ cache ].slice();

		each( props, function( key, prop ) {
			var val = arr[ type === "object" ? key : prop.idx ];
			if ( val == null ) {
				val = local[ prop.idx ];
			}
			local[ prop.idx ] = clamp( val, prop );
		} );

		if ( from ) {
			ret = color( from( local ) );
			ret[ cache ] = local;
			return ret;
		} else {
			return color( local );
		}
	};

	// Makes red() green() blue() alpha() hue() saturation() lightness()
	each( props, function( key, prop ) {

		// Alpha is included in more than one space
		if ( color.fn[ key ] ) {
			return;
		}
		color.fn[ key ] = function( value ) {
			var vtype = jQuery.type( value ),
				fn = ( key === "alpha" ? ( this._hsla ? "hsla" : "rgba" ) : spaceName ),
				local = this[ fn ](),
				cur = local[ prop.idx ],
				match;

			if ( vtype === "undefined" ) {
				return cur;
			}

			if ( vtype === "function" ) {
				value = value.call( this, cur );
				vtype = jQuery.type( value );
			}
			if ( value == null && prop.empty ) {
				return this;
			}
			if ( vtype === "string" ) {
				match = rplusequals.exec( value );
				if ( match ) {
					value = cur + parseFloat( match[ 2 ] ) * ( match[ 1 ] === "+" ? 1 : -1 );
				}
			}
			local[ prop.idx ] = value;
			return this[ fn ]( local );
		};
	} );
} );

// Add cssHook and .fx.step function for each named hook.
// accept a space separated string of properties
color.hook = function( hook ) {
	var hooks = hook.split( " " );
	each( hooks, function( i, hook ) {
		jQuery.cssHooks[ hook ] = {
			set: function( elem, value ) {
				var parsed, curElem,
					backgroundColor = "";

				if ( value !== "transparent" && ( jQuery.type( value ) !== "string" ||
						( parsed = stringParse( value ) ) ) ) {
					value = color( parsed || value );
					if ( !support.rgba && value._rgba[ 3 ] !== 1 ) {
						curElem = hook === "backgroundColor" ? elem.parentNode : elem;
						while (
							( backgroundColor === "" || backgroundColor === "transparent" ) &&
							curElem && curElem.style
						) {
							try {
								backgroundColor = jQuery.css( curElem, "backgroundColor" );
								curElem = curElem.parentNode;
							} catch ( e ) {
							}
						}

						value = value.blend( backgroundColor && backgroundColor !== "transparent" ?
							backgroundColor :
							"_default" );
					}

					value = value.toRgbaString();
				}
				try {
					elem.style[ hook ] = value;
				} catch ( e ) {

					// Wrapped to prevent IE from throwing errors on "invalid" values like
					// 'auto' or 'inherit'
				}
			}
		};
		jQuery.fx.step[ hook ] = function( fx ) {
			if ( !fx.colorInit ) {
				fx.start = color( fx.elem, hook );
				fx.end = color( fx.end );
				fx.colorInit = true;
			}
			jQuery.cssHooks[ hook ].set( fx.elem, fx.start.transition( fx.end, fx.pos ) );
		};
	} );

};

color.hook( stepHooks );

jQuery.cssHooks.borderColor = {
	expand: function( value ) {
		var expanded = {};

		each( [ "Top", "Right", "Bottom", "Left" ], function( i, part ) {
			expanded[ "border" + part + "Color" ] = value;
		} );
		return expanded;
	}
};

// Basic color names only.
// Usage of any of the other color names requires adding yourself or including
// jquery.color.svg-names.js.
colors = jQuery.Color.names = {

	// 4.1. Basic color keywords
	aqua: "#00ffff",
	black: "#000000",
	blue: "#0000ff",
	fuchsia: "#ff00ff",
	gray: "#808080",
	green: "#008000",
	lime: "#00ff00",
	maroon: "#800000",
	navy: "#000080",
	olive: "#808000",
	purple: "#800080",
	red: "#ff0000",
	silver: "#c0c0c0",
	teal: "#008080",
	white: "#ffffff",
	yellow: "#ffff00",

	// 4.2.3. "transparent" color keyword
	transparent: [ null, null, null, 0 ],

	_default: "#ffffff"
};

} )( jQuery );

/******************************************************************************/
/****************************** CLASS ANIMATIONS ******************************/
/******************************************************************************/
( function() {

var classAnimationActions = [ "add", "remove", "toggle" ],
	shorthandStyles = {
		border: 1,
		borderBottom: 1,
		borderColor: 1,
		borderLeft: 1,
		borderRight: 1,
		borderTop: 1,
		borderWidth: 1,
		margin: 1,
		padding: 1
	};

$.each(
	[ "borderLeftStyle", "borderRightStyle", "borderBottomStyle", "borderTopStyle" ],
	function( _, prop ) {
		$.fx.step[ prop ] = function( fx ) {
			if ( fx.end !== "none" && !fx.setAttr || fx.pos === 1 && !fx.setAttr ) {
				jQuery.style( fx.elem, prop, fx.end );
				fx.setAttr = true;
			}
		};
	}
);

function getElementStyles( elem ) {
	var key, len,
		style = elem.ownerDocument.defaultView ?
			elem.ownerDocument.defaultView.getComputedStyle( elem, null ) :
			elem.currentStyle,
		styles = {};

	if ( style && style.length && style[ 0 ] && style[ style[ 0 ] ] ) {
		len = style.length;
		while ( len-- ) {
			key = style[ len ];
			if ( typeof style[ key ] === "string" ) {
				styles[ $.camelCase( key ) ] = style[ key ];
			}
		}

	// Support: Opera, IE <9
	} else {
		for ( key in style ) {
			if ( typeof style[ key ] === "string" ) {
				styles[ key ] = style[ key ];
			}
		}
	}

	return styles;
}

function styleDifference( oldStyle, newStyle ) {
	var diff = {},
		name, value;

	for ( name in newStyle ) {
		value = newStyle[ name ];
		if ( oldStyle[ name ] !== value ) {
			if ( !shorthandStyles[ name ] ) {
				if ( $.fx.step[ name ] || !isNaN( parseFloat( value ) ) ) {
					diff[ name ] = value;
				}
			}
		}
	}

	return diff;
}

// Support: jQuery <1.8
if ( !$.fn.addBack ) {
	$.fn.addBack = function( selector ) {
		return this.add( selector == null ?
			this.prevObject : this.prevObject.filter( selector )
		);
	};
}

$.effects.animateClass = function( value, duration, easing, callback ) {
	var o = $.speed( duration, easing, callback );

	return this.queue( function() {
		var animated = $( this ),
			baseClass = animated.attr( "class" ) || "",
			applyClassChange,
			allAnimations = o.children ? animated.find( "*" ).addBack() : animated;

		// Map the animated objects to store the original styles.
		allAnimations = allAnimations.map( function() {
			var el = $( this );
			return {
				el: el,
				start: getElementStyles( this )
			};
		} );

		// Apply class change
		applyClassChange = function() {
			$.each( classAnimationActions, function( i, action ) {
				if ( value[ action ] ) {
					animated[ action + "Class" ]( value[ action ] );
				}
			} );
		};
		applyClassChange();

		// Map all animated objects again - calculate new styles and diff
		allAnimations = allAnimations.map( function() {
			this.end = getElementStyles( this.el[ 0 ] );
			this.diff = styleDifference( this.start, this.end );
			return this;
		} );

		// Apply original class
		animated.attr( "class", baseClass );

		// Map all animated objects again - this time collecting a promise
		allAnimations = allAnimations.map( function() {
			var styleInfo = this,
				dfd = $.Deferred(),
				opts = $.extend( {}, o, {
					queue: false,
					complete: function() {
						dfd.resolve( styleInfo );
					}
				} );

			this.el.animate( this.diff, opts );
			return dfd.promise();
		} );

		// Once all animations have completed:
		$.when.apply( $, allAnimations.get() ).done( function() {

			// Set the final class
			applyClassChange();

			// For each animated element,
			// clear all css properties that were animated
			$.each( arguments, function() {
				var el = this.el;
				$.each( this.diff, function( key ) {
					el.css( key, "" );
				} );
			} );

			// This is guarnteed to be there if you use jQuery.speed()
			// it also handles dequeuing the next anim...
			o.complete.call( animated[ 0 ] );
		} );
	} );
};

$.fn.extend( {
	addClass: ( function( orig ) {
		return function( classNames, speed, easing, callback ) {
			return speed ?
				$.effects.animateClass.call( this,
					{ add: classNames }, speed, easing, callback ) :
				orig.apply( this, arguments );
		};
	} )( $.fn.addClass ),

	removeClass: ( function( orig ) {
		return function( classNames, speed, easing, callback ) {
			return arguments.length > 1 ?
				$.effects.animateClass.call( this,
					{ remove: classNames }, speed, easing, callback ) :
				orig.apply( this, arguments );
		};
	} )( $.fn.removeClass ),

	toggleClass: ( function( orig ) {
		return function( classNames, force, speed, easing, callback ) {
			if ( typeof force === "boolean" || force === undefined ) {
				if ( !speed ) {

					// Without speed parameter
					return orig.apply( this, arguments );
				} else {
					return $.effects.animateClass.call( this,
						( force ? { add: classNames } : { remove: classNames } ),
						speed, easing, callback );
				}
			} else {

				// Without force parameter
				return $.effects.animateClass.call( this,
					{ toggle: classNames }, force, speed, easing );
			}
		};
	} )( $.fn.toggleClass ),

	switchClass: function( remove, add, speed, easing, callback ) {
		return $.effects.animateClass.call( this, {
			add: add,
			remove: remove
		}, speed, easing, callback );
	}
} );

} )();

/******************************************************************************/
/*********************************** EFFECTS **********************************/
/******************************************************************************/

( function() {

if ( $.expr && $.expr.filters && $.expr.filters.animated ) {
	$.expr.filters.animated = ( function( orig ) {
		return function( elem ) {
			return !!$( elem ).data( dataSpaceAnimated ) || orig( elem );
		};
	} )( $.expr.filters.animated );
}

if ( $.uiBackCompat !== false ) {
	$.extend( $.effects, {

		// Saves a set of properties in a data storage
		save: function( element, set ) {
			var i = 0, length = set.length;
			for ( ; i < length; i++ ) {
				if ( set[ i ] !== null ) {
					element.data( dataSpace + set[ i ], element[ 0 ].style[ set[ i ] ] );
				}
			}
		},

		// Restores a set of previously saved properties from a data storage
		restore: function( element, set ) {
			var val, i = 0, length = set.length;
			for ( ; i < length; i++ ) {
				if ( set[ i ] !== null ) {
					val = element.data( dataSpace + set[ i ] );
					element.css( set[ i ], val );
				}
			}
		},

		setMode: function( el, mode ) {
			if ( mode === "toggle" ) {
				mode = el.is( ":hidden" ) ? "show" : "hide";
			}
			return mode;
		},

		// Wraps the element around a wrapper that copies position properties
		createWrapper: function( element ) {

			// If the element is already wrapped, return it
			if ( element.parent().is( ".ui-effects-wrapper" ) ) {
				return element.parent();
			}

			// Wrap the element
			var props = {
					width: element.outerWidth( true ),
					height: element.outerHeight( true ),
					"float": element.css( "float" )
				},
				wrapper = $( "<div></div>" )
					.addClass( "ui-effects-wrapper" )
					.css( {
						fontSize: "100%",
						background: "transparent",
						border: "none",
						margin: 0,
						padding: 0
					} ),

				// Store the size in case width/height are defined in % - Fixes #5245
				size = {
					width: element.width(),
					height: element.height()
				},
				active = document.activeElement;

			// Support: Firefox
			// Firefox incorrectly exposes anonymous content
			// https://bugzilla.mozilla.org/show_bug.cgi?id=561664
			try {
				active.id;
			} catch ( e ) {
				active = document.body;
			}

			element.wrap( wrapper );

			// Fixes #7595 - Elements lose focus when wrapped.
			if ( element[ 0 ] === active || $.contains( element[ 0 ], active ) ) {
				$( active ).trigger( "focus" );
			}

			// Hotfix for jQuery 1.4 since some change in wrap() seems to actually
			// lose the reference to the wrapped element
			wrapper = element.parent();

			// Transfer positioning properties to the wrapper
			if ( element.css( "position" ) === "static" ) {
				wrapper.css( { position: "relative" } );
				element.css( { position: "relative" } );
			} else {
				$.extend( props, {
					position: element.css( "position" ),
					zIndex: element.css( "z-index" )
				} );
				$.each( [ "top", "left", "bottom", "right" ], function( i, pos ) {
					props[ pos ] = element.css( pos );
					if ( isNaN( parseInt( props[ pos ], 10 ) ) ) {
						props[ pos ] = "auto";
					}
				} );
				element.css( {
					position: "relative",
					top: 0,
					left: 0,
					right: "auto",
					bottom: "auto"
				} );
			}
			element.css( size );

			return wrapper.css( props ).show();
		},

		removeWrapper: function( element ) {
			var active = document.activeElement;

			if ( element.parent().is( ".ui-effects-wrapper" ) ) {
				element.parent().replaceWith( element );

				// Fixes #7595 - Elements lose focus when wrapped.
				if ( element[ 0 ] === active || $.contains( element[ 0 ], active ) ) {
					$( active ).trigger( "focus" );
				}
			}

			return element;
		}
	} );
}

$.extend( $.effects, {
	version: "1.12.1",

	define: function( name, mode, effect ) {
		if ( !effect ) {
			effect = mode;
			mode = "effect";
		}

		$.effects.effect[ name ] = effect;
		$.effects.effect[ name ].mode = mode;

		return effect;
	},

	scaledDimensions: function( element, percent, direction ) {
		if ( percent === 0 ) {
			return {
				height: 0,
				width: 0,
				outerHeight: 0,
				outerWidth: 0
			};
		}

		var x = direction !== "horizontal" ? ( ( percent || 100 ) / 100 ) : 1,
			y = direction !== "vertical" ? ( ( percent || 100 ) / 100 ) : 1;

		return {
			height: element.height() * y,
			width: element.width() * x,
			outerHeight: element.outerHeight() * y,
			outerWidth: element.outerWidth() * x
		};

	},

	clipToBox: function( animation ) {
		return {
			width: animation.clip.right - animation.clip.left,
			height: animation.clip.bottom - animation.clip.top,
			left: animation.clip.left,
			top: animation.clip.top
		};
	},

	// Injects recently queued functions to be first in line (after "inprogress")
	unshift: function( element, queueLength, count ) {
		var queue = element.queue();

		if ( queueLength > 1 ) {
			queue.splice.apply( queue,
				[ 1, 0 ].concat( queue.splice( queueLength, count ) ) );
		}
		element.dequeue();
	},

	saveStyle: function( element ) {
		element.data( dataSpaceStyle, element[ 0 ].style.cssText );
	},

	restoreStyle: function( element ) {
		element[ 0 ].style.cssText = element.data( dataSpaceStyle ) || "";
		element.removeData( dataSpaceStyle );
	},

	mode: function( element, mode ) {
		var hidden = element.is( ":hidden" );

		if ( mode === "toggle" ) {
			mode = hidden ? "show" : "hide";
		}
		if ( hidden ? mode === "hide" : mode === "show" ) {
			mode = "none";
		}
		return mode;
	},

	// Translates a [top,left] array into a baseline value
	getBaseline: function( origin, original ) {
		var y, x;

		switch ( origin[ 0 ] ) {
		case "top":
			y = 0;
			break;
		case "middle":
			y = 0.5;
			break;
		case "bottom":
			y = 1;
			break;
		default:
			y = origin[ 0 ] / original.height;
		}

		switch ( origin[ 1 ] ) {
		case "left":
			x = 0;
			break;
		case "center":
			x = 0.5;
			break;
		case "right":
			x = 1;
			break;
		default:
			x = origin[ 1 ] / original.width;
		}

		return {
			x: x,
			y: y
		};
	},

	// Creates a placeholder element so that the original element can be made absolute
	createPlaceholder: function( element ) {
		var placeholder,
			cssPosition = element.css( "position" ),
			position = element.position();

		// Lock in margins first to account for form elements, which
		// will change margin if you explicitly set height
		// see: http://jsfiddle.net/JZSMt/3/ https://bugs.webkit.org/show_bug.cgi?id=107380
		// Support: Safari
		element.css( {
			marginTop: element.css( "marginTop" ),
			marginBottom: element.css( "marginBottom" ),
			marginLeft: element.css( "marginLeft" ),
			marginRight: element.css( "marginRight" )
		} )
		.outerWidth( element.outerWidth() )
		.outerHeight( element.outerHeight() );

		if ( /^(static|relative)/.test( cssPosition ) ) {
			cssPosition = "absolute";

			placeholder = $( "<" + element[ 0 ].nodeName + ">" ).insertAfter( element ).css( {

				// Convert inline to inline block to account for inline elements
				// that turn to inline block based on content (like img)
				display: /^(inline|ruby)/.test( element.css( "display" ) ) ?
					"inline-block" :
					"block",
				visibility: "hidden",

				// Margins need to be set to account for margin collapse
				marginTop: element.css( "marginTop" ),
				marginBottom: element.css( "marginBottom" ),
				marginLeft: element.css( "marginLeft" ),
				marginRight: element.css( "marginRight" ),
				"float": element.css( "float" )
			} )
			.outerWidth( element.outerWidth() )
			.outerHeight( element.outerHeight() )
			.addClass( "ui-effects-placeholder" );

			element.data( dataSpace + "placeholder", placeholder );
		}

		element.css( {
			position: cssPosition,
			left: position.left,
			top: position.top
		} );

		return placeholder;
	},

	removePlaceholder: function( element ) {
		var dataKey = dataSpace + "placeholder",
				placeholder = element.data( dataKey );

		if ( placeholder ) {
			placeholder.remove();
			element.removeData( dataKey );
		}
	},

	// Removes a placeholder if it exists and restores
	// properties that were modified during placeholder creation
	cleanUp: function( element ) {
		$.effects.restoreStyle( element );
		$.effects.removePlaceholder( element );
	},

	setTransition: function( element, list, factor, value ) {
		value = value || {};
		$.each( list, function( i, x ) {
			var unit = element.cssUnit( x );
			if ( unit[ 0 ] > 0 ) {
				value[ x ] = unit[ 0 ] * factor + unit[ 1 ];
			}
		} );
		return value;
	}
} );

// Return an effect options object for the given parameters:
function _normalizeArguments( effect, options, speed, callback ) {

	// Allow passing all options as the first parameter
	if ( $.isPlainObject( effect ) ) {
		options = effect;
		effect = effect.effect;
	}

	// Convert to an object
	effect = { effect: effect };

	// Catch (effect, null, ...)
	if ( options == null ) {
		options = {};
	}

	// Catch (effect, callback)
	if ( $.isFunction( options ) ) {
		callback = options;
		speed = null;
		options = {};
	}

	// Catch (effect, speed, ?)
	if ( typeof options === "number" || $.fx.speeds[ options ] ) {
		callback = speed;
		speed = options;
		options = {};
	}

	// Catch (effect, options, callback)
	if ( $.isFunction( speed ) ) {
		callback = speed;
		speed = null;
	}

	// Add options to effect
	if ( options ) {
		$.extend( effect, options );
	}

	speed = speed || options.duration;
	effect.duration = $.fx.off ? 0 :
		typeof speed === "number" ? speed :
		speed in $.fx.speeds ? $.fx.speeds[ speed ] :
		$.fx.speeds._default;

	effect.complete = callback || options.complete;

	return effect;
}

function standardAnimationOption( option ) {

	// Valid standard speeds (nothing, number, named speed)
	if ( !option || typeof option === "number" || $.fx.speeds[ option ] ) {
		return true;
	}

	// Invalid strings - treat as "normal" speed
	if ( typeof option === "string" && !$.effects.effect[ option ] ) {
		return true;
	}

	// Complete callback
	if ( $.isFunction( option ) ) {
		return true;
	}

	// Options hash (but not naming an effect)
	if ( typeof option === "object" && !option.effect ) {
		return true;
	}

	// Didn't match any standard API
	return false;
}

$.fn.extend( {
	effect: function( /* effect, options, speed, callback */ ) {
		var args = _normalizeArguments.apply( this, arguments ),
			effectMethod = $.effects.effect[ args.effect ],
			defaultMode = effectMethod.mode,
			queue = args.queue,
			queueName = queue || "fx",
			complete = args.complete,
			mode = args.mode,
			modes = [],
			prefilter = function( next ) {
				var el = $( this ),
					normalizedMode = $.effects.mode( el, mode ) || defaultMode;

				// Sentinel for duck-punching the :animated psuedo-selector
				el.data( dataSpaceAnimated, true );

				// Save effect mode for later use,
				// we can't just call $.effects.mode again later,
				// as the .show() below destroys the initial state
				modes.push( normalizedMode );

				// See $.uiBackCompat inside of run() for removal of defaultMode in 1.13
				if ( defaultMode && ( normalizedMode === "show" ||
						( normalizedMode === defaultMode && normalizedMode === "hide" ) ) ) {
					el.show();
				}

				if ( !defaultMode || normalizedMode !== "none" ) {
					$.effects.saveStyle( el );
				}

				if ( $.isFunction( next ) ) {
					next();
				}
			};

		if ( $.fx.off || !effectMethod ) {

			// Delegate to the original method (e.g., .show()) if possible
			if ( mode ) {
				return this[ mode ]( args.duration, complete );
			} else {
				return this.each( function() {
					if ( complete ) {
						complete.call( this );
					}
				} );
			}
		}

		function run( next ) {
			var elem = $( this );

			function cleanup() {
				elem.removeData( dataSpaceAnimated );

				$.effects.cleanUp( elem );

				if ( args.mode === "hide" ) {
					elem.hide();
				}

				done();
			}

			function done() {
				if ( $.isFunction( complete ) ) {
					complete.call( elem[ 0 ] );
				}

				if ( $.isFunction( next ) ) {
					next();
				}
			}

			// Override mode option on a per element basis,
			// as toggle can be either show or hide depending on element state
			args.mode = modes.shift();

			if ( $.uiBackCompat !== false && !defaultMode ) {
				if ( elem.is( ":hidden" ) ? mode === "hide" : mode === "show" ) {

					// Call the core method to track "olddisplay" properly
					elem[ mode ]();
					done();
				} else {
					effectMethod.call( elem[ 0 ], args, done );
				}
			} else {
				if ( args.mode === "none" ) {

					// Call the core method to track "olddisplay" properly
					elem[ mode ]();
					done();
				} else {
					effectMethod.call( elem[ 0 ], args, cleanup );
				}
			}
		}

		// Run prefilter on all elements first to ensure that
		// any showing or hiding happens before placeholder creation,
		// which ensures that any layout changes are correctly captured.
		return queue === false ?
			this.each( prefilter ).each( run ) :
			this.queue( queueName, prefilter ).queue( queueName, run );
	},

	show: ( function( orig ) {
		return function( option ) {
			if ( standardAnimationOption( option ) ) {
				return orig.apply( this, arguments );
			} else {
				var args = _normalizeArguments.apply( this, arguments );
				args.mode = "show";
				return this.effect.call( this, args );
			}
		};
	} )( $.fn.show ),

	hide: ( function( orig ) {
		return function( option ) {
			if ( standardAnimationOption( option ) ) {
				return orig.apply( this, arguments );
			} else {
				var args = _normalizeArguments.apply( this, arguments );
				args.mode = "hide";
				return this.effect.call( this, args );
			}
		};
	} )( $.fn.hide ),

	toggle: ( function( orig ) {
		return function( option ) {
			if ( standardAnimationOption( option ) || typeof option === "boolean" ) {
				return orig.apply( this, arguments );
			} else {
				var args = _normalizeArguments.apply( this, arguments );
				args.mode = "toggle";
				return this.effect.call( this, args );
			}
		};
	} )( $.fn.toggle ),

	cssUnit: function( key ) {
		var style = this.css( key ),
			val = [];

		$.each( [ "em", "px", "%", "pt" ], function( i, unit ) {
			if ( style.indexOf( unit ) > 0 ) {
				val = [ parseFloat( style ), unit ];
			}
		} );
		return val;
	},

	cssClip: function( clipObj ) {
		if ( clipObj ) {
			return this.css( "clip", "rect(" + clipObj.top + "px " + clipObj.right + "px " +
				clipObj.bottom + "px " + clipObj.left + "px)" );
		}
		return parseClip( this.css( "clip" ), this );
	},

	transfer: function( options, done ) {
		var element = $( this ),
			target = $( options.to ),
			targetFixed = target.css( "position" ) === "fixed",
			body = $( "body" ),
			fixTop = targetFixed ? body.scrollTop() : 0,
			fixLeft = targetFixed ? body.scrollLeft() : 0,
			endPosition = target.offset(),
			animation = {
				top: endPosition.top - fixTop,
				left: endPosition.left - fixLeft,
				height: target.innerHeight(),
				width: target.innerWidth()
			},
			startPosition = element.offset(),
			transfer = $( "<div class='ui-effects-transfer'></div>" )
				.appendTo( "body" )
				.addClass( options.className )
				.css( {
					top: startPosition.top - fixTop,
					left: startPosition.left - fixLeft,
					height: element.innerHeight(),
					width: element.innerWidth(),
					position: targetFixed ? "fixed" : "absolute"
				} )
				.animate( animation, options.duration, options.easing, function() {
					transfer.remove();
					if ( $.isFunction( done ) ) {
						done();
					}
				} );
	}
} );

function parseClip( str, element ) {
		var outerWidth = element.outerWidth(),
			outerHeight = element.outerHeight(),
			clipRegex = /^rect\((-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto)\)$/,
			values = clipRegex.exec( str ) || [ "", 0, outerWidth, outerHeight, 0 ];

		return {
			top: parseFloat( values[ 1 ] ) || 0,
			right: values[ 2 ] === "auto" ? outerWidth : parseFloat( values[ 2 ] ),
			bottom: values[ 3 ] === "auto" ? outerHeight : parseFloat( values[ 3 ] ),
			left: parseFloat( values[ 4 ] ) || 0
		};
}

$.fx.step.clip = function( fx ) {
	if ( !fx.clipInit ) {
		fx.start = $( fx.elem ).cssClip();
		if ( typeof fx.end === "string" ) {
			fx.end = parseClip( fx.end, fx.elem );
		}
		fx.clipInit = true;
	}

	$( fx.elem ).cssClip( {
		top: fx.pos * ( fx.end.top - fx.start.top ) + fx.start.top,
		right: fx.pos * ( fx.end.right - fx.start.right ) + fx.start.right,
		bottom: fx.pos * ( fx.end.bottom - fx.start.bottom ) + fx.start.bottom,
		left: fx.pos * ( fx.end.left - fx.start.left ) + fx.start.left
	} );
};

} )();

/******************************************************************************/
/*********************************** EASING ***********************************/
/******************************************************************************/

( function() {

// Based on easing equations from Robert Penner (http://www.robertpenner.com/easing)

var baseEasings = {};

$.each( [ "Quad", "Cubic", "Quart", "Quint", "Expo" ], function( i, name ) {
	baseEasings[ name ] = function( p ) {
		return Math.pow( p, i + 2 );
	};
} );

$.extend( baseEasings, {
	Sine: function( p ) {
		return 1 - Math.cos( p * Math.PI / 2 );
	},
	Circ: function( p ) {
		return 1 - Math.sqrt( 1 - p * p );
	},
	Elastic: function( p ) {
		return p === 0 || p === 1 ? p :
			-Math.pow( 2, 8 * ( p - 1 ) ) * Math.sin( ( ( p - 1 ) * 80 - 7.5 ) * Math.PI / 15 );
	},
	Back: function( p ) {
		return p * p * ( 3 * p - 2 );
	},
	Bounce: function( p ) {
		var pow2,
			bounce = 4;

		while ( p < ( ( pow2 = Math.pow( 2, --bounce ) ) - 1 ) / 11 ) {}
		return 1 / Math.pow( 4, 3 - bounce ) - 7.5625 * Math.pow( ( pow2 * 3 - 2 ) / 22 - p, 2 );
	}
} );

$.each( baseEasings, function( name, easeIn ) {
	$.easing[ "easeIn" + name ] = easeIn;
	$.easing[ "easeOut" + name ] = function( p ) {
		return 1 - easeIn( 1 - p );
	};
	$.easing[ "easeInOut" + name ] = function( p ) {
		return p < 0.5 ?
			easeIn( p * 2 ) / 2 :
			1 - easeIn( p * -2 + 2 ) / 2;
	};
} );

} )();

var effect = $.effects;


/*!
 * jQuery UI Effects Blind 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */

//>>label: Blind Effect
//>>group: Effects
//>>description: Blinds the element.
//>>docs: http://api.jqueryui.com/blind-effect/
//>>demos: http://jqueryui.com/effect/



var effectsEffectBlind = $.effects.define( "blind", "hide", function( options, done ) {
	var map = {
			up: [ "bottom", "top" ],
			vertical: [ "bottom", "top" ],
			down: [ "top", "bottom" ],
			left: [ "right", "left" ],
			horizontal: [ "right", "left" ],
			right: [ "left", "right" ]
		},
		element = $( this ),
		direction = options.direction || "up",
		start = element.cssClip(),
		animate = { clip: $.extend( {}, start ) },
		placeholder = $.effects.createPlaceholder( element );

	animate.clip[ map[ direction ][ 0 ] ] = animate.clip[ map[ direction ][ 1 ] ];

	if ( options.mode === "show" ) {
		element.cssClip( animate.clip );
		if ( placeholder ) {
			placeholder.css( $.effects.clipToBox( animate ) );
		}

		animate.clip = start;
	}

	if ( placeholder ) {
		placeholder.animate( $.effects.clipToBox( animate ), options.duration, options.easing );
	}

	element.animate( animate, {
		queue: false,
		duration: options.duration,
		easing: options.easing,
		complete: done
	} );
} );

}));


/***/ }),
/* 303 */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*!
 * jquery.fancytree.glyph.js
 *
 * Use glyph-fonts, ligature-fonts, or SVG icons instead of icon sprites.
 * (Extension module for jquery.fancytree.js: https://github.com/mar10/fancytree/)
 *
 * Copyright (c) 2008-2018, Martin Wendt (http://wwWendt.de)
 *
 * Released under the MIT license
 * https://github.com/mar10/fancytree/wiki/LicenseInfo
 *
 * @version 2.28.1
 * @date 2018-03-19T06:47:37Z
 */

;(function( factory ) {
	if ( true ) {
		// AMD. Register as an anonymous module.
		!(__WEBPACK_AMD_DEFINE_ARRAY__ = [ __webpack_require__(27), __webpack_require__(91) ], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),
				__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?
				(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
	} else if ( typeof module === "object" && module.exports ) {
		// Node/CommonJS
		require("./jquery.fancytree");
		module.exports = factory(require("jquery"));
	} else {
		// Browser globals
		factory( jQuery );
	}

}( function( $ ) {

"use strict";

/* *****************************************************************************
 * Private functions and variables
 */

var FT = $.ui.fancytree,
	PRESETS = {
		"awesome3": {  // Outdated!
			_addClass: "",
			checkbox: "icon-check-empty",
			checkboxSelected: "icon-check",
			checkboxUnknown: "icon-check icon-muted",
			dragHelper: "icon-caret-right",
			dropMarker: "icon-caret-right",
			error: "icon-exclamation-sign",
			expanderClosed: "icon-caret-right",
			expanderLazy: "icon-angle-right",
			expanderOpen: "icon-caret-down",
			loading: "icon-refresh icon-spin",
			nodata: "icon-meh",
			noExpander: "",
			radio: "icon-circle-blank",
			radioSelected: "icon-circle",
			// radioUnknown: "icon-circle icon-muted",
			// Default node icons.
			// (Use tree.options.icon callback to define custom icons based on node data)
			doc: "icon-file-alt",
			docOpen: "icon-file-alt",
			folder: "icon-folder-close-alt",
			folderOpen: "icon-folder-open-alt"
			},
		"awesome4": {
			_addClass: "fa",
			checkbox: "fa-square-o",
			checkboxSelected: "fa-check-square-o",
			checkboxUnknown: "fa-square fancytree-helper-indeterminate-cb",
			dragHelper: "fa-arrow-right",
			dropMarker: "fa-long-arrow-right",
			error: "fa-warning",
			expanderClosed: "fa-caret-right",
			expanderLazy: "fa-angle-right",
			expanderOpen: "fa-caret-down",
			// We may prevent wobbling rotations on FF by creating a separate sub element:
			loading: {html: "<span class='fa fa-spinner fa-pulse' />"},
			nodata: "fa-meh-o",
			noExpander: "",
			radio: "fa-circle-thin",  // "fa-circle-o"
			radioSelected: "fa-circle",
			// radioUnknown: "fa-dot-circle-o",
			// Default node icons.
			// (Use tree.options.icon callback to define custom icons based on node data)
			doc: "fa-file-o",
			docOpen: "fa-file-o",
			folder: "fa-folder-o",
			folderOpen: "fa-folder-open-o"
			},
		"awesome5": {
			// fontawesome 5 have several different base classes
			// "far, fas, fal and fab" The rendered svg puts that prefix
			// in a different location so we have to keep them separate here
			_addClass: "",
			checkbox: "far fa-square",
			checkboxSelected: "far fa-check-square",
			// checkboxUnknown: "far fa-window-close",
			checkboxUnknown: "fas fa-square fancytree-helper-indeterminate-cb",
			radio: "far fa-circle",
			radioSelected: "fas fa-circle",
			radioUnknown: "far fa-dot-circle",
			dragHelper: "fas fa-arrow-right",
			dropMarker: "fas fa-long-arrow-right",
			error: "fas fa-exclamation-triangle",
			expanderClosed: "fas fa-caret-right",
			expanderLazy: "fas fa-angle-right",
			expanderOpen: "fas fa-caret-down",
			loading: "fas fa-spinner fa-pulse",
			nodata: "far fa-meh",
			noExpander: "",
			// Default node icons.
			// (Use tree.options.icon callback to define custom icons based on node data)
			doc: "far fa-file",
			docOpen: "far fa-file",
			folder: "far fa-folder",
			folderOpen: "far fa-folder-open"
			},
		"bootstrap3": {
			_addClass: "glyphicon",
			checkbox: "glyphicon-unchecked",
			checkboxSelected: "glyphicon-check",
			checkboxUnknown: "glyphicon-expand fancytree-helper-indeterminate-cb",  // "glyphicon-share",
			dragHelper: "glyphicon-play",
			dropMarker: "glyphicon-arrow-right",
			error: "glyphicon-warning-sign",
			expanderClosed: "glyphicon-menu-right",  // glyphicon-plus-sign
			expanderLazy: "glyphicon-menu-right",  // glyphicon-plus-sign
			expanderOpen: "glyphicon-menu-down",  // glyphicon-minus-sign
			loading: "glyphicon-refresh fancytree-helper-spin",
			nodata: "glyphicon-info-sign",
			noExpander: "",
			radio: "glyphicon-remove-circle",  // "glyphicon-unchecked",
			radioSelected: "glyphicon-ok-circle",  // "glyphicon-check",
			// radioUnknown: "glyphicon-ban-circle",
			// Default node icons.
			// (Use tree.options.icon callback to define custom icons based on node data)
			doc: "glyphicon-file",
			docOpen: "glyphicon-file",
			folder: "glyphicon-folder-close",
			folderOpen: "glyphicon-folder-open"
			},
		"material": {
			_addClass: "material-icons",
			checkbox: { text: "check_box_outline_blank" },
			checkboxSelected: { text: "check_box" },
			checkboxUnknown: { text: "indeterminate_check_box" },
			dragHelper: { text: "play_arrow" },
			dropMarker: { text: "arrow-forward" },
			error: { text: "warning" },
			expanderClosed: { text: "chevron_right" },
			expanderLazy: { text: "last_page" },
			expanderOpen: { text: "expand_more" },
			loading: { text: "autorenew", addClass: "fancytree-helper-spin" },
			nodata: { text: "info" },
			noExpander: { text: "" },
			radio: { text: "radio_button_unchecked" },
			radioSelected: { text: "radio_button_checked" },
			// Default node icons.
			// (Use tree.options.icon callback to define custom icons based on node data)
			doc: { text: "insert_drive_file" },
			docOpen: { text: "insert_drive_file" },
			folder: { text: "folder" },
			folderOpen: { text: "folder_open" }
			}
	};


function setIcon( span, baseClass, opts, type ) {
	var map = opts.map,
		icon = map[ type ],
		$span = $( span ),
		setClass = baseClass + " " + (map._addClass || "");

	if( typeof icon === "string" ) {
		$span.attr( "class", setClass + " " + icon );
	} else if ( icon ) {
		if( icon.text ) {
			// $span.text( "" + icon.text );
			span.textContent = "" + icon.text;
		} else if ( icon.html ) {
			// $(span).append($(icon.html));
			span.innerHTML = icon.html;
		}
		$span.attr( "class", setClass + " " + ( icon.addClass || "" ) );
	}
}


$.ui.fancytree.registerExtension({
	name: "glyph",
	version: "2.28.1",
	// Default options for this extension.
	options: {
		preset: null,  // 'awesome3', 'awesome4', 'bootstrap3', 'material'
		map: {
		}
	},

	treeInit: function(ctx){
		var tree = ctx.tree,
			opts = ctx.options.glyph;

		if( opts.preset ) {
			FT.assert( !!PRESETS[opts.preset],
				"Invalid value for `options.glyph.preset`: " + opts.preset);
			opts.map = $.extend({}, PRESETS[opts.preset], opts.map);
		} else {
			tree.warn("ext-glyph: missing `preset` option.");
		}
		this._superApply(arguments);
		tree.$container.addClass("fancytree-ext-glyph");
	},
	nodeRenderStatus: function(ctx) {
		var checkbox, icon, res, span,
			node = ctx.node,
			$span = $( node.span ),
			opts = ctx.options.glyph;

		res = this._super(ctx);

		if( node.isRoot() ){
			return res;
		}
		span = $span.children("span.fancytree-expander").get(0);
		if( span ){
			// if( node.isLoading() ){
				// icon = "loading";
			if( node.expanded && node.hasChildren() ){
				icon = "expanderOpen";
			}else if( node.isUndefined() ){
				icon = "expanderLazy";
			}else if( node.hasChildren() ){
				icon = "expanderClosed";
			}else{
				icon = "noExpander";
			}
			// span.className = "fancytree-expander " + map[icon];
			setIcon( span, "fancytree-expander", opts, icon );
		}

		if( node.tr ){
			span = $("td", node.tr).find("span.fancytree-checkbox").get(0);
		}else{
			span = $span.children("span.fancytree-checkbox").get(0);
		}
		if( span ) {
			checkbox = FT.evalOption("checkbox", node, node, opts, false);
			if( (node.parent && node.parent.radiogroup ) || checkbox === "radio" ) {
				icon = node.selected ? "radioSelected" : "radio";
				setIcon( span, "fancytree-checkbox fancytree-radio", opts, icon );
			} else {
				icon = node.selected ? "checkboxSelected" : (node.partsel ? "checkboxUnknown" : "checkbox");
				// span.className = "fancytree-checkbox " + map[icon];
				setIcon( span, "fancytree-checkbox", opts, icon );
			}
		}

		// Standard icon (note that this does not match .fancytree-custom-icon,
		// that might be set by opts.icon callbacks)
		span = $span.children("span.fancytree-icon").get(0);
		if( span ){
			if( node.statusNodeType ){
				icon = node.statusNodeType; // loading, error
			}else if( node.folder ){
				icon = ( node.expanded && node.hasChildren() ) ? "folderOpen" : "folder";
			}else{
				icon = node.expanded ? "docOpen" : "doc";
			}
			setIcon( span, "fancytree-icon", opts, icon );
		}
		return res;
	},
	nodeSetStatus: function(ctx, status, message, details) {
		var res, span,
			opts = ctx.options.glyph,
			node = ctx.node;

		res = this._superApply(arguments);

		if( status === "error" || status === "loading" || status === "nodata" ){
			if(node.parent){
				span = $("span.fancytree-expander", node.span).get(0);
				if( span ) {
					setIcon( span, "fancytree-expander", opts, status );
				}
			}else{ //
				span = $(".fancytree-statusnode-" + status, node[this.nodeContainerAttrName])
					.find("span.fancytree-icon").get(0);
				if( span ) {
					setIcon( span, "fancytree-icon", opts, status );
				}
			}
		}
		return res;
	}
});
// Value returned by `require('jquery.fancytree..')`
return $.ui.fancytree;
}));  // End of closure


/***/ }),
/* 304 */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;var require;var require;/*!
 * Select2 4.0.6-rc.1
 * https://select2.github.io
 *
 * Released under the MIT license
 * https://github.com/select2/select2/blob/master/LICENSE.md
 */
;(function (factory) {
  if (true) {
    // AMD. Register as an anonymous module.
    !(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(27)], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory),
				__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?
				(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
  } else if (typeof module === 'object' && module.exports) {
    // Node/CommonJS
    module.exports = function (root, jQuery) {
      if (jQuery === undefined) {
        // require('jQuery') returns a factory that requires window to
        // build a jQuery instance, we normalize how we use modules
        // that require this pattern but the window provided is a noop
        // if it's defined (how jquery works)
        if (typeof window !== 'undefined') {
          jQuery = require('jquery');
        }
        else {
          jQuery = require('jquery')(root);
        }
      }
      factory(jQuery);
      return jQuery;
    };
  } else {
    // Browser globals
    factory(jQuery);
  }
} (function (jQuery) {
  // This is needed so we can catch the AMD loader configuration and use it
  // The inner file should be wrapped (by `banner.start.js`) in a function that
  // returns the AMD loader references.
  var S2 =(function () {
  // Restore the Select2 AMD loader so it can be used
  // Needed mostly in the language files, where the loader is not inserted
  if (jQuery && jQuery.fn && jQuery.fn.select2 && jQuery.fn.select2.amd) {
    var S2 = jQuery.fn.select2.amd;
  }
var S2;(function () { if (!S2 || !S2.requirejs) {
if (!S2) { S2 = {}; } else { require = S2; }
/**
 * @license almond 0.3.3 Copyright jQuery Foundation and other contributors.
 * Released under MIT license, http://github.com/requirejs/almond/LICENSE
 */
//Going sloppy to avoid 'use strict' string cost, but strict practices should
//be followed.
/*global setTimeout: false */

var requirejs, require, define;
(function (undef) {
    var main, req, makeMap, handlers,
        defined = {},
        waiting = {},
        config = {},
        defining = {},
        hasOwn = Object.prototype.hasOwnProperty,
        aps = [].slice,
        jsSuffixRegExp = /\.js$/;

    function hasProp(obj, prop) {
        return hasOwn.call(obj, prop);
    }

    /**
     * Given a relative module name, like ./something, normalize it to
     * a real name that can be mapped to a path.
     * @param {String} name the relative name
     * @param {String} baseName a real name that the name arg is relative
     * to.
     * @returns {String} normalized name
     */
    function normalize(name, baseName) {
        var nameParts, nameSegment, mapValue, foundMap, lastIndex,
            foundI, foundStarMap, starI, i, j, part, normalizedBaseParts,
            baseParts = baseName && baseName.split("/"),
            map = config.map,
            starMap = (map && map['*']) || {};

        //Adjust any relative paths.
        if (name) {
            name = name.split('/');
            lastIndex = name.length - 1;

            // If wanting node ID compatibility, strip .js from end
            // of IDs. Have to do this here, and not in nameToUrl
            // because node allows either .js or non .js to map
            // to same file.
            if (config.nodeIdCompat && jsSuffixRegExp.test(name[lastIndex])) {
                name[lastIndex] = name[lastIndex].replace(jsSuffixRegExp, '');
            }

            // Starts with a '.' so need the baseName
            if (name[0].charAt(0) === '.' && baseParts) {
                //Convert baseName to array, and lop off the last part,
                //so that . matches that 'directory' and not name of the baseName's
                //module. For instance, baseName of 'one/two/three', maps to
                //'one/two/three.js', but we want the directory, 'one/two' for
                //this normalization.
                normalizedBaseParts = baseParts.slice(0, baseParts.length - 1);
                name = normalizedBaseParts.concat(name);
            }

            //start trimDots
            for (i = 0; i < name.length; i++) {
                part = name[i];
                if (part === '.') {
                    name.splice(i, 1);
                    i -= 1;
                } else if (part === '..') {
                    // If at the start, or previous value is still ..,
                    // keep them so that when converted to a path it may
                    // still work when converted to a path, even though
                    // as an ID it is less than ideal. In larger point
                    // releases, may be better to just kick out an error.
                    if (i === 0 || (i === 1 && name[2] === '..') || name[i - 1] === '..') {
                        continue;
                    } else if (i > 0) {
                        name.splice(i - 1, 2);
                        i -= 2;
                    }
                }
            }
            //end trimDots

            name = name.join('/');
        }

        //Apply map config if available.
        if ((baseParts || starMap) && map) {
            nameParts = name.split('/');

            for (i = nameParts.length; i > 0; i -= 1) {
                nameSegment = nameParts.slice(0, i).join("/");

                if (baseParts) {
                    //Find the longest baseName segment match in the config.
                    //So, do joins on the biggest to smallest lengths of baseParts.
                    for (j = baseParts.length; j > 0; j -= 1) {
                        mapValue = map[baseParts.slice(0, j).join('/')];

                        //baseName segment has  config, find if it has one for
                        //this name.
                        if (mapValue) {
                            mapValue = mapValue[nameSegment];
                            if (mapValue) {
                                //Match, update name to the new value.
                                foundMap = mapValue;
                                foundI = i;
                                break;
                            }
                        }
                    }
                }

                if (foundMap) {
                    break;
                }

                //Check for a star map match, but just hold on to it,
                //if there is a shorter segment match later in a matching
                //config, then favor over this star map.
                if (!foundStarMap && starMap && starMap[nameSegment]) {
                    foundStarMap = starMap[nameSegment];
                    starI = i;
                }
            }

            if (!foundMap && foundStarMap) {
                foundMap = foundStarMap;
                foundI = starI;
            }

            if (foundMap) {
                nameParts.splice(0, foundI, foundMap);
                name = nameParts.join('/');
            }
        }

        return name;
    }

    function makeRequire(relName, forceSync) {
        return function () {
            //A version of a require function that passes a moduleName
            //value for items that may need to
            //look up paths relative to the moduleName
            var args = aps.call(arguments, 0);

            //If first arg is not require('string'), and there is only
            //one arg, it is the array form without a callback. Insert
            //a null so that the following concat is correct.
            if (typeof args[0] !== 'string' && args.length === 1) {
                args.push(null);
            }
            return req.apply(undef, args.concat([relName, forceSync]));
        };
    }

    function makeNormalize(relName) {
        return function (name) {
            return normalize(name, relName);
        };
    }

    function makeLoad(depName) {
        return function (value) {
            defined[depName] = value;
        };
    }

    function callDep(name) {
        if (hasProp(waiting, name)) {
            var args = waiting[name];
            delete waiting[name];
            defining[name] = true;
            main.apply(undef, args);
        }

        if (!hasProp(defined, name) && !hasProp(defining, name)) {
            throw new Error('No ' + name);
        }
        return defined[name];
    }

    //Turns a plugin!resource to [plugin, resource]
    //with the plugin being undefined if the name
    //did not have a plugin prefix.
    function splitPrefix(name) {
        var prefix,
            index = name ? name.indexOf('!') : -1;
        if (index > -1) {
            prefix = name.substring(0, index);
            name = name.substring(index + 1, name.length);
        }
        return [prefix, name];
    }

    //Creates a parts array for a relName where first part is plugin ID,
    //second part is resource ID. Assumes relName has already been normalized.
    function makeRelParts(relName) {
        return relName ? splitPrefix(relName) : [];
    }

    /**
     * Makes a name map, normalizing the name, and using a plugin
     * for normalization if necessary. Grabs a ref to plugin
     * too, as an optimization.
     */
    makeMap = function (name, relParts) {
        var plugin,
            parts = splitPrefix(name),
            prefix = parts[0],
            relResourceName = relParts[1];

        name = parts[1];

        if (prefix) {
            prefix = normalize(prefix, relResourceName);
            plugin = callDep(prefix);
        }

        //Normalize according
        if (prefix) {
            if (plugin && plugin.normalize) {
                name = plugin.normalize(name, makeNormalize(relResourceName));
            } else {
                name = normalize(name, relResourceName);
            }
        } else {
            name = normalize(name, relResourceName);
            parts = splitPrefix(name);
            prefix = parts[0];
            name = parts[1];
            if (prefix) {
                plugin = callDep(prefix);
            }
        }

        //Using ridiculous property names for space reasons
        return {
            f: prefix ? prefix + '!' + name : name, //fullName
            n: name,
            pr: prefix,
            p: plugin
        };
    };

    function makeConfig(name) {
        return function () {
            return (config && config.config && config.config[name]) || {};
        };
    }

    handlers = {
        require: function (name) {
            return makeRequire(name);
        },
        exports: function (name) {
            var e = defined[name];
            if (typeof e !== 'undefined') {
                return e;
            } else {
                return (defined[name] = {});
            }
        },
        module: function (name) {
            return {
                id: name,
                uri: '',
                exports: defined[name],
                config: makeConfig(name)
            };
        }
    };

    main = function (name, deps, callback, relName) {
        var cjsModule, depName, ret, map, i, relParts,
            args = [],
            callbackType = typeof callback,
            usingExports;

        //Use name if no relName
        relName = relName || name;
        relParts = makeRelParts(relName);

        //Call the callback to define the module, if necessary.
        if (callbackType === 'undefined' || callbackType === 'function') {
            //Pull out the defined dependencies and pass the ordered
            //values to the callback.
            //Default to [require, exports, module] if no deps
            deps = !deps.length && callback.length ? ['require', 'exports', 'module'] : deps;
            for (i = 0; i < deps.length; i += 1) {
                map = makeMap(deps[i], relParts);
                depName = map.f;

                //Fast path CommonJS standard dependencies.
                if (depName === "require") {
                    args[i] = handlers.require(name);
                } else if (depName === "exports") {
                    //CommonJS module spec 1.1
                    args[i] = handlers.exports(name);
                    usingExports = true;
                } else if (depName === "module") {
                    //CommonJS module spec 1.1
                    cjsModule = args[i] = handlers.module(name);
                } else if (hasProp(defined, depName) ||
                           hasProp(waiting, depName) ||
                           hasProp(defining, depName)) {
                    args[i] = callDep(depName);
                } else if (map.p) {
                    map.p.load(map.n, makeRequire(relName, true), makeLoad(depName), {});
                    args[i] = defined[depName];
                } else {
                    throw new Error(name + ' missing ' + depName);
                }
            }

            ret = callback ? callback.apply(defined[name], args) : undefined;

            if (name) {
                //If setting exports via "module" is in play,
                //favor that over return value and exports. After that,
                //favor a non-undefined return value over exports use.
                if (cjsModule && cjsModule.exports !== undef &&
                        cjsModule.exports !== defined[name]) {
                    defined[name] = cjsModule.exports;
                } else if (ret !== undef || !usingExports) {
                    //Use the return value from the function.
                    defined[name] = ret;
                }
            }
        } else if (name) {
            //May just be an object definition for the module. Only
            //worry about defining if have a module name.
            defined[name] = callback;
        }
    };

    requirejs = require = req = function (deps, callback, relName, forceSync, alt) {
        if (typeof deps === "string") {
            if (handlers[deps]) {
                //callback in this case is really relName
                return handlers[deps](callback);
            }
            //Just return the module wanted. In this scenario, the
            //deps arg is the module name, and second arg (if passed)
            //is just the relName.
            //Normalize module name, if it contains . or ..
            return callDep(makeMap(deps, makeRelParts(callback)).f);
        } else if (!deps.splice) {
            //deps is a config object, not an array.
            config = deps;
            if (config.deps) {
                req(config.deps, config.callback);
            }
            if (!callback) {
                return;
            }

            if (callback.splice) {
                //callback is an array, which means it is a dependency list.
                //Adjust args if there are dependencies
                deps = callback;
                callback = relName;
                relName = null;
            } else {
                deps = undef;
            }
        }

        //Support require(['a'])
        callback = callback || function () {};

        //If relName is a function, it is an errback handler,
        //so remove it.
        if (typeof relName === 'function') {
            relName = forceSync;
            forceSync = alt;
        }

        //Simulate async callback;
        if (forceSync) {
            main(undef, deps, callback, relName);
        } else {
            //Using a non-zero value because of concern for what old browsers
            //do, and latest browsers "upgrade" to 4 if lower value is used:
            //http://www.whatwg.org/specs/web-apps/current-work/multipage/timers.html#dom-windowtimers-settimeout:
            //If want a value immediately, use require('id') instead -- something
            //that works in almond on the global level, but not guaranteed and
            //unlikely to work in other AMD implementations.
            setTimeout(function () {
                main(undef, deps, callback, relName);
            }, 4);
        }

        return req;
    };

    /**
     * Just drops the config on the floor, but returns req in case
     * the config return value is used.
     */
    req.config = function (cfg) {
        return req(cfg);
    };

    /**
     * Expose module registry for debugging and tooling
     */
    requirejs._defined = defined;

    define = function (name, deps, callback) {
        if (typeof name !== 'string') {
            throw new Error('See almond README: incorrect module build, no module name');
        }

        //This module may not have dependencies
        if (!deps.splice) {
            //deps is not an array, so probably means
            //an object literal or factory function for
            //the value. Adjust args.
            callback = deps;
            deps = [];
        }

        if (!hasProp(defined, name) && !hasProp(waiting, name)) {
            waiting[name] = [name, deps, callback];
        }
    };

    define.amd = {
        jQuery: true
    };
}());

S2.requirejs = requirejs;S2.require = require;S2.define = define;
}
}());
S2.define("almond", function(){});

/* global jQuery:false, $:false */
S2.define('jquery',[],function () {
  var _$ = jQuery || $;

  if (_$ == null && console && console.error) {
    console.error(
      'Select2: An instance of jQuery or a jQuery-compatible library was not ' +
      'found. Make sure that you are including jQuery before Select2 on your ' +
      'web page.'
    );
  }

  return _$;
});

S2.define('select2/utils',[
  'jquery'
], function ($) {
  var Utils = {};

  Utils.Extend = function (ChildClass, SuperClass) {
    var __hasProp = {}.hasOwnProperty;

    function BaseConstructor () {
      this.constructor = ChildClass;
    }

    for (var key in SuperClass) {
      if (__hasProp.call(SuperClass, key)) {
        ChildClass[key] = SuperClass[key];
      }
    }

    BaseConstructor.prototype = SuperClass.prototype;
    ChildClass.prototype = new BaseConstructor();
    ChildClass.__super__ = SuperClass.prototype;

    return ChildClass;
  };

  function getMethods (theClass) {
    var proto = theClass.prototype;

    var methods = [];

    for (var methodName in proto) {
      var m = proto[methodName];

      if (typeof m !== 'function') {
        continue;
      }

      if (methodName === 'constructor') {
        continue;
      }

      methods.push(methodName);
    }

    return methods;
  }

  Utils.Decorate = function (SuperClass, DecoratorClass) {
    var decoratedMethods = getMethods(DecoratorClass);
    var superMethods = getMethods(SuperClass);

    function DecoratedClass () {
      var unshift = Array.prototype.unshift;

      var argCount = DecoratorClass.prototype.constructor.length;

      var calledConstructor = SuperClass.prototype.constructor;

      if (argCount > 0) {
        unshift.call(arguments, SuperClass.prototype.constructor);

        calledConstructor = DecoratorClass.prototype.constructor;
      }

      calledConstructor.apply(this, arguments);
    }

    DecoratorClass.displayName = SuperClass.displayName;

    function ctr () {
      this.constructor = DecoratedClass;
    }

    DecoratedClass.prototype = new ctr();

    for (var m = 0; m < superMethods.length; m++) {
      var superMethod = superMethods[m];

      DecoratedClass.prototype[superMethod] =
        SuperClass.prototype[superMethod];
    }

    var calledMethod = function (methodName) {
      // Stub out the original method if it's not decorating an actual method
      var originalMethod = function () {};

      if (methodName in DecoratedClass.prototype) {
        originalMethod = DecoratedClass.prototype[methodName];
      }

      var decoratedMethod = DecoratorClass.prototype[methodName];

      return function () {
        var unshift = Array.prototype.unshift;

        unshift.call(arguments, originalMethod);

        return decoratedMethod.apply(this, arguments);
      };
    };

    for (var d = 0; d < decoratedMethods.length; d++) {
      var decoratedMethod = decoratedMethods[d];

      DecoratedClass.prototype[decoratedMethod] = calledMethod(decoratedMethod);
    }

    return DecoratedClass;
  };

  var Observable = function () {
    this.listeners = {};
  };

  Observable.prototype.on = function (event, callback) {
    this.listeners = this.listeners || {};

    if (event in this.listeners) {
      this.listeners[event].push(callback);
    } else {
      this.listeners[event] = [callback];
    }
  };

  Observable.prototype.trigger = function (event) {
    var slice = Array.prototype.slice;
    var params = slice.call(arguments, 1);

    this.listeners = this.listeners || {};

    // Params should always come in as an array
    if (params == null) {
      params = [];
    }

    // If there are no arguments to the event, use a temporary object
    if (params.length === 0) {
      params.push({});
    }

    // Set the `_type` of the first object to the event
    params[0]._type = event;

    if (event in this.listeners) {
      this.invoke(this.listeners[event], slice.call(arguments, 1));
    }

    if ('*' in this.listeners) {
      this.invoke(this.listeners['*'], arguments);
    }
  };

  Observable.prototype.invoke = function (listeners, params) {
    for (var i = 0, len = listeners.length; i < len; i++) {
      listeners[i].apply(this, params);
    }
  };

  Utils.Observable = Observable;

  Utils.generateChars = function (length) {
    var chars = '';

    for (var i = 0; i < length; i++) {
      var randomChar = Math.floor(Math.random() * 36);
      chars += randomChar.toString(36);
    }

    return chars;
  };

  Utils.bind = function (func, context) {
    return function () {
      func.apply(context, arguments);
    };
  };

  Utils._convertData = function (data) {
    for (var originalKey in data) {
      var keys = originalKey.split('-');

      var dataLevel = data;

      if (keys.length === 1) {
        continue;
      }

      for (var k = 0; k < keys.length; k++) {
        var key = keys[k];

        // Lowercase the first letter
        // By default, dash-separated becomes camelCase
        key = key.substring(0, 1).toLowerCase() + key.substring(1);

        if (!(key in dataLevel)) {
          dataLevel[key] = {};
        }

        if (k == keys.length - 1) {
          dataLevel[key] = data[originalKey];
        }

        dataLevel = dataLevel[key];
      }

      delete data[originalKey];
    }

    return data;
  };

  Utils.hasScroll = function (index, el) {
    // Adapted from the function created by @ShadowScripter
    // and adapted by @BillBarry on the Stack Exchange Code Review website.
    // The original code can be found at
    // http://codereview.stackexchange.com/q/13338
    // and was designed to be used with the Sizzle selector engine.

    var $el = $(el);
    var overflowX = el.style.overflowX;
    var overflowY = el.style.overflowY;

    //Check both x and y declarations
    if (overflowX === overflowY &&
        (overflowY === 'hidden' || overflowY === 'visible')) {
      return false;
    }

    if (overflowX === 'scroll' || overflowY === 'scroll') {
      return true;
    }

    return ($el.innerHeight() < el.scrollHeight ||
      $el.innerWidth() < el.scrollWidth);
  };

  Utils.escapeMarkup = function (markup) {
    var replaceMap = {
      '\\': '&#92;',
      '&': '&amp;',
      '<': '&lt;',
      '>': '&gt;',
      '"': '&quot;',
      '\'': '&#39;',
      '/': '&#47;'
    };

    // Do not try to escape the markup if it's not a string
    if (typeof markup !== 'string') {
      return markup;
    }

    return String(markup).replace(/[&<>"'\/\\]/g, function (match) {
      return replaceMap[match];
    });
  };

  // Append an array of jQuery nodes to a given element.
  Utils.appendMany = function ($element, $nodes) {
    // jQuery 1.7.x does not support $.fn.append() with an array
    // Fall back to a jQuery object collection using $.fn.add()
    if ($.fn.jquery.substr(0, 3) === '1.7') {
      var $jqNodes = $();

      $.map($nodes, function (node) {
        $jqNodes = $jqNodes.add(node);
      });

      $nodes = $jqNodes;
    }

    $element.append($nodes);
  };

  // Cache objects in Utils.__cache instead of $.data (see #4346)
  Utils.__cache = {};

  var id = 0;
  Utils.GetUniqueElementId = function (element) {
    // Get a unique element Id. If element has no id, 
    // creates a new unique number, stores it in the id 
    // attribute and returns the new id. 
    // If an id already exists, it simply returns it.

    var select2Id = element.getAttribute('data-select2-id');
    if (select2Id == null) {
      // If element has id, use it.
      if (element.id) {
        select2Id = element.id;
        element.setAttribute('data-select2-id', select2Id);
      } else {
        element.setAttribute('data-select2-id', ++id);
        select2Id = id.toString();
      }
    }
    return select2Id;
  };

  Utils.StoreData = function (element, name, value) {
    // Stores an item in the cache for a specified element.
    // name is the cache key.    
    var id = Utils.GetUniqueElementId(element);
    if (!Utils.__cache[id]) {
      Utils.__cache[id] = {};
    }

    Utils.__cache[id][name] = value;
  };

  Utils.GetData = function (element, name) {
    // Retrieves a value from the cache by its key (name)
    // name is optional. If no name specified, return 
    // all cache items for the specified element.
    // and for a specified element.
    var id = Utils.GetUniqueElementId(element);
    if (name) {
      if (Utils.__cache[id]) {
        return Utils.__cache[id][name] != null ? 
	      Utils.__cache[id][name]:
	      $(element).data(name); // Fallback to HTML5 data attribs.
      }
      return $(element).data(name); // Fallback to HTML5 data attribs.
    } else {
      return Utils.__cache[id];			   
    }
  };

  Utils.RemoveData = function (element) {
    // Removes all cached items for a specified element.
    var id = Utils.GetUniqueElementId(element);
    if (Utils.__cache[id] != null) {
      delete Utils.__cache[id];
    }
  };

  return Utils;
});

S2.define('select2/results',[
  'jquery',
  './utils'
], function ($, Utils) {
  function Results ($element, options, dataAdapter) {
    this.$element = $element;
    this.data = dataAdapter;
    this.options = options;

    Results.__super__.constructor.call(this);
  }

  Utils.Extend(Results, Utils.Observable);

  Results.prototype.render = function () {
    var $results = $(
      '<ul class="select2-results__options" role="tree"></ul>'
    );

    if (this.options.get('multiple')) {
      $results.attr('aria-multiselectable', 'true');
    }

    this.$results = $results;

    return $results;
  };

  Results.prototype.clear = function () {
    this.$results.empty();
  };

  Results.prototype.displayMessage = function (params) {
    var escapeMarkup = this.options.get('escapeMarkup');

    this.clear();
    this.hideLoading();

    var $message = $(
      '<li role="treeitem" aria-live="assertive"' +
      ' class="select2-results__option"></li>'
    );

    var message = this.options.get('translations').get(params.message);

    $message.append(
      escapeMarkup(
        message(params.args)
      )
    );

    $message[0].className += ' select2-results__message';

    this.$results.append($message);
  };

  Results.prototype.hideMessages = function () {
    this.$results.find('.select2-results__message').remove();
  };

  Results.prototype.append = function (data) {
    this.hideLoading();

    var $options = [];

    if (data.results == null || data.results.length === 0) {
      if (this.$results.children().length === 0) {
        this.trigger('results:message', {
          message: 'noResults'
        });
      }

      return;
    }

    data.results = this.sort(data.results);

    for (var d = 0; d < data.results.length; d++) {
      var item = data.results[d];

      var $option = this.option(item);

      $options.push($option);
    }

    this.$results.append($options);
  };

  Results.prototype.position = function ($results, $dropdown) {
    var $resultsContainer = $dropdown.find('.select2-results');
    $resultsContainer.append($results);
  };

  Results.prototype.sort = function (data) {
    var sorter = this.options.get('sorter');

    return sorter(data);
  };

  Results.prototype.highlightFirstItem = function () {
    var $options = this.$results
      .find('.select2-results__option[aria-selected]');

    var $selected = $options.filter('[aria-selected=true]');

    // Check if there are any selected options
    if ($selected.length > 0) {
      // If there are selected options, highlight the first
      $selected.first().trigger('mouseenter');
    } else {
      // If there are no selected options, highlight the first option
      // in the dropdown
      $options.first().trigger('mouseenter');
    }

    this.ensureHighlightVisible();
  };

  Results.prototype.setClasses = function () {
    var self = this;

    this.data.current(function (selected) {
      var selectedIds = $.map(selected, function (s) {
        return s.id.toString();
      });

      var $options = self.$results
        .find('.select2-results__option[aria-selected]');

      $options.each(function () {
        var $option = $(this);

        var item = Utils.GetData(this, 'data');

        // id needs to be converted to a string when comparing
        var id = '' + item.id;

        if ((item.element != null && item.element.selected) ||
            (item.element == null && $.inArray(id, selectedIds) > -1)) {
          $option.attr('aria-selected', 'true');
        } else {
          $option.attr('aria-selected', 'false');
        }
      });

    });
  };

  Results.prototype.showLoading = function (params) {
    this.hideLoading();

    var loadingMore = this.options.get('translations').get('searching');

    var loading = {
      disabled: true,
      loading: true,
      text: loadingMore(params)
    };
    var $loading = this.option(loading);
    $loading.className += ' loading-results';

    this.$results.prepend($loading);
  };

  Results.prototype.hideLoading = function () {
    this.$results.find('.loading-results').remove();
  };

  Results.prototype.option = function (data) {
    var option = document.createElement('li');
    option.className = 'select2-results__option';

    var attrs = {
      'role': 'treeitem',
      'aria-selected': 'false'
    };

    if (data.disabled) {
      delete attrs['aria-selected'];
      attrs['aria-disabled'] = 'true';
    }

    if (data.id == null) {
      delete attrs['aria-selected'];
    }

    if (data._resultId != null) {
      option.id = data._resultId;
    }

    if (data.title) {
      option.title = data.title;
    }

    if (data.children) {
      attrs.role = 'group';
      attrs['aria-label'] = data.text;
      delete attrs['aria-selected'];
    }

    for (var attr in attrs) {
      var val = attrs[attr];

      option.setAttribute(attr, val);
    }

    if (data.children) {
      var $option = $(option);

      var label = document.createElement('strong');
      label.className = 'select2-results__group';

      var $label = $(label);
      this.template(data, label);

      var $children = [];

      for (var c = 0; c < data.children.length; c++) {
        var child = data.children[c];

        var $child = this.option(child);

        $children.push($child);
      }

      var $childrenContainer = $('<ul></ul>', {
        'class': 'select2-results__options select2-results__options--nested'
      });

      $childrenContainer.append($children);

      $option.append(label);
      $option.append($childrenContainer);
    } else {
      this.template(data, option);
    }

    Utils.StoreData(option, 'data', data);

    return option;
  };

  Results.prototype.bind = function (container, $container) {
    var self = this;

    var id = container.id + '-results';

    this.$results.attr('id', id);

    container.on('results:all', function (params) {
      self.clear();
      self.append(params.data);

      if (container.isOpen()) {
        self.setClasses();
        self.highlightFirstItem();
      }
    });

    container.on('results:append', function (params) {
      self.append(params.data);

      if (container.isOpen()) {
        self.setClasses();
      }
    });

    container.on('query', function (params) {
      self.hideMessages();
      self.showLoading(params);
    });

    container.on('select', function () {
      if (!container.isOpen()) {
        return;
      }

      self.setClasses();
      self.highlightFirstItem();
    });

    container.on('unselect', function () {
      if (!container.isOpen()) {
        return;
      }

      self.setClasses();
      self.highlightFirstItem();
    });

    container.on('open', function () {
      // When the dropdown is open, aria-expended="true"
      self.$results.attr('aria-expanded', 'true');
      self.$results.attr('aria-hidden', 'false');

      self.setClasses();
      self.ensureHighlightVisible();
    });

    container.on('close', function () {
      // When the dropdown is closed, aria-expended="false"
      self.$results.attr('aria-expanded', 'false');
      self.$results.attr('aria-hidden', 'true');
      self.$results.removeAttr('aria-activedescendant');
    });

    container.on('results:toggle', function () {
      var $highlighted = self.getHighlightedResults();

      if ($highlighted.length === 0) {
        return;
      }

      $highlighted.trigger('mouseup');
    });

    container.on('results:select', function () {
      var $highlighted = self.getHighlightedResults();

      if ($highlighted.length === 0) {
        return;
      }

      var data = Utils.GetData($highlighted[0], 'data');

      if ($highlighted.attr('aria-selected') == 'true') {
        self.trigger('close', {});
      } else {
        self.trigger('select', {
          data: data
        });
      }
    });

    container.on('results:previous', function () {
      var $highlighted = self.getHighlightedResults();

      var $options = self.$results.find('[aria-selected]');

      var currentIndex = $options.index($highlighted);

      // If we are already at te top, don't move further
      // If no options, currentIndex will be -1
      if (currentIndex <= 0) {
        return;
      }

      var nextIndex = currentIndex - 1;

      // If none are highlighted, highlight the first
      if ($highlighted.length === 0) {
        nextIndex = 0;
      }

      var $next = $options.eq(nextIndex);

      $next.trigger('mouseenter');

      var currentOffset = self.$results.offset().top;
      var nextTop = $next.offset().top;
      var nextOffset = self.$results.scrollTop() + (nextTop - currentOffset);

      if (nextIndex === 0) {
        self.$results.scrollTop(0);
      } else if (nextTop - currentOffset < 0) {
        self.$results.scrollTop(nextOffset);
      }
    });

    container.on('results:next', function () {
      var $highlighted = self.getHighlightedResults();

      var $options = self.$results.find('[aria-selected]');

      var currentIndex = $options.index($highlighted);

      var nextIndex = currentIndex + 1;

      // If we are at the last option, stay there
      if (nextIndex >= $options.length) {
        return;
      }

      var $next = $options.eq(nextIndex);

      $next.trigger('mouseenter');

      var currentOffset = self.$results.offset().top +
        self.$results.outerHeight(false);
      var nextBottom = $next.offset().top + $next.outerHeight(false);
      var nextOffset = self.$results.scrollTop() + nextBottom - currentOffset;

      if (nextIndex === 0) {
        self.$results.scrollTop(0);
      } else if (nextBottom > currentOffset) {
        self.$results.scrollTop(nextOffset);
      }
    });

    container.on('results:focus', function (params) {
      params.element.addClass('select2-results__option--highlighted');
    });

    container.on('results:message', function (params) {
      self.displayMessage(params);
    });

    if ($.fn.mousewheel) {
      this.$results.on('mousewheel', function (e) {
        var top = self.$results.scrollTop();

        var bottom = self.$results.get(0).scrollHeight - top + e.deltaY;

        var isAtTop = e.deltaY > 0 && top - e.deltaY <= 0;
        var isAtBottom = e.deltaY < 0 && bottom <= self.$results.height();

        if (isAtTop) {
          self.$results.scrollTop(0);

          e.preventDefault();
          e.stopPropagation();
        } else if (isAtBottom) {
          self.$results.scrollTop(
            self.$results.get(0).scrollHeight - self.$results.height()
          );

          e.preventDefault();
          e.stopPropagation();
        }
      });
    }

    this.$results.on('mouseup', '.select2-results__option[aria-selected]',
      function (evt) {
      var $this = $(this);

      var data = Utils.GetData(this, 'data');

      if ($this.attr('aria-selected') === 'true') {
        if (self.options.get('multiple')) {
          self.trigger('unselect', {
            originalEvent: evt,
            data: data
          });
        } else {
          self.trigger('close', {});
        }

        return;
      }

      self.trigger('select', {
        originalEvent: evt,
        data: data
      });
    });

    this.$results.on('mouseenter', '.select2-results__option[aria-selected]',
      function (evt) {
      var data = Utils.GetData(this, 'data');

      self.getHighlightedResults()
          .removeClass('select2-results__option--highlighted');

      self.trigger('results:focus', {
        data: data,
        element: $(this)
      });
    });
  };

  Results.prototype.getHighlightedResults = function () {
    var $highlighted = this.$results
    .find('.select2-results__option--highlighted');

    return $highlighted;
  };

  Results.prototype.destroy = function () {
    this.$results.remove();
  };

  Results.prototype.ensureHighlightVisible = function () {
    var $highlighted = this.getHighlightedResults();

    if ($highlighted.length === 0) {
      return;
    }

    var $options = this.$results.find('[aria-selected]');

    var currentIndex = $options.index($highlighted);

    var currentOffset = this.$results.offset().top;
    var nextTop = $highlighted.offset().top;
    var nextOffset = this.$results.scrollTop() + (nextTop - currentOffset);

    var offsetDelta = nextTop - currentOffset;
    nextOffset -= $highlighted.outerHeight(false) * 2;

    if (currentIndex <= 2) {
      this.$results.scrollTop(0);
    } else if (offsetDelta > this.$results.outerHeight() || offsetDelta < 0) {
      this.$results.scrollTop(nextOffset);
    }
  };

  Results.prototype.template = function (result, container) {
    var template = this.options.get('templateResult');
    var escapeMarkup = this.options.get('escapeMarkup');

    var content = template(result, container);

    if (content == null) {
      container.style.display = 'none';
    } else if (typeof content === 'string') {
      container.innerHTML = escapeMarkup(content);
    } else {
      $(container).append(content);
    }
  };

  return Results;
});

S2.define('select2/keys',[

], function () {
  var KEYS = {
    BACKSPACE: 8,
    TAB: 9,
    ENTER: 13,
    SHIFT: 16,
    CTRL: 17,
    ALT: 18,
    ESC: 27,
    SPACE: 32,
    PAGE_UP: 33,
    PAGE_DOWN: 34,
    END: 35,
    HOME: 36,
    LEFT: 37,
    UP: 38,
    RIGHT: 39,
    DOWN: 40,
    DELETE: 46
  };

  return KEYS;
});

S2.define('select2/selection/base',[
  'jquery',
  '../utils',
  '../keys'
], function ($, Utils, KEYS) {
  function BaseSelection ($element, options) {
    this.$element = $element;
    this.options = options;

    BaseSelection.__super__.constructor.call(this);
  }

  Utils.Extend(BaseSelection, Utils.Observable);

  BaseSelection.prototype.render = function () {
    var $selection = $(
      '<span class="select2-selection" role="combobox" ' +
      ' aria-haspopup="true" aria-expanded="false">' +
      '</span>'
    );

    this._tabindex = 0;

    if (Utils.GetData(this.$element[0], 'old-tabindex') != null) {
      this._tabindex = Utils.GetData(this.$element[0], 'old-tabindex');
    } else if (this.$element.attr('tabindex') != null) {
      this._tabindex = this.$element.attr('tabindex');
    }

    $selection.attr('title', this.$element.attr('title'));
    $selection.attr('tabindex', this._tabindex);

    this.$selection = $selection;

    return $selection;
  };

  BaseSelection.prototype.bind = function (container, $container) {
    var self = this;

    var id = container.id + '-container';
    var resultsId = container.id + '-results';

    this.container = container;

    this.$selection.on('focus', function (evt) {
      self.trigger('focus', evt);
    });

    this.$selection.on('blur', function (evt) {
      self._handleBlur(evt);
    });

    this.$selection.on('keydown', function (evt) {
      self.trigger('keypress', evt);

      if (evt.which === KEYS.SPACE) {
        evt.preventDefault();
      }
    });

    container.on('results:focus', function (params) {
      self.$selection.attr('aria-activedescendant', params.data._resultId);
    });

    container.on('selection:update', function (params) {
      self.update(params.data);
    });

    container.on('open', function () {
      // When the dropdown is open, aria-expanded="true"
      self.$selection.attr('aria-expanded', 'true');
      self.$selection.attr('aria-owns', resultsId);

      self._attachCloseHandler(container);
    });

    container.on('close', function () {
      // When the dropdown is closed, aria-expanded="false"
      self.$selection.attr('aria-expanded', 'false');
      self.$selection.removeAttr('aria-activedescendant');
      self.$selection.removeAttr('aria-owns');

      self.$selection.focus();
      window.setTimeout(function () {
        self.$selection.focus();
      }, 0);

      self._detachCloseHandler(container);
    });

    container.on('enable', function () {
      self.$selection.attr('tabindex', self._tabindex);
    });

    container.on('disable', function () {
      self.$selection.attr('tabindex', '-1');
    });
  };

  BaseSelection.prototype._handleBlur = function (evt) {
    var self = this;

    // This needs to be delayed as the active element is the body when the tab
    // key is pressed, possibly along with others.
    window.setTimeout(function () {
      // Don't trigger `blur` if the focus is still in the selection
      if (
        (document.activeElement == self.$selection[0]) ||
        ($.contains(self.$selection[0], document.activeElement))
      ) {
        return;
      }

      self.trigger('blur', evt);
    }, 1);
  };

  BaseSelection.prototype._attachCloseHandler = function (container) {
    var self = this;

    $(document.body).on('mousedown.select2.' + container.id, function (e) {
      var $target = $(e.target);

      var $select = $target.closest('.select2');

      var $all = $('.select2.select2-container--open');

      $all.each(function () {
        var $this = $(this);

        if (this == $select[0]) {
          return;
        }

        var $element = Utils.GetData(this, 'element');

        $element.select2('close');
      });
    });
  };

  BaseSelection.prototype._detachCloseHandler = function (container) {
    $(document.body).off('mousedown.select2.' + container.id);
  };

  BaseSelection.prototype.position = function ($selection, $container) {
    var $selectionContainer = $container.find('.selection');
    $selectionContainer.append($selection);
  };

  BaseSelection.prototype.destroy = function () {
    this._detachCloseHandler(this.container);
  };

  BaseSelection.prototype.update = function (data) {
    throw new Error('The `update` method must be defined in child classes.');
  };

  return BaseSelection;
});

S2.define('select2/selection/single',[
  'jquery',
  './base',
  '../utils',
  '../keys'
], function ($, BaseSelection, Utils, KEYS) {
  function SingleSelection () {
    SingleSelection.__super__.constructor.apply(this, arguments);
  }

  Utils.Extend(SingleSelection, BaseSelection);

  SingleSelection.prototype.render = function () {
    var $selection = SingleSelection.__super__.render.call(this);

    $selection.addClass('select2-selection--single');

    $selection.html(
      '<span class="select2-selection__rendered"></span>' +
      '<span class="select2-selection__arrow" role="presentation">' +
        '<b role="presentation"></b>' +
      '</span>'
    );

    return $selection;
  };

  SingleSelection.prototype.bind = function (container, $container) {
    var self = this;

    SingleSelection.__super__.bind.apply(this, arguments);

    var id = container.id + '-container';

    this.$selection.find('.select2-selection__rendered')
      .attr('id', id)
      .attr('role', 'textbox')
      .attr('aria-readonly', 'true');
    this.$selection.attr('aria-labelledby', id);

    this.$selection.on('mousedown', function (evt) {
      // Only respond to left clicks
      if (evt.which !== 1) {
        return;
      }

      self.trigger('toggle', {
        originalEvent: evt
      });
    });

    this.$selection.on('focus', function (evt) {
      // User focuses on the container
    });

    this.$selection.on('blur', function (evt) {
      // User exits the container
    });

    container.on('focus', function (evt) {
      if (!container.isOpen()) {
        self.$selection.focus();
      }
    });
  };

  SingleSelection.prototype.clear = function () {
    var $rendered = this.$selection.find('.select2-selection__rendered');
    $rendered.empty();
    $rendered.removeAttr('title'); // clear tooltip on empty
  };

  SingleSelection.prototype.display = function (data, container) {
    var template = this.options.get('templateSelection');
    var escapeMarkup = this.options.get('escapeMarkup');

    return escapeMarkup(template(data, container));
  };

  SingleSelection.prototype.selectionContainer = function () {
    return $('<span></span>');
  };

  SingleSelection.prototype.update = function (data) {
    if (data.length === 0) {
      this.clear();
      return;
    }

    var selection = data[0];

    var $rendered = this.$selection.find('.select2-selection__rendered');
    var formatted = this.display(selection, $rendered);

    $rendered.empty().append(formatted);
    $rendered.attr('title', selection.title || selection.text);
  };

  return SingleSelection;
});

S2.define('select2/selection/multiple',[
  'jquery',
  './base',
  '../utils'
], function ($, BaseSelection, Utils) {
  function MultipleSelection ($element, options) {
    MultipleSelection.__super__.constructor.apply(this, arguments);
  }

  Utils.Extend(MultipleSelection, BaseSelection);

  MultipleSelection.prototype.render = function () {
    var $selection = MultipleSelection.__super__.render.call(this);

    $selection.addClass('select2-selection--multiple');

    $selection.html(
      '<ul class="select2-selection__rendered"></ul>'
    );

    return $selection;
  };

  MultipleSelection.prototype.bind = function (container, $container) {
    var self = this;

    MultipleSelection.__super__.bind.apply(this, arguments);

    this.$selection.on('click', function (evt) {
      self.trigger('toggle', {
        originalEvent: evt
      });
    });

    this.$selection.on(
      'click',
      '.select2-selection__choice__remove',
      function (evt) {
        // Ignore the event if it is disabled
        if (self.options.get('disabled')) {
          return;
        }

        var $remove = $(this);
        var $selection = $remove.parent();

        var data = Utils.GetData($selection[0], 'data');

        self.trigger('unselect', {
          originalEvent: evt,
          data: data
        });
      }
    );
  };

  MultipleSelection.prototype.clear = function () {
    var $rendered = this.$selection.find('.select2-selection__rendered');
    $rendered.empty();
    $rendered.removeAttr('title');
  };

  MultipleSelection.prototype.display = function (data, container) {
    var template = this.options.get('templateSelection');
    var escapeMarkup = this.options.get('escapeMarkup');

    return escapeMarkup(template(data, container));
  };

  MultipleSelection.prototype.selectionContainer = function () {
    var $container = $(
      '<li class="select2-selection__choice">' +
        '<span class="select2-selection__choice__remove" role="presentation">' +
          '&times;' +
        '</span>' +
      '</li>'
    );

    return $container;
  };

  MultipleSelection.prototype.update = function (data) {
    this.clear();

    if (data.length === 0) {
      return;
    }

    var $selections = [];

    for (var d = 0; d < data.length; d++) {
      var selection = data[d];

      var $selection = this.selectionContainer();
      var formatted = this.display(selection, $selection);

      $selection.append(formatted);
      $selection.attr('title', selection.title || selection.text);

      Utils.StoreData($selection[0], 'data', selection);

      $selections.push($selection);
    }

    var $rendered = this.$selection.find('.select2-selection__rendered');

    Utils.appendMany($rendered, $selections);
  };

  return MultipleSelection;
});

S2.define('select2/selection/placeholder',[
  '../utils'
], function (Utils) {
  function Placeholder (decorated, $element, options) {
    this.placeholder = this.normalizePlaceholder(options.get('placeholder'));

    decorated.call(this, $element, options);
  }

  Placeholder.prototype.normalizePlaceholder = function (_, placeholder) {
    if (typeof placeholder === 'string') {
      placeholder = {
        id: '',
        text: placeholder
      };
    }

    return placeholder;
  };

  Placeholder.prototype.createPlaceholder = function (decorated, placeholder) {
    var $placeholder = this.selectionContainer();

    $placeholder.html(this.display(placeholder));
    $placeholder.addClass('select2-selection__placeholder')
                .removeClass('select2-selection__choice');

    return $placeholder;
  };

  Placeholder.prototype.update = function (decorated, data) {
    var singlePlaceholder = (
      data.length == 1 && data[0].id != this.placeholder.id
    );
    var multipleSelections = data.length > 1;

    if (multipleSelections || singlePlaceholder) {
      return decorated.call(this, data);
    }

    this.clear();

    var $placeholder = this.createPlaceholder(this.placeholder);

    this.$selection.find('.select2-selection__rendered').append($placeholder);
  };

  return Placeholder;
});

S2.define('select2/selection/allowClear',[
  'jquery',
  '../keys',
  '../utils'
], function ($, KEYS, Utils) {
  function AllowClear () { }

  AllowClear.prototype.bind = function (decorated, container, $container) {
    var self = this;

    decorated.call(this, container, $container);

    if (this.placeholder == null) {
      if (this.options.get('debug') && window.console && console.error) {
        console.error(
          'Select2: The `allowClear` option should be used in combination ' +
          'with the `placeholder` option.'
        );
      }
    }

    this.$selection.on('mousedown', '.select2-selection__clear',
      function (evt) {
        self._handleClear(evt);
    });

    container.on('keypress', function (evt) {
      self._handleKeyboardClear(evt, container);
    });
  };

  AllowClear.prototype._handleClear = function (_, evt) {
    // Ignore the event if it is disabled
    if (this.options.get('disabled')) {
      return;
    }

    var $clear = this.$selection.find('.select2-selection__clear');

    // Ignore the event if nothing has been selected
    if ($clear.length === 0) {
      return;
    }

    evt.stopPropagation();

    var data = Utils.GetData($clear[0], 'data');

    var previousVal = this.$element.val();
    this.$element.val(this.placeholder.id);

    var unselectData = {
      data: data
    };
    this.trigger('clear', unselectData);
    if (unselectData.prevented) {
      this.$element.val(previousVal);
      return;
    }

    for (var d = 0; d < data.length; d++) {
      unselectData = {
        data: data[d]
      };

      // Trigger the `unselect` event, so people can prevent it from being
      // cleared.
      this.trigger('unselect', unselectData);

      // If the event was prevented, don't clear it out.
      if (unselectData.prevented) {
        this.$element.val(previousVal);
        return;
      }
    }

    this.$element.trigger('change');

    this.trigger('toggle', {});
  };

  AllowClear.prototype._handleKeyboardClear = function (_, evt, container) {
    if (container.isOpen()) {
      return;
    }

    if (evt.which == KEYS.DELETE || evt.which == KEYS.BACKSPACE) {
      this._handleClear(evt);
    }
  };

  AllowClear.prototype.update = function (decorated, data) {
    decorated.call(this, data);

    if (this.$selection.find('.select2-selection__placeholder').length > 0 ||
        data.length === 0) {
      return;
    }

    var $remove = $(
      '<span class="select2-selection__clear">' +
        '&times;' +
      '</span>'
    );
    Utils.StoreData($remove[0], 'data', data);

    this.$selection.find('.select2-selection__rendered').prepend($remove);
  };

  return AllowClear;
});

S2.define('select2/selection/search',[
  'jquery',
  '../utils',
  '../keys'
], function ($, Utils, KEYS) {
  function Search (decorated, $element, options) {
    decorated.call(this, $element, options);
  }

  Search.prototype.render = function (decorated) {
    var $search = $(
      '<li class="select2-search select2-search--inline">' +
        '<input class="select2-search__field" type="search" tabindex="-1"' +
        ' autocomplete="off" autocorrect="off" autocapitalize="none"' +
        ' spellcheck="false" role="textbox" aria-autocomplete="list" />' +
      '</li>'
    );

    this.$searchContainer = $search;
    this.$search = $search.find('input');

    var $rendered = decorated.call(this);

    this._transferTabIndex();

    return $rendered;
  };

  Search.prototype.bind = function (decorated, container, $container) {
    var self = this;

    decorated.call(this, container, $container);

    container.on('open', function () {
      self.$search.trigger('focus');
    });

    container.on('close', function () {
      self.$search.val('');
      self.$search.removeAttr('aria-activedescendant');
      self.$search.trigger('focus');
    });

    container.on('enable', function () {
      self.$search.prop('disabled', false);

      self._transferTabIndex();
    });

    container.on('disable', function () {
      self.$search.prop('disabled', true);
    });

    container.on('focus', function (evt) {
      self.$search.trigger('focus');
    });

    container.on('results:focus', function (params) {
      self.$search.attr('aria-activedescendant', params.id);
    });

    this.$selection.on('focusin', '.select2-search--inline', function (evt) {
      self.trigger('focus', evt);
    });

    this.$selection.on('focusout', '.select2-search--inline', function (evt) {
      self._handleBlur(evt);
    });

    this.$selection.on('keydown', '.select2-search--inline', function (evt) {
      evt.stopPropagation();

      self.trigger('keypress', evt);

      self._keyUpPrevented = evt.isDefaultPrevented();

      var key = evt.which;

      if (key === KEYS.BACKSPACE && self.$search.val() === '') {
        var $previousChoice = self.$searchContainer
          .prev('.select2-selection__choice');

        if ($previousChoice.length > 0) {
          var item = Utils.GetData($previousChoice[0], 'data');

          self.searchRemoveChoice(item);

          evt.preventDefault();
        }
      }
    });

    // Try to detect the IE version should the `documentMode` property that
    // is stored on the document. This is only implemented in IE and is
    // slightly cleaner than doing a user agent check.
    // This property is not available in Edge, but Edge also doesn't have
    // this bug.
    var msie = document.documentMode;
    var disableInputEvents = msie && msie <= 11;

    // Workaround for browsers which do not support the `input` event
    // This will prevent double-triggering of events for browsers which support
    // both the `keyup` and `input` events.
    this.$selection.on(
      'input.searchcheck',
      '.select2-search--inline',
      function (evt) {
        // IE will trigger the `input` event when a placeholder is used on a
        // search box. To get around this issue, we are forced to ignore all
        // `input` events in IE and keep using `keyup`.
        if (disableInputEvents) {
          self.$selection.off('input.search input.searchcheck');
          return;
        }

        // Unbind the duplicated `keyup` event
        self.$selection.off('keyup.search');
      }
    );

    this.$selection.on(
      'keyup.search input.search',
      '.select2-search--inline',
      function (evt) {
        // IE will trigger the `input` event when a placeholder is used on a
        // search box. To get around this issue, we are forced to ignore all
        // `input` events in IE and keep using `keyup`.
        if (disableInputEvents && evt.type === 'input') {
          self.$selection.off('input.search input.searchcheck');
          return;
        }

        var key = evt.which;

        // We can freely ignore events from modifier keys
        if (key == KEYS.SHIFT || key == KEYS.CTRL || key == KEYS.ALT) {
          return;
        }

        // Tabbing will be handled during the `keydown` phase
        if (key == KEYS.TAB) {
          return;
        }

        self.handleSearch(evt);
      }
    );
  };

  /**
   * This method will transfer the tabindex attribute from the rendered
   * selection to the search box. This allows for the search box to be used as
   * the primary focus instead of the selection container.
   *
   * @private
   */
  Search.prototype._transferTabIndex = function (decorated) {
    this.$search.attr('tabindex', this.$selection.attr('tabindex'));
    this.$selection.attr('tabindex', '-1');
  };

  Search.prototype.createPlaceholder = function (decorated, placeholder) {
    this.$search.attr('placeholder', placeholder.text);
  };

  Search.prototype.update = function (decorated, data) {
    var searchHadFocus = this.$search[0] == document.activeElement;

    this.$search.attr('placeholder', '');

    decorated.call(this, data);

    this.$selection.find('.select2-selection__rendered')
                   .append(this.$searchContainer);

    this.resizeSearch();
    if (searchHadFocus) {
      var isTagInput = this.$element.find('[data-select2-tag]').length;
      if (isTagInput) {
        // fix IE11 bug where tag input lost focus
        this.$element.focus();
      } else {
        this.$search.focus();
      }
    }
  };

  Search.prototype.handleSearch = function () {
    this.resizeSearch();

    if (!this._keyUpPrevented) {
      var input = this.$search.val();

      this.trigger('query', {
        term: input
      });
    }

    this._keyUpPrevented = false;
  };

  Search.prototype.searchRemoveChoice = function (decorated, item) {
    this.trigger('unselect', {
      data: item
    });

    this.$search.val(item.text);
    this.handleSearch();
  };

  Search.prototype.resizeSearch = function () {
    this.$search.css('width', '25px');

    var width = '';

    if (this.$search.attr('placeholder') !== '') {
      width = this.$selection.find('.select2-selection__rendered').innerWidth();
    } else {
      var minimumWidth = this.$search.val().length + 1;

      width = (minimumWidth * 0.75) + 'em';
    }

    this.$search.css('width', width);
  };

  return Search;
});

S2.define('select2/selection/eventRelay',[
  'jquery'
], function ($) {
  function EventRelay () { }

  EventRelay.prototype.bind = function (decorated, container, $container) {
    var self = this;
    var relayEvents = [
      'open', 'opening',
      'close', 'closing',
      'select', 'selecting',
      'unselect', 'unselecting',
      'clear', 'clearing'
    ];

    var preventableEvents = [
      'opening', 'closing', 'selecting', 'unselecting', 'clearing'
    ];

    decorated.call(this, container, $container);

    container.on('*', function (name, params) {
      // Ignore events that should not be relayed
      if ($.inArray(name, relayEvents) === -1) {
        return;
      }

      // The parameters should always be an object
      params = params || {};

      // Generate the jQuery event for the Select2 event
      var evt = $.Event('select2:' + name, {
        params: params
      });

      self.$element.trigger(evt);

      // Only handle preventable events if it was one
      if ($.inArray(name, preventableEvents) === -1) {
        return;
      }

      params.prevented = evt.isDefaultPrevented();
    });
  };

  return EventRelay;
});

S2.define('select2/translation',[
  'jquery',
  'require'
], function ($, require) {
  function Translation (dict) {
    this.dict = dict || {};
  }

  Translation.prototype.all = function () {
    return this.dict;
  };

  Translation.prototype.get = function (key) {
    return this.dict[key];
  };

  Translation.prototype.extend = function (translation) {
    this.dict = $.extend({}, translation.all(), this.dict);
  };

  // Static functions

  Translation._cache = {};

  Translation.loadPath = function (path) {
    if (!(path in Translation._cache)) {
      var translations = require(path);

      Translation._cache[path] = translations;
    }

    return new Translation(Translation._cache[path]);
  };

  return Translation;
});

S2.define('select2/diacritics',[

], function () {
  var diacritics = {
    '\u24B6': 'A',
    '\uFF21': 'A',
    '\u00C0': 'A',
    '\u00C1': 'A',
    '\u00C2': 'A',
    '\u1EA6': 'A',
    '\u1EA4': 'A',
    '\u1EAA': 'A',
    '\u1EA8': 'A',
    '\u00C3': 'A',
    '\u0100': 'A',
    '\u0102': 'A',
    '\u1EB0': 'A',
    '\u1EAE': 'A',
    '\u1EB4': 'A',
    '\u1EB2': 'A',
    '\u0226': 'A',
    '\u01E0': 'A',
    '\u00C4': 'A',
    '\u01DE': 'A',
    '\u1EA2': 'A',
    '\u00C5': 'A',
    '\u01FA': 'A',
    '\u01CD': 'A',
    '\u0200': 'A',
    '\u0202': 'A',
    '\u1EA0': 'A',
    '\u1EAC': 'A',
    '\u1EB6': 'A',
    '\u1E00': 'A',
    '\u0104': 'A',
    '\u023A': 'A',
    '\u2C6F': 'A',
    '\uA732': 'AA',
    '\u00C6': 'AE',
    '\u01FC': 'AE',
    '\u01E2': 'AE',
    '\uA734': 'AO',
    '\uA736': 'AU',
    '\uA738': 'AV',
    '\uA73A': 'AV',
    '\uA73C': 'AY',
    '\u24B7': 'B',
    '\uFF22': 'B',
    '\u1E02': 'B',
    '\u1E04': 'B',
    '\u1E06': 'B',
    '\u0243': 'B',
    '\u0182': 'B',
    '\u0181': 'B',
    '\u24B8': 'C',
    '\uFF23': 'C',
    '\u0106': 'C',
    '\u0108': 'C',
    '\u010A': 'C',
    '\u010C': 'C',
    '\u00C7': 'C',
    '\u1E08': 'C',
    '\u0187': 'C',
    '\u023B': 'C',
    '\uA73E': 'C',
    '\u24B9': 'D',
    '\uFF24': 'D',
    '\u1E0A': 'D',
    '\u010E': 'D',
    '\u1E0C': 'D',
    '\u1E10': 'D',
    '\u1E12': 'D',
    '\u1E0E': 'D',
    '\u0110': 'D',
    '\u018B': 'D',
    '\u018A': 'D',
    '\u0189': 'D',
    '\uA779': 'D',
    '\u01F1': 'DZ',
    '\u01C4': 'DZ',
    '\u01F2': 'Dz',
    '\u01C5': 'Dz',
    '\u24BA': 'E',
    '\uFF25': 'E',
    '\u00C8': 'E',
    '\u00C9': 'E',
    '\u00CA': 'E',
    '\u1EC0': 'E',
    '\u1EBE': 'E',
    '\u1EC4': 'E',
    '\u1EC2': 'E',
    '\u1EBC': 'E',
    '\u0112': 'E',
    '\u1E14': 'E',
    '\u1E16': 'E',
    '\u0114': 'E',
    '\u0116': 'E',
    '\u00CB': 'E',
    '\u1EBA': 'E',
    '\u011A': 'E',
    '\u0204': 'E',
    '\u0206': 'E',
    '\u1EB8': 'E',
    '\u1EC6': 'E',
    '\u0228': 'E',
    '\u1E1C': 'E',
    '\u0118': 'E',
    '\u1E18': 'E',
    '\u1E1A': 'E',
    '\u0190': 'E',
    '\u018E': 'E',
    '\u24BB': 'F',
    '\uFF26': 'F',
    '\u1E1E': 'F',
    '\u0191': 'F',
    '\uA77B': 'F',
    '\u24BC': 'G',
    '\uFF27': 'G',
    '\u01F4': 'G',
    '\u011C': 'G',
    '\u1E20': 'G',
    '\u011E': 'G',
    '\u0120': 'G',
    '\u01E6': 'G',
    '\u0122': 'G',
    '\u01E4': 'G',
    '\u0193': 'G',
    '\uA7A0': 'G',
    '\uA77D': 'G',
    '\uA77E': 'G',
    '\u24BD': 'H',
    '\uFF28': 'H',
    '\u0124': 'H',
    '\u1E22': 'H',
    '\u1E26': 'H',
    '\u021E': 'H',
    '\u1E24': 'H',
    '\u1E28': 'H',
    '\u1E2A': 'H',
    '\u0126': 'H',
    '\u2C67': 'H',
    '\u2C75': 'H',
    '\uA78D': 'H',
    '\u24BE': 'I',
    '\uFF29': 'I',
    '\u00CC': 'I',
    '\u00CD': 'I',
    '\u00CE': 'I',
    '\u0128': 'I',
    '\u012A': 'I',
    '\u012C': 'I',
    '\u0130': 'I',
    '\u00CF': 'I',
    '\u1E2E': 'I',
    '\u1EC8': 'I',
    '\u01CF': 'I',
    '\u0208': 'I',
    '\u020A': 'I',
    '\u1ECA': 'I',
    '\u012E': 'I',
    '\u1E2C': 'I',
    '\u0197': 'I',
    '\u24BF': 'J',
    '\uFF2A': 'J',
    '\u0134': 'J',
    '\u0248': 'J',
    '\u24C0': 'K',
    '\uFF2B': 'K',
    '\u1E30': 'K',
    '\u01E8': 'K',
    '\u1E32': 'K',
    '\u0136': 'K',
    '\u1E34': 'K',
    '\u0198': 'K',
    '\u2C69': 'K',
    '\uA740': 'K',
    '\uA742': 'K',
    '\uA744': 'K',
    '\uA7A2': 'K',
    '\u24C1': 'L',
    '\uFF2C': 'L',
    '\u013F': 'L',
    '\u0139': 'L',
    '\u013D': 'L',
    '\u1E36': 'L',
    '\u1E38': 'L',
    '\u013B': 'L',
    '\u1E3C': 'L',
    '\u1E3A': 'L',
    '\u0141': 'L',
    '\u023D': 'L',
    '\u2C62': 'L',
    '\u2C60': 'L',
    '\uA748': 'L',
    '\uA746': 'L',
    '\uA780': 'L',
    '\u01C7': 'LJ',
    '\u01C8': 'Lj',
    '\u24C2': 'M',
    '\uFF2D': 'M',
    '\u1E3E': 'M',
    '\u1E40': 'M',
    '\u1E42': 'M',
    '\u2C6E': 'M',
    '\u019C': 'M',
    '\u24C3': 'N',
    '\uFF2E': 'N',
    '\u01F8': 'N',
    '\u0143': 'N',
    '\u00D1': 'N',
    '\u1E44': 'N',
    '\u0147': 'N',
    '\u1E46': 'N',
    '\u0145': 'N',
    '\u1E4A': 'N',
    '\u1E48': 'N',
    '\u0220': 'N',
    '\u019D': 'N',
    '\uA790': 'N',
    '\uA7A4': 'N',
    '\u01CA': 'NJ',
    '\u01CB': 'Nj',
    '\u24C4': 'O',
    '\uFF2F': 'O',
    '\u00D2': 'O',
    '\u00D3': 'O',
    '\u00D4': 'O',
    '\u1ED2': 'O',
    '\u1ED0': 'O',
    '\u1ED6': 'O',
    '\u1ED4': 'O',
    '\u00D5': 'O',
    '\u1E4C': 'O',
    '\u022C': 'O',
    '\u1E4E': 'O',
    '\u014C': 'O',
    '\u1E50': 'O',
    '\u1E52': 'O',
    '\u014E': 'O',
    '\u022E': 'O',
    '\u0230': 'O',
    '\u00D6': 'O',
    '\u022A': 'O',
    '\u1ECE': 'O',
    '\u0150': 'O',
    '\u01D1': 'O',
    '\u020C': 'O',
    '\u020E': 'O',
    '\u01A0': 'O',
    '\u1EDC': 'O',
    '\u1EDA': 'O',
    '\u1EE0': 'O',
    '\u1EDE': 'O',
    '\u1EE2': 'O',
    '\u1ECC': 'O',
    '\u1ED8': 'O',
    '\u01EA': 'O',
    '\u01EC': 'O',
    '\u00D8': 'O',
    '\u01FE': 'O',
    '\u0186': 'O',
    '\u019F': 'O',
    '\uA74A': 'O',
    '\uA74C': 'O',
    '\u01A2': 'OI',
    '\uA74E': 'OO',
    '\u0222': 'OU',
    '\u24C5': 'P',
    '\uFF30': 'P',
    '\u1E54': 'P',
    '\u1E56': 'P',
    '\u01A4': 'P',
    '\u2C63': 'P',
    '\uA750': 'P',
    '\uA752': 'P',
    '\uA754': 'P',
    '\u24C6': 'Q',
    '\uFF31': 'Q',
    '\uA756': 'Q',
    '\uA758': 'Q',
    '\u024A': 'Q',
    '\u24C7': 'R',
    '\uFF32': 'R',
    '\u0154': 'R',
    '\u1E58': 'R',
    '\u0158': 'R',
    '\u0210': 'R',
    '\u0212': 'R',
    '\u1E5A': 'R',
    '\u1E5C': 'R',
    '\u0156': 'R',
    '\u1E5E': 'R',
    '\u024C': 'R',
    '\u2C64': 'R',
    '\uA75A': 'R',
    '\uA7A6': 'R',
    '\uA782': 'R',
    '\u24C8': 'S',
    '\uFF33': 'S',
    '\u1E9E': 'S',
    '\u015A': 'S',
    '\u1E64': 'S',
    '\u015C': 'S',
    '\u1E60': 'S',
    '\u0160': 'S',
    '\u1E66': 'S',
    '\u1E62': 'S',
    '\u1E68': 'S',
    '\u0218': 'S',
    '\u015E': 'S',
    '\u2C7E': 'S',
    '\uA7A8': 'S',
    '\uA784': 'S',
    '\u24C9': 'T',
    '\uFF34': 'T',
    '\u1E6A': 'T',
    '\u0164': 'T',
    '\u1E6C': 'T',
    '\u021A': 'T',
    '\u0162': 'T',
    '\u1E70': 'T',
    '\u1E6E': 'T',
    '\u0166': 'T',
    '\u01AC': 'T',
    '\u01AE': 'T',
    '\u023E': 'T',
    '\uA786': 'T',
    '\uA728': 'TZ',
    '\u24CA': 'U',
    '\uFF35': 'U',
    '\u00D9': 'U',
    '\u00DA': 'U',
    '\u00DB': 'U',
    '\u0168': 'U',
    '\u1E78': 'U',
    '\u016A': 'U',
    '\u1E7A': 'U',
    '\u016C': 'U',
    '\u00DC': 'U',
    '\u01DB': 'U',
    '\u01D7': 'U',
    '\u01D5': 'U',
    '\u01D9': 'U',
    '\u1EE6': 'U',
    '\u016E': 'U',
    '\u0170': 'U',
    '\u01D3': 'U',
    '\u0214': 'U',
    '\u0216': 'U',
    '\u01AF': 'U',
    '\u1EEA': 'U',
    '\u1EE8': 'U',
    '\u1EEE': 'U',
    '\u1EEC': 'U',
    '\u1EF0': 'U',
    '\u1EE4': 'U',
    '\u1E72': 'U',
    '\u0172': 'U',
    '\u1E76': 'U',
    '\u1E74': 'U',
    '\u0244': 'U',
    '\u24CB': 'V',
    '\uFF36': 'V',
    '\u1E7C': 'V',
    '\u1E7E': 'V',
    '\u01B2': 'V',
    '\uA75E': 'V',
    '\u0245': 'V',
    '\uA760': 'VY',
    '\u24CC': 'W',
    '\uFF37': 'W',
    '\u1E80': 'W',
    '\u1E82': 'W',
    '\u0174': 'W',
    '\u1E86': 'W',
    '\u1E84': 'W',
    '\u1E88': 'W',
    '\u2C72': 'W',
    '\u24CD': 'X',
    '\uFF38': 'X',
    '\u1E8A': 'X',
    '\u1E8C': 'X',
    '\u24CE': 'Y',
    '\uFF39': 'Y',
    '\u1EF2': 'Y',
    '\u00DD': 'Y',
    '\u0176': 'Y',
    '\u1EF8': 'Y',
    '\u0232': 'Y',
    '\u1E8E': 'Y',
    '\u0178': 'Y',
    '\u1EF6': 'Y',
    '\u1EF4': 'Y',
    '\u01B3': 'Y',
    '\u024E': 'Y',
    '\u1EFE': 'Y',
    '\u24CF': 'Z',
    '\uFF3A': 'Z',
    '\u0179': 'Z',
    '\u1E90': 'Z',
    '\u017B': 'Z',
    '\u017D': 'Z',
    '\u1E92': 'Z',
    '\u1E94': 'Z',
    '\u01B5': 'Z',
    '\u0224': 'Z',
    '\u2C7F': 'Z',
    '\u2C6B': 'Z',
    '\uA762': 'Z',
    '\u24D0': 'a',
    '\uFF41': 'a',
    '\u1E9A': 'a',
    '\u00E0': 'a',
    '\u00E1': 'a',
    '\u00E2': 'a',
    '\u1EA7': 'a',
    '\u1EA5': 'a',
    '\u1EAB': 'a',
    '\u1EA9': 'a',
    '\u00E3': 'a',
    '\u0101': 'a',
    '\u0103': 'a',
    '\u1EB1': 'a',
    '\u1EAF': 'a',
    '\u1EB5': 'a',
    '\u1EB3': 'a',
    '\u0227': 'a',
    '\u01E1': 'a',
    '\u00E4': 'a',
    '\u01DF': 'a',
    '\u1EA3': 'a',
    '\u00E5': 'a',
    '\u01FB': 'a',
    '\u01CE': 'a',
    '\u0201': 'a',
    '\u0203': 'a',
    '\u1EA1': 'a',
    '\u1EAD': 'a',
    '\u1EB7': 'a',
    '\u1E01': 'a',
    '\u0105': 'a',
    '\u2C65': 'a',
    '\u0250': 'a',
    '\uA733': 'aa',
    '\u00E6': 'ae',
    '\u01FD': 'ae',
    '\u01E3': 'ae',
    '\uA735': 'ao',
    '\uA737': 'au',
    '\uA739': 'av',
    '\uA73B': 'av',
    '\uA73D': 'ay',
    '\u24D1': 'b',
    '\uFF42': 'b',
    '\u1E03': 'b',
    '\u1E05': 'b',
    '\u1E07': 'b',
    '\u0180': 'b',
    '\u0183': 'b',
    '\u0253': 'b',
    '\u24D2': 'c',
    '\uFF43': 'c',
    '\u0107': 'c',
    '\u0109': 'c',
    '\u010B': 'c',
    '\u010D': 'c',
    '\u00E7': 'c',
    '\u1E09': 'c',
    '\u0188': 'c',
    '\u023C': 'c',
    '\uA73F': 'c',
    '\u2184': 'c',
    '\u24D3': 'd',
    '\uFF44': 'd',
    '\u1E0B': 'd',
    '\u010F': 'd',
    '\u1E0D': 'd',
    '\u1E11': 'd',
    '\u1E13': 'd',
    '\u1E0F': 'd',
    '\u0111': 'd',
    '\u018C': 'd',
    '\u0256': 'd',
    '\u0257': 'd',
    '\uA77A': 'd',
    '\u01F3': 'dz',
    '\u01C6': 'dz',
    '\u24D4': 'e',
    '\uFF45': 'e',
    '\u00E8': 'e',
    '\u00E9': 'e',
    '\u00EA': 'e',
    '\u1EC1': 'e',
    '\u1EBF': 'e',
    '\u1EC5': 'e',
    '\u1EC3': 'e',
    '\u1EBD': 'e',
    '\u0113': 'e',
    '\u1E15': 'e',
    '\u1E17': 'e',
    '\u0115': 'e',
    '\u0117': 'e',
    '\u00EB': 'e',
    '\u1EBB': 'e',
    '\u011B': 'e',
    '\u0205': 'e',
    '\u0207': 'e',
    '\u1EB9': 'e',
    '\u1EC7': 'e',
    '\u0229': 'e',
    '\u1E1D': 'e',
    '\u0119': 'e',
    '\u1E19': 'e',
    '\u1E1B': 'e',
    '\u0247': 'e',
    '\u025B': 'e',
    '\u01DD': 'e',
    '\u24D5': 'f',
    '\uFF46': 'f',
    '\u1E1F': 'f',
    '\u0192': 'f',
    '\uA77C': 'f',
    '\u24D6': 'g',
    '\uFF47': 'g',
    '\u01F5': 'g',
    '\u011D': 'g',
    '\u1E21': 'g',
    '\u011F': 'g',
    '\u0121': 'g',
    '\u01E7': 'g',
    '\u0123': 'g',
    '\u01E5': 'g',
    '\u0260': 'g',
    '\uA7A1': 'g',
    '\u1D79': 'g',
    '\uA77F': 'g',
    '\u24D7': 'h',
    '\uFF48': 'h',
    '\u0125': 'h',
    '\u1E23': 'h',
    '\u1E27': 'h',
    '\u021F': 'h',
    '\u1E25': 'h',
    '\u1E29': 'h',
    '\u1E2B': 'h',
    '\u1E96': 'h',
    '\u0127': 'h',
    '\u2C68': 'h',
    '\u2C76': 'h',
    '\u0265': 'h',
    '\u0195': 'hv',
    '\u24D8': 'i',
    '\uFF49': 'i',
    '\u00EC': 'i',
    '\u00ED': 'i',
    '\u00EE': 'i',
    '\u0129': 'i',
    '\u012B': 'i',
    '\u012D': 'i',
    '\u00EF': 'i',
    '\u1E2F': 'i',
    '\u1EC9': 'i',
    '\u01D0': 'i',
    '\u0209': 'i',
    '\u020B': 'i',
    '\u1ECB': 'i',
    '\u012F': 'i',
    '\u1E2D': 'i',
    '\u0268': 'i',
    '\u0131': 'i',
    '\u24D9': 'j',
    '\uFF4A': 'j',
    '\u0135': 'j',
    '\u01F0': 'j',
    '\u0249': 'j',
    '\u24DA': 'k',
    '\uFF4B': 'k',
    '\u1E31': 'k',
    '\u01E9': 'k',
    '\u1E33': 'k',
    '\u0137': 'k',
    '\u1E35': 'k',
    '\u0199': 'k',
    '\u2C6A': 'k',
    '\uA741': 'k',
    '\uA743': 'k',
    '\uA745': 'k',
    '\uA7A3': 'k',
    '\u24DB': 'l',
    '\uFF4C': 'l',
    '\u0140': 'l',
    '\u013A': 'l',
    '\u013E': 'l',
    '\u1E37': 'l',
    '\u1E39': 'l',
    '\u013C': 'l',
    '\u1E3D': 'l',
    '\u1E3B': 'l',
    '\u017F': 'l',
    '\u0142': 'l',
    '\u019A': 'l',
    '\u026B': 'l',
    '\u2C61': 'l',
    '\uA749': 'l',
    '\uA781': 'l',
    '\uA747': 'l',
    '\u01C9': 'lj',
    '\u24DC': 'm',
    '\uFF4D': 'm',
    '\u1E3F': 'm',
    '\u1E41': 'm',
    '\u1E43': 'm',
    '\u0271': 'm',
    '\u026F': 'm',
    '\u24DD': 'n',
    '\uFF4E': 'n',
    '\u01F9': 'n',
    '\u0144': 'n',
    '\u00F1': 'n',
    '\u1E45': 'n',
    '\u0148': 'n',
    '\u1E47': 'n',
    '\u0146': 'n',
    '\u1E4B': 'n',
    '\u1E49': 'n',
    '\u019E': 'n',
    '\u0272': 'n',
    '\u0149': 'n',
    '\uA791': 'n',
    '\uA7A5': 'n',
    '\u01CC': 'nj',
    '\u24DE': 'o',
    '\uFF4F': 'o',
    '\u00F2': 'o',
    '\u00F3': 'o',
    '\u00F4': 'o',
    '\u1ED3': 'o',
    '\u1ED1': 'o',
    '\u1ED7': 'o',
    '\u1ED5': 'o',
    '\u00F5': 'o',
    '\u1E4D': 'o',
    '\u022D': 'o',
    '\u1E4F': 'o',
    '\u014D': 'o',
    '\u1E51': 'o',
    '\u1E53': 'o',
    '\u014F': 'o',
    '\u022F': 'o',
    '\u0231': 'o',
    '\u00F6': 'o',
    '\u022B': 'o',
    '\u1ECF': 'o',
    '\u0151': 'o',
    '\u01D2': 'o',
    '\u020D': 'o',
    '\u020F': 'o',
    '\u01A1': 'o',
    '\u1EDD': 'o',
    '\u1EDB': 'o',
    '\u1EE1': 'o',
    '\u1EDF': 'o',
    '\u1EE3': 'o',
    '\u1ECD': 'o',
    '\u1ED9': 'o',
    '\u01EB': 'o',
    '\u01ED': 'o',
    '\u00F8': 'o',
    '\u01FF': 'o',
    '\u0254': 'o',
    '\uA74B': 'o',
    '\uA74D': 'o',
    '\u0275': 'o',
    '\u01A3': 'oi',
    '\u0223': 'ou',
    '\uA74F': 'oo',
    '\u24DF': 'p',
    '\uFF50': 'p',
    '\u1E55': 'p',
    '\u1E57': 'p',
    '\u01A5': 'p',
    '\u1D7D': 'p',
    '\uA751': 'p',
    '\uA753': 'p',
    '\uA755': 'p',
    '\u24E0': 'q',
    '\uFF51': 'q',
    '\u024B': 'q',
    '\uA757': 'q',
    '\uA759': 'q',
    '\u24E1': 'r',
    '\uFF52': 'r',
    '\u0155': 'r',
    '\u1E59': 'r',
    '\u0159': 'r',
    '\u0211': 'r',
    '\u0213': 'r',
    '\u1E5B': 'r',
    '\u1E5D': 'r',
    '\u0157': 'r',
    '\u1E5F': 'r',
    '\u024D': 'r',
    '\u027D': 'r',
    '\uA75B': 'r',
    '\uA7A7': 'r',
    '\uA783': 'r',
    '\u24E2': 's',
    '\uFF53': 's',
    '\u00DF': 's',
    '\u015B': 's',
    '\u1E65': 's',
    '\u015D': 's',
    '\u1E61': 's',
    '\u0161': 's',
    '\u1E67': 's',
    '\u1E63': 's',
    '\u1E69': 's',
    '\u0219': 's',
    '\u015F': 's',
    '\u023F': 's',
    '\uA7A9': 's',
    '\uA785': 's',
    '\u1E9B': 's',
    '\u24E3': 't',
    '\uFF54': 't',
    '\u1E6B': 't',
    '\u1E97': 't',
    '\u0165': 't',
    '\u1E6D': 't',
    '\u021B': 't',
    '\u0163': 't',
    '\u1E71': 't',
    '\u1E6F': 't',
    '\u0167': 't',
    '\u01AD': 't',
    '\u0288': 't',
    '\u2C66': 't',
    '\uA787': 't',
    '\uA729': 'tz',
    '\u24E4': 'u',
    '\uFF55': 'u',
    '\u00F9': 'u',
    '\u00FA': 'u',
    '\u00FB': 'u',
    '\u0169': 'u',
    '\u1E79': 'u',
    '\u016B': 'u',
    '\u1E7B': 'u',
    '\u016D': 'u',
    '\u00FC': 'u',
    '\u01DC': 'u',
    '\u01D8': 'u',
    '\u01D6': 'u',
    '\u01DA': 'u',
    '\u1EE7': 'u',
    '\u016F': 'u',
    '\u0171': 'u',
    '\u01D4': 'u',
    '\u0215': 'u',
    '\u0217': 'u',
    '\u01B0': 'u',
    '\u1EEB': 'u',
    '\u1EE9': 'u',
    '\u1EEF': 'u',
    '\u1EED': 'u',
    '\u1EF1': 'u',
    '\u1EE5': 'u',
    '\u1E73': 'u',
    '\u0173': 'u',
    '\u1E77': 'u',
    '\u1E75': 'u',
    '\u0289': 'u',
    '\u24E5': 'v',
    '\uFF56': 'v',
    '\u1E7D': 'v',
    '\u1E7F': 'v',
    '\u028B': 'v',
    '\uA75F': 'v',
    '\u028C': 'v',
    '\uA761': 'vy',
    '\u24E6': 'w',
    '\uFF57': 'w',
    '\u1E81': 'w',
    '\u1E83': 'w',
    '\u0175': 'w',
    '\u1E87': 'w',
    '\u1E85': 'w',
    '\u1E98': 'w',
    '\u1E89': 'w',
    '\u2C73': 'w',
    '\u24E7': 'x',
    '\uFF58': 'x',
    '\u1E8B': 'x',
    '\u1E8D': 'x',
    '\u24E8': 'y',
    '\uFF59': 'y',
    '\u1EF3': 'y',
    '\u00FD': 'y',
    '\u0177': 'y',
    '\u1EF9': 'y',
    '\u0233': 'y',
    '\u1E8F': 'y',
    '\u00FF': 'y',
    '\u1EF7': 'y',
    '\u1E99': 'y',
    '\u1EF5': 'y',
    '\u01B4': 'y',
    '\u024F': 'y',
    '\u1EFF': 'y',
    '\u24E9': 'z',
    '\uFF5A': 'z',
    '\u017A': 'z',
    '\u1E91': 'z',
    '\u017C': 'z',
    '\u017E': 'z',
    '\u1E93': 'z',
    '\u1E95': 'z',
    '\u01B6': 'z',
    '\u0225': 'z',
    '\u0240': 'z',
    '\u2C6C': 'z',
    '\uA763': 'z',
    '\u0386': '\u0391',
    '\u0388': '\u0395',
    '\u0389': '\u0397',
    '\u038A': '\u0399',
    '\u03AA': '\u0399',
    '\u038C': '\u039F',
    '\u038E': '\u03A5',
    '\u03AB': '\u03A5',
    '\u038F': '\u03A9',
    '\u03AC': '\u03B1',
    '\u03AD': '\u03B5',
    '\u03AE': '\u03B7',
    '\u03AF': '\u03B9',
    '\u03CA': '\u03B9',
    '\u0390': '\u03B9',
    '\u03CC': '\u03BF',
    '\u03CD': '\u03C5',
    '\u03CB': '\u03C5',
    '\u03B0': '\u03C5',
    '\u03C9': '\u03C9',
    '\u03C2': '\u03C3'
  };

  return diacritics;
});

S2.define('select2/data/base',[
  '../utils'
], function (Utils) {
  function BaseAdapter ($element, options) {
    BaseAdapter.__super__.constructor.call(this);
  }

  Utils.Extend(BaseAdapter, Utils.Observable);

  BaseAdapter.prototype.current = function (callback) {
    throw new Error('The `current` method must be defined in child classes.');
  };

  BaseAdapter.prototype.query = function (params, callback) {
    throw new Error('The `query` method must be defined in child classes.');
  };

  BaseAdapter.prototype.bind = function (container, $container) {
    // Can be implemented in subclasses
  };

  BaseAdapter.prototype.destroy = function () {
    // Can be implemented in subclasses
  };

  BaseAdapter.prototype.generateResultId = function (container, data) {
    var id = container.id + '-result-';

    id += Utils.generateChars(4);

    if (data.id != null) {
      id += '-' + data.id.toString();
    } else {
      id += '-' + Utils.generateChars(4);
    }
    return id;
  };

  return BaseAdapter;
});

S2.define('select2/data/select',[
  './base',
  '../utils',
  'jquery'
], function (BaseAdapter, Utils, $) {
  function SelectAdapter ($element, options) {
    this.$element = $element;
    this.options = options;

    SelectAdapter.__super__.constructor.call(this);
  }

  Utils.Extend(SelectAdapter, BaseAdapter);

  SelectAdapter.prototype.current = function (callback) {
    var data = [];
    var self = this;

    this.$element.find(':selected').each(function () {
      var $option = $(this);

      var option = self.item($option);

      data.push(option);
    });

    callback(data);
  };

  SelectAdapter.prototype.select = function (data) {
    var self = this;

    data.selected = true;

    // If data.element is a DOM node, use it instead
    if ($(data.element).is('option')) {
      data.element.selected = true;

      this.$element.trigger('change');

      return;
    }

    if (this.$element.prop('multiple')) {
      this.current(function (currentData) {
        var val = [];

        data = [data];
        data.push.apply(data, currentData);

        for (var d = 0; d < data.length; d++) {
          var id = data[d].id;

          if ($.inArray(id, val) === -1) {
            val.push(id);
          }
        }

        self.$element.val(val);
        self.$element.trigger('change');
      });
    } else {
      var val = data.id;

      this.$element.val(val);
      this.$element.trigger('change');
    }
  };

  SelectAdapter.prototype.unselect = function (data) {
    var self = this;

    if (!this.$element.prop('multiple')) {
      return;
    }

    data.selected = false;

    if ($(data.element).is('option')) {
      data.element.selected = false;

      this.$element.trigger('change');

      return;
    }

    this.current(function (currentData) {
      var val = [];

      for (var d = 0; d < currentData.length; d++) {
        var id = currentData[d].id;

        if (id !== data.id && $.inArray(id, val) === -1) {
          val.push(id);
        }
      }

      self.$element.val(val);

      self.$element.trigger('change');
    });
  };

  SelectAdapter.prototype.bind = function (container, $container) {
    var self = this;

    this.container = container;

    container.on('select', function (params) {
      self.select(params.data);
    });

    container.on('unselect', function (params) {
      self.unselect(params.data);
    });
  };

  SelectAdapter.prototype.destroy = function () {
    // Remove anything added to child elements
    this.$element.find('*').each(function () {
      // Remove any custom data set by Select2
      Utils.RemoveData(this);
    });
  };

  SelectAdapter.prototype.query = function (params, callback) {
    var data = [];
    var self = this;

    var $options = this.$element.children();

    $options.each(function () {
      var $option = $(this);

      if (!$option.is('option') && !$option.is('optgroup')) {
        return;
      }

      var option = self.item($option);

      var matches = self.matches(params, option);

      if (matches !== null) {
        data.push(matches);
      }
    });

    callback({
      results: data
    });
  };

  SelectAdapter.prototype.addOptions = function ($options) {
    Utils.appendMany(this.$element, $options);
  };

  SelectAdapter.prototype.option = function (data) {
    var option;

    if (data.children) {
      option = document.createElement('optgroup');
      option.label = data.text;
    } else {
      option = document.createElement('option');

      if (option.textContent !== undefined) {
        option.textContent = data.text;
      } else {
        option.innerText = data.text;
      }
    }

    if (data.id !== undefined) {
      option.value = data.id;
    }

    if (data.disabled) {
      option.disabled = true;
    }

    if (data.selected) {
      option.selected = true;
    }

    if (data.title) {
      option.title = data.title;
    }

    var $option = $(option);

    var normalizedData = this._normalizeItem(data);
    normalizedData.element = option;

    // Override the option's data with the combined data
    Utils.StoreData(option, 'data', normalizedData);

    return $option;
  };

  SelectAdapter.prototype.item = function ($option) {
    var data = {};

    data = Utils.GetData($option[0], 'data');

    if (data != null) {
      return data;
    }

    if ($option.is('option')) {
      data = {
        id: $option.val(),
        text: $option.text(),
        disabled: $option.prop('disabled'),
        selected: $option.prop('selected'),
        title: $option.prop('title')
      };
    } else if ($option.is('optgroup')) {
      data = {
        text: $option.prop('label'),
        children: [],
        title: $option.prop('title')
      };

      var $children = $option.children('option');
      var children = [];

      for (var c = 0; c < $children.length; c++) {
        var $child = $($children[c]);

        var child = this.item($child);

        children.push(child);
      }

      data.children = children;
    }

    data = this._normalizeItem(data);
    data.element = $option[0];

    Utils.StoreData($option[0], 'data', data);

    return data;
  };

  SelectAdapter.prototype._normalizeItem = function (item) {
    if (item !== Object(item)) {
      item = {
        id: item,
        text: item
      };
    }

    item = $.extend({}, {
      text: ''
    }, item);

    var defaults = {
      selected: false,
      disabled: false
    };

    if (item.id != null) {
      item.id = item.id.toString();
    }

    if (item.text != null) {
      item.text = item.text.toString();
    }

    if (item._resultId == null && item.id && this.container != null) {
      item._resultId = this.generateResultId(this.container, item);
    }

    return $.extend({}, defaults, item);
  };

  SelectAdapter.prototype.matches = function (params, data) {
    var matcher = this.options.get('matcher');

    return matcher(params, data);
  };

  return SelectAdapter;
});

S2.define('select2/data/array',[
  './select',
  '../utils',
  'jquery'
], function (SelectAdapter, Utils, $) {
  function ArrayAdapter ($element, options) {
    var data = options.get('data') || [];

    ArrayAdapter.__super__.constructor.call(this, $element, options);

    this.addOptions(this.convertToOptions(data));
  }

  Utils.Extend(ArrayAdapter, SelectAdapter);

  ArrayAdapter.prototype.select = function (data) {
    var $option = this.$element.find('option').filter(function (i, elm) {
      return elm.value == data.id.toString();
    });

    if ($option.length === 0) {
      $option = this.option(data);

      this.addOptions($option);
    }

    ArrayAdapter.__super__.select.call(this, data);
  };

  ArrayAdapter.prototype.convertToOptions = function (data) {
    var self = this;

    var $existing = this.$element.find('option');
    var existingIds = $existing.map(function () {
      return self.item($(this)).id;
    }).get();

    var $options = [];

    // Filter out all items except for the one passed in the argument
    function onlyItem (item) {
      return function () {
        return $(this).val() == item.id;
      };
    }

    for (var d = 0; d < data.length; d++) {
      var item = this._normalizeItem(data[d]);

      // Skip items which were pre-loaded, only merge the data
      if ($.inArray(item.id, existingIds) >= 0) {
        var $existingOption = $existing.filter(onlyItem(item));

        var existingData = this.item($existingOption);
        var newData = $.extend(true, {}, item, existingData);

        var $newOption = this.option(newData);

        $existingOption.replaceWith($newOption);

        continue;
      }

      var $option = this.option(item);

      if (item.children) {
        var $children = this.convertToOptions(item.children);

        Utils.appendMany($option, $children);
      }

      $options.push($option);
    }

    return $options;
  };

  return ArrayAdapter;
});

S2.define('select2/data/ajax',[
  './array',
  '../utils',
  'jquery'
], function (ArrayAdapter, Utils, $) {
  function AjaxAdapter ($element, options) {
    this.ajaxOptions = this._applyDefaults(options.get('ajax'));

    if (this.ajaxOptions.processResults != null) {
      this.processResults = this.ajaxOptions.processResults;
    }

    AjaxAdapter.__super__.constructor.call(this, $element, options);
  }

  Utils.Extend(AjaxAdapter, ArrayAdapter);

  AjaxAdapter.prototype._applyDefaults = function (options) {
    var defaults = {
      data: function (params) {
        return $.extend({}, params, {
          q: params.term
        });
      },
      transport: function (params, success, failure) {
        var $request = $.ajax(params);

        $request.then(success);
        $request.fail(failure);

        return $request;
      }
    };

    return $.extend({}, defaults, options, true);
  };

  AjaxAdapter.prototype.processResults = function (results) {
    return results;
  };

  AjaxAdapter.prototype.query = function (params, callback) {
    var matches = [];
    var self = this;

    if (this._request != null) {
      // JSONP requests cannot always be aborted
      if ($.isFunction(this._request.abort)) {
        this._request.abort();
      }

      this._request = null;
    }

    var options = $.extend({
      type: 'GET'
    }, this.ajaxOptions);

    if (typeof options.url === 'function') {
      options.url = options.url.call(this.$element, params);
    }

    if (typeof options.data === 'function') {
      options.data = options.data.call(this.$element, params);
    }

    function request () {
      var $request = options.transport(options, function (data) {
        var results = self.processResults(data, params);

        if (self.options.get('debug') && window.console && console.error) {
          // Check to make sure that the response included a `results` key.
          if (!results || !results.results || !$.isArray(results.results)) {
            console.error(
              'Select2: The AJAX results did not return an array in the ' +
              '`results` key of the response.'
            );
          }
        }

        callback(results);
      }, function () {
        // Attempt to detect if a request was aborted
        // Only works if the transport exposes a status property
        if ('status' in $request &&
            ($request.status === 0 || $request.status === '0')) {
          return;
        }

        self.trigger('results:message', {
          message: 'errorLoading'
        });
      });

      self._request = $request;
    }

    if (this.ajaxOptions.delay && params.term != null) {
      if (this._queryTimeout) {
        window.clearTimeout(this._queryTimeout);
      }

      this._queryTimeout = window.setTimeout(request, this.ajaxOptions.delay);
    } else {
      request();
    }
  };

  return AjaxAdapter;
});

S2.define('select2/data/tags',[
  'jquery'
], function ($) {
  function Tags (decorated, $element, options) {
    var tags = options.get('tags');

    var createTag = options.get('createTag');

    if (createTag !== undefined) {
      this.createTag = createTag;
    }

    var insertTag = options.get('insertTag');

    if (insertTag !== undefined) {
        this.insertTag = insertTag;
    }

    decorated.call(this, $element, options);

    if ($.isArray(tags)) {
      for (var t = 0; t < tags.length; t++) {
        var tag = tags[t];
        var item = this._normalizeItem(tag);

        var $option = this.option(item);

        this.$element.append($option);
      }
    }
  }

  Tags.prototype.query = function (decorated, params, callback) {
    var self = this;

    this._removeOldTags();

    if (params.term == null || params.page != null) {
      decorated.call(this, params, callback);
      return;
    }

    function wrapper (obj, child) {
      var data = obj.results;

      for (var i = 0; i < data.length; i++) {
        var option = data[i];

        var checkChildren = (
          option.children != null &&
          !wrapper({
            results: option.children
          }, true)
        );

        var optionText = (option.text || '').toUpperCase();
        var paramsTerm = (params.term || '').toUpperCase();

        var checkText = optionText === paramsTerm;

        if (checkText || checkChildren) {
          if (child) {
            return false;
          }

          obj.data = data;
          callback(obj);

          return;
        }
      }

      if (child) {
        return true;
      }

      var tag = self.createTag(params);

      if (tag != null) {
        var $option = self.option(tag);
        $option.attr('data-select2-tag', true);

        self.addOptions([$option]);

        self.insertTag(data, tag);
      }

      obj.results = data;

      callback(obj);
    }

    decorated.call(this, params, wrapper);
  };

  Tags.prototype.createTag = function (decorated, params) {
    var term = $.trim(params.term);

    if (term === '') {
      return null;
    }

    return {
      id: term,
      text: term
    };
  };

  Tags.prototype.insertTag = function (_, data, tag) {
    data.unshift(tag);
  };

  Tags.prototype._removeOldTags = function (_) {
    var tag = this._lastTag;

    var $options = this.$element.find('option[data-select2-tag]');

    $options.each(function () {
      if (this.selected) {
        return;
      }

      $(this).remove();
    });
  };

  return Tags;
});

S2.define('select2/data/tokenizer',[
  'jquery'
], function ($) {
  function Tokenizer (decorated, $element, options) {
    var tokenizer = options.get('tokenizer');

    if (tokenizer !== undefined) {
      this.tokenizer = tokenizer;
    }

    decorated.call(this, $element, options);
  }

  Tokenizer.prototype.bind = function (decorated, container, $container) {
    decorated.call(this, container, $container);

    this.$search =  container.dropdown.$search || container.selection.$search ||
      $container.find('.select2-search__field');
  };

  Tokenizer.prototype.query = function (decorated, params, callback) {
    var self = this;

    function createAndSelect (data) {
      // Normalize the data object so we can use it for checks
      var item = self._normalizeItem(data);

      // Check if the data object already exists as a tag
      // Select it if it doesn't
      var $existingOptions = self.$element.find('option').filter(function () {
        return $(this).val() === item.id;
      });

      // If an existing option wasn't found for it, create the option
      if (!$existingOptions.length) {
        var $option = self.option(item);
        $option.attr('data-select2-tag', true);

        self._removeOldTags();
        self.addOptions([$option]);
      }

      // Select the item, now that we know there is an option for it
      select(item);
    }

    function select (data) {
      self.trigger('select', {
        data: data
      });
    }

    params.term = params.term || '';

    var tokenData = this.tokenizer(params, this.options, createAndSelect);

    if (tokenData.term !== params.term) {
      // Replace the search term if we have the search box
      if (this.$search.length) {
        this.$search.val(tokenData.term);
        this.$search.focus();
      }

      params.term = tokenData.term;
    }

    decorated.call(this, params, callback);
  };

  Tokenizer.prototype.tokenizer = function (_, params, options, callback) {
    var separators = options.get('tokenSeparators') || [];
    var term = params.term;
    var i = 0;

    var createTag = this.createTag || function (params) {
      return {
        id: params.term,
        text: params.term
      };
    };

    while (i < term.length) {
      var termChar = term[i];

      if ($.inArray(termChar, separators) === -1) {
        i++;

        continue;
      }

      var part = term.substr(0, i);
      var partParams = $.extend({}, params, {
        term: part
      });

      var data = createTag(partParams);

      if (data == null) {
        i++;
        continue;
      }

      callback(data);

      // Reset the term to not include the tokenized portion
      term = term.substr(i + 1) || '';
      i = 0;
    }

    return {
      term: term
    };
  };

  return Tokenizer;
});

S2.define('select2/data/minimumInputLength',[

], function () {
  function MinimumInputLength (decorated, $e, options) {
    this.minimumInputLength = options.get('minimumInputLength');

    decorated.call(this, $e, options);
  }

  MinimumInputLength.prototype.query = function (decorated, params, callback) {
    params.term = params.term || '';

    if (params.term.length < this.minimumInputLength) {
      this.trigger('results:message', {
        message: 'inputTooShort',
        args: {
          minimum: this.minimumInputLength,
          input: params.term,
          params: params
        }
      });

      return;
    }

    decorated.call(this, params, callback);
  };

  return MinimumInputLength;
});

S2.define('select2/data/maximumInputLength',[

], function () {
  function MaximumInputLength (decorated, $e, options) {
    this.maximumInputLength = options.get('maximumInputLength');

    decorated.call(this, $e, options);
  }

  MaximumInputLength.prototype.query = function (decorated, params, callback) {
    params.term = params.term || '';

    if (this.maximumInputLength > 0 &&
        params.term.length > this.maximumInputLength) {
      this.trigger('results:message', {
        message: 'inputTooLong',
        args: {
          maximum: this.maximumInputLength,
          input: params.term,
          params: params
        }
      });

      return;
    }

    decorated.call(this, params, callback);
  };

  return MaximumInputLength;
});

S2.define('select2/data/maximumSelectionLength',[

], function (){
  function MaximumSelectionLength (decorated, $e, options) {
    this.maximumSelectionLength = options.get('maximumSelectionLength');

    decorated.call(this, $e, options);
  }

  MaximumSelectionLength.prototype.query =
    function (decorated, params, callback) {
      var self = this;

      this.current(function (currentData) {
        var count = currentData != null ? currentData.length : 0;
        if (self.maximumSelectionLength > 0 &&
          count >= self.maximumSelectionLength) {
          self.trigger('results:message', {
            message: 'maximumSelected',
            args: {
              maximum: self.maximumSelectionLength
            }
          });
          return;
        }
        decorated.call(self, params, callback);
      });
  };

  return MaximumSelectionLength;
});

S2.define('select2/dropdown',[
  'jquery',
  './utils'
], function ($, Utils) {
  function Dropdown ($element, options) {
    this.$element = $element;
    this.options = options;

    Dropdown.__super__.constructor.call(this);
  }

  Utils.Extend(Dropdown, Utils.Observable);

  Dropdown.prototype.render = function () {
    var $dropdown = $(
      '<span class="select2-dropdown">' +
        '<span class="select2-results"></span>' +
      '</span>'
    );

    $dropdown.attr('dir', this.options.get('dir'));

    this.$dropdown = $dropdown;

    return $dropdown;
  };

  Dropdown.prototype.bind = function () {
    // Should be implemented in subclasses
  };

  Dropdown.prototype.position = function ($dropdown, $container) {
    // Should be implmented in subclasses
  };

  Dropdown.prototype.destroy = function () {
    // Remove the dropdown from the DOM
    this.$dropdown.remove();
  };

  return Dropdown;
});

S2.define('select2/dropdown/search',[
  'jquery',
  '../utils'
], function ($, Utils) {
  function Search () { }

  Search.prototype.render = function (decorated) {
    var $rendered = decorated.call(this);

    var $search = $(
      '<span class="select2-search select2-search--dropdown">' +
        '<input class="select2-search__field" type="search" tabindex="-1"' +
        ' autocomplete="off" autocorrect="off" autocapitalize="none"' +
        ' spellcheck="false" role="textbox" />' +
      '</span>'
    );

    this.$searchContainer = $search;
    this.$search = $search.find('input');

    $rendered.prepend($search);

    return $rendered;
  };

  Search.prototype.bind = function (decorated, container, $container) {
    var self = this;

    decorated.call(this, container, $container);

    this.$search.on('keydown', function (evt) {
      self.trigger('keypress', evt);

      self._keyUpPrevented = evt.isDefaultPrevented();
    });

    // Workaround for browsers which do not support the `input` event
    // This will prevent double-triggering of events for browsers which support
    // both the `keyup` and `input` events.
    this.$search.on('input', function (evt) {
      // Unbind the duplicated `keyup` event
      $(this).off('keyup');
    });

    this.$search.on('keyup input', function (evt) {
      self.handleSearch(evt);
    });

    container.on('open', function () {
      self.$search.attr('tabindex', 0);

      self.$search.focus();

      window.setTimeout(function () {
        self.$search.focus();
      }, 0);
    });

    container.on('close', function () {
      self.$search.attr('tabindex', -1);

      self.$search.val('');
      self.$search.blur();
    });

    container.on('focus', function () {
      if (!container.isOpen()) {
        self.$search.focus();
      }
    });

    container.on('results:all', function (params) {
      if (params.query.term == null || params.query.term === '') {
        var showSearch = self.showSearch(params);

        if (showSearch) {
          self.$searchContainer.removeClass('select2-search--hide');
        } else {
          self.$searchContainer.addClass('select2-search--hide');
        }
      }
    });
  };

  Search.prototype.handleSearch = function (evt) {
    if (!this._keyUpPrevented) {
      var input = this.$search.val();

      this.trigger('query', {
        term: input
      });
    }

    this._keyUpPrevented = false;
  };

  Search.prototype.showSearch = function (_, params) {
    return true;
  };

  return Search;
});

S2.define('select2/dropdown/hidePlaceholder',[

], function () {
  function HidePlaceholder (decorated, $element, options, dataAdapter) {
    this.placeholder = this.normalizePlaceholder(options.get('placeholder'));

    decorated.call(this, $element, options, dataAdapter);
  }

  HidePlaceholder.prototype.append = function (decorated, data) {
    data.results = this.removePlaceholder(data.results);

    decorated.call(this, data);
  };

  HidePlaceholder.prototype.normalizePlaceholder = function (_, placeholder) {
    if (typeof placeholder === 'string') {
      placeholder = {
        id: '',
        text: placeholder
      };
    }

    return placeholder;
  };

  HidePlaceholder.prototype.removePlaceholder = function (_, data) {
    var modifiedData = data.slice(0);

    for (var d = data.length - 1; d >= 0; d--) {
      var item = data[d];

      if (this.placeholder.id === item.id) {
        modifiedData.splice(d, 1);
      }
    }

    return modifiedData;
  };

  return HidePlaceholder;
});

S2.define('select2/dropdown/infiniteScroll',[
  'jquery'
], function ($) {
  function InfiniteScroll (decorated, $element, options, dataAdapter) {
    this.lastParams = {};

    decorated.call(this, $element, options, dataAdapter);

    this.$loadingMore = this.createLoadingMore();
    this.loading = false;
  }

  InfiniteScroll.prototype.append = function (decorated, data) {
    this.$loadingMore.remove();
    this.loading = false;

    decorated.call(this, data);

    if (this.showLoadingMore(data)) {
      this.$results.append(this.$loadingMore);
    }
  };

  InfiniteScroll.prototype.bind = function (decorated, container, $container) {
    var self = this;

    decorated.call(this, container, $container);

    container.on('query', function (params) {
      self.lastParams = params;
      self.loading = true;
    });

    container.on('query:append', function (params) {
      self.lastParams = params;
      self.loading = true;
    });

    this.$results.on('scroll', function () {
      var isLoadMoreVisible = $.contains(
        document.documentElement,
        self.$loadingMore[0]
      );

      if (self.loading || !isLoadMoreVisible) {
        return;
      }

      var currentOffset = self.$results.offset().top +
        self.$results.outerHeight(false);
      var loadingMoreOffset = self.$loadingMore.offset().top +
        self.$loadingMore.outerHeight(false);

      if (currentOffset + 50 >= loadingMoreOffset) {
        self.loadMore();
      }
    });
  };

  InfiniteScroll.prototype.loadMore = function () {
    this.loading = true;

    var params = $.extend({}, {page: 1}, this.lastParams);

    params.page++;

    this.trigger('query:append', params);
  };

  InfiniteScroll.prototype.showLoadingMore = function (_, data) {
    return data.pagination && data.pagination.more;
  };

  InfiniteScroll.prototype.createLoadingMore = function () {
    var $option = $(
      '<li ' +
      'class="select2-results__option select2-results__option--load-more"' +
      'role="treeitem" aria-disabled="true"></li>'
    );

    var message = this.options.get('translations').get('loadingMore');

    $option.html(message(this.lastParams));

    return $option;
  };

  return InfiniteScroll;
});

S2.define('select2/dropdown/attachBody',[
  'jquery',
  '../utils'
], function ($, Utils) {
  function AttachBody (decorated, $element, options) {
    this.$dropdownParent = options.get('dropdownParent') || $(document.body);

    decorated.call(this, $element, options);
  }

  AttachBody.prototype.bind = function (decorated, container, $container) {
    var self = this;

    var setupResultsEvents = false;

    decorated.call(this, container, $container);

    container.on('open', function () {
      self._showDropdown();
      self._attachPositioningHandler(container);

      if (!setupResultsEvents) {
        setupResultsEvents = true;

        container.on('results:all', function () {
          self._positionDropdown();
          self._resizeDropdown();
        });

        container.on('results:append', function () {
          self._positionDropdown();
          self._resizeDropdown();
        });
      }
    });

    container.on('close', function () {
      self._hideDropdown();
      self._detachPositioningHandler(container);
    });

    this.$dropdownContainer.on('mousedown', function (evt) {
      evt.stopPropagation();
    });
  };

  AttachBody.prototype.destroy = function (decorated) {
    decorated.call(this);

    this.$dropdownContainer.remove();
  };

  AttachBody.prototype.position = function (decorated, $dropdown, $container) {
    // Clone all of the container classes
    $dropdown.attr('class', $container.attr('class'));

    $dropdown.removeClass('select2');
    $dropdown.addClass('select2-container--open');

    $dropdown.css({
      position: 'absolute',
      top: -999999
    });

    this.$container = $container;
  };

  AttachBody.prototype.render = function (decorated) {
    var $container = $('<span></span>');

    var $dropdown = decorated.call(this);
    $container.append($dropdown);

    this.$dropdownContainer = $container;

    return $container;
  };

  AttachBody.prototype._hideDropdown = function (decorated) {
    this.$dropdownContainer.detach();
  };

  AttachBody.prototype._attachPositioningHandler =
      function (decorated, container) {
    var self = this;

    var scrollEvent = 'scroll.select2.' + container.id;
    var resizeEvent = 'resize.select2.' + container.id;
    var orientationEvent = 'orientationchange.select2.' + container.id;

    var $watchers = this.$container.parents().filter(Utils.hasScroll);
    $watchers.each(function () {
      Utils.StoreData(this, 'select2-scroll-position', {
        x: $(this).scrollLeft(),
        y: $(this).scrollTop()
      });
    });

    $watchers.on(scrollEvent, function (ev) {
      var position = Utils.GetData(this, 'select2-scroll-position');
      $(this).scrollTop(position.y);
    });

    $(window).on(scrollEvent + ' ' + resizeEvent + ' ' + orientationEvent,
      function (e) {
      self._positionDropdown();
      self._resizeDropdown();
    });
  };

  AttachBody.prototype._detachPositioningHandler =
      function (decorated, container) {
    var scrollEvent = 'scroll.select2.' + container.id;
    var resizeEvent = 'resize.select2.' + container.id;
    var orientationEvent = 'orientationchange.select2.' + container.id;

    var $watchers = this.$container.parents().filter(Utils.hasScroll);
    $watchers.off(scrollEvent);

    $(window).off(scrollEvent + ' ' + resizeEvent + ' ' + orientationEvent);
  };

  AttachBody.prototype._positionDropdown = function () {
    var $window = $(window);

    var isCurrentlyAbove = this.$dropdown.hasClass('select2-dropdown--above');
    var isCurrentlyBelow = this.$dropdown.hasClass('select2-dropdown--below');

    var newDirection = null;

    var offset = this.$container.offset();

    offset.bottom = offset.top + this.$container.outerHeight(false);

    var container = {
      height: this.$container.outerHeight(false)
    };

    container.top = offset.top;
    container.bottom = offset.top + container.height;

    var dropdown = {
      height: this.$dropdown.outerHeight(false)
    };

    var viewport = {
      top: $window.scrollTop(),
      bottom: $window.scrollTop() + $window.height()
    };

    var enoughRoomAbove = viewport.top < (offset.top - dropdown.height);
    var enoughRoomBelow = viewport.bottom > (offset.bottom + dropdown.height);

    var css = {
      left: offset.left,
      top: container.bottom
    };

    // Determine what the parent element is to use for calciulating the offset
    var $offsetParent = this.$dropdownParent;

    // For statically positoned elements, we need to get the element
    // that is determining the offset
    if ($offsetParent.css('position') === 'static') {
      $offsetParent = $offsetParent.offsetParent();
    }

    var parentOffset = $offsetParent.offset();

    css.top -= parentOffset.top;
    css.left -= parentOffset.left;

    if (!isCurrentlyAbove && !isCurrentlyBelow) {
      newDirection = 'below';
    }

    if (!enoughRoomBelow && enoughRoomAbove && !isCurrentlyAbove) {
      newDirection = 'above';
    } else if (!enoughRoomAbove && enoughRoomBelow && isCurrentlyAbove) {
      newDirection = 'below';
    }

    if (newDirection == 'above' ||
      (isCurrentlyAbove && newDirection !== 'below')) {
      css.top = container.top - parentOffset.top - dropdown.height;
    }

    if (newDirection != null) {
      this.$dropdown
        .removeClass('select2-dropdown--below select2-dropdown--above')
        .addClass('select2-dropdown--' + newDirection);
      this.$container
        .removeClass('select2-container--below select2-container--above')
        .addClass('select2-container--' + newDirection);
    }

    this.$dropdownContainer.css(css);
  };

  AttachBody.prototype._resizeDropdown = function () {
    var css = {
      width: this.$container.outerWidth(false) + 'px'
    };

    if (this.options.get('dropdownAutoWidth')) {
      css.minWidth = css.width;
      css.position = 'relative';
      css.width = 'auto';
    }

    this.$dropdown.css(css);
  };

  AttachBody.prototype._showDropdown = function (decorated) {
    this.$dropdownContainer.appendTo(this.$dropdownParent);

    this._positionDropdown();
    this._resizeDropdown();
  };

  return AttachBody;
});

S2.define('select2/dropdown/minimumResultsForSearch',[

], function () {
  function countResults (data) {
    var count = 0;

    for (var d = 0; d < data.length; d++) {
      var item = data[d];

      if (item.children) {
        count += countResults(item.children);
      } else {
        count++;
      }
    }

    return count;
  }

  function MinimumResultsForSearch (decorated, $element, options, dataAdapter) {
    this.minimumResultsForSearch = options.get('minimumResultsForSearch');

    if (this.minimumResultsForSearch < 0) {
      this.minimumResultsForSearch = Infinity;
    }

    decorated.call(this, $element, options, dataAdapter);
  }

  MinimumResultsForSearch.prototype.showSearch = function (decorated, params) {
    if (countResults(params.data.results) < this.minimumResultsForSearch) {
      return false;
    }

    return decorated.call(this, params);
  };

  return MinimumResultsForSearch;
});

S2.define('select2/dropdown/selectOnClose',[
  '../utils'
], function (Utils) {
  function SelectOnClose () { }

  SelectOnClose.prototype.bind = function (decorated, container, $container) {
    var self = this;

    decorated.call(this, container, $container);

    container.on('close', function (params) {
      self._handleSelectOnClose(params);
    });
  };

  SelectOnClose.prototype._handleSelectOnClose = function (_, params) {
    if (params && params.originalSelect2Event != null) {
      var event = params.originalSelect2Event;

      // Don't select an item if the close event was triggered from a select or
      // unselect event
      if (event._type === 'select' || event._type === 'unselect') {
        return;
      }
    }

    var $highlightedResults = this.getHighlightedResults();

    // Only select highlighted results
    if ($highlightedResults.length < 1) {
      return;
    }

    var data = Utils.GetData($highlightedResults[0], 'data');

    // Don't re-select already selected resulte
    if (
      (data.element != null && data.element.selected) ||
      (data.element == null && data.selected)
    ) {
      return;
    }

    this.trigger('select', {
        data: data
    });
  };

  return SelectOnClose;
});

S2.define('select2/dropdown/closeOnSelect',[

], function () {
  function CloseOnSelect () { }

  CloseOnSelect.prototype.bind = function (decorated, container, $container) {
    var self = this;

    decorated.call(this, container, $container);

    container.on('select', function (evt) {
      self._selectTriggered(evt);
    });

    container.on('unselect', function (evt) {
      self._selectTriggered(evt);
    });
  };

  CloseOnSelect.prototype._selectTriggered = function (_, evt) {
    var originalEvent = evt.originalEvent;

    // Don't close if the control key is being held
    if (originalEvent && originalEvent.ctrlKey) {
      return;
    }

    this.trigger('close', {
      originalEvent: originalEvent,
      originalSelect2Event: evt
    });
  };

  return CloseOnSelect;
});

S2.define('select2/i18n/en',[],function () {
  // English
  return {
    errorLoading: function () {
      return 'The results could not be loaded.';
    },
    inputTooLong: function (args) {
      var overChars = args.input.length - args.maximum;

      var message = 'Please delete ' + overChars + ' character';

      if (overChars != 1) {
        message += 's';
      }

      return message;
    },
    inputTooShort: function (args) {
      var remainingChars = args.minimum - args.input.length;

      var message = 'Please enter ' + remainingChars + ' or more characters';

      return message;
    },
    loadingMore: function () {
      return 'Loading more results…';
    },
    maximumSelected: function (args) {
      var message = 'You can only select ' + args.maximum + ' item';

      if (args.maximum != 1) {
        message += 's';
      }

      return message;
    },
    noResults: function () {
      return 'No results found';
    },
    searching: function () {
      return 'Searching…';
    }
  };
});

S2.define('select2/defaults',[
  'jquery',
  'require',

  './results',

  './selection/single',
  './selection/multiple',
  './selection/placeholder',
  './selection/allowClear',
  './selection/search',
  './selection/eventRelay',

  './utils',
  './translation',
  './diacritics',

  './data/select',
  './data/array',
  './data/ajax',
  './data/tags',
  './data/tokenizer',
  './data/minimumInputLength',
  './data/maximumInputLength',
  './data/maximumSelectionLength',

  './dropdown',
  './dropdown/search',
  './dropdown/hidePlaceholder',
  './dropdown/infiniteScroll',
  './dropdown/attachBody',
  './dropdown/minimumResultsForSearch',
  './dropdown/selectOnClose',
  './dropdown/closeOnSelect',

  './i18n/en'
], function ($, require,

             ResultsList,

             SingleSelection, MultipleSelection, Placeholder, AllowClear,
             SelectionSearch, EventRelay,

             Utils, Translation, DIACRITICS,

             SelectData, ArrayData, AjaxData, Tags, Tokenizer,
             MinimumInputLength, MaximumInputLength, MaximumSelectionLength,

             Dropdown, DropdownSearch, HidePlaceholder, InfiniteScroll,
             AttachBody, MinimumResultsForSearch, SelectOnClose, CloseOnSelect,

             EnglishTranslation) {
  function Defaults () {
    this.reset();
  }

  Defaults.prototype.apply = function (options) {
    options = $.extend(true, {}, this.defaults, options);

    if (options.dataAdapter == null) {
      if (options.ajax != null) {
        options.dataAdapter = AjaxData;
      } else if (options.data != null) {
        options.dataAdapter = ArrayData;
      } else {
        options.dataAdapter = SelectData;
      }

      if (options.minimumInputLength > 0) {
        options.dataAdapter = Utils.Decorate(
          options.dataAdapter,
          MinimumInputLength
        );
      }

      if (options.maximumInputLength > 0) {
        options.dataAdapter = Utils.Decorate(
          options.dataAdapter,
          MaximumInputLength
        );
      }

      if (options.maximumSelectionLength > 0) {
        options.dataAdapter = Utils.Decorate(
          options.dataAdapter,
          MaximumSelectionLength
        );
      }

      if (options.tags) {
        options.dataAdapter = Utils.Decorate(options.dataAdapter, Tags);
      }

      if (options.tokenSeparators != null || options.tokenizer != null) {
        options.dataAdapter = Utils.Decorate(
          options.dataAdapter,
          Tokenizer
        );
      }

      if (options.query != null) {
        var Query = require(options.amdBase + 'compat/query');

        options.dataAdapter = Utils.Decorate(
          options.dataAdapter,
          Query
        );
      }

      if (options.initSelection != null) {
        var InitSelection = require(options.amdBase + 'compat/initSelection');

        options.dataAdapter = Utils.Decorate(
          options.dataAdapter,
          InitSelection
        );
      }
    }

    if (options.resultsAdapter == null) {
      options.resultsAdapter = ResultsList;

      if (options.ajax != null) {
        options.resultsAdapter = Utils.Decorate(
          options.resultsAdapter,
          InfiniteScroll
        );
      }

      if (options.placeholder != null) {
        options.resultsAdapter = Utils.Decorate(
          options.resultsAdapter,
          HidePlaceholder
        );
      }

      if (options.selectOnClose) {
        options.resultsAdapter = Utils.Decorate(
          options.resultsAdapter,
          SelectOnClose
        );
      }
    }

    if (options.dropdownAdapter == null) {
      if (options.multiple) {
        options.dropdownAdapter = Dropdown;
      } else {
        var SearchableDropdown = Utils.Decorate(Dropdown, DropdownSearch);

        options.dropdownAdapter = SearchableDropdown;
      }

      if (options.minimumResultsForSearch !== 0) {
        options.dropdownAdapter = Utils.Decorate(
          options.dropdownAdapter,
          MinimumResultsForSearch
        );
      }

      if (options.closeOnSelect) {
        options.dropdownAdapter = Utils.Decorate(
          options.dropdownAdapter,
          CloseOnSelect
        );
      }

      if (
        options.dropdownCssClass != null ||
        options.dropdownCss != null ||
        options.adaptDropdownCssClass != null
      ) {
        var DropdownCSS = require(options.amdBase + 'compat/dropdownCss');

        options.dropdownAdapter = Utils.Decorate(
          options.dropdownAdapter,
          DropdownCSS
        );
      }

      options.dropdownAdapter = Utils.Decorate(
        options.dropdownAdapter,
        AttachBody
      );
    }

    if (options.selectionAdapter == null) {
      if (options.multiple) {
        options.selectionAdapter = MultipleSelection;
      } else {
        options.selectionAdapter = SingleSelection;
      }

      // Add the placeholder mixin if a placeholder was specified
      if (options.placeholder != null) {
        options.selectionAdapter = Utils.Decorate(
          options.selectionAdapter,
          Placeholder
        );
      }

      if (options.allowClear) {
        options.selectionAdapter = Utils.Decorate(
          options.selectionAdapter,
          AllowClear
        );
      }

      if (options.multiple) {
        options.selectionAdapter = Utils.Decorate(
          options.selectionAdapter,
          SelectionSearch
        );
      }

      if (
        options.containerCssClass != null ||
        options.containerCss != null ||
        options.adaptContainerCssClass != null
      ) {
        var ContainerCSS = require(options.amdBase + 'compat/containerCss');

        options.selectionAdapter = Utils.Decorate(
          options.selectionAdapter,
          ContainerCSS
        );
      }

      options.selectionAdapter = Utils.Decorate(
        options.selectionAdapter,
        EventRelay
      );
    }

    if (typeof options.language === 'string') {
      // Check if the language is specified with a region
      if (options.language.indexOf('-') > 0) {
        // Extract the region information if it is included
        var languageParts = options.language.split('-');
        var baseLanguage = languageParts[0];

        options.language = [options.language, baseLanguage];
      } else {
        options.language = [options.language];
      }
    }

    if ($.isArray(options.language)) {
      var languages = new Translation();
      options.language.push('en');

      var languageNames = options.language;

      for (var l = 0; l < languageNames.length; l++) {
        var name = languageNames[l];
        var language = {};

        try {
          // Try to load it with the original name
          language = Translation.loadPath(name);
        } catch (e) {
          try {
            // If we couldn't load it, check if it wasn't the full path
            name = this.defaults.amdLanguageBase + name;
            language = Translation.loadPath(name);
          } catch (ex) {
            // The translation could not be loaded at all. Sometimes this is
            // because of a configuration problem, other times this can be
            // because of how Select2 helps load all possible translation files.
            if (options.debug && window.console && console.warn) {
              console.warn(
                'Select2: The language file for "' + name + '" could not be ' +
                'automatically loaded. A fallback will be used instead.'
              );
            }

            continue;
          }
        }

        languages.extend(language);
      }

      options.translations = languages;
    } else {
      var baseTranslation = Translation.loadPath(
        this.defaults.amdLanguageBase + 'en'
      );
      var customTranslation = new Translation(options.language);

      customTranslation.extend(baseTranslation);

      options.translations = customTranslation;
    }

    return options;
  };

  Defaults.prototype.reset = function () {
    function stripDiacritics (text) {
      // Used 'uni range + named function' from http://jsperf.com/diacritics/18
      function match(a) {
        return DIACRITICS[a] || a;
      }

      return text.replace(/[^\u0000-\u007E]/g, match);
    }

    function matcher (params, data) {
      // Always return the object if there is nothing to compare
      if ($.trim(params.term) === '') {
        return data;
      }

      // Do a recursive check for options with children
      if (data.children && data.children.length > 0) {
        // Clone the data object if there are children
        // This is required as we modify the object to remove any non-matches
        var match = $.extend(true, {}, data);

        // Check each child of the option
        for (var c = data.children.length - 1; c >= 0; c--) {
          var child = data.children[c];

          var matches = matcher(params, child);

          // If there wasn't a match, remove the object in the array
          if (matches == null) {
            match.children.splice(c, 1);
          }
        }

        // If any children matched, return the new object
        if (match.children.length > 0) {
          return match;
        }

        // If there were no matching children, check just the plain object
        return matcher(params, match);
      }

      var original = stripDiacritics(data.text).toUpperCase();
      var term = stripDiacritics(params.term).toUpperCase();

      // Check if the text contains the term
      if (original.indexOf(term) > -1) {
        return data;
      }

      // If it doesn't contain the term, don't return anything
      return null;
    }

    this.defaults = {
      amdBase: './',
      amdLanguageBase: './i18n/',
      closeOnSelect: true,
      debug: false,
      dropdownAutoWidth: false,
      escapeMarkup: Utils.escapeMarkup,
      language: EnglishTranslation,
      matcher: matcher,
      minimumInputLength: 0,
      maximumInputLength: 0,
      maximumSelectionLength: 0,
      minimumResultsForSearch: 0,
      selectOnClose: false,
      sorter: function (data) {
        return data;
      },
      templateResult: function (result) {
        return result.text;
      },
      templateSelection: function (selection) {
        return selection.text;
      },
      theme: 'default',
      width: 'resolve'
    };
  };

  Defaults.prototype.set = function (key, value) {
    var camelKey = $.camelCase(key);

    var data = {};
    data[camelKey] = value;

    var convertedData = Utils._convertData(data);

    $.extend(true, this.defaults, convertedData);
  };

  var defaults = new Defaults();

  return defaults;
});

S2.define('select2/options',[
  'require',
  'jquery',
  './defaults',
  './utils'
], function (require, $, Defaults, Utils) {
  function Options (options, $element) {
    this.options = options;

    if ($element != null) {
      this.fromElement($element);
    }

    this.options = Defaults.apply(this.options);

    if ($element && $element.is('input')) {
      var InputCompat = require(this.get('amdBase') + 'compat/inputData');

      this.options.dataAdapter = Utils.Decorate(
        this.options.dataAdapter,
        InputCompat
      );
    }
  }

  Options.prototype.fromElement = function ($e) {
    var excludedData = ['select2'];

    if (this.options.multiple == null) {
      this.options.multiple = $e.prop('multiple');
    }

    if (this.options.disabled == null) {
      this.options.disabled = $e.prop('disabled');
    }

    if (this.options.language == null) {
      if ($e.prop('lang')) {
        this.options.language = $e.prop('lang').toLowerCase();
      } else if ($e.closest('[lang]').prop('lang')) {
        this.options.language = $e.closest('[lang]').prop('lang');
      }
    }

    if (this.options.dir == null) {
      if ($e.prop('dir')) {
        this.options.dir = $e.prop('dir');
      } else if ($e.closest('[dir]').prop('dir')) {
        this.options.dir = $e.closest('[dir]').prop('dir');
      } else {
        this.options.dir = 'ltr';
      }
    }

    $e.prop('disabled', this.options.disabled);
    $e.prop('multiple', this.options.multiple);

    if (Utils.GetData($e[0], 'select2Tags')) {
      if (this.options.debug && window.console && console.warn) {
        console.warn(
          'Select2: The `data-select2-tags` attribute has been changed to ' +
          'use the `data-data` and `data-tags="true"` attributes and will be ' +
          'removed in future versions of Select2.'
        );
      }

      Utils.StoreData($e[0], 'data', Utils.GetData($e[0], 'select2Tags'));
      Utils.StoreData($e[0], 'tags', true);
    }

    if (Utils.GetData($e[0], 'ajaxUrl')) {
      if (this.options.debug && window.console && console.warn) {
        console.warn(
          'Select2: The `data-ajax-url` attribute has been changed to ' +
          '`data-ajax--url` and support for the old attribute will be removed' +
          ' in future versions of Select2.'
        );
      }

      $e.attr('ajax--url', Utils.GetData($e[0], 'ajaxUrl'));
      Utils.StoreData($e[0], 'ajax-Url', Utils.GetData($e[0], 'ajaxUrl'));
	  
    }

    var dataset = {};

    // Prefer the element's `dataset` attribute if it exists
    // jQuery 1.x does not correctly handle data attributes with multiple dashes
    if ($.fn.jquery && $.fn.jquery.substr(0, 2) == '1.' && $e[0].dataset) {
      dataset = $.extend(true, {}, $e[0].dataset, Utils.GetData($e[0]));
    } else {
      dataset = Utils.GetData($e[0]);
    }

    var data = $.extend(true, {}, dataset);

    data = Utils._convertData(data);

    for (var key in data) {
      if ($.inArray(key, excludedData) > -1) {
        continue;
      }

      if ($.isPlainObject(this.options[key])) {
        $.extend(this.options[key], data[key]);
      } else {
        this.options[key] = data[key];
      }
    }

    return this;
  };

  Options.prototype.get = function (key) {
    return this.options[key];
  };

  Options.prototype.set = function (key, val) {
    this.options[key] = val;
  };

  return Options;
});

S2.define('select2/core',[
  'jquery',
  './options',
  './utils',
  './keys'
], function ($, Options, Utils, KEYS) {
  var Select2 = function ($element, options) {
    if (Utils.GetData($element[0], 'select2') != null) {
      Utils.GetData($element[0], 'select2').destroy();
    }

    this.$element = $element;

    this.id = this._generateId($element);

    options = options || {};

    this.options = new Options(options, $element);

    Select2.__super__.constructor.call(this);

    // Set up the tabindex

    var tabindex = $element.attr('tabindex') || 0;
    Utils.StoreData($element[0], 'old-tabindex', tabindex);
    $element.attr('tabindex', '-1');

    // Set up containers and adapters

    var DataAdapter = this.options.get('dataAdapter');
    this.dataAdapter = new DataAdapter($element, this.options);

    var $container = this.render();

    this._placeContainer($container);

    var SelectionAdapter = this.options.get('selectionAdapter');
    this.selection = new SelectionAdapter($element, this.options);
    this.$selection = this.selection.render();

    this.selection.position(this.$selection, $container);

    var DropdownAdapter = this.options.get('dropdownAdapter');
    this.dropdown = new DropdownAdapter($element, this.options);
    this.$dropdown = this.dropdown.render();

    this.dropdown.position(this.$dropdown, $container);

    var ResultsAdapter = this.options.get('resultsAdapter');
    this.results = new ResultsAdapter($element, this.options, this.dataAdapter);
    this.$results = this.results.render();

    this.results.position(this.$results, this.$dropdown);

    // Bind events

    var self = this;

    // Bind the container to all of the adapters
    this._bindAdapters();

    // Register any DOM event handlers
    this._registerDomEvents();

    // Register any internal event handlers
    this._registerDataEvents();
    this._registerSelectionEvents();
    this._registerDropdownEvents();
    this._registerResultsEvents();
    this._registerEvents();

    // Set the initial state
    this.dataAdapter.current(function (initialData) {
      self.trigger('selection:update', {
        data: initialData
      });
    });

    // Hide the original select
    $element.addClass('select2-hidden-accessible');
    $element.attr('aria-hidden', 'true');

    // Synchronize any monitored attributes
    this._syncAttributes();

    Utils.StoreData($element[0], 'select2', this);

    // Ensure backwards compatibility with $element.data('select2').
    $element.data('select2', this);
  };

  Utils.Extend(Select2, Utils.Observable);

  Select2.prototype._generateId = function ($element) {
    var id = '';

    if ($element.attr('id') != null) {
      id = $element.attr('id');
    } else if ($element.attr('name') != null) {
      id = $element.attr('name') + '-' + Utils.generateChars(2);
    } else {
      id = Utils.generateChars(4);
    }

    id = id.replace(/(:|\.|\[|\]|,)/g, '');
    id = 'select2-' + id;

    return id;
  };

  Select2.prototype._placeContainer = function ($container) {
    $container.insertAfter(this.$element);

    var width = this._resolveWidth(this.$element, this.options.get('width'));

    if (width != null) {
      $container.css('width', width);
    }
  };

  Select2.prototype._resolveWidth = function ($element, method) {
    var WIDTH = /^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;

    if (method == 'resolve') {
      var styleWidth = this._resolveWidth($element, 'style');

      if (styleWidth != null) {
        return styleWidth;
      }

      return this._resolveWidth($element, 'element');
    }

    if (method == 'element') {
      var elementWidth = $element.outerWidth(false);

      if (elementWidth <= 0) {
        return 'auto';
      }

      return elementWidth + 'px';
    }

    if (method == 'style') {
      var style = $element.attr('style');

      if (typeof(style) !== 'string') {
        return null;
      }

      var attrs = style.split(';');

      for (var i = 0, l = attrs.length; i < l; i = i + 1) {
        var attr = attrs[i].replace(/\s/g, '');
        var matches = attr.match(WIDTH);

        if (matches !== null && matches.length >= 1) {
          return matches[1];
        }
      }

      return null;
    }

    return method;
  };

  Select2.prototype._bindAdapters = function () {
    this.dataAdapter.bind(this, this.$container);
    this.selection.bind(this, this.$container);

    this.dropdown.bind(this, this.$container);
    this.results.bind(this, this.$container);
  };

  Select2.prototype._registerDomEvents = function () {
    var self = this;

    this.$element.on('change.select2', function () {
      self.dataAdapter.current(function (data) {
        self.trigger('selection:update', {
          data: data
        });
      });
    });

    this.$element.on('focus.select2', function (evt) {
      self.trigger('focus', evt);
    });

    this._syncA = Utils.bind(this._syncAttributes, this);
    this._syncS = Utils.bind(this._syncSubtree, this);

    if (this.$element[0].attachEvent) {
      this.$element[0].attachEvent('onpropertychange', this._syncA);
    }

    var observer = window.MutationObserver ||
      window.WebKitMutationObserver ||
      window.MozMutationObserver
    ;

    if (observer != null) {
      this._observer = new observer(function (mutations) {
        $.each(mutations, self._syncA);
        $.each(mutations, self._syncS);
      });
      this._observer.observe(this.$element[0], {
        attributes: true,
        childList: true,
        subtree: false
      });
    } else if (this.$element[0].addEventListener) {
      this.$element[0].addEventListener(
        'DOMAttrModified',
        self._syncA,
        false
      );
      this.$element[0].addEventListener(
        'DOMNodeInserted',
        self._syncS,
        false
      );
      this.$element[0].addEventListener(
        'DOMNodeRemoved',
        self._syncS,
        false
      );
    }
  };

  Select2.prototype._registerDataEvents = function () {
    var self = this;

    this.dataAdapter.on('*', function (name, params) {
      self.trigger(name, params);
    });
  };

  Select2.prototype._registerSelectionEvents = function () {
    var self = this;
    var nonRelayEvents = ['toggle', 'focus'];

    this.selection.on('toggle', function () {
      self.toggleDropdown();
    });

    this.selection.on('focus', function (params) {
      self.focus(params);
    });

    this.selection.on('*', function (name, params) {
      if ($.inArray(name, nonRelayEvents) !== -1) {
        return;
      }

      self.trigger(name, params);
    });
  };

  Select2.prototype._registerDropdownEvents = function () {
    var self = this;

    this.dropdown.on('*', function (name, params) {
      self.trigger(name, params);
    });
  };

  Select2.prototype._registerResultsEvents = function () {
    var self = this;

    this.results.on('*', function (name, params) {
      self.trigger(name, params);
    });
  };

  Select2.prototype._registerEvents = function () {
    var self = this;

    this.on('open', function () {
      self.$container.addClass('select2-container--open');
    });

    this.on('close', function () {
      self.$container.removeClass('select2-container--open');
    });

    this.on('enable', function () {
      self.$container.removeClass('select2-container--disabled');
    });

    this.on('disable', function () {
      self.$container.addClass('select2-container--disabled');
    });

    this.on('blur', function () {
      self.$container.removeClass('select2-container--focus');
    });

    this.on('query', function (params) {
      if (!self.isOpen()) {
        self.trigger('open', {});
      }

      this.dataAdapter.query(params, function (data) {
        self.trigger('results:all', {
          data: data,
          query: params
        });
      });
    });

    this.on('query:append', function (params) {
      this.dataAdapter.query(params, function (data) {
        self.trigger('results:append', {
          data: data,
          query: params
        });
      });
    });

    this.on('keypress', function (evt) {
      var key = evt.which;

      if (self.isOpen()) {
        if (key === KEYS.ESC || key === KEYS.TAB ||
            (key === KEYS.UP && evt.altKey)) {
          self.close();

          evt.preventDefault();
        } else if (key === KEYS.ENTER) {
          self.trigger('results:select', {});

          evt.preventDefault();
        } else if ((key === KEYS.SPACE && evt.ctrlKey)) {
          self.trigger('results:toggle', {});

          evt.preventDefault();
        } else if (key === KEYS.UP) {
          self.trigger('results:previous', {});

          evt.preventDefault();
        } else if (key === KEYS.DOWN) {
          self.trigger('results:next', {});

          evt.preventDefault();
        }
      } else {
        if (key === KEYS.ENTER || key === KEYS.SPACE ||
            (key === KEYS.DOWN && evt.altKey)) {
          self.open();

          evt.preventDefault();
        }
      }
    });
  };

  Select2.prototype._syncAttributes = function () {
    this.options.set('disabled', this.$element.prop('disabled'));

    if (this.options.get('disabled')) {
      if (this.isOpen()) {
        this.close();
      }

      this.trigger('disable', {});
    } else {
      this.trigger('enable', {});
    }
  };

  Select2.prototype._syncSubtree = function (evt, mutations) {
    var changed = false;
    var self = this;

    // Ignore any mutation events raised for elements that aren't options or
    // optgroups. This handles the case when the select element is destroyed
    if (
      evt && evt.target && (
        evt.target.nodeName !== 'OPTION' && evt.target.nodeName !== 'OPTGROUP'
      )
    ) {
      return;
    }

    if (!mutations) {
      // If mutation events aren't supported, then we can only assume that the
      // change affected the selections
      changed = true;
    } else if (mutations.addedNodes && mutations.addedNodes.length > 0) {
      for (var n = 0; n < mutations.addedNodes.length; n++) {
        var node = mutations.addedNodes[n];

        if (node.selected) {
          changed = true;
        }
      }
    } else if (mutations.removedNodes && mutations.removedNodes.length > 0) {
      changed = true;
    }

    // Only re-pull the data if we think there is a change
    if (changed) {
      this.dataAdapter.current(function (currentData) {
        self.trigger('selection:update', {
          data: currentData
        });
      });
    }
  };

  /**
   * Override the trigger method to automatically trigger pre-events when
   * there are events that can be prevented.
   */
  Select2.prototype.trigger = function (name, args) {
    var actualTrigger = Select2.__super__.trigger;
    var preTriggerMap = {
      'open': 'opening',
      'close': 'closing',
      'select': 'selecting',
      'unselect': 'unselecting',
      'clear': 'clearing'
    };

    if (args === undefined) {
      args = {};
    }

    if (name in preTriggerMap) {
      var preTriggerName = preTriggerMap[name];
      var preTriggerArgs = {
        prevented: false,
        name: name,
        args: args
      };

      actualTrigger.call(this, preTriggerName, preTriggerArgs);

      if (preTriggerArgs.prevented) {
        args.prevented = true;

        return;
      }
    }

    actualTrigger.call(this, name, args);
  };

  Select2.prototype.toggleDropdown = function () {
    if (this.options.get('disabled')) {
      return;
    }

    if (this.isOpen()) {
      this.close();
    } else {
      this.open();
    }
  };

  Select2.prototype.open = function () {
    if (this.isOpen()) {
      return;
    }

    this.trigger('query', {});
  };

  Select2.prototype.close = function () {
    if (!this.isOpen()) {
      return;
    }

    this.trigger('close', {});
  };

  Select2.prototype.isOpen = function () {
    return this.$container.hasClass('select2-container--open');
  };

  Select2.prototype.hasFocus = function () {
    return this.$container.hasClass('select2-container--focus');
  };

  Select2.prototype.focus = function (data) {
    // No need to re-trigger focus events if we are already focused
    if (this.hasFocus()) {
      return;
    }

    this.$container.addClass('select2-container--focus');
    this.trigger('focus', {});
  };

  Select2.prototype.enable = function (args) {
    if (this.options.get('debug') && window.console && console.warn) {
      console.warn(
        'Select2: The `select2("enable")` method has been deprecated and will' +
        ' be removed in later Select2 versions. Use $element.prop("disabled")' +
        ' instead.'
      );
    }

    if (args == null || args.length === 0) {
      args = [true];
    }

    var disabled = !args[0];

    this.$element.prop('disabled', disabled);
  };

  Select2.prototype.data = function () {
    if (this.options.get('debug') &&
        arguments.length > 0 && window.console && console.warn) {
      console.warn(
        'Select2: Data can no longer be set using `select2("data")`. You ' +
        'should consider setting the value instead using `$element.val()`.'
      );
    }

    var data = [];

    this.dataAdapter.current(function (currentData) {
      data = currentData;
    });

    return data;
  };

  Select2.prototype.val = function (args) {
    if (this.options.get('debug') && window.console && console.warn) {
      console.warn(
        'Select2: The `select2("val")` method has been deprecated and will be' +
        ' removed in later Select2 versions. Use $element.val() instead.'
      );
    }

    if (args == null || args.length === 0) {
      return this.$element.val();
    }

    var newVal = args[0];

    if ($.isArray(newVal)) {
      newVal = $.map(newVal, function (obj) {
        return obj.toString();
      });
    }

    this.$element.val(newVal).trigger('change');
  };

  Select2.prototype.destroy = function () {
    this.$container.remove();

    if (this.$element[0].detachEvent) {
      this.$element[0].detachEvent('onpropertychange', this._syncA);
    }

    if (this._observer != null) {
      this._observer.disconnect();
      this._observer = null;
    } else if (this.$element[0].removeEventListener) {
      this.$element[0]
        .removeEventListener('DOMAttrModified', this._syncA, false);
      this.$element[0]
        .removeEventListener('DOMNodeInserted', this._syncS, false);
      this.$element[0]
        .removeEventListener('DOMNodeRemoved', this._syncS, false);
    }

    this._syncA = null;
    this._syncS = null;

    this.$element.off('.select2');
    this.$element.attr('tabindex',
    Utils.GetData(this.$element[0], 'old-tabindex'));

    this.$element.removeClass('select2-hidden-accessible');
    this.$element.attr('aria-hidden', 'false');
    Utils.RemoveData(this.$element[0]);
    this.$element.removeData('select2');

    this.dataAdapter.destroy();
    this.selection.destroy();
    this.dropdown.destroy();
    this.results.destroy();

    this.dataAdapter = null;
    this.selection = null;
    this.dropdown = null;
    this.results = null;
  };

  Select2.prototype.render = function () {
    var $container = $(
      '<span class="select2 select2-container">' +
        '<span class="selection"></span>' +
        '<span class="dropdown-wrapper" aria-hidden="true"></span>' +
      '</span>'
    );

    $container.attr('dir', this.options.get('dir'));

    this.$container = $container;

    this.$container.addClass('select2-container--' + this.options.get('theme'));

    Utils.StoreData($container[0], 'element', this.$element);

    return $container;
  };

  return Select2;
});

S2.define('jquery-mousewheel',[
  'jquery'
], function ($) {
  // Used to shim jQuery.mousewheel for non-full builds.
  return $;
});

S2.define('jquery.select2',[
  'jquery',
  'jquery-mousewheel',

  './select2/core',
  './select2/defaults',
  './select2/utils'
], function ($, _, Select2, Defaults, Utils) {
  if ($.fn.select2 == null) {
    // All methods that should return the element
    var thisMethods = ['open', 'close', 'destroy'];

    $.fn.select2 = function (options) {
      options = options || {};

      if (typeof options === 'object') {
        this.each(function () {
          var instanceOptions = $.extend(true, {}, options);

          var instance = new Select2($(this), instanceOptions);
        });

        return this;
      } else if (typeof options === 'string') {
        var ret;
        var args = Array.prototype.slice.call(arguments, 1);

        this.each(function () {
          var instance = Utils.GetData(this, 'select2');

          if (instance == null && window.console && console.error) {
            console.error(
              'The select2(\'' + options + '\') method was called on an ' +
              'element that is not using Select2.'
            );
          }

          ret = instance[options].apply(instance, args);
        });

        // Check if we should be returning `this`
        if ($.inArray(options, thisMethods) > -1) {
          return this;
        }

        return ret;
      } else {
        throw new Error('Invalid arguments for Select2: ' + options);
      }
    };
  }

  if ($.fn.select2.defaults == null) {
    $.fn.select2.defaults = Defaults;
  }

  return Select2;
});

  // Return the AMD loader configuration so it can be used outside of this file
  return {
    define: S2.define,
    require: S2.require
  };
}());

  // Autoload the jQuery bindings
  // We know that all of the modules exist above this, so we're safe
  var select2 = S2.require('jquery.select2');

  // Hold the AMD module references on the jQuery function that was just loaded
  // This allows Select2 to use the internal loader outside of this file, such
  // as in the language files.
  jQuery.fn.select2.amd = S2;

  // Return the Select2 instance for anyone who is importing it.
  return select2;
}));


/***/ }),
/* 305 */
/***/ (function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__(57);
if(typeof content === 'string') content = [[module.i, content, '']];
// Prepare cssTransformation
var transform;

var options = {"hmr":true}
options.transform = transform
// add the styles to the DOM
var update = __webpack_require__(22)(content, options);
if(content.locals) module.exports = content.locals;
// Hot Module Replacement
if(true) {
	// When the styles change, update the <style> tags
	if(!content.locals) {
		module.hot.accept(57, function() {
			var newContent = __webpack_require__(57);
			if(typeof newContent === 'string') newContent = [[module.i, newContent, '']];
			update(newContent);
		});
	}
	// When the module is disposed, remove the <style> tags
	module.hot.dispose(function() { update(); });
}

/***/ }),
/* 306 */
/***/ (function(module, exports) {

/********************************************************************
* Limit the characters that may be entered in a text field
* Common options: alphanumeric, alphabetic or numeric
* Kevin Sheedy, 2012
* http://github.com/KevinSheedy/jquery.alphanum
*********************************************************************/
(function( $ ){

	// API ///////////////////////////////////////////////////////////////////
	$.fn.alphanum = function(settings) {

		let combinedSettings = getCombinedSettingsAlphaNum(settings);

		let $collection = this;

		setupEventHandlers($collection, trimAlphaNum, combinedSettings);

		return this;
	};

	$.fn.alpha = function(settings) {

		let defaultAlphaSettings = getCombinedSettingsAlphaNum("alpha");
		let combinedSettings = getCombinedSettingsAlphaNum(settings, defaultAlphaSettings);

		let $collection = this;

		setupEventHandlers($collection, trimAlphaNum, combinedSettings);

		return this;
	};

	$.fn.numeric = function(settings) {

		let combinedSettings = getCombinedSettingsNum(settings);
		let $collection = this;

		setupEventHandlers($collection, trimNum, combinedSettings);

		$collection.blur(function(){
			numericField_Blur(this, combinedSettings);
		});

		return this;
	};

	// End of API /////////////////////////////////////////////////////////////


	// Start Settings ////////////////////////////////////////////////////////

	let DEFAULT_SETTINGS_ALPHANUM = {
		allow              : '',    // Allow extra characters
		disallow           : '',    // Disallow extra characters
		allowSpace         : true,  // Allow the space character
		allowNewline       : true,  // Allow the newline character \n ascii 10
		allowNumeric       : true,  // Allow digits 0-9
		allowUpper         : true,  // Allow upper case characters
		allowLower         : true,  // Allow lower case characters
		allowCaseless      : true,  // Allow characters that don't have both upper & lower variants - eg Arabic or Chinese
		allowLatin         : true,  // a-z A-Z
		allowOtherCharSets : true,  // eg é, Á, Arabic, Chinese etc
		forceUpper         : false, // Convert lower case characters to upper case
		forceLower         : false, // Convert upper case characters to lower case
		maxLength          : NaN    // eg Max Length
	}

	let DEFAULT_SETTINGS_NUM = {
		allowPlus           : false, // Allow the + sign
		allowMinus          : true,  // Allow the - sign
		allowThouSep        : true,  // Allow the thousands separator, default is the comma eg 12,000
		allowDecSep         : true,  // Allow the decimal separator, default is the fullstop eg 3.141
		allowLeadingSpaces  : false,
		maxDigits           : NaN,   // The max number of digits
		maxDecimalPlaces    : NaN,   // The max number of decimal places
		maxPreDecimalPlaces : NaN,   // The max number digits before the decimal point
		max                 : NaN,   // The max numeric value allowed
		min                 : NaN    // The min numeric value allowed
	}

	// Some pre-defined groups of settings for convenience
	let CONVENIENCE_SETTINGS_ALPHANUM = {
		"alpha" : {
			allowNumeric  : false
		},
		"upper" : {
			allowNumeric  : false,
			allowUpper    : true,
			allowLower    : false,
			allowCaseless : true
		},
		"lower" : {
			allowNumeric  : false,
			allowUpper    : false,
			allowLower    : true,
			allowCaseless : true
		}
	};

	// Some pre-defined groups of settings for convenience
	let CONVENIENCE_SETTINGS_NUMERIC = {
		"integer" : {
			allowPlus    : false,
			allowMinus   : true,
			allowThouSep : false,
			allowDecSep  : false
		},
		"positiveInteger" : {
			allowPlus    : false,
			allowMinus   : false,
			allowThouSep : false,
			allowDecSep  : false
		}
	};


	let BLACKLIST   = getBlacklistAscii() + getBlacklistNonAscii();
	let THOU_SEP    = ",";
	let DEC_SEP     = ".";
	let DIGITS      = getDigitsMap();
	let LATIN_CHARS = getLatinCharsSet();

	// Return the blacklisted special chars that are encodable using 7-bit ascii
	function getBlacklistAscii(){
		let blacklist = '!@#$%^&*()+=[]\\\';,/{}|":<>?~`.-_';
		blacklist += " "; // 'Space' is on the blacklist but can be enabled using the 'allowSpace' config entry
		return blacklist;
	}

	// Return the blacklisted special chars that are NOT encodable using 7-bit ascii
	// We want this .js file to be encoded using 7-bit ascii so it can reach the widest possible audience
	// Higher order chars must be escaped eg "\xAC"
	// Not too worried about comments containing higher order characters for now (let's wait and see if it becomes a problem)
	function getBlacklistNonAscii(){
		let blacklist =
			  "\xAC"     // ¬
			+ "\u20AC"   // €
			+ "\xA3"     // £
			+ "\xA6"     // ¦
			;
		return blacklist;
	}

	// End Settings ////////////////////////////////////////////////////////


	// Implementation details go here ////////////////////////////////////////////////////////

	function setupEventHandlers($textboxes, trimFunction, settings) {

		$textboxes.each(function(){

			let $textbox = $(this);

			$textbox
				// Unbind existing alphanum event handlers
				.off(".alphanum")

				.on("keyup.alphanum change.alphanum paste.alphanum", function(e){

					let pastedText = "";

					if(e.originalEvent && e.originalEvent.clipboardData && e.originalEvent.clipboardData.getData)
						pastedText = e.originalEvent.clipboardData.getData("text/plain")

					// setTimeout is necessary for handling the 'paste' event
					setTimeout(function(){
						trimTextbox($textbox, trimFunction, settings, pastedText);
					}, 0);
				})

				.on("keypress.alphanum", function(e){

				// Determine which key is pressed.
				// If it's a control key, then allow the event's default action to occur eg backspace, tab
				let charCode = !e.charCode ? e.which : e.charCode;
				if(isControlKey(charCode)
					|| e.ctrlKey
					|| e.metaKey ) // cmd on MacOS
					return;

				let newChar         = String.fromCharCode(charCode);

				// Determine if some text was selected / highlighted when the key was pressed
				let selectionObject = $textbox.selection();
				let start = selectionObject.start;
				let end   = selectionObject.end;

				let textBeforeKeypress  = $textbox.val();

				// The new char may be inserted:
				//  1) At the start
				//  2) In the middle
				//  3) At the end
				//  4) User highlights some text and then presses a key which would replace the highlighted text
				//
				// Here we build the string that would result after the keypress.
				// If the resulting string is invalid, we cancel the event.
				// Unfortunately, it isn't enough to just check if the new char is valid because some chars
				// are position sensitive eg the decimal point '.'' or the minus sign '-'' are only valid in certain positions.
				let potentialTextAfterKeypress = textBeforeKeypress.substring(0, start) + newChar + textBeforeKeypress.substring(end);
				let validatedText              = trimFunction(potentialTextAfterKeypress, settings);

				// If the keypress would cause the textbox to contain invalid characters, then cancel the keypress event
				if(validatedText != potentialTextAfterKeypress)
					e.preventDefault();
			});
		});

	}

	// Ensure the text is a valid number when focus leaves the textbox
	// This catches the case where a user enters '-' or '.' without entering any digits
	function numericField_Blur(inputBox, settings) {
		let fieldValueNumeric = parseFloat($(inputBox).val());
		let $inputBox = $(inputBox);

		if(isNaN(fieldValueNumeric)) {
			$inputBox.val("");
			return;
		}

		if(isNumeric(settings.min) && fieldValueNumeric < settings.min)
			$inputBox.val("");

		if(isNumeric(settings.max) && fieldValueNumeric > settings.max)
			$inputBox.val("");
	}

	function isNumeric(value) {
		return !isNaN(value);
	}

	function isControlKey(charCode) {

		if(charCode >= 32)
			return false;
		if(charCode == 10)
			return false;
		if(charCode == 13)
			return false;

		return true;
	}

	// One way to prevent a character being entered is to cancel the keypress event.
	// However, this gets messy when you have to deal with things like copy paste which isn't a keypress.
	// Which event gets fired first, keypress or keyup? What about IE6 etc etc?
	// Instead, it's easier to allow the 'bad' character to be entered and then to delete it immediately after.

	function trimTextbox($textBox, trimFunction, settings, pastedText){

		let inputString = $textBox.val();

		if(inputString == "" && pastedText.length > 0)
			inputString = pastedText;

		let outputString = trimFunction(inputString, settings);

		if(inputString == outputString)
			return;

		let caretPos = $textBox.alphanum_caret();

		$textBox.val(outputString);

		//Reset the caret position
		if(inputString.length ==(outputString.length + 1))
			$textBox.alphanum_caret(caretPos - 1);
		else
			$textBox.alphanum_caret(caretPos);
	}

	function getCombinedSettingsAlphaNum(settings, defaultSettings){
		if(typeof defaultSettings == "undefined")
			defaultSettings = DEFAULT_SETTINGS_ALPHANUM;
		let userSettings, combinedSettings = {};
		if(typeof settings === "string")
			userSettings = CONVENIENCE_SETTINGS_ALPHANUM[settings];
		else if(typeof settings == "undefined")
			userSettings = {};
		else
			userSettings = settings;

		$.extend(combinedSettings, defaultSettings, userSettings);

		if(typeof combinedSettings.blacklist == 'undefined')
			combinedSettings.blacklistSet = getBlacklistSet(combinedSettings.allow, combinedSettings.disallow);

		return combinedSettings;
	}

	function getCombinedSettingsNum(settings){
		let userSettings, combinedSettings = {};
		if(typeof settings === "string")
			userSettings = CONVENIENCE_SETTINGS_NUMERIC[settings];
		else if(typeof settings == "undefined")
			userSettings = {};
		else
			userSettings = settings;

		$.extend(combinedSettings, DEFAULT_SETTINGS_NUM, userSettings);

		return combinedSettings;
	}


	// This is the heart of the algorithm
	function alphanum_allowChar(validatedStringFragment, Char, settings){

		if(settings.maxLength && validatedStringFragment.length >= settings.maxLength)
			return false;

		if(settings.allow.indexOf(Char) >=0 )
			return true;

		if(settings.allowSpace && (Char == " "))
			return true;

		if(!settings.allowNewline && (Char == '\n' || Char == '\r'))
			return false;

		if(settings.blacklistSet.contains(Char))
			return false;

		if(!settings.allowNumeric && DIGITS[Char])
			return false;

		if(!settings.allowUpper && isUpper(Char))
			return false;

		if(!settings.allowLower && isLower(Char))
			return false;

		if(!settings.allowCaseless && isCaseless(Char))
			return false;

		if(!settings.allowLatin && LATIN_CHARS.contains(Char))
			return false;

		if(!settings.allowOtherCharSets){
			if(DIGITS[Char] || LATIN_CHARS.contains(Char))
				return true;
			else
				return false;
		}

		return true;
	}

	function numeric_allowChar(validatedStringFragment, Char, settings){

		if(DIGITS[Char]) {

			if(isMaxDigitsReached(validatedStringFragment, settings))
				return false;

			if(isMaxPreDecimalsReached(validatedStringFragment, settings))
				return false;

			if(isMaxDecimalsReached(validatedStringFragment, settings))
				return false;

			if(isGreaterThanMax(validatedStringFragment + Char, settings))
				return false;

			if(isLessThanMin(validatedStringFragment + Char, settings))
				return false;

			return true;
		}

		if(settings.allowPlus && Char == '+' && validatedStringFragment == '')
			return true;

		if(settings.allowMinus && Char == '-' && validatedStringFragment == '')
			return true;

		if(Char == THOU_SEP && settings.allowThouSep && allowThouSep(validatedStringFragment))
			return true;

		if(Char == DEC_SEP) {
			// Only one decimal separator allowed
			if(validatedStringFragment.indexOf(DEC_SEP) >= 0)
				return false;
			// Don't allow decimal separator when maxDecimalPlaces is set to 0
			if(settings.allowDecSep && settings.maxDecimalPlaces === 0)
				return false;
			if(settings.allowDecSep)
				return true;
		}

		return false;
	}

	function countDigits(string) {

		// Error handling, nulls etc
		string = string + "";

		// Count the digits
		return string.replace(/[^0-9]/g,"").length;
	}

	function isMaxDigitsReached(string, settings) {

		let maxDigits = settings.maxDigits;

		if(maxDigits === "" || isNaN(maxDigits))
			return false; // In this case, there is no maximum

		let numDigits = countDigits(string);

		if(numDigits >= maxDigits)
			return true;

		return false;
	}

	function isMaxDecimalsReached(string, settings) {

		let maxDecimalPlaces = settings.maxDecimalPlaces;

		if(maxDecimalPlaces === "" || isNaN(maxDecimalPlaces))
			return false; // In this case, there is no maximum

		let indexOfDecimalPoint = string.indexOf(DEC_SEP);

		if(indexOfDecimalPoint == -1)
			return false;

		let decimalSubstring = string.substring(indexOfDecimalPoint);
		let numDecimals = countDigits(decimalSubstring);

		if(numDecimals >= maxDecimalPlaces)
			return true;

		return false;
	}

	function isMaxPreDecimalsReached(string, settings) {

		let maxPreDecimalPlaces = settings.maxPreDecimalPlaces;

		if(maxPreDecimalPlaces === "" || isNaN(maxPreDecimalPlaces))
			return false; // In this case, there is no maximum

		let indexOfDecimalPoint = string.indexOf(DEC_SEP);

		if(indexOfDecimalPoint >= 0)
			return false;

		let numPreDecimalDigits = countDigits(string);

		if(numPreDecimalDigits >= maxPreDecimalPlaces)
			return true;

		return false;
	}

	function isGreaterThanMax(numericString, settings) {

		if(!settings.max || settings.max < 0)
			return false;

		let outputNumber = parseFloat(numericString);
		if(outputNumber > settings.max)
			return true;

		return false;
	}

	function isLessThanMin(numericString, settings) {

		if(!settings.min || settings.min > 0)
			return false;

		let outputNumber = parseFloat(numericString);
		if(outputNumber < settings.min)
			return true;

		return false;
	}

	/********************************
	 * Trims a string according to the settings provided
	 ********************************/
	function trimAlphaNum(inputString, settings){

		if(typeof inputString != "string")
			return inputString;

		let inChars = inputString.split("");
		let outChars = [];
		let i = 0;
		let Char;

		for(i=0; i<inChars.length; i++){
			Char = inChars[i];
			let validatedStringFragment = outChars.join("");
			if(alphanum_allowChar(validatedStringFragment, Char, settings))
				outChars.push(Char);
		}

		let outputString = outChars.join("");

		if(settings.forceLower)
			outputString = outputString.toLowerCase();
		else if(settings.forceUpper)
			outputString = outputString.toUpperCase();

		return outputString;
	}

	function trimNum(inputString, settings){
		if(typeof inputString != "string")
			return inputString;

		let inChars = inputString.split("");
		let outChars = [];
		let i = 0;
		let Char;

		for(i=0; i<inChars.length; i++){
			Char = inChars[i];
			let validatedStringFragment = outChars.join("");
			if(numeric_allowChar(validatedStringFragment, Char, settings))
				outChars.push(Char);
		}

		return outChars.join("");
	}

	function isUpper(Char){
		let upper = Char.toUpperCase();
		let lower = Char.toLowerCase();

		if( (Char == upper) && (upper != lower))
			return true;
		else
			return false;
	}

	function isLower(Char){
		let upper = Char.toUpperCase();
		let lower = Char.toLowerCase();

		if( (Char == lower) && (upper != lower))
			return true;
		else
			return false;
	}

	function isCaseless(Char){
		if(Char.toUpperCase() == Char.toLowerCase())
			return true;
		else
			return false;
	}

	function getBlacklistSet(allow, disallow){

		let setOfBadChars  = new Set(BLACKLIST + disallow);
		let setOfGoodChars = new Set(allow);

		let blacklistSet   = setOfBadChars.subtract(setOfGoodChars);

		return blacklistSet;
	}

	function getDigitsMap(){
		let array = "0123456789".split("");
		let map = {};
		let i = 0;
		let digit;

		for(i=0; i<array.length; i++){
			digit = array[i];
			map[digit] = true;
		}

		return map;
	}

	function getLatinCharsSet(){
		let lower = "abcdefghijklmnopqrstuvwxyz";
		let upper = lower.toUpperCase();
		let azAZ = new Set(lower + upper);

		return azAZ;
	}

	function allowThouSep(currentString) {

		// Can't start with a THOU_SEP
		if(currentString.length == 0)
			return false;

		// Can't have a THOU_SEP anywhere after a DEC_SEP
		let posOfDecSep = currentString.indexOf(DEC_SEP);
		if(posOfDecSep >= 0)
			return false;

		let posOfFirstThouSep       = currentString.indexOf(THOU_SEP);

		// Check if this is the first occurrence of a THOU_SEP
		if(posOfFirstThouSep < 0)
			return true;

		let posOfLastThouSep        = currentString.lastIndexOf(THOU_SEP);
		let charsSinceLastThouSep   = currentString.length - posOfLastThouSep - 1;

		// Check if there has been 3 digits since the last THOU_SEP
		if(charsSinceLastThouSep < 3)
			return false;

		let digitsSinceFirstThouSep = countDigits(currentString.substring(posOfFirstThouSep));

		// Check if there has been a multiple of 3 digits since the first THOU_SEP
		if((digitsSinceFirstThouSep % 3) > 0)
			return false;

		return true;
	}

	////////////////////////////////////////////////////////////////////////////////////
	// Implementation of a Set
	////////////////////////////////////////////////////////////////////////////////////
	function Set(elems){
		if(typeof elems == "string")
			this.map = stringToMap(elems);
		else
			this.map = {};
	}

	Set.prototype.add = function(set){

		let newSet = this.clone();

		for(let key in set.map)
			newSet.map[key] = true;

		return newSet;
	}

	Set.prototype.subtract = function(set){

		let newSet = this.clone();

		for(let key in set.map)
			delete newSet.map[key];

		return newSet;
	}

	Set.prototype.contains = function(key){
		if(this.map[key])
			return true;
		else
			return false;
	}

	Set.prototype.clone = function(){
		let newSet = new Set();

		for(let key in this.map)
			newSet.map[key] = true;

		return newSet;
	}
	////////////////////////////////////////////////////////////////////////////////////

	function stringToMap(string){
		let map = {};
		let array = string.split("");
		let i=0;
		let Char;

		for(i=0; i<array.length; i++){
			Char = array[i];
			map[Char] = true;
		}

		return map;
	}

	// Backdoor for testing
	$.fn.alphanum.backdoorAlphaNum = function(inputString, settings){
		let combinedSettings = getCombinedSettingsAlphaNum(settings);

		return trimAlphaNum(inputString, combinedSettings);
	};

	$.fn.alphanum.backdoorNumeric = function(inputString, settings){
		let combinedSettings = getCombinedSettingsNum(settings);

		return trimNum(inputString, combinedSettings);
	};

	$.fn.alphanum.setNumericSeparators = function(settings) {

		if(settings.thousandsSeparator.length != 1)
			return;

		if(settings.decimalSeparator.length != 1)
			return;

		THOU_SEP = settings.thousandsSeparator;
		DEC_SEP = settings.decimalSeparator;
	}

})( jQuery );

/*eslint-disable */
//Include the 3rd party lib: jquery.caret.js


// Set caret position easily in jQuery
// Written by and Copyright of Luke Morton, 2011
// Licensed under MIT
(function ($) {
	// Behind the scenes method deals with browser
	// idiosyncrasies and such
	function caretTo(el, index) {
		if (el.createTextRange) {
			let range = el.createTextRange();
			range.move("character", index);
			range.select();
		} else if (el.selectionStart != null) {
			el.focus();
			el.setSelectionRange(index, index);
		}
	};

	// Another behind the scenes that collects the
	// current caret position for an element

	// TODO: Get working with Opera
	function caretPos(el) {
		if ("selection" in document) {
			let range = el.createTextRange();
			try {
				range.setEndPoint("EndToStart", document.selection.createRange());
			} catch (e) {
				// Catch IE failure here, return 0 like
				// other browsers
				return 0;
			}
			return range.text.length;
		} else if (el.selectionStart != null) {
			return el.selectionStart;
		}
	};

	// The following methods are queued under fx for more
	// flexibility when combining with $.fn.delay() and
	// jQuery effects.

	// Set caret to a particular index
	$.fn.alphanum_caret = function (index, offset) {
		if (typeof(index) === "undefined") {
			return caretPos(this.get(0));
		}

		return this.queue(function (next) {
			if (isNaN(index)) {
				let i = $(this).val().indexOf(index);

				if (offset === true) {
					i += index.length;
				} else if (typeof(offset) !== "undefined") {
					i += offset;
				}

				caretTo(this, i);
			} else {
				caretTo(this, index);
			}

			next();
		});
	};
}(jQuery));

/**********************************************************
* Selection Library
* Used to determine what text is highlighted in the textbox before a key is pressed.
* http://donejs.com/docs.html#!jQuery.fn.selection
* https://github.com/jupiterjs/jquerymx/blob/master/dom/selection/selection.js
***********************************************************/
(function(e){let t=function(e){return e.replace(/([a-z])([a-z]+)/gi,function(e,t,n){return t+n.toLowerCase()}).replace(/_/g,"")},n=function(e){return e.replace(/^([a-z]+)_TO_([a-z]+)/i,function(e,t,n){return n+"_TO_"+t})},r=function(e){return e?e.ownerDocument.defaultView||e.ownerDocument.parentWindow:window},i=function(t,n){let r=e.Range.current(t).clone(),i=e.Range(t).select(t);if(!r.overlaps(i)){return null}if(r.compare("START_TO_START",i)<1){startPos=0;r.move("START_TO_START",i)}else{fromElementToCurrent=i.clone();fromElementToCurrent.move("END_TO_START",r);startPos=fromElementToCurrent.toString().length}if(r.compare("END_TO_END",i)>=0){endPos=i.toString().length}else{endPos=startPos+r.toString().length}return{start:startPos,end:endPos}},s=function(t){let n=r(t);if(t.selectionStart!==undefined){if(document.activeElement&&document.activeElement!=t&&t.selectionStart==t.selectionEnd&&t.selectionStart==0){return{start:t.value.length,end:t.value.length}}return{start:t.selectionStart,end:t.selectionEnd}}else if(n.getSelection){return i(t,n)}else{try{if(t.nodeName.toLowerCase()=="input"){let s=r(t).document.selection.createRange(),o=t.createTextRange();o.setEndPoint("EndToStart",s);let u=o.text.length;return{start:u,end:u+s.text.length}}else{let a=i(t,n);if(!a){return a}let f=e.Range.current().clone(),l=f.clone().collapse().range,c=f.clone().collapse(false).range;l.moveStart("character",-1);c.moveStart("character",-1);if(a.startPos!=0&&l.text==""){a.startPos+=2}if(a.endPos!=0&&c.text==""){a.endPos+=2}return a}}catch(h){return{start:t.value.length,end:t.value.length}}}},o=function(e,t,n){let i=r(e);if(e.setSelectionRange){if(n===undefined){e.focus();e.setSelectionRange(t,t)}else{e.select();e.selectionStart=t;e.selectionEnd=n}}else if(e.createTextRange){let s=e.createTextRange();s.moveStart("character",t);n=n||t;s.moveEnd("character",n-e.value.length);s.select()}else if(i.getSelection){let o=i.document,u=i.getSelection(),f=o.createRange(),l=[t,n!==undefined?n:t];a([e],l);f.setStart(l[0].el,l[0].count);f.setEnd(l[1].el,l[1].count);u.removeAllRanges();u.addRange(f)}else if(i.document.body.createTextRange){let f=document.body.createTextRange();f.moveToElementText(e);f.collapse();f.moveStart("character",t);f.moveEnd("character",n!==undefined?n:t);f.select()}},u=function(e,t,n,r){if(typeof n[0]==="number"&&n[0]<t){n[0]={el:r,count:n[0]-e}}if(typeof n[1]==="number"&&n[1]<=t){n[1]={el:r,count:n[1]-e};}},a=function(e,t,n){let r,i;n=n||0;for(let s=0;e[s];s++){r=e[s];if(r.nodeType===3||r.nodeType===4){i=n;n+=r.nodeValue.length;u(i,n,t,r)}else if(r.nodeType!==8){n=a(r.childNodes,t,n)}}return n};jQuery.fn.selection=function(e,t){if(e!==undefined){return this.each(function(){o(this,e,t)})}else{return s(this[0])}};e.fn.selection.getCharElement=a})(jQuery);
/*eslint-enable */

/***/ }),
/* 307 */
/***/ (function(module, exports) {

/*!
 *  jQuery version compare plugin
 *
 *  Usage:
 *    $.versioncompare(version1[, version2 = jQuery.fn.jquery])
 *
 *  Example:
 *    console.log($.versioncompare("1.4", "1.6.4"));
 *
 *  Return:
 *    0 if two params are equal
 *    1 if the second is lower
 *   -1 if the second is higher
 *
 *  Licensed under the MIT:
 *  http://www.opensource.org/licenses/mit-license.php
 *
 *  Copyright (c) 2011, Nobu Funaki @zuzara
 */
(function ($) {
    $.versioncompare = function (version1, version2) {
        if ('undefined' === typeof version1) {
            throw new Error("$.versioncompare needs at least one parameter.");
        }
        version2 = version2 || $.fn.jquery;
        if (version1 === version2) {
            return 0;
        }
        let v1 = normalize(version1);
        let v2 = normalize(version2);
        let len = Math.max(v1.length, v2.length);
        for (let i = 0; i < len; i++) {
            v1[i] = v1[i] || 0;
            v2[i] = v2[i] || 0;
            if (v1[i] === v2[i]) {
                continue;
            }
            return v1[i] > v2[i] ? 1 : -1;
        }
        return 0;
    };
    function normalize(version) {
        return $.map(version.split('.'), function (value) {
            return parseInt(value, 10);
        });
    }
}(jQuery));


/***/ }),
/* 308 */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!function(a){"use strict";if(true)!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(27),__webpack_require__(2)], __WEBPACK_AMD_DEFINE_FACTORY__ = (a),
				__WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ?
				(__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));else if("object"==typeof exports)module.exports=a(require("jquery"),require("moment"));else{if("undefined"==typeof jQuery)throw"bootstrap-datetimepicker requires jQuery to be loaded first";if("undefined"==typeof moment)throw"bootstrap-datetimepicker requires Moment.js to be loaded first";a(jQuery,moment)}}(function(a,b){"use strict";if(!b)throw new Error("bootstrap-datetimepicker requires Moment.js to be loaded first");var c=function(c,d){var e,f,g,h,i,j,k,l={},m=!0,n=!1,o=!1,p=0,q=[{clsName:"days",navFnc:"M",navStep:1},{clsName:"months",navFnc:"y",navStep:1},{clsName:"years",navFnc:"y",navStep:10},{clsName:"decades",navFnc:"y",navStep:100}],r=["days","months","years","decades"],s=["top","bottom","auto"],t=["left","right","auto"],u=["default","top","bottom"],v={up:38,38:"up",down:40,40:"down",left:37,37:"left",right:39,39:"right",tab:9,9:"tab",escape:27,27:"escape",enter:13,13:"enter",pageUp:33,33:"pageUp",pageDown:34,34:"pageDown",shift:16,16:"shift",control:17,17:"control",space:32,32:"space",t:84,84:"t",delete:46,46:"delete"},w={},x=function(){return void 0!==b.tz&&void 0!==d.timeZone&&null!==d.timeZone&&""!==d.timeZone},y=function(a){var c;return c=void 0===a||null===a?b():b.isDate(a)||b.isMoment(a)?b(a):x()?b.tz(a,j,d.useStrict,d.timeZone):b(a,j,d.useStrict),x()&&c.tz(d.timeZone),c},z=function(a){if("string"!=typeof a||a.length>1)throw new TypeError("isEnabled expects a single character string parameter");switch(a){case"y":return i.indexOf("Y")!==-1;case"M":return i.indexOf("M")!==-1;case"d":return i.toLowerCase().indexOf("d")!==-1;case"h":case"H":return i.toLowerCase().indexOf("h")!==-1;case"m":return i.indexOf("m")!==-1;case"s":return i.indexOf("s")!==-1;default:return!1}},A=function(){return z("h")||z("m")||z("s")},B=function(){return z("y")||z("M")||z("d")},C=function(){var b=a("<thead>").append(a("<tr>").append(a("<th>").addClass("prev").attr("data-action","previous").append(a("<span>").addClass(d.icons.previous))).append(a("<th>").addClass("picker-switch").attr("data-action","pickerSwitch").attr("colspan",d.calendarWeeks?"6":"5")).append(a("<th>").addClass("next").attr("data-action","next").append(a("<span>").addClass(d.icons.next)))),c=a("<tbody>").append(a("<tr>").append(a("<td>").attr("colspan",d.calendarWeeks?"8":"7")));return[a("<div>").addClass("datepicker-days").append(a("<table>").addClass("table-condensed").append(b).append(a("<tbody>"))),a("<div>").addClass("datepicker-months").append(a("<table>").addClass("table-condensed").append(b.clone()).append(c.clone())),a("<div>").addClass("datepicker-years").append(a("<table>").addClass("table-condensed").append(b.clone()).append(c.clone())),a("<div>").addClass("datepicker-decades").append(a("<table>").addClass("table-condensed").append(b.clone()).append(c.clone()))]},D=function(){var b=a("<tr>"),c=a("<tr>"),e=a("<tr>");return z("h")&&(b.append(a("<td>").append(a("<a>").attr({href:"#",tabindex:"-1",title:d.tooltips.incrementHour}).addClass("btn").attr("data-action","incrementHours").append(a("<span>").addClass(d.icons.up)))),c.append(a("<td>").append(a("<span>").addClass("timepicker-hour").attr({"data-time-component":"hours",title:d.tooltips.pickHour}).attr("data-action","showHours"))),e.append(a("<td>").append(a("<a>").attr({href:"#",tabindex:"-1",title:d.tooltips.decrementHour}).addClass("btn").attr("data-action","decrementHours").append(a("<span>").addClass(d.icons.down))))),z("m")&&(z("h")&&(b.append(a("<td>").addClass("separator")),c.append(a("<td>").addClass("separator").html(":")),e.append(a("<td>").addClass("separator"))),b.append(a("<td>").append(a("<a>").attr({href:"#",tabindex:"-1",title:d.tooltips.incrementMinute}).addClass("btn").attr("data-action","incrementMinutes").append(a("<span>").addClass(d.icons.up)))),c.append(a("<td>").append(a("<span>").addClass("timepicker-minute").attr({"data-time-component":"minutes",title:d.tooltips.pickMinute}).attr("data-action","showMinutes"))),e.append(a("<td>").append(a("<a>").attr({href:"#",tabindex:"-1",title:d.tooltips.decrementMinute}).addClass("btn").attr("data-action","decrementMinutes").append(a("<span>").addClass(d.icons.down))))),z("s")&&(z("m")&&(b.append(a("<td>").addClass("separator")),c.append(a("<td>").addClass("separator").html(":")),e.append(a("<td>").addClass("separator"))),b.append(a("<td>").append(a("<a>").attr({href:"#",tabindex:"-1",title:d.tooltips.incrementSecond}).addClass("btn").attr("data-action","incrementSeconds").append(a("<span>").addClass(d.icons.up)))),c.append(a("<td>").append(a("<span>").addClass("timepicker-second").attr({"data-time-component":"seconds",title:d.tooltips.pickSecond}).attr("data-action","showSeconds"))),e.append(a("<td>").append(a("<a>").attr({href:"#",tabindex:"-1",title:d.tooltips.decrementSecond}).addClass("btn").attr("data-action","decrementSeconds").append(a("<span>").addClass(d.icons.down))))),h||(b.append(a("<td>").addClass("separator")),c.append(a("<td>").append(a("<button>").addClass("btn btn-primary").attr({"data-action":"togglePeriod",tabindex:"-1",title:d.tooltips.togglePeriod}))),e.append(a("<td>").addClass("separator"))),a("<div>").addClass("timepicker-picker").append(a("<table>").addClass("table-condensed").append([b,c,e]))},E=function(){var b=a("<div>").addClass("timepicker-hours").append(a("<table>").addClass("table-condensed")),c=a("<div>").addClass("timepicker-minutes").append(a("<table>").addClass("table-condensed")),d=a("<div>").addClass("timepicker-seconds").append(a("<table>").addClass("table-condensed")),e=[D()];return z("h")&&e.push(b),z("m")&&e.push(c),z("s")&&e.push(d),e},F=function(){var b=[];return d.showTodayButton&&b.push(a("<td>").append(a("<a>").attr({"data-action":"today",title:d.tooltips.today}).append(a("<span>").addClass(d.icons.today)))),!d.sideBySide&&B()&&A()&&b.push(a("<td>").append(a("<a>").attr({"data-action":"togglePicker",title:d.tooltips.selectTime}).append(a("<span>").addClass(d.icons.time)))),d.showClear&&b.push(a("<td>").append(a("<a>").attr({"data-action":"clear",title:d.tooltips.clear}).append(a("<span>").addClass(d.icons.clear)))),d.showClose&&b.push(a("<td>").append(a("<a>").attr({"data-action":"close",title:d.tooltips.close}).append(a("<span>").addClass(d.icons.close)))),a("<table>").addClass("table-condensed").append(a("<tbody>").append(a("<tr>").append(b)))},G=function(){var b=a("<div>").addClass("bootstrap-datetimepicker-widget dropdown-menu"),c=a("<div>").addClass("datepicker").append(C()),e=a("<div>").addClass("timepicker").append(E()),f=a("<ul>").addClass("list-unstyled"),g=a("<li>").addClass("picker-switch"+(d.collapse?" accordion-toggle":"")).append(F());return d.inline&&b.removeClass("dropdown-menu"),h&&b.addClass("usetwentyfour"),z("s")&&!h&&b.addClass("wider"),d.sideBySide&&B()&&A()?(b.addClass("timepicker-sbs"),"top"===d.toolbarPlacement&&b.append(g),b.append(a("<div>").addClass("row").append(c.addClass("col-md-6")).append(e.addClass("col-md-6"))),"bottom"===d.toolbarPlacement&&b.append(g),b):("top"===d.toolbarPlacement&&f.append(g),B()&&f.append(a("<li>").addClass(d.collapse&&A()?"collapse in":"").append(c)),"default"===d.toolbarPlacement&&f.append(g),A()&&f.append(a("<li>").addClass(d.collapse&&B()?"collapse":"").append(e)),"bottom"===d.toolbarPlacement&&f.append(g),b.append(f))},H=function(){var b,e={};return b=c.is("input")||d.inline?c.data():c.find("input").data(),b.dateOptions&&b.dateOptions instanceof Object&&(e=a.extend(!0,e,b.dateOptions)),a.each(d,function(a){var c="date"+a.charAt(0).toUpperCase()+a.slice(1);void 0!==b[c]&&(e[a]=b[c])}),e},I=function(){var b,e=(n||c).position(),f=(n||c).offset(),g=d.widgetPositioning.vertical,h=d.widgetPositioning.horizontal;if(d.widgetParent)b=d.widgetParent.append(o);else if(c.is("input"))b=c.after(o).parent();else{if(d.inline)return void(b=c.append(o));b=c,c.children().first().after(o)}if("auto"===g&&(g=f.top+1.5*o.height()>=a(window).height()+a(window).scrollTop()&&o.height()+c.outerHeight()<f.top?"top":"bottom"),"auto"===h&&(h=b.width()<f.left+o.outerWidth()/2&&f.left+o.outerWidth()>a(window).width()?"right":"left"),"top"===g?o.addClass("top").removeClass("bottom"):o.addClass("bottom").removeClass("top"),"right"===h?o.addClass("pull-right"):o.removeClass("pull-right"),"static"===b.css("position")&&(b=b.parents().filter(function(){return"static"!==a(this).css("position")}).first()),0===b.length)throw new Error("datetimepicker component should be placed within a non-static positioned container");o.css({top:"top"===g?"auto":e.top+c.outerHeight(),bottom:"top"===g?b.outerHeight()-(b===c?0:e.top):"auto",left:"left"===h?b===c?0:e.left:"auto",right:"left"===h?"auto":b.outerWidth()-c.outerWidth()-(b===c?0:e.left)})},J=function(a){"dp.change"===a.type&&(a.date&&a.date.isSame(a.oldDate)||!a.date&&!a.oldDate)||c.trigger(a)},K=function(a){"y"===a&&(a="YYYY"),J({type:"dp.update",change:a,viewDate:f.clone()})},L=function(a){o&&(a&&(k=Math.max(p,Math.min(3,k+a))),o.find(".datepicker > div").hide().filter(".datepicker-"+q[k].clsName).show())},M=function(){var b=a("<tr>"),c=f.clone().startOf("w").startOf("d");for(d.calendarWeeks===!0&&b.append(a("<th>").addClass("cw").text("#"));c.isBefore(f.clone().endOf("w"));)b.append(a("<th>").addClass("dow").text(c.format("dd"))),c.add(1,"d");o.find(".datepicker-days thead").append(b)},N=function(a){return d.disabledDates[a.format("YYYY-MM-DD")]===!0},O=function(a){return d.enabledDates[a.format("YYYY-MM-DD")]===!0},P=function(a){return d.disabledHours[a.format("H")]===!0},Q=function(a){return d.enabledHours[a.format("H")]===!0},R=function(b,c){if(!b.isValid())return!1;if(d.disabledDates&&"d"===c&&N(b))return!1;if(d.enabledDates&&"d"===c&&!O(b))return!1;if(d.minDate&&b.isBefore(d.minDate,c))return!1;if(d.maxDate&&b.isAfter(d.maxDate,c))return!1;if(d.daysOfWeekDisabled&&"d"===c&&d.daysOfWeekDisabled.indexOf(b.day())!==-1)return!1;if(d.disabledHours&&("h"===c||"m"===c||"s"===c)&&P(b))return!1;if(d.enabledHours&&("h"===c||"m"===c||"s"===c)&&!Q(b))return!1;if(d.disabledTimeIntervals&&("h"===c||"m"===c||"s"===c)){var e=!1;if(a.each(d.disabledTimeIntervals,function(){if(b.isBetween(this[0],this[1]))return e=!0,!1}),e)return!1}return!0},S=function(){for(var b=[],c=f.clone().startOf("y").startOf("d");c.isSame(f,"y");)b.push(a("<span>").attr("data-action","selectMonth").addClass("month").text(c.format("MMM"))),c.add(1,"M");o.find(".datepicker-months td").empty().append(b)},T=function(){var b=o.find(".datepicker-months"),c=b.find("th"),g=b.find("tbody").find("span");c.eq(0).find("span").attr("title",d.tooltips.prevYear),c.eq(1).attr("title",d.tooltips.selectYear),c.eq(2).find("span").attr("title",d.tooltips.nextYear),b.find(".disabled").removeClass("disabled"),R(f.clone().subtract(1,"y"),"y")||c.eq(0).addClass("disabled"),c.eq(1).text(f.year()),R(f.clone().add(1,"y"),"y")||c.eq(2).addClass("disabled"),g.removeClass("active"),e.isSame(f,"y")&&!m&&g.eq(e.month()).addClass("active"),g.each(function(b){R(f.clone().month(b),"M")||a(this).addClass("disabled")})},U=function(){var a=o.find(".datepicker-years"),b=a.find("th"),c=f.clone().subtract(5,"y"),g=f.clone().add(6,"y"),h="";for(b.eq(0).find("span").attr("title",d.tooltips.prevDecade),b.eq(1).attr("title",d.tooltips.selectDecade),b.eq(2).find("span").attr("title",d.tooltips.nextDecade),a.find(".disabled").removeClass("disabled"),d.minDate&&d.minDate.isAfter(c,"y")&&b.eq(0).addClass("disabled"),b.eq(1).text(c.year()+"-"+g.year()),d.maxDate&&d.maxDate.isBefore(g,"y")&&b.eq(2).addClass("disabled");!c.isAfter(g,"y");)h+='<span data-action="selectYear" class="year'+(c.isSame(e,"y")&&!m?" active":"")+(R(c,"y")?"":" disabled")+'">'+c.year()+"</span>",c.add(1,"y");a.find("td").html(h)},V=function(){var a,c=o.find(".datepicker-decades"),g=c.find("th"),h=b({y:f.year()-f.year()%100-1}),i=h.clone().add(100,"y"),j=h.clone(),k=!1,l=!1,m="";for(g.eq(0).find("span").attr("title",d.tooltips.prevCentury),g.eq(2).find("span").attr("title",d.tooltips.nextCentury),c.find(".disabled").removeClass("disabled"),(h.isSame(b({y:1900}))||d.minDate&&d.minDate.isAfter(h,"y"))&&g.eq(0).addClass("disabled"),g.eq(1).text(h.year()+"-"+i.year()),(h.isSame(b({y:2e3}))||d.maxDate&&d.maxDate.isBefore(i,"y"))&&g.eq(2).addClass("disabled");!h.isAfter(i,"y");)a=h.year()+12,k=d.minDate&&d.minDate.isAfter(h,"y")&&d.minDate.year()<=a,l=d.maxDate&&d.maxDate.isAfter(h,"y")&&d.maxDate.year()<=a,m+='<span data-action="selectDecade" class="decade'+(e.isAfter(h)&&e.year()<=a?" active":"")+(R(h,"y")||k||l?"":" disabled")+'" data-selection="'+(h.year()+6)+'">'+(h.year()+1)+" - "+(h.year()+12)+"</span>",h.add(12,"y");m+="<span></span><span></span><span></span>",c.find("td").html(m),g.eq(1).text(j.year()+1+"-"+h.year())},W=function(){var b,c,g,h=o.find(".datepicker-days"),i=h.find("th"),j=[],k=[];if(B()){for(i.eq(0).find("span").attr("title",d.tooltips.prevMonth),i.eq(1).attr("title",d.tooltips.selectMonth),i.eq(2).find("span").attr("title",d.tooltips.nextMonth),h.find(".disabled").removeClass("disabled"),i.eq(1).text(f.format(d.dayViewHeaderFormat)),R(f.clone().subtract(1,"M"),"M")||i.eq(0).addClass("disabled"),R(f.clone().add(1,"M"),"M")||i.eq(2).addClass("disabled"),b=f.clone().startOf("M").startOf("w").startOf("d"),g=0;g<42;g++)0===b.weekday()&&(c=a("<tr>"),d.calendarWeeks&&c.append('<td class="cw">'+b.week()+"</td>"),j.push(c)),k=["day"],b.isBefore(f,"M")&&k.push("old"),b.isAfter(f,"M")&&k.push("new"),b.isSame(e,"d")&&!m&&k.push("active"),R(b,"d")||k.push("disabled"),b.isSame(y(),"d")&&k.push("today"),0!==b.day()&&6!==b.day()||k.push("weekend"),J({type:"dp.classify",date:b,classNames:k}),c.append('<td data-action="selectDay" data-day="'+b.format("L")+'" class="'+k.join(" ")+'">'+b.date()+"</td>"),b.add(1,"d");h.find("tbody").empty().append(j),T(),U(),V()}},X=function(){var b=o.find(".timepicker-hours table"),c=f.clone().startOf("d"),d=[],e=a("<tr>");for(f.hour()>11&&!h&&c.hour(12);c.isSame(f,"d")&&(h||f.hour()<12&&c.hour()<12||f.hour()>11);)c.hour()%4===0&&(e=a("<tr>"),d.push(e)),e.append('<td data-action="selectHour" class="hour'+(R(c,"h")?"":" disabled")+'">'+c.format(h?"HH":"hh")+"</td>"),c.add(1,"h");b.empty().append(d)},Y=function(){for(var b=o.find(".timepicker-minutes table"),c=f.clone().startOf("h"),e=[],g=a("<tr>"),h=1===d.stepping?5:d.stepping;f.isSame(c,"h");)c.minute()%(4*h)===0&&(g=a("<tr>"),e.push(g)),g.append('<td data-action="selectMinute" class="minute'+(R(c,"m")?"":" disabled")+'">'+c.format("mm")+"</td>"),c.add(h,"m");b.empty().append(e)},Z=function(){for(var b=o.find(".timepicker-seconds table"),c=f.clone().startOf("m"),d=[],e=a("<tr>");f.isSame(c,"m");)c.second()%20===0&&(e=a("<tr>"),d.push(e)),e.append('<td data-action="selectSecond" class="second'+(R(c,"s")?"":" disabled")+'">'+c.format("ss")+"</td>"),c.add(5,"s");b.empty().append(d)},$=function(){var a,b,c=o.find(".timepicker span[data-time-component]");h||(a=o.find(".timepicker [data-action=togglePeriod]"),b=e.clone().add(e.hours()>=12?-12:12,"h"),a.text(e.format("A")),R(b,"h")?a.removeClass("disabled"):a.addClass("disabled")),c.filter("[data-time-component=hours]").text(e.format(h?"HH":"hh")),c.filter("[data-time-component=minutes]").text(e.format("mm")),c.filter("[data-time-component=seconds]").text(e.format("ss")),X(),Y(),Z()},_=function(){o&&(W(),$())},aa=function(a){var b=m?null:e;if(!a)return m=!0,g.val(""),c.data("date",""),J({type:"dp.change",date:!1,oldDate:b}),void _();if(a=a.clone().locale(d.locale),x()&&a.tz(d.timeZone),1!==d.stepping)for(a.minutes(Math.round(a.minutes()/d.stepping)*d.stepping).seconds(0);d.minDate&&a.isBefore(d.minDate);)a.add(d.stepping,"minutes");R(a)?(e=a,f=e.clone(),g.val(e.format(i)),c.data("date",e.format(i)),m=!1,_(),J({type:"dp.change",date:e.clone(),oldDate:b})):(d.keepInvalid?J({type:"dp.change",date:a,oldDate:b}):g.val(m?"":e.format(i)),J({type:"dp.error",date:a,oldDate:b}))},ba=function(){var b=!1;return o?(o.find(".collapse").each(function(){var c=a(this).data("collapse");return!c||!c.transitioning||(b=!0,!1)}),b?l:(n&&n.hasClass("btn")&&n.toggleClass("active"),o.hide(),a(window).off("resize",I),o.off("click","[data-action]"),o.off("mousedown",!1),o.remove(),o=!1,J({type:"dp.hide",date:e.clone()}),g.blur(),f=e.clone(),l)):l},ca=function(){aa(null)},da=function(a){return void 0===d.parseInputDate?(!b.isMoment(a)||a instanceof Date)&&(a=y(a)):a=d.parseInputDate(a),a},ea={next:function(){var a=q[k].navFnc;f.add(q[k].navStep,a),W(),K(a)},previous:function(){var a=q[k].navFnc;f.subtract(q[k].navStep,a),W(),K(a)},pickerSwitch:function(){L(1)},selectMonth:function(b){var c=a(b.target).closest("tbody").find("span").index(a(b.target));f.month(c),k===p?(aa(e.clone().year(f.year()).month(f.month())),d.inline||ba()):(L(-1),W()),K("M")},selectYear:function(b){var c=parseInt(a(b.target).text(),10)||0;f.year(c),k===p?(aa(e.clone().year(f.year())),d.inline||ba()):(L(-1),W()),K("YYYY")},selectDecade:function(b){var c=parseInt(a(b.target).data("selection"),10)||0;f.year(c),k===p?(aa(e.clone().year(f.year())),d.inline||ba()):(L(-1),W()),K("YYYY")},selectDay:function(b){var c=f.clone();a(b.target).is(".old")&&c.subtract(1,"M"),a(b.target).is(".new")&&c.add(1,"M"),aa(c.date(parseInt(a(b.target).text(),10))),A()||d.keepOpen||d.inline||ba()},incrementHours:function(){var a=e.clone().add(1,"h");R(a,"h")&&aa(a)},incrementMinutes:function(){var a=e.clone().add(d.stepping,"m");R(a,"m")&&aa(a)},incrementSeconds:function(){var a=e.clone().add(1,"s");R(a,"s")&&aa(a)},decrementHours:function(){var a=e.clone().subtract(1,"h");R(a,"h")&&aa(a)},decrementMinutes:function(){var a=e.clone().subtract(d.stepping,"m");R(a,"m")&&aa(a)},decrementSeconds:function(){var a=e.clone().subtract(1,"s");R(a,"s")&&aa(a)},togglePeriod:function(){aa(e.clone().add(e.hours()>=12?-12:12,"h"))},togglePicker:function(b){var c,e=a(b.target),f=e.closest("ul"),g=f.find(".in"),h=f.find(".collapse:not(.in)");if(g&&g.length){if(c=g.data("collapse"),c&&c.transitioning)return;g.collapse?(g.collapse("hide"),h.collapse("show")):(g.removeClass("in"),h.addClass("in")),e.is("span")?e.toggleClass(d.icons.time+" "+d.icons.date):e.find("span").toggleClass(d.icons.time+" "+d.icons.date)}},showPicker:function(){o.find(".timepicker > div:not(.timepicker-picker)").hide(),o.find(".timepicker .timepicker-picker").show()},showHours:function(){o.find(".timepicker .timepicker-picker").hide(),o.find(".timepicker .timepicker-hours").show()},showMinutes:function(){o.find(".timepicker .timepicker-picker").hide(),o.find(".timepicker .timepicker-minutes").show()},showSeconds:function(){o.find(".timepicker .timepicker-picker").hide(),o.find(".timepicker .timepicker-seconds").show()},selectHour:function(b){var c=parseInt(a(b.target).text(),10);h||(e.hours()>=12?12!==c&&(c+=12):12===c&&(c=0)),aa(e.clone().hours(c)),ea.showPicker.call(l)},selectMinute:function(b){aa(e.clone().minutes(parseInt(a(b.target).text(),10))),ea.showPicker.call(l)},selectSecond:function(b){aa(e.clone().seconds(parseInt(a(b.target).text(),10))),ea.showPicker.call(l)},clear:ca,today:function(){var a=y();R(a,"d")&&aa(a)},close:ba},fa=function(b){return!a(b.currentTarget).is(".disabled")&&(ea[a(b.currentTarget).data("action")].apply(l,arguments),!1)},ga=function(){var b,c={year:function(a){return a.month(0).date(1).hours(0).seconds(0).minutes(0)},month:function(a){return a.date(1).hours(0).seconds(0).minutes(0)},day:function(a){return a.hours(0).seconds(0).minutes(0)},hour:function(a){return a.seconds(0).minutes(0)},minute:function(a){return a.seconds(0)}};return g.prop("disabled")||!d.ignoreReadonly&&g.prop("readonly")||o?l:(void 0!==g.val()&&0!==g.val().trim().length?aa(da(g.val().trim())):m&&d.useCurrent&&(d.inline||g.is("input")&&0===g.val().trim().length)&&(b=y(),"string"==typeof d.useCurrent&&(b=c[d.useCurrent](b)),aa(b)),o=G(),M(),S(),o.find(".timepicker-hours").hide(),o.find(".timepicker-minutes").hide(),o.find(".timepicker-seconds").hide(),_(),L(),a(window).on("resize",I),o.on("click","[data-action]",fa),o.on("mousedown",!1),n&&n.hasClass("btn")&&n.toggleClass("active"),I(),o.show(),d.focusOnShow&&!g.is(":focus")&&g.focus(),J({type:"dp.show"}),l)},ha=function(){return o?ba():ga()},ia=function(a){var b,c,e,f,g=null,h=[],i={},j=a.which,k="p";w[j]=k;for(b in w)w.hasOwnProperty(b)&&w[b]===k&&(h.push(b),parseInt(b,10)!==j&&(i[b]=!0));for(b in d.keyBinds)if(d.keyBinds.hasOwnProperty(b)&&"function"==typeof d.keyBinds[b]&&(e=b.split(" "),e.length===h.length&&v[j]===e[e.length-1])){for(f=!0,c=e.length-2;c>=0;c--)if(!(v[e[c]]in i)){f=!1;break}if(f){g=d.keyBinds[b];break}}g&&(g.call(l,o),a.stopPropagation(),a.preventDefault())},ja=function(a){w[a.which]="r",a.stopPropagation(),a.preventDefault()},ka=function(b){var c=a(b.target).val().trim(),d=c?da(c):null;return aa(d),b.stopImmediatePropagation(),!1},la=function(){g.on({change:ka,blur:d.debug?"":ba,keydown:ia,keyup:ja,focus:d.allowInputToggle?ga:""}),c.is("input")?g.on({focus:ga}):n&&(n.on("click",ha),n.on("mousedown",!1))},ma=function(){g.off({change:ka,blur:blur,keydown:ia,keyup:ja,focus:d.allowInputToggle?ba:""}),c.is("input")?g.off({focus:ga}):n&&(n.off("click",ha),n.off("mousedown",!1))},na=function(b){var c={};return a.each(b,function(){var a=da(this);a.isValid()&&(c[a.format("YYYY-MM-DD")]=!0)}),!!Object.keys(c).length&&c},oa=function(b){var c={};return a.each(b,function(){c[this]=!0}),!!Object.keys(c).length&&c},pa=function(){var a=d.format||"L LT";i=a.replace(/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,function(a){var b=e.localeData().longDateFormat(a)||a;return b.replace(/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,function(a){return e.localeData().longDateFormat(a)||a})}),j=d.extraFormats?d.extraFormats.slice():[],j.indexOf(a)<0&&j.indexOf(i)<0&&j.push(i),h=i.toLowerCase().indexOf("a")<1&&i.replace(/\[.*?\]/g,"").indexOf("h")<1,z("y")&&(p=2),z("M")&&(p=1),z("d")&&(p=0),k=Math.max(p,k),m||aa(e)};if(l.destroy=function(){ba(),ma(),c.removeData("DateTimePicker"),c.removeData("date")},l.toggle=ha,l.show=ga,l.hide=ba,l.disable=function(){return ba(),n&&n.hasClass("btn")&&n.addClass("disabled"),g.prop("disabled",!0),l},l.enable=function(){return n&&n.hasClass("btn")&&n.removeClass("disabled"),g.prop("disabled",!1),l},l.ignoreReadonly=function(a){if(0===arguments.length)return d.ignoreReadonly;if("boolean"!=typeof a)throw new TypeError("ignoreReadonly () expects a boolean parameter");return d.ignoreReadonly=a,l},l.options=function(b){if(0===arguments.length)return a.extend(!0,{},d);if(!(b instanceof Object))throw new TypeError("options() options parameter should be an object");return a.extend(!0,d,b),a.each(d,function(a,b){if(void 0===l[a])throw new TypeError("option "+a+" is not recognized!");l[a](b)}),l},l.date=function(a){if(0===arguments.length)return m?null:e.clone();if(!(null===a||"string"==typeof a||b.isMoment(a)||a instanceof Date))throw new TypeError("date() parameter must be one of [null, string, moment or Date]");return aa(null===a?null:da(a)),l},l.format=function(a){if(0===arguments.length)return d.format;if("string"!=typeof a&&("boolean"!=typeof a||a!==!1))throw new TypeError("format() expects a string or boolean:false parameter "+a);return d.format=a,i&&pa(),l},l.timeZone=function(a){if(0===arguments.length)return d.timeZone;if("string"!=typeof a)throw new TypeError("newZone() expects a string parameter");return d.timeZone=a,l},l.dayViewHeaderFormat=function(a){if(0===arguments.length)return d.dayViewHeaderFormat;if("string"!=typeof a)throw new TypeError("dayViewHeaderFormat() expects a string parameter");return d.dayViewHeaderFormat=a,l},l.extraFormats=function(a){if(0===arguments.length)return d.extraFormats;if(a!==!1&&!(a instanceof Array))throw new TypeError("extraFormats() expects an array or false parameter");return d.extraFormats=a,j&&pa(),l},l.disabledDates=function(b){if(0===arguments.length)return d.disabledDates?a.extend({},d.disabledDates):d.disabledDates;if(!b)return d.disabledDates=!1,_(),l;if(!(b instanceof Array))throw new TypeError("disabledDates() expects an array parameter");return d.disabledDates=na(b),d.enabledDates=!1,_(),l},l.enabledDates=function(b){if(0===arguments.length)return d.enabledDates?a.extend({},d.enabledDates):d.enabledDates;if(!b)return d.enabledDates=!1,_(),l;if(!(b instanceof Array))throw new TypeError("enabledDates() expects an array parameter");return d.enabledDates=na(b),d.disabledDates=!1,_(),l},l.daysOfWeekDisabled=function(a){if(0===arguments.length)return d.daysOfWeekDisabled.splice(0);if("boolean"==typeof a&&!a)return d.daysOfWeekDisabled=!1,_(),l;if(!(a instanceof Array))throw new TypeError("daysOfWeekDisabled() expects an array parameter");if(d.daysOfWeekDisabled=a.reduce(function(a,b){return b=parseInt(b,10),b>6||b<0||isNaN(b)?a:(a.indexOf(b)===-1&&a.push(b),a)},[]).sort(),d.useCurrent&&!d.keepInvalid){for(var b=0;!R(e,"d");){if(e.add(1,"d"),31===b)throw"Tried 31 times to find a valid date";b++}aa(e)}return _(),l},l.maxDate=function(a){if(0===arguments.length)return d.maxDate?d.maxDate.clone():d.maxDate;if("boolean"==typeof a&&a===!1)return d.maxDate=!1,_(),l;"string"==typeof a&&("now"!==a&&"moment"!==a||(a=y()));var b=da(a);if(!b.isValid())throw new TypeError("maxDate() Could not parse date parameter: "+a);if(d.minDate&&b.isBefore(d.minDate))throw new TypeError("maxDate() date parameter is before options.minDate: "+b.format(i));return d.maxDate=b,d.useCurrent&&!d.keepInvalid&&e.isAfter(a)&&aa(d.maxDate),f.isAfter(b)&&(f=b.clone().subtract(d.stepping,"m")),_(),l},l.minDate=function(a){if(0===arguments.length)return d.minDate?d.minDate.clone():d.minDate;if("boolean"==typeof a&&a===!1)return d.minDate=!1,_(),l;"string"==typeof a&&("now"!==a&&"moment"!==a||(a=y()));var b=da(a);if(!b.isValid())throw new TypeError("minDate() Could not parse date parameter: "+a);if(d.maxDate&&b.isAfter(d.maxDate))throw new TypeError("minDate() date parameter is after options.maxDate: "+b.format(i));return d.minDate=b,d.useCurrent&&!d.keepInvalid&&e.isBefore(a)&&aa(d.minDate),f.isBefore(b)&&(f=b.clone().add(d.stepping,"m")),_(),l},l.defaultDate=function(a){if(0===arguments.length)return d.defaultDate?d.defaultDate.clone():d.defaultDate;if(!a)return d.defaultDate=!1,l;"string"==typeof a&&(a="now"===a||"moment"===a?y():y(a));var b=da(a);if(!b.isValid())throw new TypeError("defaultDate() Could not parse date parameter: "+a);if(!R(b))throw new TypeError("defaultDate() date passed is invalid according to component setup validations");return d.defaultDate=b,(d.defaultDate&&d.inline||""===g.val().trim())&&aa(d.defaultDate),l},l.locale=function(a){if(0===arguments.length)return d.locale;if(!b.localeData(a))throw new TypeError("locale() locale "+a+" is not loaded from moment locales!");return d.locale=a,e.locale(d.locale),f.locale(d.locale),i&&pa(),o&&(ba(),ga()),l},l.stepping=function(a){return 0===arguments.length?d.stepping:(a=parseInt(a,10),(isNaN(a)||a<1)&&(a=1),d.stepping=a,l)},l.useCurrent=function(a){var b=["year","month","day","hour","minute"];if(0===arguments.length)return d.useCurrent;if("boolean"!=typeof a&&"string"!=typeof a)throw new TypeError("useCurrent() expects a boolean or string parameter");if("string"==typeof a&&b.indexOf(a.toLowerCase())===-1)throw new TypeError("useCurrent() expects a string parameter of "+b.join(", "));return d.useCurrent=a,l},l.collapse=function(a){if(0===arguments.length)return d.collapse;if("boolean"!=typeof a)throw new TypeError("collapse() expects a boolean parameter");return d.collapse===a?l:(d.collapse=a,o&&(ba(),ga()),l)},l.icons=function(b){if(0===arguments.length)return a.extend({},d.icons);if(!(b instanceof Object))throw new TypeError("icons() expects parameter to be an Object");return a.extend(d.icons,b),o&&(ba(),ga()),l},l.tooltips=function(b){if(0===arguments.length)return a.extend({},d.tooltips);if(!(b instanceof Object))throw new TypeError("tooltips() expects parameter to be an Object");return a.extend(d.tooltips,b),o&&(ba(),ga()),l},l.useStrict=function(a){if(0===arguments.length)return d.useStrict;if("boolean"!=typeof a)throw new TypeError("useStrict() expects a boolean parameter");return d.useStrict=a,l},l.sideBySide=function(a){if(0===arguments.length)return d.sideBySide;if("boolean"!=typeof a)throw new TypeError("sideBySide() expects a boolean parameter");return d.sideBySide=a,o&&(ba(),ga()),l},l.viewMode=function(a){if(0===arguments.length)return d.viewMode;if("string"!=typeof a)throw new TypeError("viewMode() expects a string parameter");if(r.indexOf(a)===-1)throw new TypeError("viewMode() parameter must be one of ("+r.join(", ")+") value");return d.viewMode=a,k=Math.max(r.indexOf(a),p),L(),l},l.toolbarPlacement=function(a){if(0===arguments.length)return d.toolbarPlacement;if("string"!=typeof a)throw new TypeError("toolbarPlacement() expects a string parameter");if(u.indexOf(a)===-1)throw new TypeError("toolbarPlacement() parameter must be one of ("+u.join(", ")+") value");return d.toolbarPlacement=a,o&&(ba(),ga()),l},l.widgetPositioning=function(b){if(0===arguments.length)return a.extend({},d.widgetPositioning);if("[object Object]"!=={}.toString.call(b))throw new TypeError("widgetPositioning() expects an object variable");if(b.horizontal){if("string"!=typeof b.horizontal)throw new TypeError("widgetPositioning() horizontal variable must be a string");if(b.horizontal=b.horizontal.toLowerCase(),t.indexOf(b.horizontal)===-1)throw new TypeError("widgetPositioning() expects horizontal parameter to be one of ("+t.join(", ")+")");d.widgetPositioning.horizontal=b.horizontal}if(b.vertical){if("string"!=typeof b.vertical)throw new TypeError("widgetPositioning() vertical variable must be a string");if(b.vertical=b.vertical.toLowerCase(),s.indexOf(b.vertical)===-1)throw new TypeError("widgetPositioning() expects vertical parameter to be one of ("+s.join(", ")+")");d.widgetPositioning.vertical=b.vertical}return _(),l},l.calendarWeeks=function(a){if(0===arguments.length)return d.calendarWeeks;if("boolean"!=typeof a)throw new TypeError("calendarWeeks() expects parameter to be a boolean value");return d.calendarWeeks=a,_(),l},l.showTodayButton=function(a){if(0===arguments.length)return d.showTodayButton;if("boolean"!=typeof a)throw new TypeError("showTodayButton() expects a boolean parameter");return d.showTodayButton=a,o&&(ba(),ga()),l},l.showClear=function(a){if(0===arguments.length)return d.showClear;if("boolean"!=typeof a)throw new TypeError("showClear() expects a boolean parameter");return d.showClear=a,o&&(ba(),ga()),l},l.widgetParent=function(b){if(0===arguments.length)return d.widgetParent;if("string"==typeof b&&(b=a(b)),null!==b&&"string"!=typeof b&&!(b instanceof a))throw new TypeError("widgetParent() expects a string or a jQuery object parameter");return d.widgetParent=b,o&&(ba(),ga()),l},l.keepOpen=function(a){if(0===arguments.length)return d.keepOpen;if("boolean"!=typeof a)throw new TypeError("keepOpen() expects a boolean parameter");return d.keepOpen=a,l},l.focusOnShow=function(a){if(0===arguments.length)return d.focusOnShow;if("boolean"!=typeof a)throw new TypeError("focusOnShow() expects a boolean parameter");return d.focusOnShow=a,l},l.inline=function(a){if(0===arguments.length)return d.inline;if("boolean"!=typeof a)throw new TypeError("inline() expects a boolean parameter");return d.inline=a,l},l.clear=function(){return ca(),l},l.keyBinds=function(a){return 0===arguments.length?d.keyBinds:(d.keyBinds=a,l)},l.getMoment=function(a){return y(a)},l.debug=function(a){if("boolean"!=typeof a)throw new TypeError("debug() expects a boolean parameter");return d.debug=a,l},l.allowInputToggle=function(a){if(0===arguments.length)return d.allowInputToggle;if("boolean"!=typeof a)throw new TypeError("allowInputToggle() expects a boolean parameter");return d.allowInputToggle=a,l},l.showClose=function(a){if(0===arguments.length)return d.showClose;if("boolean"!=typeof a)throw new TypeError("showClose() expects a boolean parameter");return d.showClose=a,l},l.keepInvalid=function(a){if(0===arguments.length)return d.keepInvalid;if("boolean"!=typeof a)throw new TypeError("keepInvalid() expects a boolean parameter");
return d.keepInvalid=a,l},l.datepickerInput=function(a){if(0===arguments.length)return d.datepickerInput;if("string"!=typeof a)throw new TypeError("datepickerInput() expects a string parameter");return d.datepickerInput=a,l},l.parseInputDate=function(a){if(0===arguments.length)return d.parseInputDate;if("function"!=typeof a)throw new TypeError("parseInputDate() sholud be as function");return d.parseInputDate=a,l},l.disabledTimeIntervals=function(b){if(0===arguments.length)return d.disabledTimeIntervals?a.extend({},d.disabledTimeIntervals):d.disabledTimeIntervals;if(!b)return d.disabledTimeIntervals=!1,_(),l;if(!(b instanceof Array))throw new TypeError("disabledTimeIntervals() expects an array parameter");return d.disabledTimeIntervals=b,_(),l},l.disabledHours=function(b){if(0===arguments.length)return d.disabledHours?a.extend({},d.disabledHours):d.disabledHours;if(!b)return d.disabledHours=!1,_(),l;if(!(b instanceof Array))throw new TypeError("disabledHours() expects an array parameter");if(d.disabledHours=oa(b),d.enabledHours=!1,d.useCurrent&&!d.keepInvalid){for(var c=0;!R(e,"h");){if(e.add(1,"h"),24===c)throw"Tried 24 times to find a valid date";c++}aa(e)}return _(),l},l.enabledHours=function(b){if(0===arguments.length)return d.enabledHours?a.extend({},d.enabledHours):d.enabledHours;if(!b)return d.enabledHours=!1,_(),l;if(!(b instanceof Array))throw new TypeError("enabledHours() expects an array parameter");if(d.enabledHours=oa(b),d.disabledHours=!1,d.useCurrent&&!d.keepInvalid){for(var c=0;!R(e,"h");){if(e.add(1,"h"),24===c)throw"Tried 24 times to find a valid date";c++}aa(e)}return _(),l},l.viewDate=function(a){if(0===arguments.length)return f.clone();if(!a)return f=e.clone(),l;if(!("string"==typeof a||b.isMoment(a)||a instanceof Date))throw new TypeError("viewDate() parameter must be one of [string, moment or Date]");return f=da(a),K(),l},c.is("input"))g=c;else if(g=c.find(d.datepickerInput),0===g.length)g=c.find("input");else if(!g.is("input"))throw new Error('CSS class "'+d.datepickerInput+'" cannot be applied to non input element');if(c.hasClass("input-group")&&(n=0===c.find(".datepickerbutton").length?c.find(".input-group-addon"):c.find(".datepickerbutton")),!d.inline&&!g.is("input"))throw new Error("Could not initialize DateTimePicker without an input element");return e=y(),f=e.clone(),a.extend(!0,d,H()),l.options(d),pa(),la(),g.prop("disabled")&&l.disable(),g.is("input")&&0!==g.val().trim().length?aa(da(g.val().trim())):d.defaultDate&&void 0===g.attr("placeholder")&&aa(d.defaultDate),d.inline&&ga(),l};return a.fn.datetimepicker=function(b){b=b||{};var d,e=Array.prototype.slice.call(arguments,1),f=!0,g=["destroy","hide","show","toggle"];if("object"==typeof b)return this.each(function(){var d,e=a(this);e.data("DateTimePicker")||(d=a.extend(!0,{},a.fn.datetimepicker.defaults,b),e.data("DateTimePicker",c(e,d)))});if("string"==typeof b)return this.each(function(){var c=a(this),g=c.data("DateTimePicker");if(!g)throw new Error('bootstrap-datetimepicker("'+b+'") method was called on an element that is not using DateTimePicker');d=g[b].apply(g,e),f=d===g}),f||a.inArray(b,g)>-1?this:d;throw new TypeError("Invalid arguments for DateTimePicker: "+b)},a.fn.datetimepicker.defaults={timeZone:"",format:!1,dayViewHeaderFormat:"MMMM YYYY",extraFormats:!1,stepping:1,minDate:!1,maxDate:!1,useCurrent:!0,collapse:!0,locale:b.locale(),defaultDate:!1,disabledDates:!1,enabledDates:!1,icons:{time:"glyphicon glyphicon-time",date:"glyphicon glyphicon-calendar",up:"glyphicon glyphicon-chevron-up",down:"glyphicon glyphicon-chevron-down",previous:"glyphicon glyphicon-chevron-left",next:"glyphicon glyphicon-chevron-right",today:"glyphicon glyphicon-screenshot",clear:"glyphicon glyphicon-trash",close:"glyphicon glyphicon-remove"},tooltips:{today:"Go to today",clear:"Clear selection",close:"Close the picker",selectMonth:"Select Month",prevMonth:"Previous Month",nextMonth:"Next Month",selectYear:"Select Year",prevYear:"Previous Year",nextYear:"Next Year",selectDecade:"Select Decade",prevDecade:"Previous Decade",nextDecade:"Next Decade",prevCentury:"Previous Century",nextCentury:"Next Century",pickHour:"Pick Hour",incrementHour:"Increment Hour",decrementHour:"Decrement Hour",pickMinute:"Pick Minute",incrementMinute:"Increment Minute",decrementMinute:"Decrement Minute",pickSecond:"Pick Second",incrementSecond:"Increment Second",decrementSecond:"Decrement Second",togglePeriod:"Toggle Period",selectTime:"Select Time"},useStrict:!1,sideBySide:!1,daysOfWeekDisabled:!1,calendarWeeks:!1,viewMode:"days",toolbarPlacement:"default",showTodayButton:!1,showClear:!1,showClose:!1,widgetPositioning:{horizontal:"auto",vertical:"auto"},widgetParent:null,ignoreReadonly:!1,keepOpen:!1,focusOnShow:!0,inline:!1,keepInvalid:!1,datepickerInput:".datepickerinput",keyBinds:{up:function(a){if(a){var b=this.date()||this.getMoment();a.find(".datepicker").is(":visible")?this.date(b.clone().subtract(7,"d")):this.date(b.clone().add(this.stepping(),"m"))}},down:function(a){if(!a)return void this.show();var b=this.date()||this.getMoment();a.find(".datepicker").is(":visible")?this.date(b.clone().add(7,"d")):this.date(b.clone().subtract(this.stepping(),"m"))},"control up":function(a){if(a){var b=this.date()||this.getMoment();a.find(".datepicker").is(":visible")?this.date(b.clone().subtract(1,"y")):this.date(b.clone().add(1,"h"))}},"control down":function(a){if(a){var b=this.date()||this.getMoment();a.find(".datepicker").is(":visible")?this.date(b.clone().add(1,"y")):this.date(b.clone().subtract(1,"h"))}},left:function(a){if(a){var b=this.date()||this.getMoment();a.find(".datepicker").is(":visible")&&this.date(b.clone().subtract(1,"d"))}},right:function(a){if(a){var b=this.date()||this.getMoment();a.find(".datepicker").is(":visible")&&this.date(b.clone().add(1,"d"))}},pageUp:function(a){if(a){var b=this.date()||this.getMoment();a.find(".datepicker").is(":visible")&&this.date(b.clone().subtract(1,"M"))}},pageDown:function(a){if(a){var b=this.date()||this.getMoment();a.find(".datepicker").is(":visible")&&this.date(b.clone().add(1,"M"))}},enter:function(){this.hide()},escape:function(){this.hide()},"control space":function(a){a&&a.find(".timepicker").is(":visible")&&a.find('.btn[data-action="togglePeriod"]').click()},t:function(){this.date(this.getMoment())},delete:function(){this.clear()}},debug:!1,allowInputToggle:!1,disabledTimeIntervals:!1,disabledHours:!1,enabledHours:!1,viewDate:!1},a.fn.datetimepicker});

/***/ }),
/* 309 */
/***/ (function(module, exports, __webpack_require__) {

var map = {
	"./af": 93,
	"./af.js": 93,
	"./ar": 94,
	"./ar-dz": 95,
	"./ar-dz.js": 95,
	"./ar-kw": 96,
	"./ar-kw.js": 96,
	"./ar-ly": 97,
	"./ar-ly.js": 97,
	"./ar-ma": 98,
	"./ar-ma.js": 98,
	"./ar-sa": 99,
	"./ar-sa.js": 99,
	"./ar-tn": 100,
	"./ar-tn.js": 100,
	"./ar.js": 94,
	"./az": 101,
	"./az.js": 101,
	"./be": 102,
	"./be.js": 102,
	"./bg": 103,
	"./bg.js": 103,
	"./bm": 104,
	"./bm.js": 104,
	"./bn": 105,
	"./bn.js": 105,
	"./bo": 106,
	"./bo.js": 106,
	"./br": 107,
	"./br.js": 107,
	"./bs": 108,
	"./bs.js": 108,
	"./ca": 109,
	"./ca.js": 109,
	"./cs": 110,
	"./cs.js": 110,
	"./cv": 111,
	"./cv.js": 111,
	"./cy": 112,
	"./cy.js": 112,
	"./da": 113,
	"./da.js": 113,
	"./de": 114,
	"./de-at": 115,
	"./de-at.js": 115,
	"./de-ch": 116,
	"./de-ch.js": 116,
	"./de.js": 114,
	"./dv": 117,
	"./dv.js": 117,
	"./el": 118,
	"./el.js": 118,
	"./en-au": 119,
	"./en-au.js": 119,
	"./en-ca": 120,
	"./en-ca.js": 120,
	"./en-gb": 121,
	"./en-gb.js": 121,
	"./en-ie": 122,
	"./en-ie.js": 122,
	"./en-nz": 123,
	"./en-nz.js": 123,
	"./eo": 124,
	"./eo.js": 124,
	"./es": 125,
	"./es-do": 126,
	"./es-do.js": 126,
	"./es-us": 127,
	"./es-us.js": 127,
	"./es.js": 125,
	"./et": 128,
	"./et.js": 128,
	"./eu": 129,
	"./eu.js": 129,
	"./fa": 130,
	"./fa.js": 130,
	"./fi": 131,
	"./fi.js": 131,
	"./fo": 132,
	"./fo.js": 132,
	"./fr": 133,
	"./fr-ca": 134,
	"./fr-ca.js": 134,
	"./fr-ch": 135,
	"./fr-ch.js": 135,
	"./fr.js": 133,
	"./fy": 136,
	"./fy.js": 136,
	"./gd": 137,
	"./gd.js": 137,
	"./gl": 138,
	"./gl.js": 138,
	"./gom-latn": 139,
	"./gom-latn.js": 139,
	"./gu": 140,
	"./gu.js": 140,
	"./he": 141,
	"./he.js": 141,
	"./hi": 142,
	"./hi.js": 142,
	"./hr": 143,
	"./hr.js": 143,
	"./hu": 144,
	"./hu.js": 144,
	"./hy-am": 145,
	"./hy-am.js": 145,
	"./id": 146,
	"./id.js": 146,
	"./is": 147,
	"./is.js": 147,
	"./it": 148,
	"./it.js": 148,
	"./ja": 149,
	"./ja.js": 149,
	"./jv": 150,
	"./jv.js": 150,
	"./ka": 151,
	"./ka.js": 151,
	"./kk": 152,
	"./kk.js": 152,
	"./km": 153,
	"./km.js": 153,
	"./kn": 154,
	"./kn.js": 154,
	"./ko": 155,
	"./ko.js": 155,
	"./ky": 156,
	"./ky.js": 156,
	"./lb": 157,
	"./lb.js": 157,
	"./lo": 158,
	"./lo.js": 158,
	"./lt": 159,
	"./lt.js": 159,
	"./lv": 160,
	"./lv.js": 160,
	"./me": 161,
	"./me.js": 161,
	"./mi": 162,
	"./mi.js": 162,
	"./mk": 163,
	"./mk.js": 163,
	"./ml": 164,
	"./ml.js": 164,
	"./mr": 165,
	"./mr.js": 165,
	"./ms": 166,
	"./ms-my": 167,
	"./ms-my.js": 167,
	"./ms.js": 166,
	"./my": 168,
	"./my.js": 168,
	"./nb": 169,
	"./nb.js": 169,
	"./ne": 170,
	"./ne.js": 170,
	"./nl": 171,
	"./nl-be": 172,
	"./nl-be.js": 172,
	"./nl.js": 171,
	"./nn": 173,
	"./nn.js": 173,
	"./pa-in": 174,
	"./pa-in.js": 174,
	"./pl": 175,
	"./pl.js": 175,
	"./pt": 176,
	"./pt-br": 177,
	"./pt-br.js": 177,
	"./pt.js": 176,
	"./ro": 178,
	"./ro.js": 178,
	"./ru": 179,
	"./ru.js": 179,
	"./sd": 180,
	"./sd.js": 180,
	"./se": 181,
	"./se.js": 181,
	"./si": 182,
	"./si.js": 182,
	"./sk": 183,
	"./sk.js": 183,
	"./sl": 184,
	"./sl.js": 184,
	"./sq": 185,
	"./sq.js": 185,
	"./sr": 186,
	"./sr-cyrl": 187,
	"./sr-cyrl.js": 187,
	"./sr.js": 186,
	"./ss": 188,
	"./ss.js": 188,
	"./sv": 189,
	"./sv.js": 189,
	"./sw": 190,
	"./sw.js": 190,
	"./ta": 191,
	"./ta.js": 191,
	"./te": 192,
	"./te.js": 192,
	"./tet": 193,
	"./tet.js": 193,
	"./th": 194,
	"./th.js": 194,
	"./tl-ph": 195,
	"./tl-ph.js": 195,
	"./tlh": 196,
	"./tlh.js": 196,
	"./tr": 197,
	"./tr.js": 197,
	"./tzl": 198,
	"./tzl.js": 198,
	"./tzm": 199,
	"./tzm-latn": 200,
	"./tzm-latn.js": 200,
	"./tzm.js": 199,
	"./uk": 201,
	"./uk.js": 201,
	"./ur": 202,
	"./ur.js": 202,
	"./uz": 203,
	"./uz-latn": 204,
	"./uz-latn.js": 204,
	"./uz.js": 203,
	"./vi": 205,
	"./vi.js": 205,
	"./x-pseudo": 206,
	"./x-pseudo.js": 206,
	"./yo": 207,
	"./yo.js": 207,
	"./zh-cn": 208,
	"./zh-cn.js": 208,
	"./zh-hk": 209,
	"./zh-hk.js": 209,
	"./zh-tw": 210,
	"./zh-tw.js": 210
};
function webpackContext(req) {
	return __webpack_require__(webpackContextResolve(req));
};
function webpackContextResolve(req) {
	var id = map[req];
	if(!(id + 1)) // check for number or string
		throw new Error("Cannot find module '" + req + "'.");
	return id;
};
webpackContext.keys = function webpackContextKeys() {
	return Object.keys(map);
};
webpackContext.resolve = webpackContextResolve;
module.exports = webpackContext;
webpackContext.id = 309;

/***/ }),
/* 310 */
/***/ (function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__(58);
if(typeof content === 'string') content = [[module.i, content, '']];
// Prepare cssTransformation
var transform;

var options = {"hmr":true}
options.transform = transform
// add the styles to the DOM
var update = __webpack_require__(22)(content, options);
if(content.locals) module.exports = content.locals;
// Hot Module Replacement
if(true) {
	// When the styles change, update the <style> tags
	if(!content.locals) {
		module.hot.accept(58, function() {
			var newContent = __webpack_require__(58);
			if(typeof newContent === 'string') newContent = [[module.i, newContent, '']];
			update(newContent);
		});
	}
	// When the module is disposed, remove the <style> tags
	module.hot.dispose(function() { update(); });
}

/***/ }),
/* 311 */
/***/ (function(module, exports) {

/**
 * @file fixtures.js
 * @brief Some workarounds.
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-06-29
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details https://github.com/select2/select2/issues/4614
 */

(function($) {
    $.fn.fixSelect2Position = function (el) {
        $(this).data('select2').on('results:message', function (params) {
            this.dropdown._resizeDropdown();
            this.dropdown._positionDropdown();
        });
    };
    /*$.fn.fixSelect2Position = function (el) {
        $(this).on('select2:open', function (e) {
            let sel = $(this).parent().find('.select2-container');
            let el = $(sel.get(0));
            let dropdown = $(sel.get(1));

            if ($(sel.get(0)).css('position') === 'absolute') {
                el = $(sel.get(1));
                dropdown = $(sel.get(0));
            }

            let top = el.position().top;
            if (el.hasClass('select2-container--above')) {
                dropdown.css('top', (top - 2 * (el.height() - dropdown.height())) + 'px');
            } else {
                dropdown.css('top', (top + el.height()) + 'px');
            }
        });
    };*/
})(jQuery);


/***/ }),
/* 312 */
/***/ (function(module, exports) {

/*! Select2 4.0.6-rc.1 | https://github.com/select2/select2/blob/master/LICENSE.md */

(function(){if(jQuery&&jQuery.fn&&jQuery.fn.select2&&jQuery.fn.select2.amd)var e=jQuery.fn.select2.amd;return e.define("select2/i18n/fr",[],function(){return{errorLoading:function(){return"Les résultats ne peuvent pas être chargés."},inputTooLong:function(e){var t=e.input.length-e.maximum;return"Supprimez "+t+" caractère"+(t>1?"s":"")},inputTooShort:function(e){var t=e.minimum-e.input.length;return"Saisissez au moins "+t+" caractère"+(t>1?"s":"")},loadingMore:function(){return"Chargement de résultats supplémentaires…"},maximumSelected:function(e){return"Vous pouvez seulement sélectionner "+e.maximum+" élément"+(e.maximum>1?"s":"")},noResults:function(){return"Aucun résultat trouvé"},searching:function(){return"Recherche en cours…"}}}),{define:e.define,require:e.require}})();

/***/ }),
/* 313 */
/***/ (function(module, exports, __webpack_require__) {

var map = {
	"./accession/init": 314,
	"./audit/init": 432,
	"./classification/init": 444,
	"./descriptor/init": 484,
	"./geolocation/init": 565,
	"./main/init": 570,
	"./medialibrary/init": 632,
	"./organisation/init": 642,
	"./permission/init": 691
};
function webpackContext(req) {
	return __webpack_require__(webpackContextResolve(req));
};
function webpackContextResolve(req) {
	var id = map[req];
	if(!(id + 1)) // check for number or string
		throw new Error("Cannot find module '" + req + "'.");
	return id;
};
webpackContext.keys = function webpackContextKeys() {
	return Object.keys(map);
};
webpackContext.resolve = webpackContextResolve;
module.exports = webpackContext;
webpackContext.id = 313;

/***/ }),
/* 314 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file init.js
 * @brief Accession module init entry point
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-05-26
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Backbone = __webpack_require__(7);

// style
__webpack_require__(315);

let AccessionModule = function () {
    this.name = "accession";
};

AccessionModule.prototype = {
    initialize: function (app, options) {
        this.models = {};
        this.collections = {};
        this.views = {};
        this.routers = {};
        this.controllers = {};

        try {
            window.i18next.default.addResources(
                window.session.language, 'default', __webpack_require__(316)("./" + window.session.language + '/default.json'));
        } catch (e) {
            console.warn("No translation found for the current language. Fallback to english language");
        }

        //
        // register the layout type of descriptors
        //

        let layoutTypes = [
            'accession',
            'batch'
        ];

        for (let i = 0; i < layoutTypes.length; ++i) {
            let moduleName = layoutTypes[i].replace(/_/g, '').toLowerCase();
            app.descriptor.layoutTypes.registerElement(layoutTypes[i], __webpack_require__(319)("./" + moduleName));
        }

        //
        // action format types
        //

        let ActionFormatTypeManager = __webpack_require__(61);
        this.actions = new ActionFormatTypeManager();

        // register the standard format type of descriptors
        let actions = [
            'accession_list',
            'accession_refinement',
            'accessionconsumer_batchproducer',
            'accessionconsumer_batchproducer_it',
            'batchconsumer_batchmodifier',
            'batchconsumer_batchproducer',
            'batch_weighting'
        ];

        for (let i = 0; i < actions.length; ++i) {
            let moduleName = actions[i].replace(/_/g, '').toLowerCase();
            this.actions.registerElement(actions[i], __webpack_require__(324)("./" + moduleName));
        }

        //
        // cache
        //

        app.main.cache.register('accession');

        //
        // main collections
        //

        let SelectOption = __webpack_require__(19);

        // cached and countable collection
        let ActionTypeCollection = __webpack_require__(65);
        this.collections.actionTypes = new ActionTypeCollection([], {cacheable: true});

        this.views.actionTypes = new SelectOption({
            className: 'action-type',
            collection: this.collections.actionTypes
        });

        // global collection, not cached, static by server
        this.collections.conditionList = new Backbone.Collection();

        // global collection, not cached, static by server
        let ActionStepFormatCollection = __webpack_require__(343);
        this.collections.actionStepFormats = new ActionStepFormatCollection();

        this.views.actionStepFormats = new SelectOption({
            // sync: true,
            className: 'action-step-format',
            collection: this.collections.actionStepFormats,
        });

        //
        // controllers
        //

        let AccessionController = __webpack_require__(345);
        let BatchController = __webpack_require__(377);
        let AccessionPanelController = __webpack_require__(386);
        let BatchPanelController = __webpack_require__(392);
        let ActionTypeController = __webpack_require__(398);
        let ActionController = __webpack_require__(403);
        let StorageLocationController = __webpack_require__(406);

        this.controllers.accession = new AccessionController();
        this.controllers.batch = new BatchController();
        this.controllers.accessionpanel = new AccessionPanelController();
        this.controllers.batchpanel = new BatchPanelController();
        this.controllers.actiontype = new ActionTypeController();
        this.controllers.action = new ActionController();
        this.controllers.storagelocation = new StorageLocationController();

        //
        // routers
        //

        let AccessionRouter = __webpack_require__(409);
        this.routers.accession = new AccessionRouter();

        let BatchRouter = __webpack_require__(413);
        this.routers.batch = new BatchRouter();

        let AccessionPanelRouter = __webpack_require__(414);
        this.routers.accessionpanel = new AccessionPanelRouter();

        let BatchPanelRouter = __webpack_require__(418);
        this.routers.batchpanel = new BatchPanelRouter();

        let ActionTypeRouter = __webpack_require__(422);
        this.routers.actiontype = new ActionTypeRouter();

        let ActionRouter = __webpack_require__(427);
        this.routers.action = new ActionRouter();

        let StorageLocationRouter = __webpack_require__(428);
        this.routers.storagelocation = new StorageLocationRouter();

    },

    start: function (app, options) {
        // nothing to do
    },

    stop: function (app, options) {

    }
};

module.exports = AccessionModule;


/***/ }),
/* 315 */
/***/ (function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__(59);
if(typeof content === 'string') content = [[module.i, content, '']];
// Prepare cssTransformation
var transform;

var options = {"hmr":true}
options.transform = transform
// add the styles to the DOM
var update = __webpack_require__(22)(content, options);
if(content.locals) module.exports = content.locals;
// Hot Module Replacement
if(true) {
	// When the styles change, update the <style> tags
	if(!content.locals) {
		module.hot.accept(59, function() {
			var newContent = __webpack_require__(59);
			if(typeof newContent === 'string') newContent = [[module.i, newContent, '']];
			update(newContent);
		});
	}
	// When the module is disposed, remove the <style> tags
	module.hot.dispose(function() { update(); });
}

/***/ }),
/* 316 */
/***/ (function(module, exports, __webpack_require__) {

var map = {
	"./en/default.json": 317,
	"./fr/default.json": 318
};
function webpackContext(req) {
	return __webpack_require__(webpackContextResolve(req));
};
function webpackContextResolve(req) {
	var id = map[req];
	if(!(id + 1)) // check for number or string
		throw new Error("Cannot find module '" + req + "'.");
	return id;
};
webpackContext.keys = function webpackContextKeys() {
	return Object.keys(map);
};
webpackContext.resolve = webpackContextResolve;
module.exports = webpackContext;
webpackContext.id = 316;

/***/ }),
/* 317 */
/***/ (function(module, exports) {

module.exports = {"AND":"","Accession":"","Accession actions":"","Accession list as CSV":"","Accession list as XLSX":"","Accession panel":"","Accession panel name already in usage":"","Accessions":"","Accessions list":"","Accessions original list":"","Action":"","Action name":"","Action type":"","Action type name":"","Action user":"","Actions":"","Add a condition":"","Add new step":"","Advanced search":"","Apply":"","Author":"","Available layout of batches":"","Batch":"","Batch generation":"","Batch panel":"","Batch panel name already in usage":"","Batches":"","Batches actions":"","Belong to (union)":"","Boolean":"","Cancel":"","Cannot create more than 5 producers":"","Change":"","Change format":"","Change step format":"","Change the labels for the type of action":"","Children batches":"","Classification":"","Classifications":"","Clear selections":"","Code":"","Code of accession already used":"","Collapse/Expand":"","Comments":"","Completed":"","Condition":"","Condition group must be closed":"","Constant":"","Contained by":"","Contains":"","Continue":"","Create":"","Create a panel from the selection":"","Create a storage location":"","Create a type of action":"","Create an accession":"","Create an action":"","Create new panel":"","Create new storage location":"","Create producer":"","Creation":"","Creation date":"","Currently defined":"","Defined":"","Defines":"","Defines a layout of descriptors":"","Delete batch":"","Delete panel":"","Delete producer":"","Description":"","Descriptors":"","Descriptors model":"","Different from":"","Display as list":"","Display as...":"","Display list":"","Do you really want to delete this batch?":"","Do you really want to delete this panel?":"","Done":"","Done !":"","Download as CSV":"","Download as XLSX":"","Download as...":"","Edit label":"","Enter a accession name. 3 characters at least for auto-completion":"","Enter a classification entry name.":"","Enter a storage location name or leave blank to set a root location.":"","Enter a value.":"","Entity":"","Error during file upload":"","Exact":"","Export as...":"","Field or Descriptor":"","From a CSV or XLSX":"","From a panel":"","General":"","Generate a new panel":"","Greater than":"","Import from...":"","Include":"","Intersection":"","Introduce a batch":"","Introduce a sub-batch":"","Label":"","Label for current language":"","Language":"","Layout":"","Lesser than":"","Link accession(s) to existing panel":"","Link and go to panel":"","Link batch/batches to existing panel":"","Link to existing panel":"","Link to panel":"","List of accession panels":"","List of accessions":"","List of actions":"","List of batch panels":"","List of batches":"","List of batches for the accession":"","List of selection":"","List of types of actions":"","Load error!":"","Loading...":"","Modify":"","More...":"","Name":"","Name already used":"","Name of the batch":"","Naming constants definition":"","New step":"","No accession selected":"","No batch selected":"","No data.":"","No layout is defined for this panel.":"","Not belong to (intersection)":"","Not belong to (union)":"","Not contained by":"","Not include":"","OR":"","Options":"","Panel":"","Panel actions":"","Panel name":"","Panels":"","Parent":"","Parent batches":"","Parent storage location":"","Primary classification":"","Primary classification entry":"","Principal name of the accession":"","Producer":"","Producer number":"","Progression":"","Rank":"","Realize":"","Related classification":"","Related primary classification":"","Related step data":"","Remove":"","Remove this condition":"","Rename":"","Rename a synonym of accession":"","Rename the accession panel":"","Rename the batch panel":"","Rename the type of action":"","Save":"","Search":"","Select a panel":"","Select a producer":"","Selection of accessions":"","Set from panel":"","Setup selections":"","Setup the refined list of accessions from the temporary panel":"","Standard":"","Step type":"","Steps":"","Storage location actions":"","Storage locations":"","Successfully changed !":"","Successfully created !":"","Successfully processed !":"","Successfully removed !":"","Successfully reset !":"","Successfully setup !":"","Successfully uploaded !":"","Synonym":"","Synonym used as accession code":"","Synonyms":"","Take a list of accession in input and dispose this same list as output for the next step.":"","Take a list of accession in input and generate a filtered list of accession based on the input.":"","Take a list of accession in input and generate one or many batch in output.":"","Take a list of batch in input and some descriptors to be defined on those batches, the output list is the list of the batches.":"","Take a list of batches in input, and generate one or many batch in outputs.":"","Take a list of batches in input, and iteratively weight each.":"","Template":"","The accession must be defined":"","The input data format is not consistent with the output data format of the previous step":"","The layout of descriptors must be defined":"","The name of the storage location is already used":"","The primary classification must be defined":"","The synonym must be unique for this type":"","The type must be defined":"","This synonym exists with this language and type":"","To Do":"","Toggle auto/manual":"","Type":"","Type of action":"","Undefined":"","Union":"","Unlink accessions":"","Unlink batches":"","Update":"","Upload":"","Upload the refined list of accessions":"","Value":"","belong to (intersection)":"","characters_max":"At most one character","characters_max_plural":"At most {{count}} characters","characters_min":"At least one character","characters_min_plural":"At least {{count}} characters","condition depth too high":"","current":"","done":"","invalid conditions groups":"","maximum depth of sub conditions groups si 3":"","to be done":""}

/***/ }),
/* 318 */
/***/ (function(module, exports) {

module.exports = {"AND":"ET","Accession":"Accession","Accession actions":"","Accession list as CSV":"","Accession list as XLSX":"","Accession panel":"Panel d'accession","Accession panel name already in usage":"Nom de panel d'accessions déjà utilisé","Accessions":"Accessions","Accessions list":"Liste d'accessions","Accessions original list":"","Action":"Action","Action name":"Nom de l'action","Action type":"Type d'action","Action type name":"Nom du type d'action","Action user":"Utilisateur de l'action","Actions":"Actions","Add a condition":"Ajouter une condition","Add new step":"","Advanced search":"Recherche avancée","Apply":"Appliquer","Author":"Auteur","Available layout of batches":"","Batch":"Lot","Batch generation":"","Batch panel":"Panel de lot","Batch panel name already in usage":"Le nom du panel de lot est déjà utilisé","Batches":"Lots","Batches actions":"Action sur les lots","Belong to (union)":"Appartient à (union)","Boolean":"Booléen","Cancel":"Annuler","Cannot create more than 5 producers":"","Change":"","Change format":"","Change step format":"","Change the labels for the type of action":"","Children batches":"Lots enfants","Classification":"Classification","Classifications":"Classifications","Clear selections":"Effacer la selection","Code":"Code","Code of accession already used":"Code d'accession déjà utilisé","Collapse/Expand":"","Comments":"","Completed":"Terminé","Condition":"Condition","Condition group must be closed":"Le groupe de condition doit être fermé","Constant":"Constante","Contained by":"Contenu par","Contains":"Contient","Continue":"Continuer","Create":"Créer","Create a panel from the selection":"Créer un panel depuis la sélection","Create a storage location":"","Create a type of action":"Créer un type d'action","Create an accession":"Créer une accession","Create an action":"Créer une action","Create new panel":"Créer un nouveau panel","Create new storage location":"","Create producer":"","Creation":"Création","Creation date":"Date de création","Currently defined":"","Defined":"Défini","Defines":"Définir","Defines a layout of descriptors":"","Delete batch":"Supprimer ce lot","Delete panel":"Supprimer ce panel","Delete producer":"Supprimer un producteur","Description":"Description","Descriptors":"Descripteurs","Descriptors model":"Modèle de descripteurs","Different from":"Différent de","Display as list":"","Display as...":"","Display list":"","Do you really want to delete this batch?":"Voulez-vous vraiment supprimer définitivement ce lot?","Do you really want to delete this panel?":"Voulez-vous vraiment supprimer définitivement ce panel?","Done":"Fait","Done !":"","Download as CSV":"","Download as XLSX":"","Download as...":"","Edit label":"Changer l'étiquette","Enter a accession name. 3 characters at least for auto-completion":"Saisissez un nom d'accession. Au moins 3 caractères pour l'auto-complétion","Enter a classification entry name.":"Saisissez un nom d'entrée de classification","Enter a storage location name or leave blank to set a root location.":"","Enter a value.":"Saisissez une valeure","Entity":"Entité","Error during file upload":"","Exact":"Exactement","Export as...":"","Field or Descriptor":"Champ ou descripteur","From a CSV or XLSX":"Depuis un CSV ou XLSX","From a panel":"Depuis un panel","General":"Général","Generate a new panel":"","Greater than":"Supérieur à","Import from...":"","Include":"Inclus","Intersection":"Intersection","Introduce a batch":"Introduire un lot","Introduce a sub-batch":"Introduire un sous-lot","Label":"Etiquette","Label for current language":"Etiquette pour la langue courante","Language":"Language","Layout":"Mise en forme","Lesser than":"Inférieur à","Link accession(s) to existing panel":"Lier une/des accession(s) à un panel existant","Link and go to panel":"Lier et aller au panel","Link batch/batches to existing panel":"Lier un ou plusieurs lot(s) à un panel existant","Link to existing panel":"Lier à un panel existant","Link to panel":"Lier au panel","List of accession panels":"Liste des panels d'accessions","List of accessions":"Liste des accessions","List of actions":"Liste d'actions","List of batch panels":"Liste des panels de lots","List of batches":"Liste des lots","List of batches for the accession":"Liste des lots pour l'accession","List of selection":"Liste de sélection","List of types of actions":"Liste de types d'actions","Load error!":"","Loading...":"","Modify":"Modifier","More...":"","Name":"Nom","Name already used":"Nom déjà utilisé","Name of the batch":"Nom du lot","Naming constants definition":"Définition des constantes de nomenclature","New step":"","No accession selected":"Aucune accession selectionnée","No batch selected":"Aucun lot selectionné","No data.":"","No layout is defined for this panel.":"","Not belong to (intersection)":"n'appartient pas à (intersection)","Not belong to (union)":"n'appartient pas à (union)","Not contained by":"Non contenu par","Not include":"Non inclus","OR":"OU","Options":"Options","Panel":"Panel","Panel actions":"Actions de panel","Panel name":"Nom de panel","Panels":"Panels","Parent":"Parent","Parent batches":"Lots parents","Parent storage location":"","Primary classification":"Classification principale","Primary classification entry":"Entrée de classification principale","Principal name of the accession":"Nom principal de l'accession","Producer":"Producteur","Producer number":"Producteur numéro","Progression":"","Rank":"Rang","Realize":"","Related classification":"Classification liée","Related primary classification":"Classification principale reliée","Related step data":"","Remove":"","Remove this condition":"Retirer cette condition","Rename":"Renommer","Rename a synonym of accession":"Renommer un synonyme d'accession","Rename the accession panel":"Renommer la collection","Rename the batch panel":"Renommer la collection","Rename the type of action":"Renomer le type de l'action","Save":"Sauver","Search":"Chercher","Select a panel":"Selection un panel","Select a producer":"","Selection of accessions":"Sélection d'accessions","Set from panel":"","Setup selections":"Définir la sélection","Setup the refined list of accessions from the temporary panel":"","Standard":"Standard","Step type":"","Steps":"Etapes","Storage location actions":"","Storage locations":"","Successfully changed !":"Modifié avec succès !","Successfully created !":"Créé avec succès !","Successfully processed !":"Procédé avec succès !","Successfully removed !":"Supprimé avec succès !","Successfully reset !":"Réinitialisé avec succès !","Successfully setup !":"Défini avec succès !","Successfully uploaded !":"","Synonym":"Synonyme","Synonym used as accession code":"Synonyme utilisé comme code d'accession","Synonyms":"Synonymes","Take a list of accession in input and dispose this same list as output for the next step.":"Prend une liste d'accessions en entré et dispose cette même liste en sortie pour la prochaine étape.","Take a list of accession in input and generate a filtered list of accession based on the input.":"","Take a list of accession in input and generate one or many batch in output.":"","Take a list of batch in input and some descriptors to be defined on those batches, the output list is the list of the batches.":"","Take a list of batches in input, and generate one or many batch in outputs.":"","Take a list of batches in input, and iteratively weight each.":"","Template":"Modèle","The accession must be defined":"L'accession doit être définie","The input data format is not consistent with the output data format of the previous step":"","The layout of descriptors must be defined":"La mise-en-forme des descripteur doit être déinie","The name of the storage location is already used":"","The primary classification must be defined":"La classification principal doit être définie","The synonym must be unique for this type":"Le synonyme doit être unique avec ce type","The type must be defined":"Le type doit être défini","This synonym exists with this language and type":"Un synonyme existe avec ce language et ce type","To Do":"","Toggle auto/manual":"","Type":"Type","Type of action":"Type d'action","Undefined":"Indéfini","Union":"Union","Unlink accessions":"Retirer les accessions","Unlink batches":"Retirer les lots","Update":"Mettre-à-jour","Upload":"Télécharger","Upload the refined list of accessions":"","Value":"Valeur","belong to (intersection)":"Appartient à (intersection)","characters_max":"Au plus un caractère","characters_max_plural":"Au plus {{count}} caractères","characters_min":"Au moins un caractère","characters_min_plural":"Au moins {{count}} caractères","condition depth too high":"profondeur de condition trop élevée","current":"","done":"","invalid conditions groups":"groupes de conditions invalides","maximum depth of sub conditions groups si 3":"la profondeur maximale de sous-condition est de 3","to be done":""}

/***/ }),
/* 319 */
/***/ (function(module, exports, __webpack_require__) {

var map = {
	"./accession": 211,
	"./accession.js": 211,
	"./batch": 212,
	"./batch.js": 212
};
function webpackContext(req) {
	return __webpack_require__(webpackContextResolve(req));
};
function webpackContextResolve(req) {
	var id = map[req];
	if(!(id + 1)) // check for number or string
		throw new Error("Cannot find module '" + req + "'.");
	return id;
};
webpackContext.keys = function webpackContextKeys() {
	return Object.keys(map);
};
webpackContext.resolve = webpackContextResolve;
module.exports = webpackContext;
webpackContext.id = 319;

/***/ }),
/* 320 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div class="form-group"><label>' +
__e( _t('Related primary classification') ) +
'</label><select class="primary-classification form-control"></select></div><div class="form-group batch-layouts-group"><label>' +
__e( _t('Available layout of batches') ) +
'</label></div><div class="form-group accession-naming-options"></div>';

}
return __p
};

/*
original source:

<div class="form-group"><label><%- _t('Related primary classification') %></label><select class="primary-classification form-control"></select></div><div class="form-group batch-layouts-group"><label><%- _t('Available layout of batches') %></label></div><div class="form-group accession-naming-options"></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 321 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
with (obj) {
__p += ' ';
 _.each(items, function(item) { ;
__p += ' ';
 if (item.options != undefined) { ;
__p += ' <optgroup label="' +
__e( item.label ) +
'"> ';
 _.each(item.options, function(subitem) { ;
__p += ' <option value="' +
__e( subitem.value || subitem.id ) +
'" name="' +
__e( subitem.name || '' ) +
'">' +
__e( subitem.label ) +
'</option> ';
 }) ;
__p += ' </optgroup> ';
 } else { ;
__p += ' <option value="' +
__e( item.value || item.id ) +
'" name="' +
__e( item.name || '' ) +
'">' +
__e( item.label ) +
'</option> ';
 } ;
__p += ' ';
 }) ;


}
return __p
};

/*
original source:

 <% _.each(items, function(item) { %> <% if (item.options != undefined) { %> <optgroup label="<%- item.label %>"> <% _.each(item.options, function(subitem) { %> <option value="<%- subitem.value || subitem.id %>" name="<%- subitem.name || '' %>"><%- subitem.label %></option> <% }) %> </optgroup> <% } else { %> <option value="<%- item.value || item.id %>" name="<%- item.name || '' %>"><%- item.label %></option> <% } %> <% }) %>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 322 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
with (obj) {
__p += '<label>' +
__e( _t('Naming constants definition') + ' (' + namingOptions.length + ')' ) +
'</label><input name="naming-format" class="form-control" type="text" readonly="readonly"><div class="row naming-option-list"> ';
 for (var i = 0; i < namingOptions.length; ++i) { ;
__p += ' <div class="col-xs-6"><label>' +
__e( _t('Constant') + ' ' + (i+1).toString() ) +
'</label><input name="naming-constant" index="' +
__e( i ) +
'" class="form-control" type="text" max="16" value="' +
__e( namingOptions[i] ) +
'"></div> ';
 } ;
__p += ' </div>';

}
return __p
};

/*
original source:

<label><%- _t('Naming constants definition') + ' (' + namingOptions.length + ')' %></label><input name="naming-format" class="form-control" type="text" readonly="readonly"><div class="row naming-option-list"> <% for (var i = 0; i < namingOptions.length; ++i) { %> <div class="col-xs-6"><label><%- _t('Constant') + ' ' + (i+1).toString() %></label><input name="naming-constant" index="<%- i %>" class="form-control" type="text" max="16" value="<%- namingOptions[i] %>"></div> <% } %> </div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 323 */
/***/ (function(module, exports) {

underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '';
with (obj) {
__p += '<div class="form-group accession-naming-options"></div>';

}
return __p
};

/*
original source:

<div class="form-group accession-naming-options"></div>
*/


/***/ }),
/* 324 */
/***/ (function(module, exports, __webpack_require__) {

var map = {
	"./accessionaction": 62,
	"./accessionaction.js": 62,
	"./accessionconsumerbatchproducer": 63,
	"./accessionconsumerbatchproducer.js": 63,
	"./accessionconsumerbatchproducerit": 213,
	"./accessionconsumerbatchproducerit.js": 213,
	"./accessionlist": 214,
	"./accessionlist.js": 214,
	"./accessionrefinement": 215,
	"./accessionrefinement.js": 215,
	"./accessionrefinementlist": 64,
	"./accessionrefinementlist.js": 64,
	"./actionstepformat": 23,
	"./actionstepformat.js": 23,
	"./actionstepformatmanager": 61,
	"./actionstepformatmanager.js": 61,
	"./batchconsumerbatchmodifier": 216,
	"./batchconsumerbatchmodifier.js": 216,
	"./batchconsumerbatchproducer": 217,
	"./batchconsumerbatchproducer.js": 217,
	"./batchweighting": 218,
	"./batchweighting.js": 218
};
function webpackContext(req) {
	return __webpack_require__(webpackContextResolve(req));
};
function webpackContextResolve(req) {
	var id = map[req];
	if(!(id + 1)) // check for number or string
		throw new Error("Cannot find module '" + req + "'.");
	return id;
};
webpackContext.keys = function webpackContextKeys() {
	return Object.keys(map);
};
webpackContext.resolve = webpackContextResolve;
module.exports = webpackContext;
webpackContext.id = 324;

/***/ }),
/* 325 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
with (obj) {
__p += '<div class="row-action-group"><div class="action actions-buttons btn-group btn-group-xs" role="group"> ';
 if (typeof(show) !== 'undefined' && show.display !== false) { ;
__p += ' ';
 if (show.disabled === true) { disabled = 'disabled=""'; } else { disabled = ""; } ;
__p += ' <button class="action btn btn-default" name="show" type="button" title="' +
__e( show.title ) +
'" ' +
__e( disabled ) +
'><span class="fa fa-eye fa-lg"></span></button> ';
 } ;
__p += ' ';
 if (typeof(edit) !== 'undefined' && edit.display !== false) { ;
__p += ' ';
 if (edit.disabled === true) { disabled = 'disabled=""'; } else { disabled = ""; } ;
__p += ' <button class="action btn btn-default" name="edit" type="button" title="' +
__e( edit.title ) +
'" ' +
__e( disabled ) +
'><span class="fa fa-pencil-square-o fa-lg"></span></button> ';
 } ;
__p += ' ';
 if (typeof(edit2) !== 'undefined' && edit2.display !== false) { ;
__p += ' ';
 if (edit2.disabled === true) { disabled = 'disabled=""'; } else { disabled = ""; } ;
__p += ' <button class="action btn btn-default" name="edit2" type="button" title="' +
__e( edit2.title ) +
'" ' +
__e( disabled ) +
'><span class="fa fa-pencil-square-o fa-lg"></span></button> ';
 } ;
__p += ' ';
 if (typeof(tag) !== 'undefined' && tag.display !== false) { ;
__p += ' ';
 if (tag.disabled === true) { disabled = 'disabled=""'; } else { disabled = ""; } ;
__p += ' <button class="action btn btn-default" name="tag" type="button" title="' +
__e( tag.title ) +
'" ' +
__e( disabled ) +
'><span class="fa fa-tag fa-lg"></span></button> ';
 } ;
__p += ' ';
 if (typeof(manage) !== 'undefined' && manage.display !== false) { ;
__p += ' ';
 if (manage.disabled === true) { disabled = 'disabled=""'; } else { disabled = ""; } ;
__p += ' <button class="action btn btn-default" name="manage" type="button" title="' +
__e( manage.title ) +
'" ' +
__e( disabled ) +
'><span class="fa fa-th-list fa-lg"></span></button> ';
 } ;
__p += ' ';
 if (typeof(remove) !== 'undefined' && remove.display !== false) { ;
__p += ' ';
 if (remove.disabled === true) { disabled = 'disabled=""'; } else { disabled = ""; } ;
__p += ' <button class="action btn btn-default" name="remove" type="button" title="' +
__e( remove.title ) +
'" ' +
__e( disabled ) +
'><span class="fa fa-trash fa-lg"></span></button> ';
 } ;
__p += ' ';
 if (typeof(unlink) !== 'undefined' && unlink.display !== false) { ;
__p += ' ';
 if (unlink.disabled === true) { disabled = 'disabled=""'; } else { disabled = ""; } ;
__p += ' <button class="action btn btn-default" name="unlink" type="button" title="' +
__e( unlink.title ) +
'" ' +
__e( disabled ) +
'><span class="fa fa-chain-broken fa-lg"></span></button> ';
 } ;
__p += ' ';
 if (typeof(history) !== 'undefined' && history.display !== false) { ;
__p += ' ';
 if (history.disabled === true) { disabled = 'disabled=""'; } else { disabled = ""; } ;
__p += ' <button class="action btn btn-default" name="history" type="button" title="' +
__e( history.title ) +
'" ' +
__e( disabled ) +
'><span class="fa fa-line-chart fa-lg"></span></button> ';
 } ;
__p += ' </div></div>';

}
return __p
};

/*
original source:

<div class="row-action-group"><div class="action actions-buttons btn-group btn-group-xs" role="group"> <% if (typeof(show) !== 'undefined' && show.display !== false) { %> <% if (show.disabled === true) { disabled = 'disabled=""'; } else { disabled = ""; } %> <button class="action btn btn-default" name="show" type="button" title="<%- show.title %>" <%- disabled %>><span class="fa fa-eye fa-lg"></span></button> <% } %> <% if (typeof(edit) !== 'undefined' && edit.display !== false) { %> <% if (edit.disabled === true) { disabled = 'disabled=""'; } else { disabled = ""; } %> <button class="action btn btn-default" name="edit" type="button" title="<%- edit.title %>" <%- disabled %>><span class="fa fa-pencil-square-o fa-lg"></span></button> <% } %> <% if (typeof(edit2) !== 'undefined' && edit2.display !== false) { %> <% if (edit2.disabled === true) { disabled = 'disabled=""'; } else { disabled = ""; } %> <button class="action btn btn-default" name="edit2" type="button" title="<%- edit2.title %>" <%- disabled %>><span class="fa fa-pencil-square-o fa-lg"></span></button> <% } %> <% if (typeof(tag) !== 'undefined' && tag.display !== false) { %> <% if (tag.disabled === true) { disabled = 'disabled=""'; } else { disabled = ""; } %> <button class="action btn btn-default" name="tag" type="button" title="<%- tag.title %>" <%- disabled %>><span class="fa fa-tag fa-lg"></span></button> <% } %> <% if (typeof(manage) !== 'undefined' && manage.display !== false) { %> <% if (manage.disabled === true) { disabled = 'disabled=""'; } else { disabled = ""; } %> <button class="action btn btn-default" name="manage" type="button" title="<%- manage.title %>" <%- disabled %>><span class="fa fa-th-list fa-lg"></span></button> <% } %> <% if (typeof(remove) !== 'undefined' && remove.display !== false) { %> <% if (remove.disabled === true) { disabled = 'disabled=""'; } else { disabled = ""; } %> <button class="action btn btn-default" name="remove" type="button" title="<%- remove.title %>" <%- disabled %>><span class="fa fa-trash fa-lg"></span></button> <% } %> <% if (typeof(unlink) !== 'undefined' && unlink.display !== false) { %> <% if (unlink.disabled === true) { disabled = 'disabled=""'; } else { disabled = ""; } %> <button class="action btn btn-default" name="unlink" type="button" title="<%- unlink.title %>" <%- disabled %>><span class="fa fa-chain-broken fa-lg"></span></button> <% } %> <% if (typeof(history) !== 'undefined' && history.display !== false) { %> <% if (history.disabled === true) { disabled = 'disabled=""'; } else { disabled = ""; } %> <button class="action btn btn-default" name="history" type="button" title="<%- history.title %>" <%- disabled %>><span class="fa fa-line-chart fa-lg"></span></button> <% } %> </div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 326 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div class="row"><div class="col-lg-6 form-group"><label class="control-label">' +
__e( _t('Related step data') ) +
'</label><select name="get-data" class="form-control" title="' +
__e( _t('Display as...') ) +
'"><option value="original-csv">' +
__e( _t("Download as CSV") ) +
'</option><option value="original-xlsx">' +
__e( _t("Download as XLSX") ) +
'</option><option value="original-display">' +
__e( _t("Display as list") ) +
'</option></select></div></div>';

}
return __p
};

/*
original source:

<div class="row"><div class="col-lg-6 form-group"><label class="control-label"><%- _t('Related step data') %></label><select name="get-data" class="form-control" title="<%- _t('Display as...') %>"><option value="original-csv"><%- _t("Download as CSV") %></option><option value="original-xlsx"><%- _t("Download as XLSX") %></option><option value="original-display"><%- _t("Display as list") %></option></select></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 327 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div class="row"><div class="col-lg-6 form-group"><label class="control-label">' +
__e( _t('Accessions original list') ) +
'</label><select name="get-accession-list" class="form-control" title="' +
__e( _t('Download as...') ) +
'"><option value="original-csv">' +
__e( _t("Accession list as CSV") ) +
'</option><option value="original-xlsx">' +
__e( _t("Accession list as XLSX") ) +
'</option><option value="original-panel">' +
__e( _t("Display list") ) +
'</option></select></div></div><div class="row"><div class="col-lg-6 form-group" name="batch-details"><label class="control-label">' +
__e( _t('Batch generation') ) +
'</label><input name="batch-detail" type="text" class="form-control" readonly="readonly"></div></div>';

}
return __p
};

/*
original source:

<div class="row"><div class="col-lg-6 form-group"><label class="control-label"><%- _t('Accessions original list') %></label><select name="get-accession-list" class="form-control" title="<%- _t('Download as...') %>"><option value="original-csv"><%- _t("Accession list as CSV") %></option><option value="original-xlsx"><%- _t("Accession list as XLSX") %></option><option value="original-panel"><%- _t("Display list") %></option></select></div></div><div class="row"><div class="col-lg-6 form-group" name="batch-details"><label class="control-label"><%- _t('Batch generation') %></label><input name="batch-detail" type="text" class="form-control" readonly="readonly"></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 328 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div class="row"><div class="col-lg-4" style="margin-bottom: 10px"><label>' +
__e( _t('Producer number') ) +
'</label><select name="producer_index" class="form-control" title="' +
__e( _t('Select a producer') ) +
'"></select></div><div class="col-lg-1"><label>&nbsp;</label><div class="btn-group" role="group" style="width: 100px"><button type="button" class="btn btn-default fa fa-lg fa-plus" name="add-producer" title="' +
__e( _t('Create producer') ) +
'" style="height: 32px"></button> <button type="button" class="btn btn-danger fa fa-lg fa-remove" name="delete-producer" title="' +
__e( _t('Delete producer') ) +
'" style="height: 32px"></button></div></div></div><div class="row"><div class="col-lg-12" name="options"></div></div><div class="row"><div class="col-lg-12" name="producer"></div></div>';

}
return __p
};

/*
original source:

<div class="row"><div class="col-lg-4" style="margin-bottom: 10px"><label><%- _t('Producer number') %></label><select name="producer_index" class="form-control" title="<%- _t('Select a producer') %>"></select></div><div class="col-lg-1"><label>&nbsp;</label><div class="btn-group" role="group" style="width: 100px"><button type="button" class="btn btn-default fa fa-lg fa-plus" name="add-producer" title="<%- _t('Create producer') %>" style="height: 32px"></button> <button type="button" class="btn btn-danger fa fa-lg fa-remove" name="delete-producer" title="<%- _t('Delete producer') %>" style="height: 32px"></button></div></div></div><div class="row"><div class="col-lg-12" name="options"></div></div><div class="row"><div class="col-lg-12" name="producer"></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 329 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div class="row"><div class="col-lg-6 form-group"><label class="control-label">' +
__e( _t('Accessions list') ) +
'</label><select name="accession-list-type" class="form-control"><option value="panel">' +
__e( _t("From a panel") ) +
'</option><option value="upload">' +
__e( _t("From a CSV or XLSX") ) +
'</option><option value="list">' +
__e( _t("List of selection") ) +
'</option></select></div><div class="col-lg-6 form-group" name="panel"><label class="control-label">' +
__e( _t('Panel') ) +
'</label><div style="width: 100%"><select name="accession-panel" class="form-control" style="width: 100%"></select></div></div><div class="col-lg-6 form-group" name="upload" style="display: none"><label class="control-label">' +
__e( _t('Upload') ) +
'</label><input name="accession-upload" type="file" class="form-control" accept="application/vnd.ms-excel,text/csv,.csv,.xlsx"></div></div><div class="row" name="manual" style="display: none"><div class="col-lg-12 form-group"><label class="control-label">' +
__e( _t('Selection of accessions') ) +
'</label><div style="width: 100%"><select name="accession-list" class="form-control" multiple="true" style="width: 100%"></select></div></div></div>';

}
return __p
};

/*
original source:

<div class="row"><div class="col-lg-6 form-group"><label class="control-label"><%- _t('Accessions list') %></label><select name="accession-list-type" class="form-control"><option value="panel"><%- _t("From a panel") %></option><option value="upload"><%- _t("From a CSV or XLSX") %></option><option value="list"><%- _t("List of selection") %></option></select></div><div class="col-lg-6 form-group" name="panel"><label class="control-label"><%- _t('Panel') %></label><div style="width: 100%"><select name="accession-panel" class="form-control" style="width: 100%"></select></div></div><div class="col-lg-6 form-group" name="upload" style="display: none"><label class="control-label"><%- _t('Upload') %></label><input name="accession-upload" type="file" class="form-control" accept="application/vnd.ms-excel,text/csv,.csv,.xlsx"></div></div><div class="row" name="manual" style="display: none"><div class="col-lg-12 form-group"><label class="control-label"><%- _t('Selection of accessions') %></label><div style="width: 100%"><select name="accession-list" class="form-control" multiple="true" style="width: 100%"></select></div></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 330 */
/***/ (function(module, exports) {

underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '';
with (obj) {
__p += '<div class="row"></div>';

}
return __p
};

/*
original source:

<div class="row"></div>
*/


/***/ }),
/* 331 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div style="margin: 5px; margin-left: 48%; margin-right: 52%"><span class="unselectable scroll-less action label label-default" style="margin-right: 5px"><span class="fa fa-caret-up"></span></span><span class="unselectable scroll-more action label label-default"><span class="fa fa-caret-down"></span></span></div><div style="float: right; margin-top: -25px; margin-right: 15px" class="collection-count-group"><span class="collection-position badge badge-default" style="">0 - 0</span><span class="unselectable"> ' +
__e( _t('from') ) +
' </span><span class="collection-count badge badge-default" style="">0</span><span class="unselectable"> ' +
__e( _t('total results') ) +
'</span></div>';

}
return __p
};

/*
original source:

<div style="margin: 5px; margin-left: 48%; margin-right: 52%"><span class="unselectable scroll-less action label label-default" style="margin-right: 5px"><span class="fa fa-caret-up"></span></span><span class="unselectable scroll-more action label label-default"><span class="fa fa-caret-down"></span></span></div><div style="float: right; margin-top: -25px; margin-right: 15px" class="collection-count-group"><span class="collection-position badge badge-default" style="">0 - 0</span><span class="unselectable"> <%- _t('from') %> </span><span class="collection-count badge badge-default" style="">0</span><span class="unselectable"> <%- _t('total results') %></span></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 332 */
/***/ (function(module, exports) {

underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '';
with (obj) {
__p += '<div class="content" style="overflow-y: auto; height: 100%; flex: 1 1 auto"></div><div class="layout-bottom" style="flex: 0 1 auto"></div><div class="layout-footer" style="flex: 0 1 auto"></div>';

}
return __p
};

/*
original source:

<div class="content" style="overflow-y: auto; height: 100%; flex: 1 1 auto"></div><div class="layout-bottom" style="flex: 0 1 auto"></div><div class="layout-footer" style="flex: 0 1 auto"></div>
*/


/***/ }),
/* 333 */
/***/ (function(module, exports) {

underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '';
with (obj) {
__p += '<table class="table table-striped" style="margin-bottom: 0px"><tbody><tr><td style="width: 30%"><div class="form-group" style="margin-bottom: 0px"><select class="entity-field form-control" name="entity-field"></select></div></td><td style="width: 15%"><div class="form-group" style="margin-bottom: 0px"><select class="form-control" name="operator"></select></div></td><td style="width: 55%"><div class="form-group search-value-group" style="margin-bottom: 0px"><input type="text" class="search-value form-control" name="search-value"></div></td><th><button type="button" class="entity-filter btn btn-default"><span class="fa fa-search"></span>&nbsp;Filter</button></th></tr></tbody></table>';

}
return __p
};

/*
original source:

<table class="table table-striped" style="margin-bottom: 0px"><tbody><tr><td style="width: 30%"><div class="form-group" style="margin-bottom: 0px"><select class="entity-field form-control" name="entity-field"></select></div></td><td style="width: 15%"><div class="form-group" style="margin-bottom: 0px"><select class="form-control" name="operator"></select></div></td><td style="width: 55%"><div class="form-group search-value-group" style="margin-bottom: 0px"><input type="text" class="search-value form-control" name="search-value"></div></td><th><button type="button" class="entity-filter btn btn-default"><span class="fa fa-search"></span>&nbsp;Filter</button></th></tr></tbody></table>
*/


/***/ }),
/* 334 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div class="row"><div class="col-lg-6 form-group"><label class="control-label">' +
__e( _t('Accessions original list') ) +
'</label><select name="get-accession-list" class="form-control" title="' +
__e( _t('Download as...') ) +
'"><option value="original-csv">' +
__e( _t("Accession list as CSV") ) +
'</option><option value="original-xlsx">' +
__e( _t("Accession list as XLSX") ) +
'</option><option value="original-panel">' +
__e( _t("Generate a new panel") ) +
'</option></select></div><div class="col-lg-6 form-group" name="upload"><label class="control-label">' +
__e( _t('Upload the refined list of accessions') ) +
'</label><input name="accession-upload" type="file" class="form-control" accept="application/vnd.ms-excel,text/csv,.csv,.xlsx"></div><div class="col-lg-6 form-group" name="uploaded" style="display: none"><label class="control-label">' +
__e( _t('Upload the refined list of accessions') ) +
'</label><input class="form-control" type="text" value="' +
__e( _t('Currently defined') ) +
'" readonly="readonly"></div><div class="col-lg-6 form-group" name="panel-group"><label class="control-label">' +
__e( _t('Setup the refined list of accessions from the temporary panel') ) +
'</label><button name="set-from-panel">' +
__e( _t('Set from panel') ) +
'</button></div></div>';

}
return __p
};

/*
original source:

<div class="row"><div class="col-lg-6 form-group"><label class="control-label"><%- _t('Accessions original list') %></label><select name="get-accession-list" class="form-control" title="<%- _t('Download as...') %>"><option value="original-csv"><%- _t("Accession list as CSV") %></option><option value="original-xlsx"><%- _t("Accession list as XLSX") %></option><option value="original-panel"><%- _t("Generate a new panel") %></option></select></div><div class="col-lg-6 form-group" name="upload"><label class="control-label"><%- _t('Upload the refined list of accessions') %></label><input name="accession-upload" type="file" class="form-control" accept="application/vnd.ms-excel,text/csv,.csv,.xlsx"></div><div class="col-lg-6 form-group" name="uploaded" style="display: none"><label class="control-label"><%- _t('Upload the refined list of accessions') %></label><input class="form-control" type="text" value="<%- _t('Currently defined') %>" readonly="readonly"></div><div class="col-lg-6 form-group" name="panel-group"><label class="control-label"><%- _t('Setup the refined list of accessions from the temporary panel') %></label><button name="set-from-panel"><%- _t('Set from panel') %></button></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 335 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {/**
 * @file cellcontextmenu.js
 * @brief For cell of advanced menu, offers a context menu on right mouse button.
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-10-27
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details Actions like copy value to clipboard, open in new tab...
 */

let Marionette = __webpack_require__(1);

let Behavior = Marionette.Behavior.extend({
    defaultTemplate: _.template(
        '<div class="clearfix cell-context-menu" style="position: absolute; display:none;">' +
            '<ul class="actions-list">' +
                '<li class="action"><a href="#" name="copy-value">' + _t("Copy value to clipboard") + '</a></li>' +
                '<li class="action"><a href="#" name="open-new" target="_blank">' + _t("View in a new tab/window") + '</a></li>' +
            '</ul>' +
        '</div>'),

    initialize: function(options) {
        options || (options = {});

        Behavior.__super__.initialize.apply(this, arguments);

        this.container = options.container || $('body');
        this.collection = options.collection;
        this.table = options.table;

        this.$el = null;

        $(window).on('keydown', $.proxy(this.onKeyDown, this));
    },

    onRender: function() {
        this.view.ui.tbody.on('contextmenu', $.proxy(this.onBodyContextMenu, this));
        this.view.ui.tbody.on('mouseup', $.proxy(this.onMouseBtnUp, this));

        this.$el = $(this.defaultTemplate());
        this.container.append(this.$el);

        this.$el.find('a[name=copy-value]').parent('li').on('click', $.proxy(this.onCopyValueToClipBoard, this));
        this.$el.find('a[name=open-new]').parent('li').on('click', $.proxy(this.onOpenNewTabWindow, this));

        this.$el.on('contextmenu', function () {
           return false;
        });
    },

    onDestroy: function() {
        if (this.$el) {
            this.$el.remove();
            this.$el = null;
        }

        $(window).off('keydown', $.proxy(this.onKeyDown, this));
    },

    show: function(options) {
        let view = this;

        this.$el.css({
            display: 'block',
            left: options.position.left + 'px',
            top: options.position.top + 'px',
            'z-index': 100000
        }).addClass('glasspane-top-of');

        this.cell = options.cell;
        this.column = options.column;

        let openNew = this.$el.find('a[name=open-new]').parent('li');
        this.model = null;

        openNew.attr('target', null);

        if (this.collection && this.cell[0]) {
            // define the url to open a new tab about the element
            if (this.column.event) {
                let url = this.findModel(this.column, this.cell);
                if (url) {
                    openNew.attr('target', url);
                }
            }
        }

        if (!openNew.attr('target')) {
            openNew.hide();
        } else {
            openNew.show();
        }

        // hide the context menu when click on the glass pane
        window.application.main.glassPane('show', {opacity: 0}).on('click', function (e) {
            view.hide();
            return true;
        }).on('contextmenu', function (e) {
            view.hide();
            return false;
        });
    },

    hide: function () {
        window.application.main.glassPane('destroy');
        this.$el.css('display', 'none');
    },

    findModel: function(column, cell) {
        let url = null;
        let baseUrl = window.location.protocol + '//' + window.location.host;

        // define the url to open a new tab about the element
        let id = parseInt(cell.closest('tr').attr('element-id'));

        if (column.event) {
            let modelType = undefined;

            // default uses collection model as target
            this.model = this.collection.get(id);

            // according the type of the target model have the good router/url
            if ("format" in column && column.format.type === "entity") {
                modelType = column.format.model;
            }

            if (modelType) {
                this.relatedModel = this.model.get(cell.closest('td').attr('name'));
                console.log(this.relatedModel);

                let parts = modelType.split(".");

                if (this.relatedModel) {
                    url = window.application.url(["app", parts[0], parts[1], this.relatedModel]);
                }
            } else {
                let modelUrl = _.isFunction(this.model.url) ? this.model.url() : this.model.url;
                url = baseUrl + modelUrl.replace(window.application.BASE_URL, window.application.BASE_URL + "app/");
            }
        }

        return url;
    },

    onMouseBtnUp: function(e) {
        if (e.which === 2) {
            let col = $(e.target).closest('td');
            if (col.length === 0) {
                return true;
            }

            let columnName = this.view.displayedColumns[col[0].cellIndex];
            let columns = this.view.getOption('columns') || {};
            if (!(columnName in columns)) {
                return true;
            }

            let column = columns[columnName];
            let cell = $(e.target);
            let url = this.findModel(column, cell);

            if (url) {
                window.open(url, '_blank');
                return false;
            }
        }

        return true;
    },

    onBodyContextMenu: function(e) {
        let col = $(e.target).closest('td');
        if (col.length === 0) {
            return true;
        }

        let columnName = this.view.displayedColumns[col[0].cellIndex];
        let columns = this.view.getOption('columns') || {};
        if (!(columnName in columns)) {
            return true;
        }

        let column = columns[columnName];
        let row = col.parent('tr');

        let position = {
            left: e.clientX,
            top: e.clientY
        };

        this.show({
            row: row,
            column: column,
            cell: $(e.target),
            position: position
        });

        return false;
    },

    onKeyDown: function (e) {
        if (e.key === 'Escape' && this.$el.length) {
            this.hide();
        }
    },

    onCopyValueToClipBoard: function(e) {
        let range = document.createRange();
        range.selectNodeContents(this.cell[0]);

        let sel = window.getSelection();
        sel.removeAllRanges();
        sel.addRange(range);

        if (!document.execCommand('copy')) {
            console.error("Unable to realise the copy command");
        }

        sel.removeAllRanges();
        this.hide();

        return false;
    },

    onOpenNewTabWindow: function(e) {
        this.hide();

        let url = $(e.currentTarget).attr('target');
        if (url) {
            window.open(url, '_blank');
        }

        return false;
    }
});

module.exports = Behavior;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 336 */
/***/ (function(module, exports) {

underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '';
with (obj) {
__p += '<div class="panel panel-default"><div class="panel-heading"><span style="font-weight:bold; font-size:18px"><span class="panel-title"></span></span></div><div class="panel-body"></div><div class="panel-body-bottom"></div><div class="panel-bottom"></div></div>';

}
return __p
};

/*
original source:

<div class="panel panel-default"><div class="panel-heading"><span style="font-weight:bold; font-size:18px"><span class="panel-title"></span></span></div><div class="panel-body"></div><div class="panel-body-bottom"></div><div class="panel-bottom"></div></div>
*/


/***/ }),
/* 337 */
/***/ (function(module, exports) {

underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '';
with (obj) {
__p += '<div class="row"></div>';

}
return __p
};

/*
original source:

<div class="row"></div>
*/


/***/ }),
/* 338 */
/***/ (function(module, exports) {

underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '';
with (obj) {
__p += '<div class="well well-sm"></div>';

}
return __p
};

/*
original source:

<div class="well well-sm"></div>
*/


/***/ }),
/* 339 */
/***/ (function(module, exports) {

underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '';
with (obj) {
__p += '<div class="row"></div>';

}
return __p
};

/*
original source:

<div class="row"></div>
*/


/***/ }),
/* 340 */
/***/ (function(module, exports) {

underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '';
with (obj) {
__p += '<div class="well well-sm"></div>';

}
return __p
};

/*
original source:

<div class="well well-sm"></div>
*/


/***/ }),
/* 341 */
/***/ (function(module, exports) {

underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '';
with (obj) {
__p += '<div class="row"></div>';

}
return __p
};

/*
original source:

<div class="row"></div>
*/


/***/ }),
/* 342 */
/***/ (function(module, exports) {

underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '';
with (obj) {
__p += '<div class="row"></div>';

}
return __p
};

/*
original source:

<div class="row"></div>
*/


/***/ }),
/* 343 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file actionstepformat.js
 * @brief Action type format collection
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-12-15
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let FormatModel = __webpack_require__(344);

let Collection = Backbone.Collection.extend({
    url: window.application.url(['accession', 'actiontype', 'stepformat']),
    model: FormatModel,

    initialize: function(models, options) {
        Collection.__super__.initialize.apply(this);

        this.models = [];
        this.lookup = {};

        for (let i = 0; i < this.items.length; ++i) {
            let model = this.items[i];
            this.lookup[model.id] = model.label;
            this.models.push(new FormatModel({
                id: model.id,
                value: model.id,
                group: model.group,
                label: model.label
            }));
        }
    },

    parse: function(data) {
        this.groups = data.groups;
        return data.items;
    },

    toJSON: function() {
        let results = [];
        let groups = {};

        // init groups
        for (let i = 0; i < this.groups.length; ++i) {
            let group = this.groups[i];
            groups[group.group] = {id: -1, value: "", label: group.label, options: []};
            results.push(groups[group.group]);
        }

        for (let i = 0; i < this.models.length; ++i) {
            let model = this.models[i];
            let group = groups[model.get('group')];

            if (model.id) {
                group.options.push({
                    id: model.get('id'),
                    value: model.get('value'),
                    label: model.get('label')
                });
            }
        }

        return results;
    },

    groups: [
        {group: 'standard', label: _t('Standard')}
    ],

    items: [
        // {id: 'boolean', group: 'standard', label: _t('Boolean')},
    ],

    findLabel: function(value) {
        return this.lookup[value];
    },
});

module.exports = Collection;


/***/ }),
/* 344 */
/***/ (function(module, exports) {

/**
 * @file actionstepformat.js
 * @brief Action step format model
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-12-15
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

module.exports = Backbone.Model.extend({
    defaults: function() {
        return {
            id: 0,
            group: 0,
            value: '',
            label: '',
            description: ''
        }
    },
    url: window.application.url(['accession', 'actiontype', 'stepformat', ':id'])
});


/***/ }),
/* 345 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file accession.js
 * @brief Accession controller
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-12-07
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);

let AccessionModel = __webpack_require__(37);

let DefaultLayout = __webpack_require__(3);
let TitleView = __webpack_require__(4);
let Dialog = __webpack_require__(5);
let Search = __webpack_require__(32);

let AccessionLayout = __webpack_require__(219);
let SearchEntityDialog = __webpack_require__(226);

let Controller = Marionette.Object.extend({

    create: function() {
        let description = $.ajax({
            type: "GET",
            url: window.application.url(['descriptor', 'layout', 'for-describable', 'accession.accession']),
            dataType: 'json'
        });

        description.then(function(data) {
            let CreateAccessionDialog = Dialog.extend({
                attributes: {
                    'id': 'dlg_create_accession'
                },
                template: __webpack_require__(376),
                templateContext: function () {
                    return {
                        layouts: data
                    };
                },

                ui: {
                    validate: "button.continue",
                    name: "#accession_name",
                    language: "#accession_language",
                    layout: "#layout",
                    primary_classification: "#primary_classification",
                    primary_classification_entry: "#primary_classification_entry"
                },

                events: {
                    'click @ui.validate': 'onContinue',
                    'input @ui.name': 'onNameInput',
                    'change @ui.layout': 'onChangeLayout',
                    'change @ui.primary_classification': 'onChangePrimaryClassification'
                },

                regions: {
                    'namingOptions': 'div.naming-options'
                },

                initialize: function (options) {
                    CreateAccessionDialog.__super__.initialize.apply(this);

                    // map descriptor meta models by theirs ids
                    this.layouts = {};

                    for (let i = 0; i < data.length; ++i) {
                        let dmm = data[i];
                        this.layouts[dmm.id] = dmm;
                    }
                },

                onRender: function () {
                    CreateAccessionDialog.__super__.onRender.apply(this);

                    window.application.main.views.languages.drawSelect(this.ui.language);
                    this.ui.layout.selectpicker({});
                    this.ui.primary_classification.selectpicker({});

                    // naming options
                    let self = this;

                    $.ajax({
                        type: "GET",
                        url: window.application.url(['accession', 'naming', 'accession']),
                        dataType: 'json',
                    }).done(function(data) {
                        let NamingOptionsView = __webpack_require__(36);
                        let len = (data.format.match(/{CONST}/g) || []).length;

                        let namingOptions = new Array(len);

                        self.showChildView("namingOptions", new NamingOptionsView({
                            namingFormat: data.format,
                            namingOptions: namingOptions
                        }));
                    });

                    // on default descriptor layout
                    this.onChangeLayout();
                },

                getLayoutClassifications: function () {
                    let layoutId = parseInt(this.ui.layout.val());

                    let value = Object.resolve(layoutId + ".parameters.data.primary_classification", this.layouts);
                    if (value) {
                        return [value];
                    }

                    return [];
                },

                onBeforeDestroy: function() {
                    this.ui.language.selectpicker('destroy');
                    this.ui.layout.selectpicker('destroy');
                    this.ui.primary_classification.selectpicker('destroy');

                    if (this.ui.primary_classification_entry.data('select2')) {
                        $(this.ui.primary_classification_entry).select2('destroy');
                    }

                    CreateAccessionDialog.__super__.onBeforeDestroy.apply(this);
                },

                onChangeLayout: function() {
                    let select = this.ui.primary_classification;

                    select.children().remove();
                    select.selectpicker('destroy');

                    // classifications list according to the related meta model of accession
                    let ClassificationCollection = __webpack_require__(31);
                    let classificationCollection = new ClassificationCollection();

                    let SelectOption = __webpack_require__(19);
                    let classifications = new SelectOption({
                        className: "classification",
                        collection: classificationCollection,
                        filters: [{
                            type: 'term',
                            field: 'id',
                            value: this.getLayoutClassifications(),
                            op: 'in'
                        }]
                    });

                    let self = this;

                    classifications.drawSelect(select).done(function () {
                        self.onChangePrimaryClassification();
                    });
                },

                onChangePrimaryClassification: function () {
                    let classificationId = parseInt(this.ui.primary_classification.val());
                    let select = $(this.ui.primary_classification_entry);

                    if (select.data('select2')) {
                        select.select2('destroy');
                        select.children().remove();
                    }

                    if (isNaN(classificationId)) {
                        return;
                    }

                    select.select2(Search(
                        this.ui.primary_classification_entry.parent(),
                        window.application.url(['classification', 'classificationentry', 'search']),
                        function (params) {
                            return {
                                method: 'icontains',
                                classification_method: 'eq',
                                fields: ['name', 'classification'],
                                'name': params.term.trim(),
                                'classification': classificationId
                            };
                        }, {
                            minimumInputLength: 1,
                            placeholder: _t("Enter a classification entry name.")
                        })
                    ).fixSelect2Position();
                },

                // onCodeInput: function () {
                //     let code = this.ui.code.val().trim();
                //
                //     if (this.validateCode()) {
                //         let filters = {
                //             method: 'ieq',
                //             fields: ['code'],
                //             'code': code
                //         };
                //
                //         $.ajax({
                //             type: "GET",
                //             url: window.application.url(['accession', 'accession', 'search']),
                //             dataType: 'json',
                //             contentType: 'application/json; charset=utf8',
                //             data: {filters: JSON.stringify(filters)},
                //             el: this.ui.code,
                //         }).done(function (data) {
                //             for (let i in data.items) {
                //                 let t = data.items[i];
                //
                //                 if (t.value.toUpperCase() === code.toUpperCase()) {
                //                     $(this.el).validateField('failed', _t('Code of accession already used'));
                //                     return;
                //                 }
                //             }
                //
                //             $(this.el).validateField('ok');
                //         });
                //     }
                // },

                onNameInput: function () {
                    let name = this.ui.name.val().trim();
                    let self = this;

                    if (this.validateName()) {
                        let filters = {
                            method: 'ieq',
                            fields: ['name'],
                            'name': name
                        };

                        $.ajax({
                            type: "GET",
                            url: window.application.url(['accession', 'accession', 'synonym', 'search']),
                            dataType: 'json',
                            contentType: 'application/json; charset=utf8',
                            data: {filters: JSON.stringify(filters)},
                        }).done(function (data) {
                            let accessionCodeId = window.application.main.collections.entitySynonymTypes.findWhere(
                                {name: "accession_code"}).get('id');

                            for (let i in data.items) {
                                let t = data.items[i];

                                if (t.synonym_type === accessionCodeId && t.label.toUpperCase() === name.toUpperCase()) {
                                    self.ui.name.validateField('failed', _t('Synonym used as accession code'));
                                    return;
                                }
                            }

                            self.ui.name.validateField('ok');
                        });
                    }
                },

                // validateCode: function() {
                //     let v = this.ui.code.val().trim();
                //
                //     if (v.length > 128) {
                //         this.ui.code.validateField('failed', _t('characters_max', {count: 128}));
                //         return false;
                //     } else if (v.length < 1) {
                //         this.ui.code.validateField('failed', _t('characters_min', {count: 1}));
                //         return false;
                //     }
                //
                //     if (v === this.ui.name.val().trim()) {
                //         this.ui.code.validateField('failed', 'Code and name must be different');
                //         return false;
                //     }
                //
                //     return true;
                // },

                validateName: function() {
                    let v = this.ui.name.val().trim();

                    if (v.length > 128) {
                        this.ui.name.validateField('failed', _t('characters_max', {count: 128}));
                        return false;
                    } else if (v.length < 1) {
                        this.ui.name.validateField('failed', _t('characters_min', {count: 1}));
                        return false;
                    }

                    // if (v === this.ui.code.val().trim()) {
                    //     this.ui.name.validateField('failed', 'Code and name must be different');
                    //     return false;
                    // }

                    return true;
                },

                validate: function() {
                    let valid = this.validateName();
                    let layoutId = parseInt(this.ui.layout.val());
                    let primaryClassificationEntryId = parseInt(this.ui.primary_classification_entry.val());

                    if (isNaN(layoutId)) {
                        $.alert.error(_t("The layout of descriptors must be defined"));
                        valid = false;
                    }

                    if (isNaN(primaryClassificationEntryId)) {
                        $.alert.error(_t("The primary classification must be defined"));
                        valid = false;
                    }

                    // @todo could have an API to validate naming options to uses here
                     if (this.ui.name.hasClass('invalid') || this.ui.primary_classification_entry.hasClass('invalid')) {
                        valid = false;
                    }

                    return valid;
                },

                onContinue: function() {
                    let view = this;

                    if (this.validate()) {
                        let name = this.ui.name.val().trim();
                        let namingOptions = this.getChildView('namingOptions').getNamingOptions();

                        let layoutId = parseInt(this.ui.layout.val());
                        let primaryClassificationEntryId = parseInt(this.ui.primary_classification_entry.val());

                        // create a new local model and open an edit view with this model
                        let model = new AccessionModel({
                            name: name,
                            naming_options: namingOptions,
                            primary_classification_entry: primaryClassificationEntryId,
                            layout: layoutId,
                            language: this.ui.language.val()
                        });

                        view.destroy();

                        let defaultLayout = new DefaultLayout();
                        window.application.main.showContent(defaultLayout);

                        defaultLayout.showChildView('title', new TitleView({
                            title: _t("Accession"),
                            model: model
                        }));

                        let accessionLayout = new AccessionLayout({model: model});
                        defaultLayout.showChildView('content', accessionLayout);
                    }
                }
            });

            let createAccessionView = new CreateAccessionDialog();
            createAccessionView.render();
        });
    },

    search: function () {
        let searchEntityDialog = new SearchEntityDialog({entity: 'accession.accession'});
        searchEntityDialog.render();
     }
});

module.exports = Controller;


/***/ }),
/* 346 */
/***/ (function(module, exports) {

underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '';
with (obj) {
__p += '<div class="content" style="overflow-y: auto; height: 100%; flex: 1 1 auto"></div><div class="layout-bottom" style="flex: 0 1 auto"></div>';

}
return __p
};

/*
original source:

<div class="content" style="overflow-y: auto; height: 100%; flex: 1 1 auto"></div><div class="layout-bottom" style="flex: 0 1 auto"></div>
*/


/***/ }),
/* 347 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file entitypath.js
 * @brief Classification entry path + entity name item view
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-12-29
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Marionette = __webpack_require__(1);
let Dialog = __webpack_require__(5);
let Search = __webpack_require__(32);

let ClassificationEntryModel = __webpack_require__(26);

let View = Marionette.View.extend({
    tagName: 'div',
    template: __webpack_require__(348),
    templateContext: function () {
        return {
            classificationEntry: this.classificationEntry
        };
    },

    classificationEntry: {name: '', rank: 0, parent_details: []},
    noLink: false,

    attributes: {
        style: "height: 25px; overflow-y: auto;"
    },

    ui: {
        view_classification_entry: ".view-classification-entry",
        change_parent: ".change-parent"
    },

    events: {
        'click @ui.view_classification_entry': 'onViewClassificationEntry',
        'click @ui.change_parent': 'onChangeParent'
    },

    initialize: function(options) {
        this.mergeOptions(options, ['classificationEntry']);

        this.listenTo(this.model, 'change:name', this.render, this);
        this.listenTo(this.model, 'change:primary_classification_entry', this.updateParent, this);
    },

    updateParent: function(model, value) {
        let view = this;

        // update the classificationEntry
        this.classificationEntry = new ClassificationEntryModel({id: value});
        this.classificationEntry.fetch().then(function() {
            if (!view.isRendered()) {
                return;
            }

            view.render();
        });
    },

    onRender: function() {
        this.$el.popupcell('init', {
            className: 'classification-rank',
            type: 'entity',
            children: true,
            format: {
                model: 'classification.classificationrank',
                details: true
            }
        });

        if (this.getOption('noLink')) {
            this.ui.view_classification_entry.removeClass('action');
        }
    },

    onViewClassificationEntry: function(e) {
        if (this.getOption('noLink')) {
            return;
        }

        let cls_id = $(e.target).data('classification-entry-id');
        Backbone.history.navigate("app/classification/classificationentry/" + cls_id + "/", {trigger: true});
    },

    onChangeParent: function() {
        let ChangeParent = Dialog.extend({
            template: __webpack_require__(220),

            attributes: {
                id: "dlg_change_parent"
            },

            ui: {
                parent: "#classification_entry_parent"
            },

            initialize: function (options) {
                ChangeParent.__super__.initialize.apply(this);
            },

            onRender: function () {
                ChangeParent.__super__.onRender.apply(this);

                let classificationRankId = this.getOption('classificationEntry').get('id');

                this.ui.parent.select2(Search(
                    this.$el,
                    window.application.url(['classification', 'classificationentry', 'search']),
                    function (params) {
                        return {
                            method: 'icontains',
                            fields: ['name', 'rank'],
                            'name': params.term,
                            'rank': classificationRankId
                        };
                    }, {
                        placeholder: _t("Enter a classification entry name. 3 characters at least for auto-completion")
                    })
                );
            },

            onBeforeDestroy: function() {
                this.ui.parent.select2('destroy');

                ChangeParent.__super__.onBeforeDestroy.apply(this);
            },

            onApply: function() {
                let model = this.getOption('model');
                let classificationEntryId = parseInt($(this.ui.parent).val());

                if (isNaN(classificationEntryId)) {
                    $.alert.error(_t('Undefined classification entry.'));
                    return false;
                }

                if (model.isNew()) {
                    model.set('primary_classification_entry', classificationEntryId);
                } else {
                    model.save({primary_classification_entry: classificationEntryId}, {patch: true, wait: true});
                }

                this.destroy();
            },
        });

        let changeParent = new ChangeParent({
            model: this.model,
            classificationEntry: this.classificationEntry
        });

        changeParent.render();
    }
});

module.exports = View;


/***/ }),
/* 348 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
with (obj) {
__p += '<span style="font-weight:bold; font-size:18px; margin-bottom: 15px"> ';
 for (var i = classificationEntry.get('parent_details').length-1; i >= 0; --i) { ;
__p += '<span><span class="action view-classification-entry classification-rank text-selection-all" data-classification-entry-id="' +
__e( classificationEntry.get('parent_details')[i].id ) +
'" value="' +
__e( classificationEntry.get('parent_details')[i].rank ) +
'">' +
__e( classificationEntry.get('parent_details')[i].name ) +
'</span></span><span class="fa fa-chevron-right" style="margin-left: 0.5rem; margin-right: 0.5rem"></span>';
 } ;
__p += '<span><span class="action view-classification-entry classification-rank" data-classification-entry-id="' +
__e( classificationEntry.get('id') ) +
'" value="' +
__e( classificationEntry.get('rank') ) +
'">' +
__e( classificationEntry.get('name') ) +
'</span></span><span class="fa fa-chevron-right" style="margin-left: 0.5rem; margin-right: 0.5rem"></span><span><span class="name entity text-selection-all">' +
__e( name ) +
'</span></span>&nbsp; <span class="fa fa-pencil-square-o action change-parent"></span></span>';

}
return __p
};

/*
original source:

<span style="font-weight:bold; font-size:18px; margin-bottom: 15px"> <% for (var i = classificationEntry.get('parent_details').length-1; i >= 0; --i) { %><span><span class="action view-classification-entry classification-rank text-selection-all" data-classification-entry-id="<%- classificationEntry.get('parent_details')[i].id %>" value="<%- classificationEntry.get('parent_details')[i].rank %>"><%- classificationEntry.get('parent_details')[i].name %></span></span><span class="fa fa-chevron-right" style="margin-left: 0.5rem; margin-right: 0.5rem"></span><% } %><span><span class="action view-classification-entry classification-rank" data-classification-entry-id="<%- classificationEntry.get('id') %>" value="<%- classificationEntry.get('rank') %>"><%- classificationEntry.get('name') %></span></span><span class="fa fa-chevron-right" style="margin-left: 0.5rem; margin-right: 0.5rem"></span><span><span class="name entity text-selection-all"><%- name %></span></span>&nbsp; <span class="fa fa-pencil-square-o action change-parent"></span></span>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 349 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
with (obj) {
__p += '<div class="object ' +
__e( target.split('.')[1] ) +
'" object-type="' +
__e( target ) +
'" object-id="-1" style="width:100%"><div class="panels panel-group" style="margin-top: 10px"> ';
 var pi = 0; ;
__p += ' ';
 _.each(panels, function(panel) { ;
__p += ' <div class="panel panel-default" name="' +
__e( panel.name ) +
'" panel-id="' +
__e( panel.id ) +
'"> ';
 var collapsed = pi > 0 ? "collapsed" : ""; ;
__p += ' <div class="panel-heading" data-toggle="tooltip" data-placement="left" title="' +
__e( _t('Collapse/Expand') ) +
'"><a class="accordion-toggle ' +
__e( collapsed ) +
'" data-toggle="collapse" href="#collapse' +
__e( pi ) +
'">' +
__e( panel.label[session.language] ) +
'</a></div> ';
 var inout = pi == 0 ? "in" : ""; ;
__p += ' <div id="collapse' +
__e( pi ) +
'" class="panel-collapse collapse ' +
__e( inout ) +
'"><div class="descriptors"><table class="table table-striped"><thead><tr><th>' +
__e( _t("Descriptor") ) +
'</th><th>' +
__e( _t("Value") ) +
'</th></tr></thead><tbody> ';
 var i = 0; ;
__p += ' ';
 _.each(panel.descriptors, function(layoutdescriptor) { ;
__p += ' ';
 var descriptor = descriptors_data[layoutdescriptor.name];;
__p += ' ';
 var format = descriptor.format; ;
__p += ' ';
 var mandatory = descriptor.mandatory ? "mandatory-field" : ""; ;
__p += ' <tr class="descriptor" panel-index="' +
__e( pi ) +
'" index="' +
__e( i ) +
'" descriptor-model-type="' +
__e( descriptor.id ) +
'" code="' +
__e( descriptor.code ) +
'"><td class="descriptor-name ' +
__e( mandatory ) +
'" style="padding-top: 15px"> ' +
__e( descriptor.label ) +
' <span class="descriptor-type-unit"> ';
 if (descriptor.format.unit === "custom") { ;
__p += ' ';
 if (descriptor.format.custom_unit != undefined && descriptor.format.custom_unit !== "") { ;
__p += ' (' +
__e( descriptor.format.custom_unit ) +
') ';
 } ;
__p += ' ';
 } else if (descriptor.format.unit != undefined) { ;
__p += ' (' +
__e( application.descriptor.collections.formatUnits.findLabel(descriptor.format.unit) ) +
') ';
 } ;
__p += ' </span></td><td class="descriptor-value" format-type="' +
__e( format.type ) +
'"></td></tr> ';
 ++i; ;
__p += ' ';
 }) ;
__p += ' </tbody></table></div></div></div> ';
 ++pi ;
__p += ' ';
 }) ;
__p += ' </div><div class="footer pull-right"><button type="button" class="btn btn-default cancel" data-dismiss="modal">' +
__e( _t("Cancel") ) +
'</button> <button type="button" class="btn btn-success apply">' +
__e( _t("Apply") ) +
'</button></div></div>';

}
return __p
};

/*
original source:

<div class="object <%- target.split('.')[1] %>" object-type="<%- target %>" object-id="-1" style="width:100%"><div class="panels panel-group" style="margin-top: 10px"> <% var pi = 0; %> <% _.each(panels, function(panel) { %> <div class="panel panel-default" name="<%- panel.name %>" panel-id="<%- panel.id %>"> <% var collapsed = pi > 0 ? "collapsed" : ""; %> <div class="panel-heading" data-toggle="tooltip" data-placement="left" title="<%- _t('Collapse/Expand') %>"><a class="accordion-toggle <%- collapsed %>" data-toggle="collapse" href="#collapse<%- pi %>"><%- panel.label[session.language] %></a></div> <% var inout = pi == 0 ? "in" : ""; %> <div id="collapse<%- pi %>" class="panel-collapse collapse <%- inout %>"><div class="descriptors"><table class="table table-striped"><thead><tr><th><%- _t("Descriptor") %></th><th><%- _t("Value") %></th></tr></thead><tbody> <% var i = 0; %> <% _.each(panel.descriptors, function(layoutdescriptor) { %> <% var descriptor = descriptors_data[layoutdescriptor.name];%> <% var format = descriptor.format; %> <% var mandatory = descriptor.mandatory ? "mandatory-field" : ""; %> <tr class="descriptor" panel-index="<%- pi %>" index="<%- i %>" descriptor-model-type="<%- descriptor.id %>" code="<%- descriptor.code %>"><td class="descriptor-name <%- mandatory %>" style="padding-top: 15px"> <%- descriptor.label %> <span class="descriptor-type-unit"> <% if (descriptor.format.unit === "custom") { %> <% if (descriptor.format.custom_unit != undefined && descriptor.format.custom_unit !== "") { %> (<%- descriptor.format.custom_unit %>) <% } %> <% } else if (descriptor.format.unit != undefined) { %> (<%- application.descriptor.collections.formatUnits.findLabel(descriptor.format.unit) %>) <% } %> </span></td><td class="descriptor-value" format-type="<%- format.type %>"></td></tr> <% ++i; %> <% }) %> </tbody></table></div></div></div> <% ++pi %> <% }) %> </div><div class="footer pull-right"><button type="button" class="btn btn-default cancel" data-dismiss="modal"><%- _t("Cancel") %></button> <button type="button" class="btn btn-success apply"><%- _t("Apply") %></button></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 350 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
with (obj) {
__p += '<div class="object ' +
__e( target.split('.')[1] ) +
'" object-type="' +
__e( target ) +
'" object-id="-1" style="width:100%"><div class="panels panel-group" style="margin-top: 10px"> ';
 var pi = 0; ;
__p += ' ';
 _.each(panels, function(panel) { ;
__p += ' <div class="panel panel-default" name="' +
__e( panel.name ) +
'" panel-id="' +
__e( panel.id ) +
'"> ';
 var collapsed = pi > 0 ? "collapsed" : ""; ;
__p += ' <div class="panel-heading" data-toggle="tooltip" data-placement="left" title="' +
__e( _t('Collapse/Expand') ) +
'"><a class="accordion-toggle ' +
__e( collapsed ) +
'" data-toggle="collapse" href="#collapse' +
__e( pi ) +
'">' +
__e( panel.label[session.language] ) +
'</a></div> ';
 var inout = pi == 0 ? "in" : ""; ;
__p += ' <div id="collapse' +
__e( pi ) +
'" class="panel-collapse collapse ' +
__e( inout ) +
'"><div class="descriptors"><table class="table table-striped"><thead><tr><th>' +
__e( _t("Descriptor") ) +
'</th><th>' +
__e( _t("Value") ) +
'</th></tr></thead><tbody> ';
 var i = 0; ;
__p += ' ';
 _.each(panel.descriptors, function(layoutdescriptor) { ;
__p += ' ';
 var descriptor = descriptors_data[layoutdescriptor.name]; ;
__p += ' ';
 var format = descriptor.format; ;
__p += ' ';
 var mandatory = descriptor.mandatory ? "mandatory-field" : ""; ;
__p += ' <tr class="descriptor" panel-index="' +
__e( pi ) +
'" index="' +
__e( i ) +
'" descriptor="' +
__e( descriptor.id ) +
'" code="' +
__e( descriptor.code ) +
'"><td class="descriptor-name" style="padding-top: 5px; padding-bottom: 3px"> ' +
__e( descriptor.label ) +
' <span class="descriptor-type-unit"> ';
 if (descriptor.format.unit === "custom") { ;
__p += ' ';
 if (descriptor.format.custom_unit != undefined && descriptor.format.custom_unit !== "") { ;
__p += ' (' +
__e( descriptor.format.custom_unit ) +
') ';
 } ;
__p += ' ';
 } else if (descriptor.format.unit != undefined) { ;
__p += ' (' +
__e( application.descriptor.collections.formatUnits.findLabel(descriptor.format.unit) ) +
') ';
 } ;
__p += ' </span></td><td class="descriptor-value" format-type="' +
__e( format.type ) +
'" style="padding-top: 3px; padding-bottom: 3px"></td></tr> ';
 ++i; ;
__p += ' ';
 }) ;
__p += ' </tbody></table></div></div></div> ';
 ++pi ;
__p += ' ';
 }) ;
__p += ' </div><div class="footer pull-right"><button type="button" class="btn btn-default modify">' +
__e( _t("Modify") ) +
'</button></div></div>';

}
return __p
};

/*
original source:

<div class="object <%- target.split('.')[1] %>" object-type="<%- target %>" object-id="-1" style="width:100%"><div class="panels panel-group" style="margin-top: 10px"> <% var pi = 0; %> <% _.each(panels, function(panel) { %> <div class="panel panel-default" name="<%- panel.name %>" panel-id="<%- panel.id %>"> <% var collapsed = pi > 0 ? "collapsed" : ""; %> <div class="panel-heading" data-toggle="tooltip" data-placement="left" title="<%- _t('Collapse/Expand') %>"><a class="accordion-toggle <%- collapsed %>" data-toggle="collapse" href="#collapse<%- pi %>"><%- panel.label[session.language] %></a></div> <% var inout = pi == 0 ? "in" : ""; %> <div id="collapse<%- pi %>" class="panel-collapse collapse <%- inout %>"><div class="descriptors"><table class="table table-striped"><thead><tr><th><%- _t("Descriptor") %></th><th><%- _t("Value") %></th></tr></thead><tbody> <% var i = 0; %> <% _.each(panel.descriptors, function(layoutdescriptor) { %> <% var descriptor = descriptors_data[layoutdescriptor.name]; %> <% var format = descriptor.format; %> <% var mandatory = descriptor.mandatory ? "mandatory-field" : ""; %> <tr class="descriptor" panel-index="<%- pi %>" index="<%- i %>" descriptor="<%- descriptor.id %>" code="<%- descriptor.code %>"><td class="descriptor-name" style="padding-top: 5px; padding-bottom: 3px"> <%- descriptor.label %> <span class="descriptor-type-unit"> <% if (descriptor.format.unit === "custom") { %> <% if (descriptor.format.custom_unit != undefined && descriptor.format.custom_unit !== "") { %> (<%- descriptor.format.custom_unit %>) <% } %> <% } else if (descriptor.format.unit != undefined) { %> (<%- application.descriptor.collections.formatUnits.findLabel(descriptor.format.unit) %>) <% } %> </span></td><td class="descriptor-value" format-type="<%- format.type %>" style="padding-top: 3px; padding-bottom: 3px"></td></tr> <% ++i; %> <% }) %> </tbody></table></div></div></div> <% ++pi %> <% }) %> </div><div class="footer pull-right"><button type="button" class="btn btn-default modify"><%- _t("Modify") %></button></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 351 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div name="details"></div><div class="column" style="margin-top: 10px; height: calc(100% - 25px)"><ul class="nav nav-tabs" role="tablist"><li role="presentation"><a href="div.tab-pane[name=synonyms]" aria-controls="synonyms" role="tab" data-toggle="tab">' +
__e( _t("Synonyms") ) +
'</a></li><li role="presentation" class="active"><a href="div.tab-pane[name=descriptors]" aria-controls="descriptors" role="tab" data-toggle="tab">' +
__e( _t("Descriptors") ) +
'</a></li><li role="presentation"><a href="div.tab-pane[name=batches]" aria-controls="batches" role="tab" data-toggle="tab">' +
__e( _t("Batches") ) +
'</a></li><li role="presentation"><a href="div.tab-pane[name=classifications-entries]" aria-controls="classifications-entries" role="tab" data-toggle="tab">' +
__e( _t("Classifications") ) +
'</a></li><li role="presentation"><a href="div.tab-pane[name=panels]" aria-controls="panels" role="tab" data-toggle="tab">' +
__e( _t("Panels") ) +
'</a></li><li role="presentation"><a href="div.tab-pane[name=comments]" aria-controls="comments" role="tab" data-toggle="tab">' +
__e( _t("Comments") ) +
'</a></li></ul><div class="tab-content" style="height: calc(100% - 41px - 10px)"><div role="tabpanel" class="tab-pane" name="synonyms" style="height: 100%; overflow-y: auto"></div><div role="tabpanel" class="tab-pane active" name="descriptors" style="height: 100%; overflow-y: auto; padding-right: 5px"></div><div role="tabpanel" class="tab-pane" name="batches" style="height: 100%"></div><div role="tabpanel" class="tab-pane" name="classifications-entries" style="height: 100%"></div><div role="tabpanel" class="tab-pane" name="panels" style="height: 100%"></div><div role="tabpanel" class="tab-pane" name="comments" style="height: 100%"></div></div></div>';

}
return __p
};

/*
original source:

<div name="details"></div><div class="column" style="margin-top: 10px; height: calc(100% - 25px)"><ul class="nav nav-tabs" role="tablist"><li role="presentation"><a href="div.tab-pane[name=synonyms]" aria-controls="synonyms" role="tab" data-toggle="tab"><%- _t("Synonyms") %></a></li><li role="presentation" class="active"><a href="div.tab-pane[name=descriptors]" aria-controls="descriptors" role="tab" data-toggle="tab"><%- _t("Descriptors") %></a></li><li role="presentation"><a href="div.tab-pane[name=batches]" aria-controls="batches" role="tab" data-toggle="tab"><%- _t("Batches") %></a></li><li role="presentation"><a href="div.tab-pane[name=classifications-entries]" aria-controls="classifications-entries" role="tab" data-toggle="tab"><%- _t("Classifications") %></a></li><li role="presentation"><a href="div.tab-pane[name=panels]" aria-controls="panels" role="tab" data-toggle="tab"><%- _t("Panels") %></a></li><li role="presentation"><a href="div.tab-pane[name=comments]" aria-controls="comments" role="tab" data-toggle="tab"><%- _t("Comments") %></a></li></ul><div class="tab-content" style="height: calc(100% - 41px - 10px)"><div role="tabpanel" class="tab-pane" name="synonyms" style="height: 100%; overflow-y: auto"></div><div role="tabpanel" class="tab-pane active" name="descriptors" style="height: 100%; overflow-y: auto; padding-right: 5px"></div><div role="tabpanel" class="tab-pane" name="batches" style="height: 100%"></div><div role="tabpanel" class="tab-pane" name="classifications-entries" style="height: 100%"></div><div role="tabpanel" class="tab-pane" name="panels" style="height: 100%"></div><div role="tabpanel" class="tab-pane" name="comments" style="height: 100%"></div></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 352 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file accessionsynonyms.js
 * @brief Accession synonyms view
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-01-16
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);
let Dialog = __webpack_require__(5);

let View = Marionette.View.extend({
    tagName: 'div',
    className: 'accession-synonyms',
    template: __webpack_require__(353),

    ui: {
        "synonym_name": ".synonym-name",
        "synonym_language": ".synonym-languages",
        "accession_synonym_type": ".entity-synonym-types",
        "add_synonym": ".add-synonym",
        "remove_synonym": ".remove-synonym",
        "add_synonym_panel": "tr.add-synonym-panel",
        "rename_synonym": "td.rename-synonym"
    },

    events: {
        'input @ui.synonym_name': 'onSynonymNameInput',
        'click @ui.add_synonym': 'onAddSynonym',
        'click @ui.remove_synonym': 'onRemoveSynonym',
        'click @ui.rename_synonym': 'onRenameSynonym',
        'change @ui.accession_synonym_type': 'onChangeSynonymType',
        'change @ui.synonym_language': 'onChangeSynonymLanguage'
    },

    templateContext: function () {
        return {
            accession_code: window.application.main.collections.entitySynonymTypes.findWhere({name: "accession_code"}).get('id'),
            accession_name: window.application.main.collections.entitySynonymTypes.findWhere({name: "accession_name"}).get('id')
        };
    },

    initialize: function () {
        this.listenTo(this.model, 'change', this.render, this);
    },

    onRender: function () {
        window.application.main.views.entitySynonymTypes.drawSelect(
            this.ui.accession_synonym_type, true, false, null, {target_model: 'accession.accession'});

        window.application.main.views.languages.htmlFromValue(this.el);
        window.application.main.views.entitySynonymTypes.htmlFromValue(this.el);

        // disable non multiple synonym types
        for (let i = 0; i < this.model.get('synonyms').length; ++i) {
            let st = window.application.main.collections.entitySynonymTypes.get(this.model.get('synonyms')[i].synonym_type);
            if (!st.get('multiple_entry')) {
                let name = st.get('name');
                this.ui.accession_synonym_type.find('option[name=' + name + ']').prop('disabled', true);
            }
        }

        this.ui.accession_synonym_type.selectpicker('refresh');

        this.onChangeSynonymType();
    },

    onChangeSynonymType: function () {
        let synonymTypeId = parseInt(this.ui.accession_synonym_type.val());
        if (!isNaN(synonymTypeId)) {
            let synonymType = window.application.main.collections.entitySynonymTypes.get(synonymTypeId);

            // enable/disable and default language
            if (synonymType.get('has_language')) {
                window.application.main.views.languages.drawSelect(this.ui.synonym_language);
                this.ui.synonym_language.prop('disabled', false).val(window.session.language).selectpicker('refresh');
            } else {
                window.application.main.views.languages.drawSelect(this.ui.synonym_language, true, true);
                this.ui.synonym_language.prop('disabled', true).val('').selectpicker('refresh');
            }
        }

        this.ui.synonym_name.cleanField();
    },

    onChangeSynonymLanguage: function () {
        // force revalidation
        this.onSynonymNameInput();
    },

    validateName: function () {
        let v = this.ui.synonym_name.val().trim();

        if (v.length > 128) {
            $(this.ui.synonym_name).validateField('failed', _t('characters_max', {count: 128}));
            return false;
        } else if (v.length < 1) {
            $(this.ui.synonym_name).validateField('failed', _t('characters_min', {count: 1}));
            return false;
        }

        return true;
    },

    onSynonymNameInput: function () {
        if (this.validateName()) {
            let synonymTypeId = parseInt(this.ui.accession_synonym_type.val());
            let synonymType = window.application.main.collections.entitySynonymTypes.get(synonymTypeId);

            let self = this;
            let name = this.ui.synonym_name.val().trim();
            let language = this.ui.synonym_language.val();

            let filters = {
                fields: ["name", "synonym_type"],
                method: "ieq",
                name: name,
                synonym_type: synonymTypeId
            };

            if (synonymType.get('has_language')) {
                filters.fields.push('language');
                filters.language = language;
            }

            if (synonymType.get('unique') || synonymType.get('has_language')) {
                $.ajax({
                    type: "GET",
                    url: window.application.url(['accession', 'accession', 'synonym', 'search']),
                    dataType: 'json',
                    data: {filters: JSON.stringify(filters)},
                    cache: false
                }).done(function (data) {
                    if (data.items.length > 0) {
                        for (let i in data.items) {
                            let t = data.items[i];

                            // name must be unique
                            if (t.label.toUpperCase() === name.toUpperCase()) {
                                if (synonymType.get('has_language')) {
                                    self.ui.synonym_name.validateField(
                                        'failed', _t('This synonym exists with this language and type'));
                                } else {
                                    self.ui.synonym_name.validateField(
                                        'failed', _t('The synonym must be unique for this type'));
                                }

                                return;
                            }
                        }
                    }

                    // validate
                    self.ui.synonym_name.validateField('ok');
                });
            } else {
                // validate
                self.ui.synonym_name.validateField('ok');
            }
        }
    },

    onAddSynonym: function () {
        if (this.validateName() && !this.ui.synonym_name.hasClass('invalid')) {
            let synonymType = parseInt(this.ui.accession_synonym_type.val());
            let name = this.ui.synonym_name.val().trim();
            let language = this.ui.synonym_language.val();
            let self = this;

            $.ajax({
                type: "POST",
                url: this.model.url() + 'synonym/',
                contentType: "application/json; charset=utf-8",
                dataType: 'json',
                data: JSON.stringify({synonym_type: synonymType, name: name, language: language})
            }).done(function (data) {
                self.model.fetch({reset: true});
            });
        }
    },

    onRemoveSynonym: function (e) {
        let synonym = $(e.target.parentNode.parentNode);
        let synonymId = $(e.target).data('synonym-id');
        let self = this;

        $.ajax({
            type: "DELETE",
            url: this.model.url() + 'synonym/' + synonymId + '/',
            contentType: "application/json; charset=utf-8"
        }).done(function (data) {
            self.model.fetch({reset: true});
        });
    },

    onRenameSynonym: function (e) {
        let parentSelf = this;

        let ChangeSynonym = Dialog.extend({
            template: __webpack_require__(354),

            attributes: {
                id: "dlg_change_synonym"
            },

            ui: {
                synonym_name: "#accession_synonym_name"
            },

            events: {
                'input @ui.synonym_name': 'onNameInput'
            },

            initialize: function (options) {
                ChangeSynonym.__super__.initialize.apply(this, arguments);
            },

            onNameInput: function () {
                if (this.validateName()) {
                    let synonymTypeId = this.getOption('synonym_type');
                    let synonymType = window.application.main.collections.entitySynonymTypes.get(synonymTypeId);

                    let self = this;
                    let name = this.ui.synonym_name.val().trim();

                    let filters = {
                        fields: ["name", "synonym_type"],
                        method: "ieq",
                        name: name,
                        synonym_type: this.getOption('synonym_type')
                    };

                    if (synonymType.get('has_language')) {
                        filters.fields.push('language');
                        filters.language = this.getOption('language');
                    }

                    if (synonymType.get('unique') || synonymType.get('has_language')) {
                        $.ajax({
                            type: "GET",
                            url: window.application.url(['accession', 'accession', 'synonym', 'search']),
                            dataType: 'json',
                            data: {filters: JSON.stringify(filters)},
                            cache: false
                        }).done(function (data) {
                            if (data.items.length > 0) {
                                for (let i in data.items) {
                                    let t = data.items[i];

                                    if ((t.accession === self.model.get('id')) && (t.id === self.getOption('synonym_id'))) {
                                        // valid if same accession and same synonym
                                        self.ui.synonym_name.validateField('ok');
                                        return;
                                    } else if (t.label.toUpperCase() === name.toUpperCase()) {
                                        // name must be unique
                                        if (synonymType.get('has_language')) {
                                            self.ui.synonym_name.validateField(
                                                'failed', _t('This synonym exists with this language and type'));
                                        } else {
                                            self.ui.synonym_name.validateField(
                                                'failed', _t('The synonym must be unique for this type'));
                                        }

                                        return;
                                    }
                                }
                            }

                            self.ui.synonym_name.validateField('ok');
                        });
                    } else {
                        self.ui.synonym_name.validateField('ok');
                    }
                }
            },

            validateName: function () {
                let v = this.ui.synonym_name.val().trim();

                if (v.length < 1) {
                    $(this.ui.synonym_name).validateField('failed', _t('characters_min', {count: 1}));
                    return false;
                } else if (v.length > 128) {
                    $(this.ui.synonym_name).validateField('failed', _t('characters_max', {count: 128}));
                    return false;
                } else {
                    $(this.ui.synonym_name).validateField('ok');
                    return true;
                }
            },

            onApply: function () {
                let self = this;
                let synonym_id = this.getOption('synonym_id');
                let name = this.ui.synonym_name.val().trim();

                if (!this.ui.synonym_name.hasClass('invalid')) {
                    $.ajax({
                        type: "PUT",
                        url: this.model.url() + 'synonym/' + synonym_id + '/',
                        contentType: "application/json; charset=utf-8",
                        dataType: 'json',
                        data: JSON.stringify({name: name})
                    }).done(function () {
                        self.model.fetch({reset: true});
                    }).always(function () {
                        self.destroy();
                    });
                }
            }
        });

        let synonym = $(e.target.parentNode);
        let synonymId = $(e.target).data('synonym-id');

        let synonymType = parseInt(synonym.find("[name='synonym-type']").attr('value'));
        let name = synonym.find("[name='name']").text();
        let language = synonym.find("[name='language']").attr('value');

        let changeSynonym = new ChangeSynonym({
            model: this.model,
            synonym_id: synonymId,
            name: name,
            synonym_type: synonymType,
            language: language
        });

        changeSynonym.render();
        changeSynonym.ui.synonym_name.val(name);
    }
});

module.exports = View;


/***/ }),
/* 353 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
with (obj) {
__p += '<table class="table table-striped" style="margin-bottom: 0px"><thead><tr><th><span class="fa fa-bolt"></span></th><th>' +
__e( _t("Type") ) +
'</th><th>' +
__e( _t("Name") ) +
'</th><th>' +
__e( _t("Language") ) +
'</th></tr></thead><tbody> ';
 _.each(synonyms, function(synonym) { ;
__p += ' <tr class="element"><th scope="row"> ';
 if (synonym.synonym_type !== accession_code && synonym.synonym_type !== accession_name) { ;
__p += '<span data-synonym-id="' +
__e( synonym.id ) +
'" class="action remove-synonym fa fa-minus-circle"></span>';
 } ;
__p += ' </th><td name="synonym-type" class="entity-synonym-type" value="' +
__e( synonym.synonym_type ) +
'"></td><td name="name" class="action rename-synonym" data-synonym-id="' +
__e( synonym.id ) +
'">' +
__e( synonym.name ) +
'</td><td name="language" class="language" value="' +
__e( synonym.language ) +
'"></td></tr> ';
 }) ;
__p += ' <tr class="add-synonym-panel"><form><th scope="row"><span class="add-synonym action fa fa-plus-circle" style="margin-top: 9px"></span></th><td><select class="entity-synonym-types" name="entity-synonym-type"></select></td><td><div class="form-group" style="margin-bottom: 0px"><input class="form-control synonym-name" type="text" maxlength="64" autocomplete="off" name="synonym-name"></div></td><td><select class="synonym-languages" name="synonym-language"></select></td></form></tr></tbody></table>';

}
return __p
};

/*
original source:

<table class="table table-striped" style="margin-bottom: 0px"><thead><tr><th><span class="fa fa-bolt"></th><th><%- _t("Type") %></th><th><%- _t("Name") %></th><th><%- _t("Language") %></th></tr></thead><tbody> <% _.each(synonyms, function(synonym) { %> <tr class="element"><th scope="row"> <% if (synonym.synonym_type !== accession_code && synonym.synonym_type !== accession_name) { %><span data-synonym-id="<%- synonym.id %>" class="action remove-synonym fa fa-minus-circle"></span><% } %> </th><td name="synonym-type" class="entity-synonym-type" value="<%- synonym.synonym_type %>"></td><td name="name" class="action rename-synonym" data-synonym-id="<%- synonym.id %>"><%- synonym.name %></td><td name="language" class="language" value="<%- synonym.language %>"></td></tr> <% }) %> <tr class="add-synonym-panel"><form><th scope="row"><span class="add-synonym action fa fa-plus-circle" style="margin-top: 9px"></span></th><td><select class="entity-synonym-types" name="entity-synonym-type"></select></td><td><div class="form-group" style="margin-bottom: 0px"><input class="form-control synonym-name" type="text" maxlength="64" autocomplete="off" name="synonym-name"></div></td><td><select class="synonym-languages" name="synonym-language"></select></td></form></tr></tbody></table>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 354 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title">' +
__e( _t("Rename a synonym of accession") ) +
'</h4></div><div class="modal-body"><form><div class="form-group"><label class="control-label" for="accession_synonym_name">' +
__e( _t("Name") ) +
'</label><input class="form-control" id="accession_synonym_name" type="text" name="name" value="" maxlength="128" autofocus="" autocomplete="off" style="width:100%"></div></form></div><div class="modal-footer"><button type="button" class="btn btn-default cancel" data-dismiss="modal">' +
__e( _t("Cancel") ) +
'</button> <button type="button" class="btn btn-success apply">' +
__e( _t("Apply") ) +
'</button></div></div></div>';

}
return __p
};

/*
original source:

<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title"><%- _t("Rename a synonym of accession") %></h4></div><div class="modal-body"><form><div class="form-group"><label class="control-label" for="accession_synonym_name"><%- _t("Name") %></label><input class="form-control" id="accession_synonym_name" type="text" name="name" value="" maxlength="128" autofocus="" autocomplete="off" style="width:100%"></div></form></div><div class="modal-footer"><button type="button" class="btn btn-default cancel" data-dismiss="modal"><%- _t("Cancel") %></button> <button type="button" class="btn btn-success apply"><%- _t("Apply") %></button></div></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 355 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file accessionclassificationentry.js
 * @brief Accession classification entry collection
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-09-26
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let CountableCollection = __webpack_require__(9);
let ClassificationModel = __webpack_require__(44);

let Collection = CountableCollection.extend({
    url: function() {
        return window.application.url(['accession', 'accession', this.accession_id, 'classificationentry']);
    },
    model: ClassificationModel,

    initialize: function (models, options) {
        options || (options = {});

        Collection.__super__.initialize.apply(this, arguments);

        this.accession_id = (options.accession_id || null);
    }
});

module.exports = Collection;


/***/ }),
/* 356 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {/**
 * @file accessionclassificationetrylist.js
 * @brief Accession classification entry list view
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-09-26
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let AccessionClassificationEntryView = __webpack_require__(357);
let AdvancedTable = __webpack_require__(6);
let DescriptorsColumnsView = __webpack_require__(11);

let View = AdvancedTable.extend({
    template: __webpack_require__(16),
    className: "classification-entry-list advanced-table-container",
    childView: AccessionClassificationEntryView,
    childViewContainer: 'tbody.entity-list',

    userSettingName: function() {
        return 'accession_classificationentry_list_columns';
    },
    userSettingVersion: '1.0',

    defaultColumns: [
        {name: 'name', width: 'auto', sort_by: '+0'},
        {name: 'rank', width: 'auto', sort_by: null},
        {name: 'parent', width: 'auto', sort_by: null},
        // {name: 'synonym', width: 'auto', sort_by: null}
    ],

    columnsOptions: {
        'name': {label: _t('Name'), width: 'auto', minWidth: true, event: 'view-classification-entry-details'},
        'rank': {
            label: _t('Rank'),
            width: 'auto',
            minWidth: true,
            custom: 'rankCell',
            field: 'level'
        },
        'parent': {
            label: _t('Parent'),
            width: 'auto',
            minWidth: true,
            event: 'view-parent-details',
            custom: 'parentCell',
            field: 'name'
        },
        // 'synonym': {
        //     label: _t('Synonym'),
        //     width: 'auto',
        //     minWidth: true,
        //     custom: 'synonymCell',
        //     field: 'name'
        // }
    },

    templateContext: function () {
        return {
            columnsList: this.displayedColumns,
            columnsOptions: this.getOption('columns')
        }
    },

    childViewOptions: function () {
        return {
            columnsList: this.displayedColumns,
            columnsOptions: this.getOption('columns')
        }
    },

    initialize: function(options) {
        View.__super__.initialize.apply(this, arguments);

        // this.listenTo(this.collection, 'reset', this.render, this);
    },

    onShowTab: function () {
        View.__super__.onShowTab.apply(this);

        // query now to avoid useless queries
        this.query();
    }
});

// support of descriptors columns extension
_.extend(View.prototype, DescriptorsColumnsView);

module.exports = View;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 357 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file accessionclassificationentry.js
 * @brief Accession classification entry item view
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-09-26
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let ClassificationEntryView = __webpack_require__(70);

let View = ClassificationEntryView.extend({
    initialize: function () {
        View.__super__.initialize.apply(this, arguments);

        this.listenTo(this.model, 'change', this.render, this);
    },

    onRemoveClassificationEntry: function() {
        let self = this;

        $.ajax({
            type: "PATCH",
            url: this.model.collection.url(),
            contentType: "application/json; charset=utf-8",
            dataType: 'json',
            data: JSON.stringify({
                action: 'remove',
                target: 'classification_entry',
                classification_entry: this.model.get('id')
            })
        }).done(function(data) {
           $.alert.success(_t("Successfully removed !"));
           self.model.collection.fetch({reset: true});
        });
    },
});

module.exports = View;


/***/ }),
/* 358 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file accessionclassificationentryadd.js
 * @brief Add a classification entry to an accession.
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-09-26
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);

let View = Marionette.View.extend({
    tagName: 'div',
    className: 'classification-entry-add',
    template: __webpack_require__(359),

    ui: {
        add_btn: 'span.add-classification-entry',
        add_entity_group: 'div.classification-entry-group'
    },

    events: {
        'click @ui.add_btn': 'addClassificationEntry'
    },

    initialize: function(options) {
        options || (options = {});
        this.collection = options.collection;
    },

    onBeforeDestroy: function() {
        if (this.classificationEntryWidget) {
            this.classificationEntryWidget.destroy();
            delete this.classificationEntryWidget;
        }
    },

    onRender: function() {
        this.classificationEntryWidget = application.descriptor.widgets.newElement('entity');
        this.classificationEntryWidget.create(
            {model: 'classification.classificationentry'},
            this.ui.add_entity_group, {
                readOnly: false
            });
    },

    addClassificationEntry: function () {
        let self = this;

        let classificationEntryId = this.classificationEntryWidget.values();
        this.classificationEntryWidget.clear();

        $.ajax({
            type: "PATCH",
            url: this.collection.url(),
            contentType: "application/json; charset=utf-8",
            dataType: 'json',
            data: JSON.stringify({
                action: 'add',
                target: 'classification_entry',
                classification_entry: classificationEntryId
            })
        }).done(function(data) {
           $.alert.success(_t("Done"));
           self.collection.fetch({reset: true});
        });
    }
});

module.exports = View;


/***/ }),
/* 359 */
/***/ (function(module, exports) {

underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '';
with (obj) {
__p += '<table class="table table-striped" style="margin-bottom: 0px"><tbody><tr class="edit-mode"><th><span class="add-classification-entry action fa fa-plus-circle" style="margin-top: 9px; margin-left: 10px"></span></th><td style="width: 100%"><div class="form-group form-group-margin-sm classification-entry-group"></div></td></tr></tbody></table>';

}
return __p
};

/*
original source:

<table class="table table-striped" style="margin-bottom: 0px"><tbody><tr class="edit-mode"><th><span class="add-classification-entry action fa fa-plus-circle" style="margin-top: 9px; margin-left: 10px"></span></th><td style="width: 100%"><div class="form-group form-group-margin-sm classification-entry-group"></div></td></tr></tbody></table>
*/


/***/ }),
/* 360 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {/**
 * @file accessionpanellist.js
 * @brief
 * @author Medhi BOULNEMOUR (INRA UMR1095)
 * @date 2017-10-23
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let AccessionPanelView = __webpack_require__(361);
let AdvancedTable = __webpack_require__(6);
let DescriptorsColumnsView = __webpack_require__(11);

let View = AdvancedTable.extend({
    template: __webpack_require__(16),
    className: "panel-list advanced-table-container",
    childView: AccessionPanelView,
    childViewContainer: 'tbody.entity-list',
    userSettingName: 'accessionpanel_list_columns',
    userSettingVersion: '1.0',

    defaultColumns: [
        // {name: 'select', width: 'auto', sort_by: null},
        {name: 'name', width: 'auto', sort_by: '+0'}
    ],

    columnsOptions: {
        // 'select': {
        //     label: '',
        //     width: 'auto',
        //     type: 'checkbox',
        //     glyphicon: ['fa-square-o', 'fa-square-o'],
        //     event: 'panel-select',
        //     fixed: true
        // },
        'name': {label: _t('Name'), width: 'auto', minWidth: true, event: 'view-panel-details'}
    },

    templateContext: function () {
        return {
            columnsList: this.displayedColumns,
            columnsOptions: this.getOption('columns')
        }
    },

    childViewOptions: function () {
        return {
            columnsList: this.displayedColumns,
            columnsOptions: this.getOption('columns'),
            accessionId: this.model.id
        }
    },

    initialize: function (options) {
        View.__super__.initialize.apply(this, arguments);
    },

    onRender: function () {
        View.__super__.onRender.apply(this, arguments);
    },

    onLinkToPanel: function () {
        let selection = {
            "op": 'in',
            "term": 'id',
            "value": [this.model.id]
        };
        window.application.accession.controllers.accessionpanel.linkAccessions(
            selection, null, null, null, this.collection);
    },

    onShowTab: function () {
        let view = this;

        // query now to avoid useless queries
        this.query();

        let contextLayout = window.application.getView().getChildView('right');
        if (!contextLayout) {
            let DefaultLayout = __webpack_require__(3);
            contextLayout = new DefaultLayout();
            window.application.getView().showChildView('right', contextLayout);
        }

        let TitleView = __webpack_require__(4);
        contextLayout.showChildView('title', new TitleView({
            title: _t("Panel actions"),
            glyphicon: 'fa-wrench'
        }));

        let actions = [
            'link-to-panel'
        ];

        let PanelAccessionListContextView = __webpack_require__(46);
        let contextView = new PanelAccessionListContextView({actions: actions});
        contextLayout.showChildView('content', contextView);

        contextView.on("panel:link-accessions", function () {
            view.onLinkToPanel();
        });

        View.__super__.onShowTab.apply(this, arguments);
    }
});

// support of descriptors columns extension
_.extend(View.prototype, DescriptorsColumnsView);

module.exports = View;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 361 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file accessionpanel.js
 * @brief
 * @author Medhi BOULNEMOUR (INRA UMR1095)
 * @date 2017-10-23
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);

let View = Marionette.View.extend({
    tagName: 'tr',
    className: 'object accessionpanel element',
    attributes: function () {
        return {
            'scope': 'row',
            'element-id': this.model.get('id')
        }
    },
    template: __webpack_require__(12),

    templateContext: function () {
        return {
            columnsList: this.getOption('columnsList'),
            columnsOptions: this.getOption('columnsOptions')
        }
    },

    ui: {
        details: 'td.view-panel-details'
    },

    events: {
        'click @ui.details': 'viewDetails'
    },

    behaviors: {
        ActionBtnEvents: {
            behaviorClass: __webpack_require__(8),
            actions: {
                tag: {title: _t('Rename'), display: true, event: 'onRename'},
                edit: {display: false},
                manage: {display: true, event: 'viewDetails'},
                remove: {display: true, event: 'onDeletePanel'},
                unlink: {display: true, event: 'onUnlinkPanel'}
            }
        }
    },

    initialize: function () {
        this.listenTo(this.model, 'change', this.render, this);
    },

    actionsProperties: function () {
        let properties = {
            manage: {disabled: false},
            remove: {disabled: false}
        };

        // @todo manage permissions

        if (/*!this.model.get('can_delete') ||*/0) {
            properties.remove.disabled = true;
        }

        return properties;
    },

    onRender: function () {
    },

    viewDetails: function () {
        Backbone.history.navigate('app/accession/accessionpanel/' + this.model.get('id') + '/', {trigger: true});
    },

    onRename: function () {
        if (!window.application.permission.manager.isStaff()) {
            return false;
        }

        let ChangeName = __webpack_require__(20);
        let changeName = new ChangeName({
            model: this.model,
            title: _t("Rename the accession panel")
        });

        changeName.render();
        changeName.ui.name.val(this.model.get('name'));

        return false;
    },

    onDeletePanel: function () {
        window.application.accession.controllers.accessionpanel.destroy(this.model);
    },

    onUnlinkPanel: function () {
        let view = this;
        $.ajax({
            type: 'PATCH',
            url: window.application.url(['accession', 'accessionpanel', view.model.id, 'accessions']),
            dataType: 'json',
            contentType: "application/json; charset=utf-8",
            data: JSON.stringify({
                'action': 'remove',
                'selection': {
                    'select': {
                        "op": 'in',
                        "term": 'id',
                        "value": [view.getOption('accessionId')]
                    }
                }
            })
        }).done(function () {
            view.model.collection.count();
            view.model.collection.remove(view.model);
        });
    }
});

module.exports = View;


/***/ }),
/* 362 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title">' +
__e( _t("Rename") ) +
'</h4></div><div class="modal-body"><form><div class="form-group"><label class="control-label">' +
__e( _t("Name") ) +
'</label><input class="form-control entity-name" type="text" name="name" value="" maxlength="' +
__e( maxlength ) +
'" autofocus="" autocomplete="off" style="width:100%"></div></form></div><div class="modal-footer"><button type="button" class="btn btn-default cancel" data-dismiss="modal">' +
__e( _t("Cancel") ) +
'</button> <button type="button" class="btn btn-success apply">' +
__e( _t("Apply") ) +
'</button></div></div></div>';

}
return __p
};

/*
original source:

<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title"><%- _t("Rename") %></h4></div><div class="modal-body"><form><div class="form-group"><label class="control-label"><%- _t("Name") %></label><input class="form-control entity-name" type="text" name="name" value="" maxlength="<%- maxlength %>" autofocus="" autocomplete="off" style="width:100%"></div></form></div><div class="modal-footer"><button type="button" class="btn btn-default cancel" data-dismiss="modal"><%- _t("Cancel") %></button> <button type="button" class="btn btn-success apply"><%- _t("Apply") %></button></div></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 363 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file comment.js
 * @brief Comment item view
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2018-06-26
 * @copyright Copyright (c) 2018 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);

let View = Marionette.View.extend({
    tagName: 'tr',
    className: 'element object comment',
    template: __webpack_require__(12),
    attributes: function() {
        return {
            'scope': 'row',
            'element-id': this.model.get('id')
        }
    },
    templateContext: function () {
        return {
            columnsList: this.getOption('columnsList'),
            columnsOptions: this.getOption('columnsOptions')
        }
    },

    ui: {
         edit_btn: 'td.action.modify-comment'
    },

    events: {
         'click @ui.edit_btn': 'editComment'
    },

    behaviors: {
        ActionBtnEvents: {
            behaviorClass: __webpack_require__(8),
            actions: {
                edit: {display: true, event: 'editComment'},
                remove: {display: true, event: 'deleteComment'},
                history: {display: true, event: 'showHistory'}
            }
        }
    },

    initialize: function(options) {
        View.__super__.initialize.apply(this, arguments);
        this.listenTo(this.model, 'change', this.render, this);
    },

    onRender: function() {
    },

    actionsProperties: function() {
        let properties = {
            edit: {disabled: false},
            remove: {disabled: false}
        };

        // @todo check user permissions

        return properties;
    },

    editComment: function() {
        let CommentEdit = __webpack_require__(364);
        let changeLabel = new CommentEdit({
            model: this.model,
            title: _t("Change the comment value")
        });

        changeLabel.render();
        return false;

    },

    deleteComment: function () {
        this.model.destroy({wait: true});
    },

    showHistory: function () {
        let self = this
        let CommentHistoryDialog = __webpack_require__(366);
        let tokens = this.model.url().split('/');

        let appLabel = tokens[tokens.length - 6];
        let modelName = tokens[tokens.length - 5];
        let objectId = tokens[tokens.length - 4];
        let comId = '"' + this.model.get('id');

        // query history of the comment id
        $.ajax({
            url: window.application.url(['audit', 'search', 'history', 'value']),
            dataType: 'json',
            data: {
                app_label: appLabel,
                model: modelName,
                object_id: objectId,
                value: comId
            }
        }).done(function (data) {
            let dialog = new CommentHistoryDialog({
                entries: data.items,
                readOnly: this.readOnly,
                comment: self.model
            });

            dialog.render();
        });
    }
});

module.exports = View;


/***/ }),
/* 364 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file commentedit.js
 * @brief Describable entity comments edit dialog
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2018-07-02
 * @copyright Copyright (c) 2018 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Dialog = __webpack_require__(5);


let CommentEditDialog = Dialog.extend({
    template: __webpack_require__(365),

    attributes: {
        id: "dlg_edit_comment",
    },

    ui: {
        value: "input[name=comment-value]"
    },

    initialize: function (options) {
        CommentEditDialog.__super__.initialize.apply(this, arguments);

        this.entity = options.entity;
        this.collection = options.collection;
    },

    onRender: function () {
        CommentEditDialog.__super__.onRender.apply(this);
    },

    onApply: function () {
        let self = this;
        let model = this.getOption('model');
        let value = this.ui.value.val().trim();

        model.save({
                label: model.get('label'),
                value: value
            }, {
            patch: true,
                wait: true,
                success: function () {
                    self.destroy();
                    $.alert.success(_t("Successfully updated !"));
                },
                error: function () {
                    $.alert.error(_t("Unable to modify the comment !"));
            }
        });
    }
});

module.exports = CommentEditDialog;


/***/ }),
/* 365 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title">' +
__e( _t("Change comment value") ) +
'</h4></div><div class="modal-body"><form><div class="row"><div class="col-xs-12"><div class="form-group"><label class="control-label">' +
__e( _t("Value") ) +
'</label><input class="form-control" name="comment-value" type="text" value="' +
__e( value ) +
'" maxlength="1024" autocomplete="off" autofocus="" style="width:100%"></div></div></div></form></div><div class="modal-footer"><button type="button" class="btn btn-default cancel" data-dismiss="modal">' +
__e( _t("Cancel") ) +
'</button> <button type="button" class="btn btn-success apply">' +
__e( _t("Apply") ) +
'</button></div></div></div>';

}
return __p
};

/*
original source:

<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title"><%- _t("Change comment value") %></h4></div><div class="modal-body"><form><div class="row"><div class="col-xs-12"><div class="form-group"><label class="control-label"><%- _t("Value") %></label><input class="form-control" name="comment-value" type="text" value="<%- value %>" maxlength="1024" autocomplete="off" autofocus="" style="width:100%"></div></div></div></form></div><div class="modal-footer"><button type="button" class="btn btn-default cancel" data-dismiss="modal"><%- _t("Cancel") %></button> <button type="button" class="btn btn-success apply"><%- _t("Apply") %></button></div></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 366 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file commenthistory.js
 * @brief Dialog that display a list of value from an history of describable entity
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2018-07-03
 * @copyright Copyright (c) 2018 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Dialog = __webpack_require__(5);

let View = Dialog.extend({
    template: __webpack_require__(367),

    templateContext: function () {
        return {
            title: this.title,
            comment: this.comment,
            values: this.entries
        };
    },

    attributes: {
        id: "dlg_describable_show_comment_history"
    },

    initialize: function (options) {
        options || (options = {});

        View.__super__.initialize.apply(this, arguments);

        this.comment = options.comment;
        this.entries = options.entries;

        this.readOnly = options.readOnly;
    },

    onRender: function () {
        View.__super__.onRender.apply(this);

        $("ul.comment-value-history li").css({
            "list-style-type": "none"
        });

        let self = this;

        // setup selector for each value
        let elts = $("li.comment-value span.history-value");

        $.each(elts, function (i, elt) {
            if (!self.readOnly) {
                let value = $(elt).find('input').val().trim();

                $(elt).addClass('element').css('cursor', 'pointer').on('click', function (e) {
                    self.comment.save({'label': self.comment.get('label'), 'value': value}, {patch: true});
                    self.destroy();
                });
            }
        });
    }
});

module.exports = View;


/***/ }),
/* 367 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
with (obj) {
__p += '<div class="modal-dialog modal-lg"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title">' +
__e( _t("History of {{label}}", {label: comment.get('label')}) ) +
'</h4></div><div class="modal-body"><div style="overflow-y: auto"><ul class="comment-value-history"> ';
 _.each(values, function(value) { ;
__p += ' ';
 let date = moment(value.timestamp); ;
__p += ' ';
 let ldate = date.format($.datepicker._defaults.dateFormat.toUpperCase() + ' HH:mm:ss'); ;
__p += ' <li class="comment-value" value-history="" format-type="string"><span class="history-details"><h4><span class="label label-info label-large history-date text-selection-all">' +
__e( ldate ) +
'</span><span class="label label-success label-large history-username text-selection-all">' +
__e( value.username ) +
'</span></h4></span><span class="history-value"><div class="input-group"><input class="form-control" value="' +
__e( value.value.value ) +
'" readonly="" style="height: 24px;padding-top: 3px;padding-bottom: 3px"> <span class="input-group-addon" style="padding-top: 3px;padding-bottom: 3px"><span class="fa fa-font"></span></span></div></span></li> ';
 }); ;
__p += ' </ul></div></div></div></div>';

}
return __p
};

/*
original source:

<div class="modal-dialog modal-lg"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title"><%- _t("History of {{label}}", {label: comment.get('label')}) %></h4></div><div class="modal-body"><div style="overflow-y: auto"><ul class="comment-value-history"> <% _.each(values, function(value) { %> <% let date = moment(value.timestamp); %> <% let ldate = date.format($.datepicker._defaults.dateFormat.toUpperCase() + ' HH:mm:ss'); %> <li class="comment-value" value-history="" format-type="string"><span class="history-details"><h4><span class="label label-info label-large history-date text-selection-all"><%- ldate %></span><span class="label label-success label-large history-username text-selection-all"><%- value.username %></span></h4></span><span class="history-value"><div class="input-group"><input class="form-control" value="<%- value.value.value %>" readonly="" style="height: 24px;padding-top: 3px;padding-bottom: 3px"> <span class="input-group-addon" style="padding-top: 3px;padding-bottom: 3px"><span class="fa fa-font"></span></span></div></span></li> <% }); %> </ul></div></div></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 368 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file commentlist.js
 * @brief Describable entity comments creation
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2018-06-28
 * @copyright Copyright (c) 2018 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Dialog = __webpack_require__(5);


let CommentCreateDialog = Dialog.extend({
    template: __webpack_require__(369),

    attributes: {
        id: "dlg_create_comment",
    },

    ui: {
        label: "input[name=comment-label]",
        value: "input[name=comment-value]"
    },

    events: {
        'input @ui.label': 'onLabelInput',
    },

    initialize: function (options) {
        CommentCreateDialog.__super__.initialize.apply(this, arguments);

        this.entity = options.entity;
        this.collection = options.collection;
    },

    onRender: function () {
        CommentCreateDialog.__super__.onRender.apply(this);
    },

    onApply: function () {
        if (!this.validateLabel()) {
            return;
        }

        let self = this;
        let label = this.ui.label.val().trim();
        let value = this.ui.value.val().trim();

        this.collection.create({
                label: label,
                value: value
            }, {
                wait: true,
                success: function () {
                    self.destroy();
                    $.alert.success(_t("Successfully added !"));
                },
                error: function () {
                    $.alert.error(_t("Unable to create the comment !"));
            }
        });
    },

    validateLabel: function () {
        let v = this.ui.label.val();

        if (v.length < 3) {
            $(this.ui.label).validateField('failed', _t('characters_min', {count: 3}));
            return false;
        }

        return true;
    },

    onLabelInput: function () {
        if (this.validateLabel()) {
            $(this.ui.label).validateField('ok');
        }
    }
});

module.exports = CommentCreateDialog;


/***/ }),
/* 369 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title">' +
__e( _t("Add a comment") ) +
'</h4></div><div class="modal-body"><form><div class="row"><div class="col-xs-12"><div class="form-group"><label class="control-label">' +
__e( _t("Label") ) +
'</label><input class="form-control" name="comment-label" type="text" value="" maxlength="128" autocomplete="off" autofocus="" style="width:100%"></div></div></div><div class="row"><div class="col-xs-12"><div class="form-group"><label class="control-label">' +
__e( _t("Value") ) +
'</label><input class="form-control" name="comment-value" type="text" value="" maxlength="1024" autocomplete="off" style="width:100%"></div></div></div></form></div><div class="modal-footer"><button type="button" class="btn btn-default cancel" data-dismiss="modal">' +
__e( _t("Cancel") ) +
'</button> <button type="button" class="btn btn-success apply">' +
__e( _t("Create") ) +
'</button></div></div></div>';

}
return __p
};

/*
original source:

<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title"><%- _t("Add a comment") %></h4></div><div class="modal-body"><form><div class="row"><div class="col-xs-12"><div class="form-group"><label class="control-label"><%- _t("Label") %></label><input class="form-control" name="comment-label" type="text" value="" maxlength="128" autocomplete="off" autofocus="" style="width:100%"></div></div></div><div class="row"><div class="col-xs-12"><div class="form-group"><label class="control-label"><%- _t("Value") %></label><input class="form-control" name="comment-value" type="text" value="" maxlength="1024" autocomplete="off" style="width:100%"></div></div></div></form></div><div class="modal-footer"><button type="button" class="btn btn-default cancel" data-dismiss="modal"><%- _t("Cancel") %></button> <button type="button" class="btn btn-success apply"><%- _t("Create") %></button></div></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 370 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file commentlistcontext.js
 * @brief  Describable entity comment list context menu
 * @author Frederic SCHERMA (INRA UMR1095)
 * @date 2018-06-26
 * @copyright Copyright (c) 2018 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);

let View = Marionette.View.extend({
    tagName: 'div',
    template: __webpack_require__(15),
    className: "context comment-list",
    templateContext: function () {
        return {
            actions: this.getOption('actions'),
            options: {
                'add': {className: 'btn-default', label: _t('Add')},
            }
        }
    },

    ui: {
        'add': 'button[name="add"]'
    },

    triggers: {
        "click @ui.add": "comment:add"
    },

    initialize: function(options) {
        options || (options = {actions: []});
    }
});

module.exports = View;


/***/ }),
/* 371 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {/**
 * @file comment.js
 * @brief comment model
 * @author Frederic SCHERMA (INRA UMR1095)
 * @date 2018-06-26
 * @copyright Copyright (c) 2018 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Backbone = __webpack_require__(7);

let Model = Backbone.Model.extend({
    url: function () {
        if (this.isNew()) {
            return (_.isFunction(this.collection.entity.url) ? this.collection.entity.url() : this.collection.entity.url) + 'comment/';
        } else {
            return (_.isFunction(this.collection.entity.url) ? this.collection.entity.url() : this.collection.entity.url) + 'comment/' + this.get('id') + '/';
        }
    },

    defaults: {
        id: null,
        label: '',
        value: ''
    },

    parse: function (data) {
        //this.perms = data.perms;
        return data;
    },

    validate: function (attrs) {
        let errors = {};
        let hasError = false;

        if (hasError) {
            return errors;
        }
    },
});

module.exports = Model;


/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 372 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file searchconditionlist.js
 * @brief
 * @author Medhi BOULNEMOUR (INRA UMR1095)
 * @date 2017-07-04
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);
let ConditionView = __webpack_require__(373);

let View = Marionette.CollectionView.extend({
    tagName: "condition-list",
    childView: ConditionView,
    childViewOptions: function () {
        return {parent: this}
    },

    validParenthesis: function () {
        let $error_msg = this.$el.parents('.modal-content').find('#error-msg');
        let $search_btn = this.$el.parents('.modal-content').find('button.search');
        let $save_btn = this.$el.parents('.modal-content').find('button.save');

        $error_msg.hide();

        let l_stack = [];
        let r_stack = [];
        let l_invalid_depth = [];
        let r_invalid_depth = [];
        let depth = 0;

        this.children.each(function (view) {
            view.ui.right_parenthesis.css('color', 'black').prop('title', '');
            view.ui.left_parenthesis.css('color', 'black').prop('title', '');

            for (let i=0; i < view.open_group; i++ ) {
                l_stack.push(view);
                depth++;
                if (depth >= 3) {
                    l_invalid_depth.push(view);
                }
            }

            for (let i=0; i < view.close_group; i++ ) {
                if (l_stack.length === 0) {
                    r_stack.push(view);
                    return false;
                } else {
                    l_stack.pop()
                }
                if (depth >= 3) {
                    r_invalid_depth.push(view);
                }
                depth--;
            }
        });

        if (l_invalid_depth.length !== 0 || r_invalid_depth.length !== 0) {
            $error_msg.html('<span class="fa fa-times"></span> ' + _t('maximum depth of sub conditions groups si 3'));
            $error_msg.show();
            if (l_invalid_depth.length !== 0) {
                $.each(l_invalid_depth, function (view_index) {
                    l_invalid_depth[view_index].ui.left_parenthesis.css('color', 'red').prop('title', _t('condition depth too high'));
                });
            }
            if (r_invalid_depth.length !== 0) {
                $.each(r_invalid_depth, function (view_index) {
                    r_invalid_depth[view_index].ui.right_parenthesis.css('color', 'red').prop('title', _t('condition depth too high'));
                });
            }
            $search_btn.prop('disabled', true);
            $save_btn.prop('disabled', true);
            return false;
        }

        if (l_stack.length === 0) {
            if (r_stack.length === 0) {
                $search_btn.prop('disabled', false);
                $save_btn.prop('disabled', false);
                return true
            } else {
                r_stack[r_stack.length - 1].ui.right_parenthesis.css('color', 'red').prop('title', _t('Condition group must be closed'));
                $error_msg.html('<span class="fa fa-times"></span> ' + _t('invalid conditions groups'));
                $error_msg.show();
                $search_btn.prop('disabled', true);
                $save_btn.prop('disabled', true);
                return false;
            }
        } else {
            l_stack[l_stack.length - 1].ui.left_parenthesis.css('color', 'red').prop('title', _t('Condition group must be closed'));
            $error_msg.html('<span class="fa fa-times"></span> ' + _t('invalid conditions groups'));
            $error_msg.show();
            $search_btn.prop('disabled', true);
            $save_btn.prop('disabled', true);
            return false;
        }
    }
});

module.exports = View;

/***/ }),
/* 373 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file searchcondition.js
 * @brief
 * @author Medhi BOULNEMOUR (INRA UMR1095)
 * @date 2017-06-30
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);

let View = Marionette.View.extend({
    tagName: 'div',
    className: 'condition',
    template: __webpack_require__(374),
    templateContext: function () {
        return {first_element: this.first_element}
    },

    ui: {
        remove: 'span.action.remove',
        field: 'div.field select',
        condition: 'div.condition select',
        field_value: '.input-group input',
        field_value_group: 'div.field_value div.form-group',
        row_operator: 'div.operator select',
        left_parenthesis: 'span.action.parenthesis.parenthesis-left',
        right_parenthesis: 'span.action.parenthesis.parenthesis-right'
    },

    events: {
        'click @ui.remove': 'onRemove',
        'change @ui.condition': 'onConditionChange',
        'change @ui.field': 'onChangeField',
        'change @ui.field_value': 'onUIChange',
        'change @ui.row_operator': 'onUIChange',
        'click @ui.left_parenthesis': 'onOpenGroup',
        'click @ui.right_parenthesis': 'onCloseGroup'
    },

    initialize: function (options) {
        this.parent = options.parent;
        this.columns = {};
        this.first_element = (this.model.collection.models[0] === this.model);
        this.open_group = 0;
        this.close_group = 0;
    },

    onRender: function () {
        let operator = this.$el.find('div.search-condition').find('div.operator').children('div').children('select');
        operator.append('<option value="and">' + _t('AND') + '</option>');
        operator.append('<option value="or">' + _t('OR') + '</option>');
        operator.selectpicker({}).selectpicker('val', 'and');

        if (this.first_element) {
            this.$el.find('div.search-condition').find('div.operator').parent().hide();
        } else {
            operator.selectpicker({}).selectpicker('val', this.model.get('operator'));
        }

        this.ui.condition.selectpicker({container: '.modal'});
        this.ui.field.selectpicker({
            liveSearch: true,
            container: '.modal'
        });

        this.ui.field.val(this.model.get('field'));
        this.ui.condition.val(this.model.get('condition'));
        this.ui.field_value.val(this.model.get('field_value'));
    },

    onConditionChange: function () {
        let field = this.ui.field.val();
        let column = this.columns[field];

        if (this.widget.allow_multiple) {
            this.widget.destroy();

            if ([
                    'in',
                    'notin',
                    'contains',
                    'not_contains',
                    'contained_by',
                    'not_contained_by',
                    'overlap',
                    'not_overlap'
                ].includes(this.ui.condition.val())) {
                this.widget.create(column.format, this.ui.field_value_group, {
                    readOnly: false,
                    descriptorId: column.id,
                    multiple: true,
                    extended_search: false
                });
            } else {
                this.widget.create(column.format, this.ui.field_value_group, {
                    readOnly: false,
                    descriptorId: column.id,
                    multiple: false,
                    extended_search: false
                });
            }
        } else {
            if ([
                    'in',
                    'notin',
                    'contains',
                    'not_contains',
                    'contained_by',
                    'not_contained_by',
                    'overlap',
                    'not_overlap'
                ].includes(this.ui.condition.val())) {
                this.ui.field_value_group.find('select').prop('multiple', true).selectpicker('destroy').selectpicker({container: '.modal'});
            } else {
                this.ui.field_value_group.find('select').prop('multiple', false).selectpicker('destroy').selectpicker({container: '.modal'});
            }
        }
        this.onUIChange();
    },

    onUIChange: function () {
        if (this.ui.condition.val() === 'isnull' || this.ui.condition.val() === 'notnull') {
            this.ui.field_value_group.hide();
        } else {
            this.ui.field_value_group.show();
        }

        let value = null;
        let operator = null;

        if (this.widget) {
            value = this.widget.values();
        } else {
            value = this.$el.find('.input-group input').val();
        }
        if (!this.first_element) {
            operator = this.ui.row_operator.val()
        }
        this.model.set({
            row_operator: operator,
            field: this.ui.field.val(),
            condition: this.ui.condition.val(),
            field_value: value,
            open_group: this.open_group,
            close_group: this.close_group
        });
    },

    onOpenGroup: function () {
        switch (this.open_group) {
            case 0:
                this.open_group = 1;
                this.ui.left_parenthesis.addClass('activated');
                this.ui.left_parenthesis.html('[');
                break;

            case 1:
                this.open_group = 2;
                this.ui.left_parenthesis.addClass('activated');
                this.ui.left_parenthesis.html('[[');
                break;

            case 2:
                this.open_group = 0;
                this.ui.left_parenthesis.removeClass('activated');
                this.ui.left_parenthesis.html('[');
                break;
        }
        this.parent.validParenthesis();
    },

    onCloseGroup: function () {
        switch (this.close_group) {
            case 0:
                this.close_group = 1;
                this.ui.right_parenthesis.addClass('activated');
                this.ui.right_parenthesis.html(']');
                break;

            case 1:
                this.close_group = 2;
                this.ui.right_parenthesis.addClass('activated');
                this.ui.right_parenthesis.html(']]');
                break;

            case 2:
                this.close_group = 0;
                this.ui.right_parenthesis.removeClass('activated');
                this.ui.right_parenthesis.html(']');
                break;
        }
        this.parent.validParenthesis();
    },

    onChangeField: function () {
        let field = this.ui.field.val();
        let column = this.columns[field];

        if (!column) {
            return;
        }

        if (this.widget) {
            this.widget.destroy();
            this.widget = null;
        }

        this.ui.field_value.cleanField();
        this.ui.field_value.empty();

        if (column.format) {
            this.widget = application.descriptor.widgets.newElement(column.format.type);
            if (this.widget) {
                this.widget.create(column.format, this.ui.field_value_group, {
                    readOnly: false,
                    descriptorId: column.id,
                    extended_search: false
                });
            }
        } else {
            let input = $('<input type="text" class="search-value form-control" name="search-value"/>');
            this.ui.field_value_group.append(input);
        }

        this.ui.condition.children('option').remove();

        let operators_labels = {
            'isnull': _t('Undefined'),
            'notnull': _t('Defined'),
            'eq': _t('Exact'),
            'neq': _t('Different from'),
            'in': _t('Include'),
            'notin': _t('Not include'),
            'icontains': _t('Contains'),
            'lte': _t('Lesser than'),
            'gte': _t('Greater than'),
            'contains': _t('belong to (intersection)'),
            'not_contains': _t('Not belong to (intersection)'),
            'overlap': _t('Belong to (union)'),
            'not_overlap': _t('Not belong to (union)'),
            'contained_by': _t('Contained by'),
            'not_contained_by': _t('Not contained by')
        };

        for (let i = 0; i < column.available_operators.length; i++) {
            let operator_code = column.available_operators[i];
            this.ui.condition.append('<option value="' + operator_code + '">' + operators_labels[operator_code] + '</option>');
        }

        this.ui.condition.selectpicker('refresh');
        if (column.available_operators.includes('eq')) {
            this.ui.condition.selectpicker({container: '.modal'}).selectpicker('val', 'eq');
        } else {
            this.ui.condition.selectpicker({container: '.modal'}).selectpicker('val', column.available_operators[0]);
        }

        this.onConditionChange();
    },

    onRemove: function () {
        if (this.first_element) {
            let new_first_model = this.parent.collection.models[1];
            let new_first_view = this.parent.children.findByModel(new_first_model);

            new_first_view.ui.row_operator.selectpicker('val', 'and');

            new_first_model.set('row_operator', null);
            new_first_view.first_element = true;

            new_first_view.onUIChange();
            new_first_view.$el.find('div.operator').parent().hide();
        }
        this.model.collection.remove(this.model.cid);
        this.parent.validParenthesis();
    },

    onBeforeDetach: function () {
        if (this.widget) {
            this.widget.destroy();
            this.widget = null;
        }
    }
});

module.exports = View;


/***/ }),
/* 374 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div class="search-condition"><div class="row"><div class="row"><div class="col-xs-2 operator"><div class="form-group"><select class="form-control"></select></div></div></div><div class="row"><span class="action remove fa fa-minus-circle fa-lg pull-left" style="margin: 30px 15px" title="' +
__e(
                  _t("Remove this condition") ) +
'"></span> <span class="action parenthesis parenthesis-left pull-left">[</span><div class="col-xs-4 field"><div class="form-group"><label class="control-label">' +
__e( _t("Field or Descriptor") ) +
'</label><select class="form-control"></select></div></div><div class="col-xs-2 condition"><div class="form-group"><label class="control-label">' +
__e( _t("Condition") ) +
'</label><select class="form-control"></select></div></div><div class="col-xs-4 field_value"><div class="form-group"><label class="control-label">' +
__e( _t("Value") ) +
'</label></div></div><span class="action parenthesis parenthesis-right pull-left">]</span></div></div></div>';

}
return __p
};

/*
original source:

<div class="search-condition"><div class="row"><div class="row"><div class="col-xs-2 operator"><div class="form-group"><select class="form-control"></select></div></div></div><div class="row"><span class="action remove fa fa-minus-circle fa-lg pull-left" style="margin: 30px 15px" title="<%-
                  _t("Remove this condition") %>"></span> <span class="action parenthesis parenthesis-left pull-left">[</span><div class="col-xs-4 field"><div class="form-group"><label class="control-label"><%- _t("Field or Descriptor") %></label><select class="form-control"></select></div></div><div class="col-xs-2 condition"><div class="form-group"><label class="control-label"><%- _t("Condition") %></label><select class="form-control"></select></div></div><div class="col-xs-4 field_value"><div class="form-group"><label class="control-label"><%- _t("Value") %></label></div></div><span class="action parenthesis parenthesis-right pull-left">]</span></div></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 375 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
with (obj) {
__p += '<div class="modal-dialog modal-lg"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title"><span class="fa fa-search fa-lg"></span> ' +
__e( _t("Advanced search")
                ) +
'</h4></div><div class="modal-body"><form><div class="row"><div class="col-md-6"><div class="form-group"><label class="control-label" for="entity_type">' +
__e( _t("Entity") ) +
'</label><select id="entity_type" class="form-control"> ';
 _.each(entity_types, function(entity_type) { ;
__p += ' <option value="' +
__e( entity_type.id ) +
'">' +
__e( entity_type.label ) +
'</option> ';
 }) ;
__p += ' </select></div></div><div class="col-md-6"><div class="form-group"><label class="control-label" for="layout">' +
__e( _t("Descriptors model") ) +
'</label><select id="layout" class="form-control" multiple="multiple"> ';
 _.each(layouts, function(layout) { ;
__p += ' <option value="' +
__e( layout.id ) +
'">' +
__e( layout.label ) +
'</option> ';
 }) ;
__p += ' </select></div></div></div><div class="panel panel-default"><div id="conditions_part" class="panel-body" style="overflow-y: scroll; max-height:500px; padding-left: 30px"></div><div class="panel-footer"><span class="action add fa fa-plus-circle fa-lg" title="' +
__e( _t("Add a condition")
                        ) +
'"></span></div></div><span id="error-msg" class="text-danger" hidden></span></form></div><div class="modal-footer"><button type="button" class="btn btn-default save pull-left">' +
__e( _t("Save") ) +
'</button> <button type="button" class="btn btn-default cancel" data-dismiss="modal">' +
__e( _t("Cancel") ) +
' </button> <button type="button" class="btn btn-success search">' +
__e( _t("Search") ) +
'</button></div></div></div>';

}
return __p
};

/*
original source:

<div class="modal-dialog modal-lg"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title"><span class="fa fa-search fa-lg"></span> <%- _t("Advanced search")
                %></h4></div><div class="modal-body"><form><div class="row"><div class="col-md-6"><div class="form-group"><label class="control-label" for="entity_type"><%- _t("Entity") %></label><select id="entity_type" class="form-control"> <% _.each(entity_types, function(entity_type) { %> <option value="<%- entity_type.id %>"><%- entity_type.label %></option> <% }) %> </select></div></div><div class="col-md-6"><div class="form-group"><label class="control-label" for="layout"><%- _t("Descriptors model") %></label><select id="layout" class="form-control" multiple="multiple"> <% _.each(layouts, function(layout) { %> <option value="<%- layout.id %>"><%- layout.label %></option> <% }) %> </select></div></div></div><div class="panel panel-default"><div id="conditions_part" class="panel-body" style="overflow-y: scroll; max-height:500px; padding-left: 30px"></div><div class="panel-footer"><span class="action add fa fa-plus-circle fa-lg" title="<%- _t("Add a condition")
                        %>"></span></div></div><span id="error-msg" class="text-danger" hidden></span></form></div><div class="modal-footer"><button type="button" class="btn btn-default save pull-left"><%- _t("Save") %></button> <button type="button" class="btn btn-default cancel" data-dismiss="modal"><%- _t("Cancel") %> </button> <button type="button" class="btn btn-success search"><%- _t("Search") %></button></div></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 376 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
with (obj) {
__p += '<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title">' +
__e( _t("Create an accession") ) +
'</h4></div><div class="modal-body"><form><div class="form-group"><label class="control-label" for="layout">' +
__e( _t("Template") ) +
'</label><select id="layout" style="width:100%" class="form-control"> ';
 _.each(layouts, function(layout) { ;
__p += ' <option value="' +
__e( layout.id ) +
'">' +
__e( layout.label ) +
'</option> ';
 }) ;
__p += ' </select></div><div class="row"><div class="naming-options col-xs-12"></div><div class="col-xs-8"><div class="form-group"><label class="control-label" for="accession_name">' +
__e( _t("Principal name of the accession") ) +
'</label><input class="form-control name" id="accession_name" type="text" name="accession" value="" maxlength="128" autocomplete="off" style="width:100%" autofocus=""></div></div><div class="col-xs-4"><div class="form-group"><label class="control-label" for="accession_language">' +
__e( _t("Language") ) +
'</label><select class="form-control language" id="accession_language" name="language"></select></div></div></div><div class="form-group primary-classification-group"><label class="control-label" for="primary_classification">' +
__e( _t("Primary classification") ) +
'</label><select id="primary_classification" style="width:100%" class="form-control"></select></div><div class="form-group primary-classification-entry-group"><label class="control-label" for="primary_classification_entry">' +
__e( _t("Primary classification entry") ) +
'</label><select id="primary_classification_entry" style="width:100%" class="form-control"></select></div></form></div><div class="modal-footer"><button type="button" class="btn btn-default cancel" data-dismiss="modal">' +
__e( _t("Cancel") ) +
'</button> <button type="button" class="btn btn-success continue">' +
__e( _t("Continue") ) +
'</button></div></div></div>';

}
return __p
};

/*
original source:

<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title"><%- _t("Create an accession") %></h4></div><div class="modal-body"><form><div class="form-group"><label class="control-label" for="layout"><%- _t("Template") %></label><select id="layout" style="width:100%" class="form-control"> <% _.each(layouts, function(layout) { %> <option value="<%- layout.id %>"><%- layout.label %></option> <% }) %> </select></div><div class="row"><div class="naming-options col-xs-12"></div><div class="col-xs-8"><div class="form-group"><label class="control-label" for="accession_name"><%- _t("Principal name of the accession") %></label><input class="form-control name" id="accession_name" type="text" name="accession" value="" maxlength="128" autocomplete="off" style="width:100%" autofocus=""></div></div><div class="col-xs-4"><div class="form-group"><label class="control-label" for="accession_language"><%- _t("Language") %></label><select class="form-control language" id="accession_language" name="language"></select></div></div></div><div class="form-group primary-classification-group"><label class="control-label" for="primary_classification"><%- _t("Primary classification") %></label><select id="primary_classification" style="width:100%" class="form-control"></select></div><div class="form-group primary-classification-entry-group"><label class="control-label" for="primary_classification_entry"><%- _t("Primary classification entry") %></label><select id="primary_classification_entry" style="width:100%" class="form-control"></select></div></form></div><div class="modal-footer"><button type="button" class="btn btn-default cancel" data-dismiss="modal"><%- _t("Cancel") %></button> <button type="button" class="btn btn-success continue"><%- _t("Continue") %></button></div></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 377 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {/**
 * @file batch.js
 * @brief
 * @author Medhi BOULNEMOUR (INRA UMR1095)
 * @date 2017-06-27
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);

let BatchModel = __webpack_require__(48);

let DefaultLayout = __webpack_require__(3);
let TitleView = __webpack_require__(4);
let Dialog = __webpack_require__(5);
let Search = __webpack_require__(32);

let BatchLayout = __webpack_require__(72);
let SearchEntityDialog = __webpack_require__(226);

let Controller = Marionette.Object.extend({
    destroy: function (model) {
        let DeletePanelDialog = Dialog.extend({
            template: __webpack_require__(50),
            templateContext: function () {
                return {
                    title: _t("Delete batch"),
                    message: _t("Do you really want to delete this batch?"),
                    confirm_txt: _("Yes"),
                    confirm_class: 'danger',
                    cancel_txt: _("No"),
                    cancel_class: 'default'
                }
            },
            ui: {
                confirm: "button.confirm"
            },
            events: {
                'click @ui.confirm': 'onDelete'
            },

            initialize: function () {
                DeletePanelDialog.__super__.initialize.apply(this);
            },

            onDelete: function () {
                model.destroy({wait: true});
                this.destroy();
                return false;
            }

        });

        let deletePanelDialog = new DeletePanelDialog();
        deletePanelDialog.render();
    },

    create: function (selection, related_entity, filters, search) {
        selection || (selection = false);
        related_entity || (related_entity = null);
        filters || (filters = {});
        search || (search = {});

        let layouts = $.ajax({
            type: "GET",
            url: window.application.url(['descriptor', 'layout', 'for-describable', 'accession.batch']),
            dataType: 'json'
        });

        layouts.then(function (data) {
            let CreateBatchView = Dialog.extend({
                attributes: {
                    'id': 'dlg_create_batch'
                },
                template: __webpack_require__(385),
                templateContext: function () {
                    return {
                        layouts: data,
                        title: (!selection) ? _t("Introduce a batch") : _t("Introduce a sub-batch"),
                    };
                },

                ui: {
                    validate: "button.continue",
                    layout: "#layout",
                    accession: "#accession"
                },

                events: {
                    'click @ui.validate': 'onContinue',
                    'change @ui.accession': 'validateAccession'
                },

                regions: {
                    'namingOptions': 'div.naming-options'
                },

                onRender: function () {
                    CreateBatchView.__super__.onRender.apply(this);

                    window.application.main.views.languages.drawSelect(this.ui.language);
                    this.ui.layout.selectpicker({});

                    this.ui.accession.select2(Search(
                        this.ui.accession.parent(),
                        window.application.url(['accession', 'accession', 'search']),
                        function (params) {
                            return {
                                method: 'icontains',
                                fields: ['name'],
                                'name': params.term.trim()
                            };
                        }, {
                            placeholder: _t("Enter a accession name. 3 characters at least for auto-completion")
                        })
                    );

                    // naming options
                    let self = this;

                    $.ajax({
                        type: "GET",
                        url: window.application.url(['accession', 'naming', 'batch']),
                        dataType: 'json',
                    }).done(function(data) {
                        let NamingOptionsView = __webpack_require__(36);
                        let len = (data.format.match(/{CONST}/g) || []).length;

                        let namingOptions = new Array(len);

                        self.showChildView("namingOptions", new NamingOptionsView({
                            namingFormat: data.format,
                            namingOptions: namingOptions
                        }));
                    });
                },

                onBeforeDestroy: function () {
                    this.ui.layout.selectpicker('destroy');
                    this.ui.accession.select2('destroy');

                    CreateBatchView.__super__.onBeforeDestroy.apply(this);
                },

                validateAccession: function () {
                    let accessionId = 0;

                    if (this.ui.accession.val())
                        accessionId = parseInt(this.ui.accession.val());

                    if (accessionId === 0 || isNaN(accessionId)) {
                        $(this.ui.accession).validateField('failed', _t('The accession must be defined'));
                        return false;
                    } else {
                        $(this.ui.accession).validateField('ok');
                        return true;
                    }
                },

                validate: function () {
                    let valid_accession = this.validateAccession();
                    return valid_accession;
                },

                onContinue: function () {
                    let self = this;

                    if (this.validate()) {
                        let namingOptions = this.getChildView('namingOptions').getNamingOptions();
                        let accession = parseInt(this.ui.accession.val());
                        let layout = parseInt(this.ui.layout.val());

                        // create a new local model and open an edit view with this model
                        let model = new BatchModel({
                            naming_options: namingOptions,
                            accession: accession,
                            layout: layout,
                            selection: {
                                select: selection,
                                from: related_entity,
                                filters: filters,
                                search: search
                            },
                        });

                        self.destroy();

                        let defaultLayout = new DefaultLayout();
                        window.application.main.showContent(defaultLayout);

                        defaultLayout.showChildView('title', new TitleView({
                            title: _t("Batch"),
                            model: model
                        }));

                        let batchLayout = new BatchLayout({model: model});
                        defaultLayout.showChildView('content', batchLayout);
                    }
                }
            });

            let createBatchView = new CreateBatchView();
            createBatchView.render();
        });
    },

    unlinkBatches: function (view) {
        if (!view.getSelection('select')) {
            $.alert.warning(_t("No batch selected"));
            return;
        }

        $.ajax({
                type: 'PATCH',
                url: window.application.url(['accession', 'batch', view.model.id, 'batch']),
                dataType: 'json',
                contentType: "application/json; charset=utf-8",
                data: JSON.stringify({
                    'action': 'remove',
                    'selection': {
                        'select': view.getSelection('select'),
                        'from': {
                            'content_type': 'accession.batch',
                            'id': view.model.id
                        },
                        'filters': view.collection.filters
                        // 'search': search
                    }
                })
            }
        ).done(function () {
            if (view.getSelection('select').op === 'in') {
                // this condition by pass auto-request loop to retrieve last user position in the table
                view.collection.remove(view.getSelection('select').value);
            } else {
                view.collection.fetch();
            }
            view.collection.count();
        });
    },

    search: function () {
        let searchEntityDialog = new SearchEntityDialog({entity: 'accession.batch'});
        searchEntityDialog.render();
    }
});

module.exports = Controller;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 378 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div class="column" style="height: calc(100% - 25px)"><div class="batch-details" style="height: 25px"></div><ul class="nav nav-tabs" role="tablist"><li role="presentation" class="active"><a href="div.tab-pane[name=descriptors]" aria-controls="descriptors" role="tab" data-toggle="tab">' +
__e( _t("Descriptors") ) +
'</a></li><li role="presentation"><a href="div.tab-pane[name=parents]" aria-controls="parents" role="tab" data-toggle="tab">' +
__e( _t("Parent batches") ) +
'</a></li><li role="presentation"><a href="div.tab-pane[name=batches]" aria-controls="batches" role="tab" data-toggle="tab">' +
__e( _t("Children batches") ) +
'</a></li><li role="presentation"><a href="div.tab-pane[name=panels]" aria-controls="panels" role="tab" data-toggle="tab">' +
__e( _t("Panels") ) +
'</a></li><li role="presentation"><a href="div.tab-pane[name=actions]" aria-controls="actions" role="tab" data-toggle="tab">' +
__e( _t("Actions") ) +
'</a></li><li role="presentation"><a href="div.tab-pane[name=comments]" aria-controls="comments" role="tab" data-toggle="tab">' +
__e( _t("Comments") ) +
'</a></li></ul><div class="tab-content" style="height: calc(100% - 32px - 10px)"><div role="tabpanel" class="tab-pane active" name="descriptors" style="height: 100%; overflow-y: auto; padding-right: 5px"></div><div role="tabpanel" class="tab-pane" name="parents" style="height: 100%"></div><div role="tabpanel" class="tab-pane" name="batches" style="height: 100%"></div><div role="tabpanel" class="tab-pane" name="actions" style="height: 100%"></div><div role="tabpanel" class="tab-pane" name="panels" style="height: 100%"></div><div role="tabpanel" class="tab-pane" name="comments" style="height: 100%"></div></div></div>';

}
return __p
};

/*
original source:

<div class="column" style="height: calc(100% - 25px)"><div class="batch-details" style="height: 25px"></div><ul class="nav nav-tabs" role="tablist"><li role="presentation" class="active"><a href="div.tab-pane[name=descriptors]" aria-controls="descriptors" role="tab" data-toggle="tab"><%- _t("Descriptors") %></a></li><li role="presentation"><a href="div.tab-pane[name=parents]" aria-controls="parents" role="tab" data-toggle="tab"><%- _t("Parent batches") %></a></li><li role="presentation"><a href="div.tab-pane[name=batches]" aria-controls="batches" role="tab" data-toggle="tab"><%- _t("Children batches") %></a></li><li role="presentation"><a href="div.tab-pane[name=panels]" aria-controls="panels" role="tab" data-toggle="tab"><%- _t("Panels") %></a></li><li role="presentation"><a href="div.tab-pane[name=actions]" aria-controls="actions" role="tab" data-toggle="tab"><%- _t("Actions") %></a></li><li role="presentation"><a href="div.tab-pane[name=comments]" aria-controls="comments" role="tab" data-toggle="tab"><%- _t("Comments") %></a></li></ul><div class="tab-content" style="height: calc(100% - 32px - 10px)"><div role="tabpanel" class="tab-pane active" name="descriptors" style="height: 100%; overflow-y: auto; padding-right: 5px"></div><div role="tabpanel" class="tab-pane" name="parents" style="height: 100%"></div><div role="tabpanel" class="tab-pane" name="batches" style="height: 100%"></div><div role="tabpanel" class="tab-pane" name="actions" style="height: 100%"></div><div role="tabpanel" class="tab-pane" name="panels" style="height: 100%"></div><div role="tabpanel" class="tab-pane" name="comments" style="height: 100%"></div></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 379 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {/**
 * @file batchchildrenlist.js
 * @brief Children batch for a specific batch parent
 * @author Medhi BOULNEMOUR (INRA UMR1095)
 * @author Frederic SCHERMA (INRA UMR1095)
 * @date 2017-11-06
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let BatchView = __webpack_require__(224);
let AdvancedTable = __webpack_require__(6);
let Dialog = __webpack_require__(5);
let DefaultLayout = __webpack_require__(3);
let TitleView = __webpack_require__(4);
let DescriptorsColumnsView = __webpack_require__(11);
let AccessionModel = __webpack_require__(37);
let BatchModel = __webpack_require__(48);
let BatchLayout = __webpack_require__(72);

let View = AdvancedTable.extend({
    template: __webpack_require__(16),
    className: "batch-list advanced-table-container",
    childView: BatchView,
    childViewContainer: 'tbody.entity-list',
    userSettingVersion: '1.0',

    userSettingName: function () {
        if (this.collection.batch_type === 'parents') {
            return 'parents_batches_list_columns';
        } else if (this.collection.batch_type === 'children') {
            return 'children_batches_list_columns';
        } else {
            return 'batches_list_columns';
        }
    },

    defaultColumns: [
        {name: 'select', width: 'auto', sort_by: null},
        {name: 'name', width: 'auto', sort_by: '+0'},
    ],

    columnsOptions: {
        'select': {
            label: '',
            width: 'auto',
            type: 'checkbox',
            glyphicon: ['fa-square-o', 'fa-square-o'],
            event: 'selectBatch',
            fixed: true
        },
        'name': {label: _t('Name'), width: 'auto', minWidth: true, event: 'view-batch-details'},
    },

    templateContext: function () {
        return {
            columnsList: this.displayedColumns,
            columnsOptions: this.getOption('columns')
        }
    },

    childViewOptions: function () {
        return {
            columnsList: this.displayedColumns,
            columnsOptions: this.getOption('columns')
        }
    },

    initialize: function (options) {
        View.__super__.initialize.apply(this, arguments);
        this.accessionId = options.accessionId || -1;

        // this.listenTo(this.collection, 'reset', this.render, this);
    },

    onShowTab: function () {
        View.__super__.onShowTab.apply(this);

        // query now to avoid useless queries
        this.query();

        // context only for children
        if (this.collection.batch_type !== 'parents') {
            let self = this;

            let contextLayout = window.application.getView().getChildView('right');
            if (!contextLayout) {
                let DefaultLayout = __webpack_require__(3);
                contextLayout = new DefaultLayout();
                window.application.getView().showChildView('right', contextLayout);
            }

            let TitleView = __webpack_require__(4);
            contextLayout.showChildView('title', new TitleView({title: _t("Batches actions")}));

            let actions = [
                'create-panel',
                'link-to-panel',
                'unlink-batches',
                'export-list',
                'import-list'
            ];

            let AccessionBatchesContextView = __webpack_require__(49);
            let contextView = new AccessionBatchesContextView({
                actions: actions,
                advancedTable: self,
                accessionId: self.accessionId
            });

            contextLayout.showChildView('content', contextView);

            // @todo setup list of selected batch or none meaning self (this.model.id)
            // let select = {
            //         "op": 'in',
            //         "term": 'id',
            //         "value": [view.model.id]
            //     };

            contextView.on("panel:create", function () {
                self.onCreatePanel();
            });

            contextView.on("panel:link-batches", function () {
                self.onLinkToPanel();
            });

            contextView.on("batch:unlink", function () {
                // window.application.accession.controllers.batch.unlinkBatches(this); @todo archive
            });
        }
    },

    onHideTab: function () {
        window.application.main.defaultRightView();
    },
});

// support of descriptors columns extension
_.extend(View.prototype, DescriptorsColumnsView);

module.exports = View;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 380 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {/**
 * @file batchpanellist.js
 * @brief
 * @author Medhi BOULNEMOUR (INRA UMR1095)
 * @date 2017-11-07
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let BatchPanelView = __webpack_require__(381);
let AdvancedTable = __webpack_require__(6);
let DescriptorsColumnsView = __webpack_require__(11);

let View = AdvancedTable.extend({
    template: __webpack_require__(16),
    className: "panel-list advanced-table-container",
    childView: BatchPanelView,
    childViewContainer: 'tbody.entity-list',
    userSettingName: 'batchpanel_list_columns',
    userSettingVersion: '1.0',

    defaultColumns: [
        // {name: 'select', width: 'auto', sort_by: null},
        {name: 'name', width: 'auto', sort_by: '+0'}
    ],

    columnsOptions: {
        // 'select': {
        //     label: '',
        //     width: 'auto',
        //     type: 'checkbox',
        //     glyphicon: ['fa-square-o', 'fa-square-o'],
        //     event: 'panel-select',
        //     fixed: true
        // },
        'name': {label: _t('Name'), width: 'auto', minWidth: true, event: 'view-panel-details'}
    },

    templateContext: function () {
        return {
            columnsList: this.displayedColumns,
            columnsOptions: this.getOption('columns')
        }
    },

    childViewOptions: function () {
        return {
            columnsList: this.displayedColumns,
            columnsOptions: this.getOption('columns'),
            batchId: this.model.id
        }
    },

    initialize: function (options) {
        View.__super__.initialize.apply(this, arguments);
        this.accessionId = options.accessionId || -1;
    },

    onRender: function () {
        View.__super__.onRender.apply(this, arguments);
        //this.onShowTab();
    },

    onLinkToPanel: function () {
        let selection = {
            "op": 'in',
            "term": 'id',
            "value": [this.model.id]
        };
        window.application.accession.controllers.batchpanel.linkBatches(selection, null, null, null, this.collection);
    },

    onShowTab: function () {
        View.__super__.onShowTab.apply(this, arguments);

        let self = this;

        // query now to avoid useless queries
        this.query();

        let contextLayout = window.application.getView().getChildView('right');
        if (!contextLayout) {
            let DefaultLayout = __webpack_require__(3);
            contextLayout = new DefaultLayout();
            window.application.getView().showChildView('right', contextLayout);
        }

        let TitleView = __webpack_require__(4);
        contextLayout.showChildView('title', new TitleView({
            title: _t("Panel actions"),
            glyphicon: 'fa-wrench'
        }));

        let actions = [
            'link-to-panel'
        ];

        let PanelBatchListContextView = __webpack_require__(49);
        let contextView = new PanelBatchListContextView({
            actions: actions,
            advancedTable: self,
            accessionId: self.accessionId
        });

        contextLayout.showChildView('content', contextView);

        contextView.on("panel:link-batches", function () {
            self.onLinkToPanel();
        });
    }
});

// support of descriptors columns extension
_.extend(View.prototype, DescriptorsColumnsView);

module.exports = View;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 381 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file batchpanel.js
 * @brief
 * @author Medhi BOULNEMOUR (INRA UMR1095)
 * @date 2017-11-07
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);

let View = Marionette.View.extend({
    tagName: 'tr',
    className: 'object batchpanel element',
    attributes: function () {
        return {
            'scope': 'row',
            'element-id': this.model.get('id')
        }
    },
    template: __webpack_require__(12),

    templateContext: function () {
        return {
            columnsList: this.getOption('columnsList'),
            columnsOptions: this.getOption('columnsOptions')
        }
    },

    ui: {
        details: 'td.view-panel-details'
    },

    events: {
        'click @ui.details': 'viewDetails'
    },

    behaviors: {
        ActionBtnEvents: {
            behaviorClass: __webpack_require__(8),
            actions: {
                tag: {title: _t('Rename'), display: true, event: 'onRename'},
                edit: {display: false},
                manage: {display: true, event: 'viewDetails'},
                remove: {display: true, event: 'onDeletePanel'},
                unlink: {display: true, event: 'onUnlinkPanel'}
            }
        }
    },

    initialize: function () {
        this.listenTo(this.model, 'change', this.render, this);
    },

    actionsProperties: function () {
        let properties = {
            manage: {disabled: false},
            remove: {disabled: false}
        };

        // @todo manage permissions

        if (/*!this.model.get('can_delete') ||*/0) {
            properties.remove.disabled = true;
        }

        return properties;
    },

    onRender: function () {
    },

    viewDetails: function () {
        Backbone.history.navigate('app/accession/batchpanel/' + this.model.get('id') + '/', {trigger: true});
    },

    onRename: function () {
        if (!window.application.permission.manager.isStaff()) {
            return false;
        }

        let ChangeName = __webpack_require__(20);
        let changeName = new ChangeName({
            model: this.model,
            title: _t("Rename the batch panel")
        });

        changeName.render();
        changeName.ui.name.val(this.model.get('name'));

        return false;
    },

    onDeletePanel: function () {
        application.accession.controllers.batchpanel.destroy(this.model);
    },

    onUnlinkPanel: function () {
        let view = this;
        $.ajax({
            type: 'PATCH',
            url: window.application.url(['accession', 'batchpanel', view.model.id, 'batches']),
            dataType: 'json',
            contentType: "application/json; charset=utf-8",
            data: JSON.stringify({
                'action': 'remove',
                'selection': {
                    'select': {
                        "op": 'in',
                        "term": 'id',
                        "value": [view.getOption('batchId')]
                    }
                }
            })
        }).done(function () {
            view.model.collection.count();
            view.model.collection.remove(view.model);
        });
    }
});

module.exports = View;


/***/ }),
/* 382 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file batchpath.js
 * @brief Accession + batch name item view
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-02-15
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Marionette = __webpack_require__(1);

let View = Marionette.View.extend({
    tagName: 'div',
    template: __webpack_require__(383),
    templateContext: function () {
        return {
            accession: this.accession
        };
    },

    accession: {name: ''},
    noLink: false,

    attributes: {
        style: "height: 25px; overflow-y: auto;"
    },

    ui: {
        view_accession: ".view-accession"
    },

    events: {
        'click @ui.view_accession': 'onViewAccession'
    },

    initialize: function(options) {
        this.mergeOptions(options, ['accession']);

        this.listenTo(this.model, 'change:name', this.render, this);
    },

    onRender: function() {
        if (this.getOption('noLink')) {
            this.ui.view_accession.removeClass('action');
        }
    },

    onViewAccession: function(e) {
        if (this.getOption('noLink')) {
            return;
        }

        let accession_id = $(e.target).data('accession-id');
        Backbone.history.navigate("app/accession/accession/" + accession_id + "/", {trigger: true});
    }
});

module.exports = View;


/***/ }),
/* 383 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<span style="font-weight:bold; font-size:18px; margin-bottom: 15px"><span><span class="action view-accession" data-accession-id="' +
__e( accession.get('id') ) +
'" style="margin-left: 0.5rem; margin-right: 0.5rem">' +
__e( accession.get('name') ) +
'</span></span><span class="fa fa-chevron-right"></span> <span><span class="name batch">' +
__e( name ) +
'</span></span></span>';

}
return __p
};

/*
original source:

<span style="font-weight:bold; font-size:18px; margin-bottom: 15px"><span><span class="action view-accession" data-accession-id="<%- accession.get('id') %>" style="margin-left: 0.5rem; margin-right: 0.5rem"><%- accession.get('name') %></span></span><span class="fa fa-chevron-right"></span> <span><span class="name batch"><%- name %></span></span></span>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 384 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file action.js
 * @brief Action model view.
 * @author Frederic SCHERMA (INRA UMR1095)
 * @date 2018-01-19
 * @copyright Copyright (c) 2018 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);

let View = Marionette.View.extend({
    tagName: 'tr',
    className: 'object action element',
    attributes: function () {
        return {
            'scope': 'row',
            'element-id': this.model.get('id')
        }
    },
    template: __webpack_require__(12),

    templateContext: function () {
        return {
            columnsList: this.getOption('columnsList'),
            columnsOptions: this.getOption('columnsOptions')
        }
    },

    ui: {
        details: 'td.view-action-details',
    },

    events: {
        'click @ui.details': 'viewDetails'
    },

    behaviors: {
        ActionBtnEvents: {
            behaviorClass: __webpack_require__(8),
            actions: {
                edit: {display: false},
                manage: {display: true, event: 'viewDetails'},
                remove: {display: true, event: 'onDeleteAction'}
            }
        }
    },

    initialize: function () {
        this.listenTo(this.model, 'change', this.render, this);
    },

    actionsProperties: function () {
        let properties = {
            manage: {disabled: false},
            remove: {disabled: false}
        };

        // @todo manage permissions

        if (/*!this.model.get('can_delete') ||*/0) {
            properties.remove.disabled = true;
        }

        return properties;
    },

    onRender: function () {
    },

    viewDetails: function () {
        Backbone.history.navigate('app/accession/action/' + this.model.get('id') + '/', {trigger: true});
    },

    onDeleteAction: function () {
        this.model.destroy({wait: true, success: function() {
            $.alert.success(_t("Done !"));
        }});
    }
});

module.exports = View;


/***/ }),
/* 385 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
with (obj) {
__p += '<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title">' +
__e( title ) +
'</h4></div><div class="modal-body"><form><div class="form-group"><label class="control-label" for="accession">' +
__e( _t("Accession") ) +
'</label><select id="accession" style="width:100%" class="form-control"></select></div><div class="naming-options"></div><div class="form-group"><label class="control-label" for="layout">' +
__e( _t("Template") ) +
'</label><select id="layout" style="width:100%" class="form-control"> ';
 _.each(layouts, function(layout) { ;
__p += ' <option value="' +
__e( layout.id ) +
'">' +
__e( layout.label ) +
'</option> ';
 }) ;
__p += ' </select></div></form></div><div class="modal-footer"><button type="button" class="btn btn-default cancel" data-dismiss="modal">' +
__e( _t("Cancel") ) +
' </button> <button type="button" class="btn btn-success continue">' +
__e( _t("Continue") ) +
'</button></div></div></div>';

}
return __p
};

/*
original source:

<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title"><%- title %></h4></div><div class="modal-body"><form><div class="form-group"><label class="control-label" for="accession"><%- _t("Accession") %></label><select id="accession" style="width:100%" class="form-control"></select></div><div class="naming-options"></div><div class="form-group"><label class="control-label" for="layout"><%- _t("Template") %></label><select id="layout" style="width:100%" class="form-control"> <% _.each(layouts, function(layout) { %> <option value="<%- layout.id %>"><%- layout.label %></option> <% }) %> </select></div></form></div><div class="modal-footer"><button type="button" class="btn btn-default cancel" data-dismiss="modal"><%- _t("Cancel") %> </button> <button type="button" class="btn btn-success continue"><%- _t("Continue") %></button></div></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 386 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {/**
 * @file panel.js
 * @brief
 * @author Medhi BOULNEMOUR (INRA UMR1095)
 * @date 2017-09-11
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Dialog = __webpack_require__(5);
let Marionette = __webpack_require__(1);

let DefaultLayout = __webpack_require__(3);
let TitleView = __webpack_require__(4);
let AccessionPanelModel = __webpack_require__(71);
let AccessionPanelLayout = __webpack_require__(231);

let Controller = Marionette.Object.extend({
    destroy: function (model) {
        let DeletePanelDialog = Dialog.extend({
            template: __webpack_require__(50),
            templateContext: function () {
                return {
                    title: _t("Delete panel"),
                    message: _t("Do you really want to delete this panel?"),
                    confirm_txt: _("Yes"),
                    confirm_class: 'danger',
                    cancel_txt: _("No"),
                    cancel_class: 'default'
                }
            },
            ui: {
                confirm: "button.confirm"
            },
            events: {
                'click @ui.confirm': 'onDelete'
            },

            initialize: function () {
                DeletePanelDialog.__super__.initialize.apply(this);
            },

            onDelete: function () {
                model.destroy({wait: true});
                this.destroy();
                return false;
            }

        });

        let deletePanelDialog = new DeletePanelDialog();
        deletePanelDialog.render();
    },

    create: function (selection, related_entity, filters, search) {
        selection || (selection = false);
        related_entity || (related_entity = null);
        filters || (filters = {});
        search || (search = {});


        let CreatePanelDialog = Dialog.extend({
            template: __webpack_require__(236),
            ui: {
                validate: "button.create",
                name: "#panel_name",
                layout: "#layout"
            },

            events: {
                'click @ui.validate': 'onCreate',
                'input @ui.name': 'onNameInput'
            },

            initialize: function (options) {
                CreatePanelDialog.__super__.initialize.apply(this);
            },

            onNameInput: function () {
                let name = this.ui.name.val().trim();

                if (this.validateName()) {
                    let filters = {
                        method: 'ieq',
                        fields: ['name'],
                        'name': name
                    };

                    $.ajax({
                        type: "GET",
                        url: window.application.url(['accession', 'accessionpanel', 'search']),
                        dataType: 'json',
                        data: {filters: JSON.stringify(filters)},
                        el: this.ui.name,
                        success: function (data) {
                            if (data.items.length > 0) {
                                for (let i in data.items) {
                                    let panel = data.items[i];

                                    if (panel.name.toUpperCase() === name.toUpperCase()) {
                                        $(this.el).validateField('failed', _t('Accession panel name already in usage'));
                                        break;
                                    }
                                }
                            } else {
                                $(this.el).validateField('ok');
                            }
                        }
                    });
                }
            },

            validateName: function () {
                let v = this.ui.name.val().trim();

                if (v.length > 128) {
                    this.ui.name.validateField('failed', _t('characters_max', {count: 128}));
                    return false;
                } else if (v.length < 3) {
                    this.ui.name.validateField('failed', _t('characters_min', {count: 3}));
                    return false;
                }

                return true;
            },

            onCreate: function () {
                let view = this;

                if (this.ui.name.isValidField()) {
                    let name = this.ui.name.val().trim();

                    // create a new local model and open an edit view with this model
                    let model = new AccessionPanelModel({
                        name: name,
                        selection: {
                            select: selection,
                            from: related_entity,
                            filters: filters,
                            search: search
                        },
                        descriptors: {},
                        layout: null
                    });

                    view.destroy();

                    let defaultLayout = new DefaultLayout();
                    window.application.main.showContent(defaultLayout);

                    defaultLayout.showChildView('title', new TitleView({
                        title: _t("Panel"),
                        model: model
                    }));

                    let accessionPanelLayout = new AccessionPanelLayout({model: model});
                    defaultLayout.showChildView('content', accessionPanelLayout);
                }
            }
        });

        let createPanelDialog = new CreatePanelDialog();
        createPanelDialog.render();
    },

    linkAccessions: function (selection, relatedEntity, filters, search, collection) {
        relatedEntity || (relatedEntity = null);
        filters || (filters = {});
        search || (search = {});

        if (!selection) {
            $.alert.warning(_t("No accession selected"));
            return;
        }

        $.ajax({
            type: "GET",
            url: window.application.url(['accession', 'accessionpanel']),
            dataType: 'json'
        }).done(function (data) {
            let LinkToPanelDialog = Dialog.extend({
                template: __webpack_require__(391),
                templateContext: function () {
                    return {
                        panels: data.items
                    };
                },
                ui: {
                    validate: "button.link-to-panel",
                    panel: "#panel"
                },

                events: {
                    'click @ui.validate': 'onLinkToPanel'
                },

                initialize: function (options) {
                    LinkToPanelDialog.__super__.initialize.apply(this);
                },

                onRender: function () {
                    LinkToPanelDialog.__super__.onRender.apply(this);
                    this.ui.panel.selectpicker({});
                },

                onLinkToPanel: function (ev) {
                    let view = this;
                    let panelId = this.ui.panel.val();
                    let goToPanel = $(ev.currentTarget).data('gotopanel');

                    $.ajax({
                        type: 'PATCH',
                        url: window.application.url(['accession', 'accessionpanel', panelId, 'accessions']),
                        dataType: 'json',
                        contentType: "application/json; charset=utf-8",
                        data: JSON.stringify({
                            'action': 'add',
                            'selection': {
                                'select': selection,
                                'from': relatedEntity,
                                'filters': filters,
                                'search': search
                            }
                        })
                    }).done(function () {
                        if (collection) {
                           collection.fetch();
                        }
                        view.destroy();
                        if (goToPanel) {
                            Backbone.history.navigate('app/accession/accessionpanel/' + panelId + '/accessions/', {trigger: true});
                        }
                    });
                }
            });

            let linkToPanelDialog = new LinkToPanelDialog();
            linkToPanelDialog.render();
        });
    }

});

module.exports = Controller;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 387 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div class="column" style="height: 100%"><ul class="nav nav-tabs" role="tablist"><li role="presentation" class="active"><a href="div.tab-pane[name=descriptors]" aria-controls="descriptors" role="tab" data-toggle="tab">' +
__e( _t("Descriptors") ) +
'</a></li><li role="presentation"><a href="div.tab-pane[name=accessions]" aria-controls="accessions" role="tab" data-toggle="tab">' +
__e( _t("Accessions") ) +
' <span id="accessions-badge" class="badge">' +
__e( acc_amount ) +
'</span></a></li></ul><div class="tab-content" style="height: calc(100% - 41px - 10px)"><div role="tabpanel" class="tab-pane active" name="descriptors" style="height: 100%; overflow-y: auto; padding-right: 5px"></div><div role="tabpanel" class="tab-pane" name="accessions" style="height: 100%"></div></div></div>';

}
return __p
};

/*
original source:

<div class="column" style="height: 100%"><ul class="nav nav-tabs" role="tablist"><li role="presentation" class="active"><a href="div.tab-pane[name=descriptors]" aria-controls="descriptors" role="tab" data-toggle="tab"><%- _t("Descriptors") %></a></li><li role="presentation"><a href="div.tab-pane[name=accessions]" aria-controls="accessions" role="tab" data-toggle="tab"><%- _t("Accessions") %> <span id="accessions-badge" class="badge"><%- acc_amount %></span></a></li></ul><div class="tab-content" style="height: calc(100% - 41px - 10px)"><div role="tabpanel" class="tab-pane active" name="descriptors" style="height: 100%; overflow-y: auto; padding-right: 5px"></div><div role="tabpanel" class="tab-pane" name="accessions" style="height: 100%"></div></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 388 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file accessionpaneldescriptoredit.js
 * @brief
 * @author Medhi BOULNEMOUR (INRA UMR1095)
 * @date 2017-09-14
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let DescribableEdit = __webpack_require__(33);

let View = DescribableEdit.extend({
    onCancel: function() {
        // cancel global widget modifications
        this.cancel();

        // non existing classification entry, simply reload previous content (url has not changed)
        if (this.model.isNew()) {
            Backbone.history.loadUrl();
            return;
        }

        // does not reload models, just redo the views
        let view = this;

        // update the descriptor part of the classification entry layout
        let accessionPanelLayout = application.main.viewContent().getChildView('content');

        let AccessionPanelDescriptorView = __webpack_require__(76);
        let accessionPanelDescriptorView = new AccessionPanelDescriptorView({
            model: this.model,
            layoutData: view.layoutData,
            descriptorCollection: view.descriptorCollection
        });

        accessionPanelLayout.showChildView('descriptors', accessionPanelDescriptorView);
    },

    onApply: function () {
        // does not reload models, save and redo the views
        let view = this;
        let model = this.model;

        let descriptors = this.prepareDescriptors();
        if (descriptors === null) {
            return;
        }

        this.model.save({descriptors: descriptors}, {wait: true, patch: !model.isNew()}).then(function () {
            // update the descriptor part of the classification entry layout
            let accessionPanelLayout = application.main.viewContent().getChildView('content');

            let AccessionPanelDescriptorView = __webpack_require__(76);
            let accessionPanelDescriptorView = new AccessionPanelDescriptorView({
                model: model,
                layoutData: view.layoutData,
                descriptorCollection: view.descriptorCollection
            });

            accessionPanelLayout.showChildView('descriptors', accessionPanelDescriptorView);
        });
    },

    onShowTab: function() {
        let view = this;

        // contextual panel
        let contextLayout = application.getView().getChildView('right');
        if (!contextLayout) {
            let DefaultLayout = __webpack_require__(3);
            contextLayout = new DefaultLayout();
            application.getView().showChildView('right', contextLayout);
        }

        let TitleView = __webpack_require__(4);
        contextLayout.showChildView('title', new TitleView({title: _t("Descriptors"), glyphicon: 'fa-wrench'}));

        let actions = ['apply', 'cancel'];

        let ClassificationEntryDescriptorContextView = __webpack_require__(68);
        let contextView = new ClassificationEntryDescriptorContextView({actions: actions});
        contextLayout.showChildView('content', contextView);

        contextView.on("describable:cancel", function() {
            view.onCancel();
        });

        contextView.on("describable:apply", function() {
            view.onApply();
        });
    },

    onHideTab: function() {
        application.main.defaultRightView();
    }
});

module.exports = View;


/***/ }),
/* 389 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {/**
 * @file panelaccessionlist.js
 * @brief Panel accession list view
 * @author Medhi BOULNEMOUR (INRA UMR1095)
 * @date 2016-12-19
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let AccessionView = __webpack_require__(390);
let AdvancedTable = __webpack_require__(6);
let DescriptorsColumnsView = __webpack_require__(11);

let View = AdvancedTable.extend({
    template: __webpack_require__(16),
    className: 'advanced-table-container',
    childView: AccessionView,
    childViewContainer: 'tbody.entity-list',
    userSettingName: 'panel_accessions_list_columns',
    userSettingVersion: '1.2',

    defaultColumns: [
        {name: 'select', width: 'auto', sort_by: null},
        {name: 'code', width: 'auto', sort_by: null},
        {name: 'name', width: 'auto', sort_by: '+0'},
        {name: 'primary_classification_entry', width: 'auto', sort_by: null},
        {name: 'layout', width: 'auto', sort_by: null},
        // {name: 'synonym', width: 'auto', sort_by: null}
    ],

    columnsOptions: {
        'select': {
            label: '',
            width: 'auto',
            type: 'checkbox',
            glyphicon: ['fa-square-o', 'fa-square-o'],
            event: 'accession-select',
            fixed: true
        },
        'code': {label: _t('Code'), width: 'auto', minWidth: true, event: 'view-accession-details'},
        'name': {label: _t('Name'), width: 'auto', minWidth: true, event: 'view-accession-details'},
        'primary_classification_entry': {
            label: _t('Classification'),
            width: 'auto',
            minWidth: true,
            event: 'view-primary-classification-entry-details',
            custom: 'primaryClassificationEntryCell',
            field: 'name'
        },
        'layout': {label: _t('Layout'), width: 'auto', minWidth: true},
        // 'synonym': {
        //     label: _t('Synonym'),
        //     width: 'auto',
        //     minWidth: true,
        //     custom: 'synonymCell',
        //     field: 'name'
        // }
    },

    templateContext: function () {
        return {
            columnsList: this.displayedColumns,
            columnsOptions: this.getOption('columns')
        }
    },

    childViewOptions: function () {
        return {
            columnsList: this.displayedColumns,
            columnsOptions: this.getOption('columns')
        }
    },

    initialize: function (options) {
        View.__super__.initialize.apply(this, arguments);
        this.relatedEntity = this.getOption('relatedEntity');
    },

    onShowTab: function () {
        let view = this;

        let contextLayout = window.application.getView().getChildView('right');
        if (!contextLayout) {
            let DefaultLayout = __webpack_require__(3);
            contextLayout = new DefaultLayout();
            window.application.getView().showChildView('right', contextLayout);
        }

        let TitleView = __webpack_require__(4);
        contextLayout.showChildView('title', new TitleView({
            title: _t("Accession actions"),
            glyphicon: 'fa-wrench'
        }));

        let actions = [
            'create-panel',
            'link-to-panel',
            'unlink-accessions',
            'export-list',
            'import-list'
        ];

        let PanelAccessionListContextView = __webpack_require__(46);
        let contextView = new PanelAccessionListContextView({actions: actions});
        contextLayout.showChildView('content', contextView);

        contextView.on("panel:create", function () {
            view.onCreatePanel();
        });
        contextView.on("panel:link-accessions", function () {
            view.onLinkToPanel();
        });
        contextView.on("accessions:unlink", function () {
            view.onUnlinkAccessions();
        });

        View.__super__.onShowTab.apply(this, arguments);
    },

    onBeforeDetach: function () {
        window.application.main.defaultRightView();
    },

    onUnlinkAccessions: function () {

        if (!this.getSelection('select')) {
            $.alert.warning(_t("No accession selected"));
            return;
        }

        let view = this;
        $.ajax({
                type: 'PATCH',
                url: window.application.url(['accession', 'accessionpanel', this.model.id, 'accessions']),
                dataType: 'json',
                contentType: "application/json; charset=utf-8",
                data: JSON.stringify({
                    'action': 'remove',
                    'selection': {
                        'select': view.getSelection('select'),
                        'from': {
                            'content_type': 'accession.accessionpanel',
                            'id': view.model.id
                        },
                        'filters': this.collection.filters
                        // 'search': search
                    }
                })
            }
        ).done(function () {
            if (view.getSelection('select').op === 'in') {
                // this condition by pass auto-request loop to retrieve last user position in the table
                view.collection.remove(view.getSelection('select').value);
            } else {
                view.collection.fetch();
            }
            view.collection.count();
        });
    },

    updateAmount: function () {
        // update the accessions amount badge only if layout view is specified
        let panelLayoutView = this.getOption('layoutView', null);

        if (!panelLayoutView) {
            console.error("Panel layout view is missing: updateAmount() can not find amount badge to update");
            return
        }
        $.ajax({
                type: 'GET',
                url: window.application.url(['accession', 'accessionpanel', this.model.id, 'accessions', 'count']),
                dataType: 'json',
                contentType: "application/json; charset=utf-8"
            }
        ).done(function (data) {
            panelLayoutView.model.set('accessions_amount', data.count);
            panelLayoutView.updateAccessionsAmount(data.count);
        });
    },

    onCreatePanel: function () {
        if (!this.getSelection('select')) {
            $.alert.warning(_t("No accession selected"));
        } else {
            window.application.accession.controllers.accessionpanel.create(
                this.getSelection('select'), this.relatedEntity, this.collection.filters, this.collection.search);
        }
    },

    onLinkToPanel: function () {
        window.application.accession.controllers.accessionpanel.linkAccessions(
            this.getSelection('select'), this.relatedEntity, this.collection.filters, this.collection.search);
    }
});

// support of descriptors columns extension
_.extend(View.prototype, DescriptorsColumnsView);

module.exports = View;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 390 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file accession.js
 * @brief Accession element view from
 * @author Medhi BOULNEMOUR (INRA UMR1095)
 * @date 2017-10-02
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);

let View = Marionette.View.extend({
    tagName: 'tr',
    className: 'object accession element',
    attributes: function () {
        return {
            'scope': 'row',
            'element-id': this.model.get('id')
        }
    },
    template: __webpack_require__(12),

    templateContext: function () {
        return {
            columnsList: this.getOption('columnsList'),
            columnsOptions: this.getOption('columnsOptions')
        }
    },

    ui: {
        details: 'td.view-accession-details',
        primary_classification_entry: 'td.view-primary-classification-entry-details'
    },

    events: {
        'click @ui.details': 'viewDetails',
        'click @ui.primary_classification_entry': 'viewPrimaryClassificationEntry'
    },

    behaviors: {
        ActionBtnEvents: {
            behaviorClass: __webpack_require__(8),
            actions: {
                edit: {display: false},
                manage: {display: true, event: 'viewDetails'},
                remove: {display: true, event: 'onDeleteAccession'},
                unlink: {display: true, event: 'onUnlinkAccession'}
            }
        }
    },

    initialize: function () {
        this.listenTo(this.model, 'change', this.render, this);
    },

    actionsProperties: function () {
        let properties = {
            manage: {disabled: false},
            remove: {disabled: false}
        };

        // @todo manage permissions

        if (/*!this.model.get('can_delete') ||*/0) {
            properties.remove.disabled = true;
        }

        return properties;
    },

    onRender: function () {
    },

    viewDetails: function () {
        Backbone.history.navigate('app/accession/accession/' + this.model.get('id') + '/', {trigger: true});
    },

    viewPrimaryClassificationEntry: function () {
        Backbone.history.navigate('app/classification/classificationentry/' + this.model.get('primary_classification_entry') + '/', {trigger: true});
    },

    synonymCell: function (td) {
        let synonyms = this.model.get('synonyms');

        // @todo which one ?
        if (synonyms.length > 2) {
            let text = this.model.get('synonyms')[2].name;

            td.html(text);
        }
    },

    onDeleteAccession: function () {
        alert("@todo");
    },

    onUnlinkAccession: function () {
        let view = this;
        $.ajax({
            type: 'PATCH',
            url: window.application.url(['accession', 'accessionpanel', view.model.collection.panel_id, 'accessions']),
            dataType: 'json',
            contentType: "application/json; charset=utf-8",
            data: JSON.stringify({
                'action': 'remove',
                'selection': {
                    'select': {
                        "op": 'in',
                        "term": 'id',
                        "value": [view.model.id]
                    },
                    'from': {
                        'content_type': 'accession.accessionpanel',
                        'id': view.model.collection.panel_id
                    }
                }
            })
        }).done(function () {
            view.model.collection.count();
            view.model.collection.remove(view.model);
        });
    },

    primaryClassificationEntryCell: function (td, value) {
        if (value && value.rank) {
            td.popupcell('init', {
                label: value.name,
                className: 'classification-rank',
                type: 'entity',
                format: {
                    model: 'classification.classificationrank',
                    details: true
                },
                value: value.rank
            });
        }
    }
});

module.exports = View;


/***/ }),
/* 391 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
with (obj) {
__p += '<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title">' +
__e( _t("Link accession(s) to existing panel") ) +
'</h4></div><div class="modal-body"><form><div class="form-group"><label class="control-label" for="panel">' +
__e( _t("Accession panel") ) +
'</label><select id="panel" style="width:100%" class="form-control"> ';
 _.each(panels, function(panel) { ;
__p += ' <option value="' +
__e( panel.id ) +
'">' +
__e( panel.name ) +
'</option> ';
 }) ;
__p += ' </select></div></form></div><div class="modal-footer"><button type="button" class="btn btn-default cancel" data-dismiss="modal">' +
__e( _t("Cancel") ) +
' </button> <button type="button" class="btn btn-success link-to-panel">' +
__e( _t("Link to panel") ) +
'</button> <button type="button" class="btn btn-success link-to-panel" data-gotopanel="1">' +
__e( _t("Link and go to panel") ) +
'</button></div></div></div>';

}
return __p
};

/*
original source:

<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title"><%- _t("Link accession(s) to existing panel") %></h4></div><div class="modal-body"><form><div class="form-group"><label class="control-label" for="panel"><%- _t("Accession panel") %></label><select id="panel" style="width:100%" class="form-control"> <% _.each(panels, function(panel) { %> <option value="<%- panel.id %>"><%- panel.name %></option> <% }) %> </select></div></form></div><div class="modal-footer"><button type="button" class="btn btn-default cancel" data-dismiss="modal"><%- _t("Cancel") %> </button> <button type="button" class="btn btn-success link-to-panel"><%- _t("Link to panel") %></button> <button type="button" class="btn btn-success link-to-panel" data-gotopanel="1"><%- _t("Link and go to panel") %></button></div></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 392 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {/**
 * @file batchpanel.js
 * @brief
 * @author Medhi BOULNEMOUR (INRA UMR1095)
 * @date 2017-11-06
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Dialog = __webpack_require__(5);
let Marionette = __webpack_require__(1);

let DefaultLayout = __webpack_require__(3);
let TitleView = __webpack_require__(4);
let BatchPanelModel = __webpack_require__(75);
let BatchPanelLayout = __webpack_require__(237);

let Controller = Marionette.Object.extend({
    destroy: function (model) {
        let DeletePanelDialog = Dialog.extend({
            template: __webpack_require__(50),
            templateContext: function () {
                return {
                    title: _t("Delete panel"),
                    message: _t("Do you really want to delete this panel?"),
                    confirm_txt: _("Yes"),
                    confirm_class: 'danger',
                    cancel_txt: _("No"),
                    cancel_class: 'default'
                }
            },
            ui: {
                confirm: "button.confirm"
            },
            events: {
                'click @ui.confirm': 'onDelete'
            },

            initialize: function () {
                DeletePanelDialog.__super__.initialize.apply(this);
            },

            onDelete: function () {
                model.destroy({wait: true});
                this.destroy();
                return false;
            }

        });

        let deletePanelDialog = new DeletePanelDialog();
        deletePanelDialog.render();
    },

    create: function (selection, related_entity, filters, search) {
        selection || (selection = false);
        related_entity || (related_entity = null);
        filters || (filters = {});
        search || (search = {});


        let CreatePanelDialog = Dialog.extend({
            template: __webpack_require__(236),
            ui: {
                validate: "button.create",
                name: "#panel_name",
                layout: "#layout"
            },

            events: {
                'click @ui.validate': 'onCreate',
                'input @ui.name': 'onNameInput'
            },

            initialize: function (options) {
                CreatePanelDialog.__super__.initialize.apply(this);
            },

            onNameInput: function () {
                let name = this.ui.name.val().trim();

                if (this.validateName()) {
                    let filters = {
                        method: 'ieq',
                        fields: ['name'],
                        'name': name
                    };

                    $.ajax({
                        type: "GET",
                        url: window.application.url(['accession', 'batchpanel', 'search']),
                        dataType: 'json',
                        data: {filters: JSON.stringify(filters)},
                        el: this.ui.name,
                        success: function (data) {
                            if (data.items.length > 0) {
                                for (let i in data.items) {
                                    let panel = data.items[i];

                                    if (panel.name.toUpperCase() === name.toUpperCase()) {
                                        $(this.el).validateField('failed', _t('Batch panel name already in usage'));
                                        break;
                                    }
                                }
                            } else {
                                $(this.el).validateField('ok');
                            }
                        }
                    });
                }
            },

            validateName: function () {
                let v = this.ui.name.val().trim();

                if (v.length > 128) {
                    this.ui.name.validateField('failed', _t('characters_max', {count: 128}));
                    return false;
                } else if (v.length < 3) {
                    this.ui.name.validateField('failed', _t('characters_min', {count: 3}));
                    return false;
                }

                return true;
            },

            onCreate: function () {
                let view = this;

                if (this.ui.name.isValidField()) {
                    let name = this.ui.name.val().trim();

                    // create a new local model and open an edit view with this model
                    let model = new BatchPanelModel({
                        name: name,
                        selection: {
                            select: selection,
                            from: related_entity,
                            filters: filters,
                            search: search
                        },
                        descriptors: {},
                        layout: null
                    });

                    view.destroy();

                    let defaultLayout = new DefaultLayout();
                    application.main.showContent(defaultLayout);

                    defaultLayout.showChildView('title', new TitleView({
                        title: _t("Panel"),
                        model: model
                    }));

                    let accessionPanelLayout = new BatchPanelLayout({model: model});
                    defaultLayout.showChildView('content', accessionPanelLayout);
                }
            }
        });

        let createPanelDialog = new CreatePanelDialog();
        createPanelDialog.render();
    },

    linkBatches: function (selection, related_entity, filters, search, collection) {
        related_entity || (related_entity = null);
        filters || (filters = {});
        search || (search = {});

        if (!selection) {
            $.alert.warning(_t("No batch selected"));
            return;
        }

        $.ajax({
            type: "GET",
            url: window.application.url(['accession', 'batchpanel']),
            dataType: 'json'
        }).done(function (data) {
            let LinkToPanelDialog = Dialog.extend({
                template: __webpack_require__(397),
                templateContext: function () {
                    return {
                        panels: data.items
                    };
                },
                ui: {
                    validate: "button.link-to-panel",
                    panel: "#panel"
                },

                events: {
                    'click @ui.validate': 'onLinkToPanel'
                },

                initialize: function (options) {
                    LinkToPanelDialog.__super__.initialize.apply(this);
                },

                onRender: function () {
                    LinkToPanelDialog.__super__.onRender.apply(this);
                    this.ui.panel.selectpicker({});
                },

                onLinkToPanel: function (ev) {
                    let view = this;
                    let panel_id = this.ui.panel.val();
                    let go_to_panel = $(ev.currentTarget).data('gotopanel');

                    $.ajax({
                        type: 'PATCH',
                        url: window.application.url(['accession', 'batchpanel', panel_id, 'batches']),
                        dataType: 'json',
                        contentType: "application/json; charset=utf-8",
                        data: JSON.stringify({
                            'action': 'add',
                            'selection': {
                                'select': selection,
                                'from': related_entity,
                                'filters': filters,
                                'search': search
                            }
                        })
                    }).done(function () {
                        if (collection) {
                           collection.fetch();
                        }
                        view.destroy();
                        if (go_to_panel) {
                            Backbone.history.navigate('app/accession/batchpanel/' + panel_id + '/batches/', {trigger: true});
                        }
                    });
                }
            });

            let linkToPanelDialog = new LinkToPanelDialog();
            linkToPanelDialog.render();
        });
    }

});

module.exports = Controller;
/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 393 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div class="column" style="height: calc(100% - 25px)"><ul class="nav nav-tabs" role="tablist"><li role="presentation" class="active"><a href="div.tab-pane[name=descriptors]" aria-controls="descriptors" role="tab" data-toggle="tab">' +
__e( _t("Descriptors") ) +
'</a></li><li role="presentation"><a href="div.tab-pane[name=batches]" aria-controls="batches" role="tab" data-toggle="tab">' +
__e( _t("Batches") ) +
' <span id="batches-badge" class="badge">' +
__e( bat_amount ) +
'</span></a></li></ul><div class="tab-content" style="height: calc(100% - 41px - 10px)"><div role="tabpanel" class="tab-pane active" name="descriptors" style="height: 100%; overflow-y: auto; padding-right: 5px"></div><div role="tabpanel" class="tab-pane" name="batches" style="height: 100%"></div></div></div>';

}
return __p
};

/*
original source:

<div class="column" style="height: calc(100% - 25px)"><ul class="nav nav-tabs" role="tablist"><li role="presentation" class="active"><a href="div.tab-pane[name=descriptors]" aria-controls="descriptors" role="tab" data-toggle="tab"><%- _t("Descriptors") %></a></li><li role="presentation"><a href="div.tab-pane[name=batches]" aria-controls="batches" role="tab" data-toggle="tab"><%- _t("Batches") %> <span id="batches-badge" class="badge"><%- bat_amount %></span></a></li></ul><div class="tab-content" style="height: calc(100% - 41px - 10px)"><div role="tabpanel" class="tab-pane active" name="descriptors" style="height: 100%; overflow-y: auto; padding-right: 5px"></div><div role="tabpanel" class="tab-pane" name="batches" style="height: 100%"></div></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 394 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file paneldescriptoredit.js
 * @brief
 * @author Medhi BOULNEMOUR (INRA UMR1095)
 * @date 2017-11-07
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let DescribableEdit = __webpack_require__(33);

let View = DescribableEdit.extend({
    onCancel: function() {
        // cancel global widget modifications
        this.cancel();

        // non existing classification entry, simply reload previous content (url has not changed)
        if (this.model.isNew()) {
            Backbone.history.loadUrl();
            return;
        }

        // does not reload models, just redo the views
        let view = this;

        // update the descriptor part of the classification entry layout
        let batchPanelLayout = application.main.viewContent().getChildView('content');

        let BatchPanelDescriptorView = __webpack_require__(77);
        let batchPanelDescriptorView = new BatchPanelDescriptorView({
            model: this.model,
            layoutData: view.layoutData,
            descriptorCollection: view.descriptorCollection
        });

        batchPanelLayout.showChildView('descriptors', batchPanelDescriptorView);
    },

    onApply: function () {
        // does not reload models, save and redo the views
        let view = this;
        let model = this.model;

        let descriptors = this.prepareDescriptors();
        if (descriptors === null) {
            return;
        }

        this.model.save({descriptors: descriptors}, {wait: true, patch: !model.isNew()}).then(function () {
            // update the descriptor part of the classification entry layout
            let batchPanelLayout = application.main.viewContent().getChildView('content');

            let BatchPanelDescriptorView = __webpack_require__(77);
            let batchPanelDescriptorView = new BatchPanelDescriptorView({
                model: model,
                layoutData: view.layoutData,
                descriptorCollection: view.descriptorCollection
            });

            batchPanelLayout.showChildView('descriptors', batchPanelDescriptorView);
        });
    },

    onShowTab: function() {
        let view = this;

        // contextual panel
        let contextLayout = application.getView().getChildView('right');
        if (!contextLayout) {
            let DefaultLayout = __webpack_require__(3);
            contextLayout = new DefaultLayout();
            application.getView().showChildView('right', contextLayout);
        }

        let TitleView = __webpack_require__(4);
        contextLayout.showChildView('title', new TitleView({title: _t("Descriptors"), glyphicon: 'fa-wrench'}));

        let actions = ['apply', 'cancel'];

        let ClassificationEntryDescriptorContextView = __webpack_require__(74);
        let contextView = new ClassificationEntryDescriptorContextView({actions: actions});
        contextLayout.showChildView('content', contextView);

        contextView.on("describable:cancel", function() {
            view.onCancel();
        });

        contextView.on("describable:apply", function() {
            view.onApply();
        });
    },

    onHideTab: function() {
        application.main.defaultRightView();
    }
});

module.exports = View;


/***/ }),
/* 395 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {/**
 * @file batchlist.js
 * @brief
 * @author Medhi BOULNEMOUR (INRA UMR1095)
 * @date 2017-11-06
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let BatchView = __webpack_require__(396);
let AdvancedTable = __webpack_require__(6);
let DescriptorsColumnsView = __webpack_require__(11);

let View = AdvancedTable.extend({
    template: __webpack_require__(16),
    className: 'advanced-table-container',
    childView: BatchView,
    childViewContainer: 'tbody.entity-list',
    userSettingName: 'panel_batches_list_columns',
    userSettingVersion: '1.0',

    defaultColumns: [
        {name: 'select', width: 'auto', sort_by: null},
        {name: 'name', width: 'auto', sort_by: '+0'},
        {name: 'layout', width: 'auto', sort_by: null},
    ],

    columnsOptions: {
        'select': {
            label: '',
            width: 'auto',
            type: 'checkbox',
            glyphicon: ['fa-square-o', 'fa-square-o'],
            event: 'batch-select',
            fixed: true
        },
        'name': {label: _t('Name'), width: 'auto', minWidth: true, event: 'view-batch-details'},
        'layout': {label: _t('Layout'), width: 'auto', minWidth: true},
    },

    templateContext: function () {
        return {
            columnsList: this.displayedColumns,
            columnsOptions: this.getOption('columns')
        }
    },

    childViewOptions: function () {
        return {
            columnsList: this.displayedColumns,
            columnsOptions: this.getOption('columns')
        }
    },

    initialize: function (options) {
        View.__super__.initialize.apply(this, arguments);
        this.relatedEntity = this.getOption('relatedEntity');
    },

    onShowTab: function () {
        let self = this;

        let contextLayout = window.application.getView().getChildView('right');
        if (!contextLayout) {
            let DefaultLayout = __webpack_require__(3);
            contextLayout = new DefaultLayout();
            window.application.getView().showChildView('right', contextLayout);
        }

        let TitleView = __webpack_require__(4);
        contextLayout.showChildView('title', new TitleView({
            title: _t("Batches actions"),
            glyphicon: 'fa-wrench'
        }));

        let actions = [
            'create-panel',
            'link-to-panel',
            'unlink-batches',
            'export-list',
            'import-list'
        ];

        let BatchListContextView = __webpack_require__(49);
        let contextView = new BatchListContextView({
            actions: actions,
            advancedTable: self
        });

        contextLayout.showChildView('content', contextView);

        contextView.on("panel:create", function () {
            self.onCreatePanel();
        });
        contextView.on("panel:link-batches", function () {
            self.onLinkToPanel();
        });
        contextView.on("batches:unlink", function () {
            self.onUnlinkBatches();
        });

        View.__super__.onShowTab.apply(this, arguments);
    },

    onBeforeDetach: function () {
        window.application.main.defaultRightView();
    },

    onUnlinkBatches: function () {

        if (!this.getSelection('select')) {
            $.alert.warning(_t("No batch selected"));
            return;
        }

        let view = this;
        $.ajax({
                type: 'PATCH',
                url: window.application.url(['accession', 'batchpanel', this.model.id, 'batches']),
                dataType: 'json',
                contentType: "application/json; charset=utf-8",
                data: JSON.stringify({
                    'action': 'remove',
                    'selection': {
                        'select': view.getSelection('select'),
                        'from': {
                            'content_type': 'accession.batchpanel',
                            'id': view.model.id
                        },
                        'filters': this.collection.filters
                        // 'search': search
                    }
                })
            }
        ).done(function () {
            if (view.getSelection('select').op === 'in') {
                // this condition by pass auto-request loop to retrieve last user position in the table
                view.collection.remove(view.getSelection('select').value);
            } else {
                view.collection.fetch();
            }
            view.collection.count();
        });
    },

    updateAmount: function () {
        // update the batches amount badge only if layout view is specified
        let panelLayoutView = this.getOption('layoutView', null);

        if (!panelLayoutView) {
            console.error("Panel layout view is missing: updateAmount() can not find amount badge to update");
            return
        }
        panelLayoutView.updateBatchesAmount(this.model.count);

        // $.ajax({
        //         type: 'GET',
        //         url: window.application.url(['accession', 'batchpanel', this.model.id, 'batches', 'count']),
        //         dataType: 'json',
        //         contentType: "application/json; charset=utf-8"
        //     }
        // ).done(function (data) {
        //     panelLayoutView.model.set('batches_amount', data.count);
        //     panelLayoutView.updateBatchesAmount(data.count);
        // });
    },

    onCreatePanel: function () {
        if (!this.getSelection('select')) {
            $.alert.warning(_t("No batch selected"));
        } else {
            window.application.accession.controllers.batchpanel.create(
                this.getSelection('select'), this.relatedEntity, this.collection.filters, this.collection.search);
        }
    },

    onLinkToPanel: function () {
        window.application.accession.controllers.batchpanel.linkBatches(
            this.getSelection('select'), this.relatedEntity, this.collection.filters, this.collection.search);
    }
});

// support of descriptors columns extension
_.extend(View.prototype, DescriptorsColumnsView);

module.exports = View;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 396 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file batch.js
 * @brief
 * @author Medhi BOULNEMOUR (INRA UMR1095)
 * @date 2017-11-06
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);

let View = Marionette.View.extend({
    tagName: 'tr',
    className: 'object batch element',
    attributes: function () {
        return {
            'scope': 'row',
            'element-id': this.model.get('id')
        }
    },
    template: __webpack_require__(12),

    templateContext: function () {
        return {
            columnsList: this.getOption('columnsList'),
            columnsOptions: this.getOption('columnsOptions')
        }
    },

    ui: {
        details: 'td.view-batch-details',
        primary_classification_entry: 'td.view-primary-classification-entry-details'
    },

    events: {
        'click @ui.details': 'viewDetails',
        'click @ui.primary_classification_entry': 'viewPrimaryClassificationEntry'
    },

    behaviors: {
        ActionBtnEvents: {
            behaviorClass: __webpack_require__(8),
            actions: {
                edit: {display: false},
                manage: {display: true, event: 'viewDetails'},
                remove: {display: true, event: 'onDeleteBatch'},
                unlink: {display: true, event: 'onUnlinkBatch'}
            }
        }
    },

    initialize: function () {
        this.listenTo(this.model, 'change', this.render, this);
    },

    actionsProperties: function () {
        let properties = {
            manage: {disabled: false},
            remove: {disabled: false}
        };

        // @todo manage permissions

        if (/*!this.model.get('can_delete') ||*/0) {
            properties.remove.disabled = true;
        }

        return properties;
    },

    onRender: function () {
    },

    viewDetails: function () {
        Backbone.history.navigate('app/accession/batch/' + this.model.get('id') + '/', {trigger: true});
    },

    viewPrimaryClassificationEntry: function () {
        Backbone.history.navigate('app/classification/classificationentry/' + this.model.get('primary_classification_entry') + '/', {trigger: true});
    },

    synonymCell: function (td) {
        let synonyms = this.model.get('synonyms');

        // @todo which one ?
        if (synonyms.length > 2) {
            let text = this.model.get('synonyms')[2].name;

            td.html(text);
        }
    },

    onDeleteBatch: function () {
        alert("@todo");
    },

    onUnlinkBatch: function () {
        let view = this;
        $.ajax({
            type: 'PATCH',
            url: window.application.url(['accession', 'batchpanel', view.model.collection.panel_id, 'batches']),
            dataType: 'json',
            contentType: "application/json; charset=utf-8",
            data: JSON.stringify({
                'action': 'remove',
                'selection': {
                    'select': {
                        "op": 'in',
                        "term": 'id',
                        "value": [view.model.id]
                    },
                    'from': {
                        'content_type': 'accession.batchpanel',
                        'id': view.model.collection.panel_id
                    }
                }
            })
        }).done(function () {
            view.model.collection.count();
            view.model.collection.remove(view.model);
        });
    },

    primaryClassificationEntryCell: function (td, value) {
        if (value && value.rank) {
            td.popupcell('init', {
                label: value.name,
                className: 'classification-rank',
                type: 'entity',
                format: {
                    model: 'classification.classificationrank',
                    details: true
                },
                value: value.rank
            });
        }
    }
});

module.exports = View;


/***/ }),
/* 397 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
with (obj) {
__p += '<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title">' +
__e( _t("Link batch/batches to existing panel") ) +
'</h4></div><div class="modal-body"><form><div class="form-group"><label class="control-label" for="panel">' +
__e( _t("Batch panel") ) +
'</label><select id="panel" style="width:100%" class="form-control"> ';
 _.each(panels, function(panel) { ;
__p += ' <option value="' +
__e( panel.id ) +
'">' +
__e( panel.name ) +
'</option> ';
 }) ;
__p += ' </select></div></form></div><div class="modal-footer"><button type="button" class="btn btn-default cancel" data-dismiss="modal">' +
__e( _t("Cancel") ) +
' </button> <button type="button" class="btn btn-success link-to-panel">' +
__e( _t("Link to panel") ) +
'</button> <button type="button" class="btn btn-success link-to-panel" data-gotopanel="1">' +
__e( _t("Link and go to panel") ) +
'</button></div></div></div>';

}
return __p
};

/*
original source:

<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title"><%- _t("Link batch/batches to existing panel") %></h4></div><div class="modal-body"><form><div class="form-group"><label class="control-label" for="panel"><%- _t("Batch panel") %></label><select id="panel" style="width:100%" class="form-control"> <% _.each(panels, function(panel) { %> <option value="<%- panel.id %>"><%- panel.name %></option> <% }) %> </select></div></form></div><div class="modal-footer"><button type="button" class="btn btn-default cancel" data-dismiss="modal"><%- _t("Cancel") %> </button> <button type="button" class="btn btn-success link-to-panel"><%- _t("Link to panel") %></button> <button type="button" class="btn btn-success link-to-panel" data-gotopanel="1"><%- _t("Link and go to panel") %></button></div></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 398 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file actiontype.js
 * @brief Action type controller
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-12-19
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);

let ActionTypeModel = __webpack_require__(38);

let DefaultLayout = __webpack_require__(3);
let TitleView = __webpack_require__(4);
let Dialog = __webpack_require__(5);

let ActionTypeLayout = __webpack_require__(240);

let Controller = Marionette.Object.extend({

    create: function() {
        $.ajax({
            type: "GET",
            url: window.application.url(['descriptor', 'layout', 'for-describable', 'accession.action']),
            dataType: 'json'
        }).done(function(data) {
            let CreateActionTypeDialog = Dialog.extend({
                attributes: {
                    'id': 'dlg_create_actiontype'
                },
                template: __webpack_require__(402),

                ui: {
                    validate: "button.continue",
                    name: "input[name=name]",
                    label: "input[name=label]"
                },

                events: {
                    'click @ui.validate': 'onContinue',
                    'input @ui.name': 'onNameInput',
                    'input @ui.label': 'onLabelInput'
                },

                initialize: function (options) {
                    CreateActionTypeDialog.__super__.initialize.apply(this);
                },

                onRender: function () {
                    CreateActionTypeDialog.__super__.onRender.apply(this);
                },

                onBeforeDestroy: function() {
                    CreateActionTypeDialog.__super__.onBeforeDestroy.apply(this);
                },

                onNameInput: function () {
                    let name = this.ui.name.val().trim();
                    let self = this;

                    if (this.validateName()) {
                        let filters = {
                            method: 'ieq',
                            fields: ['name'],
                            'name': name
                        };

                        $.ajax({
                            type: "GET",
                            url: window.application.url(['accession', 'actiontype', 'search']),
                            dataType: 'json',
                            contentType: 'application/json; charset=utf8',
                            data: {filters: JSON.stringify(filters)},
                        }).done(function (data) {
                            for (let i in data.items) {
                                let t = data.items[i];

                                if (t.value.toUpperCase() === name.toUpperCase()) {
                                    self.ui.name.validateField('failed', _t('Name already used'));
                                    return;
                                }
                            }

                            self.ui.name.validateField('ok');
                        });
                    }
                },

                onLabelInput: function () {

                },

                validateName: function() {
                    let v = this.ui.name.val().trim();

                    if (v.length > 128) {
                        this.ui.name.validateField('failed', _t('characters_max', {count: 128}));
                        return false;
                    } else if (v.length < 1) {
                        this.ui.name.validateField('failed', _t('characters_min', {count: 1}));
                        return false;
                    }

                    return true;
                },

                validateLabel: function() {
                    let v = this.ui.name.val().trim();

                    if (v.length > 128) {
                        this.ui.label.validateField('failed', _t('characters_max', {count: 128}));
                        return false;
                    } else if (v.length < 1) {
                        this.ui.label.validateField('failed', _t('characters_min', {count: 1}));
                        return false;
                    }

                    return true;
                },

                validate: function() {
                    let valid = this.validateName();

                     if (this.ui.name.hasClass('invalid') ||
                         this.ui.label.hasClass('invalid')) {
                        valid = false;
                    }

                    return valid;
                },

                onContinue: function() {
                    let view = this;

                    if (this.validate()) {
                        let name = this.ui.name.val().trim();
                        let label = this.ui.label.val().trim();

                        // create a new local model and open an edit view with this model
                        let model = new ActionTypeModel({
                            name: name,
                            label: label
                        });

                        view.destroy();

                        let defaultLayout = new DefaultLayout();
                        window.application.main.showContent(defaultLayout);

                        defaultLayout.showChildView('title', new TitleView({
                            title: _t("Action type"),
                            model: model
                        }));

                        let actionTypeLayout = new ActionTypeLayout({model: model});
                        defaultLayout.showChildView('content', actionTypeLayout);
                    }
                }
            });

            let createActionTypeView = new CreateActionTypeDialog();
            createActionTypeView.render();
        });
    }
});

module.exports = Controller;


/***/ }),
/* 399 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div name="details" style="height: 1px"></div><div class="column" style="margin-top: 10px; height: calc(100% - 1px)"><ul class="nav nav-tabs" role="tablist"><li role="presentation" class="active"><a href="div.tab-pane[name=general]" aria-controls="general" role="tab" data-toggle="tab">' +
__e( _t("General") ) +
'</a></li><li role="presentation"><a href="div.tab-pane[name=steps]" aria-controls="steps" role="tab" data-toggle="tab">' +
__e( _t("Steps") ) +
'</a></li></ul><div class="tab-content" style="height: calc(100% - 42px - 10px - 34px - 5px)"><div role="tabpanel" class="tab-pane active col-lg-offset-2 col-lg-8" name="general" style="height: 100%; overflow-y: auto"><div class="tab-frame"><div class="row"><div class="action-name-group form-group"><label>' +
__e( _t('Action type name') ) +
'</label><input name="name" class="form-control" autocomplete="false" maxlength="128" value="' +
__e( name ) +
'"></div></div><div class="row"><div class="form-group"><label>' +
__e( _t('Description') ) +
'</label><textarea maxlength="1024" class="form-control" name="description" style="min-width: 100%; max-width: 100%; min-height: 3em; max-height: 10em">' +
__e( description ) +
'</textarea></div></div></div></div><div role="tabpanel" class="tab-pane" name="steps" style="height: 100%; overflow-y: auto"><div class="tab-frame"><div class="panels panel-group" name="steps-group" style="margin-top: 10px; margin-bottom: 0px"></div><div class="panel panel-ghost add-panel-btn" style="border-radius: 8px; margin: 0px 0px"><div class="panel-heading"> ' +
__e( _t("Add new step") ) +
' </div><div class="panel-body center-block"><span class="fa fa-lg fa-plus"></span></div></div></div></div></div><div class="action-type-update form-group text-center" style="margin-left: 45%; margin-right: 45%"><button name="save" class="btn btn-success btn-block">' +
__e( _t('Update') ) +
'</button></div></div>';

}
return __p
};

/*
original source:

<div name="details" style="height: 1px"></div><div class="column" style="margin-top: 10px; height: calc(100% - 1px)"><ul class="nav nav-tabs" role="tablist"><li role="presentation" class="active"><a href="div.tab-pane[name=general]" aria-controls="general" role="tab" data-toggle="tab"><%- _t("General") %></a></li><li role="presentation"><a href="div.tab-pane[name=steps]" aria-controls="steps" role="tab" data-toggle="tab"><%- _t("Steps") %></a></li></ul><div class="tab-content" style="height: calc(100% - 42px - 10px - 34px - 5px)"><div role="tabpanel" class="tab-pane active col-lg-offset-2 col-lg-8" name="general" style="height: 100%; overflow-y: auto"><div class="tab-frame"><div class="row"><div class="action-name-group form-group"><label><%- _t('Action type name') %></label><input name="name" class="form-control" autocomplete="false" maxlength="128" value="<%- name %>"></div></div><div class="row"><div class="form-group"><label><%- _t('Description') %></label><textarea maxlength="1024" class="form-control" name="description" style="min-width: 100%; max-width: 100%; min-height: 3em; max-height: 10em"><%- description %></textarea></div></div></div></div><div role="tabpanel" class="tab-pane" name="steps" style="height: 100%; overflow-y: auto"><div class="tab-frame"><div class="panels panel-group" name="steps-group" style="margin-top: 10px; margin-bottom: 0px"></div><div class="panel panel-ghost add-panel-btn" style="border-radius: 8px; margin: 0px 0px"><div class="panel-heading"> <%- _t("Add new step") %> </div><div class="panel-body center-block"><span class="fa fa-lg fa-plus"></span></div></div></div></div></div><div class="action-type-update form-group text-center" style="margin-left: 45%; margin-right: 45%"><button name="save" class="btn btn-success btn-block"><%- _t('Update') %></button></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 400 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title">' +
__e( _t("Change step format") ) +
'</h4></div><div class="modal-body"><form><div class="panel-name form-group"><label for="panel_name">' +
__e( _t('Step type') ) +
'</label><select name="step-format" class="form-control action-step-format"></select></div></form></div><div class="modal-footer"><button type="button" class="btn btn-default cancel" data-dismiss="modal">' +
__e( _t("Cancel") ) +
'</button> <button type="button" class="btn btn-success change">' +
__e( _t("Change") ) +
'</button></div></div></div>';

}
return __p
};

/*
original source:

<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title"><%- _t("Change step format") %></h4></div><div class="modal-body"><form><div class="panel-name form-group"><label for="panel_name"><%- _t('Step type') %></label><select name="step-format" class="form-control action-step-format"></select></div></form></div><div class="modal-footer"><button type="button" class="btn btn-default cancel" data-dismiss="modal"><%- _t("Cancel") %></button> <button type="button" class="btn btn-success change"><%- _t("Change") %></button></div></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 401 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title">' +
__e( _t("New step") ) +
'</h4></div><div class="modal-body"><form><div class="panel-name form-group"><label for="panel_name">' +
__e( _t('Step type') ) +
'</label><select name="step-format" class="form-control action-step-format"></select></div></form></div><div class="modal-footer"><button type="button" class="btn btn-default cancel" data-dismiss="modal">' +
__e( _t("Cancel") ) +
'</button> <button type="button" class="btn btn-success create">' +
__e( _t("Create") ) +
'</button></div></div></div>';

}
return __p
};

/*
original source:

<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title"><%- _t("New step") %></h4></div><div class="modal-body"><form><div class="panel-name form-group"><label for="panel_name"><%- _t('Step type') %></label><select name="step-format" class="form-control action-step-format"></select></div></form></div><div class="modal-footer"><button type="button" class="btn btn-default cancel" data-dismiss="modal"><%- _t("Cancel") %></button> <button type="button" class="btn btn-success create"><%- _t("Create") %></button></div></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 402 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title">' +
__e( _t("Create a type of action") ) +
'</h4></div><div class="modal-body"><form><div class="row"><div class="col-xs-12"><div class="form-group"><label class="control-label">' +
__e( _t("Name") ) +
'</label><input class="form-control" name="name" type="text" value="" maxlength="128" autocomplete="off" autofocus="" style="width:100%"></div></div></div><div class="row"><div class="col-xs-12"><div class="form-group"><label class="control-label">' +
__e( _t("Label for current language") ) +
'</label><input class="form-control" name="label" type="text" value="" maxlength="128" autocomplete="off" autofocus="" style="width:100%"></div></div></div></form></div><div class="modal-footer"><button type="button" class="btn btn-default cancel" data-dismiss="modal">' +
__e( _t("Cancel") ) +
'</button> <button type="button" class="btn btn-success continue">' +
__e( _t("Continue") ) +
'</button></div></div></div>';

}
return __p
};

/*
original source:

<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title"><%- _t("Create a type of action") %></h4></div><div class="modal-body"><form><div class="row"><div class="col-xs-12"><div class="form-group"><label class="control-label"><%- _t("Name") %></label><input class="form-control" name="name" type="text" value="" maxlength="128" autocomplete="off" autofocus="" style="width:100%"></div></div></div><div class="row"><div class="col-xs-12"><div class="form-group"><label class="control-label"><%- _t("Label for current language") %></label><input class="form-control" name="label" type="text" value="" maxlength="128" autocomplete="off" autofocus="" style="width:100%"></div></div></div></form></div><div class="modal-footer"><button type="button" class="btn btn-default cancel" data-dismiss="modal"><%- _t("Cancel") %></button> <button type="button" class="btn btn-success continue"><%- _t("Continue") %></button></div></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 403 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file action.js
 * @brief Action controller
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2018-01-25
 * @copyright Copyright (c) 2018 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);

let ActionModel = __webpack_require__(39);

let DefaultLayout = __webpack_require__(3);
let TitleView = __webpack_require__(4);
let Dialog = __webpack_require__(5);

let ActionLayout = __webpack_require__(241);

let Controller = Marionette.Object.extend({

    create: function() {
        let CreateActionDialog = Dialog.extend({
            attributes: {
                'id': 'dlg_create_action'
            },
            template: __webpack_require__(405),

            ui: {
                validate: "button.continue",
                name: "input[name=name]",
                type: "select[name=action-type]"
            },

            events: {
                'click @ui.validate': 'onContinue',
                'input @ui.name': 'onNameInput'
            },

            initialize: function (options) {
                CreateActionDialog.__super__.initialize.apply(this);
            },

            onRender: function () {
                CreateActionDialog.__super__.onRender.apply(this);

                let self = this;

                let ActionTypeCollection = __webpack_require__(65);
                let actionTypeCollection = new ActionTypeCollection();

                actionTypeCollection.fetch({}).done(function (data) {
                    for (let i = 0; i < data.items.length; ++i) {
                        self.ui.type.append($('<option value="' + data.items[i].id + '">' + data.items[i].label + '</option>'));
                    }

                    self.ui.type.selectpicker({
                        style: 'btn-default',
                        container: 'body'
                    });
                });
            },

            onBeforeDestroy: function() {
                this.ui.type.selectpicker('destroy');

                CreateActionDialog.__super__.onBeforeDestroy.apply(this);
            },

            onNameInput: function () {
                let self = this;

                if (this.validateName()) {
                    self.ui.name.validateField('ok');
                }
            },

            validateName: function() {
                let v = this.ui.name.val().trim();

                if (v.length > 128) {
                    this.ui.name.validateField('failed', _t('characters_max', {count: 128}));
                    return false;
                } else if (v.length < 1) {
                    this.ui.name.validateField('failed', _t('characters_min', {count: 1}));
                    return false;
                }

                return true;
            },

            validate: function() {
                let valid = this.validateName();
                let type = this.ui.type.val();

                if (type === "") {
                    $.alert.error(_t("The type must be defined"));
                    valid = false;
                }

                 if (this.ui.name.hasClass('invalid')) {
                    valid = false;
                }

                return valid;
            },

            onContinue: function() {
                let view = this;

                if (this.validate()) {
                    let name = this.ui.name.val().trim();
                    let actionType = this.ui.type.val();

                    // create a new local model and open an edit view with this model
                    let model = new ActionModel({
                        name: name,
                        action_type: actionType
                    });

                    view.destroy();

                    let defaultLayout = new DefaultLayout();
                    window.application.main.showContent(defaultLayout);

                    defaultLayout.showChildView('title', new TitleView({
                        title: _t("Action"),
                        model: model
                    }));

                    let actionLayout = new ActionLayout({model: model});
                    defaultLayout.showChildView('content', actionLayout);
                }
            }
        });

        let createActionView = new CreateActionDialog();
        createActionView.render();
    },

    getActionData: function(id, stepIndex) {
        alert("todo");
    }
});

module.exports = Controller;


/***/ }),
/* 404 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div name="details" style="height: 1px"></div><div class="column" style="margin-top: 10px; height: calc(100% - 1px)"><ul class="nav nav-tabs" role="tablist"><li role="presentation" class="active"><a href="div.tab-pane[name=general]" aria-controls="general" role="tab" data-toggle="tab">' +
__e( _t("General") ) +
'</a></li><li role="presentation"><a href="div.tab-pane[name=steps]" aria-controls="steps" role="tab" data-toggle="tab">' +
__e( _t("Steps") ) +
'</a></li><li role="presentation"><a href="div.tab-pane[name=todo-entities]" aria-controls="todo-entities" role="tab" data-toggle="tab">' +
__e( _t("To Do") ) +
'</a></li><li role="presentation"><a href="div.tab-pane[name=done-entities]" aria-controls="done-entities" role="tab" data-toggle="tab">' +
__e( _t("Done") ) +
'</a></li></ul><div class="tab-content" style="height: calc(100% - 10px - 34px - 5px)"><div role="tabpanel" class="tab-pane active col-lg-offset-2 col-lg-8" name="general" style="height: calc(100% - 5px); overflow-y: auto"><div class="tab-frame"><div class="row"><div class="col-lg-6 action-type-group form-group"><label>' +
__e( _t('Action type') ) +
'</label><input name="action-type" class="form-control" autocomplete="false" maxlength="128" value="" readonly=""></div><div class="col-lg-6 action-name-group form-group"><label>' +
__e( _t('Action name') ) +
'</label><input name="name" class="form-control" autocomplete="false" maxlength="128" value="' +
__e( name ) +
'"></div></div><div class="row"><div class="col-lg-6 form-group"><label>' +
__e( _t('Action user') ) +
'</label><input name="username" class="form-control" autocomplete="false" maxlength="128" value="' +
__e( user ) +
'" readonly=""></div><div class="col-lg-6 form-group"><label>' +
__e( _t('Creation date') ) +
'</label><input name="creation-data" class="form-control" autocomplete="false" maxlength="128" value="' +
__e( moment(created_date).format('L LT') ) +
'" readonly=""></div></div><div class="row"><div class="col-lg-12 form-group"><label>' +
__e( _t('Description') ) +
'</label><textarea maxlength="1024" class="form-control" name="description" style="min-width: 100%; max-width: 100%; min-height: 3em; max-height: 10em">' +
__e( description ) +
'</textarea></div></div></div><div class="form-group text-center" style="margin-left: 40%; margin-right: 40%"><button name="save" class="btn btn-success btn-block">' +
__e( _t('Save') ) +
'</button></div></div><div role="tabpanel" class="tab-pane" name="steps" style="height: 100%; overflow-y: auto"><div class="tab-frame"><div class="panels panel-group" name="steps-group" style="margin-top: 10px"></div></div></div><div role="tabpanel" class="tab-pane" name="todo-entities" style="height: 100%; overflow-y: auto"><div class="tab-frame" name="todo-content" style="height: calc(100% - 30px); overflow-y: hidden"></div></div><div role="tabpanel" class="tab-pane" name="done-entities" style="height: 100%; overflow-y: auto"><div class="tab-frame" name="done-content" style="height: calc(100% - 30px); overflow-y: hidden"></div></div></div></div>';

}
return __p
};

/*
original source:

<div name="details" style="height: 1px"></div><div class="column" style="margin-top: 10px; height: calc(100% - 1px)"><ul class="nav nav-tabs" role="tablist"><li role="presentation" class="active"><a href="div.tab-pane[name=general]" aria-controls="general" role="tab" data-toggle="tab"><%- _t("General") %></a></li><li role="presentation"><a href="div.tab-pane[name=steps]" aria-controls="steps" role="tab" data-toggle="tab"><%- _t("Steps") %></a></li><li role="presentation"><a href="div.tab-pane[name=todo-entities]" aria-controls="todo-entities" role="tab" data-toggle="tab"><%- _t("To Do") %></a></li><li role="presentation"><a href="div.tab-pane[name=done-entities]" aria-controls="done-entities" role="tab" data-toggle="tab"><%- _t("Done") %></a></li></ul><div class="tab-content" style="height: calc(100% - 10px - 34px - 5px)"><div role="tabpanel" class="tab-pane active col-lg-offset-2 col-lg-8" name="general" style="height: calc(100% - 5px); overflow-y: auto"><div class="tab-frame"><div class="row"><div class="col-lg-6 action-type-group form-group"><label><%- _t('Action type') %></label><input name="action-type" class="form-control" autocomplete="false" maxlength="128" value="" readonly=""></div><div class="col-lg-6 action-name-group form-group"><label><%- _t('Action name') %></label><input name="name" class="form-control" autocomplete="false" maxlength="128" value="<%- name %>"></div></div><div class="row"><div class="col-lg-6 form-group"><label><%- _t('Action user') %></label><input name="username" class="form-control" autocomplete="false" maxlength="128" value="<%- user %>" readonly=""></div><div class="col-lg-6 form-group"><label><%- _t('Creation date') %></label><input name="creation-data" class="form-control" autocomplete="false" maxlength="128" value="<%- moment(created_date).format('L LT') %>" readonly=""></div></div><div class="row"><div class="col-lg-12 form-group"><label><%- _t('Description') %></label><textarea maxlength="1024" class="form-control" name="description" style="min-width: 100%; max-width: 100%; min-height: 3em; max-height: 10em"><%- description %></textarea></div></div></div><div class="form-group text-center" style="margin-left: 40%; margin-right: 40%"><button name="save" class="btn btn-success btn-block"><%- _t('Save') %></button></div></div><div role="tabpanel" class="tab-pane" name="steps" style="height: 100%; overflow-y: auto"><div class="tab-frame"><div class="panels panel-group" name="steps-group" style="margin-top: 10px"></div></div></div><div role="tabpanel" class="tab-pane" name="todo-entities" style="height: 100%; overflow-y: auto"><div class="tab-frame" name="todo-content" style="height: calc(100% - 30px); overflow-y: hidden"></div></div><div role="tabpanel" class="tab-pane" name="done-entities" style="height: 100%; overflow-y: auto"><div class="tab-frame" name="done-content" style="height: calc(100% - 30px); overflow-y: hidden"></div></div></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 405 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title">' +
__e( _t("Create an action") ) +
'</h4></div><div class="modal-body"><form><div class="row"><div class="col-xs-12"><div class="form-group"><label class="control-label">' +
__e( _t("Name") ) +
'</label><input class="form-control" name="name" type="text" value="" maxlength="128" autocomplete="off" autofocus="" style="width:100%"></div></div></div><div class="row"><div class="col-xs-12"><div class="form-group"><label class="control-label">' +
__e( _t("Label for current language") ) +
'</label><select class="form-control" name="action-type" style="width:100%"></select></div></div></div></form></div><div class="modal-footer"><button type="button" class="btn btn-default cancel" data-dismiss="modal">' +
__e( _t("Cancel") ) +
'</button> <button type="button" class="btn btn-success continue">' +
__e( _t("Continue") ) +
'</button></div></div></div>';

}
return __p
};

/*
original source:

<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title"><%- _t("Create an action") %></h4></div><div class="modal-body"><form><div class="row"><div class="col-xs-12"><div class="form-group"><label class="control-label"><%- _t("Name") %></label><input class="form-control" name="name" type="text" value="" maxlength="128" autocomplete="off" autofocus="" style="width:100%"></div></div></div><div class="row"><div class="col-xs-12"><div class="form-group"><label class="control-label"><%- _t("Label for current language") %></label><select class="form-control" name="action-type" style="width:100%"></select></div></div></div></form></div><div class="modal-footer"><button type="button" class="btn btn-default cancel" data-dismiss="modal"><%- _t("Cancel") %></button> <button type="button" class="btn btn-success continue"><%- _t("Continue") %></button></div></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 406 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file storagelocation.js
 * @brief
 * @author Medhi BOULNEMOUR (INRA UMR1095)
 * @date 2018-04-04
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);

let StorageLocationModel = __webpack_require__(407);
let Dialog = __webpack_require__(5);
let Search = __webpack_require__(32);

let Controller = Marionette.Object.extend({
    create: function (selected_parent) {
        selected_parent || (selected_parent = null);

        let storage_locations = $.ajax({
            type: "GET",
            url: window.application.url(['accession', 'storagelocation']),
            dataType: 'json'
        });

        storage_locations.then(function (data) {
            let CreateStorageLocationView = Dialog.extend({
                attributes: {
                    'id': 'dlg_create_storage'
                },
                template: __webpack_require__(408),
                templateContext: function () {
                    return {
                        storagelocations: data.items,
                        title: _t("Create a storage location"),
                    };
                },

                ui: {
                    validate: "button.create",
                    name: "#name",
                    label: "#language-label",
                    storagelocation: "#storagelocation",
                },

                events: {
                    'click @ui.validate': 'onCreate',
                    'input @ui.name': 'onNameInput',
                    'input @ui.label': 'onLabelInput',
                },

                onRender: function () {
                    CreateStorageLocationView.__super__.onRender.apply(this);
                    this.ui.storagelocation.select2(Search(
                        this.ui.storagelocation.parent(),
                        window.application.url(['accession', 'storagelocation', 'search']),
                        function (params) {
                            return {
                                method: 'icontains',
                                fields: ['label'],
                                // 'name': params.term.trim(),
                                'label': params.term.trim()
                            };
                        }, {
                            minimumInputLength: 1,
                            placeholder: _t("Enter a storage location name or leave blank to set a root location.")
                        })
                    ).fixSelect2Position();
                },

                onBeforeDestroy: function () {
                    this.ui.storagelocation.selectpicker('destroy');
                    CreateStorageLocationView.__super__.onBeforeDestroy.apply(this);
                },

                onNameInput: function () {
                    let name = this.ui.name.val().trim();
                    let self = this;

                    if (this.validateName()) {
                        let filters = {
                            method: 'ieq',
                            fields: ['name'],
                            'name': name
                        };

                        $.ajax({
                            type: "GET",
                            url: window.application.url(['accession', 'storagelocation', 'search']),
                            dataType: 'json',
                            contentType: 'application/json; charset=utf8',
                            data: {filters: JSON.stringify(filters)},
                        }).done(function (data) {
                            for (let i in data.items) {
                                let t = data.items[i];
                                if (t.name.toUpperCase() === name.toUpperCase()) {
                                    self.ui.name.validateField('failed', _t('The name of the storage location is already used'));
                                    return;
                                }
                            }

                            self.ui.name.validateField('ok');
                        });
                    }
                },

                onLabelInput: function () {
                    let label = this.ui.label.val().trim();
                    this.ui.name.val(label.normalize('NFD').replace(/[\u0300-\u036f]/g, "").replace(/\s/g, "_").toUpperCase());
                    this.ui.name.trigger('input')
                },

                validateName: function () {
                    let name_value = this.ui.name.val().trim();

                    if (name_value.length > 128) {
                        this.ui.name.validateField('failed', _t('characters_max', {count: 128}));
                        return false;
                    } else if (name_value.length < 1) {
                        this.ui.name.validateField('failed', _t('characters_min', {count: 1}));
                        return false;
                    }
                    return true;
                },

                validate: function () {
                    let valid = this.validateName();

                    if (this.ui.name.hasClass('invalid')) {
                        valid = false;
                    }

                    return valid;
                },

                onCreate: function () {
                    let self = this;

                    if (self.validate()) {
                        let parent_storage_location = parseInt(this.ui.storagelocation.val());
                        let name = this.ui.name.val();
                        let label = this.ui.label.val();

                        let model = new StorageLocationModel({
                            name: name,
                            label: label,
                            parent_storage_location: parent_storage_location
                        });

                        model.save();
                        self.destroy();
                    }
                }
            });

            let createStorageLocationView = new CreateStorageLocationView();
            createStorageLocationView.render();
        });
    }
});

module.exports = Controller;


/***/ }),
/* 407 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file storagelocation.js
 * @brief Storage location model
 * @author Medhi BOULNEMOUR (INRA UMR1095)
 * @date 2018-04-04
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Backbone = __webpack_require__(7);

let Model = Backbone.Model.extend({
    url: function () {
        if (this.isNew())
            return window.application.url(['accession', 'storagelocation']);
        else
            return window.application.url(['accession', 'storagelocation', this.get('id')]);
    },

    defaults: {
        id: null,
        name: '',
        label: ''
    },

    parse: function (data) {
        return data;
    },

    validate: function (attrs) {
        let errors = {};
        let hasError = false;
        if (!attrs.name) {
            errors.name = 'Name must be valid and at least 3 characters length';
            hasError = true;
        }

        if (hasError) {
            return errors;
        }
    }
});

module.exports = Model;


/***/ }),
/* 408 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title">' +
__e( title ) +
'</h4></div><div class="modal-body"><form><div class="form-group"><label class="control-label" for="name">' +
__e( _t("Name") ) +
'</label><input class="form-control name" id="name" type="text" name="name" value="" maxlength="128" autocomplete="off" style="width:100%" autofocus=""></div><div class="form-group"><label class="control-label" for="language-label">' +
__e( _t("Label for current language") ) +
'</label><input class="form-control language-label" id="language-label" type="text" name="label" value="" maxlength="128" autocomplete="off" style="width:100%"></div><div class="form-group"><label class="control-label" for="storagelocation">' +
__e( _t("Parent storage location") ) +
'</label><select id="storagelocation" style="width:100%" class="form-control"></select></div></form></div><div class="modal-footer"><button type="button" class="btn btn-default cancel" data-dismiss="modal">' +
__e( _t("Cancel") ) +
' </button> <button type="button" class="btn btn-success create">' +
__e( _t("Create") ) +
'</button></div></div></div>';

}
return __p
};

/*
original source:

<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title"><%- title %></h4></div><div class="modal-body"><form><div class="form-group"><label class="control-label" for="name"><%- _t("Name") %></label><input class="form-control name" id="name" type="text" name="name" value="" maxlength="128" autocomplete="off" style="width:100%" autofocus=""></div><div class="form-group"><label class="control-label" for="language-label"><%- _t("Label for current language") %></label><input class="form-control language-label" id="language-label" type="text" name="label" value="" maxlength="128" autocomplete="off" style="width:100%"></div><div class="form-group"><label class="control-label" for="storagelocation"><%- _t("Parent storage location") %></label><select id="storagelocation" style="width:100%" class="form-control"></select></div></form></div><div class="modal-footer"><button type="button" class="btn btn-default cancel" data-dismiss="modal"><%- _t("Cancel") %> </button> <button type="button" class="btn btn-success create"><%- _t("Create") %></button></div></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 409 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file accession.js
 * @brief Accession router
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-07-19
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);

let AccessionModel = __webpack_require__(37);
let AccessionCollection = __webpack_require__(45);
let AccessionListView = __webpack_require__(410);
let EntityListFilterView = __webpack_require__(14);

let DefaultLayout = __webpack_require__(3);
let ScrollingMoreView = __webpack_require__(10);
let TitleView = __webpack_require__(4);
let AccessionLayout = __webpack_require__(219);

let Router = Marionette.AppRouter.extend({
    routes : {
        "app/accession/accession/": "getAccessionList",
        "app/accession/accession/:id/*tab": "getAccession"
    },

    getAccessionList : function(options) {
        options || (options = {});

        let collection = new AccessionCollection([], {
            filters: (options.filters || {}),
            search: (options.search || {})
        });

        let defaultLayout = new DefaultLayout({});
        window.application.main.showContent(defaultLayout);

        defaultLayout.showChildView('title', new TitleView({title: _t("List of accessions")}));

        // get available columns
        let columns = window.application.main.cache.lookup({
            type: 'entity_columns',
            format: {model: 'accession.accession'}
        });

        columns.done(function (data) {
            let accessionListView = new AccessionListView({
                collection : collection, columns: data[0].value,
                onRender: function () {
                    this.onShowTab();
                }
            });

            defaultLayout.showChildView('content', accessionListView);
            defaultLayout.showChildView('content-bottom', new ScrollingMoreView({
                collection: collection,
                targetView: accessionListView
            }));

            defaultLayout.showChildView('bottom', new EntityListFilterView({
                collection: collection, columns: data[0].value}));

            accessionListView.query();
        });
    },

    getAccession : function(id, tab) {
        tab || (tab = "");

        let accession = new AccessionModel({id: id});

        let defaultLayout = new DefaultLayout();
        window.application.main.showContent(defaultLayout);

        accession.fetch().then(function() {
            if (!defaultLayout.isRendered()) {
                return;
            }

            defaultLayout.showChildView('title', new TitleView({title: _t("Accession"), model: accession}));

            let accessionLayout = new AccessionLayout({model: accession, initialTab: tab.replace('/', '')});
            defaultLayout.showChildView('content', accessionLayout);
        });
    }
});

module.exports = Router;


/***/ }),
/* 410 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {/**
 * @file accessionlist.js
 * @brief Accession list view
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-12-19
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let AccessionView = __webpack_require__(411);
let AdvancedTable = __webpack_require__(6);
let DescriptorsColumnsView = __webpack_require__(11);

let View = AdvancedTable.extend({
    className: 'accession-list advanced-table-container',
    childView: AccessionView,
    userSettingName: 'accessions_list_columns',
    userSettingVersion: '1.2',

    defaultColumns: [
        {name: 'select', width: 'auto', sort_by: null},
        {name: 'code', width: 'auto', sort_by: null},
        {name: 'name', width: 'auto', sort_by: '+0'},
        {name: 'primary_classification_entry', width: 'auto', sort_by: null},
        {name: 'layout', width: 'auto', sort_by: null},
        // {name: 'synonym', width: 'auto', sort_by: null}
    ],

    columnsOptions: {
        'select': {
            label: '',
            width: 'auto',
            type: 'checkbox',
            glyphicon: ['fa-square-o', 'fa-square-o'],
            event: 'accession-select',
            fixed: true
        },
        'code': {label: _t('Code'), width: 'auto', minWidth: true, event: 'view-accession-details'},
        'name': {label: _t('Name'), width: 'auto', minWidth: true, event: 'view-accession-details'},
        'primary_classification_entry': {
            label: _t('Classification'),
            width: 'auto',
            minWidth: true,
            event: 'view-primary-classification-entry-details',
            custom: 'primaryClassificationEntryCell',
            field: 'name'
        },
        'layout': {label: _t('Layout'), width: 'auto', minWidth: true},
        // 'synonym': {
        //     label: _t('Synonym'),
        //     width: 'auto',
        //     minWidth: true,
        //     custom: 'synonymCell',
        //     field: 'name'
        // }
    },

    initialize: function (options) {
        View.__super__.initialize.apply(this, arguments);

        this.relatedEntity = this.getOption('relatedEntity');
        this.filters = this.getOption('filters');
    },

    onShowTab: function () {
        let view = this;

        let contextLayout = window.application.getView().getChildView('right');
        if (!contextLayout) {
            let DefaultLayout = __webpack_require__(3);
            contextLayout = new DefaultLayout();
            window.application.getView().showChildView('right', contextLayout);
        }

        let TitleView = __webpack_require__(4);
        contextLayout.showChildView('title', new TitleView({title: _t("Accession actions"), glyphicon: 'fa-wrench'}));

        let actions = [
            'create-panel',
            'link-to-panel',
            'export-list',
            'import-list'
        ];

        let AccessionListContextView = __webpack_require__(46);
        let contextView = new AccessionListContextView({actions: actions});
        contextLayout.showChildView('content', contextView);

        contextView.on("panel:create", function () {
            view.onCreatePanel();
        });

        contextView.on("panel:link-accessions", function () {
            view.onLinkToPanel();
        });

        contextView.on("accession:export-list", function () {
            view.onExportList();
        });

        contextView.on("accession:import-list", function () {
            view.onImportList();
        });

        View.__super__.onShowTab.apply(this, arguments);
    },

    onBeforeDetach: function () {
        window.application.main.defaultRightView();
    },

    onCreatePanel: function () {
        if (!this.getSelection('select')) {
            $.alert.warning(_t("No accession selected"));
        } else {
            window.application.accession.controllers.accessionpanel.create(
                this.getSelection('select'), this.relatedEntity, this.collection.filters, this.collection.search);
        }
    },

    onLinkToPanel: function () {
        window.application.accession.controllers.accessionpanel.linkAccessions(
            this.getSelection('select'), this.relatedEntity, this.collection.filters, this.collection.search);
    },

    onExportList: function() {
        let ExportDialog = __webpack_require__(242);
        let exportDialog = new ExportDialog({collection: this.collection, exportedColumns: this.displayedColumns});

        exportDialog.render();
    },

    onImportList: function() {
        alert("not yet implemented");
    }
});

// support of descriptors columns extension
_.extend(View.prototype, DescriptorsColumnsView);

module.exports = View;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 411 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file accession.js
 * @brief Accession item view
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-12-19
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);

let View = Marionette.View.extend({
    tagName: 'tr',
    className: 'object accession element',
    attributes: function () {
        return {
            'scope': 'row',
            'element-id': this.model.get('id')
        }
    },
    template: __webpack_require__(12),

    templateContext: function () {
        return {
            columnsList: this.getOption('columnsList'),
            columnsOptions: this.getOption('columnsOptions')
        }
    },

    ui: {
        details: 'td.view-accession-details',
        primary_classification_entry: 'td.view-primary-classification-entry-details'
    },

    events: {
        'click @ui.details': 'viewDetails',
        'click @ui.primary_classification_entry': 'viewPrimaryClassificationEntry'
    },

    behaviors: {
        ActionBtnEvents: {
            behaviorClass: __webpack_require__(8),
            actions: {
                edit: {display: false},
                manage: {display: true, event: 'viewDetails'},
                remove: {display: true, event: 'onDeleteAccession'}
            }
        }
    },

    initialize: function () {
        this.listenTo(this.model, 'change', this.render, this);
    },

    actionsProperties: function () {
        let properties = {
            manage: {disabled: false},
            remove: {disabled: false}
        };

        // @todo manage permissions

        if (/*!this.model.get('can_delete') ||*/0) {
            properties.remove.disabled = true;
        }

        return properties;
    },

    viewDetails: function () {
        Backbone.history.navigate('app/accession/accession/' + this.model.get('id') + '/', {trigger: true});
    },

    viewPrimaryClassificationEntry: function () {
        Backbone.history.navigate('app/classification/classificationentry/' + this.model.get('primary_classification_entry') + '/', {trigger: true});
    },

    onDeleteAccession: function () {
        alert("@todo");
    },

    primaryClassificationEntryCell: function (td, value) {
        if (value && value.rank) {
            td.popupcell('init', {
                label: value.name,
                className: 'classification-rank',
                type: 'entity',
                format: {
                    model: 'classification.classificationrank',
                    details: true
                },
                value: value.rank
            });
        }
    }
});

module.exports = View;


/***/ }),
/* 412 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title">' +
((__t = ( _t("Export dialog") )) == null ? '' : __t) +
'</h4></div><div class="modal-body"><div class="form-group"><label class="control-label">' +
__e( _t("Format") ) +
'</label><select class="form-control" name="format"><option value="csv">' +
__e( _t("CSV (comma separated tab)") ) +
'</option><option value="xlsx">' +
__e( _t("XLSX Excel format") ) +
'</option></select></div></div><div class="modal-footer"><button type="button" class="btn btn-default cancel" data-dismiss="modal">' +
__e( _t("Cancel") ) +
'</button> <button type="button" class="btn btn-success confirm">' +
__e( _t("Export") ) +
'</button></div></div></div>';

}
return __p
};

/*
original source:

<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title"><%= _t("Export dialog") %></h4></div><div class="modal-body"><div class="form-group"><label class="control-label"><%- _t("Format") %></label><select class="form-control" name="format"><option value="csv"><%- _t("CSV (comma separated tab)") %></option><option value="xlsx"><%- _t("XLSX Excel format") %></option></select></div></div><div class="modal-footer"><button type="button" class="btn btn-default cancel" data-dismiss="modal"><%- _t("Cancel") %></button> <button type="button" class="btn btn-success confirm"><%- _t("Export") %></button></div></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 413 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file batch.js
 * @brief Batch router
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-02-14
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);

let BatchModel = __webpack_require__(48);
let BatchCollection = __webpack_require__(47);
let BatchListView = __webpack_require__(69);
let EntityListFilterView = __webpack_require__(14);

let DefaultLayout = __webpack_require__(3);
let ScrollingMoreView = __webpack_require__(10);
let TitleView = __webpack_require__(4);
let BatchLayout = __webpack_require__(72);

let Router = Marionette.AppRouter.extend({
    routes: {
        "app/accession/batch/": "getBatchList",
        "app/accession/accession/:id/batch/": "getAccessionBatchList",
        "app/accession/batch/:id/*tab": "getBatch"
    },

    getBatchList: function (options) {
        options || (options = {});

        let collection = new BatchCollection([], {
            filters: (options.filters || {}),
            search: (options.search || {})
        });

        let defaultLayout = new DefaultLayout({});
        window.application.main.showContent(defaultLayout);

        defaultLayout.showChildView('title', new TitleView({title: _t("List of batches")}));

        let columns = window.application.main.cache.lookup({
            type: 'entity_columns',
            format: {model: 'accession.batch'}
        });

        columns.done(function (data) {
            let batchListView = new BatchListView({
                collection: collection,
                columns: data[0].value,
                onRender: function () {
                    this.onShowTab();
                }
            });

            defaultLayout.showChildView('content', batchListView);
            defaultLayout.showChildView('content-bottom', new ScrollingMoreView({targetView: batchListView}));
            defaultLayout.showChildView('bottom', new EntityListFilterView({
                collection: collection, columns: data[0].value
            }));

            batchListView.query();
        });
    },

    getAccessionBatchList: function (id) {
        let collection = new BatchCollection({accession_id: id});

        let defaultLayout = new DefaultLayout({});
        window.application.main.showContent(defaultLayout);

        defaultLayout.showChildView('title', new TitleView({title: _t("List of batches for the accession")}));

        // get available columns
        let columns = window.application.main.cache.lookup({
            type: 'entity_columns',
            format: {model: 'accession.batch'}
        });

        $.when(columns, collection.fetch()).then(function (data) {
            let batchListView = new BatchListView({
                collection: collection,
                columns: data[0].value,
                accessionId: id
            });

            defaultLayout.showChildView('content', batchListView);
            defaultLayout.showChildView('content-bottom', new ScrollingMoreView({targetView: batchListView}));
        });
    },

    getBatch: function (id, tab) {
        tab || (tab = "");

        let batch = new BatchModel({id: id});

        let defaultLayout = new DefaultLayout();
        window.application.main.showContent(defaultLayout);

        batch.fetch().then(function () {
            if (!defaultLayout.isRendered()) {
                return;
            }
            defaultLayout.showChildView('title', new TitleView({title: _t("Batch"), model: batch}));

            let batchLayout = new BatchLayout({model: batch, initialTab: tab.replace('/', '')});
            defaultLayout.showChildView('content', batchLayout);
        });
    }
});

module.exports = Router;


/***/ }),
/* 414 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file panel.js
 * @brief
 * @author Medhi BOULNEMOUR (INRA UMR1095)
 * @date 2017-09-12
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);

let PanelModel = __webpack_require__(71);
let PanelCollection = __webpack_require__(225);
let PanelListView = __webpack_require__(415);
let EntityListFilterView = __webpack_require__(14);
let DefaultLayout = __webpack_require__(3);
let ScrollingMoreView = __webpack_require__(10);
let TitleView = __webpack_require__(4);
let PanelLayout = __webpack_require__(231);

let Router = Marionette.AppRouter.extend({
    routes: {
        "app/accession/accessionpanel/": "getPanelList",
        "app/accession/accessionpanel/:id/*tab": "getPanel"
    },

    getPanelList: function (options) {
        options || (options = {});

        let collection = new PanelCollection({
            filters: (options.filters || {})
        });

        let defaultLayout = new DefaultLayout({});
        window.application.main.showContent(defaultLayout);

        defaultLayout.showChildView('title', new TitleView({title: _t("List of accession panels")}));

        let columns = window.application.main.cache.lookup({
            type: 'entity_columns',
            format: {model: 'accession.accessionpanel'}
        });

        columns.done(function (data) {
            let panelListView = new PanelListView({collection: collection, columns: data[0].value});

            defaultLayout.showChildView('content', panelListView);
            defaultLayout.showChildView('content-bottom', new ScrollingMoreView({
                collection: collection,
                targetView: panelListView
            }));

            defaultLayout.showChildView('bottom', new EntityListFilterView({
                collection: collection, columns: data[0].value
            }));

            panelListView.query();
        });
    },

    getPanel: function (id, tab) {
        tab || (tab = "accessions");

        let panel = new PanelModel({id: id});

        let defaultLayout = new DefaultLayout();
        window.application.main.showContent(defaultLayout);

        panel.fetch().then(function () {
            if (!defaultLayout.isRendered()) {
                return;
            }

            defaultLayout.showChildView('title', new TitleView({title: _t("Accession panel"), model: panel}));

            let panelLayout = new PanelLayout({model: panel, initialTab: tab.replace('/', '')});
            defaultLayout.showChildView('content', panelLayout);
        });
    }
});

module.exports = Router;


/***/ }),
/* 415 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {/**
 * @file panellist.js
 * @brief
 * @author Medhi BOULNEMOUR (INRA UMR1095)
 * @date 2017-09-12
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let PanelView = __webpack_require__(416);
let AdvancedTable = __webpack_require__(6);
let DescriptorsColumnsView = __webpack_require__(11);

let View = AdvancedTable.extend({
    template: __webpack_require__(16),
    className: "panel-list advanced-table-container",
    childView: PanelView,
    childViewContainer: 'tbody.entity-list',
    userSettingName: 'panel_list_columns',
    userSettingVersion: '1.0',

    defaultColumns: [
        // {name: 'select', width: 'auto', sort_by: null},
        {name: 'name', width: 'auto', sort_by: '+0'}
    ],

    columnsOptions: {
        // 'select': {
        //     label: '',
        //     width: 'auto',
        //     type: 'checkbox',
        //     glyphicon: ['fa-square-o', 'fa-square-o'],
        //     event: 'panel-select',
        //     fixed: true
        // },
        'name': {label: _t('Name'), width: 'auto', minWidth: true, event: 'view-panel-details'}
    },

    templateContext: function () {
        return {
            columnsList: this.displayedColumns,
            columnsOptions: this.getOption('columns')
        }
    },

    childViewOptions: function () {
        return {
            columnsList: this.displayedColumns,
            columnsOptions: this.getOption('columns')
        }
    },

    initialize: function (options) {
        View.__super__.initialize.apply(this, arguments);
    },

    onRender: function () {
        View.__super__.onRender.apply(this, arguments);
       // this.onShowTab();
    },

    onUnion: function () {
        alert('todo!')
    },

    onIntersection: function () {
        alert('todo!')
    },

    onCreatePanel: function () {
        window.application.accession.controllers.accessionpanel.create();
    },

    onBeforeDetach: function () {
        window.application.main.defaultRightView();
    },

    onShowTab: function () {
        let view = this;

        let DefaultLayout = __webpack_require__(3);
        let contextLayout = new DefaultLayout();
        window.application.getView().showChildView('right', contextLayout);

        let actions = [
            'create-panel',
            'union',
            'intersection'
        ];

        let PanelListContextView = __webpack_require__(417);
        let contextView = new PanelListContextView({actions: actions});

        let TitleView = __webpack_require__(4);
        contextLayout.showChildView('title', new TitleView({title: _t("Panel actions"), glyphicon: 'fa-wrench'}));
        contextLayout.showChildView('content', contextView);

        contextView.on("panel:create", function () {
            view.onCreatePanel();
        });
        contextView.on("panel:union", function () {
            view.onUnion();
        });
        contextView.on("panel:intersection", function () {
            view.onIntersection();
        });

        View.__super__.onShowTab.apply(this, arguments);
    }
});

// support of descriptors columns extension
_.extend(View.prototype, DescriptorsColumnsView);

module.exports = View;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 416 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file panel.js
 * @brief
 * @author Medhi BOULNEMOUR (INRA UMR1095)
 * @date 2017-09-12
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);

let View = Marionette.View.extend({
    tagName: 'tr',
    className: 'object accessionpanel element',
    attributes: function () {
        return {
            'scope': 'row',
            'element-id': this.model.get('id')
        }
    },
    template: __webpack_require__(12),

    templateContext: function () {
        return {
            columnsList: this.getOption('columnsList'),
            columnsOptions: this.getOption('columnsOptions')
        }
    },

    ui: {
        details: 'td.view-panel-details'
    },

    events: {
        'click @ui.details': 'viewDetails'
    },

    behaviors: {
        ActionBtnEvents: {
            behaviorClass: __webpack_require__(8),
            actions: {
                tag: {title: _t('Rename'), display: true, event: 'onRename'},
                edit: {display: false},
                manage: {display: true, event: 'viewDetails'},
                remove: {display: true, event: 'onDeletePanel'}
            }
        }
    },

    initialize: function () {
        this.listenTo(this.model, 'change', this.render, this);
    },

    actionsProperties: function () {
        let properties = {
            manage: {disabled: false},
            remove: {disabled: false}
        };

        // @todo manage permissions

        if (/*!this.model.get('can_delete') ||*/0) {
            properties.remove.disabled = true;
        }

        return properties;
    },

    onRender: function () {
    },

    viewDetails: function () {
        Backbone.history.navigate('app/accession/accessionpanel/' + this.model.get('id') + '/', {trigger: true});
    },

    onRename: function () {
        if (!window.application.permission.manager.isStaff()) {
            return false;
        }

        let ChangeName = __webpack_require__(20);
        let changeName = new ChangeName({
            model: this.model,
            title: _t("Rename the accession panel")
        });

        changeName.render();
        changeName.ui.name.val(this.model.get('name'));

        return false;
    },

    onDeletePanel: function () {
        window.application.accession.controllers.accessionpanel.destroy(this.model);
    }
});

module.exports = View;


/***/ }),
/* 417 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file panellistcontext.js
 * @brief
 * @author Medhi BOULNEMOUR (INRA UMR1095)
 * @date 2017-10-03
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);

let View = Marionette.View.extend({
    tagName: 'div',
    template: __webpack_require__(243),
    className: "context-panellist",
    templateContext: function () {
        return {
            actions: this.getOption('actions'),
            options: {
                'create-panel': {className: 'btn-default', label: _t('Create new panel')},
                'union': {className: 'btn-default', label: _t('Union')},
                'intersection': {className: 'btn-default', label: _t('Intersection')}
            }
        }
    },

    ui: {
        'create-panel': 'button[name="create-panel"]',
        'union': 'button[name="union"]',
        'intersection': 'button[name="intersection"]'
    },

    triggers: {
        "click @ui.create-panel": "panel:create",
        "click @ui.union": "panel:union",
        "click @ui.intersection": "panel:intersection"
    },

    initialize: function (options) {
        options || (options = {actions: []});
    }
});

module.exports = View;

/***/ }),
/* 418 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file batchpanel.js
 * @brief
 * @author Medhi BOULNEMOUR (INRA UMR1095)
 * @date 2017-11-03
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);

let PanelModel = __webpack_require__(75);
let PanelCollection = __webpack_require__(228);
let PanelListView = __webpack_require__(419);
let EntityListFilterView = __webpack_require__(14);
let DefaultLayout = __webpack_require__(3);
let ScrollingMoreView = __webpack_require__(10);
let TitleView = __webpack_require__(4);
let PanelLayout = __webpack_require__(237);

let Router = Marionette.AppRouter.extend({
    routes: {
        "app/accession/batchpanel/": "getPanelList",
        "app/accession/batchpanel/:id/*tab": "getPanel"
    },

    getPanelList: function (options) {
        options || (options = {});

        let collection = new PanelCollection({
            filters: (options.filters || {})
        });

        let defaultLayout = new DefaultLayout({});
        application.main.showContent(defaultLayout);

        defaultLayout.showChildView('title', new TitleView({title: _t("List of batch panels")}));

        let columns = application.main.cache.lookup({
            type: 'entity_columns',
            format: {model: 'accession.batchpanel'}
        });

        columns.done(function (data) {
            let panelListView = new PanelListView({collection: collection, columns: data[0].value});

            defaultLayout.showChildView('content', panelListView);
            defaultLayout.showChildView('content-bottom', new ScrollingMoreView({
                collection: collection,
                targetView: panelListView
            }));

            defaultLayout.showChildView('bottom', new EntityListFilterView({
                collection: collection, columns: data[0].value
            }));

            panelListView.query();
        });
    },

    getPanel: function (id, tab) {
        tab || (tab = "batches");

        let panel = new PanelModel({id: id});

        let defaultLayout = new DefaultLayout();
        application.main.showContent(defaultLayout);

        panel.fetch().then(function () {
            if (!defaultLayout.isRendered()) {
                return;
            }

            defaultLayout.showChildView('title', new TitleView({title: _t("Batch panel"), model: panel}));

            let panelLayout = new PanelLayout({model: panel, initialTab: tab.replace('/', '')});
            defaultLayout.showChildView('content', panelLayout);
        });
    }
});

module.exports = Router;


/***/ }),
/* 419 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {/**
 * @file panellist.js
 * @brief
 * @author Medhi BOULNEMOUR (INRA UMR1095)
 * @date 2017-11-06
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let PanelView = __webpack_require__(420);
let AdvancedTable = __webpack_require__(6);
let DescriptorsColumnsView = __webpack_require__(11);

let View = AdvancedTable.extend({
    template: __webpack_require__(16),
    className: "panel-list advanced-table-container",
    childView: PanelView,
    childViewContainer: 'tbody.entity-list',
    userSettingName: 'panel_list_columns',
    userSettingVersion: '1.0',

    defaultColumns: [
        // {name: 'select', width: 'auto', sort_by: null},
        {name: 'name', width: 'auto', sort_by: '+0'}
    ],

    columnsOptions: {
        // 'select': {
        //     label: '',
        //     width: 'auto',
        //     type: 'checkbox',
        //     glyphicon: ['fa-square-o', 'fa-square-o'],
        //     event: 'panel-select',
        //     fixed: true
        // },
        'name': {label: _t('Name'), width: 'auto', minWidth: true, event: 'view-panel-details'}
    },

    templateContext: function () {
        return {
            columnsList: this.displayedColumns,
            columnsOptions: this.getOption('columns')
        }
    },

    childViewOptions: function () {
        return {
            columnsList: this.displayedColumns,
            columnsOptions: this.getOption('columns')
        }
    },

    initialize: function (options) {
        View.__super__.initialize.apply(this, arguments);
    },

    onRender: function () {
        View.__super__.onRender.apply(this, arguments);
        //this.onShowTab();
    },

    onUnion: function () {
        alert('todo!')
    },

    onIntersection: function () {
        alert('todo!')
    },

    onCreatePanel: function () {
        application.accession.controllers.batchpanel.create();
    },

    onBeforeDetach: function () {
        application.main.defaultRightView();
    },

    onShowTab: function () {
        let view = this;

        let DefaultLayout = __webpack_require__(3);
        let contextLayout = new DefaultLayout();
        application.getView().showChildView('right', contextLayout);

        let actions = [
            'create-panel',
            'union',
            'intersection'
        ];

        let PanelListContextView = __webpack_require__(421);
        let contextView = new PanelListContextView({actions: actions});

        let TitleView = __webpack_require__(4);
        contextLayout.showChildView('title', new TitleView({title: _t("Panel actions"), glyphicon: 'fa-wrench'}));
        contextLayout.showChildView('content', contextView);

        contextView.on("panel:create", function () {
            view.onCreatePanel();
        });
        contextView.on("panel:union", function () {
            view.onUnion();
        });
        contextView.on("panel:intersection", function () {
            view.onIntersection();
        });

        View.__super__.onShowTab.apply(this, arguments);
    }
});

// support of descriptors columns extension
_.extend(View.prototype, DescriptorsColumnsView);

module.exports = View;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 420 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file panel.js
 * @brief
 * @author Medhi BOULNEMOUR (INRA UMR1095)
 * @date 2017-11-07
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);

let View = Marionette.View.extend({
    tagName: 'tr',
    className: 'object batchpanel element',
    attributes: function () {
        return {
            'scope': 'row',
            'element-id': this.model.get('id')
        }
    },
    template: __webpack_require__(12),

    templateContext: function () {
        return {
            columnsList: this.getOption('columnsList'),
            columnsOptions: this.getOption('columnsOptions')
        }
    },

    ui: {
        details: 'td.view-panel-details'
    },

    events: {
        'click @ui.details': 'viewDetails'
    },

    behaviors: {
        ActionBtnEvents: {
            behaviorClass: __webpack_require__(8),
            actions: {
                tag: {title: _t('Rename'), display: true, event: 'onRename'},
                edit: {display: false},
                manage: {display: true, event: 'viewDetails'},
                remove: {display: true, event: 'onDeletePanel'}
            }
        }
    },

    initialize: function () {
        this.listenTo(this.model, 'change', this.render, this);
    },

    actionsProperties: function () {
        let properties = {
            manage: {disabled: false},
            remove: {disabled: false}
        };

        // @todo manage permissions

        if (/*!this.model.get('can_delete') ||*/0) {
            properties.remove.disabled = true;
        }

        return properties;
    },

    onRender: function () {
    },

    viewDetails: function () {
        Backbone.history.navigate('app/accession/batchpanel/' + this.model.get('id') + '/', {trigger: true});
    },

    onRename: function () {
        if (!window.application.permission.manager.isStaff()) {
            return false;
        }

        let ChangeName = __webpack_require__(20);
        let changeName = new ChangeName({
            model: this.model,
            title: _t("Rename the batch panel")
        });

        changeName.render();
        changeName.ui.name.val(this.model.get('name'));

        return false;
    },

    onDeletePanel: function () {
        window.application.accession.controllers.batchpanel.destroy(this.model);
    }
});

module.exports = View;


/***/ }),
/* 421 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file panellistcontext.js
 * @brief
 * @author Medhi BOULNEMOUR (INRA UMR1095)
 * @date 2017-11-07
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);

let View = Marionette.View.extend({
    tagName: 'div',
    template: __webpack_require__(243),
    className: "context-panellist",
    templateContext: function () {
        return {
            actions: this.getOption('actions'),
            options: {
                'create-panel': {className: 'btn-default', label: _t('Create new panel')},
                'union': {className: 'btn-default', label: _t('Union')},
                'intersection': {className: 'btn-default', label: _t('Intersection')}
            }
        }
    },

    ui: {
        'create-panel': 'button[name="create-panel"]',
        'union': 'button[name="union"]',
        'intersection': 'button[name="intersection"]'
    },

    triggers: {
        "click @ui.create-panel": "panel:create",
        "click @ui.union": "panel:union",
        "click @ui.intersection": "panel:intersection"
    },

    initialize: function (options) {
        options || (options = {actions: []});
    }
});

module.exports = View;

/***/ }),
/* 422 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file actiontype.js
 * @brief
 * @author Frederic SCHERMA (INRA UMR1095)
 * @date 2017-12-01
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);

let ActionTypeModel = __webpack_require__(38);
let ActionTypeCollection = __webpack_require__(65);
let EntityListFilterView = __webpack_require__(14);
let ActionTypeListView = __webpack_require__(423);
let DefaultLayout = __webpack_require__(3);
let ScrollingMoreView = __webpack_require__(10);
let TitleView = __webpack_require__(4);
let ActionTypeLayout = __webpack_require__(240);

let Router = Marionette.AppRouter.extend({
    routes: {
        "app/accession/actiontype/": "getActionTypeList",
        "app/accession/actiontype/:id/*tab": "getActionType"
    },

    getActionTypeList: function (options) {
        options || (options = {});

        let collection = new ActionTypeCollection({
            filters: (options.filters || {})
        });

        let defaultLayout = new DefaultLayout({});
        window.application.main.showContent(defaultLayout);

        defaultLayout.showChildView('title', new TitleView({title: _t("List of types of actions")}));

        let columns = window.application.main.cache.lookup({
            type: 'entity_columns',
            format: {model: 'accession.actiontype'}
        });

        columns.done(function (data) {
            let actionTypeListView = new ActionTypeListView({collection: collection, columns: data[0].value});

            defaultLayout.showChildView('content', actionTypeListView);
            defaultLayout.showChildView('content-bottom', new ScrollingMoreView({
                collection: collection,
                targetView: actionTypeListView
            }));

            defaultLayout.showChildView('bottom', new EntityListFilterView({
                collection: collection, columns: data[0].value
            }));

            actionTypeListView.query();
        });
    },

    getActionType: function (id, tab) {
        tab || (tab = "");

        let actionType = new ActionTypeModel({id: id});

        let defaultLayout = new DefaultLayout();
        window.application.main.showContent(defaultLayout);

        actionType.fetch().then(function() {
            if (!defaultLayout.isRendered()) {
                return;
            }

            defaultLayout.showChildView('title', new TitleView({title: _t("Type of action"), model: actionType}));

            let actionTypeLayout = new ActionTypeLayout({model: actionType, initialTab: tab.replace('/', '')});
            defaultLayout.showChildView('content', actionTypeLayout);
        });
    }
});

module.exports = Router;


/***/ }),
/* 423 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {/**
 * @file actiontypelist.js
 * @brief Action type list view
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-12-01
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let ActionTypeView = __webpack_require__(424);
let AdvancedTable = __webpack_require__(6);
let DescriptorsColumnsView = __webpack_require__(11);

let View = AdvancedTable.extend({
    className: 'action-list advanced-table-container',
    childView: ActionTypeView,
    userSettingName: 'actiontype_list_columns',
    userSettingVersion: '1.0',

    defaultColumns: [
        {name: 'name', width: 'auto', sort_by: '+0'},
        {name: '@label', width: 'auto', sort_by: null}
    ],

    columnsOptions: {
        'name': {label: _t('Name'), width: 'auto', minWidth: true, event: 'view-action-details'},
        '@label': {label: _t('Label'), width: 'auto', minWidth: true, event: 'view-action-details'},
    },

    initialize: function (options) {
        View.__super__.initialize.apply(this, arguments);

        this.filters = this.getOption('filters');
    },

    onRender: function () {
        View.__super__.onRender.apply(this, arguments);
        this.onShowTab();
    },

    onShowTab: function () {
        let view = this;

        let contextLayout = window.application.getView().getChildView('right');
        if (!contextLayout) {
            let DefaultLayout = __webpack_require__(3);
            contextLayout = new DefaultLayout();
            window.application.getView().showChildView('right', contextLayout);
        }

        let TitleView = __webpack_require__(4);
        contextLayout.showChildView('title', new TitleView({title: _t("Options"), glyphicon: 'fa-wrench'}));

        let actions = [
            'create-action-type'
        ];

        let ListContextView = __webpack_require__(426);
        let contextView = new ListContextView({actions: actions});
        contextLayout.showChildView('content', contextView);

        contextView.on("action-type:create", function () {
            view.onCreateActionType();
        });

        View.__super__.onShowTab.apply(this, arguments);
    },

    onBeforeDetach: function () {
        window.application.main.defaultRightView();
    },

    onCreateActionType: function() {
        window.application.accession.controllers.actiontype.create();
    }
});

// support of descriptors columns extension
_.extend(View.prototype, DescriptorsColumnsView);

module.exports = View;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 424 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file actiontype.js
 * @brief Batch action type view
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-02-15
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);

let View = Marionette.View.extend({
    tagName: 'tr',
    className: 'object action-type element',
    attributes: function () {
        return {
            'scope': 'row',
            'element-id': this.model.get('id')
        }
    },
    template: __webpack_require__(12),

    templateContext: function () {
        return {
            columnsList: this.getOption('columnsList'),
            columnsOptions: this.getOption('columnsOptions')
        }
    },

    behaviors: {
        ActionBtnEvents: {
            behaviorClass: __webpack_require__(8),
            actions: {
                edit: {display: true, title: _t("Rename the type of action"), event: 'renameActionType'},
                tag: {display: true, title: _t("Edit label"), event: 'editLabel'},
                manage: {display: true, event: 'viewDetails'},
                remove: {display: true, event: 'onDeleteActionType'}
            }
        }
    },

    ui: {
        details: 'td.view-action-details',
        delete_btn: 'td.action.remove',
        edit_label_btn: 'td.action.edit-label',
        edit2_label_btn: 'td.action.rename',
        manage_btn: 'td.action.manage'
    },

    events: {
        'click @ui.details': 'viewDetails',
        // 'click @ui.edit_label_btn': 'editLabel',
        // 'click @ui.edit2_label_btn': 'renameActionType',
        // 'click @ui.manage_btn': 'viewDetails'
    },

    initialize: function () {
        this.listenTo(this.model, 'change', this.render, this);
    },

    actionsProperties: function () {
        let properties = {
            manage: {disabled: false},
            remove: {disabled: false}
        };

        // @todo manage permissions

        if (/*!this.model.get('can_delete') ||*/0) {
            properties.remove.disabled = true;
        }

        return properties;
    },

    onRender: function () {
    },

    viewDetails: function () {
        Backbone.history.navigate('app/accession/actiontype/' + this.model.get('id') + '/', {trigger: true});
    },

    onDeleteActionType: function () {
        this.model.destroy({wait: true});
    },

    editLabel: function() {
        if (!window.application.permission.manager.isStaff()) {
            return false;
        }

        let ChangeLabel = __webpack_require__(24);
        let changeLabel = new ChangeLabel({
            model: this.model,
            title: _t("Change the labels for the type of action")});

        changeLabel.render();

        return false;
    },

    renameActionType: function() {
        let ChangeName = __webpack_require__(20);
        let changeName = new ChangeName({
            model: this.model,
            title: _t("Rename the type of action")
        });

        changeName.render();
        changeName.ui.name.val(this.model.get('name'));

        return false;
    }
});

module.exports = View;


/***/ }),
/* 425 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
with (obj) {
__p += '<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title">' +
__e( _t("Change the labels") ) +
'</h4></div><div class="modal-body" style="max-height: 400px; overflow-y: auto"><form class="entity-labels">';

                var languages = application.main.collections.uilanguages;

                for (var i = 0; i < languages.models.length; ++i) {
                    var lang_id = languages.at(i).get('id');
                    var lang_label = languages.at(i).get('label');
                    var autofocus = (i == 0) ? 'autofocus=""' : "";
                ;
__p += ' <div class="form-group"><label class="control-label">' +
__e( _t(lang_label) ) +
'</label><input class="form-control" type="text" language="' +
__e( lang_id ) +
'" value="" maxlength="128" ' +
__e( autofocus ) +
' autocomplete="off" style="width:100%"></div> ';
 } ;
__p += ' </form></div><div class="modal-footer"><button type="button" class="btn btn-default cancel" data-dismiss="modal">' +
__e( _t("Cancel") ) +
'</button> <button type="button" class="btn btn-success apply">' +
__e( _t("Apply") ) +
'</button></div></div></div>';

}
return __p
};

/*
original source:

<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title"><%- _t("Change the labels") %></h4></div><div class="modal-body" style="max-height: 400px; overflow-y: auto"><form class="entity-labels"><%
                var languages = application.main.collections.uilanguages;

                for (var i = 0; i < languages.models.length; ++i) {
                    var lang_id = languages.at(i).get('id');
                    var lang_label = languages.at(i).get('label');
                    var autofocus = (i == 0) ? 'autofocus=""' : "";
                %> <div class="form-group"><label class="control-label"><%- _t(lang_label) %></label><input class="form-control" type="text" language="<%- lang_id %>" value="" maxlength="128" <%- autofocus %> autocomplete="off" style="width:100%"></div> <% } %> </form></div><div class="modal-footer"><button type="button" class="btn btn-default cancel" data-dismiss="modal"><%- _t("Cancel") %></button> <button type="button" class="btn btn-success apply"><%- _t("Apply") %></button></div></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 426 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file actiontypelistcontext.js
 * @brief Accession list context menu
 * @author Frederic SCHERMA (INRA UMR1095)
 * @date 2017-12-07
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);

let View = Marionette.View.extend({
    tagName: 'div',
    template: __webpack_require__(15),
    className: "context accession-list",
    templateContext: function () {
        return {
            actions: this.getOption('actions'),
            options: {
                'create-action-type': {className: 'btn-default', label: _t('Create a type of action')}
            }
        }
    },

    ui: {
        'create-action-type': 'button[name="create-action-type"]'
    },

    triggers: {
        "click @ui.create-action-type": "action-type:create"
    },

    initialize: function(options) {
        options || (options = {actions: []});
    }
});

module.exports = View;


/***/ }),
/* 427 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file action.js
 * @brief
 * @author Frederic SCHERMA (INRA UMR1095)
 * @date 2018-02-15
 * @copyright Copyright (c) 2018 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);

let ActionModel = __webpack_require__(39);
let ActionCollection = __webpack_require__(229);
let EntityListFilterView = __webpack_require__(14);
let ActionListView = __webpack_require__(230);
let DefaultLayout = __webpack_require__(3);
let ScrollingMoreView = __webpack_require__(10);
let TitleView = __webpack_require__(4);
let ActionLayout = __webpack_require__(241);

let Router = Marionette.AppRouter.extend({
    routes: {
        "app/accession/action/": "getActionList",
        "app/accession/action/:id/*tab": "getAction"
    },

    getActionList: function (options) {
        options || (options = {});

        let collection = new ActionCollection({
            filters: (options.filters || {})
        });

        let defaultLayout = new DefaultLayout({});
        window.application.main.showContent(defaultLayout);

        defaultLayout.showChildView('title', new TitleView({title: _t("List of actions")}));

        let columns = window.application.main.cache.lookup({
            type: 'entity_columns',
            format: {model: 'accession.action'}
        });

        columns.done(function (data) {
            let actionListView = new ActionListView({collection: collection, columns: data[0].value});

            defaultLayout.showChildView('content', actionListView);
            defaultLayout.showChildView('content-bottom', new ScrollingMoreView({
                collection: collection,
                targetView: actionListView
            }));

            defaultLayout.showChildView('bottom', new EntityListFilterView({
                collection: collection, columns: data[0].value
            }));

            actionListView.query();
        });
    },

    getAction: function (id, tab) {
        tab || (tab = "");

        let action = new ActionModel({id: id});

        let defaultLayout = new DefaultLayout();
        window.application.main.showContent(defaultLayout);

        action.fetch().then(function() {
            if (!defaultLayout.isRendered()) {
                return;
            }

            defaultLayout.showChildView('title', new TitleView({title: _t("Action"), model: action}));

            let actionLayout = new ActionLayout({model: action, initialTab: tab.replace('/', '')});
            defaultLayout.showChildView('content', actionLayout);
        });
    }
});

module.exports = Router;


/***/ }),
/* 428 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file storagelocation.js
 * @brief storage location router
 * @author Medhi BOULNEMOUR (INRA UMR1095)
 * @date 2018-03-29
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);

let DefaultLayout = __webpack_require__(3);
let TitleView = __webpack_require__(4);
let StorageLocationListView = __webpack_require__(429);


let Router = Marionette.AppRouter.extend({
    routes: {
        "app/accession/storagelocation/": "getStorageLocationsList",
    },

    getStorageLocationsList: function (options) {
        options || (options = {});

        let defaultLayout = new DefaultLayout({});
        window.application.main.showContent(defaultLayout);

        let storageLocationListView = new StorageLocationListView();

        defaultLayout.showChildView('title', new TitleView({title: _t("Storage locations")}));
        defaultLayout.showChildView('content', storageLocationListView);

    },
});

module.exports = Router;


/***/ }),
/* 429 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {/**
 * @file storagelocationlist.js
 * @brief storage locations overview
 * @author Medhi BOULNEMOUR (INRA UMR1095)
 * @date 2018-03-29
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);

let View = Marionette.View.extend({
    template: __webpack_require__(430),

    ui: {
        tree: '#tree'
    },

    onRender: function () {

        this.onShowTab();

        this.ui.tree.fancytree({
            extensions: ["glyph"],
            glyph: {
                // The preset defines defaults for all supported icon types.
                // preset: "bootstrap3",
                preset: "awesome4",
                map: {
                    folder: 'fa-archive',
                    doc: 'fa-archive',
                    folderOpen: 'fa-archive fa-border fa-rotate-180 fa-flip-horizontal',
                    loading: "fa-spinner fa-pulse",
                    error: "fa-warning",
                    expanderClosed: "fa-chevron-right",
                    expanderLazy: "fa-chevron-right",
                    expanderOpen: "fa-chevron-down",
                }
            },
            source: {
                url: window.application.url(['accession', 'storagelocation'])
            },
            lazyLoad: function (event, data) {
                let node = data.node;
                // Load child nodes via Ajax GET .../accession/storagelocation?parent=[PARENT.ID]
                data.result = {
                    url: window.application.url(['accession', 'storagelocation']),
                    data: {parent: node.key},
                    cache: false
                };
            },
            postProcess: function (event, data) {
                let orgResponse = data.response;

                if (orgResponse.items) {
                    let source = [];
                    _.each(orgResponse.items, function (storageLocation) {
                        let hasChildren = storageLocation.children_count > 0;
                        source.push({
                            title: storageLocation.label,
                            key: storageLocation.id,
                            folder: hasChildren,
                            lazy: hasChildren
                        })
                    });

                    data.result = source;

                } else {
                    // Signal error condition to tree loader
                    data.result = {
                        error: "ERROR #" + orgResponse.faultCode + ": " + orgResponse.faultMsg
                    }
                }
            },
            escapeTitles: true,
            strings: {
                loading: _t("Loading..."),
                loadError: _t("Load error!"),
                moreData: _t("More..."),
                noData: _t("No data.")
            }

        });
    },

    onShowTab: function () {
        let self = this;

        let contextLayout = window.application.getView().getChildView('right');
        if (!contextLayout) {
            let DefaultLayout = __webpack_require__(3);
            contextLayout = new DefaultLayout();
            window.application.getView().showChildView('right', contextLayout);
        }

        let TitleView = __webpack_require__(4);
        contextLayout.showChildView('title', new TitleView({
            title: _t("Storage location actions"),
            glyphicon: 'fa-wrench'
        }));

        let actions = [
            'create-storageLocation',
        ];

        let StorageLocationListContextView = __webpack_require__(431);
        let contextView = new StorageLocationListContextView({
            actions: actions,
            advancedTable: self,
        });

        contextLayout.showChildView('content', contextView);

        contextView.on("storageLocation:create", function () {
            self.onCreatestorageLocation();
        });
    },

    onCreatestorageLocation: function () {
        window.application.accession.controllers.storagelocation.create();
    },

    onBeforeDetach: function () {
        window.application.main.defaultRightView();
    },

    onHideTab: function () {
        window.application.main.defaultRightView();
    },

});

module.exports = View;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 430 */
/***/ (function(module, exports) {

underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '';
with (obj) {
__p += '<div id="tree"></div>';

}
return __p
};

/*
original source:

<div id="tree"></div>
*/


/***/ }),
/* 431 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file storagelocationlistcontext.js
 * @brief
 * @author Medhi BOULNEMOUR (INRA UMR1095)
 * @date 2018-04-04
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);

let View = Marionette.View.extend({
    tagName: 'div',
    template: __webpack_require__(15),
    className: "context storageLocation-list",
    templateContext: function () {
        return {
            actions: this.getOption('actions'),
            options: {
                'create-storageLocation': {className: 'btn-default', label: _t('Create new storage location')}
            }
        }
    },

    ui: {
        'create-storageLocation': 'button[name="create-storageLocation"]'
    },

    triggers: {
        "click @ui.create-storageLocation": "storageLocation:create"
    },

    initialize: function (options) {
        options || (options = {actions: []});
    }
});

module.exports = View;


/***/ }),
/* 432 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file init.js
 * @brief Audit module init entry point
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-06-24
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let AuditModule = function() {
    this.name = "audit";
};

AuditModule.prototype = {
    initialize: function (app, options) {
        this.models = {};
        this.collections = {};
        this.views = {};
        this.routers = {};
        this.controllers = {};

        try {
            i18next.default.addResources(session.language, 'default', __webpack_require__(433)("./" + session.language + '/default.json'));
        } catch (e) {
            console.warn("No translation found for the current language. Fallback to english language");
        }

        //
        // controllers
        //

        let AuditController = __webpack_require__(436);
        this.controllers.audit = new AuditController();

        //
        // routers
        //

        let AuditRouter = __webpack_require__(443);
        this.routers.audit = new AuditRouter();
    },

    start: function (app, options) {
        // nothing to do
    },

    stop: function (options) {

    }
};

module.exports = AuditModule;


/***/ }),
/* 433 */
/***/ (function(module, exports, __webpack_require__) {

var map = {
	"./en/default.json": 434,
	"./fr/default.json": 435
};
function webpackContext(req) {
	return __webpack_require__(webpackContextResolve(req));
};
function webpackContextResolve(req) {
	var id = map[req];
	if(!(id + 1)) // check for number or string
		throw new Error("Cannot find module '" + req + "'.");
	return id;
};
webpackContext.keys = function webpackContextKeys() {
	return Object.keys(map);
};
webpackContext.resolve = webpackContextResolve;
module.exports = webpackContext;
webpackContext.id = 433;

/***/ }),
/* 434 */
/***/ (function(module, exports) {

module.exports = {"Action":"","Cancel":"","Created":"","Date":"","Deleted":"","Details":"","Entity":"","Entity UUID or name":"","Entity content type":"","Get audits entries for a user":"","Get audits entries for an entity":"","List of audit entries related to entity":"","List of audit entries related to user":"","Modified":"","Relation changed":"","Removed":"","Search":"","Select a username":"","Select an entity UUID or name":"","Type":"","Unknown":"","User":"","Username":""}

/***/ }),
/* 435 */
/***/ (function(module, exports) {

module.exports = {"Action":"Action","Cancel":"Annuler","Created":"Créée","Date":"Date","Deleted":"Supprimée","Details":"Détails","Entity":"Entitée","Entity UUID or name":"UUID ou nom de l'entité","Entity content type":"Type de contenu de l'entitée","Get audits entries for a user":"Trouver les entrées d'audit pour un utilisateur donnée","Get audits entries for an entity":"Trouver les entrées d'audit pour une entitée donnée","List of audit entries related to entity":"Liste des entrées d'audits pour l'entité","List of audit entries related to user":"Liste des entrées d'audits pour l'utilisateur","Modified":"Modifié","Relation changed":"Relation changée","Removed":"Retiré","Search":"Chercher","Select a username":"Saisissez un nom d'utilisateur","Select an entity UUID or name":"Sélectionnez une entité par son UUID ou son nom","Type":"Type","Unknown":"Inconnu","User":"Utilisateur","Username":"Nom d'utilisateur"}

/***/ }),
/* 436 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file audit.js
 * @brief Audit controller
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-06-24
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Marionette = __webpack_require__(1);
let AuditCollection = __webpack_require__(244);
let AuditListView = __webpack_require__(245);

let DefaultLayout = __webpack_require__(3);

let TitleView = __webpack_require__(4);
let ScrollingMoreView = __webpack_require__(10);
let Dialog = __webpack_require__(5);

let Controller = Marionette.Object.extend({

    searchByUserName: function () {
        let ModalView = Dialog.extend({
            attributes: {
                'id': 'dlg_audit_by_username'
            },
            template: __webpack_require__(441),

            ui: {
                search: "button.search",
                username: "#username"
            },

            events: {
                'input @ui.username': 'onUserNameInput'
            },

            triggers: {
                'click @ui.search': 'view:search'
            },

            initialize: function () {
                ModalView.__super__.initialize.apply(this);
            },

            onRender: function () {
                ModalView.__super__.onRender.apply(this);

                $(this.ui.username).select2({
                    dropdownParent: $(this.el),
                    ajax: {
                        url: window.application.url(['permission', 'user', 'search']),
                        dataType: 'json',
                        delay: 250,
                        data: function (params) {
                            params.term || (params.term = '');

                            let filters = {
                                method: 'icontains',
                                fields: '*',
                                '*': params.term.split(' ').filter(function (t) { return t.length > 2; })
                            };

                            return {
                                page: params.page,
                                filters: JSON.stringify(filters)
                            };
                        },
                        processResults: function (data, params) {
                            // no pagination
                            params.page = params.page || 1;

                            let results = [];

                            for (let i = 0; i < data.items.length; ++i) {
                                results.push({
                                    id: data.items[i].value,
                                    text: data.items[i].label
                                });
                            }

                            return {
                                results: results,
                                pagination: {
                                    more: (params.page * 30) < data.total_count
                                }
                            };
                        },
                        cache: true
                    },
                    minimumInputLength: 3,
                    placeholder: _t("Select a username")
                }).select2('open');
            },

            onBeforeDestroy: function() {
                this.ui.username.select2('destroy');
                ModalView.__super__.onBeforeDestroy.apply(this);
            }
        });

        let modal = new ModalView({controller: this});
        modal.render();

        modal.on("view:search", function(view) {
            let username = view.ui.username.val();
            if (username) {
                this.getAuditListByUsername(username);
                view.destroy();

                Backbone.history.navigate('app/audit/search/?username=' + username, {silent: true});
            }
        }, this);
    },

    getAuditListByUsername: function (username) {
        let auditCollection = new AuditCollection([], {username: username});

        let defaultLayout = new DefaultLayout({});
        application.main.showContent(defaultLayout);

        defaultLayout.showChildView('title', new TitleView({title: _t("List of audit entries related to user"), object: username}));

        auditCollection.fetch({data: {cursor: null}, processData: true}).then(function () {
            let auditListView = new AuditListView({collection: auditCollection});

            defaultLayout.showChildView('content', auditListView);
            defaultLayout.showChildView('content-bottom', new ScrollingMoreView({targetView: auditListView}));
        });
    },

    searchByEntity: function (uuid) {
            let ModalView = Dialog.extend({
            attributes: {
                'id': 'dlg_audit_by_entity'
            },
            template: __webpack_require__(442),

            ui: {
                search: "button.search",
                entity: "#entity",
                content_type: "#content_type"
            },

            events: {
                'input @ui.entity': 'onEntityInput'
            },

            triggers: {
                'click @ui.search': 'view:search'
            },

            onRender: function () {
                ModalView.__super__.onRender.apply(this);

                let view = this;

                application.main.views.contentTypes.drawSelect(this.ui.content_type);
                //application.main.views.contentTypes.htmlFromValue(this.el);

                $(this.ui.entity).select2({
                    dropdownParent: $(this.el),
                    content_type: $(this.ui.content_type),
                    ajax: {
                        url: window.application.url(['main', 'entity', 'search']),
                        dataType: 'json',
                        delay: 250,
                        data: function (params) {
                            params.term || (params.term = '');

                            //let name_match = params.term.match(/^([a-zA-Z0-9_-]{1,})$/);
                            let uuid_match = params.term.match(/^[a-zA-Z0-9]{8}-[a-zA-Z0-9]{4}-[a-zA-Z0-9]{4}-[a-zA-Z0-9]{4}-[a-zA-Z0-9]{12}$/);

                            let filters = {
                                method: 'icontains'
                            };

                            if (uuid_match) {
                                filters.fields = 'uuid';
                                filters.uuid = params.term;
                            } else {
                                let ct = view.ui.content_type.val().split('.');

                                filters.fields = ['app_label', 'model', 'object_name'];
                                filters.app_label = ct[0];
                                filters.model = ct[1];
                                filters.object_name = params.term;
                            }

                            return {
                                page: params.page,
                                filters: JSON.stringify(filters)
                            };
                        },
                        processResults: function (data, params) {
                            // no pagination
                            params.page = params.page || 1;

                            let results = [];

                            for (let i = 0; i < data.items.length; ++i) {
                                results.push({
                                    id: data.items[i].id,
                                    text: data.items[i].name
                                });
                            }

                            return {
                                results: results,
                                pagination: {
                                    more: (params.page * 30) < data.total_count
                                }
                            };
                        },
                        cache: true
                    },
                    minimumInputLength: 3,
                    placeholder: _t("Select an entity UUID or name")
                }).select2('open');
            },

            onBeforeDestroy: function() {
                this.ui.entity.select2('destroy');
                this.ui.content_type.selectpicker('destroy');

                ModalView.__super__.onBeforeDestroy.apply(this);
            }
        });

        let modal = new ModalView({controller: this});
        modal.render();

        modal.on("view:search", function(view) {
            let object_id = $(view.ui.entity).val();
            let object_name = $(view.ui.entity).select2('data')[0].text;
            let ct = $(view.ui.content_type).val().split('.');
            if (ct.length === 2 && object_id) {
                this.getAuditListByEntity(ct[0], ct[1], object_id, object_name);
                view.destroy();

                Backbone.history.navigate('app/audit/search/?app_label=' + ct[0] + '&model=' + ct[1] + '&object_id=' + object_id, {silent: true});
            }
        }, this);
    },

    getAuditListByEntity: function (app_label, model, object_id, object_name) {
        let auditCollection = new AuditCollection([], {entity: {app_label: app_label, model: model, object_id: object_id}});

        let defaultLayout = new DefaultLayout({});
        application.main.showContent(defaultLayout);

        // if not specified retrieve the entity name
        if (object_name == null) {
            $.ajax({
                url: window.application.url(['main', 'entity']),
                dataType: 'json',
                data: {
                    app_label: app_label,
                    model: model,
                    object_id: object_id
                },
            }).done(function (data) {
                defaultLayout.showChildView('title', new TitleView({
                    title: _t("List of audit entries related to entity"),
                    object: data.name
                }));
            });
        } else {
            defaultLayout.showChildView('title', new TitleView({
                title: _t("List of audit entries related to entity"),
                object: object_name
            }));
        }

        auditCollection.fetch({data: {cursor: null}, processData: true}).then(function () {
            let auditListView = new AuditListView({collection: auditCollection});

            defaultLayout.showChildView('content', auditListView);
            defaultLayout.showChildView('content-bottom', new ScrollingMoreView({targetView: auditListView}));
        });
    }
});

module.exports = Controller;


/***/ }),
/* 437 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file audit.js
 * @brief Audit model
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-06-24
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Backbone = __webpack_require__(7);

let Model = Backbone.Model.extend({
    defaults: {
        id: undefined,
        type: 0,
        user_id: undefined,
        username: '',
        app_label: '',
        model: undefined,
        object_id: undefined,
        object_name: '',
        fields: {}
    },

    init: function(attributes, options) {
        options || (options = {});
    },

    parse: function(data) {
        this.perms = data.perms;
        return data;
    },

    validate: function(attrs) {
        let errors = {};
        let hasError = false;

        if (hasError) {
          return errors;
        }
    },
});

module.exports = Model;



/***/ }),
/* 438 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file audit.js
 * @brief Audit item view
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-06-24
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Marionette = __webpack_require__(1);
// let AuditModel = require('../models/audit');

let View = Marionette.View.extend({
    tagName: 'tr',
    className: 'object audit element',
    attributes: {
        'scope': 'row',
    },
    template: __webpack_require__(439),

    ui: {
        show: 'span.show-entity',
        datetime: 'td abbr.datetime'
    },

    events: {
        'click @ui.show': 'showEntity',
    },

    initialize: function() {
        this.listenTo(this.model, 'change', this.render, this);
    },

    onRender: function() {
        // localize content-type
        application.main.views.contentTypes.htmlFromValue(this.el);
        // and date-time
        this.ui.datetime.localizeDate(null, session.language);
    },

    showEntity: function () {
        alert("Not yet implemented !");
    }
});

module.exports = View;


/***/ }),
/* 439 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
with (obj) {
__p += '<td class="glyph-fixed-column"> ';
 if (type == 0) { ;
__p += ' <span title="' +
__e( _t('Created') ) +
'" class="fa fa-plus-circle" style="color: #4cae4c"></span> ';
 } else if (type == 1) { ;
__p += ' <span title="' +
__e( _t('Modified') ) +
'" class="fa fa-retweet" style="color: #c77405"></span> ';
 } else if (type == 2) { ;
__p += ' <span title="' +
__e( _t('Deleted') ) +
'" class="fa fa-times-circle-o" style="color: #ac2925"></span> ';
 } else if (type == 3) { ;
__p += ' <span title="' +
__e( _t('Removed') ) +
'" class="fa fa-trash" style="color: #ac2925"></span> ';
 } else if (type == 4) { ;
__p += ' <span title="' +
__e( _t('Action') ) +
'" class="fa fa-tasks" style="color: #4cae4c"></span> ';
 } else if (type == 5) { ;
__p += ' <span title="' +
__e( _t('Relation changed') ) +
'" class="fa fa-share-square-o" style="color: #c77405"></span> ';
 } else { ;
__p += ' <span title="' +
__e( _t('Unknown') ) +
'" class="fa fa-question-circle"></span> ';
 } ;
__p += ' </td><td>' +
__e( username ) +
'</td><td><abbr class="datetime" date="' +
__e( timestamp ) +
'" title="' +
__e( timestamp ) +
'">' +
__e( timestamp ) +
'</abbr></td> ';
 if (object_name) { ;
__p += ' <td object-id="' +
__e( object_id ) +
'"><abbr title="' +
__e( object_id ) +
'">' +
__e( object_name ) +
'</abbr></td> ';
 } else if (typeof(fields.name) !== "undefined") { ;
__p += ' <td object-id="' +
__e( object_id ) +
'"><abbr title="' +
__e( object_id ) +
'">' +
__e( fields.name ) +
'</abbr></td> ';
 } else { ;
__p += ' <td>N/A</td> ';
 } ;
__p += ' <td><abbr class="content-type" title="' +
__e( content_type ) +
'" value="' +
__e( content_type ) +
'"></abbr></td><td><span class="btn btn-xs btn-success show-entity">Show</span></td>';

}
return __p
};

/*
original source:

<td class="glyph-fixed-column"> <% if (type == 0) { %> <span title="<%- _t('Created') %>" class="fa fa-plus-circle" style="color: #4cae4c"></span> <% } else if (type == 1) { %> <span title="<%- _t('Modified') %>" class="fa fa-retweet" style="color: #c77405"></span> <% } else if (type == 2) { %> <span title="<%- _t('Deleted') %>" class="fa fa-times-circle-o" style="color: #ac2925"></span> <% } else if (type == 3) { %> <span title="<%- _t('Removed') %>" class="fa fa-trash" style="color: #ac2925"></span> <% } else if (type == 4) { %> <span title="<%- _t('Action') %>" class="fa fa-tasks" style="color: #4cae4c"></span> <% } else if (type == 5) { %> <span title="<%- _t('Relation changed') %>" class="fa fa-share-square-o" style="color: #c77405"></span> <% } else { %> <span title="<%- _t('Unknown') %>" class="fa fa-question-circle"></span> <% } %> </td><td><%- username %></td><td><abbr class="datetime" date="<%- timestamp %>" title="<%- timestamp %>"><%- timestamp %></abbr></td> <% if (object_name) { %> <td object-id="<%- object_id %>"><abbr title="<%- object_id %>"><%- object_name %></abbr></td> <% } else if (typeof(fields.name) !== "undefined") { %> <td object-id="<%- object_id %>"><abbr title="<%- object_id %>"><%- fields.name %></abbr></td> <% } else { %> <td>N/A</td> <% } %> <td><abbr class="content-type" title="<%- content_type %>" value="<%- content_type %>"></abbr></td><td><span class="btn btn-xs btn-success show-entity">Show</span></td>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 440 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div class="table-advanced-head"><table class="table table-striped table-advanced"><thead><tr scope="row"><th class="glyph-fixed-column"><span title="' +
__e( _t('Action') ) +
'" class="fa fa-bolt"></span></th><th>' +
__e( _t("User") ) +
'</th><th>' +
__e( _t("Date") ) +
'</th><th>' +
__e( _t("Entity") ) +
'</th><th>' +
__e( _t("Type") ) +
'</th><th>' +
__e( _t("Details") ) +
'</th></tr></thead></table></div><div class="table-advanced-body"><table class="table table-striped table-advanced"><tbody class="audit-list"></tbody></table></div>';

}
return __p
};

/*
original source:

<div class="table-advanced-head"><table class="table table-striped table-advanced"><thead><tr scope="row"><th class="glyph-fixed-column"><span title="<%- _t('Action') %>" class="fa fa-bolt"></span></th><th><%- _t("User") %></th><th><%- _t("Date") %></th><th><%- _t("Entity") %></th><th><%- _t("Type") %></th><th><%- _t("Details") %></th></tr></thead></table></div><div class="table-advanced-body"><table class="table table-striped table-advanced"><tbody class="audit-list"></tbody></table></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 441 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title">' +
__e( _t("Get audits entries for a user") ) +
'</h4></div><div class="modal-body"><form><div class="form-group"><label class="control-label" for="username">' +
__e( _t("Username") ) +
'</label><select class="form-control usernames" id="username" name="username"></select></div></form></div><div class="modal-footer"><button type="button" class="btn btn-default cancel" data-dismiss="modal">' +
__e( _t("Cancel") ) +
'</button> <button type="button" class="btn btn-success search">' +
__e( _t("Search") ) +
'</button></div></div></div>';

}
return __p
};

/*
original source:

<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title"><%- _t("Get audits entries for a user") %></h4></div><div class="modal-body"><form><div class="form-group"><label class="control-label" for="username"><%- _t("Username") %></label><select class="form-control usernames" id="username" name="username"></select></div></form></div><div class="modal-footer"><button type="button" class="btn btn-default cancel" data-dismiss="modal"><%- _t("Cancel") %></button> <button type="button" class="btn btn-success search"><%- _t("Search") %></button></div></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 442 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title">' +
__e( _t("Get audits entries for an entity") ) +
'</h4></div><div class="modal-body"><form><div class="form-group"><label class="control-label" for="entity">' +
__e( _t("Entity content type") ) +
'</label><select class="form-control contents-types" id="content_type" name="content-type"></select></div><div class="form-group"><label class="control-label" for="entity">' +
__e( _t("Entity UUID or name") ) +
'</label><select class="form-control entities" id="entity" name="entity"></select></div></form></div><div class="modal-footer"><button type="button" class="btn btn-default cancel" data-dismiss="modal">' +
__e( _t("Cancel") ) +
'</button> <button type="button" class="btn btn-success search">' +
__e( _t("Search") ) +
'</button></div></div></div>';

}
return __p
};

/*
original source:

<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title"><%- _t("Get audits entries for an entity") %></h4></div><div class="modal-body"><form><div class="form-group"><label class="control-label" for="entity"><%- _t("Entity content type") %></label><select class="form-control contents-types" id="content_type" name="content-type"></select></div><div class="form-group"><label class="control-label" for="entity"><%- _t("Entity UUID or name") %></label><select class="form-control entities" id="entity" name="entity"></select></div></form></div><div class="modal-footer"><button type="button" class="btn btn-default cancel" data-dismiss="modal"><%- _t("Cancel") %></button> <button type="button" class="btn btn-success search"><%- _t("Search") %></button></div></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 443 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file audit.js
 * @brief Audit router
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-06-24
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Marionette = __webpack_require__(1);
let AuditCollection = __webpack_require__(244);
let AuditListView = __webpack_require__(245);
let DefaultLayout = __webpack_require__(3);
let TitleView = __webpack_require__(4);
let ScrollingMoreView = __webpack_require__(10);

let Router = Marionette.AppRouter.extend({
    controller: application.audit.controllers.audit,
    appRoutes : {
        "app/audit/search/?username=:username": "getAuditListByUsername",
        "app/audit/search/?app_label=:app_label&model=:model&object_id=:object_id": "getAuditListByEntity",
    },

    // getAuditListByUsername: function(username) {
    //     let controller = new AuditController();
    //     controller.getAuditListByUsername(username);
    // },
    //
    // getAuditListByEntity: function(app_label, model, object_id) {
    //     let controller = new AuditController();
    //     controller.getAuditListByEntity(app_label, model, object_id);
    // }
});

module.exports = Router;



/***/ }),
/* 444 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file init.js
 * @brief Classification module init entry point
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-04-12
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let ClassificationModule = function() {
    this.name = "classification";
};

ClassificationModule.prototype = {
    initialize: function(app, options) {
        this.models = {};
        this.collections = {};
        this.views = {};
        this.routers = {};
        this.controllers = {};

        try {
            window.i18next.default.addResources(
                window.session.language, 'default', __webpack_require__(445)("./" + window.session.language + '/default.json'));
        } catch (e) {
            console.warn("No translation found for the current language. Fallback to english language");
        }

        // register the layout type of descriptors
        let layoutTypes = [
            'classification_entry'
        ];

        for (let i = 0; i < layoutTypes.length; ++i) {
            let moduleName = layoutTypes[i].replace(/_/g, '').toLowerCase();
            app.descriptor.layoutTypes.registerElement(layoutTypes[i], __webpack_require__(448)("./" + moduleName));
        }

        //
        // controllers
        //

        let ClassificationController = __webpack_require__(450);
        this.controllers.classification = new ClassificationController();

        let ClassificationEntryController = __webpack_require__(452);
        this.controllers.classificationEntry = new ClassificationEntryController();

        //
        // cache
        //

        app.main.cache.register('classification');

        //
        // routers
        //

        let ClassificationRouter = __webpack_require__(470);
        this.routers.classification = new ClassificationRouter();

        let ClassificationEntryRouter = __webpack_require__(483);
        this.routers.classificationEntry = new ClassificationEntryRouter();
    },

    start: function(app, options) {
        //
        // add classifications to menu
        //
        if (window.session.user.isAuth) {
            let ClassificationCollection = __webpack_require__(31);
            let classificationCollection = new ClassificationCollection();

            let MenuEntry = __webpack_require__(253);
            let MenuSeparator = __webpack_require__(80);

            classificationCollection.fetch().then(function (data) {
                let order = 200;
                let auth = 'user';
                let icon = 'fa-list-ul';

                if (classificationCollection.models.length) {
                    app.main.menus.getMenu('classification').addEntry(new MenuSeparator(order++, auth));
                }

                for (let i = 0; i < classificationCollection.models.length; ++i) {
                    let model = classificationCollection.models[i];
                    let url = '#classification/classification/' + model.get('id') + '/classificationentry/';

                    app.main.menus.getMenu('classification').addEntry(
                        new MenuEntry(model.get('name'), model.get('label'), url, icon, order, auth));

                    ++order;
                }
            });
        }
    },

    stop: function(app, options) {

    }
};

module.exports = ClassificationModule;


/***/ }),
/* 445 */
/***/ (function(module, exports, __webpack_require__) {

var map = {
	"./en/default.json": 446,
	"./fr/default.json": 447
};
function webpackContext(req) {
	return __webpack_require__(webpackContextResolve(req));
};
function webpackContextResolve(req) {
	var id = map[req];
	if(!(id + 1)) // check for number or string
		throw new Error("Cannot find module '" + req + "'.");
	return id;
};
webpackContext.keys = function webpackContextKeys() {
	return Object.keys(map);
};
webpackContext.resolve = webpackContextResolve;
module.exports = webpackContext;
webpackContext.id = 445;

/***/ }),
/* 446 */
/***/ (function(module, exports) {

module.exports = {"(Linked to layout)":"","A parent must be specified":"","Apply":"","Are you sure you want to delete any descriptors for this classification entry ?":"","Cancel":"","Change the direct parent of classification entry":"","Change the labels for the classification":"","Change the labels for the classification rank":"","Change the name for a synonym of classification entry":"","Classification":"","Classification actions":"","Classification entry":"","Classification entry details":"","Classification entry name already in usage":"","Classification locked":"","Classification name already in usage":"","Classification rank":"","Classification rank name already in usage":"","Classifications entries":"","Code":"","Comments":"","Continue":"","Create":"","Create a classification":"","Create a classification entry":"","Create classification":"","Create rank of classification":"","Defines":"","Defines a layout of descriptors":"","Delete all":"","Delete descriptors":"","Description":"","Descriptors":"","Direct parent":"","Edit label":"","Enter a classification entry name.":"","Enter a classification entry name. 3 characters at least for auto-completion":"","Entities":"","Export as...":"","Import from...":"","Invalid characters (alphanumeric, _ and - only)":"","Label":"","Label for the current language":"","Language":"","Layout":"","Level":"","List of classifications":"","Manage ranks":"","Modify":"","Name":"","No layout is defined for this classification entry.":"","Panel actions":"","Parent":"","Principal name of the classification entry":"","Rank":"","Ranks":"","Related":"","Related classification":"","Rename classification":"","Rename classification rank":"","Rename the classification":"","Replace all":"","Root rank cannot have a parent":"","Some entries exists for this classification rank":"","Some ranks exists for this classification":"","Sub-ranks":"","Successfully removed !":"","Synonym":"","Synonyms":"","Template":"","The synonym must be unique for this type":"","This synonym exists with this language and type":"","Type":"","Unable to create the classification !":"","Unable to create the classification rank !":"","Undefined classification entry.":"","Unique name":"","characters_max":"At most one character","characters_max_plural":"At most {{count}} characters","characters_min":"At least one character","characters_min_plural":"At least {{count}} characters"}

/***/ }),
/* 447 */
/***/ (function(module, exports) {

module.exports = {"(Linked to layout)":"","A parent must be specified":"Un parent doit être spécifié","Apply":"Appliquer","Are you sure you want to delete any descriptors for this classification entry ?":"Etes-vous sûr de vouloir supprimer tout les descripteurs pour cette entrée de classification ?","Cancel":"Annuler","Change the direct parent of classification entry":"Changer le parent immédiat de l'entrée de classfication","Change the labels for the classification":"Changer les étiquettes pour la classification","Change the labels for the classification rank":"Changer les étiquettes pour les rangs de classification","Change the name for a synonym of classification entry":"Changer le nom pour un synonyme d'entrée de classification","Classification":"Classification","Classification actions":"","Classification entry":"Entrée de classification","Classification entry details":"Détails de l'entrée de classification","Classification entry name already in usage":"Nom d'entrée de classification déjà utilisé","Classification locked":"Classification verrouillée","Classification name already in usage":"Nom de classification déjà utilisé","Classification rank":"Rank de classification","Classification rank name already in usage":"Nom de rang de classification déjà utilisé","Classifications entries":"Entrées de classifications","Code":"Code","Comments":"","Continue":"Continuer","Create":"Créer","Create a classification":"Créer une classification","Create a classification entry":"Créer une entrée de classification","Create classification":"","Create rank of classification":"Créer un rang de classification","Defines":"Définir","Defines a layout of descriptors":"","Delete all":"Supprimer tous","Delete descriptors":"Supprimer les descripteurs","Description":"Description","Descriptors":"Descripteurs","Direct parent":"Parent immédiat","Edit label":"Editer l'étiquette","Enter a classification entry name.":"Saisissez un nom pour l'entrée de classification","Enter a classification entry name. 3 characters at least for auto-completion":"Saisissez un nom pour l'entré de classification. 3 caractères minimum pour l'auto-complétion","Entities":"Entités","Export as...":"","Import from...":"","Invalid characters (alphanumeric, _ and - only)":"Caractères invalident (alphanumérique, _ et -)","Label":"Etiquette","Label for the current language":"Etiquette pour le language courant","Language":"Language","Layout":"","Level":"Niveau","List of classifications":"Liste des classifications","Manage ranks":"Gérer les rangs","Modify":"Modifier","Name":"Nom","No layout is defined for this classification entry.":"","Panel actions":"","Parent":"Parent","Principal name of the classification entry":"Nom principale de l'entrée de classification","Rank":"Rang","Ranks":"Rangs","Related":"","Related classification":"Classification reliée","Rename classification":"Renommer la classification","Rename classification rank":"Renomer un rang de classification","Rename the classification":"Renommer la classification","Replace all":"Remplacer tous","Root rank cannot have a parent":"Le rang racine ne peut pas avoir de parent","Some entries exists for this classification rank":"Des entrées existent pour ce rang de classification","Some ranks exists for this classification":"Des rangs existent pour cette classification","Sub-ranks":"Sous-rangs","Successfully removed !":"Retiré avec succès !","Synonym":"Synonyme","Synonyms":"Synonymes","Template":"Modèle","The synonym must be unique for this type":"Le synonyme doit être unique avec ce type","This synonym exists with this language and type":"Un synonyme existe avec ce language et ce type","Type":"Type","Unable to create the classification !":"Impossible de créer la classification !","Unable to create the classification rank !":"Impossible de créer le rang de classification !","Undefined classification entry.":"Entrée de classification indéfinie","Unique name":"Nom unique","characters_max":"Au plus un caractère","characters_max_plural":"Au plus {{count}} caractères","characters_min":"Au moins un caractère","characters_min_plural":"Au plus {{count}} caractères"}

/***/ }),
/* 448 */
/***/ (function(module, exports, __webpack_require__) {

var map = {
	"./classificationentry": 246,
	"./classificationentry.js": 246
};
function webpackContext(req) {
	return __webpack_require__(webpackContextResolve(req));
};
function webpackContextResolve(req) {
	var id = map[req];
	if(!(id + 1)) // check for number or string
		throw new Error("Cannot find module '" + req + "'.");
	return id;
};
webpackContext.keys = function webpackContextKeys() {
	return Object.keys(map);
};
webpackContext.resolve = webpackContextResolve;
module.exports = webpackContext;
webpackContext.id = 448;

/***/ }),
/* 449 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div class="form-group"><label>' +
__e( _t('Related classification') ) +
'</label><select class="classification form-control"></select></div>';

}
return __p
};

/*
original source:

<div class="form-group"><label><%- _t('Related classification') %></label><select class="classification form-control"></select></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 450 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file classificationentry.js
 * @brief Classification entry controller
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-04-22
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);
let Dialog = __webpack_require__(5);

let Controller = Marionette.Object.extend({
    create: function(collection) {
        let ClassificationCreate = Dialog.extend({
            template: __webpack_require__(451),

            attributes: {
                id: "dlg_create_classification",
            },

            ui: {
                name: "input[name=name]",
                label: "input[name=label]",
                description: "textarea[name=description]"
            },

            events: {
                'input @ui.name': 'onNameInput',
                'input @ui.label': 'onLabelInput'
            },

            initialize: function (options) {
                ClassificationCreate.__super__.initialize.apply(this);
            },

            onRender: function () {
                this.ui.name.val(this.getOption('name'));

                ClassificationCreate.__super__.onRender.apply(this);
            },

            onApply: function () {
                if (!this.validateName() || !this.validateLabel()) {
                    return;
                }

                let view = this;
                let collection = this.getOption('collection');
                let name = this.ui.name.val().trim();
                let label = this.ui.label.val().trim();
                let description = this.ui.description.val();

                collection.create({
                    name: name,
                    label: label,
                    description: description
                }, {
                    wait: true,
                    success: function () {
                        view.destroy();
                    },
                    error: function () {
                        $.alert.error(_t("Unable to create the classification !"));
                    }
                });
            },

            validateLabel: function () {
                let v = this.ui.label.val().trim();

                if (v.length < 3) {
                    $(this.ui.label).validateField('failed', _t('characters_min', {count: 3}));
                    return false;
                }

                return true;
            },

            onLabelInput: function () {
                if (this.validateLabel()) {
                    $(this.ui.label).validateField('ok');
                }
            },

            validateName: function() {
                let v = this.ui.name.val().trim();
                let re = /^[a-zA-Z0-9_\-]+$/i;

                if (v.length > 0 && !re.test(v)) {
                    this.ui.name.validateField('failed', _t("Invalid characters (alphanumeric, _ and - only)"));
                    return false;
                } else if (v.length < 3) {
                    this.ui.name.validateField('failed', _t('characters_min', {count: 3}));
                    return false;
                } else if (v.length > 128) {
                    this.ui.name.validateField('failed', _t('characters_max', {count: 128}));
                    return false;
                }

                return true;
            },

            onNameInput: function () {
                let self = this;

                if (this.validateName()) {
                    $.ajax({
                        type: "GET",
                        url: window.application.url(['classification', 'classification', 'search']),
                        dataType: 'json',
                        data: {
                            filters: JSON.stringify({
                                method: 'ieq',
                                fields: 'name',
                                name: this.ui.name.val()
                            })
                        },
                    }).done(function (data) {
                        if (data.items.length > 0) {
                            for (let i in data.items) {
                                let t = data.items[i];

                                if (t.name.toUpperCase() === self.ui.name.val().toUpperCase()) {
                                    self.ui.name.validateField('failed', _t('Classification name already in usage'));
                                    break;
                                }
                            }
                        } else {
                            self.ui.name.validateField('ok');
                        }
                    });
                }
            }
        });

        let classificationCreate = new ClassificationCreate({collection: collection});
        classificationCreate.render();
    },
});

module.exports = Controller;


/***/ }),
/* 451 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title">' +
__e( _t("Create a classification") ) +
'</h4></div><div class="modal-body" style="max-height: 400px; overflow-y: auto"><form><div class="form-group"><label class="control-label">' +
__e( _t("Unique name") ) +
'</label><input class="form-control" type="text" name="name" maxlength="128" autofocus="" autocomplete="off" style="width:100%"></div><div class="form-group"><label class="control-label">' +
__e( _t("Label for the current language") ) +
'</label><input class="form-control" type="text" name="label" maxlength="128" autocomplete="off" style="width:100%"></div><div class="form-group"><label class="control-label">' +
__e( _t("Description") ) +
'</label><textarea class="form-control" name="description" maxlength="1024" style="width:100%"></textarea></div></form></div><div class="modal-footer"><button type="button" class="btn btn-default cancel" data-dismiss="modal">' +
__e( _t("Cancel") ) +
'</button> <button type="button" class="btn btn-success apply">' +
__e( _t("Apply") ) +
'</button></div></div></div>';

}
return __p
};

/*
original source:

<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title"><%- _t("Create a classification") %></h4></div><div class="modal-body" style="max-height: 400px; overflow-y: auto"><form><div class="form-group"><label class="control-label"><%- _t("Unique name") %></label><input class="form-control" type="text" name="name" maxlength="128" autofocus="" autocomplete="off" style="width:100%"></div><div class="form-group"><label class="control-label"><%- _t("Label for the current language") %></label><input class="form-control" type="text" name="label" maxlength="128" autocomplete="off" style="width:100%"></div><div class="form-group"><label class="control-label"><%- _t("Description") %></label><textarea class="form-control" name="description" maxlength="1024" style="width:100%"></textarea></div></form></div><div class="modal-footer"><button type="button" class="btn btn-default cancel" data-dismiss="modal"><%- _t("Cancel") %></button> <button type="button" class="btn btn-success apply"><%- _t("Apply") %></button></div></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 452 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file classificationentry.js
 * @brief Classification entry controller
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-04-22
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Marionette = __webpack_require__(1);

let DefaultLayout = __webpack_require__(3);
let TitleView = __webpack_require__(4);
let Dialog = __webpack_require__(5);
let Search = __webpack_require__(32);

let ClassificationEntryLayout = __webpack_require__(247);
let ClassificationEntryModel = __webpack_require__(26);


let Controller = Marionette.Object.extend({
    create: function() {
        $.ajax({
            type: "GET",
            url: window.application.url(['descriptor', 'layout', 'for-describable', 'classification.classificationentry']),
            dataType: 'json'
        }).done(function(data) {
            let CreateClassificationEntryDialog = Dialog.extend({
                attributes: {
                    'id': 'dlg_create_classification_entry'
                },
                template: __webpack_require__(468),
                templateContext: function () {
                    return {
                        layouts: data
                    };
                },

                ui: {
                    create: "button.create",
                    language: "#classification_entry_language",
                    layout: "#layout",
                    name: "#classification_entry_name",
                    classification: "#classification",
                    rank: "#classification_rank",
                    parent: "#classification_entry_parent",
                    parent_group: ".classification-entry-parent-group"
                },

                events: {
                    'click @ui.create': 'onCreate',
                    'input @ui.name': 'onNameInput',
                    'change @ui.layout': 'onChangeLayout',
                    'change @ui.classification': 'onChangeClassification',
                    'change @ui.rank': 'onChangeRank'
                },

                initialize: function (options) {
                    CreateClassificationEntryDialog.__super__.initialize.apply(this, arguments);

                    // map descriptor meta models by theirs ids
                    this.layouts = {};

                    for (let i = 0; i < data.length; ++i) {
                        let dmm = data[i];
                        this.layouts[dmm.id] = dmm;
                    }
                },

                onRender: function () {
                    CreateClassificationEntryDialog.__super__.onRender.apply(this);

                    this.ui.parent_group.hide();

                    window.application.main.views.languages.drawSelect(this.ui.language);

                    this.ui.layout.selectpicker({});
                    this.ui.classification.prop('disabled', true).selectpicker({});
                    this.ui.rank.selectpicker({});

                    // on default descriptor layout
                    this.onChangeLayout();
                },

                onBeforeDestroy: function () {
                    this.ui.layout.selectpicker('destroy');
                    this.ui.classification.selectpicker('destroy');
                    this.ui.rank.selectpicker('destroy');

                    if (this.ui.parent.data('select2')) {
                        this.ui.parent.select2('destroy');
                    }

                    CreateClassificationEntryDialog.__super__.onBeforeDestroy.apply(this);
                },

                getLayoutClassifications: function () {
                    let layoutId = parseInt(this.ui.layout.val());

                    let value = Object.resolve(layoutId + ".parameters.data.classification", this.layouts);
                    if (value) {
                        return [value];
                    }

                    return [];
                },

                onChangeLayout: function() {
                    let select = this.ui.classification;

                    select.children().remove();
                    select.selectpicker('destroy');

                    // classifications list according to the related meta model of accession
                    let ClassificationCollection = __webpack_require__(31);
                    let classificationCollection = new ClassificationCollection();

                    let SelectOption = __webpack_require__(19);
                    let classifications = new SelectOption({
                        className: "classification",
                        collection: classificationCollection,
                        filters: [{
                            type: 'term',
                            field: 'id',
                            value: this.getLayoutClassifications(),
                            op: 'in'
                        }]
                    });

                    let self = this;

                    classifications.drawSelect(select).done(function () {
                        self.onChangeClassification();
                    });
                },

                onChangeClassification: function () {
                    let classificationId = parseInt(this.ui.classification.val());
                    let select = $(this.ui.rank);

                    select.children().remove();
                    select.selectpicker('destroy');

                    if (isNaN(classificationId)) {
                        return;
                    }

                    // classifications rank list according to the related classification
                    let ClassificationRankCollection = __webpack_require__(252);
                    let classificationRankCollection = new ClassificationRankCollection([], {classification_id: classificationId});

                    let SelectOption = __webpack_require__(19);
                    let classificationRanks = new SelectOption({
                        className: "classification-rank",
                        collection: classificationRankCollection
                    });

                    let self = this;

                    classificationRanks.drawSelect(select).done(function () {
                        self.classificationRanks = {};

                        for (let i = 0; i < classificationRankCollection.models.length; ++i) {
                            self.classificationRanks[classificationRankCollection.models[i].get('id')] =
                                classificationRankCollection.models[i].get('level');
                        }

                        self.onChangeRank();
                    });
                },

                onChangeRank: function () {
                    let classificationId = parseInt(this.ui.classification.val());
                    let classificationRankId = parseInt(this.ui.rank.val());
                    let level = this.classificationRanks[classificationRankId];
                    let select = $(this.ui.parent);

                    if (level === 0) {
                        this.ui.parent_group.hide(false);
                    } else {
                        this.ui.parent_group.show(false);
                    }

                    if (select.data('select2')) {
                        select.select2('destroy');
                        select.children().remove();
                    }

                    if (isNaN(classificationId) || isNaN(classificationRankId)) {
                        return;
                    }

                    select.select2(Search(
                        select.parent(),
                        window.application.url(['classification', 'classificationentry', 'search']),
                        function (params) {
                            return {
                                method: 'icontains',
                                classification_method: 'eq',
                                fields: ['name', 'classification', 'level'],
                                'name': params.term.trim(),
                                'classification': classificationId,
                                'level': level
                            };
                        }, {
                                minimumInputLength: 1,
                            placeholder: _t("Enter a classification entry name.")
                        })
                    ).fixSelect2Position();
                },

                onNameInput: function () {
                    let name = this.ui.name.val().trim();

                    if (this.validateName()) {
                        let filters = {
                            method: 'ieq',
                            fields: ['name'],
                            'name': name
                        };

                        $.ajax({
                            type: "GET",
                            url: window.application.url(['classification', 'classificationentry', 'synonym', 'search']),
                            dataType: 'json',
                            contentType: 'application/json; charset=utf8',
                            data: {filters: JSON.stringify(filters)},
                            el: this.ui.name
                        }).done(function (data) {
                            if (data.items.length > 0) {
                                for (let i in data.items) {
                                    let t = data.items[i];

                                    if (t.label.toUpperCase() === name.toUpperCase()) {
                                        $(this.el).validateField('failed', _t('Classification entry name already in usage'));
                                        break;
                                    }
                                }
                            } else {
                                $(this.el).validateField('ok');
                            }
                        });
                    }
                },

                validateName: function () {
                    let v = this.ui.name.val().trim();

                    if (v.length > 128) {
                        $(this.ui.name).validateField('failed', _t('characters_max', {count: 128}));
                        return false;
                    } else if (v.length < 3) {
                        $(this.ui.name).validateField('failed', _t('characters_min', {count: 3}));
                        return false;
                    }

                    return true;
                },

                validate: function () {
                    let valid = this.validateName();

                    // need parent if not family
                    let rankId = parseInt(this.ui.rank.val());
                    let parentId = 0;

                    if (this.ui.parent.val()) {
                        parentId = parseInt(this.ui.parent.val());
                    }

                    if (this.classificationRanks[rankId] === 0 && parentId !== 0) {
                        $.alert.error(_t("Root rank cannot have a parent"));
                        valid = false;
                    }

                    if (this.classificationRanks[rankId] > 0 && parentId === 0) {
                        $.alert.error(_t("A parent must be specified"));
                        valid = false;
                    }

                    if (this.ui.name.hasClass('invalid') ||
                        this.ui.parent.hasClass('invalid') ||
                        this.ui.rank.hasClass('invalid')) {
                        valid = false;
                    }

                    return valid;
                },

                onCreate: function () {
                    let view = this;

                    if (this.validate()) {
                        let name = this.ui.name.val().trim();

                        let layoutId = parseInt(this.ui.layout.val());
                        let rankId = parseInt(this.ui.rank.val());
                        let parentId = parseInt(this.ui.parent.val()) || null;

                        // create a new local model and open an edit view with this model
                        let model = new ClassificationEntryModel({
                            name: name,
                            layout: layoutId,
                            parent: parentId,
                            rank: rankId,
                            language: this.ui.language.val()
                        });

                        view.destroy();

                        let defaultLayout = new DefaultLayout();
                        window.application.main.showContent(defaultLayout);

                        defaultLayout.showChildView('title', new TitleView({
                            title: _t("Classification entry"),
                            model: model
                        }));

                        let classificationEntryLayout = new ClassificationEntryLayout({model: model});
                        defaultLayout.showChildView('content', classificationEntryLayout);
                    }
                }
            });

            let dialog = new CreateClassificationEntryDialog();
            dialog.render();
        });
    }
});

module.exports = Controller;


/***/ }),
/* 453 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file classificationentrydetails.js
 * @brief Classification entry details item view
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-04-20
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Marionette = __webpack_require__(1);

let Dialog = __webpack_require__(5);
let Search = __webpack_require__(32);
let ClassificationEntryModel = __webpack_require__(26);

let View = Marionette.View.extend({
    tagName: 'div',
    className: 'object classification-entry',
    template: __webpack_require__(454),

    attributes: {
        style: "height: 25px; overflow-y: auto;"
    },

    ui: {
        "view_classification_entry": ".view-classification-entry",
        "change_parent": "span.change-parent",
        "classification_rank": ".classification-rank[name=classification-rank]"
    },

    events: {
        'click @ui.view_classification_entry': 'onViewClassificationEntry',
        'click @ui.change_parent': 'onChangeParent'
    },

    noLink: false,

    initialize: function(options) {
        this.listenTo(this.model, 'change', this.render, this);
        this.listenTo(this.model, 'change:parent', this.updateParent, this);
    },

    updateParent: function(model, value) {
        let view = this;

        // update the parent
        let parentClassificationEntry = new ClassificationEntryModel({id: this.model.get('parent')});
        parentClassificationEntry.fetch().then(function () {
            if (!view.isRendered()) {
                return;
            }

            let parentDetails = [];

            parentDetails.push({
                id: parentClassificationEntry.get('id'),
                name: parentClassificationEntry.get('name'),
                rank: parentClassificationEntry.get('rank'),
                parent: parentClassificationEntry.get('parent')
            });

            parentDetails.push.apply(parentDetails, parentClassificationEntry.get('parent_details'));

            view.model.set('parent_details', parentDetails);
            view.render();
        });
    },

    onRender: function() {
        window.application.main.views.languages.htmlFromValue(this.el);
        window.application.main.views.entitySynonymTypes.htmlFromValue(this.el);

        this.$el.find('span[name=details]').asyncvalue('init', {
            className: 'classification-rank',
            type: 'entity',
            format: {
                model: 'classification.classificationrank',
                details: true
            }
        });

        this.$el.find('span[name=parents]').popupcell('init', {
            className: 'classification-rank',
            type: 'entity',
            children: true,
            format: {
                model: 'classification.classificationrank',
                details: true
            }
        });

        if (this.getOption('noLink')) {
            this.ui.view_classification_entry.removeClass('action');
        }
    },

    onViewClassificationEntry: function(e) {
        if (this.getOption('noLink')) {
            return;
        }

        let cls_id = $(e.target).data('classification-entry-id');

        Backbone.history.navigate("app/classification/classificationentry/" + cls_id + "/", {trigger: true});
    },

    onChangeParent: function () {
        let ChangeParent = Dialog.extend({
            template: __webpack_require__(220),

            attributes: {
                id: "dlg_change_parent"
            },

            ui: {
                parent: "#classification_entry_parent"
            },

            initialize: function (options) {
                ChangeParent.__super__.initialize.apply(this);
            },

            onRender: function () {
                ChangeParent.__super__.onRender.apply(this);

                let rank = parseInt(this.model.get('rank'));

                this.ui.parent.select2(Search(
                    this.$el,
                    window.application.url(['classification', 'classificationentry', 'search']),
                    function (params) {
                        return {
                            method: 'icontains',
                            fields: ['name', 'rank'],
                            'name': params.term,
                            'rank': rank
                        };
                    }, {
                        placeholder: _t("Enter a classification entry name. 3 characters at least for auto-completion")
                    })
                );
            },

            onBeforeDestroy: function() {
                this.ui.parent.select2('destroy');

                ChangeParent.__super__.onBeforeDestroy.apply(this);
            },

            onApply: function() {
                let model = this.getOption('model');
                let parentId = parseInt(this.ui.parent.val());

                if (isNaN(parentId)) {
                    $.alert.error(_t('Undefined classification entry.'));
                    return false;
                }

                if (model.isNew()) {
                    model.set('parent', parentId);
                } else {
                    model.save({parent: parentId}, {patch: true, wait: true});
                }

                this.destroy();
            }
        });

        let changeParent = new ChangeParent({
            model: this.model
        });

        changeParent.render();
    }
});

module.exports = View;


/***/ }),
/* 454 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
with (obj) {
__p += '<span style="font-weight:bold; font-size:18px"><span name="parents"> ';
 for (var i = parent_details.length-1; i >= 0; --i) { ;
__p += '<span name="parent"><span class="action view-classification-entry classification-rank text-selection-all" data-classification-entry-id="' +
__e( parent_details[i].id ) +
'" value="' +
__e( parent_details[i].rank ) +
'">' +
__e( parent_details[i].name ) +
'</span></span><span class="fa fa-chevron-right" style="margin-left: 0.5rem; margin-right: 0.5rem"></span>';
 } ;
__p += '</span><span name="details"><span class="classification-entry text-selection-all" classification_entry_id="' +
__e( id ) +
'" name="name">' +
__e( name ) +
'</span><span class="classification-rank badge left-margin text-selection-all" name="classification-rank" value="' +
__e( rank ) +
'"></span> </span><span class="fa fa-pencil-square-o action change-parent"></span><br></span>';

}
return __p
};

/*
original source:

<span style="font-weight:bold; font-size:18px"><span name="parents"> <% for (var i = parent_details.length-1; i >= 0; --i) { %><span name="parent"><span class="action view-classification-entry classification-rank text-selection-all" data-classification-entry-id="<%- parent_details[i].id %>" value="<%- parent_details[i].rank %>"><%- parent_details[i].name %></span></span><span class="fa fa-chevron-right" style="margin-left: 0.5rem; margin-right: 0.5rem"></span><% } %></span><span name="details"><span class="classification-entry text-selection-all" classification_entry_id="<%- id %>" name="name"><%- name %></span><span class="classification-rank badge left-margin text-selection-all" name="classification-rank" value="<%- rank %>"></span> </span><span class="fa fa-pencil-square-o action change-parent"></span><br></span>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 455 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div name="details"></div><div class="column" style="margin-top: 10px; height: calc(100% - 25px)"><ul class="nav nav-tabs" role="tablist"><li role="presentation" class="active"><a href="div.tab-pane[name=synonyms]" aria-controls="synonyms" role="tab" data-toggle="tab">' +
__e( _t("Synonyms") ) +
'</a></li><li role="presentation"><a href="div.tab-pane[name=descriptors]" aria-controls="descriptors" role="tab" data-toggle="tab">' +
__e( _t("Descriptors") ) +
'</a></li><li role="presentation"><a href="div.tab-pane[name=children]" aria-controls="children" role="tab" data-toggle="tab">' +
__e( _t("Sub-ranks") ) +
'</a></li><li role="presentation"><a href="div.tab-pane[name=related]" aria-controls="related" role="tab" data-toggle="tab">' +
__e( _t("Related") ) +
'</a></li><li role="presentation"><a href="div.tab-pane[name=entities]" aria-controls="entities" role="tab" data-toggle="tab">' +
__e( _t("Entities") ) +
'</a></li><li role="presentation"><a href="div.tab-pane[name=comments]" aria-controls="comments" role="tab" data-toggle="tab">' +
__e( _t("Comments") ) +
'</a></li></ul><div class="tab-content" style="height: calc(100% - 41px - 10px)"><div role="tabpanel" class="tab-pane active" name="synonyms" style="height: 100%; overflow-y: auto"></div><div role="tabpanel" class="tab-pane" name="descriptors" style="height: 100%; overflow-y: auto; padding-right: 5px"></div><div role="tabpanel" class="tab-pane" name="children" style="height: 100%"></div><div role="tabpanel" class="tab-pane" name="related" style="height: 100%"></div><div role="tabpanel" class="tab-pane" name="entities" style="height: 100%"></div><div role="tabpanel" class="tab-pane" name="comments" style="height: 100%"></div></div></div>';

}
return __p
};

/*
original source:

<div name="details"></div><div class="column" style="margin-top: 10px; height: calc(100% - 25px)"><ul class="nav nav-tabs" role="tablist"><li role="presentation" class="active"><a href="div.tab-pane[name=synonyms]" aria-controls="synonyms" role="tab" data-toggle="tab"><%- _t("Synonyms") %></a></li><li role="presentation"><a href="div.tab-pane[name=descriptors]" aria-controls="descriptors" role="tab" data-toggle="tab"><%- _t("Descriptors") %></a></li><li role="presentation"><a href="div.tab-pane[name=children]" aria-controls="children" role="tab" data-toggle="tab"><%- _t("Sub-ranks") %></a></li><li role="presentation"><a href="div.tab-pane[name=related]" aria-controls="related" role="tab" data-toggle="tab"><%- _t("Related") %></a></li><li role="presentation"><a href="div.tab-pane[name=entities]" aria-controls="entities" role="tab" data-toggle="tab"><%- _t("Entities") %></a></li><li role="presentation"><a href="div.tab-pane[name=comments]" aria-controls="comments" role="tab" data-toggle="tab"><%- _t("Comments") %></a></li></ul><div class="tab-content" style="height: calc(100% - 41px - 10px)"><div role="tabpanel" class="tab-pane active" name="synonyms" style="height: 100%; overflow-y: auto"></div><div role="tabpanel" class="tab-pane" name="descriptors" style="height: 100%; overflow-y: auto; padding-right: 5px"></div><div role="tabpanel" class="tab-pane" name="children" style="height: 100%"></div><div role="tabpanel" class="tab-pane" name="related" style="height: 100%"></div><div role="tabpanel" class="tab-pane" name="entities" style="height: 100%"></div><div role="tabpanel" class="tab-pane" name="comments" style="height: 100%"></div></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 456 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file classificationentrysynonyms.js
 * @brief Classification entry synonyms view
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-12-27
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Marionette = __webpack_require__(1);
let Dialog = __webpack_require__(5);

let View = Marionette.View.extend({
    tagName: 'div',
    className: 'classification-entry-synonyms',
    template: __webpack_require__(457),

    ui: {
        "synonym_name": ".synonym-name",
        "synonym_language": ".synonym-languages",
        "classification_entry_synonym_type": ".entity-synonym-types",
        "add_synonym": ".add-synonym",
        "remove_synonym": ".remove-synonym",
        "add_synonym_panel": "tr.add-synonym-panel",
        "rename_synonym": "td.rename-synonym"
    },

    events: {
        'input @ui.synonym_name': 'onSynonymNameInput',
        'click @ui.add_synonym': 'onAddSynonym',
        'click @ui.remove_synonym': 'onRemoveSynonym',
        'click @ui.rename_synonym': 'onRenameSynonym',
        'change @ui.classification_entry_synonym_type': 'onChangeSynonymType',
        'change @ui.synonym_language': 'onChangeSynonymLanguage'
    },

    templateContext: function () {
        return {
            classification_entry_code: window.application.main.collections.entitySynonymTypes.findWhere({name: "classification_entry_code"}).get('id'),
            classification_entry_name: window.application.main.collections.entitySynonymTypes.findWhere({name: "classification_entry_name"}).get('id')
        };
    },

    initialize: function() {
        this.listenTo(this.model, 'change', this.render, this);
    },

    onRender: function() {
        window.application.main.views.entitySynonymTypes.drawSelect(
            this.ui.classification_entry_synonym_type, true, false, null, {target_model: 'classification.classificationentry'});

        window.application.main.views.languages.htmlFromValue(this.el);
        window.application.main.views.entitySynonymTypes.htmlFromValue(this.el);

        // disable non multiple synonym types
        for (let i = 0; i < this.model.get('synonyms').length; ++i) {
            let st = window.application.main.collections.entitySynonymTypes.get(this.model.get('synonyms')[i].synonym_type);
            if (!st.get('multiple_entry')) {
                let name = st.get('name');
                this.ui.classification_entry_synonym_type.find('option[name=' + name + ']').prop('disabled', true);
            }
        }

        this.ui.classification_entry_synonym_type.selectpicker('refresh');

        this.onChangeSynonymType();
    },

    onChangeSynonymType: function () {
        let synonymTypeId = parseInt(this.ui.classification_entry_synonym_type.val());
        if (!isNaN(synonymTypeId)) {
            let synonymType = window.application.main.collections.entitySynonymTypes.get(synonymTypeId);

            // enable/disable and default language
            if (synonymType.get('has_language')) {
                window.application.main.views.languages.drawSelect(this.ui.synonym_language);
                this.ui.synonym_language.prop('disabled', false).val(window.session.language).selectpicker('refresh');
            } else {
                window.application.main.views.languages.drawSelect(this.ui.synonym_language, true, true);
                this.ui.synonym_language.prop('disabled', true).val('').selectpicker('refresh');
            }
        }

        this.ui.synonym_name.cleanField();
    },

    onChangeSynonymLanguage: function () {
        // force revalidation
        this.onSynonymNameInput();
    },

    validateName: function() {
        let v = this.ui.synonym_name.val().trim();

        if (v.length > 128) {
            $(this.ui.synonym_name).validateField('failed', _t('characters_max', {count: 128}));
            return false;
        } else if (v.length < 1) {
            $(this.ui.synonym_name).validateField('failed',_t('characters_min', {count: 1}));
            return false;
        }

        return true;
    },

    onSynonymNameInput: function () {
        if (this.validateName()) {
            let synonymTypeId = parseInt(this.ui.classification_entry_synonym_type.val());
            let synonymType = window.application.main.collections.entitySynonymTypes.get(synonymTypeId);
            let language = this.ui.synonym_language.val();

            let self = this;
            let name = this.ui.synonym_name.val().trim();

                let filters = {
                fields: ["name", "synonym_type"],
                method: "ieq",
                name: name,
                synonym_type: synonymTypeId
            };

            if (synonymType.get('has_language')) {
                filters.fields.push('language');
                filters.language = language;
            }

            if (synonymType.get('unique') || synonymType.get('has_language')) {
                $.ajax({
                    type: "GET",
                    url: window.application.url(['classification', 'classificationentry', 'synonym', 'search']),
                    dataType: 'json',
                    data: {filters: JSON.stringify(filters)},
                    cache: false,
                }).done(function (data) {
                    if (data.items.length > 0) {
                        for (let i in data.items) {
                            let t = data.items[i];

                            // name must be unique
                            if (t.label.toUpperCase() === name.toUpperCase()) {
                                if (synonymType.get('has_language')) {
                                    self.ui.synonym_name.validateField(
                                        'failed', _t('This synonym exists with this language and type'));
                                } else {
                                    self.ui.synonym_name.validateField(
                                        'failed', _t('The synonym must be unique for this type'));
                                }

                                return;
                            }
                        }
                    }

                    // validate
                    self.ui.synonym_name.validateField('ok');
                });
            } else {
                // validate
                self.ui.synonym_name.validateField('ok');
            }
        }
    },

    onAddSynonym: function () {
        if (this.validateName() && !this.ui.synonym_name.hasClass('invalid')) {
            let self = this;
            let synonymType = parseInt(this.ui.classification_entry_synonym_type.val());
            let name = $(this.ui.synonym_name).val().trim();
            let language = $(this.ui.synonym_language).val();

            $.ajax({
                type: "POST",
                url: this.model.url() + 'synonym/',
                contentType: "application/json; charset=utf-8",
                dataType: 'json',
                data: JSON.stringify({synonym_type: synonymType, name: name, language: language})
            }).done(function (data) {
                //self.model.addSynonym(type, name, language);
                //self.render();
                self.model.fetch({reset: true});
            });
        }
    },

    onRemoveSynonym: function (e) {
        let synonym = $(e.target.parentNode.parentNode);
        let synonymId = $(e.target).data('synonym-id');
        let self = this;

        $.ajax({
            type: "DELETE",
            url: this.model.url() + 'synonym/' + synonymId + '/',
            contentType: "application/json; charset=utf-8"
        }).done(function(data) {
            //self.model.removeSynonym(type, name, language);
            //self.render();
            self.model.fetch({reset: true});
        });
    },

    onRenameSynonym: function(e) {
        let parentSelf = this;

        let ChangeSynonym = Dialog.extend({
            template: __webpack_require__(458),

            attributes: {
                id: "dlg_change_synonym"
            },

            ui: {
                synonym_name: "input[name=synonym-name]"
            },

            events: {
                'input @ui.synonym_name': 'onSynonymNameInput'
            },

            initialize: function (options) {
                ChangeSynonym.__super__.initialize.apply(this);
            },

            onSynonymNameInput: function () {
                if (this.validateName()) {
                    let synonymTypeId = this.getOption('synonym_type');
                    let synonymType = window.application.main.collections.entitySynonymTypes.get(synonymTypeId);

                    let self = this;
                    let name = this.ui.synonym_name.val().trim();

                    let filters = {
                        fields: ["name", "synonym_type"],
                        method: "ieq",
                        name: name,
                        synonym_type: this.getOption('synonym_type')
                    };

                    if (synonymType.get('has_language')) {
                        filters.fields.push('language');
                        filters.language = this.getOption('language');
                    }

                    if (synonymType.get('unique') || synonymType.get('has_language')) {
                        $.ajax({
                            type: "GET",
                            url: window.application.url(['classification', 'classificationentry', 'synonym', 'search']),
                            dataType: 'json',
                            data: {filters: JSON.stringify(filters)},
                            cache: false
                        }).done(function (data) {
                            if (data.items.length > 0) {
                                for (let i in data.items) {
                                    let t = data.items[i];

                                    if ((t.classification_entry === self.model.get('id')) && (t.id === self.getOption('synonym_id'))) {
                                        // valid if same classification entry and same synonym
                                        self.ui.synonym_name.validateField('ok');
                                        return;
                                    } else if (t.label.toUpperCase() === name.toUpperCase()) {
                                        // name must be unique
                                        if (synonymType.get('has_language')) {
                                            self.ui.synonym_name.validateField(
                                                'failed', _t('This synonym exists with this language and type'));
                                        } else {
                                            self.ui.synonym_name.validateField(
                                                'failed', _t('The synonym must be unique for this type'));
                                        }

                                        return;
                                    }
                                }
                            }

                            self.ui.synonym_name.validateField('ok');
                        });
                    } else {
                        self.ui.synonym_name.validateField('ok');
                    }
                }
            },

            validateName: function() {
                let v = this.ui.synonym_name.val().trim();

                if (v.length < 3) {
                    $(this.ui.synonym_name).validateField('failed', _t('characters_min', {count: 3}));
                    return false;
                } else if (v.length > 64) {
                    $(this.ui.synonym_name).validateField('failed', _t('characters_max', {count: 64}));
                    return false;
                } else {
                    $(this.ui.synonym_name).validateField('ok');
                    return true;
                }
            },

            onApply: function() {
                let self = this;
                let synonymId = this.getOption('synonym_id');
                let name = this.ui.synonym_name.val().trim();

                if (!this.ui.synonym_name.hasClass('invalid')) {
                    $.ajax({
                        type: "PUT",
                        url: this.model.url() + 'synonym/' + synonymId + '/',
                        contentType: "application/json; charset=utf-8",
                        dataType: 'json',
                        data: JSON.stringify({name: name})
                    }).done(function (data) {
                        //self.model.renameSynonym(self.getOption('type'), name, self.getOption('language'), self.getOption('name'));
                        self.destroy();
                        self.model.fetch({reset: true});
                    }).fail(function() {
                        self.destroy();
                    });
                }
            }
        });

        let synonym = $(e.target.parentNode);
        let synonymId = $(e.target).data('synonym-id');

        let synonymType = parseInt(synonym.find("[name='synonym-type']").attr('value'));
        let name = synonym.find("[name='name']").text();
        let language = synonym.find("[name='language']").attr('value');

        let changeSynonym = new ChangeSynonym({
            model: this.model,
            synonym_id: synonymId,
            name: name,
            synonym_type: synonymType,
            language: language
        });

        changeSynonym.render();
        changeSynonym.ui.synonym_name.val(name);
    },

    onShowTab: function() {
        window.application.main.defaultRightView();
    }
});

module.exports = View;


/***/ }),
/* 457 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
with (obj) {
__p += '<table class="table table-striped" style="margin-bottom: 0px"><thead><tr><th><span class="fa fa-bolt"></span></th><th>' +
__e( _t("Type") ) +
'</th><th>' +
__e( _t("Name") ) +
'</th><th>' +
__e( _t("Language") ) +
'</th></tr></thead><tbody> ';
 _.each(synonyms, function(synonym) { ;
__p += ' <tr class="element"><th scope="row"> ';
 if (synonym.synonym_type !== classification_entry_name) { ;
__p += '<span data-synonym-id="' +
__e( synonym.id ) +
'" class="action remove-synonym fa fa-minus-circle"></span>';
 } ;
__p += ' </th><td name="synonym-type" class="entity-synonym-type" value="' +
__e( synonym.synonym_type ) +
'"></td><td name="name" class="action rename-synonym" data-synonym-id="' +
__e( synonym.id ) +
'">' +
__e( synonym.name ) +
'</td><td name="language" class="language" value="' +
__e( synonym.language ) +
'"></td></tr> ';
 }) ;
__p += ' <tr class="add-synonym-panel"><form><th scope="row"><span class="add-synonym action fa fa-plus-circle" style="margin-top: 9px"></span></th><td><select class="entity-synonym-types" name="entity-synonym-type"></select></td><td><div class="form-group" style="margin-bottom: 0px"><input class="form-control synonym-name" type="text" maxlength="64" autocomplete="off" name="synonym-name"></div></td><td><select class="synonym-languages" name="synonym-language"></select></td></form></tr></tbody></table>';

}
return __p
};

/*
original source:

<table class="table table-striped" style="margin-bottom: 0px"><thead><tr><th><span class="fa fa-bolt"></th><th><%- _t("Type") %></th><th><%- _t("Name") %></th><th><%- _t("Language") %></th></tr></thead><tbody> <% _.each(synonyms, function(synonym) { %> <tr class="element"><th scope="row"> <% if (synonym.synonym_type !== classification_entry_name) { %><span data-synonym-id="<%- synonym.id %>" class="action remove-synonym fa fa-minus-circle"></span><% } %> </th><td name="synonym-type" class="entity-synonym-type" value="<%- synonym.synonym_type %>"></td><td name="name" class="action rename-synonym" data-synonym-id="<%- synonym.id %>"><%- synonym.name %></td><td name="language" class="language" value="<%- synonym.language %>"></td></tr> <% }) %> <tr class="add-synonym-panel"><form><th scope="row"><span class="add-synonym action fa fa-plus-circle" style="margin-top: 9px"></span></th><td><select class="entity-synonym-types" name="entity-synonym-type"></select></td><td><div class="form-group" style="margin-bottom: 0px"><input class="form-control synonym-name" type="text" maxlength="64" autocomplete="off" name="synonym-name"></div></td><td><select class="synonym-languages" name="synonym-language"></select></td></form></tr></tbody></table>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 458 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title">' +
__e( _t("Change the name for a synonym of classification entry") ) +
'</h4></div><div class="modal-body"><form><div class="form-group"><label class="control-label">' +
__e( _t("Name") ) +
'</label><input class="form-control" type="text" name="synonym-name" value="" maxlength="128" autofocus="" autocomplete="off" style="width:100%"></div></form></div><div class="modal-footer"><button type="button" class="btn btn-default cancel" data-dismiss="modal">' +
__e( _t("Cancel") ) +
'</button> <button type="button" class="btn btn-success apply">' +
__e( _t("Apply") ) +
'</button></div></div></div>';

}
return __p
};

/*
original source:

<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title"><%- _t("Change the name for a synonym of classification entry") %></h4></div><div class="modal-body"><form><div class="form-group"><label class="control-label"><%- _t("Name") %></label><input class="form-control" type="text" name="synonym-name" value="" maxlength="128" autofocus="" autocomplete="off" style="width:100%"></div></form></div><div class="modal-footer"><button type="button" class="btn btn-default cancel" data-dismiss="modal"><%- _t("Cancel") %></button> <button type="button" class="btn btn-success apply"><%- _t("Apply") %></button></div></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 459 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file classificationentrychildren.js
 * @brief Classification entry children collection
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-11-10
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let ClassificationEntryModel = __webpack_require__(26);
let CountableCollection = __webpack_require__(9);

let Collection = CountableCollection.extend({
    url: function() {
        return window.application.url(['classification', 'classificationentry', this.model_id, 'children']);
    },
    model: ClassificationEntryModel,

    // comparator: 'name',

    initialize: function(models, options) {
        options || (options = {});

        Collection.__super__.initialize.apply(this, arguments);

        this.model_id = (options.model_id || null);
        this.deeply = (options.deeply || false);
    },

    fetch: function(options) {
        options || (options = {data: {}});

        if (this.deeply) {
            options.data.deeply = this.deeply;
        }

        return CountableCollection.prototype.fetch.call(this, options);
    },

    count: function(options) {
        options || (options = {data: {}});

        if (this.deeply) {
            options.data.deeply = this.deeply;
        }

        return CountableCollection.prototype.count.call(this, options);
    },
});

module.exports = Collection;


/***/ }),
/* 460 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {/**
 * @file classificationentrychildren.js
 * @brief Classification entry children list view
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-04-20
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let ClassificationEntryView = __webpack_require__(70);
let AdvancedTable = __webpack_require__(6);
let DescriptorsColumnsView = __webpack_require__(11);

let View = AdvancedTable.extend({
    template: __webpack_require__(16),
    className: "classification-entity-list advanced-table-container",
    childView: ClassificationEntryView,
    childViewContainer: 'tbody.entity-list',

    userSettingName: function() {
        return /*this.classification.get('name')*/'classificationentry_children' + '_classification_entry_list_columns';
    },
    userSettingVersion: '1.0',

    defaultColumns: [
        {name: 'name', width: 'auto', sort_by: '+1'},
        {name: 'rank', width: 'auto', sort_by: '+0'},
        {name: 'parent', width: 'auto', sort_by: null},
        // {name: 'synonym', width: 'auto', sort_by: null}
    ],

    columnsOptions: {
        'name': {label: _t('Name'), width: 'auto', minWidth: true, event: 'view-classification-entry-details'},
        'rank': {label: _t('Rank'), width: 'auto', minWidth: true, custom: 'rankCell'},
        'parent': {
            label: _t('Parent'),
            width: 'auto',
            minWidth: true,
            event: 'view-parent-details',
            custom: 'parentCell',
            field: 'name'
        },
        // 'synonym': {
        //     label: _t('Synonym'),
        //     width: 'auto',
        //     minWidth: true,
        //     custom: 'synonymCell',
        //     field: 'name'
        // }
    },

    templateContext: function () {
        return {
            columnsList: this.displayedColumns,
            columnsOptions: this.getOption('columns')
        }
    },

    childViewOptions: function () {
        return {
            columnsList: this.displayedColumns,
            columnsOptions: this.getOption('columns')
        }
    },

    initialize: function(options) {
        View.__super__.initialize.apply(this, arguments);

        // this.listenTo(this.collection, 'reset', this.render, this);
    },

    onShowTab: function() {
        View.__super__.onShowTab.apply(this);

        let self = this;

        // query now to avoid useless queries
        this.query();
    },

    onBeforeDetach: function() {
        window.application.main.defaultRightView();
    }
});

// support of descriptors columns extension
_.extend(View.prototype, DescriptorsColumnsView);

module.exports = View;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 461 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file taxonentities.js
 * @brief Taxon children entities collection
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-12-28
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let CountableCollection = __webpack_require__(9);
let ClassificationEntryEntityModel = __webpack_require__(462);

let Collection = CountableCollection.extend({
    url: function() {
        return window.application.url(['classification', 'classificationentry', this.model_id, 'entities']);
    },
    model: ClassificationEntryEntityModel,

    // comparator: 'name',

    initialize: function(models, options) {
        options || (options = {});
        this.model_id = options.model_id;

        Collection.__super__.initialize.apply(this, arguments);
    }
});

module.exports = Collection;


/***/ }),
/* 462 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file classificationentryentity.js
 * @brief Classification entry entity model
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-12-28
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Backbone = __webpack_require__(7);

let Model = Backbone.Model.extend({
    defaults: {
        id: null,
        name: '',
        content_type: null
    },

    parse: function(data) {
        return data;
    }
});

module.exports = Model;


/***/ }),
/* 463 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file classificationentryentities.js
 * @brief Classification entry entities list view
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-12-28
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let ClassificationEntryEntityView = __webpack_require__(464);
let AdvancedTable = __webpack_require__(6);

let View = AdvancedTable.extend({
    template: __webpack_require__(466),
    className: "classification-entry-entity-list advanced-table-container",
    childView: ClassificationEntryEntityView,
    childViewContainer: 'tbody.entities-list',

    initialize: function() {
        View.__super__.initialize.apply(this);

        this.listenTo(this.collection, 'reset', this.render, this);
    },

    onShowTab: function() {
        View.__super__.onShowTab.apply(this);

        let self = this;

        // query now to avoid useless queries
        this.query();
    },

    onBeforeDetach: function() {
        window.application.main.defaultRightView();
    }
});

module.exports = View;


/***/ }),
/* 464 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file classificationentryentity.js
 * @brief Classification entry entity item view
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-12-28
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Marionette = __webpack_require__(1);

let View = Marionette.View.extend({
    tagName: 'tr',
    template: __webpack_require__(465),
    className: "element",
    classificationEntry: null,

    ui: {
        view_entity: ".view-entity",
        content_type: "td.entity-type > abbr.content-type"
    },

    events: {
        'click @ui.view_entity': 'onViewEntity'
    },

    initialize: function(options) {
        this.mergeOptions(options, ['classificationEntry']);

        this.listenTo(this.model, 'change', this.render, this);
        this.listenTo(this.entity, 'change', this.render, this);
    },

    onRender: function() {
        application.main.views.contentTypes.htmlFromValue(this.el);
    },

    onViewEntity: function(e) {
        let path = this.model.get('content_type').replace('.', '/');
        Backbone.history.navigate("app/" + path + "/" + this.model.get('id') + "/", {trigger: true});
    }
});

module.exports = View;


/***/ }),
/* 465 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<td name="type" class="entity-type"><abbr class="content-type" value="' +
__e( content_type ) +
'" title="' +
__e( content_type ) +
'"></abbr></td><td name="code" class="entity-code action view-entity" entity-id="' +
__e( id ) +
'">' +
__e( code ) +
'</td><td name="name" class="entity-name action view-entity" entity-id="' +
__e( id ) +
'">' +
__e( name ) +
'</td>';

}
return __p
};

/*
original source:

<td name="type" class="entity-type"><abbr class="content-type" value="<%- content_type %>" title="<%- content_type %>"></abbr></td><td name="code" class="entity-code action view-entity" entity-id="<%- id %>"><%- code %></td><td name="name" class="entity-name action view-entity" entity-id="<%- id %>"><%- name %></td>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 466 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div class="table-advanced-head"><table class="table table-striped table-advanced" style="margin-bottom: 0px"><thead><tr scope="row"><th>' +
__e( _t("Type") ) +
'</th><th>' +
__e( _t("Code") ) +
'</th><th>' +
__e( _t("Name") ) +
'</th></tr></thead></table></div><div class="table-advanced-body"><table class="table table-striped table-advanced" style="margin-bottom: 0px"><tbody class="entities-list"></tbody></table></div>';

}
return __p
};

/*
original source:

<div class="table-advanced-head"><table class="table table-striped table-advanced" style="margin-bottom: 0px"><thead><tr scope="row"><th><%- _t("Type") %></th><th><%- _t("Code") %></th><th><%- _t("Name") %></th></tr></thead></table></div><div class="table-advanced-body"><table class="table table-striped table-advanced" style="margin-bottom: 0px"><tbody class="entities-list"></tbody></table></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 467 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file classificationentrylistcontext.js
 * @brief Classification entry list context menu
 * @author Frederic SCHERMA (INRA UMR1095)
 * @date 2018-05-15
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);

let View = Marionette.View.extend({
    tagName: 'div',
    template: __webpack_require__(15),
    className: "context classification-list",
    templateContext: function () {
        return {
            actions: this.getOption('actions'),
            options: {
                'export-list': {className: 'btn-success', label: _t('Export as...')},
                'import-list': {className: 'btn-success', label: _t('Import from...')}
            }
        }
    },

    ui: {
        'export-list': 'button[name="export-list"]',
        'import-list': 'button[name="import-list"]'
    },

    triggers: {
        "click @ui.export-list": "classification:export-list",
        "click @ui.import-list": "classification:import-list"
    },

    initialize: function(options) {
        options || (options = {actions: []});
    }
});

module.exports = View;


/***/ }),
/* 468 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
with (obj) {
__p += '<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title">' +
__e( _t("Create a classification entry") ) +
'</h4></div><div class="modal-body"><form><div class="row"><div class="col-xs-8"><div class="form-group"><label class="control-label" for="classification_entry_name">' +
__e( _t("Principal name of the classification entry") ) +
'</label><input class="form-control name" id="classification_entry_name" type="text" name="classification-entry" value="" maxlength="64" autofocus="" autocomplete="off" style="width:100%"></div></div><div class="col-xs-4"><div class="form-group"><label class="control-label" for="classification_entry_language">' +
__e( _t("Language") ) +
'</label><select class="form-control language" id="classification_entry_language" name="language"></select></div></div></div><div class="form-group"><label class="control-label" for="layout">' +
__e( _t("Layout") ) +
'</label><select id="layout" style="width:100%" class="form-control"> ';
 _.each(layouts, function(layout) { ;
__p += ' <option value="' +
__e( layout.id ) +
'">' +
__e( layout.label ) +
'</option> ';
 }) ;
__p += ' </select></div><div class="form-group"><label class="control-label" for="classification">' +
__e( _t("Classification") + " " + _t("(Linked to layout)") ) +
'</label><select class="form-control classifications" id="classification" name="classification"></select></div><div class="form-group"><label class="control-label" for="classification_rank">' +
__e( _t("Classification rank") ) +
'</label><select class="form-control classification-ranks" id="classification_rank" name="classification-rank"></select></div><div class="form-group classification-entry-parent-group"><label class="control-label" for="classification_entry_parent">' +
__e( _t("Direct parent") ) +
'</label><select id="classification_entry_parent" style="width:100%" class="form-control"></select></div></form></div><div class="modal-footer"><button type="button" class="btn btn-default cancel" data-dismiss="modal">' +
__e( _t("Cancel") ) +
'</button> <button type="button" class="btn btn-success create">' +
__e( _t("Create") ) +
'</button></div></div></div>';

}
return __p
};

/*
original source:

<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title"><%- _t("Create a classification entry") %></h4></div><div class="modal-body"><form><div class="row"><div class="col-xs-8"><div class="form-group"><label class="control-label" for="classification_entry_name"><%- _t("Principal name of the classification entry") %></label><input class="form-control name" id="classification_entry_name" type="text" name="classification-entry" value="" maxlength="64" autofocus="" autocomplete="off" style="width:100%"></div></div><div class="col-xs-4"><div class="form-group"><label class="control-label" for="classification_entry_language"><%- _t("Language") %></label><select class="form-control language" id="classification_entry_language" name="language"></select></div></div></div><div class="form-group"><label class="control-label" for="layout"><%- _t("Layout") %></label><select id="layout" style="width:100%" class="form-control"> <% _.each(layouts, function(layout) { %> <option value="<%- layout.id %>"><%- layout.label %></option> <% }) %> </select></div><div class="form-group"><label class="control-label" for="classification"><%- _t("Classification") + " " + _t("(Linked to layout)") %></label><select class="form-control classifications" id="classification" name="classification"></select></div><div class="form-group"><label class="control-label" for="classification_rank"><%- _t("Classification rank") %></label><select class="form-control classification-ranks" id="classification_rank" name="classification-rank"></select></div><div class="form-group classification-entry-parent-group"><label class="control-label" for="classification_entry_parent"><%- _t("Direct parent") %></label><select id="classification_entry_parent" style="width:100%" class="form-control"></select></div></form></div><div class="modal-footer"><button type="button" class="btn btn-default cancel" data-dismiss="modal"><%- _t("Cancel") %></button> <button type="button" class="btn btn-success create"><%- _t("Create") %></button></div></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 469 */
/***/ (function(module, exports) {

/**
 * @file classificationrank.js
 * @brief Classification rank model
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-04-13
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let ClassificationRankModel = Backbone.Model.extend({
    url: function() {
        if (this.isNew())
            return window.application.url(['classification', 'classification', this.getClassificationId(), 'classificationrank']);
        else
            return window.application.url(['classification', 'classificationrank', this.get('id')]);
    },

    defaults: function() {
        return {
            id: null,
            name: "",
            label: "",
            level: 0,
            num_classification_entries: 0
        }
    },

   initialize: function(attributes, options) {
        options || (options = {});

        ClassificationRankModel.__super__.initialize.apply(this, arguments);

        if (options.collection) {
            this.classification_id = options.collection.classification_id;
        }
    },

    getClassificationId: function() {
        if (typeof this.classification_id !== 'undefined') {
            return this.classification_id;
        } else if (this.get('classification')) {
            return this.classification;
        } else if (typeof this.collection !== 'undefined') {
            return this.collection.classification_id;
        }
    }
});

module.exports = ClassificationRankModel;


/***/ }),
/* 470 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file taxon.js
 * @brief Taxon router
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-04-13
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);
let ClassificationModel = __webpack_require__(44);

let ClassificationListView = __webpack_require__(471);

let ClassificationRankListView = __webpack_require__(476);
let ClassificationRankCreateView = __webpack_require__(480);

let DefaultLayout = __webpack_require__(3);
let TitleView = __webpack_require__(4);
let ScrollingMoreView = __webpack_require__(10);

let ClassificationCollection = __webpack_require__(31);
let ClassificationRankCollection = __webpack_require__(252);


let ClassificationRouter = Marionette.AppRouter.extend({
    routes : {
        "app/classification/classification/": "getClassificationList",
        "app/classification/classification/:id/classificationrank/": "getClassificationIdRanksList"
    },

    getClassificationList : function() {
        let collection = new ClassificationCollection();

        let defaultLayout = new DefaultLayout({});
        window.application.main.showContent(defaultLayout);
        
        defaultLayout.showChildView('title', new TitleView({title: _t("List of classifications")}));

        let classificationListView = new ClassificationListView({collection : collection});

        defaultLayout.showChildView('content', classificationListView);
        defaultLayout.showChildView('content-bottom', new ScrollingMoreView({
            targetView: classificationListView,
            collection: collection
        }));

        classificationListView.query();
    },

    getClassificationIdRanksList : function(id) {
        let classification = new ClassificationModel({id: id});

        let defaultLayout = new DefaultLayout();
        window.application.main.showContent(defaultLayout);

        let collection = new ClassificationRankCollection([], {classification_id: id});

        let classificationRankListView = new ClassificationRankListView({
                classification: classification,
                collection: collection
            });

        defaultLayout.showChildView('content', classificationRankListView);
        defaultLayout.showChildView('content-bottom', new ScrollingMoreView({
            targetView: classificationRankListView,
            collection: collection
        }));

        classification.fetch().then(function () {
            defaultLayout.showChildView('title', new TitleView({
                title: _t("Classification rank"),
                model: classification
            }));

            // need classification permission details
            classificationRankListView.query();

            if (classification.get('can_modify') && window.application.permission.manager.isStaff()) {
                defaultLayout.showChildView('bottom', new ClassificationRankCreateView({
                    model: classification, collection: collection}));
            }
        });
    }
});

module.exports = ClassificationRouter;


/***/ }),
/* 471 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file classificationlist.js
 * @brief List of classification view
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-09-04
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let ClassificationView = __webpack_require__(472);
let AdvancedTable = __webpack_require__(6);

let View = AdvancedTable.extend({
    template: __webpack_require__(474),
    className: "object classification-list advanced-table-container",
    childView: ClassificationView,
    childViewContainer: 'tbody.classification-list',

    defaultSortBy: ['name'],

    initialize: function() {
        View.__super__.initialize.apply(this);

        this.listenTo(this.collection, 'reset', this.render, this);
    },

    onBeforeAttach: function () {
        let self = this;
        let contextLayout = window.application.getView().getChildView('right');
        if (!contextLayout) {
            let DefaultLayout = __webpack_require__(3);
            contextLayout = new DefaultLayout();
            window.application.getView().showChildView('right', contextLayout);
        }

        let TitleView = __webpack_require__(4);
        contextLayout.showChildView('title', new TitleView({title: _t("Classification actions"), glyphicon: 'fa-wrench'}));

        let actions = [
            'add',
            'export-list',
            'import-list'
        ];

        let ClassificationListContextView = __webpack_require__(475);
        let contextView = new ClassificationListContextView({actions: actions});
        contextLayout.showChildView('content', contextView);

        contextView.on("classification:create", function () {
            self.onCreateClassification();
        });

        contextView.on("classification:export-list", function () {
            self.onExportList();
        });

        contextView.on("classification:import-list", function () {
            self.onImportList();
        });
    },

    onBeforeDetach: function () {
        window.application.main.defaultRightView();
    },

    onCreateClassification: function () {
        window.application.classification.controllers.classification.create(this.collection);
    },

    onExportList: function() {
        let ExportDialog = __webpack_require__(242);
        let exportDialog = new ExportDialog({collection: this.collection, exportedColumns: this.displayedColumns});

        exportDialog.render();
    },

    onImportList: function() {
        alert("not yet implemented");
    }
});

module.exports = View;


/***/ }),
/* 472 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file classification.js
 * @brief Classification item view
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-09-04
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);

let View = Marionette.View.extend({
    tagName: 'tr',
    className: 'element object classification actions',
    template: __webpack_require__(473),

    behaviors: {
        ActionBtnEvents: {
            behaviorClass: __webpack_require__(8),
            actions: {
                edit: {display: true, title: _t("Rename classification"), event: 'renameClassification'},
                tag: {display: true, title: _t("Edit label"), event: 'editLabel'},
                manage: {display: true, event: 'viewClassificationRanks'},
                remove: {display: true, event: 'deleteClassification'}
            }
        }
    },

    ui: {
        status_icon: 'td.lock-status',
        delete_btn: 'td.action.remove',
        edit_label_btn: 'td.action.edit-label',
        edit2_label_btn: 'td.action.rename',
        manage_btn: 'td.action.manage'
    },

    events: {
       // 'click @ui.delete_btn': 'deleteClassification',
       'click @ui.edit_label_btn': 'editLabel',
       'click @ui.edit2_label_btn': 'renameClassification',
       'click @ui.manage_btn': 'viewClassificationRanks'
    },

    initialize: function () {
        this.listenTo(this.model, 'change', this.render, this);
    },

    actionsProperties: function() {
        let properties = {
            tag: {disabled: false},
            remove: {disabled: false},
            edit: {disabled: false},
            edit2: {disabled: false}
        };

        // @todo do we want can_modify/can_delete like for descriptor ?
        if (!this.model.get('can_modify') || !window.application.permission.manager.isStaff()) {
            properties.tag.disabled = true;
            properties.edit.disabled = true;
            properties.edit2.disabled = true;
        }

        if (this.model.get('num_classification_ranks') > 0 || !this.model.get('can_delete') || !window.application.permission.manager.isStaff()) {
            properties.remove.disabled = true;
        }

        return properties;
    },

    viewClassificationRanks: function () {
        Backbone.history.navigate("app/classification/classification/" + this.model.id + "/classificationrank/", {trigger: true});
        return false;
    },

    deleteClassification: function () {
        if (this.model.get('num_classification_ranks') === 0) {
            this.model.destroy({wait: true});
        } else {
            $.alert.error(_t("Some ranks exists for this classification"));
        }
        return false;
    },

    editLabel: function() {
        if (!this.model.get('can_modify') || !window.application.permission.manager.isStaff()) {
            return false;
        }

        let ChangeLabel = __webpack_require__(24);
        let changeLabel = new ChangeLabel({
            model: this.model,
            title: _t("Change the labels for the classification")});

        changeLabel.render();

        return false;
    },

    renameClassification: function() {
        let ChangeName = __webpack_require__(20);
        let changeName = new ChangeName({
            model: this.model,
            title: _t("Rename the classification")
        });

        changeName.render();
        changeName.ui.name.val(this.model.get('name'));

        return false;
    }
});

module.exports = View;


/***/ }),
/* 473 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
with (obj) {
__p += ' ';
 var className = "action"; ;
__p += ' <td class="glyph-fixed-column lock-status"> ';
 if (!can_delete) { ;
__p += ' ';
 className = ""; ;
__p += ' <span class="fa fa-lock" title="' +
__e( _t('Classification locked') ) +
'"></span> ';
 } ;
__p += ' </td><td name="description" class="glyph-fixed-column"><span class="fa fa-question-circle" title="' +
__e( description ) +
'" style="cursor: help"></span></td><td class="' +
__e( className ) +
' rename" name="name" value="' +
__e( name ) +
'">' +
__e( name ) +
'</td><td class="' +
__e( className ) +
' edit-label" name="label" value="' +
__e( label ) +
'">' +
__e( label ) +
'</td><td class="action manage last-column" name="num_classification_ranks"><span class="badge" title="' +
__e( _t('Manage ranks') ) +
'">' +
__e( num_classification_ranks ) +
'</span></td>';

}
return __p
};

/*
original source:

 <% var className = "action"; %> <td class="glyph-fixed-column lock-status"> <% if (!can_delete) { %> <% className = ""; %> <span class="fa fa-lock" title="<%- _t('Classification locked') %>"></span> <% } %> </td><td name="description" class="glyph-fixed-column"><span class="fa fa-question-circle" title="<%- description %>" style="cursor: help"></span></td><td class="<%- className %> rename" name="name" value="<%- name %>"><%- name %></td><td class="<%- className %> edit-label" name="label" value="<%- label %>"><%- label %></td><td class="action manage last-column" name="num_classification_ranks"><span class="badge" title="<%- _t('Manage ranks') %>"><%- num_classification_ranks %></span></td>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 474 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div class="table-advanced-head"><table class="table table-striped table-advanced"><thead><tr scope="row"><th class="glyph-fixed-column"><span class="fa fa-lock"></span></th><th class="glyph-fixed-column"><span class="fa fa-info-circle"></span></th><th class="title-column">' +
__e( _t("Name") ) +
'</th><th class="title-column">' +
__e( _t("Label") ) +
'</th><th class="title-column">' +
__e( _t("Ranks") ) +
'</th></tr></thead></table></div><div class="table-advanced-body"><table class="table table-striped table-advanced"><tbody class="classification-list"></tbody></table></div>';

}
return __p
};

/*
original source:

<div class="table-advanced-head"><table class="table table-striped table-advanced"><thead><tr scope="row"><th class="glyph-fixed-column"><span class="fa fa-lock"></span></th><th class="glyph-fixed-column"><span class="fa fa-info-circle"></span></th><th class="title-column"><%- _t("Name") %></th><th class="title-column"><%- _t("Label") %></th><th class="title-column"><%- _t("Ranks") %></th></tr></thead></table></div><div class="table-advanced-body"><table class="table table-striped table-advanced"><tbody class="classification-list"></tbody></table></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 475 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file classificationlistcontext.js
 * @brief Classification list context menu
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-12-20
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);

let View = Marionette.View.extend({
    tagName: 'div',
    template: __webpack_require__(15),
    className: "context classification-list",
    templateContext: function () {
        return {
            actions: this.getOption('actions'),
            options: {
                'add': {className: 'btn-success', label: _t('Create classification')},
            }
        }
    },

    ui: {
        'add': 'button[name="add"]'
    },

    triggers: {
        "click @ui.add": "classification:create"
    },

    initialize: function(options) {
        options || (options = {actions: []});
    }
});

module.exports = View;


/***/ }),
/* 476 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file classificationranklist.js
 * @brief List of rank of classification view
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-09-14
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let ClassificationRankView = __webpack_require__(477);
let AdvancedTable = __webpack_require__(6);

let View = AdvancedTable.extend({
    template: __webpack_require__(479),
    className: "object classification-rank-list advanced-table-container",
    childView: ClassificationRankView,
    childViewContainer: 'tbody.classification-rank-list',

    defaultSortBy: ['level'],

    childViewOptions: function () {
        return {
            classification: this.getOption('classification')
        }
    },

    ui: {
      'body': 'div.table-advanced-body'
    },

    events: {
        "dragenter @ui.body": "dragEnterContent",
        "dragleave @ui.body" : "dragLeaveContent",
        "dragover @ui.body": "dragOverContent",
        "drop @ui.body": "dropContent"
    },

    initialize: function(options) {
        View.__super__.initialize.apply(this, arguments);

        this.listenTo(this.collection, 'reset', this.render, this);
        // this.listenTo(this.collection, 'remove', this.render, this);
    },

    dragEnterContent: function (e) {
        if (e.preventDefault) {
            e.preventDefault();
        }

        if (!$(e.target).hasClass("table-advanced-body")) {
            return false;
        }

        this.dragEnterCount || (this.dragEnterCount = 0);
        ++this.dragEnterCount;

        if (!application.main.dnd.hasView('classification-rank')) {
            return false;
        }

        if (this.dragEnterCount === 1) {
            application.main.dnd.unsetTarget();

            if (this.$el.find("tbody tr").length === 0) {
                this.$el.find("thead tr th").css('border-bottom', '5px dashed #ddd');
            }

            this.$el.find("tbody tr").last().css('border-bottom', '5px dashed #ddd');
        }

        return false;
    },

    dragLeaveContent: function (e) {
        if (e.preventDefault) {
            e.preventDefault();
        }

        if (!$(e.target).hasClass("table-advanced-body")) {
            return false;
        }

        this.dragEnterCount || (this.dragEnterCount = 1);
        --this.dragEnterCount;

        if (!application.main.dnd.hasView('classification-rank')) {
            return false;
        }

        if (this.dragEnterCount === 0) {
            this.$el.find("tbody tr").last().css('border-bottom', 'initial');
            this.$el.find("thead tr th").css('border-bottom', 'initial');

        }

        return false;
    },

    dragOverContent: function (e) {
        if (e.preventDefault) {
            e.preventDefault();
        }

        if (!$(e.target).hasClass("table-advanced-body")) {
            return false;
        }

        this.dragEnterCount || (this.dragEnterCount = 1);

        if (!application.main.dnd.hasView('classification-rank')) {
            return false;
        }

        if (this.dragEnterCount === 1) {
            if (this.$el.find("tbody tr").length === 0) {
                this.$el.find("thead tr th").css('border-bottom', '5px dashed #ddd');
            }

            this.$el.find("tbody tr").last().css('border-bottom', '5px dashed #ddd');
        }

        //e.dataTransfer.dropEffect = 'move';
        return false;
    },

    dropContent: function (e) {
        if (e.stopPropagation) {
            e.stopPropagation();
        }

        if (!$(e.target).hasClass("table-advanced-body")) {
            return false;
        }

        this.dragEnterCount = 0;

        if (!application.main.dnd.hasView('classification-rank')) {
            return false;
        }

        this.$el.find("tbody tr").last().css('border-bottom', 'initial');
        this.$el.find("thead tr th").css('border-bottom', 'initial');

        let elt = application.main.dnd.get();
        if (elt.$el.hasClass('classification-rank')) {
            // let dst = $(e.originalEvent.target).parent('tr');
            // let dstId = parseInt(dst.attr('element-id'));

            if (application.main.dnd.getTarget()) {
                this.collection.moveClassificationRankAfter(
                    elt.model.get('id'),
                    application.main.dnd.getTarget().model.get('id'));
            } else {
                this.collection.moveClassificationRankAfter(elt.model.get('id'), null);
            }
        }

        return false;
    }
});

module.exports = View;


/***/ }),
/* 477 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file classificationrank.js
 * @brief Classification rank item view
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-09-13
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);

let View = Marionette.View.extend({
    tagName: 'tr',
    className: 'element object classification-rank actions',
    template: __webpack_require__(478),
    attributes: function () {
        return {
            'scope': 'row',
            'element-id': this.model.get('id')
        }
    },
    templateContext: function () {
        return {
            classification: this.getOption('classification')
        }
    },

    behaviors: {
        ActionBtnEvents: {
            behaviorClass: __webpack_require__(8),
            actions: {
                edit: {display: false},
                tag: {display: true, title: _t("Edit label"), event: 'renameClassificationRank'},
                manage: {display: true, event: 'viewClassificationEntry'},
                remove: {display: true, event: 'deleteClassificationRank'}
            }
        }
    },

    ui: {
        status_icon: 'td.lock-status',
        delete_btn: 'td.action.remove',
        edit_label_btn: 'td.action.edit-label',
        manage_btn: 'td.action.manage',
        rename_btn: 'td.action.rename'
    },

    events: {
        'dragstart': 'dragStart',
        'dragend': 'dragEnd',
        'dragover': 'dragOver',
        'dragenter': 'dragEnter',
        'dragleave': 'dragLeave',
        'drop': 'drop',
        // 'click @ui.delete_btn': 'deleteClassification',
        'click @ui.edit_label_btn': 'editLabel',
        'click @ui.manage_btn': 'viewClassificationEntry',
        'click @ui.rename_btn': 'renameClassificationRank'
    },

    initialize: function (options) {
        View.__super__.initialize.apply(this, arguments);

        this.listenTo(this.model, 'change', this.render, this);
    },

    actionsProperties: function() {
        let properties = {
            tag: {disabled: false},
            remove: {disabled: false}
        };

        // @todo do we want can_modify/can_delete like for descriptor ?
        if (!this.getOption('classification').get('can_modify') || !window.application.permission.manager.isStaff()) {
            properties.tag.disabled = true;
        } else {
            this.$el.prop('draggable', true);
        }

        if (!this.getOption('classification').get('can_delete') || !window.application.permission.manager.isStaff()) {
            properties.remove.disabled = true;
        }

        return properties;
    },

    viewClassificationEntry: function () {
        Backbone.history.navigate("app/classification/classification/" + this.model.id + "/classificationrank/entry/", {trigger: true});
        return false;
    },

    deleteClassificationRank: function () {
        if (this.model.get('num_classification_entries') !== 0) {
            $.alert.error(_t("Some entries exists for this classification rank"));
            return false;
        }

        let collection = this.model.collection;
        this.model.destroy({wait: true}).done(function (model) {
            collection.fetch({reset: true});
        });

        return false;
    },

    editLabel: function() {
        if (!this.getOption('classification').get('can_modify') || !window.application.permission.manager.isStaff()) {
            return false;
        }

        let ChangeLabel = __webpack_require__(24);
        let changeLabel = new ChangeLabel({
            model: this.model,
            title: _t("Change the labels for the classification rank")});

        changeLabel.render();

        return false;
    },

    renameClassificationRank: function() {
        let ChangeName = __webpack_require__(20);
        let changeName = new ChangeName({
            model: this.model,
            title: _t("Rename classification rank")
        });

        changeName.render();
        changeName.ui.name.val(this.model.get('name'));

        return false;
    },

    dragStart: function(e) {
        // fix for firefox...
        e.originalEvent.dataTransfer.setData('text/plain', null);

        this.$el.css('opacity', '0.4');
        application.main.dnd.set(this, 'classification-rank');
    },

    dragEnd: function(e) {
        this.$el.css('opacity', '1.0');
        application.main.dnd.unset();
    },

    dragOver: function (e) {
        if (e.originalEvent.preventDefault) {
            e.originalEvent.preventDefault();
        }

        //e.originalEvent.dataTransfer.dropEffect = 'move';
        return false;
    },

    dragEnter: function (e) {
        if (e.originalEvent.preventDefault) {
            e.originalEvent.preventDefault();
        }

        if (!application.main.dnd.hasView('classification-rank')) {
            return false;
        }

        if (application.main.dnd.get().$el.hasClass('classification-rank')) {
            application.main.dnd.setTarget(this);

            if (this.model.get('level') < application.main.dnd.get().model.get('level')) {
                this.$el.css('border-top', '5px dashed #ddd');
            } else if (this.model.get('level') > application.main.dnd.get().model.get('level')) {
                this.$el.css('border-bottom', '5px dashed #ddd');
            }
        }

        return false;
    },

    dragLeave: function (e) {
        if (e.originalEvent.preventDefault) {
            e.originalEvent.preventDefault();
        }

        if (!application.main.dnd.hasView('classification-rank')) {
            return false;
        }

        if (application.main.dnd.get().$el.hasClass('classification-rank')) {
            if (this.model.get('level') < application.main.dnd.get().model.get('level')) {
                this.$el.css('border-top', 'initial');
            } else if (this.model.get('level') > application.main.dnd.get().model.get('level')) {
                this.$el.css('border-bottom', 'initial');
            }
        }

        return false;
    },

    drop: function (e) {
        if (e.originalEvent.stopPropagation) {
            e.originalEvent.stopPropagation();
        }

        if (!application.main.dnd.hasView('classification-rank')) {
            return false;
        }

        let elt = application.main.dnd.get();
        if (elt.$el.hasClass('classification-rank')) {
            // reset borders
            this.$el.css('border-top', 'initial');
            this.$el.css('border-bottom', 'initial');

            if (this.model.collection) {
                // let dst = $(e.originalEvent.target).parent('tr');
                // let dstId = parseInt(dst.attr('element-id'));

                this.model.collection.moveClassificationRankAfter(
                    elt.model.get('id'),
                    application.main.dnd.getTarget().model.get('id'));
            }
        }

        return false;
    }
});

module.exports = View;


/***/ }),
/* 478 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
with (obj) {
__p += ' ';
 var className = "action"; ;
__p += ' <td class="glyph-fixed-column lock-status"> ';
 if (!classification.get('can_modify')) { ;
__p += ' ';
 className = ""; ;
__p += ' <span class="fa fa-lock" title="' +
__e( _t('Classification locked') ) +
'"></span> ';
 } ;
__p += ' </td><td class="' +
__e( className ) +
' rename" name="name" value="' +
__e( name ) +
'">' +
__e( name ) +
'</td><td class="' +
__e( className ) +
' edit-label" name="label" value="' +
__e( label ) +
'">' +
__e( label ) +
'</td><td class="last-column" name="level"> ';
 if (!classification.get('can_modify')) { ;
__p += ' <span class="badge">' +
__e( level ) +
'</span> ';
 } else { ;
__p += ' <span class="badge" title="drag\'n\'drop to change level">' +
__e( level ) +
'</span> ';
 } ;
__p += ' </td>';

}
return __p
};

/*
original source:

 <% var className = "action"; %> <td class="glyph-fixed-column lock-status"> <% if (!classification.get('can_modify')) { %> <% className = ""; %> <span class="fa fa-lock" title="<%- _t('Classification locked') %>"></span> <% } %> </td><td class="<%- className %> rename" name="name" value="<%- name %>"><%- name %></td><td class="<%- className %> edit-label" name="label" value="<%- label %>"><%- label %></td><td class="last-column" name="level"> <% if (!classification.get('can_modify')) { %> <span class="badge"><%- level %></span> <% } else { %> <span class="badge" title="drag'n'drop to change level"><%- level %></span> <% } %> </td>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 479 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div class="table-advanced-head"><table class="table table-striped table-advanced"><thead><tr scope="row"><th class="glyph-fixed-column"><span class="fa fa-lock"></span></th><th class="title-column">' +
__e( _t("Name") ) +
'</th><th class="title-column">' +
__e( _t("Label") ) +
'</th><th class="title-column">' +
__e( _t("Level") ) +
'</th></tr></thead></table></div><div class="table-advanced-body"><table class="table table-striped table-advanced"><tbody class="classification-rank-list"></tbody></table></div>';

}
return __p
};

/*
original source:

<div class="table-advanced-head"><table class="table table-striped table-advanced"><thead><tr scope="row"><th class="glyph-fixed-column"><span class="fa fa-lock"></span></th><th class="title-column"><%- _t("Name") %></th><th class="title-column"><%- _t("Label") %></th><th class="title-column"><%- _t("Level") %></th></tr></thead></table></div><div class="table-advanced-body"><table class="table table-striped table-advanced"><tbody class="classification-rank-list"></tbody></table></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 480 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file classificationrankadd.js
 * @brief Create a new classification rank.
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-09-14
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);
let Dialog = __webpack_require__(5);

let View = Marionette.View.extend({
    tagName: 'div',
    className: 'classification-rank-add',
    template: __webpack_require__(481),

    ui: {
        add_classification_rank_btn: 'span.add-classification-rank',
        add_classification_rank_name: 'input.classification-rank-name',
    },

    events: {
        'click @ui.add_classification_rank_btn': 'addClassificationRank',
        'input @ui.add_classification_rank_name': 'onClassificationRankNameInput',
    },

    initialize: function(options) {
        options || (options = {});
        this.classification = options.classification;
        this.collection = options.collection;
    },

    addClassificationRank: function () {
        let ClassificationRankCreate = Dialog.extend({
            template: __webpack_require__(482),

            attributes: {
                id: "dlg_create_classification_rank",
            },

            ui: {
                name: "input.classification-rank-name",
                label: "input.classification-rank-label",
                level: "input.classification-rank-level"
            },

            events: {
                'input @ui.label': 'onLabelInput',
            },

            initialize: function (options) {
                ClassificationRankCreate.__super__.initialize.apply(this, arguments);
            },

            onRender: function () {
                this.ui.name.val(this.getOption('name'));

                ClassificationRankCreate.__super__.onRender.apply(this);
            },

            onApply: function () {
                if (!this.validateLabel()) {
                    return;
                }

                let view = this;
                let collection = this.getOption('collection');
                let name = this.getOption('name');
                let label = this.ui.label.val();
                // let level = this.ui.level.val();

                collection.create({
                    name: name,
                    label: label,
                    // level: level
                }, {
                    wait: true,
                    success: function () {
                        view.destroy();
                    },
                    error: function () {
                        $.alert.error(_t("Unable to create the classification rank !"));
                    }
                });
            },

            validateLabel: function () {
                let v = this.ui.label.val();

                if (v.length < 3) {
                    $(this.ui.label).validateField('failed', _t('characters_min', {count: 3}));
                    return false;
                }

                return true;
            },

            onLabelInput: function () {
                if (this.validateLabel()) {
                    $(this.ui.label).validateField('ok');
                }
            }
        });

        if (!this.ui.add_classification_rank_name.hasClass('invalid')) {
            let classificationRankCreate = new ClassificationRankCreate({
                collection: this.collection,
                classification: this.classification,
                name: this.ui.add_classification_rank_name.val()
            });

            this.ui.add_classification_rank_name.cleanField();
            classificationRankCreate.render();
            classificationRankCreate.ui.name.prop('readonly', true);
        }
    },

    validateClassificationRankName: function() {
        let v = this.ui.add_classification_rank_name.val();
        let re = /^[a-zA-Z0-9_\-]+$/i;

        if (v.length > 0 && !re.test(v)) {
            this.ui.add_classification_rank_name.validateField('failed', _t("Invalid characters (alphanumeric, _ and - only)"));
            return false;
        } else if (v.length < 3) {
            this.ui.add_classification_rank_name.validateField('failed', _t('characters_min', {count: 3}));
            return false;
        } else if (v.length > 128) {
            this.ui.add_classification_rank_name.validateField('failed', _t('characters_max', {count: 128}));
            return false;
        }

        return true;
    },

    onClassificationRankNameInput: function () {
        if (this.validateClassificationRankName()) {
            $.ajax({
                type: "GET",
                url: window.application.url(['classification', 'classificationrank', 'search']),
                dataType: 'json',
                data: {
                    filters: JSON.stringify({
                        method: 'ieq',
                        fields: 'name',
                        name: this.ui.add_classification_rank_name.val()
                    })
                },
                view: this,
            }).done(function (data) {
                if (data.items.length > 0) {
                    for (let i in data.items) {
                        let t = data.items[i];

                        if (t.name.toUpperCase() === this.view.ui.add_classification_rank_name.val().toUpperCase()) {
                            this.view.ui.add_classification_rank_name.validateField('failed', _t('Classification rank name already in usage'));
                            break;
                        }
                    }
                } else {
                    this.view.ui.add_classification_rank_name.validateField('ok');
                }
            });
        }
    }
});

module.exports = View;


/***/ }),
/* 481 */
/***/ (function(module, exports) {

underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '';
with (obj) {
__p += '<table class="table table-striped" style="margin-bottom: 0px"><tbody><tr class="edit-mode" style="height: 80px"><th><span class="add-classification-rank action fa fa-plus-circle" style="margin-top: 9px; margin-left: 10px"></span></th><td style="width: 100%"><div class="form-group form-group-margin-sm"><input type="text" class="classification-rank-name form-control" name="classification-rank" maxlength="128"></div></td></tr></tbody></table>';

}
return __p
};

/*
original source:

<table class="table table-striped" style="margin-bottom: 0px"><tbody><tr class="edit-mode" style="height: 80px"><th><span class="add-classification-rank action fa fa-plus-circle" style="margin-top: 9px; margin-left: 10px"></span></th><td style="width: 100%"><div class="form-group form-group-margin-sm"><input type="text" class="classification-rank-name form-control" name="classification-rank" maxlength="128"></div></td></tr></tbody></table>
*/


/***/ }),
/* 482 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title">' +
__e( _t("Create rank of classification") ) +
'</h4></div><div class="modal-body" style="max-height: 400px; overflow-y: auto"><form><div class="form-group"><label class="control-label">' +
__e( _t("Unique name") ) +
'</label><input class="form-control classification-rank-name" type="text" maxlength="128" autocomplete="off" style="width:100%"></div><div class="form-group"><label class="control-label">' +
__e( _t("Label for the current language") ) +
'</label><input class="form-control classification-rank-label" type="text" maxlength="128" autofocus="" autocomplete="off" style="width:100%"></div></form></div><div class="modal-footer"><button type="button" class="btn btn-default cancel" data-dismiss="modal">' +
__e( _t("Cancel") ) +
'</button> <button type="button" class="btn btn-success apply">' +
__e( _t("Apply") ) +
'</button></div></div></div>';

}
return __p
};

/*
original source:

<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title"><%- _t("Create rank of classification") %></h4></div><div class="modal-body" style="max-height: 400px; overflow-y: auto"><form><div class="form-group"><label class="control-label"><%- _t("Unique name") %></label><input class="form-control classification-rank-name" type="text" maxlength="128" autocomplete="off" style="width:100%"></div><div class="form-group"><label class="control-label"><%- _t("Label for the current language") %></label><input class="form-control classification-rank-label" type="text" maxlength="128" autofocus="" autocomplete="off" style="width:100%"></div></form></div><div class="modal-footer"><button type="button" class="btn btn-default cancel" data-dismiss="modal"><%- _t("Cancel") %></button> <button type="button" class="btn btn-success apply"><%- _t("Apply") %></button></div></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 483 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file classificationentry.js
 * @brief Classification entry router
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-04-13
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Marionette = __webpack_require__(1);

let ClassificationModel = __webpack_require__(44);
let ClassificationEntryModel = __webpack_require__(26);

let ClassificationEntryListView = __webpack_require__(251);
let EntityListFilterView = __webpack_require__(14);

let ClassificationEntryLayout = __webpack_require__(247);

let DefaultLayout = __webpack_require__(3);
let TitleView = __webpack_require__(4);
let ScrollingMoreView = __webpack_require__(10);

let ClassificationEntryCollection = __webpack_require__(250);


let ClassificationEntryRouter = Marionette.AppRouter.extend({
    routes : {
        "app/classification/classificationentry/:id/*tab": "getClassificationEntry",
        "app/classification/classification/:id/classificationentry/": "getClassificationClassificationEntry"
    },
/*
    constructor: function() {
        let args = Array.prototype.slice.call(arguments);
        Marionette.AppRouter.apply(this, args);

        // set up the onRoute processing, from the existing route event
        this.on("route", this._processOnRoute, this);
    },

    // process the route event and trigger the onRoute method call, if it exists
    _processOnRoute: function(routeName, routeArgs) {
        // find the path that matched
        let routePath = _.invert(this.appRoutes)[routeName];

        // make sure an onRoute is there, and call it
        if (_.isFunction(this.onRoute)) {
            this.onRoute(routeName, routePath, routeArgs);
        }
    },

    onRoute: function(route, name, args) {
        console.log('route');
    },
*/
    getClassificationEntry : function(id, tab) {
        tab || (tab = "");

        let classificationEntry = new ClassificationEntryModel({id: id});

        let defaultLayout = new DefaultLayout();
        window.application.main.showContent(defaultLayout);

        let classificationEntryLayout = new ClassificationEntryLayout({model: classificationEntry, initialTab: tab.replace('/', '')});

        classificationEntry.fetch().then(function () {
            defaultLayout.showChildView('title', new TitleView({title: _t("Classification entry details"), model: classificationEntry}));
            defaultLayout.showChildView('content', classificationEntryLayout);
        });
    },

    getClassificationClassificationEntry: function(id) {
        let classification = new ClassificationModel({id: id});

        let defaultLayout = new DefaultLayout();
        window.application.main.showContent(defaultLayout);

        let collection = new ClassificationEntryCollection([], {classification_id: id});

        // get available columns
        let columns = window.application.main.cache.lookup({
            type: 'entity_columns',
            format: {model: 'classification.classificationentry'}
        });

        $.when(columns, classification.fetch()).then(function(data) {
            defaultLayout.showChildView('title', new TitleView({
                title: _t("Classifications entries"),
                model: classification
            }));

            let classificationEntryListView = new ClassificationEntryListView({
                classification: classification,
                collection: collection,
                columns: data[0].value
            });

            defaultLayout.showChildView('content', classificationEntryListView);
            defaultLayout.showChildView('content-bottom', new ScrollingMoreView({
                targetView: classificationEntryListView,
                collection: collection
            }));

            // need classification permission details
            classificationEntryListView.query();

            defaultLayout.showChildView('bottom', new EntityListFilterView({
                collection: collection, columns: data[0].value}));

            // to force display of the context menu
            classificationEntryListView.onShowTab();
        });
    }
});

module.exports = ClassificationEntryRouter;


/***/ }),
/* 484 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file init.js
 * @brief Descriptor module init entry point
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-05-26
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

// style
__webpack_require__(485);

let DescriptorModule = function() {
    this.name = "descriptor";
};

DescriptorModule.prototype = {
    initialize: function(app, options) {
        this.models = {};
        this.collections = {};
        this.views = {};
        this.routers = {};
        this.controllers = {};

        try {
            i18next.default.addResources(session.language, 'default', __webpack_require__(486)("./" + session.language + '/default.json'));
        } catch (e) {
            console.warn("No translation found for the current language. Fallback to english language");
        }

        //
        // main collections
        //

        let SelectOption = __webpack_require__(19);

        let DescribableCollection = __webpack_require__(489);
        this.collections.describables = new DescribableCollection();

        this.views.describables = new SelectOption({
            className: 'describable',
            collection: this.collections.describables,
        });

        let ConditionCollection = __webpack_require__(491);
        this.collections.conditions = new ConditionCollection();

        this.views.conditions = new SelectOption({
            className: 'condition',
            collection: this.collections.conditions,
        });

        let DescriptorCollection = __webpack_require__(82);
        this.collections.descriptors = new DescriptorCollection();

        let FormatTypeCollection = __webpack_require__(493);
        this.collections.formatTypes = new FormatTypeCollection();

        this.views.formatTypes = new SelectOption({
            // sync: true,
            className: 'format-type',
            collection: this.collections.formatTypes,
        });

        let FormatUnitCollection = __webpack_require__(495);
        this.collections.formatUnits = new FormatUnitCollection();

        this.views.formatUnits = new SelectOption({
            // sync: true,
            className: 'format-unit',
            collection: this.collections.formatUnits,
        });

        //
        // descriptor format types
        //

        this.format_with_value_list = [
            'enum_single',
            'enum_pair',
            'enum_ordinal'
        ];

        let DescriptorFormatTypeManager = __webpack_require__(83);
        this.widgets = new DescriptorFormatTypeManager();

        // register the standard format type of descriptors
        let widgets = [
            'boolean',
            'numeric',
            'numeric_range',
            'ordinal',
            'string',
            'imprecise_date',
            'date',
            'time',
            'datetime',
            'entity',
            'enum_single',
            'enum_pair',
            'enum_ordinal',
            'layout',
            'user'
        ];

        for (let i = 0; i < widgets.length; ++i) {
            let moduleName = widgets[i].replace(/_/g, '').toLowerCase();
            this.widgets.registerElement(widgets[i], __webpack_require__(497)("./" + moduleName));
        }

        //
        // descriptor layout types
        //

        let LayoutTypeManager = __webpack_require__(508);
        this.layoutTypes = new LayoutTypeManager();

        //
        // cache
        //

        app.main.cache.register('descriptors');
        app.main.cache.register('layout');
        app.main.cache.register('entity_columns');

        let LayoutCacheFetcher = __webpack_require__(509);
        app.main.cache.registerFetcher(new LayoutCacheFetcher());

        let DescriptorCacheFetcher = __webpack_require__(510);
        app.main.cache.registerFetcher(new DescriptorCacheFetcher());

        let ColumnCacheFetcher = __webpack_require__(511);
        app.main.cache.registerFetcher(new ColumnCacheFetcher());

        //
        // routers
        //

        let DescriptorRouter = __webpack_require__(512);
        this.routers.descriptor = new DescriptorRouter();

        let LayoutRouter = __webpack_require__(532);
        this.routers.layout = new LayoutRouter();

        let IndexationRouter = __webpack_require__(556);
        this.routers.indexation = new IndexationRouter();

        //
        // controllers
        //

        let DescriptorController = __webpack_require__(561);
        this.controllers.descriptor = new DescriptorController();

        let IndexController = __webpack_require__(563);
        this.controllers.index = new IndexController();

    },

    start: function(app, options) {
        // nothing to do
    },

    stop: function(app, options) {

    }
};

module.exports = DescriptorModule;


/***/ }),
/* 485 */
/***/ (function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__(81);
if(typeof content === 'string') content = [[module.i, content, '']];
// Prepare cssTransformation
var transform;

var options = {"hmr":true}
options.transform = transform
// add the styles to the DOM
var update = __webpack_require__(22)(content, options);
if(content.locals) module.exports = content.locals;
// Hot Module Replacement
if(true) {
	// When the styles change, update the <style> tags
	if(!content.locals) {
		module.hot.accept(81, function() {
			var newContent = __webpack_require__(81);
			if(typeof newContent === 'string') newContent = [[module.i, newContent, '']];
			update(newContent);
		});
	}
	// When the module is disposed, remove the <style> tags
	module.hot.dispose(function() { update(); });
}

/***/ }),
/* 486 */
/***/ (function(module, exports, __webpack_require__) {

var map = {
	"./en/default.json": 487,
	"./fr/default.json": 488
};
function webpackContext(req) {
	return __webpack_require__(webpackContextResolve(req));
};
function webpackContextResolve(req) {
	var id = map[req];
	if(!(id + 1)) // check for number or string
		throw new Error("Cannot find module '" + req + "'.");
	return id;
};
webpackContext.keys = function webpackContextKeys() {
	return Object.keys(map);
};
webpackContext.resolve = webpackContextResolve;
module.exports = webpackContext;
webpackContext.id = 486;

/***/ }),
/* 487 */
/***/ (function(module, exports) {

module.exports = {"% (percent)":"","%/day":"","%/hour":"","%/min":"","Accept":"","Actions on descriptor":"","Actions on descriptor values":"","Actions on descriptors":"","Actions on indexes":"","Add":"","Add a comment":"","Add descriptor":"","Add new panel":"","All":"","Apply":"","Autocomplete (big list)":"","Autocomplete search field":"","Belong to (union)":"","Boolean":"","CCl (chlore)":"","Cancel":"","Category":"","Change comment value":"","Change the comment value":"","Change the descriptor labels":"","Change the labels for the layout":"","Change the labels for the panel of descriptor":"","Change the labels for the type of model of descriptor":"","Change the value of a field for a type of descriptor":"","Chroma":"","Code":"","Collapse/Expand":"","Comments":"","Common":"","Condition":"","Configuration":"","Contained by":"","Contains":"","Continue":"","Controls how is displayed the field. Hierarchy mode is a special usage for pseudo hierarchy, for which values are roughly shifted to give an illusion of parent/children. The shift depend of the level declared in the value0 while value1 contains the label. The first value contains something like 1 or 2 or 1.1, 1.2, 1.1.1...":"","Create":"","Create a descriptor":"","Create a layout of descriptors":"","Create a panel of descriptor":"","Create an index for a descriptor":"","Create descriptor":"","Create index":"","Create value":"","Custom":"","Custom unit name":"","Date":"","Date Time":"","Date+time":"","Defined":"","Delete descriptor":"","Description":"","Descriptor":"","Descriptor can not contain a list of values":"","Descriptor condition":"","Descriptor has been successfully saved":"","Descriptor type code":"","Descriptor type name":"","Details for the descriptor":"","Details for the descriptor index":"","Different from":"","Display the list as":"","Displayed fields":"","Done":"","Dropdown (limit of 256 values)":"","Edit value0":"","Edit value1":"","Enter a value.":"","Entity":"","Error":"","Exact":"","Field name (value0)":"","Field name (value1)":"","Grain":"","Greater than":"","Group name":"","Hierarchy of Value1":"","History of {{label}}":"","Imprecise date":"","Include":"","Invalid characters (alphanumeric, _ and - only)":"","Invalid characters (alphanumeric, _-°%°⁼⁺⁻⁰¹²³⁴⁵⁶⁷⁸⁹/µ allowed)":"","Invalid format":"","It is not permitted to delete a layout of descriptor that contains some panels":"","J (joule)":"","L value":"","Label":"","Label for current language":"","Label for the current language":"","Layout details":"","Layout editor":"","Layout name":"","Layout name already in usage":"","Lesser than":"","List of descriptor indexes":"","List of descriptors":"","List of layouts":"","List of values":"","Maximal range value":"","Media":"","Media collection":"","Meter":"","Minimal range value":"","Model of the entity":"","Modify":"","Move it to..":"","Name":"","Name already used":"","New panel":"","New value":"","No":"","None":"","Norm 1":"","Not belong to (intersection)":"","Not belong to (union)":"","Not contained by":"","Not include":"","Note":"","Numeric":"","Numeric range":"","Ordinal":"","Ordinal - Value0":"","Ordinal with text":"","Pair enumeration":"","Panel configuration":"","Panel name":"","Panels of descriptor":"","Plant and plot":"","Precision of the decimal":"","Quantity and volume":"","Regular expression":"","Remove":"","Remove condition":"","Rename":"","Rename the type of model of descriptors":"","Scale":"","Show history of the value":"","Single enumeration":"","Single value":"","Some values exists for this type of descriptor":"","Sort by field":"","Successfully added !":"","Successfully changed !":"","Successfully defined !":"","Successfully removed !":"","Successfully updated !":"","Successfully valued !":"","Surface":"","Target":"","Target entity":"","Text":"","Time":"","Time_concept":"","Translation":"","Type":"","Type of format":"","Unable to change the value !":"","Unable to create the comment !":"","Unable to create the layout of descriptor !":"","Unable to modify the comment !":"","Unable to reorder the panels of descriptor":"","Unable to reorder the types of model of descriptor":"","Unclassified":"","Undefined":"","Undefined label":"","Unit of the format":"","Update":"","Value":"","Value for any languages":"","Value0":"","Value0 - Value1":"","Value1":"","Values":"","Weight":"","Yes":"","a value":"","b value":"","belong to (intersection)":"","characters_max":"At most one character","characters_max_plural":"At most {{count}} characters","characters_min":"At least one character","characters_min_plural":"At least {{count}} characters","cm":"","cm²":"","day":"","delta 13C (carbon)":"","dm":"","g":"","g/100 grain":"","g/1000 grain":"","g/200 grain":"","g/kg":"","g/l":"","g/m²":"","g/m²/day":"","g/plant":"","g/plot":"","grain/m²":"","grain/spike":"","grain/spikelet":"","ha":"","hour":"","kg":"","kg/hl":"","kg/plot":"","kh/ha":"","km":"","km²":"","m":"","mg/kg":"","min":"","ml":"","ml/%":"","mm":"","mmol/m²/s":"","mm²":"","month":"","ms":"","m²":"","node":"","plant/ha":"","plant/m":"","plant/m²":"","plant/plot":"","ppm":"","s":"","spike/m²":"","spikelet":"","stoma/mm²":"","t/ha":"","tiller/m":"","tiller/m²":"","um":"","year":"","°C":""}

/***/ }),
/* 488 */
/***/ (function(module, exports) {

module.exports = {"% (percent)":"% (pourcentage)","%/day":"%/jour","%/hour":"%/heure","%/min":"%/min","Accept":"Accepter","Actions on descriptor":"Actions sur le descripteur","Actions on descriptor values":"","Actions on descriptors":"Actions sur les descripteurs","Actions on indexes":"","Add":"","Add a comment":"","Add descriptor":"","Add new panel":"","All":"Tous","Apply":"Appliquer","Autocomplete (big list)":"Autocomplétion (liste importante)","Autocomplete search field":"Autocomplétion avec recherche","Belong to (union)":"","Boolean":"Booléen","CCl (chlore)":"CCl (chlore)","Cancel":"Annuler","Category":"Catégorie","Change comment value":"","Change the comment value":"","Change the descriptor labels":"Changer les étiquettes pour le descripteur","Change the labels for the layout":"","Change the labels for the panel of descriptor":"Changer les étiquettes pour le panel de descripteur","Change the labels for the type of model of descriptor":"Changer les étiquettes pour le type de modèle de descripteur","Change the value of a field for a type of descriptor":"Changer la valeur d'un type pour le type de descripteur","Chroma":"Chroma","Code":"Code","Collapse/Expand":"Replier/déplier","Comments":"","Common":"Commun","Condition":"Condition","Configuration":"","Contained by":"","Contains":"","Continue":"","Controls how is displayed the field. Hierarchy mode is a special usage for pseudo hierarchy, for which values are roughly shifted to give an illusion of parent/children. The shift depend of the level declared in the value0 while value1 contains the label. The first value contains something like 1 or 2 or 1.1, 1.2, 1.1.1...":"Controls how is displayed the field. Hierarchy mode is a special usage for pseudo hierarchy, for which values are roughly shifted to give an illusion of parent/children. The shift depend of the level declared in the value0 while value1 contains the label. The first value contains something like 1 or 2 or 1.1, 1.2, 1.1.1...","Create":"","Create a descriptor":"","Create a layout of descriptors":"","Create a panel of descriptor":"Créer un panel de descripteur","Create an index for a descriptor":"","Create descriptor":"","Create index":"","Create value":"","Custom":"Customisé","Custom unit name":"Nom d'unité personnalisé","Date":"Date","Date Time":"Date Heure","Date+time":"Date+heure","Defined":"","Delete descriptor":"","Description":"Description","Descriptor":"Descripteur","Descriptor can not contain a list of values":"Le descripteur ne peut pas contenir une liste de valeurs","Descriptor condition":"Condition de descripteur","Descriptor has been successfully saved":"Descripteur enregistré avec succés","Descriptor type code":"Code de type de descripteur","Descriptor type name":"Nom de type de descripteur","Details for the descriptor":"","Details for the descriptor index":"","Different from":"","Display the list as":"Afficher la liste en","Displayed fields":"Champs affichés","Done":"Terminé","Dropdown (limit of 256 values)":"Liste déroulante (limite de 256 valeurs)","Edit value0":"Editer valeur0","Edit value1":"Editer valeur1","Enter a value.":"Entrez une valeur.","Entity":"Entité","Error":"Erreur","Exact":"","Field name (value0)":"Champ nom (valeur0)","Field name (value1)":"Champ nom (valeur1)","Grain":"Grain","Greater than":"","Group name":"Nom de groupe","Hierarchy of Value1":"Hiérarchie de Valeur1","History of {{label}}":"Historique de {{label}}","Imprecise date":"Date imprécise","Include":"Inclue","Invalid characters (alphanumeric, _ and - only)":"Caractères invalides (alphanumérique, _ et - seulement)","Invalid characters (alphanumeric, _-°%°⁼⁺⁻⁰¹²³⁴⁵⁶⁷⁸⁹/µ allowed)":"Caractères invalides (alphanumérique, _-°%°⁼⁺⁻⁰¹²³⁴⁵⁶⁷⁸⁹/µ permis)","Invalid format":"Format invalide","It is not permitted to delete a layout of descriptor that contains some panels":"","J (joule)":"J (joule)","L value":"L value","Label":"Etiquette","Label for current language":"Etiquette pour le language courant","Label for the current language":"Etiquett pour le language courant","Layout details":"Détails de la mise-en-page","Layout editor":"Editeur de mise-en-page","Layout name":"Nom de la mise-en-page","Layout name already in usage":"Nom de la mise-en-page existant","Lesser than":"Pluspetit que","List of descriptor indexes":"","List of descriptors":"","List of layouts":"","List of values":"Liste de valeurs","Maximal range value":"Valeur de plage maximale","Media":"Media","Media collection":"Collection de médias","Meter":"Mètre","Minimal range value":"Valeur de plage minimale","Model of the entity":"Modèle de l'entité","Modify":"Modifier","Move it to..":"","Name":"Nom","Name already used":"","New panel":"","New value":"","No":"Non","None":"Aucun","Norm 1":"Norme 1","Not belong to (intersection)":"","Not belong to (union)":"","Not contained by":"","Not include":"","Note":"Note","Numeric":"Numérique","Numeric range":"Plage numérique","Ordinal":"Ordinal","Ordinal - Value0":"Ordinal - Valeur0","Ordinal with text":"Ordinal avec texte","Pair enumeration":"Enumération de paires","Panel configuration":"","Panel name":"","Panels of descriptor":"Panels de descripteurs","Plant and plot":"Plant et parcelle","Precision of the decimal":"Précision de la décimal","Quantity and volume":"Quantité et volume","Regular expression":"Expression régulière","Remove":"","Remove condition":"Retirer la condition","Rename":"","Rename the type of model of descriptors":"Renommer le type de model de descriptors","Scale":"Echelle","Show history of the value":"","Single enumeration":"Simple énumération","Single value":"Valeur simple","Some values exists for this type of descriptor":"Des valeurs existent pour ce type de descripteur","Sort by field":"Trier par champs","Successfully added !":"","Successfully changed !":"Changement appliqué avec succès !","Successfully defined !":"Définie avec succé !","Successfully removed !":"Retiré avec succé !","Successfully updated !":"","Successfully valued !":"Valeur définie avec succé !","Surface":"Surface","Target":"Cible","Target entity":"Entité cible","Text":"Texte","Time":"Heure","Time_concept":"Temps","Translation":"Traduction","Type":"Type","Type of format":"Type de format","Unable to change the value !":"Impossible de changer la valeur","Unable to create the comment !":"","Unable to create the layout of descriptor !":"","Unable to modify the comment !":"","Unable to reorder the panels of descriptor":"Impossible de réordonner les panels de descripters","Unable to reorder the types of model of descriptor":"Impossible de réordonner les types de modèle de descripteur","Unclassified":"","Undefined":"Indéfini","Undefined label":"Etiquette indéfinie","Unit of the format":"Unité du format","Update":"Mettre à jour","Value":"Valeur","Value for any languages":"Valeur pour tous les languages","Value0":"Valeur0","Value0 - Value1":"Valeur0 - Valeur1","Value1":"Valeur1","Values":"Valeurs","Weight":"Poids","Yes":"Oui","a value":"a value","b value":"b value","belong to (intersection)":"","characters_max":"Au plus un caractère","characters_max_plural":"Au plus {{count}} caractères","characters_min":"Au moins un caractère","characters_min_plural":"Au moins {{count}} caractères","cm":"cm","cm²":"cm²","day":"jour","delta 13C (carbon)":"delta 13C (carbon)","dm":"dm","g":"g","g/100 grain":"g/100 grain","g/1000 grain":"g/1000 grain","g/200 grain":"g/200 grain","g/kg":"g/kg","g/l":"g/l","g/m²":"g/m²","g/m²/day":"g/m²/day","g/plant":"g/plant","g/plot":"g/parcelle","grain/m²":"grain/m²","grain/spike":"grain/épi","grain/spikelet":"grain/epillet","ha":"ha","hour":"heure","kg":"kg","kg/hl":"kg/hl","kg/plot":"kg/parcelle","kh/ha":"kh/ha","km":"km","km²":"km²","m":"m","mg/kg":"mg/kg","min":"min","ml":"ml","ml/%":"ml/%","mm":"mm","mmol/m²/s":"mmol/m²/s","mm²":"mm²","month":"mois","ms":"ms","m²":"m²","node":"noeud","plant/ha":"plant/ha","plant/m":"plant/m","plant/m²":"plant/m²","plant/plot":"plant/parcelle","ppm":"ppm","s":"s","spike/m²":"épi/m²","spikelet":"épillet","stoma/mm²":"stoma/mm²","t/ha":"t/ha","tiller/m":"pousse/m","tiller/m²":"pousse/m²","um":"um","year":"année","°C":"°C"}

/***/ }),
/* 489 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file describable.js
 * @brief Describable entities collection
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-11-17
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let DescribableModel = __webpack_require__(490);

let Collection = Backbone.Collection.extend({
    url: window.application.url(['descriptor', 'describable']),
    model: DescribableModel,

    parse: function (data) {
        return data;
    },

    default: [],

    findLabel: function (value) {
        let res = this.findWhere({value: value});
        return res ? res.get('label') : '';
    },
});

module.exports = Collection;



/***/ }),
/* 490 */
/***/ (function(module, exports) {

/**
 * @file describable.js
 * @brief Describable entity model
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-11-17
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

module.exports = Backbone.Model.extend({
    defaults: function() {
        return {
            id: '',
            value: '',
            label: ''
        }
    },
    url: window.application.url(['descriptor', 'describable' , ':id'])
});



/***/ }),
/* 491 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file condition.js
 * @brief Condition collection
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-11-22
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let ConditionModel = __webpack_require__(492);

let Collection = Backbone.Collection.extend({
    url: window.application.url(['descriptor', 'condition']),
    model: ConditionModel,

    parse: function(data) {
        return data;
    },

    default: [
    ],

    findLabel: function(value) {
        let res = this.findWhere({value: value});
        return res ? res.get('label') : '';
    },
});

module.exports = Collection;



/***/ }),
/* 492 */
/***/ (function(module, exports) {

/**
 * @file condition.js
 * @brief Condition entity model
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-11-22
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

module.exports = Backbone.Model.extend({
    defaults: function() {
        return {
            id: '',
            value: '',
            label: ''
        }
    },
    url: window.application.url(['descriptor', 'condition', ':id'])
});



/***/ }),
/* 493 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file formattype.js
 * @brief Descriptor type format type collection
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-01-05
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let FormatTypeModel = __webpack_require__(494);

let Collection = Backbone.Collection.extend({
    url: window.application.url(['descriptor', 'format', 'type']),
    model: FormatTypeModel,

    initialize: function(models, options) {
        Collection.__super__.initialize.apply(this);

        this.models = [];
        this.lookup = {};

        for (let i = 0; i < this.items.length; ++i) {
            let model = this.items[i];
            this.lookup[model.id] = model.label;
            this.models.push(new FormatTypeModel({
                id: model.id,
                value: model.id,
                group: model.group,
                label: model.label
            }));
        }
    },

    parse: function(data) {
        this.groups = data.groups;
        return data.items;
    },

    toJSON: function() {
        let results = [];
        let groups = {};

        // init groups
        for (let i = 0; i < this.groups.length; ++i) {
            let group = this.groups[i];
            groups[group.group] = {id: -1, value: "", label: group.label, options: []};
            results.push(groups[group.group]);
        }

        for (let i = 0; i < this.models.length; ++i) {
            let model = this.models[i];
            let group = groups[model.get('group')];

            if (model.id) {
                group.options.push({
                    id: model.get('id'),
                    value: model.get('value'),
                    label: model.get('label')
                });
            }
        }

        return results;
    },

    groups: [
        {group: 'single', label: _t('Single value')},
        {group: 'list', label: _t('List of values')}
    ],

    items: [
        {id: 'boolean', group: 'single', label: _t('Boolean')},
        {id: 'numeric', group: 'single', label: _t('Numeric')},
        {id: 'numeric_range', group: 'single', label: _t('Numeric range')},
        {id: 'ordinal', group: 'single', label: _t('Ordinal')},
        {id: 'string', group: 'single', label: _t('Text')},
        {id: 'date', group: 'single', label: _t('Date')},
        {id: 'imprecise_date', group: 'single', label: _t('Imprecise date')},
        {id: 'time', group: 'single', label: _t('Time')},
        {id: 'datetime', group: 'single', label: _t('Date+time')},
        {id: 'entity', group: 'single', label: _t('Entity')},
        {id: 'media', group: 'single', label: _t('Media')},
        {id: 'media_collection', group: 'single', label: _t('Media collection')},

        {id: 'enum_single', group: 'list', label: _t('Single enumeration')},
        {id: 'enum_pair', group: 'list', label: _t('Pair enumeration')},
        {id: 'enum_ordinal', group: 'list', label: _t('Ordinal with text')}
    ],

    findLabel: function(value) {
        return this.lookup[value];
    },
});

module.exports = Collection;



/***/ }),
/* 494 */
/***/ (function(module, exports) {

/**
 * @file formattype.js
 * @brief Descriptor type format type model
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-01-05
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

module.exports = Backbone.Model.extend({
    defaults: function() {
        return {
            id: 0,
            value: '',
            label: '',
            group: '',
            group_label: ''
        }
    },
    url: window.application.url(['descriptor', 'format', 'type', ':id'])
});


/***/ }),
/* 495 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file formatunit.js
 * @brief Descriptor type format unit collection
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-01-04
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let FormatUnitModel = __webpack_require__(496);

let Collection = Backbone.Collection.extend({
    url: window.application.url(['descriptor', 'format', 'unit']),
    model: FormatUnitModel,

    initialize: function(models, options) {
        Collection.__super__.initialize.apply(this, arguments);

        this.models = [];
        this.lookup = {};

        for (let i = 0; i < this.items.length; ++i) {
            let model = this.items[i];
            this.lookup[model.id] = model.label;
            this.models.push(new FormatUnitModel({
                id: model.id,
                value: model.id,
                group: model.group,
                label: model.label
            }));
        }
    },

    parse: function(data) {
        this.groups = data.groups;
        return data.items;
    },

    toJSON: function() {
        let results = [];
        let groups = {};

        // init groups
        for (let i = 0; i < this.groups.length; ++i) {
            let group = this.groups[i];
            groups[group.group] = {id: -1, value: "", label: group.label, options: []};
            results.push(groups[group.group]);
        }

        for (let i = 0; i < this.models.length; ++i) {
            let model = this.models[i];
            let group = groups[model.get('group')];

            if (model.id) {
                group.options.push({
                    id: model.get('id'),
                    value: model.get('value'),
                    label: model.get('label')
                });
            }
        }

        return results;
    },

    groups: [
        {group: 'chroma', label: _t('Chroma')},
        {group: 'common', label: _t('Common')},
        {group: 'grain', label: _t('Grain')},
        {group: 'meter', label: _t('Meter')},
        {group: 'weight', label: _t('Weight')},
        {group: 'plant_and_plot', label: _t('Plant and plot')},
        {group: 'quantity_and_volume', label: _t('Quantity and volume')},
        {group: 'surface', label: _t('Surface')},
        {group: 'time', label: _t('Time', {context: 'concept'})}
    ],

    items: [
        {id: 'chroma_L_value', group: 'chroma', label: _t("L value")},
        {id: 'chroma_a_value', group: 'chroma', label: _t("a value")},
        {id: 'chroma_b_value', group: 'chroma', label: _t("b value")},

        {id: 'degree_celsius',group: 'common', label: _t("°C")},
        {id: 'category', group: 'common', label: _t("Category")},
        {id: 'custom', group: 'common', label: _t("Custom")},
        {id: 'joule', group: 'common', label: _t("J (joule)")},
        {id: 'norm1', group: 'common', label: _t("Norm 1")},
        {id: 'note', group: 'common', label: _t("Note")},
        {id: 'percent', group: 'common', label: _t("% (percent)")},
        {id: 'scale', group: 'common', label: _t("Scale")},

        {id: 'gram_per_100_grain', group: 'grain', label: _t("g/100 grain")},
        {id: 'gram_per_200_grain', group: 'grain', label: _t("g/200 grain")},
        {id: 'gram_per_1000_grain', group: 'grain', label: _t("g/1000 grain")},
        {id: 'grain_per_meter2', group: 'grain', label: _t("grain/m²")},
        {id: 'grain_per_spike', group: 'grain', label: _t("grain/spike")},
        {id: 'grain_per_spikelet', group: 'grain', label: _t("grain/spikelet")},

        {id: 'micrometer', group: 'meter', label: _t("um")},
        {id: 'millimeter', group: 'meter', label: _t("mm")},
        {id: 'centimeter', group: 'meter', label: _t("cm")},
        {id: 'decimeter', group: 'meter', label: _t("dm")},
        {id: 'meter', group: 'meter', label: _t("m")},
        {id: 'kilometer', group: 'meter', label: _t("km")},

        {id: 'gram', group: 'weight', label: _t("g")},
        {id: 'kilogram', group: 'weight', label: _t("kg")},

        {id: 'plant_per_meter', group: 'plant_and_plot', label: _t("plant/m")},
        {id: 'plant_per_meter2', group: 'plant_and_plot', label: _t("plant/m²")},
        {id: 'plant_per_hectare', group: 'plant_and_plot', label: _t("plant/ha")},
        {id: 'plant_per_plot', group: 'plant_and_plot', label: _t("plant/plot")},
        {id: 'gram_per_plant', group: 'plant_and_plot', label: _t("g/plant")},
        {id: 'gram_per_plot', group: 'plant_and_plot', label: _t("g/plot")},
        {id: 'kilogram_per_plot', group: 'plant_and_plot', label: _t("kg/plot")},
        {id: 'stoma_per_millimeter2', group: 'plant_and_plot', label: _t("stoma/mm²")},
        {id: 'node', group: 'plant_and_plot', label: _t("node")},
        {id: 'spikelet', group: 'plant_and_plot', label: _t("spikelet")},
        {id: 'spike_per_meter2', group: 'plant_and_plot', label: _t("spike/m²")},
        {id: 'tiller_per_meter', group: 'plant_and_plot', label: _t("tiller/m")},
        {id: 'tiller_per_meter2', group: 'plant_and_plot', label: _t("tiller/m²")},

        {id: 'milliliter', group: 'quantity_and_volume', label: _t("ml")},
        {id: 'milliliter_per_percent', group: 'quantity_and_volume', label: _t("ml/%")},
        {id: 'ppm', group: 'quantity_and_volume', label: _t("ppm")},
        {id: 'milligram_per_kilogram', group: 'quantity_and_volume', label: _t("mg/kg")},
        {id: 'gram_per_kilogram', group: 'quantity_and_volume', label: _t("g/kg")},
        {id: 'gram_per_meter2', group: 'quantity_and_volume', label: _t("g/m²")},
        {id: 'kilogram_per_hectare', group: 'quantity_and_volume', label: _t("kh/ha")},
        {id: 'ton_per_hectare', group: 'quantity_and_volume', label: _t("t/ha")},
        {id: 'gram_per_liter', group: 'quantity_and_volume', label: _t("g/l")},
        {id: 'kilogram_per_hectolitre', group: 'quantity_and_volume', label: _t("kg/hl")},
        {id: 'millimol_per_meter2_per_second', group: 'quantity_and_volume', label: _t("mmol/m²/s")},
        {id: 'gram_per_meter2_per_day', group: 'quantity_and_volume', label: _t("g/m²/day")},
        {id: 'ccl', group: 'quantity_and_volume', label: _t("CCl (chlore)")},
        {id: 'delta_13c', group: 'quantity_and_volume', label: _t("delta 13C (carbon)")},

        {id: 'millimeter2', group: 'surface', label: _t("mm²")},
        {id: 'centimeter2', group: 'surface', label: _t("cm²")},
        {id: 'meter2', group: 'surface', label: _t("m²")},
        {id: 'hectare', group: 'surface', label: _t("ha")},
        {id: 'kilometer2', group: 'surface', label: _t("km²")},

        {id: 'millisecond', group: 'time', label: _t("ms")},
        {id: 'second', group: 'time', label: _t("s")},
        {id: 'minute', group: 'time', label: _t("min")},
        {id: 'hour', group: 'time', label: _t("hour")},
        {id: 'day', group: 'time', label: _t("day")},
        {id: 'month', group: 'time', label: _t("month")},
        {id: 'year', group: 'time', label: _t("year")},
        {id: 'date', group: 'time', label: _t("Date")},
        {id: 'time', group: 'time', label: _t("Time")},
        {id: 'datetime', group: 'time', label: _t("Date Time")},
        {id: 'percent_per_minute', group: 'time', label: _t("%/min")},
        {id: 'percent_per_hour', group: 'time', label: _t("%/hour")},
        {id: 'percent_per_day', group: 'time', label: _t("%/day")}
    ],

    findLabel: function(value) {
        return this.lookup[value];
        //let res = this.findWhere({value: value});
        //return res ? res.get('label') : '';
    },
});

module.exports = Collection;


/***/ }),
/* 496 */
/***/ (function(module, exports) {

/**
 * @file formatunit.js
 * @brief Descriptor type format unit model
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-01-04
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

module.exports = Backbone.Model.extend({
    defaults: function() {
        return {
            id: 0,
            value: '',
            label: '',
            group: '',
            group_label: ''
        }
    },
    url: window.application.url(['descriptor', 'format', 'unit', ':id'])
});



/***/ }),
/* 497 */
/***/ (function(module, exports, __webpack_require__) {

var map = {
	"./boolean": 254,
	"./boolean.js": 254,
	"./date": 256,
	"./date.js": 256,
	"./datetime": 257,
	"./datetime.js": 257,
	"./descriptorformattype": 13,
	"./descriptorformattype.js": 13,
	"./descriptorformattypemanager": 83,
	"./descriptorformattypemanager.js": 83,
	"./entity": 258,
	"./entity.js": 258,
	"./enumordinal": 259,
	"./enumordinal.js": 259,
	"./enumpair": 260,
	"./enumpair.js": 260,
	"./enumsingle": 51,
	"./enumsingle.js": 51,
	"./imprecisedate": 261,
	"./imprecisedate.js": 261,
	"./layout": 262,
	"./layout.js": 262,
	"./numeric": 52,
	"./numeric.js": 52,
	"./numericrange": 263,
	"./numericrange.js": 263,
	"./ordinal": 264,
	"./ordinal.js": 264,
	"./string": 265,
	"./string.js": 265,
	"./time": 266,
	"./time.js": 266,
	"./user": 267,
	"./user.js": 267
};
function webpackContext(req) {
	return __webpack_require__(webpackContextResolve(req));
};
function webpackContextResolve(req) {
	var id = map[req];
	if(!(id + 1)) // check for number or string
		throw new Error("Cannot find module '" + req + "'.");
	return id;
};
webpackContext.keys = function webpackContextKeys() {
	return Object.keys(map);
};
webpackContext.resolve = webpackContextResolve;
module.exports = webpackContext;
webpackContext.id = 497;

/***/ }),
/* 498 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
with (obj) {
__p += '<div class="modal-dialog modal-lg"> ';
 var format = descriptor.get('format'); ;
__p += ' <div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title">' +
__e( _t("History of {{label}}", {label: descriptor.get('label')}) ) +
'</h4></div><div class="modal-body"><div style="overflow-y: auto"><ul class="descriptor-value-history"> ';
 _.each(values, function(value) { ;
__p += ' ';
 let date = moment(value.timestamp); ;
__p += ' ';
 let ldate = date.format($.datepicker._defaults.dateFormat.toUpperCase() + ' HH:mm:ss'); ;
__p += ' <li class="descriptor-value" value-history="" format-type="' +
__e( format.type ) +
'"><span class="history-details"><h4><span class="label label-info label-large history-date text-selection-all">' +
__e( ldate ) +
'</span><span class="label label-success label-large history-username text-selection-all">' +
__e( value.username ) +
'</span></h4></span><span class="history-value"></span></li> ';
 }); ;
__p += ' </ul></div></div></div></div>';

}
return __p
};

/*
original source:

<div class="modal-dialog modal-lg"> <% var format = descriptor.get('format'); %> <div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title"><%- _t("History of {{label}}", {label: descriptor.get('label')}) %></h4></div><div class="modal-body"><div style="overflow-y: auto"><ul class="descriptor-value-history"> <% _.each(values, function(value) { %> <% let date = moment(value.timestamp); %> <% let ldate = date.format($.datepicker._defaults.dateFormat.toUpperCase() + ' HH:mm:ss'); %> <li class="descriptor-value" value-history="" format-type="<%- format.type %>"><span class="history-details"><h4><span class="label label-info label-large history-date text-selection-all"><%- ldate %></span><span class="label label-success label-large history-username text-selection-all"><%- value.username %></span></h4></span><span class="history-value"></span></li> <% }); %> </ul></div></div></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 499 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div class="row"><div class="col-md-6"><div class="form-group"><label for="format_model">' +
__e( _t('Model of the entity') ) +
'</label><select id="format_model" class="form-control"></select></div></div></div>';

}
return __p
};

/*
original source:

<div class="row"><div class="col-md-6"><div class="form-group"><label for="format_model"><%- _t('Model of the entity') %></label><select id="format_model" class="form-control"></select></div></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 500 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div class="row"><div class="col-xs-6"><div class="form-group"><label for="format_trans">' +
__e( _t('Translation') ) +
'</label><select id="format_trans" class="form-control"><option value="true">' +
__e( _t('Yes') ) +
'</option><option value="false">' +
__e( _t('No') ) +
'</option></select></div></div><div class="col-xs-6"><div class="form-group"><label for="type_field0">' +
__e( _t('Field name (value0)') ) +
'</label><input id="type_field0" class="form-control" type="text" maxlength="32" value=""></div></div><div class="col-xs-6"><div class="form-group"><label for="sort_by_field">' +
__e( _t('Sort by field') ) +
'</label><select id="sort_by_field" class="form-control"><option value="code">' +
__e( _t('Code') ) +
'</option><option value="value0">' +
__e( _t('Value0') ) +
'</option></select></div></div><div class="col-xs-6"><div class="form-group"><label for="list_type">' +
__e( _t('Display the list as') ) +
'</label><select id="list_type" class="form-control"><option value="dropdown">' +
__e( _t('Dropdown (limit of 256 values)') ) +
'</option><option value="autocomplete">' +
__e( _t('Autocomplete (big list)') ) +
'</option></select></div></div></div>';

}
return __p
};

/*
original source:

<div class="row"><div class="col-xs-6"><div class="form-group"><label for="format_trans"><%- _t('Translation') %></label><select id="format_trans" class="form-control"><option value="true"><%- _t('Yes') %></option><option value="false"><%- _t('No') %></option></select></div></div><div class="col-xs-6"><div class="form-group"><label for="type_field0"><%- _t('Field name (value0)') %></label><input id="type_field0" class="form-control" type="text" maxlength="32" value=""></div></div><div class="col-xs-6"><div class="form-group"><label for="sort_by_field"><%- _t('Sort by field') %></label><select id="sort_by_field" class="form-control"><option value="code"><%- _t('Code') %></option><option value="value0"><%- _t('Value0') %></option></select></div></div><div class="col-xs-6"><div class="form-group"><label for="list_type"><%- _t('Display the list as') %></label><select id="list_type" class="form-control"><option value="dropdown"><%- _t('Dropdown (limit of 256 values)') %></option><option value="autocomplete"><%- _t('Autocomplete (big list)') %></option></select></div></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 501 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div class="row"><div class="col-xs-6"><div class="form-group"><label for="format_trans">' +
__e( _t('Translation') ) +
'</label><select id="format_trans" class="form-control"><option value="true">' +
__e( _t('Yes') ) +
'</option><option value="false">' +
__e( _t('No') ) +
'</option></select></div></div><div class="col-xs-6"><div class="form-group"><label for="type_field0">' +
__e( _t('Field name (value0)') ) +
'</label><input id="type_field0" class="form-control" type="text" maxlength="32" value=""></div></div></div><div class="descriptor-type-range form-group row"><div class="col-xs-6"><label for="format_range_min">' +
__e( _t('Minimal range value') ) +
'</label><input id="format_range_min" class="form-control" type="text" maxlength="32" value="0"></div><div class="col-xs-6"><label for="format_range_max">' +
__e( _t('Maximal range value') ) +
'</label><input id="format_range_max" class="form-control" type="text" maxlength="32" value="1"></div></div><div class="row"><div class="col-xs-6"><div class="form-group"><label for="sort_by_field">' +
__e( _t('Sort by field') ) +
'</label><select id="sort_by_field" class="form-control"><option value="code">' +
__e( _t('Code') ) +
'</option><option value="ordinal">' +
__e( _t('Ordinal') ) +
'</option><option value="value0">' +
__e( _t('Value0') ) +
'</option></select></div></div><div class="col-xs-6"><div class="form-group"><label for="display_fields">' +
__e( _t('Displayed fields') ) +
'</label><select id="display_fields" class="form-control"><option value="value0">' +
__e( _t('Value0') ) +
'</option><option value="ordinal-value0">' +
__e( _t('Ordinal - Value0') ) +
'</option></select></div></div><div class="col-xs-6"><div class="form-group"><label for="list_type">' +
__e( _t('Display the list as') ) +
'</label><select id="list_type" class="form-control"><option value="dropdown">' +
__e( _t('Dropdown (limit of 256 values)') ) +
'</option><option value="autocomplete">' +
__e( _t('Autocomplete (big list)') ) +
'</option></select></div></div><div class="col-xs-6"><div class="form-group"><label for="search_field">' +
__e( _t('Autocomplete search field') ) +
'</label><select id="search_field" class="form-control"><option value="value0">' +
__e( _t('Value0') ) +
'</option><option value="ordinal">' +
__e( _t('Ordinal') ) +
'</option></select></div></div></div>';

}
return __p
};

/*
original source:

<div class="row"><div class="col-xs-6"><div class="form-group"><label for="format_trans"><%- _t('Translation') %></label><select id="format_trans" class="form-control"><option value="true"><%- _t('Yes') %></option><option value="false"><%- _t('No') %></option></select></div></div><div class="col-xs-6"><div class="form-group"><label for="type_field0"><%- _t('Field name (value0)') %></label><input id="type_field0" class="form-control" type="text" maxlength="32" value=""></div></div></div><div class="descriptor-type-range form-group row"><div class="col-xs-6"><label for="format_range_min"><%- _t('Minimal range value') %></label><input id="format_range_min" class="form-control" type="text" maxlength="32" value="0"></div><div class="col-xs-6"><label for="format_range_max"><%- _t('Maximal range value') %></label><input id="format_range_max" class="form-control" type="text" maxlength="32" value="1"></div></div><div class="row"><div class="col-xs-6"><div class="form-group"><label for="sort_by_field"><%- _t('Sort by field') %></label><select id="sort_by_field" class="form-control"><option value="code"><%- _t('Code') %></option><option value="ordinal"><%- _t('Ordinal') %></option><option value="value0"><%- _t('Value0') %></option></select></div></div><div class="col-xs-6"><div class="form-group"><label for="display_fields"><%- _t('Displayed fields') %></label><select id="display_fields" class="form-control"><option value="value0"><%- _t('Value0') %></option><option value="ordinal-value0"><%- _t('Ordinal - Value0') %></option></select></div></div><div class="col-xs-6"><div class="form-group"><label for="list_type"><%- _t('Display the list as') %></label><select id="list_type" class="form-control"><option value="dropdown"><%- _t('Dropdown (limit of 256 values)') %></option><option value="autocomplete"><%- _t('Autocomplete (big list)') %></option></select></div></div><div class="col-xs-6"><div class="form-group"><label for="search_field"><%- _t('Autocomplete search field') %></label><select id="search_field" class="form-control"><option value="value0"><%- _t('Value0') %></option><option value="ordinal"><%- _t('Ordinal') %></option></select></div></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 502 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file popover.js
 * @brief Initiate a bootstrap popover for Marionette views.
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-01-30
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Marionette = __webpack_require__(1);

let Popover = Marionette.Behavior.extend({
    defaults: {
        content: ''
    },
    ui: {
        popover: '.helper',
        content: '.helper > .helper-content'
    },

    onRender: function() {
        let content = this.ui.content.html();
        let text = this.ui.popover.attr("helper-text");
        let title = this.ui.popover.attr("helper-title");
        let trigger = this.ui.popover.attr("helper-trigger");
        let template = undefined;

        if (text || content) {
            this.ui.popover.addClass('btn');
            this.ui.popover.addClass('popover-dismiss');
            this.ui.popover.attr('data-toggle', 'popover');

            if ($.fn.popover.glyphicon) {
                this.ui.popover.addClass($.fn.popover.glyphicon);
            } else {
                this.ui.popover.text('?');
            }

            // not a css because element attribute (over btn style)
            this.ui.popover.css({
                'top': '-8px',
                'left': '2px',
                'height': '16px',
                'padding': '0px',
                'padding-left': '1px',
                'padding-right': '1px',
                'border': '0px'
            });
        } else if (trigger) {
            this.ui.popover.addClass('popover-dismiss');
            this.ui.popover.attr('data-toggle', 'popover');
        }

        if (this.ui.popover.hasClass("popover-lg"))
            template = '<div class="popover popover-large"><div class="arrow"></div><div class="popover-inner"><h3 class="popover-title"></h3><div class="popover-content"><p></p></div></div></div>';

        if (content) {
            this.ui.popover.popover({
                html: true,
                placement: 'bottom',
                container: false,
                title: title,
                content: content,
                template: template,
                trigger: 'manual'
            });
        } else if (text) {
            this.ui.popover.popover({
                html: false,
                placement: 'bottom',
                container: false,
                title: title,
                content: text,
                template: template,
                trigger: 'manual'
            });
        }

        // because popover button are manually triggered we have to manage it
        if (!trigger) {
            this.ui.popover.click(function(e) {
                // close any other popovers
                $(".popover-dismiss").each(function(i) {
                    if (this !== e.target) {
                        $(this).popover('hide');
                    }
                });

                $(this).popover('toggle');
                return false;
            });
        }
    }
});

module.exports = Popover;


/***/ }),
/* 503 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div class="row"><div class="col-xs-6"><div class="form-group"><label for="format_trans">' +
__e( _t('Translation') ) +
'</label><select id="format_trans" class="form-control"><option value="true">' +
__e( _t('Yes') ) +
'</option><option value="false">' +
__e( _t('No') ) +
'</option></select></div></div><div class="col-xs-6"><div class="form-group"><label for="type_field0">' +
__e( _t('Field name (value0)') ) +
'</label><input id="type_field0" class="form-control" type="text" maxlength="32" value=""></div></div><div class="col-xs-6"><div class="form-group"><label for="type_field1">' +
__e( _t('Field name (value1)') ) +
'</label><input id="type_field1" class="form-control" type="text" maxlength="32" value=""></div></div><div class="col-xs-6"><div class="form-group"><label for="sort_by_field">' +
__e( _t('Sort by field') ) +
'</label><select id="sort_by_field" class="form-control"><option value="code">' +
__e( _t('Code') ) +
'</option><option value="value0">' +
__e( _t('Value0') ) +
'</option><option value="value1">' +
__e( _t('Value1') ) +
'</option></select></div></div><div class="col-xs-6"><div class="form-group"><label for="display_fields"> ' +
__e( _t('Displayed fields') ) +
' <span class="helper"><div class="helper-content"><p>' +
__e( _t("Controls how is displayed the field. Hierarchy mode is a special usage for pseudo hierarchy, for which values are roughly shifted to give an illusion of parent/children. The shift depend of the level declared in the value0 while value1 contains the label. The first value contains something like 1 or 2 or 1.1, 1.2, 1.1.1...") ) +
'</p></div></span></label><select id="display_fields" class="form-control"><option value="value0">' +
__e( _t('Value0') ) +
'</option><option value="value1">' +
__e( _t('Value1') ) +
'</option><option value="value0-value1">' +
__e( _t('Value0 - Value1') ) +
'</option><option value="hier0-value1">' +
__e( _t('Hierarchy of Value1') ) +
'</option></select></div></div><div class="col-xs-6"><div class="form-group"><label for="list_type">' +
__e( _t('Display the list as') ) +
'</label><select id="list_type" class="form-control"><option value="dropdown">' +
__e( _t('Dropdown (limit of 256 values)') ) +
'</option><option value="autocomplete">' +
__e( _t('Autocomplete (big list)') ) +
'</option></select></div></div><div class="col-xs-6"><div class="form-group"><label for="search_field">' +
__e( _t('Autocomplete search field') ) +
'</label><select id="search_field" class="form-control"><option value="value0">' +
__e( _t('Value0') ) +
'</option><option value="value1">' +
__e( _t('Value1') ) +
'</option></select></div></div></div>';

}
return __p
};

/*
original source:

<div class="row"><div class="col-xs-6"><div class="form-group"><label for="format_trans"><%- _t('Translation') %></label><select id="format_trans" class="form-control"><option value="true"><%- _t('Yes') %></option><option value="false"><%- _t('No') %></option></select></div></div><div class="col-xs-6"><div class="form-group"><label for="type_field0"><%- _t('Field name (value0)') %></label><input id="type_field0" class="form-control" type="text" maxlength="32" value=""></div></div><div class="col-xs-6"><div class="form-group"><label for="type_field1"><%- _t('Field name (value1)') %></label><input id="type_field1" class="form-control" type="text" maxlength="32" value=""></div></div><div class="col-xs-6"><div class="form-group"><label for="sort_by_field"><%- _t('Sort by field') %></label><select id="sort_by_field" class="form-control"><option value="code"><%- _t('Code') %></option><option value="value0"><%- _t('Value0') %></option><option value="value1"><%- _t('Value1') %></option></select></div></div><div class="col-xs-6"><div class="form-group"><label for="display_fields"> <%- _t('Displayed fields') %> <span class="helper"><div class="helper-content"><p><%- _t("Controls how is displayed the field. Hierarchy mode is a special usage for pseudo hierarchy, for which values are roughly shifted to give an illusion of parent/children. The shift depend of the level declared in the value0 while value1 contains the label. The first value contains something like 1 or 2 or 1.1, 1.2, 1.1.1...") %></p></div></span></label><select id="display_fields" class="form-control"><option value="value0"><%- _t('Value0') %></option><option value="value1"><%- _t('Value1') %></option><option value="value0-value1"><%- _t('Value0 - Value1') %></option><option value="hier0-value1"><%- _t('Hierarchy of Value1') %></option></select></div></div><div class="col-xs-6"><div class="form-group"><label for="list_type"><%- _t('Display the list as') %></label><select id="list_type" class="form-control"><option value="dropdown"><%- _t('Dropdown (limit of 256 values)') %></option><option value="autocomplete"><%- _t('Autocomplete (big list)') %></option></select></div></div><div class="col-xs-6"><div class="form-group"><label for="search_field"><%- _t('Autocomplete search field') %></label><select id="search_field" class="form-control"><option value="value0"><%- _t('Value0') %></option><option value="value1"><%- _t('Value1') %></option></select></div></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 504 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div class="row"><div class="descriptor-type-unit"><div class="col-sm-6"><div class="form-group"><label for="format_unit">' +
__e( _t('Unit of the format') ) +
'</label><select id="format_unit" class="form-control"></select></div></div><div class="col-sm-6"><div class="form-group"><label for="format_unit_custom">' +
__e( _t('Custom unit name') ) +
'</label><input id="format_unit_custom" class="form-control" type="text" disabled="disabled" maxlength="32" value=""></div></div></div></div><div class="row"><div class="descriptor-type-precision form-group col-xs-6"><label for="format_precision">' +
__e( _t('Precision of the decimal') ) +
'</label><select id="format_precision" class="form-control"><option value="0.0">0.0</option><option value="1.0">1.0</option><option value="2.0">2.0</option><option value="3.0">3.0</option><option value="4.0">4.0</option><option value="5.0">5.0</option><option value="6.0">6.0</option><option value="7.0">7.0</option><option value="8.0">8.0</option><option value="9.0">9.0</option></select></div></div>';

}
return __p
};

/*
original source:

<div class="row"><div class="descriptor-type-unit"><div class="col-sm-6"><div class="form-group"><label for="format_unit"><%- _t('Unit of the format') %></label><select id="format_unit" class="form-control"></select></div></div><div class="col-sm-6"><div class="form-group"><label for="format_unit_custom"><%- _t('Custom unit name') %></label><input id="format_unit_custom" class="form-control" type="text" disabled="disabled" maxlength="32" value=""></div></div></div></div><div class="row"><div class="descriptor-type-precision form-group col-xs-6"><label for="format_precision"><%- _t('Precision of the decimal') %></label><select id="format_precision" class="form-control"><option value="0.0">0.0</option><option value="1.0">1.0</option><option value="2.0">2.0</option><option value="3.0">3.0</option><option value="4.0">4.0</option><option value="5.0">5.0</option><option value="6.0">6.0</option><option value="7.0">7.0</option><option value="8.0">8.0</option><option value="9.0">9.0</option></select></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 505 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div class="row"><div class="descriptor-type-unit"><div class="col-xs-6"><div class="form-group"><label for="format_unit">' +
__e( _t('Unit of the format') ) +
'</label><select id="format_unit" class="form-control"></select></div></div><div class="col-xs-6"><div class="form-group"><label for="format_unit_custom">' +
__e( _t('Custom unit name') ) +
'</label><input id="format_unit_custom" class="form-control" type="text" disabled="disabled" maxlength="32" value=""></div></div></div></div><div class="row"><div class="descriptor-type-precision form-group col-xs-6"><label for="format_precision">' +
__e( _t('Precision of the decimal') ) +
'</label><select id="format_precision" class="form-control"><option value="0.0">0.0</option><option value="1.0">1.0</option><option value="2.0">2.0</option><option value="3.0">3.0</option><option value="4.0">4.0</option><option value="5.0">5.0</option><option value="6.0">6.0</option><option value="7.0">7.0</option><option value="8.0">8.0</option><option value="9.0">9.0</option></select></div></div><div class="row"><div class="descriptor-type-range form-group"><div class="col-xs-6"><label for="format_range_min">' +
__e( _t('Minimal range value') ) +
'</label><input id="format_range_min" class="form-control" type="text" maxlength="32" value="0"></div><div class="col-xs-6"><label for="format_range_max">' +
__e( _t('Maximal range value') ) +
'</label><input id="format_range_max" class="form-control" type="text" maxlength="32" value="1"></div></div></div>';

}
return __p
};

/*
original source:

<div class="row"><div class="descriptor-type-unit"><div class="col-xs-6"><div class="form-group"><label for="format_unit"><%- _t('Unit of the format') %></label><select id="format_unit" class="form-control"></select></div></div><div class="col-xs-6"><div class="form-group"><label for="format_unit_custom"><%- _t('Custom unit name') %></label><input id="format_unit_custom" class="form-control" type="text" disabled="disabled" maxlength="32" value=""></div></div></div></div><div class="row"><div class="descriptor-type-precision form-group col-xs-6"><label for="format_precision"><%- _t('Precision of the decimal') %></label><select id="format_precision" class="form-control"><option value="0.0">0.0</option><option value="1.0">1.0</option><option value="2.0">2.0</option><option value="3.0">3.0</option><option value="4.0">4.0</option><option value="5.0">5.0</option><option value="6.0">6.0</option><option value="7.0">7.0</option><option value="8.0">8.0</option><option value="9.0">9.0</option></select></div></div><div class="row"><div class="descriptor-type-range form-group"><div class="col-xs-6"><label for="format_range_min"><%- _t('Minimal range value') %></label><input id="format_range_min" class="form-control" type="text" maxlength="32" value="0"></div><div class="col-xs-6"><label for="format_range_max"><%- _t('Maximal range value') %></label><input id="format_range_max" class="form-control" type="text" maxlength="32" value="1"></div></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 506 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div class="descriptor-type-unit row"><div class="col-sm-6"><div class="form-group"><label for="format_unit">' +
__e( _t('Unit of the format') ) +
'</label><select id="format_unit" class="form-control"></select></div></div><div class="col-sm-6"><div class="form-group"><label for="format_unit_custom">' +
__e( _t('Custom unit name') ) +
'</label><input id="format_unit_custom" class="form-control" type="text" disabled="disabled" maxlength="32" value=""></div></div></div><div class="descriptor-type-range form-group row"><div class="col-xs-6"><label for="format_range_min">' +
__e( _t('Minimal range value') ) +
'</label><input id="format_range_min" class="form-control" type="text" maxlength="32" value="0"></div><div class="col-xs-6"><label for="format_range_max">' +
__e( _t('Maximal range value') ) +
'</label><input id="format_range_max" class="form-control" type="text" maxlength="32" value="1"></div></div>';

}
return __p
};

/*
original source:

<div class="descriptor-type-unit row"><div class="col-sm-6"><div class="form-group"><label for="format_unit"><%- _t('Unit of the format') %></label><select id="format_unit" class="form-control"></select></div></div><div class="col-sm-6"><div class="form-group"><label for="format_unit_custom"><%- _t('Custom unit name') %></label><input id="format_unit_custom" class="form-control" type="text" disabled="disabled" maxlength="32" value=""></div></div></div><div class="descriptor-type-range form-group row"><div class="col-xs-6"><label for="format_range_min"><%- _t('Minimal range value') %></label><input id="format_range_min" class="form-control" type="text" maxlength="32" value="0"></div><div class="col-xs-6"><label for="format_range_max"><%- _t('Maximal range value') %></label><input id="format_range_max" class="form-control" type="text" maxlength="32" value="1"></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 507 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div class="row"><div class="col-md-6"><div class="descriptor-type-regexp form-group"><label for="format_regexp">' +
__e( _t('Regular expression') ) +
'</label><input id="format_regexp" class="form-control" type="text" maxlength="255"></div></div></div>';

}
return __p
};

/*
original source:

<div class="row"><div class="col-md-6"><div class="descriptor-type-regexp form-group"><label for="format_regexp"><%- _t('Regular expression') %></label><input id="format_regexp" class="form-control" type="text" maxlength="255"></div></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 508 */
/***/ (function(module, exports) {

/**
 * @file layouttypemanager.js
 * @brief Base class for any descriptor layout type views.
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-09-13
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let LayoutTypeManager = function() {
    this.layoutTypes = {};
};

LayoutTypeManager.prototype = {
    registerElement: function (modelName, viewClass) {
        this.layoutTypes[viewClass.layoutTarget] = viewClass;
    },

    getElement: function(modelName) {
        let element = this.layoutTypes[modelName];
        return element;
    },

    makeView: function(modelName, model) {
        let Element = this.layoutTypes[modelName];
        if (Element) {
            return new Element({mode: model});
        }
        return null;
    }
};

module.exports = LayoutTypeManager;


/***/ }),
/* 509 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file layoutcachefetcher.js
 * @brief Cache fetcher specialized for layout description.
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-09-05
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let CacheFetcher = __webpack_require__(41);

let LayoutCacheFetcher = function() {
    CacheFetcher.call(this);

    this.type = "layout";
};

LayoutCacheFetcher.prototype = Object.create(CacheFetcher.prototype);
LayoutCacheFetcher.prototype.constructor = LayoutCacheFetcher;

/**
 * Fetch values.
 * @param keys Keys list.
 */
LayoutCacheFetcher.prototype.fetch = function(cacheManager, options, keys) {
    // make the list of values
    let keysToFetch = new Set();

    let cache = cacheManager.get('layout', options.format.model);
    let toFetch = false;
    let now = Date.now();

    if (cacheManager.enabled) {
        // lookup into the global cache
        for (let i = 0; i < keys.length; ++i) {
            let key = keys[i];
            let entry = undefined;

            toFetch = false;

            if (key !== null && key !== undefined && key !== "") {
                entry = cache[key];
            }

            if (entry !== undefined) {
                // found. look for validity
                if (entry.expire !== null && entry.expire <= now) {
                    toFetch = true;
                }
            } else if (key !== null && key !== undefined && key !== "") {
                toFetch = true;
            }

            if (toFetch) {
                keysToFetch.add(key);
            }
        }
    } else {
        // all when cache disabled
        keysToFetch = new Set(keys);
    }

    let url = window.application.url(['descriptor', 'layout', 'values']);
    let queryData = {
        values: JSON.stringify(Array.from(keysToFetch))
    };

    if (keysToFetch.size) {
        let promise = $.ajax({
            type: "GET",
            url: url,
            contentType: 'application/json; charset=utf8',
            data: queryData
        });

        promise.done(function (data) {
            // feed the cache and compute expire timestamp. validity of null means it never expires.
            let now = Date.now();
            let expire = data.validity !== null ? data.validity * 1000 + now : null;
            if (!data.cacheable) {
                expire = now;
            }

            // items is a dict
            for (let key in data.items) {
                cache[key] = {
                    expire: expire,
                    value: data.items[key]
                };
            }

            window.session.logger.debug("Cache miss for layout " + options.format.model + ".");
        }).fail(function () {
           window.session.logger.debug("Cache failure for layout " + options.format.model + ".");
        });

        return promise;
    } else {
        return null;
    }
};

LayoutCacheFetcher.prototype.get = function(cacheManager, options) {
    return cacheManager.get('layout', options.format.model);
};

module.exports = LayoutCacheFetcher;


/***/ }),
/* 510 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file descriptorcachefetcher.js
 * @brief Cache fetcher specialized for descriptors values.
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-09-05
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let CacheFetcher = __webpack_require__(41);

let DescriptorCacheFetcher = function() {
    CacheFetcher.call(this);

    this.type = "descriptors";
};

DescriptorCacheFetcher.prototype = Object.create(CacheFetcher.prototype);
DescriptorCacheFetcher.prototype.constructor = DescriptorCacheFetcher;

/**
 * Fetch values.
 * @param keys Keys list.
 */
DescriptorCacheFetcher.prototype.fetch = function(cacheManager, options, keys) {
    let cache = cacheManager.get('descriptors', options.format.name);

    let queryData = {};
    let doFetch = false;

    if (cacheManager.enabled) {
        // make the list of values
        let keysToFetch = new Set();

        let toFetch = false;
        let now = Date.now();

        // lookup into the global cache
        for (let i = 0; i < keys.length; ++i) {
            let key = keys[i];
            let entry = undefined;

            toFetch = false;

            if (key !== null && key !== undefined && key !== "") {
                entry = cache[key];
            }

            if (entry !== undefined) {
                // found. look for validity
                if (entry.expire !== null && entry.expire <= now) {
                    toFetch = true;
                }
            } else if (key !== null && key !== undefined && key !== "") {
                toFetch = true;
            }

            if (toFetch) {
                keysToFetch.add(key);
            }
        }

        doFetch = keysToFetch.size > 0;
        queryData = {values: JSON.stringify(Array.from(keys))};
    } else {
        doFetch = keys.length > 0;
        queryData = {values: JSON.stringify(keys)};
    }

    let url = window.application.url(['descriptor', 'descriptor-values-list', options.format.name]);

    if (doFetch) {
        let promise = $.ajax({
            type: "GET",
            url: url,
            contentType: 'application/json; charset=utf8',
            data: queryData
        });

        promise.done(function (data) {
            // feed the cache and compute expire timestamp. validity of null means it never expires.
            let now = Date.now();
            let expire = data.validity !== null ? data.validity * 1000 + now : null;
            if (!data.cacheable) {
                expire = now;
            }

            // items is a dict
            for (let key in data.items) {
                cache[key] = {
                    expire: expire,
                    value: data.items[key]
                };
            }

            session.logger.debug("Cache miss for descriptor " + options.format.name + ".");
        }).fail(function () {
            session.logger.debug("Cache failure for descriptor " + options.format.name + ".");
        });

        return promise;
    } else {
        return null;
    }
};

DescriptorCacheFetcher.prototype.get = function(cacheManager, options) {
    return cacheManager.get('descriptors', options.format.name);
};

module.exports = DescriptorCacheFetcher;


/***/ }),
/* 511 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file columncachefetcher.js
 * @brief Cache fetcher specialized for entity columns description.
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-10-02
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let CacheFetcher = __webpack_require__(41);

let ColumnCacheFetcher = function() {
    CacheFetcher.call(this);

    this.type = "entity_columns";
};

ColumnCacheFetcher.prototype = Object.create(CacheFetcher.prototype);
ColumnCacheFetcher.prototype.constructor = ColumnCacheFetcher;

/**
 * Fetch values.
 * @param cacheManager
 * @param options
 * @param keys Keys list.
 */
ColumnCacheFetcher.prototype.fetch = function(cacheManager, options, keys) {
    let name = options.format.model;
    let queryData = {};
    if (options.format.layouts && options.format.layouts.length > 0) {
        name += ':' + options.format.layouts.sort().toString();
        queryData.layouts = options.format.layouts.toString();
    }

    if (options.format.mode === 'search') {
        name += ':' + options.format.mode;
        queryData.mode = options.format.mode;
    }

    let cache = cacheManager.get('entity_columns', name);

    let doFetch = false;
    let now = Date.now();

    // lookup into the global cache
    let entry = 0 in cache ? cache[0] : undefined;

    if (cacheManager.enabled && entry !== undefined) {
        // found. look for validity
        if (entry.expire !== null && entry.expire <= now) {
            doFetch = true;
        }
    } else {
        doFetch = true;
    }

    let url = window.application.url(['descriptor', 'columns', options.format.model]);

    if (doFetch) {
        let promise = $.ajax({
            type: "GET",
            url: url,
            contentType: 'application/json; charset=utf8',
            data: queryData
        });

        promise.done(function (data) {
            // feed the cache and compute expire timestamp. validity of null means it never expires.
            let now = Date.now();
            let expire = data.validity !== null ? data.validity * 1000 + now : null;
            if (!data.cacheable) {
                expire = now;
            }

            cache[0] = {
                expire: expire,
                value: data.columns
            };

            session.logger.debug("Cache miss for columns description " + options.format.model + ".");
        }).fail(function () {
            session.logger.debug("Cache failure for columns description " + options.format.model + ".");
        });

        return promise;
    } else {
        return null;
    }
};

ColumnCacheFetcher.prototype.get = function(cacheManager, options) {
    let name = options.format.model;
    if (options.format.layouts && options.format.layouts.length > 0) {
        name += ':' + options.format.layouts.sort().toString();
    }
    if (options.format.mode === 'search') {
        name += ':' + options.format.mode;
    }

    return cacheManager.get('entity_columns', name);
};

module.exports = ColumnCacheFetcher;


/***/ }),
/* 512 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file descriptor.js
 * @brief Descriptor router
 * @author Frédéric SCHERMA (INRA UMR1095), Medhi BOULNEMOUR (INRA UMR1095)
 * @date 2016-07-19
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);
let DescriptorGroupListView = __webpack_require__(513);
let DescriptorLayout = __webpack_require__(269);
let DefaultLayout = __webpack_require__(3);
let TitleView = __webpack_require__(4);
let ScrollingMoreView = __webpack_require__(10);
let DescriptorCollection = __webpack_require__(82);
let EntityListFilterView = __webpack_require__(14);
let DescriptorModel = __webpack_require__(40);

let Router = Marionette.AppRouter.extend({
    routes: {
        "app/descriptor/descriptor/": "getIndexList",
        "app/descriptor/descriptor/:id/*tab": "getDescriptor",
    },

    getIndexList: function (options) {
        options || (options = {});

        let collection = new DescriptorCollection([], {
            filters: (options.filters || {}),
            search: (options.search || {})
        });

        let defaultLayout = new DefaultLayout({});
        window.application.main.showContent(defaultLayout);
        defaultLayout.showChildView('title', new TitleView({title: _t("List of descriptors")}));

        // get available columns
        let columns = window.application.main.cache.lookup({
            type: 'entity_columns',
            format: {model: 'descriptor.descriptor'}
        });

        columns.done(function (data) {
            let descriptorGroupListView = new DescriptorGroupListView({read_only: true, collection: collection, columns: data[0].value});

            defaultLayout.showChildView('content', descriptorGroupListView);
            defaultLayout.showChildView('content-bottom', new ScrollingMoreView({
                targetView: descriptorGroupListView,
                collection: collection
            }));

            defaultLayout.showChildView('bottom', new EntityListFilterView({
                collection: collection, columns: data[0].value
            }));

            descriptorGroupListView.query();
        });
    },

    getDescriptor : function(tid, tab) {
        tab || (tab = "");

        let defaultLayout = new DefaultLayout();
        window.application.main.showContent(defaultLayout);

        let model = new DescriptorModel({id: tid});

        model.fetch().then(function () {
            defaultLayout.showChildView('title', new TitleView({title: _t("Details for the descriptor"), model: model}));
            defaultLayout.showChildView('content', new DescriptorLayout({model: model, initialTab: tab.replace('/', '')}));
        });
    },
});

module.exports = Router;


/***/ }),
/* 513 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {/**
 * @file descriptorlist.js
 * @brief List of descriptors view
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-07-20
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let DescriptorView = __webpack_require__(514);
let AdvancedTable = __webpack_require__(6);
let DescriptorsColumnsView = __webpack_require__(11);

let View = AdvancedTable.extend({
    className: "object descriptor-group-list advanced-table-container",
    childView: DescriptorView,
    userSettingName: 'descriptor_list_columns',
    userSettingVersion: '1.4',

    defaultColumns: [
        {name: 'lock', width: 'auto', sort_by: null},
        {name: 'code', width: 'auto', sort_by: null},
        {name: 'name', width: 'auto', sort_by: null},
        {name: 'label', width: 'auto', sort_by: null},
        {name: 'group_name', width: 'auto', sort_by: '+0'}
    ],

    columnsOptions: {
        'lock': {
            label: '',
            width: 'auto',
            glyphicon: ['fa-lock', 'fa-lock'],
            fixed: true
        },
        'code': {label: _t('Code'), width: 'auto', minWidth: true, event: 'view-descriptor-details'},
        'name': {label: _t('Name'), width: 'auto', minWidth: true, event: 'view-descriptor-details'},
        'label': {label: _t('Label'), width: 'auto', minWidth: true, event: 'view-descriptor-details'},
        'group_name': {width: 'auto', minWidth: true}
    },

    initialize: function (options) {
        View.__super__.initialize.apply(this, arguments);

        this.filters = this.getOption('filters');
    },

    onRender: function () {
        View.__super__.onRender.apply(this, arguments);
        this.onShowTab();
    },

    onShowTab: function () {
        let view = this;

        let contextLayout = application.getView().getChildView('right');
        if (!contextLayout) {
            let DefaultLayout = __webpack_require__(3);
            contextLayout = new DefaultLayout();
            application.getView().showChildView('right', contextLayout);
        }

        let TitleView = __webpack_require__(4);
        contextLayout.showChildView('title', new TitleView({
            title: _t("Actions on descriptors"),
            glyphicon: 'fa-wrench'
        }));

        let actions = [
            'create-descriptor'
        ];

        let ListContextView = __webpack_require__(268);
        let contextView = new ListContextView({actions: actions});
        contextLayout.showChildView('content', contextView);

        contextView.on("descriptor:create", function () {
            view.onCreateDescriptor();
        });

        View.__super__.onShowTab.apply(this, arguments);
    },

    onBeforeDetach: function () {
        application.main.defaultRightView();
    },

    onCreateDescriptor: function () {
        window.application.descriptor.controllers.descriptor.create();
    }
});

// support of descriptors columns extension
_.extend(View.prototype, DescriptorsColumnsView);

module.exports = View;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 514 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {/**
 * @file descriptor.js
 * @brief Descriptor item view
 * @author Frédéric SCHERMA (INRA UMR1095), Medhi BOULNEMOUR (INRA UMR1095)
 * @date 2016-07-21
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);

let View = Marionette.View.extend({
    tagName: 'tr',
    className: 'element object descriptor',
    template: __webpack_require__(12),
    templateContext: function () {
        return {
            columnsList: this.getOption('columnsList'),
            columnsOptions: this.getOption('columnsOptions')
        }
    },

    ui: {
        delete_btn: '.action.delete',
        edit_btn: '.action.edit',
        // manage_btn: '.action.manage',
        lock: 'td[name=lock]'
    },

    events: {
        'click @ui.delete_btn': 'deleteDescriptor',
        'click @ui.edit_btn': 'viewDescriptor',
        'click @ui.manage_btn': 'viewDescriptorValue'
    },

    behaviors: {
        ActionBtnEvents: {
            behaviorClass: __webpack_require__(8),
            actions: {
                tag: {display: true, event: 'changeLabel'},
                edit: {display: true, event: 'viewDescriptor'},
                // manage: {display: true, event: 'viewDescriptorValue'},
                remove: {display: true, event: 'deleteDescriptor'}
            }
        }
    },

    initialize: function() {
        this.listenTo(this.model, 'change', this.render, this);
    },

    actionsProperties: function() {
        let properties = {
            edit: {disabled: false},
            remove: {disabled: false}
        };

        // @todo check user permissions

        // if (!this.model.get('can_modify') || !session.user.isSuperUser || !session.user.isStaff) {
        //     // properties.edit.disabled = true;
        // }

        // if (!_.contains(['enum_single', 'enum_pair', 'enum_ordinal'], this.model.get('format').type)) {
        //     properties.manage.disabled = true;
        // }

        if (!this.model.get('can_delete') || !session.user.isSuperUser || !session.user.isStaff) {
            properties.remove.disabled = true;
        }

        return properties;
    },

    onRender: function() {
        if (!window.application.permission.manager.isStaff()) {
            $(this.ui.delete_descriptor_model_type).hide();
        }

        if (this.model.get('can_modify')) {
            this.ui.lock.find('span').hide()
        }
    },

    viewDescriptor: function() {
        Backbone.history.navigate("app/descriptor/descriptor/" + this.model.id + "/", {trigger: true});
        return false;
    },

    viewDescriptorValue: function () {
        if (_.contains(['enum_single', 'enum_pair', 'enum_ordinal'],this.model.get('format').type)) {
            Backbone.history.navigate("app/descriptor/descriptor/" + this.model.id + "/value/", {trigger: true});
        } else {
            $.alert.error(_t("Descriptor can not contain a list of values"));
        }
    },

    changeLabel: function () {
        if (!(window.application.permission.manager.isStaff() && this.model.get('can_modify'))) {
            return;
        }

        let ChangeLabel = __webpack_require__(24);
        let changeLabel = new ChangeLabel({
            model: this.model,
            title: _t("Change the descriptor labels")
        });

        changeLabel.render();
        return false;
    },

    deleteDescriptor: function () {
        // todo: Alert user only if the descriptor is used

        // old version:
        // if (this.model.get('num_descriptor_values') === 0) {
        //     this.model.destroy({wait: true});
        // } else {
        //     $.alert.error(_t("Some values exists for this type of descriptor"));
        // }

        window.application.descriptor.controllers.descriptor.deleteModel(this.model);
    }
});

module.exports = View;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 515 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {/**
 * @file descriptordetails.js
 * @brief Optimized layout for details of a type of descriptor
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-01-25
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);

let View = Marionette.View.extend({
    template: __webpack_require__(516),

    regions: {
        'content': "div.contextual-region"
    },

    ui: {
        name: '#descriptor_type_name',
        code: '#descriptor_type_code',
        group_name: '#descriptor_group_name',
        description: '#descriptor_type_description',
        format_type: '#format_type',
        save: '#save',
        apply: '#apply',
        cancel: '#cancel'
    },

    events: {
        'click @ui.save': 'saveDescriptor',
        'click @ui.apply': 'saveDescriptor',
        'click @ui.cancel': 'cancelDescriptor',
        'input @ui.name': 'inputName',
        'input @ui.group_name': 'inputGroupName',
        'change @ui.format_type': 'changeFormatType'
    },

    onShowTab: function () {
        let self = this;

        let contextLayout = window.application.getView().getChildView('right');
        if (!contextLayout) {
            let DefaultLayout = __webpack_require__(3);
            contextLayout = new DefaultLayout();
            window.application.getView().showChildView('right', contextLayout);
        }

        let TitleView = __webpack_require__(4);
        contextLayout.showChildView('title', new TitleView({
            title: _t("Actions on descriptor"),
            glyphicon: 'fa-wrench'
        }));

        let actions = [];

        if (window.application.permission.manager.isStaff() && this.model.get('can_modify')) {
            if (self.model.isNew()) {
                actions.push('cancel-descriptor');
                actions.push('apply-descriptor');
            } else {
                actions.push('update-descriptor');
            }
        }

        if (actions.length) {
            let ListContextView = __webpack_require__(268);
            let contextView = new ListContextView({actions: actions});
            contextLayout.showChildView('content', contextView);

            contextView.on("descriptor:update", function () {
                self.saveDescriptor();
            });
            contextView.on("descriptor:apply", function () {
                self.saveDescriptor();
            });
            contextView.on("descriptor:cancel", function () {
                self.cancelDescriptor();
            });

        } else {
            window.application.main.defaultRightView();
        }
    },

    cancelDescriptor: function () {
        Backbone.history.loadUrl();
        this.destroy()

    },

    onRender: function () {

        if (this.model.isNew()) {
            this.ui.save.hide();
        } else {
            this.ui.apply.hide();
            this.ui.cancel.hide();
        }

        let format = this.model.get('format');
        let content_el = null;

        window.application.descriptor.views.formatTypes.drawSelect(this.ui.format_type, true, false, format.type);
        let Element = window.application.descriptor.widgets.getElement(format.type);

        // update the contextual region according to the format
        if (Element && Element.DescriptorTypeDetailsView) {
            content_el = new Element.DescriptorTypeDetailsView({model: this.model});
            this.showChildView('content', content_el);
        } else {
            this.getRegion('content').empty();
        }

        // @todo check user permissions
        let x = this.model.get('can_modify');
        if (x === false) {
            this.ui.save.hide();
            _.map(this.ui, function (key) {
                key.prop('disabled', 'true');
            });

            if (content_el) {
                _.map(content_el.ui, function (key) {
                    key.prop('disabled', 'true');
                });
            }
        }
    },

    onBeforeDetach: function () {
        this.ui.format_type.selectpicker('destroy');
        window.application.main.defaultRightView();
    },

    changeFormatType: function () {
        let type = this.ui.format_type.val();

        // update the contextual region according to the format
        let Element = window.application.descriptor.widgets.getElement(type);
        if (Element && Element.DescriptorTypeDetailsView) {
            this.showChildView('content', new Element.DescriptorTypeDetailsView({model: this.model}));
        } else {
            this.getRegion('content').empty();
        }
    },

    inputName: function () {
        let v = this.ui.name.val();
        let re = /^[a-zA-Z0-9_-]+$/i;

        if (v.length > 0 && !re.test(v)) {
            $(this.ui.name).validateField('failed', _t("Invalid characters (alphanumeric, _ and - only)"));
        } else if (v.length < 3) {
            $(this.ui.name).validateField('failed', _t('characters_min', {count: 3}));
        } else {
            $(this.ui.name).validateField('ok');
        }
    },

    inputGroupName: function () {
        let v = this.ui.group_name.val();
        let re = /^[a-zA-Z0-9_-]+$/i;

        if (v.length > 0 && !re.test(v)) {
            $(this.ui.group_name).validateField('failed', _t("Invalid characters (alphanumeric, _ and - only)"));
        } else {
            $(this.ui.group_name).validateField('ok');
        }
    },

    saveDescriptor: function () {
        // Check inputs
        if (!$(this.ui.name.isValidField()))
            return;

        if (!$(this.ui.group_name.isValidField()))
            return;

        let format = {};
        if (this.getChildView('content')) {
            format = this.getChildView('content').getFormat();
        }
        // merge the format type
        format.type = this.ui.format_type.val();

        let params = {
            name: this.ui.name.val(),
            code: this.ui.code.val(),
            group_name: this.ui.group_name.val(),
            description: this.ui.description.val(),
            format: format
        };

        // Save the model
        this.model.save(params, {wait: true}).done(function () {
            $.alert.success(_t("Descriptor has been successfully saved"))
        });
    }
});

module.exports = View;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 516 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div class="row"><div class="descriptor-type-name form-group col-md-6"><label for="descriptor_type_name">' +
__e( _t('Descriptor type name') ) +
'</label><input id="descriptor_type_name" class="form-control" type="text" maxlength="255" value="' +
__e( name ) +
'"></div><div class="descriptor-type-code form-group col-md-6"><label for="descriptor_type_code">' +
__e( _t('Descriptor type code') ) +
'</label><input id="descriptor_type_code" class="form-control" type="text" readonly="readonly" maxlength="255" value="' +
__e( code ) +
'"></div></div><div class="row"><div class="descriptor-group-name form-group col-md-6"><label for="descriptor_group_name">' +
__e( _t('Group name') ) +
'</label><input id="descriptor_group_name" class="form-control" type="text" maxlength="255" value="' +
__e( group_name ) +
'"></div></div><div class="row"><div class="descriptor-type-format form-group col-md-6"><label for="format_type">' +
__e( _t('Type of format') ) +
'</label><select id="format_type" class="form-control"></select></div></div><div class="contextual-region"></div><div class="descriptor-type-description form-group"><label for="descriptor_type_description">' +
__e( _t('Description') ) +
'</label><textarea id="descriptor_type_description" class="form-control" maxlength="1024">' +
__e( description ) +
'</textarea></div><div class="descriptor-type-update form-group pull-right"><button id="apply" class="btn btn-success btn-block">' +
__e( _t('Apply') ) +
'</button> <button id="cancel" class="btn btn-default btn-block">' +
__e( _t('Cancel') ) +
'</button> <button id="save" class="btn btn-success btn-block">' +
__e( _t('Update') ) +
'</button></div>';

}
return __p
};

/*
original source:

<div class="row"><div class="descriptor-type-name form-group col-md-6"><label for="descriptor_type_name"><%- _t('Descriptor type name') %></label><input id="descriptor_type_name" class="form-control" type="text" maxlength="255" value="<%- name %>"></div><div class="descriptor-type-code form-group col-md-6"><label for="descriptor_type_code"><%- _t('Descriptor type code') %></label><input id="descriptor_type_code" class="form-control" type="text" readonly="readonly" maxlength="255" value="<%- code %>"></div></div><div class="row"><div class="descriptor-group-name form-group col-md-6"><label for="descriptor_group_name"><%- _t('Group name') %></label><input id="descriptor_group_name" class="form-control" type="text" maxlength="255" value="<%- group_name %>"></div></div><div class="row"><div class="descriptor-type-format form-group col-md-6"><label for="format_type"><%- _t('Type of format') %></label><select id="format_type" class="form-control"></select></div></div><div class="contextual-region"></div><div class="descriptor-type-description form-group"><label for="descriptor_type_description"><%- _t('Description') %></label><textarea id="descriptor_type_description" class="form-control" maxlength="1024"><%- description %></textarea></div><div class="descriptor-type-update form-group pull-right"><button id="apply" class="btn btn-success btn-block"><%- _t('Apply') %></button> <button id="cancel" class="btn btn-default btn-block"><%- _t('Cancel') %></button> <button id="save" class="btn btn-success btn-block"><%- _t('Update') %></button></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 517 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div name="details" style="height: 1px"></div><div class="column" style="margin-top: 10px; height: calc(100% - 1px)"><ul class="nav nav-tabs" role="tablist"><li role="presentation" class="active"><a href="div.tab-pane[name=configuration]" aria-controls="configuration" role="tab" data-toggle="tab">' +
__e( _t("Configuration") ) +
'</a></li><li role="presentation"><a href="div.tab-pane[name=values]" aria-controls="values" role="tab" data-toggle="tab">' +
__e( _t("Values") ) +
'</a></li></ul><div class="tab-content" style="height: calc(100% - 41px - 10px)"><div role="tabpanel" class="tab-pane active" name="configuration" style="height: 100%; padding: 20px 15px 0 15px"></div><div role="tabpanel" class="tab-pane" name="values" style="height: 100%"></div></div></div>';

}
return __p
};

/*
original source:

<div name="details" style="height: 1px"></div><div class="column" style="margin-top: 10px; height: calc(100% - 1px)"><ul class="nav nav-tabs" role="tablist"><li role="presentation" class="active"><a href="div.tab-pane[name=configuration]" aria-controls="configuration" role="tab" data-toggle="tab"><%- _t("Configuration") %></a></li><li role="presentation"><a href="div.tab-pane[name=values]" aria-controls="values" role="tab" data-toggle="tab"><%- _t("Values") %></a></li></ul><div class="tab-content" style="height: calc(100% - 41px - 10px)"><div role="tabpanel" class="tab-pane active" name="configuration" style="height: 100%; padding: 20px 15px 0 15px"></div><div role="tabpanel" class="tab-pane" name="values" style="height: 100%"></div></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 518 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {/**
 * @file descriptorvalue.js
 * @brief List of value for a type of descriptor (collection)
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-07-21
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let DescriptorTypeModel = __webpack_require__(519);

let Collection = window.Backbone.Collection.extend({
    url: function() {
        return window.application.url(['descriptor', 'descriptor', this.type_id, 'value']);
    },

    model: DescriptorTypeModel,

    initialize: function(models, options) {
        options || (options = {});

        this.sort_by = "id";
        this.group_id = options.group_id;
        this.type_id = options.type_id;
        this.format = options.format || {type: "string", fields: []};
    },

    parse: function(data) {
        if (data.format) {
            this.format = data.format;
        }

        this.prev = data.prev;
        this.cursor = data.cursor;
        this.next = data.next;
        this.sort_by = data.sort_by;

        return data.items;
    },

    fetch: function(options) {
        options || (options = {});
        let data = (options.data || {});

        let opts = _.clone(options);
        opts.data = data;

        if (data.cursor && typeof data.cursor !== 'string') {
            opts.data.cursor = JSON.stringify(data.cursor);
        }

        if (data.sort_by && typeof data.sort_by !== 'string') {
            opts.data.sort_by = JSON.stringify(data.sort_by);
        }

        return window.Backbone.Collection.prototype.fetch.call(this, opts);
    }
});

module.exports = Collection;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 519 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file descriptorvalue.js
 * @brief Value for a type of descriptor model
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-07-21
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Backbone = __webpack_require__(7);

let Model = Backbone.Model.extend({
    url: function() {
        if (this.isNew()) {
            return window.application.url(['descriptor', 'descriptor', this.type_id, 'value']);
        } else {
            return window.application.url(['descriptor', 'descriptor', this.type_id, 'value', this.id]);
        }
    },

    defaults: {
        id: null,
        parent: null,
        ordinal: null,
        value0: null,
        value1: null,
    },

    initialize: function(attributes, options) {
        Model.__super__.initialize.apply(this, arguments);

        options || (options = {});
        this.type_id = options.type_id;

        if (options.collection) {
            this.type_id = options.collection.type_id;
        }
    },

    parse: function(data) {
        //this.perms = data.perms;
        return data;
    },

    validate: function(attrs) {
        let errors = {};
        let hasError = false;

        if (hasError) {
          return errors;
        }
    },
});

module.exports = Model;


/***/ }),
/* 520 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file descriptorvaluelist.js
 * @brief List of values for a type of descriptor item view
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-07-21
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let DescriptorValueView = __webpack_require__(521);
let AdvancedTable = __webpack_require__(6);

let View = AdvancedTable.extend({
    template: __webpack_require__(523),
    className: "object descriptor-value-list advanced-table-container",
    childView: DescriptorValueView,
    childViewContainer: 'tbody.descriptor-value-list',

    templateContext: function () {
        return {
            format: this.collection.format,
            items: this.collection.toJSON()
        };
    },
    childViewOptions: function () {
        return {
            can_delete: this.model.get('can_delete'),
            can_modify: this.model.get('can_modify')
        }
    },

    ui: {
        table: "table.descriptor-table",
        sort_by_id: "th span.action.column-sort-id",
        sort_by_value0: "th span.action.column-sort-value0"
    },

    events: {
        'click @ui.sort_by_id': 'sortColumn',
        'click @ui.sort_by_value0': 'sortColumn'
    },

    initialize: function () {
        View.__super__.initialize.apply(this);
        this.listenTo(this.collection, 'reset', this.render, this);
        this.listenTo(this.collection, 'change', this.render, this);
    },

    onShowTab: function () {
        let view = this;

        if (!this.model.get('can_modify') || !window.application.permission.manager.isStaff()) {
            return
        }

        let contextLayout = window.application.getView().getChildView('right');
        if (!contextLayout) {
            let DefaultLayout = __webpack_require__(3);
            contextLayout = new DefaultLayout();
            window.application.getView().showChildView('right', contextLayout);
        }

        let TitleView = __webpack_require__(4);
        contextLayout.showChildView('title', new TitleView({
            title: _t("Actions on descriptor values"),
            glyphicon: 'fa-wrench'
        }));

        let actions = [
            'create-value'
        ];

        let ListContextView = __webpack_require__(270);
        let contextView = new ListContextView({actions: actions});
        contextLayout.showChildView('content', contextView);

        contextView.on("value:create", function () {
            view.onCreateValue();
        });

        View.__super__.onShowTab.apply(this, arguments);
    },

    onBeforeDetach: function () {
        window.application.main.defaultRightView();
    },

    onCreateValue: function () {
        this.collection.create({value0: _t("New value")});
    },

    onRender: function () {
        let sort_by = /([+\-]{0,1})([a-z0-9]+)/.exec(this.collection.sort_by);
        let sort_el = this.$el.find('span[column-name="' + sort_by[2] + '"]');

        if (sort_by[1] === '-') {
            sort_el.addClass('fa-sort-desc');
            sort_el.attr('sort-direction', 'desc');
        } else {
            sort_el.addClass('fa-sort-asc');
            sort_el.attr('sort-direction', 'asc');
        }

        // reset scrolling
        this.getScrollElement().scrollTop(0);
    },

    sortColumn: function (e) {
        let column = $(e.target).attr('column-name') || "id";
        let order = $(e.target).attr('sort-direction') || "none";
        let sort_by = "";

        if (order === "asc") {
            sort_by = "-" + column;
        } else {
            sort_by = "+" + column;
        }

        this.collection.next = null;
        this.collection.fetch({
            reset: true, update: false, remove: true, data: {
                // more: this.capacity()+1,
                cursor: null,
                sort_by: sort_by
            }
        });
    }
});

module.exports = View;

/***/ }),
/* 521 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file descriptorvalue.js
 * @brief Value for a type of descriptor view
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-07-21
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);
let Dialog = __webpack_require__(5);

let View = Marionette.View.extend({
    tagName: 'tr',
    className: 'element object descriptor-value actions',
    template: __webpack_require__(522),

    ui: {
        delete_btn: 'button.action.delete',
        edit_btn: '.action.edit'
    },

    events: {
        'click @ui.delete_btn': 'deleteDescriptorValue',
        'click @ui.edit_btn': 'onEditValue0'
    },

    behaviors: {
        ActionBtnEvents: {
            behaviorClass: __webpack_require__(8),
            actions: {
                edit: {display: true, title: _t("Edit value0"), event: 'onEditValue0'},
                remove: {display: true, event: 'deleteDescriptorValue'}
            }
        }
    },

    initialize: function () {
        this.listenTo(this.model, 'change', this.render, this);
    },

    actionsProperties: function() {
        let properties = {
            edit: {disabled: false},
            remove: {disable: false}
        };

        if (!this.getOption('can_modify') || !window.application.permission.manager.isStaff()) {
            properties.edit.disabled = true;
        }

        if (!this.getOption('can_delete') || !window.application.permission.manager.isStaff()) {
            properties.remove.disabled = true;
        }

        return properties;
    },

    deleteDescriptorValue: function () {
        if (this.getOption('can_delete') || window.application.permission.manager.isStaff()) {
            this.model.destroy({wait: true});
        }
        return false;
    },

    onEditValue0: function () {
        if (this.getOption('can_modify')) {
            let model = this.model;

            if (model.collection.format['trans']) {
                $.ajax({
                    type: "GET",
                    url: this.model.url() + 'value0/',
                    dataType: 'json',
                }).done(function (data) {
                    let values = data;

                    let ChangeValues = Dialog.extend({
                        template: __webpack_require__(53),
                        templateContext: function () {
                            return {
                                values: values,
                            };
                        },

                        attributes: {
                            id: "dlg_change_values",
                        },

                        ui: {
                            value: "#descriptor_value_values input",
                        },

                        events: {
                            'input @ui.value': 'onValueInput',
                        },

                        initialize: function (options) {
                            ChangeValues.__super__.initialize.apply(this);
                        },

                        onValueInput: function (e) {
                            this.validateValue(e);
                        },

                        validateValue: function (e) {
                            let v = $(e.target).val();

                            if (v.length < 1) {
                                $(e.target).validateField('failed', _t('characters_min', {count: 1}));
                                return false;
                            } else if (v.length > 64) {
                                $(e.target).validateField('failed', _t('characters_max', {count: 64}));
                                return false;
                            }

                            $(e.target).validateField('ok');

                            return true;
                        },

                        validateValues: function () {
                            $.each($(this.ui.value), function (i, value) {
                                let v = $(this).val();

                                if (v.length < 3) {
                                    $(this).validateField('failed', _t('characters_min', {count: 3}));
                                    return false;
                                } else if (v.length > 64) {
                                    $(this).validateField('failed', _t('characters_max', {count: 64}));
                                    return false;
                                }
                            });

                            return true;
                        },

                        onApply: function () {
                            let view = this;
                            let model = this.getOption('model');

                            let values = {};

                            $.each($(this.ui.value), function (i, value) {
                                let v = $(this).val();
                                values[$(value).attr("language")] = v;
                            });

                            if (this.validateValues()) {
                                $.ajax({
                                    type: "PUT",
                                    url: model.url() + "value0/",
                                    dataType: 'json',
                                    contentType: "application/json; charset=utf-8",
                                    data: JSON.stringify(values)
                                }).done(function () {
                                    // manually update the current context value
                                    model.set('value0', values[session.language]);
                                    $.alert.success(_t("Successfully valued !"));
                                }).always(function () {
                                    view.destroy();
                                });
                            }
                        },
                    });

                    let changeValues = new ChangeValues({model: model});
                    changeValues.render();
                });
            } else {
                let ChangeLabel = Dialog.extend({
                    template: __webpack_require__(54),

                    attributes: {
                        id: "dlg_change_value",
                    },

                    ui: {
                        value: "#value",
                    },

                    events: {
                        'input @ui.value': 'onValueInput',
                    },

                    initialize: function (options) {
                        ChangeLabel.__super__.initialize.apply(this);

                    },

                    onValueInput: function () {
                        this.validateValue();
                    },

                    validateValue: function () {
                        let v = this.ui.value.val();

                        if (v.length < 1) {
                            $(this.ui.value).validateField('failed', _t('characters_min', {count: 1}));
                            return false;
                        }

                        $(this.ui.value).validateField('ok');

                        return true;
                    },

                    onApply: function () {
                        let view = this;
                        let model = this.getOption('model');

                        if (this.validateValue()) {
                            model.save({value0: this.ui.value.val()}, {
                                patch: true,
                                wait: true,
                                success: function () {
                                    view.destroy();
                                    $.alert.success(_t("Successfully changed !"));
                                },
                                error: function () {
                                    $.alert.error(_t("Unable to change the value !"));
                                }
                            });
                        }
                    },
                });

                let changeLabel = new ChangeLabel({
                    model: this.model,
                });

                changeLabel.render();
                changeLabel.ui.value.val(this.model.get('value0'));
            }
        }
        return false;
    }
});

module.exports = View;


/***/ }),
/* 522 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<td class="action edit" name="id">' +
__e( id ) +
'</td><td class="action edit last-column" name="value0">' +
__e( value0 ) +
'</td>';

}
return __p
};

/*
original source:

<td class="action edit" name="id"><%- id %></td><td class="action edit last-column" name="value0"><%- value0 %></td>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 523 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div class="table-advanced-head"><table class="table table-striped descriptor-table table-advanced"><thead><tr scope="row"><th class="unselectable"><span class="action column-sort-id fa fa-sort column-action" column-name="id" column-type="alpha"></span>' +
__e( _t("Code") ) +
' </th><th class="unselectable"><span class="action column-sort-value0 fa fa-sort column-action" column-name="value0" column-type="alpha"></span>' +
__e( _t(format.fields[0]) || _t("Value0") ) +
' </th></tr></thead></table></div><div class="table-advanced-body"><table class="table table-striped descriptor-table table-advanced"><tbody class="descriptor-value-list"></tbody></table></div>';

}
return __p
};

/*
original source:

<div class="table-advanced-head"><table class="table table-striped descriptor-table table-advanced"><thead><tr scope="row"><th class="unselectable"><span class="action column-sort-id fa fa-sort column-action" column-name="id" column-type="alpha"></span><%- _t("Code") %> </th><th class="unselectable"><span class="action column-sort-value0 fa fa-sort column-action" column-name="value0" column-type="alpha"></span><%- _t(format.fields[0]) || _t("Value0") %> </th></tr></thead></table></div><div class="table-advanced-body"><table class="table table-striped descriptor-table table-advanced"><tbody class="descriptor-value-list"></tbody></table></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 524 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file descriptorvaluepairlist.js
 * @brief List of pair values for a type of descriptor item view
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-08-01
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let DescriptorValuePairView = __webpack_require__(525);
let AdvancedTable = __webpack_require__(6);

let View = AdvancedTable.extend({
    template: __webpack_require__(527),
    className: "object descriptor-value-list advanced-table-container",
    childView: DescriptorValuePairView,
    childViewContainer: 'tbody.descriptor-value-list',

    templateContext: function () {
        return {
            format: this.collection.format,
            items: this.collection.toJSON()
        };
    },
    childViewOptions: function () {
        return {
            can_delete: this.model.get('can_delete'),
            can_modify: this.model.get('can_modify')
        }
    },

    ui: {
        table: "table.descriptor-table",
        sort_by_id: "th span.action.column-sort-id",
        sort_by_value0: "th span.action.column-sort-value0",
        sort_by_value1: "th span.action.column-sort-value1"
    },

    events: {
        'click @ui.sort_by_id': 'sortColumn',
        'click @ui.sort_by_value0': 'sortColumn',
        'click @ui.sort_by_value1': 'sortColumn'
    },

    initialize: function () {
        View.__super__.initialize.apply(this, arguments);

        this.listenTo(this.collection, 'reset', this.render, this);
    },

    onShowTab: function () {
        let view = this;

        if (!this.model.get('can_modify') || !window.application.permission.manager.isStaff()) {
            return
        }

        let contextLayout = window.application.getView().getChildView('right');
        if (!contextLayout) {
            let DefaultLayout = __webpack_require__(3);
            contextLayout = new DefaultLayout();
            window.application.getView().showChildView('right', contextLayout);
        }

        let TitleView = __webpack_require__(4);
        contextLayout.showChildView('title', new TitleView({
            title: _t("Actions on descriptor values"),
            glyphicon: 'fa-wrench'
        }));

        let actions = [
            'create-value'
        ];

        let ListContextView = __webpack_require__(270);
        let contextView = new ListContextView({actions: actions});
        contextLayout.showChildView('content', contextView);

        contextView.on("value:create", function () {
            view.onCreateValue();
        });

        View.__super__.onShowTab.apply(this, arguments);
    },

    onBeforeDetach: function () {
        window.application.main.defaultRightView();
    },

    onCreateValue: function () {
        this.collection.create({value0: _t("New value")});
    },

    onRender: function () {
        let sort_by = /([+\-]{0,1})([a-z0-9]+)/.exec(this.collection.sort_by);
        let sort_el = this.$el.find('span[column-name="' + sort_by[2] + '"]');

        if (sort_by[1] === '-') {
            sort_el.addClass('fa-sort-desc');
            sort_el.attr('sort-direction', 'desc');
        } else {
            sort_el.addClass('fa-sort-asc');
            sort_el.attr('sort-direction', 'asc');
        }

        // reset scrolling
        this.getScrollElement().scrollTop(0);
    },

    sortColumn: function (e) {
        let column = $(e.target).attr('column-name') || "id";
        let order = $(e.target).attr('sort-direction') || "none";

        if (order === "asc") {
            sort_by = "-" + column;
        } else {
            sort_by = "+" + column;
        }

        this.collection.next = null;
        this.collection.fetch({
            reset: true, update: false, remove: true, data: {
                // more: this.capacity()+1,
                cursor: null,
                sort_by: sort_by
            }
        });
    }
});

module.exports = View;


/***/ }),
/* 525 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file descriptorvaluepair.js
 * @brief Value for a type of descriptor view
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-08-01
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);
let Dialog = __webpack_require__(5);

let View = Marionette.View.extend({
    tagName: 'tr',
    className: 'element object descriptor-value actions',
    template: __webpack_require__(526),

    ui: {
        delete_btn: '.action.delete',
        edit_btn: '.action.edit',
        edit2_btn: '.action.edit2'
    },

    events: {
        'click @ui.delete_btn': 'deleteDescriptorValue',
        'click @ui.edit_btn': 'onEditValue0',
        'click @ui.edit2_btn': 'onEditValue1'
    },

    behaviors: {
        ActionBtnEvents: {
            behaviorClass: __webpack_require__(8),
            actions: {
                edit: {display: true, title: _t("Edit value0"), event: 'onEditValue0'},
                edit2: {display: true, title: _t("Edit value1"), event: 'onEditValue1'},
                remove: {display: true, event: 'deleteDescriptorValue'}
            }
        }
    },

    initialize: function () {
        this.listenTo(this.model, 'change', this.render, this);
    },

    actionsProperties: function () {
        let properties = {
            edit: {disabled: false},
            edit2: {disabled: false},
            remove: {disable: false}
        };

        if (!this.getOption('can_modify') || !window.application.permission.manager.isStaff()) {
            properties.edit.disabled = true;
            properties.edit2.disabled = true;
        }

        if (!this.getOption('can_delete') || !window.application.permission.manager.isStaff()) {
            properties.remove.disabled = true;
        }

        return properties;
    },

    deleteDescriptorValue: function () {
        if (this.getOption('can_delete') || window.application.permission.manager.isStaff()) {
            this.model.destroy({wait: true});
        }
        return false;
    },

    onEditValue0: function () {
        if (this.getOption('can_modify')) {
            let model = this.model;

            if (model.collection.format['trans']) {
                $.ajax({
                    type: "GET",
                    url: this.model.url() + 'value0/',
                    dataType: 'json',
                }).done(function (data) {
                    let values = data;

                    let ChangeValues = Dialog.extend({
                        template: __webpack_require__(53),
                        templateContext: function () {
                            return {
                                values: values,
                            };
                        },

                        attributes: {
                            id: "dlg_change_values",
                        },

                        ui: {
                            value: "#descriptor_value_values input",
                        },

                        events: {
                            'input @ui.value': 'onValueInput',
                        },

                        initialize: function (options) {
                            ChangeValues.__super__.initialize.apply(this);
                        },

                        onValueInput: function (e) {
                            this.validateValue(e);
                        },

                        validateValue: function (e) {
                            let v = $(e.target).val();

                            if (v.length < 1) {
                                $(e.target).validateField('failed', _t('characters_min', {count: 1}));
                                return false;
                            } else if (v.length > 64) {
                                $(e.target).validateField('failed', _t('characters_max', {count: 64}));
                                return false;
                            }

                            $(e.target).validateField('ok');

                            return true;
                        },

                        validateValues: function () {
                            $.each($(this.ui.value), function (i, value) {
                                let v = $(this).val();

                                if (v.length < 3) {
                                    $(this).validateField('failed', _t('characters_min', {count: 3}));
                                    return false;
                                } else if (v.length > 64) {
                                    $(this).validateField('failed', _t('characters_max', {count: 64}));
                                    return false;
                                }
                            });

                            return true;
                        },

                        onApply: function () {
                            let view = this;
                            let model = this.getOption('model');

                            let values = {};

                            $.each($(this.ui.value), function (i, value) {
                                let v = $(this).val();
                                values[$(value).attr("language")] = v;
                            });

                            if (this.validateValues()) {
                                $.ajax({
                                    type: "PUT",
                                    url: model.url() + "value0/",
                                    dataType: 'json',
                                    contentType: "application/json; charset=utf-8",
                                    data: JSON.stringify(values)
                                }).done(function () {
                                    // manually update the current context value
                                    model.set('value0', values[session.language]);
                                    $.alert.success(_t("Successfully valued !"));
                                }).always(function () {
                                    view.destroy();
                                });
                            }
                        },
                    });

                    let changeValues = new ChangeValues({model: model});
                    changeValues.render();
                });
            } else {
                let ChangeLabel = Dialog.extend({
                    template: __webpack_require__(54),

                    attributes: {
                        id: "dlg_change_value",
                    },

                    ui: {
                        value: "#value",
                    },

                    events: {
                        'input @ui.value': 'onValueInput',
                    },

                    initialize: function (options) {
                        ChangeLabel.__super__.initialize.apply(this);

                    },

                    onValueInput: function () {
                        this.validateValue();
                    },

                    validateValue: function () {
                        let v = this.ui.value.val();

                        if (v.length < 1) {
                            $(this.ui.value).validateField('failed', _t('characters_min', {count: 1}));
                            return false;
                        }

                        $(this.ui.value).validateField('ok');

                        return true;
                    },

                    onApply: function () {
                        let view = this;
                        let model = this.getOption('model');

                        if (this.validateValue()) {
                            model.save({value0: this.ui.value.val()}, {
                                patch: true,
                                wait: true,
                                success: function () {
                                    view.destroy();
                                    $.alert.success(_t("Successfully changed !"));
                                },
                                error: function () {
                                    $.alert.error(_t("Unable to change the value !"));
                                }
                            });
                        }
                    },
                });

                let changeLabel = new ChangeLabel({
                    model: this.model,
                });

                changeLabel.render();
                changeLabel.ui.value.val(this.model.get('value0'));
                return false;
            }
        }
    },

    onEditValue1: function () {
        if (this.getOption('can_modify')) {
            let model = this.model;

            if (model.collection.format['trans']) {
                $.ajax({
                    type: "GET",
                    url: this.model.url() + 'value1/',
                    dataType: 'json',
                }).done(function (data) {
                    let values = data;

                    let ChangeValues = Dialog.extend({
                        template: __webpack_require__(53),
                        templateContext: function () {
                            return {
                                values: values,
                            };
                        },

                        attributes: {
                            id: "dlg_change_values",
                        },

                        ui: {
                            value: "#descriptor_value_values input",
                        },

                        events: {
                            'input @ui.value': 'onValueInput',
                        },

                        initialize: function (options) {
                            ChangeValues.__super__.initialize.apply(this);
                        },

                        onValueInput: function (e) {
                            this.validateValue(e);
                        },

                        validateValue: function (e) {
                            let v = $(e.target).val();

                            if (v.length < 1) {
                                $(e.target).validateField('failed', _t('characters_min', {count: 1}));
                                return false;
                            } else if (v.length > 64) {
                                $(e.target).validateField('failed', _t('characters_max', {count: 64}));
                                return false;
                            }

                            $(e.target).validateField('ok');

                            return true;
                        },

                        validateValues: function () {
                            $.each($(this.ui.value), function (i, value) {
                                let v = $(this).val();

                                if (v.length < 3) {
                                    $(this).validateField('failed', _t('characters_min', {count: 3}));
                                    return false;
                                } else if (v.length > 64) {
                                    $(this).validateField('failed', _t('characters_max', {count: 64}));
                                    return false;
                                }
                            });

                            return true;
                        },

                        onApply: function () {
                            let view = this;
                            let model = this.getOption('model');

                            let values = {};

                            $.each($(this.ui.value), function (i, value) {
                                let v = $(this).val();
                                values[$(value).attr("language")] = v;
                            });

                            if (this.validateValues()) {
                                $.ajax({
                                    type: "PUT",
                                    url: model.url() + "value1/",
                                    dataType: 'json',
                                    contentType: "application/json; charset=utf-8",
                                    data: JSON.stringify(values)
                                }).done(function () {
                                    // manually update the current context value
                                    model.set('value1', values[session.language]);
                                    $.alert.success(_t("Successfully valued !"));
                                }).always(function () {
                                    view.destroy();
                                });
                            }
                        },
                    });

                    let changeValues = new ChangeValues({model: model});
                    changeValues.render();
                });
            } else {
                let ChangeLabel = Dialog.extend({
                    template: __webpack_require__(54),

                    attributes: {
                        id: "dlg_change_value",
                    },

                    ui: {
                        value: "#value",
                    },

                    events: {
                        'input @ui.value': 'onValueInput',
                    },

                    initialize: function (options) {
                        ChangeLabel.__super__.initialize.apply(this);

                    },

                    onValueInput: function () {
                        this.validateValue();
                    },

                    validateValue: function () {
                        let v = this.ui.value.val();

                        if (v.length < 1) {
                            $(this.ui.value).validateField('failed', _t('characters_min', {count: 1}));
                            return false;
                        }

                        $(this.ui.value).validateField('ok');

                        return true;
                    },

                    onApply: function () {
                        let view = this;
                        let model = this.getOption('model');

                        if (this.validateValue()) {
                            model.save({value1: this.ui.value.val()}, {
                                patch: true,
                                wait: true,
                                success: function () {
                                    view.destroy();
                                    $.alert.success(_t("Successfully changed !"));
                                },
                                error: function () {
                                    $.alert.error(_t("Unable to change the value !"));
                                }
                            });
                        }
                    }
                });

                let changeLabel = new ChangeLabel({
                    model: this.model,
                });

                changeLabel.render();
                changeLabel.ui.value.val(this.model.get('value1'));
                return false;
            }
        }
    }
});

module.exports = View;


/***/ }),
/* 526 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<td class="action edit" name="id">' +
__e( id ) +
'</td><td class="action edit" name="value0">' +
__e( value0 ) +
'</td><td class="action edit2 last-column" name="value1">' +
__e( value1 ) +
'</td>';

}
return __p
};

/*
original source:

<td class="action edit" name="id"><%- id %></td><td class="action edit" name="value0"><%- value0 %></td><td class="action edit2 last-column" name="value1"><%- value1 %></td>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 527 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div class="table-advanced-head"><table class="table table-striped descriptor-table table-advanced"><thead><tr scope="row"><th class="unselectable"><span class="action column-sort-id fa fa-sort column-action" column-name="id" column-type="alpha"></span><span>' +
__e( _t("Code") ) +
'</span></th><th class="unselectable"><span class="action column-sort-value0 fa fa-sort column-action" column-name="value0" column-type="alpha"></span><span>' +
__e( _t(format.fields[0]) || _t("Value0") ) +
'</span></th><th class="unselectable"><span class="action column-sort-value1 fa fa-sort column-action" column-name="value1" column-type="alpha"></span><span>' +
__e( _t(format.fields[1]) || _t("Value1") ) +
'</span></th></tr></thead></table></div><div class="table-advanced-body"><table class="table table-striped descriptor-table table-advanced"><tbody class="descriptor-value-list"></tbody></table></div>';

}
return __p
};

/*
original source:

<div class="table-advanced-head"><table class="table table-striped descriptor-table table-advanced"><thead><tr scope="row"><th class="unselectable"><span class="action column-sort-id fa fa-sort column-action" column-name="id" column-type="alpha"></span><span><%- _t("Code") %></span></th><th class="unselectable"><span class="action column-sort-value0 fa fa-sort column-action" column-name="value0" column-type="alpha"></span><span><%- _t(format.fields[0]) || _t("Value0") %></span></th><th class="unselectable"><span class="action column-sort-value1 fa fa-sort column-action" column-name="value1" column-type="alpha"></span><span><%- _t(format.fields[1]) || _t("Value1") %></span></th></tr></thead></table></div><div class="table-advanced-body"><table class="table table-striped descriptor-table table-advanced"><tbody class="descriptor-value-list"></tbody></table></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 528 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file descriptorvalueordinallist.js
 * @brief List of ordinam values for a type of descriptor item view
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-10-28
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let DescriptorValueOrdinalView = __webpack_require__(529);
let AdvancedTable = __webpack_require__(6);

let View = AdvancedTable.extend({
    template: __webpack_require__(531),
    className: "object descriptor-value-list advanced-table-container",
    childView: DescriptorValueOrdinalView,
    childViewContainer: 'tbody.descriptor-value-list',

    templateContext: function () {
        return {
            format: this.collection.format,
            items: this.collection.toJSON()
        };
    },
    childViewOptions: function () {
        return {
            can_delete: this.model.get('can_delete'),
            can_modify: this.model.get('can_modify')
        }
    },

    ui: {
        table: "table.descriptor-table",
        sort_by_id: "th span.action.column-sort-id",
        sort_by_ordinal: "th span.action.column-sort-ordinal",
        sort_by_value0: "th span.action.column-sort-value0"
    },

    events: {
        'click @ui.sort_by_id': 'sortColumn',
        'click @ui.sort_by_ordinal': 'sortColumn',
        'click @ui.sort_by_value0': 'sortColumn'
    },

    initialize: function () {
        this.listenTo(this.collection, 'reset', this.render, this);

        View.__super__.initialize.apply(this);
    },

    onRender: function () {
        let sort_by = /([+\-]{0,1})([a-z0-9]+)/.exec(this.collection.sort_by);
        let sort_el = this.$el.find('span[column-name="' + sort_by[2] + '"]');

        if (sort_by[1] === '-') {
            sort_el.addClass('fa-sort-desc');
            sort_el.attr('sort-direction', 'desc');
        } else {
            sort_el.addClass('fa-sort-asc');
            sort_el.attr('sort-direction', 'asc');
        }

        // reset scrolling
        this.getScrollElement().scrollTop(0);
    },

    sortColumn: function (e) {
        let column = $(e.target).attr('column-name') || "id";
        let order = $(e.target).attr('sort-direction') || "none";

        if (order === "asc") {
            sort_by = "-" + column;
        } else {
            sort_by = "+" + column;
        }

        this.collection.next = null;
        this.collection.fetch({
            reset: true, update: false, remove: true, data: {
                // more: this.capacity()+1,
                cursor: null,
                sort_by: sort_by
            }
        });
    }
});

module.exports = View;


/***/ }),
/* 529 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file descriptorvalueordinal.js
 * @brief Value for a type of descriptor view
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-10-28
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Marionette = __webpack_require__(1);
let Dialog = __webpack_require__(5);

let View = Marionette.View.extend({
    tagName: 'tr',
    className: 'element object descriptor-value',
    template: __webpack_require__(530),

    ui: {
        edit_btn: '.action.edit'
    },

    events: {
        'click @ui.edit_btn': 'onEditValue0'
    },

    behaviors: {
        ActionBtnEvents: {
            behaviorClass: __webpack_require__(8),
            actions: {
                edit: {display: true, title: _t("Edit value0"), event: 'onEditValue0'},
                remove: {display: false}  // remove: {display: true, event: 'deleteDescriptorValue'}
            }
        }
    },

    initialize: function() {
        this.listenTo(this.model, 'change', this.render, this);
    },

    actionsProperties: function() {
        let properties = {
            edit: {disabled: false},
            // remove: {disable: false}
        };

        // @todo check user permissions

        if (!this.getOption('can_modify') || !window.application.permission.manager.isStaff()) {
            properties.edit.disabled = true;
        }

        // if (!this.getOption('can_delete') || !window.application.permission.manager.isStaff()) {
        //     properties.remove.disabled = true;
        // }

        return properties;
    },

    onEditValue0: function() {
        if (this.getOption('can_modify')) {
            let model = this.model;

            if (model.collection.format['trans']) {
                $.ajax({
                    type: "GET",
                    url: this.model.url() + 'value0/',
                    dataType: 'json',
                }).done(function (data) {
                    let values = data;

                    let ChangeValues = Dialog.extend({
                        template: __webpack_require__(53),
                        templateContext: function () {
                            return {
                                values: values,
                            };
                        },

                        attributes: {
                            id: "dlg_change_values",
                        },

                        ui: {
                            value: "#descriptor_value_values input",
                        },

                        events: {
                            'input @ui.value': 'onValueInput',
                        },

                        initialize: function (options) {
                            ChangeValues.__super__.initialize.apply(this);
                        },

                        onValueInput: function (e) {
                            this.validateValue(e);
                        },

                        validateValue: function (e) {
                            let v = $(e.target).val();

                            if (v.length < 1) {
                                $(e.target).validateField('failed', _t('characters_min', {count: 1}));
                                return false;
                            } else if (v.length > 64) {
                                $(e.target).validateField('failed', _t('characters_max', {count: 64}));
                                return false;
                            }

                            $(e.target).validateField('ok');

                            return true;
                        },

                        validateValues: function () {
                            $.each($(this.ui.value), function (i, value) {
                                let v = $(this).val();

                                if (v.length < 3) {
                                    $(this).validateField('failed', _t('characters_min', {count: 3}));
                                    return false;
                                } else if (v.length > 64) {
                                    $(this).validateField('failed', _t('characters_max', {count: 64}));
                                    return false;
                                }
                            });

                            return true;
                        },

                        onApply: function () {
                            let view = this;
                            let model = this.getOption('model');

                            let values = {};

                            $.each($(this.ui.value), function (i, value) {
                                let v = $(this).val();
                                values[$(value).attr("language")] = v;
                            });

                            if (this.validateValues()) {
                                $.ajax({
                                    type: "PUT",
                                    url: model.url() + "value0/",
                                    dataType: 'json',
                                    contentType: "application/json; charset=utf-8",
                                    data: JSON.stringify(values)
                                }).done(function () {
                                    // manually update the current context value
                                    model.set('value0', values[session.language]);
                                    $.alert.success(_t("Successfully valued !"));
                                }).always(function () {
                                    view.destroy();
                                });
                            }
                        },
                    });

                    let changeValues = new ChangeValues({model: model});
                    changeValues.render();
                });
            } else {
                let ChangeLabel = Dialog.extend({
                    template: __webpack_require__(54),

                    attributes: {
                        id: "dlg_change_value",
                    },

                    ui: {
                        value: "#value",
                    },

                    events: {
                        'input @ui.value': 'onValueInput',
                    },

                    initialize: function (options) {
                        ChangeLabel.__super__.initialize.apply(this);

                    },

                    onValueInput: function () {
                        this.validateValue();
                    },

                    validateValue: function () {
                        let v = this.ui.value.val();

                        if (v.length < 1) {
                            $(this.ui.value).validateField('failed', _t('characters_min', {count: 1}));
                            return false;
                        }

                        $(this.ui.value).validateField('ok');

                        return true;
                    },

                    onApply: function () {
                        let view = this;
                        let model = this.getOption('model');

                        if (this.validateValue()) {
                            model.save({value0: this.ui.value.val()}, {
                                patch: true,
                                wait: true,
                                success: function () {
                                    view.destroy();
                                    $.alert.success(_t("Successfully changed !"));
                                },
                                error: function () {
                                    $.alert.error(_t("Unable to change the value !"));
                                }
                            });
                        }
                    }
                });

                let changeLabel = new ChangeLabel({
                    model: this.model,
                });

                changeLabel.render();
                changeLabel.ui.value.val(this.model.get('value0'));
            }
        }
    },
});

module.exports = View;


/***/ }),
/* 530 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<td class="action edit" name="id">' +
__e( id ) +
'</td><td class="action edit" name="ordinal">' +
__e( ordinal ) +
'</td><td class="action edit" name="value0"> ' +
__e( value0 ) +
' </td>';

}
return __p
};

/*
original source:

<td class="action edit" name="id"><%- id %></td><td class="action edit" name="ordinal"><%- ordinal %></td><td class="action edit" name="value0"> <%- value0 %> </td>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 531 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div class="table-advanced-head"><table class="table table-striped descriptor-table table-advanced"><thead><tr scope="row"><th class="unselectable"><span class="action column-sort-id fa fa-sort column-action" column-name="id" column-type="alpha"></span>' +
__e( _t("Code") ) +
' </th><th class="unselectable"><span class="action column-sort-ordinal fa fa-sort column-action" column-name="ordinal" column-type="numeric"></span>' +
__e( _t("Ordinal") ) +
' </th><th class="unselectable"><span class="action column-sort-value0 fa fa-sort column-action" column-name="value0" column-type="alpha"></span>' +
__e( _t(format.fields[0]) || _t("Value0") ) +
' </th></tr></thead></table></div><div class="table-advanced-body"><table class="table table-striped descriptor-table table-advanced"><tbody class="descriptor-value-list"></tbody></table></div>';

}
return __p
};

/*
original source:

<div class="table-advanced-head"><table class="table table-striped descriptor-table table-advanced"><thead><tr scope="row"><th class="unselectable"><span class="action column-sort-id fa fa-sort column-action" column-name="id" column-type="alpha"></span><%- _t("Code") %> </th><th class="unselectable"><span class="action column-sort-ordinal fa fa-sort column-action" column-name="ordinal" column-type="numeric"></span><%- _t("Ordinal") %> </th><th class="unselectable"><span class="action column-sort-value0 fa fa-sort column-action" column-name="value0" column-type="alpha"></span><%- _t(format.fields[0]) || _t("Value0") %> </th></tr></thead></table></div><div class="table-advanced-body"><table class="table table-striped descriptor-table table-advanced"><tbody class="descriptor-value-list"></tbody></table></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 532 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file layout.js
 * @brief Descriptor layout router
 * @author Frédéric SCHERMA (INRA UMR1095), Medhi BOULNEMOUR (INRA UMR1095)
 * @date 2016-10-26
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);
let LayoutModel = __webpack_require__(271);
let LayoutCollection = __webpack_require__(533);
let DescriptorPanelCollection = __webpack_require__(534);
let LayoutAddView = __webpack_require__(536);
let LayoutListView = __webpack_require__(539);
let DefaultLayout = __webpack_require__(3);
let TitleView = __webpack_require__(4);
let ScrollingMoreView = __webpack_require__(10);

let Router = Marionette.AppRouter.extend({
    routes: {
        "app/descriptor/layout/": "getLayoutList",
        "app/descriptor/layout/:id/": "getLayout",
        "app/descriptor/layout/:id/panel/": "getLayoutPanelList"
    },

    getLayoutList: function () {
        let collection = new LayoutCollection();

        let defaultLayout = new DefaultLayout({});
        window.application.main.showContent(defaultLayout);

        defaultLayout.showChildView('title', new TitleView({title: _t("List of layouts")}));

        collection.fetch().then(function () {
            let layoutList = new LayoutListView({collection: collection});
            defaultLayout.showChildView('content', layoutList);
            defaultLayout.showChildView('content-bottom', new ScrollingMoreView({targetView: layoutList}));
        });

        // @todo lookup for permission
        if (window.session.user.isAuth && (window.session.user.isSuperUser || window.session.user.isStaff)) {
            defaultLayout.showChildView('bottom', new LayoutAddView({collection: collection}));
        }
    },

    getLayout: function (id) {
        // Layout details
        // let panelCollection = new DescriptorPanelCollection([], {model_id: id});
        let layout = new LayoutModel({id: id});

        let defaultLayout = new DefaultLayout({});
        window.application.main.showContent(defaultLayout);

        layout.fetch().then(function () {
            defaultLayout.showChildView('title', new TitleView({
                title: _t("Layout details"),
                model: layout
            }));
        });

        let LayoutDetailsView = __webpack_require__(543);
        let layoutDetailView = new LayoutDetailsView({
            model: layout,
        });
        defaultLayout.showChildView('content', layoutDetailView);

        // panelCollection.fetch().then(function () {
        //     let layoutEditor = new LayoutEditor({collection: panelCollection});
        //     defaultLayout.showChildView('content', layoutEditor);
        // });
    },

    getLayoutPanelList: function (id) {
        // Layout editor
        let panelCollection = new DescriptorPanelCollection([], {model_id: id});
        let layout = new LayoutModel({id: id});

        let defaultLayout = new DefaultLayout({});
        window.application.main.showContent(defaultLayout);

        layout.fetch().then(function () {
            defaultLayout.showChildView('title', new TitleView({
                title: _t("Layout editor"),
                model: layout
            }));
        });

        let LayoutEditor = __webpack_require__(545);
        panelCollection.fetch().then(function () {
            let layoutEditor = new LayoutEditor({collection: panelCollection});
            defaultLayout.showChildView('content', layoutEditor);
        });
    },
});

module.exports = Router;


/***/ }),
/* 533 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file layout.js
 * @brief Layout of descriptors collection
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-10-27
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let CountableCollection = __webpack_require__(9);
let LayoutModel = __webpack_require__(271);

let Collection = CountableCollection.extend({
    url: window.application.url(['descriptor', 'layout']),
    model: LayoutModel,
});

module.exports = Collection;


/***/ }),
/* 534 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file descriptorpanel.js
 * @brief Panel of descriptors collection
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-10-27
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let DescriptorPanelModel = __webpack_require__(535);

let Collection = Backbone.Collection.extend({
    url: function() {
        return window.application.url(['descriptor', 'layout', this.model_id, 'panel']);
    },

    model: DescriptorPanelModel,

    initialize: function(models, options) {
        options || (options = {});
        this.model_id = options.model_id;
    },

    parse: function(data) {
        this.prev = data.prev;
        this.cursor = data.cursor;
        this.next = data.next;

        return data.items;
    },

    comparator: 'position'
});

module.exports = Collection;



/***/ }),
/* 535 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file descriptorpanel.js
 * @brief Model of panel of descriptor
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-10-27
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Backbone = __webpack_require__(7);

let Model = Backbone.Model.extend({
    url: function() {
        let model_id = this.model_id || this.get('model') || this.collection.model_id;

        if (this.isNew()) {
            return window.application.url(['descriptor', 'layout', model_id, 'panel']);
        } else {
            return window.application.url(['descriptor', 'layout', model_id, 'panel', this.get('position')]);
        }
    },

    defaults: {
        id: null,
        position: null,
        label: '',
        layout: this.model_id,
    },

    initialize: function(attributes, options) {
        Model.__super__.initialize.apply(this, arguments);

        options || (options = {});

        if (options.collection) {
            this.model_id = options.collection.model_id;
        }
    },

    parse: function(data) {
        //this.perms = data.perms;
        return data;
    },

    validate: function(attrs) {
        let errors = {};
        let hasError = false;

        if (hasError) {
          return errors;
        }
    }
});

module.exports = Model;


/***/ }),
/* 536 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file layoutadd.js
 * @brief Add a layout of descriptor
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-10-26
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Marionette = __webpack_require__(1);
let Dialog = __webpack_require__(5);

let View = Marionette.View.extend({
    tagName: 'div',
    className: 'layout-add',
    template: __webpack_require__(537),

    ui: {
        add: 'span.add-layout',
        name: 'input.layout-name',
    },

    events: {
        'click @ui.add': 'addLayout',
        'input @ui.name': 'onNameInput',
    },

    initialize: function(options) {
        options || (options = {});
        this.collection = options.collection;
    },

    addLayout: function () {
        let LayoutCreateDlg = Dialog.extend({
           template: __webpack_require__(538),

            attributes: {
                id: "dlg_create_layout",
            },

            ui: {
                label: "#label",
                layout_target: "#layout_target",
                description: "#layout_description",
            },

            events: {
                'input @ui.label': 'onLabelInput',
            },

            initialize: function(options) {
                LayoutCreateDlg.__super__.initialize.apply(this);
            },

            onRender: function() {
                LayoutCreateDlg.__super__.onRender.apply(this);
                window.application.descriptor.views.describables.drawSelect(this.ui.layout_target);
            },

            onBeforeDestroy: function() {
                $(this.ui.layout_target).selectpicker('destroy');

                LayoutCreateDlg.__super__.onBeforeDestroy.apply(this);
            },

            onApply: function() {
                if (!this.validateLabel()) {
                    return;
                }

                let view = this;
                let collection = this.getOption('collection');
                let name = this.getOption('name');
                let label = this.ui.label.val();
                let target = this.ui.layout_target.val();
                let description = this.ui.description.val();

                if (target != null) {
                    collection.create({
                        name: name,
                        label: label,
                        target: target,
                        description: description
                    }, {
                        wait: true,
                        success: function () {
                            view.destroy();
                        },
                        error: function () {
                            $.alert.error(_t("Unable to create the layout of descriptor !"));
                        }
                    });
                }
            },

            validateLabel: function() {
                let v = this.ui.label.val();

                if (v.length < 3) {
                    $(this.ui.label).validateField('failed', _t('characters_min', {count: 3}));
                    return false;
                }

                return true;
            },

            onLabelInput: function () {
                if (this.validateLabel()) {
                    $(this.ui.label).validateField('ok');
                }
            }
        });

        if (!this.ui.name.hasClass('invalid') && this.validateName()) {
            let descriptorModelCreate = new LayoutCreateDlg({
                collection: this.collection,
                name: this.ui.name.val()
            });

            $(this.ui.name).cleanField();
            descriptorModelCreate.render();
        }
    },

    validateName: function() {
        let v = this.ui.name.val();
        let re = /^[a-zA-Z0-9_\-]+$/i;

        if (v.length > 0 && !re.test(v)) {
            $(this.ui.name).validateField('failed', _t("Invalid characters (alphanumeric, _ and - only)"));
            return false;
        } else if (v.length < 3) {
            $(this.ui.name).validateField('failed', _t('characters_min', {count: 3}));
            return false;
        }

        return true;
    },

    onNameInput: function () {
        if (this.validateName()) {
            $.ajax({
                type: "GET",
                url: window.application.url(['descriptor', 'layout', 'search']),
                dataType: 'json',
                data: {filters: JSON.stringify({
                    method: 'ieq',
                    fields: 'name',
                    name: this.ui.name.val()})
                },
                el: this.ui.name,
                success: function(data) {
                    if (data.items.length > 0) {
                        for (let i in data.items) {
                            let t = data.items[i];

                            if (t.name.toUpperCase() === this.el.val().toUpperCase()) {
                                $(this.el).validateField('failed', _t('Layout name already in usage'));
                                break;
                            }
                        }
                    } else {
                        $(this.el).validateField('ok');
                    }
                }
            });
        }
    }
});

module.exports = View;


/***/ }),
/* 537 */
/***/ (function(module, exports) {

underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '';
with (obj) {
__p += '<table class="table table-striped" style="margin-bottom: 0px"><tbody><tr class="edit-mode" style="height: 80px"><th><span class="add-layout action fa fa-plus-circle" style="margin-top: 9px; margin-left: 10px"></span></th><td style="width: 100%"><div class="form-group form-group-margin-sm"><input type="text" class="layout-name form-control" name="layout" maxlength="128"></div></td></tr></tbody></table>';

}
return __p
};

/*
original source:

<table class="table table-striped" style="margin-bottom: 0px"><tbody><tr class="edit-mode" style="height: 80px"><th><span class="add-layout action fa fa-plus-circle" style="margin-top: 9px; margin-left: 10px"></span></th><td style="width: 100%"><div class="form-group form-group-margin-sm"><input type="text" class="layout-name form-control" name="layout" maxlength="128"></div></td></tr></tbody></table>
*/


/***/ }),
/* 538 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title">' +
__e( _t("Create a layout of descriptors") ) +
'</h4></div><div class="modal-body"><form><div class="form-group"><label class="control-label" for="layout_target">' +
__e( _t("Target entity") ) +
'</label><select id="layout_target" class="form-control" name="layout-target"></select></div><div class="form-group"><label class="control-label" for="label">' +
__e( _t("Label for the current language") ) +
'</label><input class="form-control" id="label" name="label" maxlength="64" autofocus="" style="width:100%"></div><div class="form-group"><label class="control-label" for="layout_description">' +
__e( _t("Description") ) +
'</label><textarea class="form-control" id="layout_description" name="description" maxlength="1024" style="width:100%"></textarea></div></form></div><div class="modal-footer"><button type="button" class="btn btn-default cancel" data-dismiss="modal">' +
__e( _t("Cancel") ) +
'</button> <button type="button" class="btn btn-success apply">' +
__e( _t("Apply") ) +
'</button></div></div></div>';

}
return __p
};

/*
original source:

<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title"><%- _t("Create a layout of descriptors") %></h4></div><div class="modal-body"><form><div class="form-group"><label class="control-label" for="layout_target"><%- _t("Target entity") %></label><select id="layout_target" class="form-control" name="layout-target"></select></div><div class="form-group"><label class="control-label" for="label"><%- _t("Label for the current language") %></label><input class="form-control" id="label" name="label" maxlength="64" autofocus="" style="width:100%"></div><div class="form-group"><label class="control-label" for="layout_description"><%- _t("Description") %></label><textarea class="form-control" id="layout_description" name="description" maxlength="1024" style="width:100%"></textarea></div></form></div><div class="modal-footer"><button type="button" class="btn btn-default cancel" data-dismiss="modal"><%- _t("Cancel") %></button> <button type="button" class="btn btn-success apply"><%- _t("Apply") %></button></div></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 539 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file layoutlist.js
 * @brief List of layout of descriptors view
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-10-27
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let LayoutView = __webpack_require__(540);
let AdvancedTable = __webpack_require__(6);

let View = AdvancedTable.extend({
    template: __webpack_require__(542),
    className: "object layout-list advanced-table-container",
    childView: LayoutView,
    childViewContainer: 'tbody.layout-list',

    initialize: function() {
        View.__super__.initialize.apply(this);

        this.listenTo(this.collection, 'reset', this.render, this);
    }
});

module.exports = View;



/***/ }),
/* 540 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file layout.js
 * @brief layout of descriptor item view
 * @author Frédéric SCHERMA (INRA UMR1095), Medhi BOULNEMOUR (INRA UMR1095)
 * @date 2016-10-27
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);
// let Dialog = require('../../main/views/dialog');

let View = Marionette.View.extend({
    tagName: 'tr',
    className: 'element object layout',
    template: __webpack_require__(541),

    behaviors: {
        ActionBtnEvents: {
            behaviorClass: __webpack_require__(8),
            actions: {
                edit: {title: _t("Layout editor"), event: 'viewLayoutDetails'},
                // edit2: {display: true, title: _t("Layout editor"), event: 'viewLayoutEditor'},
                tag: {display: true, event: 'editLabel'},
                manage: {display: true, event: 'viewLayoutEditor'},
                remove: {display: true, event: 'deleteLayout'}
            }
        }
    },

    // ui: {
    //     edit_btn: '.action.edit',
    //     tag_btn: '.action.tag',
    //     manage_btn: '.action.manage',
    //     delete_btn: 'button.action.delete'
    // },
    //
    // events: {
    //     // 'click @ui.edit_btn': 'viewLayoutDetails',
    //     'click @ui.tag_btn': 'editLabel',
    //     'click @ui.manage_btn': 'viewDescriptorPanels',
    //     'click @ui.delete_btn': 'deleteLayout'
    // },

    initialize: function (options) {
        View.__super__.initialize.apply(this, arguments);

        this.listenTo(this.model, 'change', this.render, this);
    },

    actionsProperties: function() {
        let properties = {
            edit: {disabled: false},
            remove: {disabled: false}
        };

        if (!window.application.permission.manager.isStaff()) {
            properties.edit.disabled = true;
        }

        // if (this.model.get('num_descriptor_models') > 0 || !session.user.isSuperUser || !session.user.isStaff) {
        //     properties.remove.disabled = true;
        // }

        return properties;
    },

    onRender: function () {
        // localize content-type
        window.application.main.views.contentTypes.htmlFromValue(this.el);
    },

    viewLayoutDetails: function () {
        Backbone.history.navigate("app/descriptor/layout/" + this.model.id + "/", {trigger: true});
    },

    viewLayoutEditor: function () {
        Backbone.history.navigate("app/descriptor/layout/" + this.model.id + "/panel/", {trigger: true});
    },

    deleteLayout: function () {
        // if (this.model.get('num_descriptor_models') === 0) {
        //     this.model.destroy({wait: true});
        // } else {
        //     $.alert.error(_t("It is not permitted to delete a layout of descriptor that contains some panels"));
        // }
        this.model.destroy({wait: true});
    },

    editLabel: function () {
        let ChangeLabel = __webpack_require__(24);
        let changeLabel = new ChangeLabel({
            model: this.model,
            title: _t("Change the labels for the layout")});

        changeLabel.render();

        return false;
    },
});

module.exports = View;


/***/ }),
/* 541 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<td name="description" class="glyph-fixed-column"><span class="fa fa-question-circle" title="' +
__e( description ) +
'" style="cursor: help"></span></td><td class="action edit" name="name">' +
__e( name ) +
'</td><td class="action tag" name="label">' +
__e( label ) +
'</td><td><abbr class="content-type target-content-type" title="' +
__e( target ) +
'" value="' +
__e( target ) +
'"></abbr></td>';

}
return __p
};

/*
original source:

<td name="description" class="glyph-fixed-column"><span class="fa fa-question-circle" title="<%- description %>" style="cursor: help"></span></td><td class="action edit" name="name"><%- name %></td><td class="action tag" name="label"><%- label %></td><td><abbr class="content-type target-content-type" title="<%- target %>" value="<%- target %>"></abbr></td>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 542 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div class="table-advanced-head"><table class="table table-striped table-advanced"><thead><tr scope="row"><th class="glyph-fixed-column"><span class="fa fa-info-circle"></span></th><th class="title-column"><div>' +
__e( _t("Name") ) +
'</div></th><th class="title-column"><div>' +
__e( _t("Label") ) +
'</div></th><th class="title-column"><div>' +
__e( _t("Target") ) +
'</div></th></tr></thead></table></div><div class="table-advanced-body"><table class="table table-striped table-advanced"><tbody class="layout-list"></tbody></table></div>';

}
return __p
};

/*
original source:

<div class="table-advanced-head"><table class="table table-striped table-advanced"><thead><tr scope="row"><th class="glyph-fixed-column"><span class="fa fa-info-circle"></span></th><th class="title-column"><div><%- _t("Name") %></div></th><th class="title-column"><div><%- _t("Label") %></div></th><th class="title-column"><div><%- _t("Target") %></div></th></tr></thead></table></div><div class="table-advanced-body"><table class="table table-striped table-advanced"><tbody class="layout-list"></tbody></table></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 543 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file layoutdetail.js
 * @brief Detail for a layout of descriptor view
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @author Medhi BOULNEMOUR (INRA UMR1095)
 * @date 2016-10-27
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Marionette = __webpack_require__(1);

let View = Marionette.View.extend({
    className: 'object layout-detail',
    template: __webpack_require__(544),

    regions: {
        'content': "div.contextual-region"
    },

    ui: {
        name: '#layout_name',
        description: '#layout_description',
        save: '#save'
    },

    events: {
        'click @ui.save': 'saveLayout',
        'input @ui.name': 'inputName',
    },

    initialize: function() {
        this.listenTo(this.model, 'change', this.render, this);
    },

    onRender: function() {
        let target = this.model.get('target');

        // update the contextual region according to the format
        let Element = window.application.descriptor.layoutTypes.getElement(target);
        if (Element) {
            this.showChildView('content', new Element({model: this.model}));
        } else {
            this.getRegion('content').empty();
        }
    },

    inputName: function () {
        let v = this.ui.name.val();
        let re = /^[a-zA-Z0-9_-]+$/i;

        if (v.length > 0 && !re.test(v)) {
            $(this.ui.name).validateField('failed', _t("Invalid characters (alphanumeric, _ and - only)"));
        } else if (v.length < 3) {
            $(this.ui.name).validateField('failed', _t('characters_min', {count: 3}));
        } else {
            $(this.ui.name).validateField('ok');
        }
    },

    saveLayout: function () {
        if (!$(this.ui.name.isValidField()))
            return;

        let target = this.model.get('target');
        let name = this.ui.name.val();
        let description = this.ui.description.val();

        let parameters = {
            'type': target,
            'data': this.getChildView('content') ? this.getChildView('content').getData() : {}
        };

        this.model.save({
            name: name,
            description: description,
            parameters: parameters
        }, {wait: true}).done(function() { $.alert.success(_t("Done")); });
    }
});

module.exports = View;


/***/ }),
/* 544 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div class="layout-detail col-lg-offset-2 col-lg-8"><div class="layout-name form-group"><label for="layout_name">' +
__e( _t('Layout name') ) +
'</label><input id="layout_name" class="form-control" type="text" maxlength="255" value="' +
__e( name ) +
'"></div><div class="contextual-region"></div><div class="layout-description form-group"><label for="layout_description">' +
__e( _t('Description') ) +
'</label><textarea id="layout_description" class="form-control" maxlength="1024">' +
__e( description ) +
'</textarea></div><div class="layout-update form-group text-center"><button id="save" class="form-control btn btn-success">' +
__e( _t('Update') ) +
'</button></div></div>';

}
return __p
};

/*
original source:

<div class="layout-detail col-lg-offset-2 col-lg-8"><div class="layout-name form-group"><label for="layout_name"><%- _t('Layout name') %></label><input id="layout_name" class="form-control" type="text" maxlength="255" value="<%- name %>"></div><div class="contextual-region"></div><div class="layout-description form-group"><label for="layout_description"><%- _t('Description') %></label><textarea id="layout_description" class="form-control" maxlength="1024"><%- description %></textarea></div><div class="layout-update form-group text-center"><button id="save" class="form-control btn btn-success"><%- _t('Update') %></button></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 545 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file layouteditor.js
 * @brief Editor of descriptors layout
 * @author Medhi BOULNEMOUR (INRA UMR1095)
 * @date 2017-11-27
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);
let Dialog = __webpack_require__(5);
let DescriptorPanelView = __webpack_require__(546);

let View = Marionette.CompositeView.extend({
    template: __webpack_require__(554),
    childView: DescriptorPanelView,
    childViewContainer: 'div.panel-list',

    ui: {
        'add_panel_btn': '.add-panel-btn',
    },

    events: {
        'click @ui.add_panel_btn': 'onAddPanel'
    },

    initialize: function () {
        View.__super__.initialize.apply(this);
        this.listenTo(this.collection, 'reset', this.render, this);
    },

    onRender: function () {

    },

    onAddPanel: function () {
        let AddPanelDialog = Dialog.extend({
            template: __webpack_require__(555),

            ui: {
                'panel_name': '#panel_name',
                'create_btn': 'button.create'
            },

            events: {
                'click @ui.create_btn': 'onCreate',
                'keyup @ui.panel_name': 'onChangePanelName'
            },

            initialize: function () {
                AddPanelDialog.__super__.initialize.apply(this);
            },

            onRender: function () {
                AddPanelDialog.__super__.onRender.apply(this);
            },

            onCreate: function () {
                // todo: Check fields validity

                let view = this;
                view.collection.create({
                    // descriptor_model: model_id,
                    label: view.ui.panel_name.val(),
                    // position: view.collection.length
                }, {
                    wait: true,
                    success: function () {
                        view.destroy();
                    },
                    error: function () {
                        view.destroy();
                    }
                });
            }

        });

        let addPanelDialog = new AddPanelDialog({
            collection: this.collection
        });
        addPanelDialog.render()
    },

    onChildviewHideAddPanelButton: function (childView) {
        this.ui.add_panel_btn.css('opacity', '0');
    },

    onChildviewShowAddPanelButton: function (childView) {
        this.ui.add_panel_btn.css('opacity', '1');
    }
});

module.exports = View;


/***/ }),
/* 546 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {/**
 * @file panel.js
 * @brief Panel of layout item view
 * @author Medhi BOULNEMOUR (INRA UMR1095)
 * @date 2017-11-29
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);
let Dialog = __webpack_require__(5);
let LayoutDescriptorCollection = __webpack_require__(18);
let DescriptorGroupCollection = __webpack_require__(547);
let DescriptorTypeCollection = __webpack_require__(82);
let PanelLayoutDescriptorView = __webpack_require__(549);
let LayoutDescriptorModel = __webpack_require__(223);

let View = Marionette.CompositeView.extend({
        className: 'object descriptor-panel-view',
        template: __webpack_require__(552),
        childView: PanelLayoutDescriptorView,
        childViewContainer: '.descriptor-list',

        ui: {
            'delete_descriptor_panel': '.delete-descriptor-panel',
            'label': '.rename',
            'top_placeholder': 'div.top-placeholder',
            'bottom_placeholder': 'div.bottom-placeholder',
            'drag_zone': 'div.panel-heading',
            "panel_descriptors": '.panel-descriptors',
            'add_btn': '.add-descriptor-btn'
        },

        events: {
            'dragstart': 'dragStart',
            'dragend': 'dragEnd',
            'dragover': 'dragOver',
            'dragenter': 'dragEnter',
            'dragleave': 'dragLeave',
            'drop': 'drop',
            'click @ui.delete_descriptor_panel': 'deleteDescriptorPanel',
            'click @ui.label': 'editLabel',
            'dblclick @ui.drag_zone': 'onDoubleClick',
            'click @ui.add_btn': 'addDescriptor'
        },

        onDoubleClick: function () {
            this.ui.panel_descriptors.collapse('toggle')
        },

        initialize: function (options) {
            this.listenTo(this.model, 'change', this.render, this);
            this.collection = new LayoutDescriptorCollection([], {
                // model_id: this.model.attributes.id,
                model_id: this.model.collection.model_id,
                panel_index: this.model.attributes.id
            });

            // this.listenTo(this.collection, 'add', this.render, this);
            // this.listenTo(this.collection, 'add', this.collection.fetch(), this);
            this.collection.fetch();
        },

        onRender: function () {
            if (!window.application.permission.manager.isStaff()) {
                $(this.ui.delete_descriptor_panel).hide();
            }
        },

        dragStart: function (e) {
            if (e.target.className === 'panel-heading descriptor-panel') {

                // fix for firefox...
                e.originalEvent.dataTransfer.setData('text/plain', null);

                this.$el.css('opacity', '0.4');
                window.application.main.dnd.set(this, 'descriptor-panel');
                this.triggerMethod('hide:addPanelButton', this);
            }
        },

        dragEnd: function (e) {
            this.$el.css('opacity', '1.0');
            window.application.main.dnd.unset();
            this.triggerMethod('show:addPanelButton', this);
        },

        dragEnter: function (e) {
            if (e.originalEvent.preventDefault) {
                e.originalEvent.preventDefault();
            }

            if (window.application.main.dnd.hasView('descriptor-panel')) {

                this.dragEnterCount || (this.dragEnterCount = 0);
                ++this.dragEnterCount;

                if (this.dragEnterCount === 1) {
                    if (window.application.main.dnd.get().$el.hasClass('descriptor-panel-view')) {
                        if (this.model.get('position') < window.application.main.dnd.get().model.get('position')) {
                            this.ui.top_placeholder.css('display', 'block');
                        } else if (this.model.get('position') > window.application.main.dnd.get().model.get('position')) {
                            this.ui.bottom_placeholder.css('display', 'block');
                        }
                    }

                    return false;
                }
            }
        },

        dragLeave: function (e) {
            if (e.originalEvent.preventDefault) {
                e.originalEvent.preventDefault();
            }

            if (window.application.main.dnd.hasView('descriptor-panel')) {

                this.dragEnterCount || (this.dragEnterCount = 1);
                --this.dragEnterCount;

                if (this.dragEnterCount === 0) {

                    if (window.application.main.dnd.get().$el.hasClass('descriptor-panel-view')) {
                        if (this.model.get('position') < window.application.main.dnd.get().model.get('position')) {
                            this.ui.top_placeholder.css('display', 'none');
                        } else if (this.model.get('position') > window.application.main.dnd.get().model.get('position')) {
                            this.ui.bottom_placeholder.css('display', 'none');
                        }
                    }

                    return false;
                }

            }
        },

        dragOver: function (e) {
            if (e.originalEvent.preventDefault) {
                e.originalEvent.preventDefault();
            }

            if (window.application.main.dnd.hasView('descriptor-panel')) {

                this.dragEnterCount || (this.dragEnterCount = 1);

                if (this.dragEnterCount === 1) {
                    if (window.application.main.dnd.get().$el.hasClass('descriptor-panel-view')) {
                        if (this.model.get('position') < window.application.main.dnd.get().model.get('position')) {
                            this.ui.top_placeholder.css('display', 'block');
                        } else if (this.model.get('position') > window.application.main.dnd.get().model.get('position')) {
                            this.ui.bottom_placeholder.css('display', 'block');
                        }
                    }
                }

                //e.originalEvent.dataTransfer.dropEffect = 'move';
                return false;

            }
        },

        drop: function (e) {
            if (e.originalEvent.stopPropagation) {
                e.originalEvent.stopPropagation();
            }

            if (window.application.main.dnd.hasView('descriptor-panel')) {

                this.dragEnterCount = 0;

                let elt = window.application.main.dnd.get();
                if (elt.$el.hasClass('descriptor-panel-view')) {
                    // useless drop on himself
                    if (this === elt) {
                        return false;
                    }

                    // reset placeholder
                    this.ui.top_placeholder.css('display', 'none');
                    this.ui.bottom_placeholder.css('display', 'none');

                    // ajax call
                    let position = elt.model.get('position');
                    let newPosition = this.model.get('position');
                    let modelId = this.model.collection.model_id;
                    let collection = this.model.collection;

                    let self = this;

                    $.ajax({
                        type: "PUT",
                        url: window.application.url(['descriptor', 'layout', modelId, 'panel', 'order']),
                        dataType: 'json',
                        contentType: "application/json; charset=utf-8",
                        data: JSON.stringify({
                            descriptor_panel_id: elt.model.get('id'),
                            position: newPosition
                        })
                    }).done(function () {
                        // server will shift position of any model upward/downward this model
                        // do it locally to be consistent
                        if (newPosition < position) {
                            let to_rshift = [];

                            for (let model in collection.models) {
                                let dmt = collection.models[model];
                                if (dmt.get('id') !== elt.model.get('id')) {
                                    if (dmt.get('position') >= newPosition) {
                                        to_rshift.push(dmt);
                                    }
                                }
                            }

                            elt.model.set('position', newPosition);

                            let nextPosition = newPosition + 1;

                            for (let i = 0; i < to_rshift.length; ++i) {
                                to_rshift[i].set('position', nextPosition);
                                ++nextPosition;
                            }
                        } else {
                            let to_lshift = [];

                            for (let model in collection.models) {
                                let dmt = collection.models[model];
                                if (dmt.get('id') !== elt.model.get('id')) {
                                    if (dmt.get('position') <= newPosition) {
                                        to_lshift.push(dmt);
                                    }
                                }
                            }

                            elt.model.set('position', newPosition);

                            let nextPosition = 0;

                            for (let i = 0; i < to_lshift.length; ++i) {
                                to_lshift[i].set('position', nextPosition);
                                ++nextPosition;
                            }
                        }


                        // need to sort
                        collection.sort();
                        collection.fetch();
                    }).fail(function () {
                        $.alert.error(_t('Unable to reorder the panels of descriptor'));
                    })
                }

                return false;
            }
        },

        editLabel: function () {
            let ChangeLabel = __webpack_require__(24);
            let changeLabel = new ChangeLabel({
                model: this.model,
                title: _t("Change the labels for the panel of descriptor")
            });

            changeLabel.render();

            return false;
        },

        deleteDescriptorPanel: function () {
            let collection = this.model.collection;
            let position = this.model.get('position');

            this.model.destroy({
                wait: true,
                success: function () {
                    for (let model in collection.models) {
                        let dmt = collection.models[model];
                        if (dmt.get('position') > position) {
                            let new_position = dmt.get('position') - 1;
                            dmt.set('position', new_position);
                        }
                    }
                    collection.fetch()
                }
            });
        },

        addDescriptor: function () {
            let AddDescriptorDialog = Dialog.extend({
                template: __webpack_require__(553),

                ui: {
                    'type_select': '#type',
                    'group_select': '#group',
                    'create_btn': 'button.create'
                },

                events: {
                    'click @ui.create_btn': 'onCreate',
                    'change @ui.type_select': 'onChangeType',
                    'keyup @ui.descriptor_label': 'onChangeLabel',
                    'change @ui.descriptor_label': 'onChangeLabel'
                },

                initialize: function (options) {
                    let view = this;
                    AddDescriptorDialog.__super__.initialize.apply(this);
                    this.descriptorGroupCollection = new DescriptorGroupCollection();
                    this.descriptorTypeCollection = new DescriptorTypeCollection();
                    this.layoutDescriptorCollection = new LayoutDescriptorCollection([], {
                        model_id: view.collection.model_id,
                    });
                },

                onRender: function () {
                    AddDescriptorDialog.__super__.onRender.apply(this);

                    let view = this;
                    let panel_descriptors_ids = [];

                    this.layoutDescriptorCollection.fetch().then(function () {
                        panel_descriptors_ids = view.layoutDescriptorCollection.models.map(x => x.id);
                        view.ui.type_select.selectpicker({});

                        view.descriptorGroupCollection.fetch().then(function () {
                            view.ui.type_select.children('option').remove();

                            let fetching;
                            if (panel_descriptors_ids.length) {

                                fetching = view.descriptorTypeCollection.fetch({
                                    data: {
                                        more: 0,
                                        search: '[{"type":"term","field": "id", "value": [' + panel_descriptors_ids.join(',') + '], "op":"notin"}]'
                                    }
                                });
                            } else {
                                fetching = view.descriptorTypeCollection.fetch({data: {more: 0}});
                            }

                            fetching.then(function () {
                                // Create drop-down descriptor groups
                                let i;
                                let opt_group_list = [];
                                for (i = 0; i < view.descriptorGroupCollection.length; i++) {
                                    let group_name = view.descriptorGroupCollection.models[i].attributes.group_name[0];

                                    if (!group_name) {
                                        group_name = _t('Unclassified');
                                    }

                                    let found = opt_group_list.find(function (element) {
                                        return element.name === group_name;
                                    });

                                    if (!found) {
                                        let opt_group = $('<optgroup></optgroup>');
                                        opt_group.attr('label', group_name);
                                        opt_group_list.push({
                                            name: group_name,
                                            el: opt_group
                                        });
                                    }
                                }

                                // Create descriptor options
                                let j;
                                for (j = 0; j < view.descriptorTypeCollection.length; j++) {
                                    let opt = $('<option></option>');
                                    opt.attr('value', JSON.stringify([
                                        view.descriptorTypeCollection.models[j].attributes.name,
                                        view.descriptorTypeCollection.models[j].attributes.id
                                    ]));
                                    opt.attr('data-tokens', view.descriptorTypeCollection.models[j].attributes.label + ',' + view.descriptorTypeCollection.models[j].attributes.name + ',' + view.descriptorTypeCollection.models[j].attributes.group_name);
                                    opt.html('<strong>' + view.descriptorTypeCollection.models[j].attributes.label + '</strong> <span class="text-muted">' + view.descriptorTypeCollection.models[j].attributes.name + '</span>');
                                    let opt_group = _.findWhere(opt_group_list, {name: view.descriptorTypeCollection.models[j].attributes.group_name || _t('Unclassified')});
                                    opt.appendTo(opt_group.el)
                                }

                                // Add descriptor groups to the selectpicker
                                let k;
                                for (k = 0; k < opt_group_list.length; k++) {
                                    opt_group_list[k].el.appendTo(view.ui.type_select);
                                }
                                view.ui.type_select.selectpicker('refresh');
                            })
                        })
                    })


                },

                onCreate: function () {
                    // todo: Check fields validity

                    let view = this;

                    let selected_values = view.ui.type_select.val();

                    let saveLayoutDescriptors = function (i) {
                        if (i < selected_values.length) {
                            let data = selected_values[i];
                            let option_values = JSON.parse(data);

                            let DescriptorModel = __webpack_require__(40);

                            let descriptorModel = new DescriptorModel({
                                id: option_values[1]
                            });

                            descriptorModel.fetch().then(function () {
                                let layoutDescriptor = new LayoutDescriptorModel({
                                    name: descriptorModel.get('name'),
                                    label: descriptorModel.get('label'),
                                    condition: null,
                                    position: view.collection.length
                                }, {
                                    collection: view.collection
                                });

                                view.collection.create(layoutDescriptor, {
                                    success: function () {
                                        i++;
                                        saveLayoutDescriptors(i)
                                    }
                                })
                            });

                        }
                    };

                    saveLayoutDescriptors(0);
                    addDescriptorDialog.destroy();
                }
            });

            let addDescriptorDialog = new AddDescriptorDialog({
                collection: this.collection,
            });
            addDescriptorDialog.render();
        },

        onChildviewHideAddButton: function (childView) {
            this.triggerMethod('hide:addPanelButton', this);
            this.ui.add_btn.css('opacity', '0');
        }
        ,

        onChildviewShowAddButton: function (childView) {
            this.triggerMethod('show:addPanelButton', this);
            this.ui.add_btn.css('opacity', '1');
        }
    })
;

module.exports = View;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 547 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file descriptorgroup.js
 * @brief Groups of descriptors collection
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-07-19
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let CountableCollection = __webpack_require__(9);
let DescriptorGroupModel = __webpack_require__(548);

let Collection = CountableCollection.extend({
    url: window.application.url(['descriptor', 'descriptor', 'group']),
    model: DescriptorGroupModel,

    // comparator: function (item1, item2) {
    //     let item1Name = item1.get('name');
    //     let item2Name = item2.get('name');
    //
    //     return item1Name.localeCompare(item2Name /*, locale*/);
    // }
});

module.exports = Collection;


/***/ }),
/* 548 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file descriptorgroup.js
 * @brief Group of descriptors model
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-07-20
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Backbone = __webpack_require__(7);

let Model = Backbone.Model.extend({
    url: function() {
        if (this.isNew())
            return window.application.url(['descriptor', 'descriptor', 'group']);
        else
            return window.application.url(['descriptor', 'descriptor', 'group', this.get('id')]);
    },

    defaults: {
        group_name: ''
    },

    parse: function(data) {
        //this.perms = data.perms;
        return data;
    },

    validate: function(attrs) {
        let errors = {};
        let hasError = false;

        if (hasError) {
          return errors;
        }
    },
});

module.exports = Model;



/***/ }),
/* 549 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file paneldescriptor.js
 * @brief Panel descriptor
 * @author Medhi BOULNEMOUR (INRA UMR1095)
 * @date 2017-11-27
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);
let Dialog = __webpack_require__(5);
let DescriptorModel = __webpack_require__(40);
let LayoutDescriptorCollection = __webpack_require__(18);

let View = Marionette.View.extend({
    className: 'descriptor-view',
    template: __webpack_require__(550),

    ui: {
        'delete_descriptor_model_type': '.delete-descriptor',
        'name': '[name="name"]',
        'label': '[name="label"]',
        'mandatory': '[name="mandatory"]',
        'set_once': '[name="set_once"]',
        'condition': '[name="condition"]',
        // 'index': '[name="index"]',
        'top_placeholder': 'li.descriptor-top-placeholder',
        'bottom_placeholder': 'li.descriptor-bottom-placeholder',
    },

    events: {
        'dragstart': 'dragStart',
        'dragend': 'dragEnd',
        'dragover': 'dragOver',
        'dragenter': 'dragEnter',
        'dragleave': 'dragLeave',
        'drop': 'drop',
        'click @ui.delete_descriptor_model_type': 'deleteDescriptor',
        'click @ui.name': 'rename',
        'click @ui.label': 'editLabel',
        'click @ui.mandatory': 'toggleMandatory',
        'click @ui.set_once': 'toggleSetOnce',
        'click @ui.condition': 'editCondition',
        // 'click @ui.index': 'changeIndex'
    },

    initialize: function (options) {
        View.__super__.initialize.apply(this, arguments);

        this.listenTo(this.model, 'change', this.render, this);
    },

    onRender: function () {
        if (!session.user.isStaff && !session.user.isSuperUser) {
            $(this.ui.delete_descriptor_model_type).hide();
        }
    },

    dragStart: function (e) {
        if (e.target.classList[1] === 'descriptor-type') {
            // fix for firefox...
            e.originalEvent.dataTransfer.setData('text/plain', null);

            this.$el.css('opacity', '0.4');
            window.application.main.dnd.set(this, 'descriptor-type');
            this.triggerMethod('hide:addButton', this);
        }
    },

    dragEnd: function (e) {
        this.$el.css('opacity', '1.0');
        window.application.main.dnd.unset();
        this.triggerMethod('show:addButton', this);
    },

    dragOver: function (e) {
        if (e.originalEvent.preventDefault) {
            e.originalEvent.preventDefault();
        }

        if (window.application.main.dnd.hasView('descriptor-type')) {
            //e.originalEvent.dataTransfer.dropEffect = 'move';
            return false;
        }
    },

    dragEnter: function (e) {
        if (e.originalEvent.preventDefault) {
            e.originalEvent.preventDefault();
        }

        if (window.application.main.dnd.hasView('descriptor-type')) {

            this.dragEnterCount || (this.dragEnterCount = 0);
            ++this.dragEnterCount;

            if (this.dragEnterCount === 1) {

                if (window.application.main.dnd.get().$el.hasClass('descriptor-view')) {
                    if (this.model.get('position') < window.application.main.dnd.get().model.get('position')) {
                        this.ui.top_placeholder.css('display', 'block');
                    } else if (this.model.get('position') > window.application.main.dnd.get().model.get('position')) {
                        this.ui.bottom_placeholder.css('display', 'block');
                    } else if (this.model.get('panel_index') !== window.application.main.dnd.get().model.get('panel_index')) {
                        this.ui.top_placeholder.css('display', 'block');
                    }
                }

                return false;
            }
        }
    },

    dragLeave: function (e) {

        if (e.originalEvent.preventDefault) {
            e.originalEvent.preventDefault();
        }

        if (window.application.main.dnd.hasView('descriptor-type')) {

            this.dragEnterCount || (this.dragEnterCount = 1);
            --this.dragEnterCount;

            if (this.dragEnterCount === 0) {
                if (window.application.main.dnd.get().$el.hasClass('descriptor-view')) {
                    if (this.model.get('position') < window.application.main.dnd.get().model.get('position')) {
                        this.ui.top_placeholder.css('display', 'none');
                    } else if (this.model.get('position') > window.application.main.dnd.get().model.get('position')) {
                        this.ui.bottom_placeholder.css('display', 'none');
                    } else if (this.model.get('panel_index') !== window.application.main.dnd.get().model.get('panel_index')) {
                        this.ui.top_placeholder.css('display', 'none');
                    }
                }
                return false;
            }
        }
    },

    drop: function (e) {
        if (window.application.main.dnd.hasView('descriptor-type')) {
            if (e.originalEvent.stopPropagation) {
                e.originalEvent.stopPropagation();
            }

            this.dragEnterCount = 0;

            let elt = window.application.main.dnd.get();
            if (elt.$el.hasClass('descriptor-view')) {
                // useless drop on himself
                if (this === elt) {
                    return false;
                }

                // reset borders
                this.ui.top_placeholder.css('display', 'none');
                this.ui.bottom_placeholder.css('display', 'none');

                // ajax call
                let collection = this.model.collection;
                let current_position = elt.model.get('position');
                let current_panel = elt.model.collection.panel_index;
                let new_position = this.model.get('position');
                let new_panel = this.model.collection.panel_index;


                $.ajax({
                    type: "PUT",
                    url: window.application.url(['descriptor', 'layout', this.model.collection.model_id, 'descriptor', 'order']),
                    dataType: 'json',
                    contentType: "application/json; charset=utf-8",
                    data: JSON.stringify({
                        current_position: current_position,
                        new_position: new_position,
                        current_panel: current_panel,
                        new_panel: new_panel
                    })
                }).done(function () {
                    collection.fetch();
                    elt.model.collection.fetch();
                }).fail(function () {
                    $.alert.error(_t('Unable to reorder the types of model of descriptor'));
                })
            }

            return false;
        }
    },

    rename: function () {
        if (!session.user.isSuperUser || !session.user.isStaff) {
            return;
        }

        let ChangeName = __webpack_require__(20);
        let changeName = new ChangeName({
            model: this.model,
            title: _t("Rename the type of model of descriptors")
        });

        changeName.render();
        changeName.ui.name.val(this.model.get('name'));

        return false;
    },

    editLabel: function () {
        let ChangeLabel = __webpack_require__(24);
        let changeLabel = new ChangeLabel({
            model: this.model,
            title: _t("Change the labels for the type of model of descriptor")
        });

        changeLabel.render();

        return false;
    },

    toggleMandatory: function () {
        if (!this.model.get('conditions') || !this.model.get('mandatory')) {
            this.model.save({mandatory: !this.model.get('mandatory')}, {patch: true, wait: true});
        }
    },

    toggleSetOnce: function () {
        this.model.save({set_once: !this.model.get('set_once')}, {patch: true, wait: true});
    },

    deleteDescriptor: function () {
        let collection = this.model.collection;
        let position = this.model.get('position');

        this.model.destroy({
            wait: true,
            success: function () {
                for (let model in collection.models) {
                    let dmt = collection.models[model];
                    if (dmt.get('position') > position) {
                        let new_position = dmt.get('position') - 1;
                        dmt.set('position', new_position);
                    }
                }
            }
        });
    },

    editCondition: function () {
        // alert("todo")
        let model = this.model;

        $.ajax({
            type: "GET",
            url: this.model.url() + 'condition/',
            dataType: 'json'
        }).done(function (data) {
            let condition = data;

            let ChangeCondition = Dialog.extend({
                template: __webpack_require__(551),
                templateContext: function () {
                    return {
                        targets: this.collection.models,
                        condition: condition
                    };
                },

                attributes: {
                    id: "dlg_change_condition"
                },

                ui: {
                    condition: "#condition",
                    target: "#target",
                    condition_values: "div.condition-values",
                    destroy: "button.destroy"
                },

                events: {
                    'change @ui.condition': 'onSelectCondition',
                    'change @ui.target': 'onSelectTarget',
                    'click @ui.destroy': 'onDestroyCondition'
                },

                initialize: function (options) {
                    ChangeCondition.__super__.initialize.apply(this);
                },

                onRender: function () {
                    ChangeCondition.__super__.onRender.apply(this);
                    window.application.descriptor.views.conditions.drawSelect(this.ui.condition);

                    $(this.ui.target).selectpicker({container: 'body', style: 'btn-default'});

                    // initial values set after getting them from dropdown or autocomplete initialization
                    let condition = this.getOption('condition');
                    if (condition) {
                        this.definesValues = true;
                        this.defaultValues = condition.values;

                        /** @namespace condition.target_name */
                        let targetModel = this.collection.findWhere({name: condition.target_name});

                        this.ui.target.val(targetModel.get('id')).trigger('change');
                        this.ui.condition.val(condition.condition).trigger('change');
                    } else {
                        this.onSelectCondition();
                        this.onSelectTarget();
                    }
                },

                onBeforeDestroy: function () {
                    this.ui.target.selectpicker('destroy');
                    this.ui.condition.selectpicker('destroy');

                    if (this.descriptor && this.descriptor.widget) {
                        this.descriptor.widget.destroy();
                        this.descriptor.widget = null;
                    }

                    ChangeCondition.__super__.onBeforeDestroy.apply(this);
                },

                toggleCondition: function (condition) {
                    if (condition === 0 || condition === 1) {
                        this.ui.condition_values.hide(false);
                    } else {
                        this.ui.condition_values.show(false);
                    }
                },

                onSelectCondition: function () {
                    let val = parseInt(this.ui.condition.val());
                    this.toggleCondition(val);
                },

                onSelectTarget: function () {
                    let view = this;
                    let targetId = this.ui.target.val();

                    let model = this.collection.findWhere({id: parseInt(targetId)});
                    if (model) {
                        // destroy an older widget and label
                        if (this.descriptor && this.descriptor.widget) {
                            this.descriptor.widget.destroy();
                            this.ui.condition_values.children('label').remove();
                        }

                        this.descriptor = new DescriptorModel(
                            {id: model.get('id')},
                            {group_name: model.get('group_name')}
                        );

                        this.descriptor.fetch().then(function () {
                            let format = view.descriptor.get('format');

                            let condition = parseInt(view.ui.condition.val());
                            view.toggleCondition(condition);

                            // unit label
                            let unit = format.unit === "custom" ? 'custom_unit' in format ? format.custom_unit : "" : format.unit;

                            if (unit !== "") {
                                let label = $('<label class="control-label">' + _t("Value") + '&nbsp;<span>(' + unit + ')</span></label>');
                                view.ui.condition_values.append(label);
                            } else {
                                let label = $('<label class="control-label">' + _t("Value") + '</label>');
                                view.ui.condition_values.append(label);
                            }

                            let widget = window.application.descriptor.widgets.newElement(format.type);
                            widget.create(format, view.ui.condition_values, {
                                readOnly: false,
                                descriptorId: view.descriptor.id
                            });

                            if (view.definesValues) {
                                widget.set(format, view.definesValues, view.defaultValues, {
                                    descriptorId: view.descriptor.id
                                });
                            }

                            // save the descriptor format type widget instance
                            view.descriptor.widget = widget;

                            if (view.definesValues) {
                                view.definesValues = false;
                                view.defaultValues = null;
                            }
                        });
                    }
                },

                onDestroyCondition: function () {
                    let view = this;
                    let model = this.getOption('model');
                    let condition = this.getOption('condition');

                    // destroy the widget
                    if (this.descriptor && this.descriptor.widget) {
                        this.descriptor.widget.destroy();
                        this.descriptor.widget = null;
                    }

                    $.ajax({
                        type: "DELETE",
                        url: model.url() + "condition/",
                        contentType: "application/json; charset=utf-8"
                    }).done(function () {
                        $.alert.success(_t("Successfully removed !"));
                        model.set('condition', null)
                    }).always(function () {
                        view.destroy();
                    });
                },

                onApply: function () {
                    let view = this;
                    let model = this.getOption('model');
                    let condition = this.getOption('condition');

                    let data = {
                        target: parseInt(this.ui.target.val()),
                        condition: parseInt(this.ui.condition.val())
                    };

                    if (!this.descriptor || !this.descriptor.widget) {
                        return this.onDestroyCondition();
                    }

                    if (data.condition === 2 || data.condition === 3) {
                        data.values = this.descriptor.widget.values();
                    } else {
                        data.values = null;
                    }

                    // destroy the widget
                    // this.descriptor.widget.destroy();

                    // depending if the condition previously existed: post or put.
                    if (condition) {
                        $.ajax({
                            type: "PUT",
                            url: model.url() + "condition/",
                            dataType: 'json',
                            contentType: "application/json; charset=utf-8",
                            data: JSON.stringify(data)
                        }).done(function (result) {
                            $.alert.success(_t("Successfully defined !"));
                            model.set('condition', result)
                        }).always(function () {
                            view.destroy();
                        });
                    } else {
                        $.ajax({
                            type: "POST",
                            url: model.url() + "condition/",
                            dataType: 'json',
                            contentType: "application/json; charset=utf-8",
                            data: JSON.stringify(data)
                        }).done(function (result) {
                            $.alert.success(_t("Successfully defined !"));
                            model.set('condition', result)
                        }).always(function () {
                            view.destroy();
                        });
                    }
                }
            });

            let descriptorTargetCollection = new LayoutDescriptorCollection([], {
                model_id: model.collection.model_id,
            });

            descriptorTargetCollection.fetch().then(function () {
                let changeCondition = new ChangeCondition({
                    model: model,
                    condition: condition,
                    collection: descriptorTargetCollection
                });
                changeCondition.render();
            });
        });
    }
});

module.exports = View;


/***/ }),
/* 550 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
with (obj) {
__p += '<li class="list-group-item descriptor-top-placeholder" style="border: 2px dashed lightgray; background-color: whitesmoke; color: lightgray; display: none"><div style="text-align: center !important"><span class="fa fa-lg fa-angle-double-down faa-vertical animated"></span></div></li><li class="list-group-item descriptor-type" draggable="true"><span class="delete-descriptor-model-type action fa fa-minus-circle"></span> ' +
__e( label ) +
' <div class="pull-right"> ';
 if (mandatory) { ;
__p += ' <span name="mandatory" class="action fa fa-asterisk"></span> ';
 } else { ;
__p += ' <span name="mandatory" style="color: #0000001a" class="action fa fa-asterisk"></span> ';
 } ;
__p += ' ';
 if (set_once) { ;
__p += ' <span name="set_once" class="action fa fa-ban"></span> ';
 } else { ;
__p += ' <span name="set_once" style="color: #0000001a" class="action fa fa-ban"></span> ';
 } ;
__p += ' ';
 if (condition) { ;
__p += ' <span name="condition" class="action fa fa-wrench"></span> ';
 } else { ;
__p += ' <span name="condition" style="color: #0000001a" class="action fa fa-wrench"></span> ';
 } ;
__p += ' </div></li><li class="list-group-item descriptor-bottom-placeholder" style="border: 2px dashed lightgray; background-color: whitesmoke; color: lightgray; display: none"><div style="text-align: center !important"><span class="fa fa-lg fa-angle-double-down faa-vertical animated"></span></div></li>';

}
return __p
};

/*
original source:

<li class="list-group-item descriptor-top-placeholder" style="border: 2px dashed lightgray; background-color: whitesmoke; color: lightgray; display: none"><div style="text-align: center !important"><span class="fa fa-lg fa-angle-double-down faa-vertical animated"></span></div></li><li class="list-group-item descriptor-type" draggable="true"><span class="delete-descriptor-model-type action fa fa-minus-circle"></span> <%- label %> <div class="pull-right"> <% if (mandatory) { %> <span name="mandatory" class="action fa fa-asterisk"></span> <% } else { %> <span name="mandatory" style="color: #0000001a" class="action fa fa-asterisk"></span> <% } %> <% if (set_once) { %> <span name="set_once" class="action fa fa-ban"></span> <% } else { %> <span name="set_once" style="color: #0000001a" class="action fa fa-ban"></span> <% } %> <% if (condition) { %> <span name="condition" class="action fa fa-wrench"></span> <% } else { %> <span name="condition" style="color: #0000001a" class="action fa fa-wrench"></span> <% } %> </div></li><li class="list-group-item descriptor-bottom-placeholder" style="border: 2px dashed lightgray; background-color: whitesmoke; color: lightgray; display: none"><div style="text-align: center !important"><span class="fa fa-lg fa-angle-double-down faa-vertical animated"></span></div></li>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 551 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
with (obj) {
__p += '<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title">' +
__e( _t("Descriptor condition") ) +
'</h4></div><div class="modal-body" style="max-height: 400px; overflow-y: auto"><form><div class="form-group"><label class="control-label">' +
__e( _t("Target") ) +
'</label><select class="form-control" id="target"><option value="undefined"></option> ';
 _.each(targets, function(target) { ;
__p += ' ';
 if (target.get('id') != id) { ;
__p += ' <option value="' +
__e( target.get('id') ) +
'">' +
__e( target.get('label') ) +
'</option> ';
 } ;
__p += ' ';
 }) ;
__p += ' </select></div><div class="form-group"><label for="condition" class="control-label">' +
__e( _t("Condition") ) +
'</label><select id="condition" class="form-control"></select></div><div class="condition-values"></div></form></div><div class="modal-footer"><button type="button" class="btn btn-danger destroy pull-left">' +
__e( _t("Remove condition") ) +
'</button> <button type="button" class="btn btn-default cancel" data-dismiss="modal">' +
__e( _t("Cancel") ) +
'</button> <button type="button" class="btn btn-success apply">' +
__e( _t("Apply") ) +
'</button></div></div></div>';

}
return __p
};

/*
original source:

<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title"><%- _t("Descriptor condition") %></h4></div><div class="modal-body" style="max-height: 400px; overflow-y: auto"><form><div class="form-group"><label class="control-label"><%- _t("Target") %></label><select class="form-control" id="target"><option value="undefined"></option> <% _.each(targets, function(target) { %> <% if (target.get('id') != id) { %> <option value="<%- target.get('id') %>"><%- target.get('label') %></option> <% } %> <% }) %> </select></div><div class="form-group"><label for="condition" class="control-label"><%- _t("Condition") %></label><select id="condition" class="form-control"></select></div><div class="condition-values"></div></form></div><div class="modal-footer"><button type="button" class="btn btn-danger destroy pull-left"><%- _t("Remove condition") %></button> <button type="button" class="btn btn-default cancel" data-dismiss="modal"><%- _t("Cancel") %></button> <button type="button" class="btn btn-success apply"><%- _t("Apply") %></button></div></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 552 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div class="panel panel-ghost top-placeholder" style="border-radius: 8px; margin: 0 5px; display: none; background-color: whitesmoke"><div class="panel-body center-block" style="text-align: center"><h4>' +
__e( _t("Move it to..") ) +
'</h4><span class="fa fa-3x fa-angle-double-down faa-vertical animated"></span></div></div><div class="panel panel-editable" style="margin: 10px 5px"><div class="panel-heading descriptor-panel" draggable="true"><span style="margin-right: 5px"><span class="fa fa-lg fa-ellipsis-v" style="color: gray"></span> <span class="fa fa-lg fa-ellipsis-v" style="color: gray"></span> </span><span name="label" class="action rename">' +
__e( label ) +
'</span><span class="action change-label label-placeholder" style="color: #ddd">' +
__e( _t("Undefined label") ) +
'</span><div class="pull-right"><div class="btn-group btn-group-sm"><a class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" title="' +
__e( _t('Panel configuration') ) +
'"><span class="action fa fa-lg fa-cog" style="color: gray"></span></a><ul class="dropdown-menu dropdown-menu-right"><li><a class="action rename">' +
__e( _t("Rename") ) +
'</a></li><li role="separator" class="divider"></li><li><a class="action delete-descriptor-panel">' +
__e( _t("Remove") ) +
'</a></li></ul></div><a class="accordion-toggle" data-toggle="collapse" href="#collapse' +
__e( id ) +
'" style="margin-left: 20px" aria-expanded="true" aria-controls="collapse' +
__e( id ) +
'"></a></div></div><div class="panel-body collapse in panel-descriptors" id="collapse' +
__e( id ) +
'"><div><ul class="list-group descriptor-list" style="margin-bottom: 5px"></ul><div class="panel panel-ghost add-descriptor-btn" style="border-radius: 0 0 15px 15px"><div class="panel-body center-block"><span class="fa fa-lg fa-plus"></span></div></div></div></div></div><div class="panel panel-ghost bottom-placeholder" style="border-radius: 8px; margin: 10px 5px; display: none; background-color: whitesmoke"><div class="panel-body center-block" style="text-align: center"><h4>' +
__e( _t("Move it to..") ) +
'</h4><span class="fa fa-3x fa-angle-double-down faa-vertical animated"></span></div></div>';

}
return __p
};

/*
original source:

<div class="panel panel-ghost top-placeholder" style="border-radius: 8px; margin: 0 5px; display: none; background-color: whitesmoke"><div class="panel-body center-block" style="text-align: center"><h4><%- _t("Move it to..") %></h4><span class="fa fa-3x fa-angle-double-down faa-vertical animated"></span></div></div><div class="panel panel-editable" style="margin: 10px 5px"><div class="panel-heading descriptor-panel" draggable="true"><span style="margin-right: 5px"><span class="fa fa-lg fa-ellipsis-v" style="color: gray"></span> <span class="fa fa-lg fa-ellipsis-v" style="color: gray"></span> </span><span name="label" class="action rename"><%- label %></span><span class="action change-label label-placeholder" style="color: #ddd"><%- _t("Undefined label") %></span><div class="pull-right"><div class="btn-group btn-group-sm"><a class="dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" title="<%- _t('Panel configuration') %>"><span class="action fa fa-lg fa-cog" style="color: gray"></span></a><ul class="dropdown-menu dropdown-menu-right"><li><a class="action rename"><%- _t("Rename") %></a></li><li role="separator" class="divider"></li><li><a class="action delete-descriptor-panel"><%- _t("Remove") %></a></li></ul></div><a class="accordion-toggle" data-toggle="collapse" href="#collapse<%- id %>" style="margin-left: 20px" aria-expanded="true" aria-controls="collapse<%- id %>"></a></div></div><div class="panel-body collapse in panel-descriptors" id="collapse<%- id %>"><div><ul class="list-group descriptor-list" style="margin-bottom: 5px"></ul><div class="panel panel-ghost add-descriptor-btn" style="border-radius: 0 0 15px 15px"><div class="panel-body center-block"><span class="fa fa-lg fa-plus"></span></div></div></div></div></div><div class="panel panel-ghost bottom-placeholder" style="border-radius: 8px; margin: 10px 5px; display: none; background-color: whitesmoke"><div class="panel-body center-block" style="text-align: center"><h4><%- _t("Move it to..") %></h4><span class="fa fa-3x fa-angle-double-down faa-vertical animated"></span></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 553 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title">' +
__e( _t("Add descriptor") ) +
'</h4></div><div class="modal-body"><form><div class="descriptor-type form-group"><label class="control-label" for="type">' +
__e( _t("Descriptor") ) +
'</label><select class="form-control model" id="type" name="type" data-live-search="true" multiple="multiple" data-actions-box="true"></select></div></form></div><div class="modal-footer"><button type="button" class="btn btn-default cancel" data-dismiss="modal">' +
__e( _t("Cancel") ) +
'</button> <button type="button" class="btn btn-success create">' +
__e( _t("Add") ) +
'</button></div></div></div>';

}
return __p
};

/*
original source:

<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title"><%- _t("Add descriptor") %></h4></div><div class="modal-body"><form><div class="descriptor-type form-group"><label class="control-label" for="type"><%- _t("Descriptor") %></label><select class="form-control model" id="type" name="type" data-live-search="true" multiple="multiple" data-actions-box="true"></select></div></form></div><div class="modal-footer"><button type="button" class="btn btn-default cancel" data-dismiss="modal"><%- _t("Cancel") %></button> <button type="button" class="btn btn-success create"><%- _t("Add") %></button></div></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 554 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<h4><span class="fa fa-list-alt"></span> ' +
__e( _t("Panels of descriptor") ) +
'</h4><hr><div class="panel-list"></div><div class="panel panel-ghost add-panel-btn" style="border-radius: 8px; margin: 0 5px"><div class="panel-heading"> ' +
__e( _t("Add new panel") ) +
' </div><div class="panel-body center-block"><span class="fa fa-lg fa-plus"></span></div></div>';

}
return __p
};

/*
original source:

<h4><span class="fa fa-list-alt"></span> <%- _t("Panels of descriptor") %></h4><hr><div class="panel-list"></div><div class="panel panel-ghost add-panel-btn" style="border-radius: 8px; margin: 0 5px"><div class="panel-heading"> <%- _t("Add new panel") %> </div><div class="panel-body center-block"><span class="fa fa-lg fa-plus"></span></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 555 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title">' +
__e( _t("New panel") ) +
'</h4></div><div class="modal-body"><form><div class="panel-name form-group"><label for="panel_name">' +
__e( _t('Panel name') ) +
'</label><input id="panel_name" class="form-control" type="text" maxlength="255" value=""></div></form></div><div class="modal-footer"><button type="button" class="btn btn-default cancel" data-dismiss="modal">' +
__e( _t("Cancel") ) +
'</button> <button type="button" class="btn btn-success create">' +
__e( _t("Create") ) +
'</button></div></div></div>';

}
return __p
};

/*
original source:

<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title"><%- _t("New panel") %></h4></div><div class="modal-body"><form><div class="panel-name form-group"><label for="panel_name"><%- _t('Panel name') %></label><input id="panel_name" class="form-control" type="text" maxlength="255" value=""></div></form></div><div class="modal-footer"><button type="button" class="btn btn-default cancel" data-dismiss="modal"><%- _t("Cancel") %></button> <button type="button" class="btn btn-success create"><%- _t("Create") %></button></div></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 556 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file indexation.js
 * @brief
 * @author Medhi BOULNEMOUR (INRA UMR1095)
 * @date 2018-02-15
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);

let DefaultLayout = __webpack_require__(3);
let TitleView = __webpack_require__(4);
let ScrollingMoreView = __webpack_require__(10);
let EntityListFilterView = __webpack_require__(14);

let IndexCollection = __webpack_require__(557);
let IndexListView = __webpack_require__(558);

let Router = Marionette.AppRouter.extend({
    routes: {
        "app/descriptor/index/": "getIndexList",
        // "app/descriptor/index/:id/": "getIndex",
    },

    getIndexList: function (options) {
        options || (options = {});

        let collection = new IndexCollection([], {
            filters: (options.filters || {}),
            search: (options.search || {})
        });

        let defaultLayout = new DefaultLayout({});
        window.application.main.showContent(defaultLayout);
        defaultLayout.showChildView('title', new TitleView({title: _t("List of descriptor indexes")}));

        // get available columns
        let columns = window.application.main.cache.lookup({
            type: 'entity_columns',
            format: {model: 'descriptor.descriptorindex'}
        });

        columns.done(function (data) {
            let indexListView = new IndexListView({read_only: true, collection: collection, columns: data[0].value});

            defaultLayout.showChildView('content', indexListView);
            defaultLayout.showChildView('content-bottom', new ScrollingMoreView({
                targetView: indexListView,
                collection: collection
            }));

            defaultLayout.showChildView('bottom', new EntityListFilterView({
                collection: collection, columns: data[0].value
            }));

            indexListView.query();
        });
    },

    // getIndex : function(tid) {
    //     let defaultLayout = new DefaultLayout();
    //     window.application.main.showContent(defaultLayout);
    //
    //     // let model = new DescriptorModel({id: tid});
    //     //
    //     // model.fetch().then(function () {
    //     //     defaultLayout.showChildView('title', new TitleView({title: _t("Details for the descriptor index"), model: model}));
    //         // defaultLayout.showChildView('content', new DescriptorLayout({model: model, initialTab: tab.replace('/', '')}));
    //     // });
    // },
});

module.exports = Router;

/***/ }),
/* 557 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file index.js
 * @brief Collection of descriptor indexes
 * @author Medhi BOULNEMOUR (INRA UMR1095)
 * @date 2018-02-19
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let IndexModel = __webpack_require__(272);
let CountableCollection = __webpack_require__(9);

let Collection = CountableCollection.extend({
    url: function() {
        return window.application.url(['descriptor', 'index']);
    },
    model: IndexModel
});

module.exports = Collection;

/***/ }),
/* 558 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {/**
 * @file descriptorindexlist.js
 * @brief list of indexes
 * @author Medhi BOULNEMOUR (INRA UMR1095)
 * @date 2018-02-19
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let DescriptorIndexView = __webpack_require__(559);
let AdvancedTable = __webpack_require__(6);
let DescriptorsColumnsView = __webpack_require__(11);

let View = AdvancedTable.extend({
    className: "object index-list advanced-table-container",
    childView: DescriptorIndexView,
    userSettingName: 'index_list_columns',
    userSettingVersion: '1.5',

    defaultColumns: [
        // {name: 'select', width: 'auto', sort_by: null},
        {name: 'descriptor', width: 'auto', sort_by: '+0'},
        {name: 'target', width: 'auto', sort_by: null},
        {name: 'type', width: 'auto', sort_by: null},
    ],
    //
    // columnsOptions: {
    //     // 'select': {
    //     //     label: '',
    //     //     width: 'auto',
    //     //     type: 'checkbox',
    //     //     glyphicon: ['fa-square-o', 'fa-square-o'],
    //     //     // event: 'accession-select',
    //     //     fixed: true
    //     // },
    //     'code': {label: _t('Code'), width: 'auto', minWidth: true, event: 'view-descriptor-details'},
    //     'name': {label: _t('Name'), width: 'auto', minWidth: true, event: 'view-descriptor-details'},
    //     'label': {label: _t('Label'), width: 'auto', minWidth: true, event: 'view-descriptor-details'},
    // },

    initialize: function (options) {
        View.__super__.initialize.apply(this, arguments);
        this.filters = this.getOption('filters');
    },

    onRender: function () {
        View.__super__.onRender.apply(this, arguments);
        this.onShowTab();
    },

    onShowTab: function () {
        let view = this;

        let contextLayout = window.application.getView().getChildView('right');
        if (!contextLayout) {
            let DefaultLayout = __webpack_require__(3);
            contextLayout = new DefaultLayout();
            window.application.getView().showChildView('right', contextLayout);
        }

        let TitleView = __webpack_require__(4);
        contextLayout.showChildView('title', new TitleView({
            title: _t("Actions on indexes"),
            glyphicon: 'fa-wrench'
        }));

        let actions = [
            'create-index'
        ];

        let ListContextView = __webpack_require__(560);
        let contextView = new ListContextView({actions: actions});
        contextLayout.showChildView('content', contextView);

        contextView.on("index:create", function () {
            view.onCreateIndex();
        });

        View.__super__.onShowTab.apply(this, arguments);
    },

    onBeforeDetach: function () {
        window.application.main.defaultRightView();
    },

    onCreateIndex: function () {
        window.application.descriptor.controllers.index.create(this.collection);
    }
});

// support of descriptors columns extension
_.extend(View.prototype, DescriptorsColumnsView);

module.exports = View;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 559 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file descriptorindex.js
 * @brief Index item view
 * @author Medhi BOULNEMOUR (INRA UMR1095)
 * @date 2018-02-19
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);

let View = Marionette.View.extend({
    tagName: 'tr',
    className: 'element object index',
    template: __webpack_require__(12),
    templateContext: function () {
        return {
            columnsList: this.getOption('columnsList'),
            columnsOptions: this.getOption('columnsOptions')
        }
    },

    ui: {
        delete_btn: '.action.delete',
        // edit_btn: '.action.edit',
        // manage_btn: '.action.manage'
    },

    events: {
        'click @ui.delete_btn': 'deleteIndex',
        // 'click @ui.edit_btn': 'viewDescriptor',
        // 'click @ui.manage_btn': 'viewDescriptorValue'
    },

    behaviors: {
        ActionBtnEvents: {
            behaviorClass: __webpack_require__(8),
            actions: {
                // tag: {display: true, event: 'changeLabel'},
                // edit: {display: true, event: 'viewDescriptor'},
                // manage: {display: true, event: 'viewDescriptorValue'},
                remove: {display: true, event: 'deleteIndex'}
            }
        }
    },

    initialize: function() {
        this.listenTo(this.model, 'change', this.render, this);
    },

    actionsProperties: function() {
        let properties = {
            edit: {disabled: false},
            manage: {disabled: false},
            remove: {disabled: false}
        };

        // // @todo check user permissions
        //
        // if (!this.model.get('can_modify') || !session.user.isSuperUser || !session.user.isStaff) {
        //     // properties.edit.disabled = true;
        // }
        //
        // if (!_.contains(['enum_single', 'enum_pair', 'enum_ordinal'], this.model.get('format').type)) {
        //     properties.manage.disabled = true;
        // }
        //
        // if (!this.model.get('can_delete') || !session.user.isSuperUser || !session.user.isStaff) {
        //     properties.remove.disabled = true;
        // }

        if (!window.application.permission.manager.isStaff()) {
            properties.remove.disabled = true;
        }

        return properties;
    },

    onRender: function() {
        if (!window.application.permission.manager.isStaff()) {
            $(this.ui.delete_btn).hide();
        }
    },

    // viewDescriptorIndex: function() {
    //     Backbone.history.navigate("app/descriptor/index/" + this.model.id + "/", {trigger: true});
    //     return false;
    // },

    deleteIndex: function () {
        // todo: Alert user only if the descriptor is used

        // old version:
        // if (this.model.get('num_descriptor_values') === 0) {
            this.model.destroy({wait: true});
        // } else {
        //     $.alert.error(_t("Some values exists for this type of descriptor"));
        // }

        // window.application.descriptor.controllers.index.delete(this.model);
    }
});

module.exports = View;


/***/ }),
/* 560 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file indexlistcontext.js
 * @brief index list context menu
 * @author Medhi BOULNEMOUR (INRA UMR1095)
 * @date 2018-02-20
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);

let View = Marionette.View.extend({
    tagName: 'div',
    template: __webpack_require__(15),
    className: "context index-list",
    templateContext: function () {
        return {
            actions: this.getOption('actions'),
            options: {
                'create-index': {className: 'btn-default', label: _t('Create index')},
                // 'update-descriptor': {className: 'btn-success', label: _t('Update')},
                // 'apply-descriptor': {className: 'btn-success', label: _t('Apply')},
                // 'cancel-descriptor': {className: 'btn-default', label: _t('Cancel')}
            }
        }
    },

    ui: {
        'create-index': 'button[name="create-index"]',
        // 'update-descriptor': 'button[name="update-descriptor"]',
        // 'apply-descriptor': 'button[name="apply-descriptor"]',
        // 'cancel-descriptor': 'button[name="cancel-descriptor"]'
    },

    triggers: {
        "click @ui.create-index": "index:create",
        // "click @ui.update-descriptor": "descriptor:update",
        // "click @ui.apply-descriptor": "descriptor:apply",
        // "click @ui.cancel-descriptor": "descriptor:cancel"
    },

    initialize: function(options) {
        options || (options = {actions: []});
    }
});

module.exports = View;

/***/ }),
/* 561 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {/**
 * @file descriptor.js
 * @brief Descriptor controller
 * @author Medhi BOULNEMOUR (INRA UMR1095)
 * @date 2018-01-12
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);

let DescriptorModel = __webpack_require__(40);

let DefaultLayout = __webpack_require__(3);
let TitleView = __webpack_require__(4);
let Dialog = __webpack_require__(5);

let DescriptorLayout = __webpack_require__(269);

let Controller = Marionette.Object.extend({

    deleteModel: function (model) {
        let DeletePanelDialog = Dialog.extend({
            template: __webpack_require__(50),
            templateContext: function () {
                return {
                    title: _t("Delete descriptor"),
                    message: _t("Some values might exist for this descriptor." +
                        " Do you really want to delete this descriptor anyway?"),
                    confirm_txt: _("Yes"),
                    confirm_class: 'danger',
                    cancel_txt: _("No"),
                    cancel_class: 'default'
                }
            },
            ui: {
                confirm: "button.confirm"
            },
            events: {
                'click @ui.confirm': 'onDelete'
            },

            initialize: function () {
                DeletePanelDialog.__super__.initialize.apply(this);
            },

            onDelete: function () {
                model.destroy({wait: true});
                this.destroy();
                return false;
            }

        });

        let deletePanelDialog = new DeletePanelDialog();
        deletePanelDialog.render();
    },

    create: function () {
        let CreateDescriptorDialog = Dialog.extend({
            attributes: {
                'id': 'dlg_create_descriptor'
            },
            template: __webpack_require__(562),

            ui: {
                validate: "button.continue",
                name: "input[name=name]",
                label: "input[name=label]"
            },

            events: {
                'click @ui.validate': 'onContinue',
                'input @ui.name': 'onNameInput',
                'input @ui.label': 'onLabelInput'
            },

            onNameInput: function () {
                let name = this.ui.name.val().trim();
                let self = this;

                if (this.validateName()) {
                    let filters = {
                        method: 'ieq',
                        fields: ['name'],
                        'name': name
                    };

                    $.ajax({
                        type: "GET",
                        url: window.application.url(['descriptor', 'descriptor', 'search']),
                        dataType: 'json',
                        contentType: 'application/json; charset=utf8',
                        data: {filters: JSON.stringify(filters)},
                    }).done(function (data) {
                        for (let i in data.items) {
                            let descriptor = data.items[i];

                            if (descriptor.name.toUpperCase() === name.toUpperCase()) {
                                self.ui.name.validateField('failed', _t('Name already used'));
                                return;
                            }
                        }
                        self.ui.name.validateField('ok');
                    });
                }
            },

            onLabelInput: function () {

            },

            validateName: function () {
                let v = this.ui.name.val().trim();

                if (v.length > 128) {
                    this.ui.name.validateField('failed', _t('characters_max', {count: 128}));
                    return false;
                } else if (v.length < 1) {
                    this.ui.name.validateField('failed', _t('characters_min', {count: 1}));
                    return false;
                }

                return true;
            },

            validateLabel: function () {
                let v = this.ui.name.val().trim();

                if (v.length > 128) {
                    this.ui.label.validateField('failed', _t('characters_max', {count: 128}));
                    return false;
                } else if (v.length < 1) {
                    this.ui.label.validateField('failed', _t('characters_min', {count: 1}));
                    return false;
                }

                return true;
            },

            validate: function () {
                let valid = this.validateName();

                if (this.ui.name.hasClass('invalid') ||
                    this.ui.label.hasClass('invalid')) {
                    valid = false;
                }

                return valid;
            },

            onContinue: function () {
                let view = this;

                if (this.validate()) {
                    let name = this.ui.name.val().trim();
                    let label = this.ui.label.val().trim();

                    // create a new local model and open an edit view with this model
                    let model = new DescriptorModel({
                        name: name,
                        label: label
                    });

                    view.destroy();

                    let defaultLayout = new DefaultLayout();
                    application.main.showContent(defaultLayout);

                    defaultLayout.showChildView('title', new TitleView({
                        title: _t("Descriptor"),
                        model: model
                    }));

                    let descriptorLayout = new DescriptorLayout({model: model});
                    defaultLayout.showChildView('content', descriptorLayout);
                }
            }
        });

        let createDescriptorView = new CreateDescriptorDialog();
        createDescriptorView.render();
    }
});

module.exports = Controller;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 562 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title">' +
__e( _t("Create a descriptor") ) +
'</h4></div><div class="modal-body"><form><div class="row"><div class="col-xs-12"><div class="form-group"><label class="control-label">' +
__e( _t("Name") ) +
'</label><input class="form-control" name="name" type="text" value="" maxlength="128" autocomplete="off" autofocus="" style="width:100%"></div></div></div><div class="row"><div class="col-xs-12"><div class="form-group"><label class="control-label">' +
__e( _t("Label for current language") ) +
'</label><input class="form-control" name="label" type="text" value="" maxlength="128" autocomplete="off" autofocus="" style="width:100%"></div></div></div></form></div><div class="modal-footer"><button type="button" class="btn btn-default cancel" data-dismiss="modal">' +
__e( _t("Cancel") ) +
'</button> <button type="button" class="btn btn-success continue">' +
__e( _t("Continue") ) +
'</button></div></div></div>';

}
return __p
};

/*
original source:

<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title"><%- _t("Create a descriptor") %></h4></div><div class="modal-body"><form><div class="row"><div class="col-xs-12"><div class="form-group"><label class="control-label"><%- _t("Name") %></label><input class="form-control" name="name" type="text" value="" maxlength="128" autocomplete="off" autofocus="" style="width:100%"></div></div></div><div class="row"><div class="col-xs-12"><div class="form-group"><label class="control-label"><%- _t("Label for current language") %></label><input class="form-control" name="label" type="text" value="" maxlength="128" autocomplete="off" autofocus="" style="width:100%"></div></div></div></form></div><div class="modal-footer"><button type="button" class="btn btn-default cancel" data-dismiss="modal"><%- _t("Cancel") %></button> <button type="button" class="btn btn-success continue"><%- _t("Continue") %></button></div></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 563 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {/**
 * @file index.js.js
 * @brief Index controller
 * @author Medhi BOULNEMOUR (INRA UMR1095)
 * @date 2018-02-20
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */


let Marionette = __webpack_require__(1);
let IndexModel = __webpack_require__(272);
let Dialog = __webpack_require__(5);

let Controller = Marionette.Object.extend({

    create: function (collection) {
        let CreateIndexDialog = Dialog.extend({
            attributes: {
                'id': 'dlg_create_index'
            },
            template: __webpack_require__(564),

            ui: {
                descriptor: "select[name=descriptor]",
                target: "select[name=target]",
                type: "select[name=type]",
                validate: "button.create"
            },

            events: {
                'click @ui.validate': 'onCreate'
            },

            onRender: function () {
                CreateIndexDialog.__super__.onRender.apply(this);

                // let DescriptorCollection = require('');
                // window.application.collections.describables

                window.application.descriptor.views.describables.drawSelect(this.ui.target);
                this.ui.type.selectpicker({});

                this.ui.descriptor.selectpicker({});

                // let SelectOption = require('../../main/renderers/selectoption');
                // new SelectOption({
                //     className: 'descriptor',
                //     collection: window.application.descriptor.collections.descriptors,
                // }).drawSelect(this.ui.descriptor);

                let descriptorCollection = window.application.descriptor.collections.descriptors;
                let descriptor_select = this.ui.descriptor;

                descriptorCollection.fetch({data: {more: 0}}).then(function () {
                    // Create drop-down descriptor groups
                    let i;
                    let opt_group_list = [];
                    for (i = 0; i < descriptorCollection.length; i++) {
                        let group_name = descriptorCollection.models[i].get('group_name');

                        if (!group_name) {
                            group_name = _t('Unclassified');
                        }

                        let found = opt_group_list.find(function (element) {
                            return element.name === group_name;
                        });

                        if (!found) {
                            let opt_group = $('<optgroup></optgroup>');
                            opt_group.attr('label', group_name);
                            opt_group_list.push({
                                name: group_name,
                                el: opt_group
                            });
                        }
                    }

                    // Create descriptor options
                    let j;
                    for (j = 0; j < descriptorCollection.length; j++) {
                        let opt = $('<option></option>');
                        opt.attr('value', JSON.stringify([
                            descriptorCollection.models[j].get('name'),
                            descriptorCollection.models[j].get('id')
                        ]));
                        opt.attr('data-tokens', descriptorCollection.models[j].get('label') + ',' + descriptorCollection.models[j].get('name') + ',' + descriptorCollection.models[j].get('group_name'));
                        opt.html('<strong>' + descriptorCollection.models[j].get('label') + '</strong> <span class="text-muted">' + descriptorCollection.models[j].get('name') + '</span>');
                        let opt_group = _.findWhere(opt_group_list, {name: (descriptorCollection.models[j].get('group_name') || _t('Unclassified'))});
                        opt.appendTo(opt_group.el)
                    }

                    // Add descriptor groups to the selectpicker
                    let k;
                    for (k = 0; k < opt_group_list.length; k++) {
                        opt_group_list[k].el.appendTo(descriptor_select);
                    }
                    descriptor_select.selectpicker('refresh');
                });


            },

            onCreate: function () {
                let model = new IndexModel({
                    type: JSON.parse(this.ui.type.val()),
                    descriptor: JSON.parse(this.ui.descriptor.val())[1],
                    target: this.ui.target.val()
                });
                this.collection.create(model, {wait: true});
                this.destroy();
            }
        });

        let createIndexView = new CreateIndexDialog({
            collection: collection
        });
        createIndexView.render();
    }
});

module.exports = Controller;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 564 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title">' +
__e( _t("Create an index for a descriptor") ) +
'</h4></div><div class="modal-body"><form><div class="descriptor form-group"><label class="control-label" for="descriptor">' +
__e( _t("Descriptor") ) +
'</label><select class="form-control model" id="descriptor" name="descriptor" data-live-search="true"></select></div><div class="target form-group"><label class="control-label" for="target">' +
__e( _t("Target") ) +
'</label><select class="form-control model" id="target" name="target"></select></div><div class="type form-group"><label class="control-label" for="type">' +
__e( _t("Type") ) +
'</label><select class="form-control model" id="type" name="type"><option value="1">Unique-BTree</option><option value="2">BTree</option><option value="3">GIN</option><option value="4">GIST</option></select></div></form></div><div class="modal-footer"><button type="button" class="btn btn-default cancel" data-dismiss="modal">' +
__e( _t("Cancel") ) +
'</button> <button type="button" class="btn btn-success create">' +
__e( _t("Create") ) +
'</button></div></div></div>';

}
return __p
};

/*
original source:

<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title"><%- _t("Create an index for a descriptor") %></h4></div><div class="modal-body"><form><div class="descriptor form-group"><label class="control-label" for="descriptor"><%- _t("Descriptor") %></label><select class="form-control model" id="descriptor" name="descriptor" data-live-search="true"></select></div><div class="target form-group"><label class="control-label" for="target"><%- _t("Target") %></label><select class="form-control model" id="target" name="target"></select></div><div class="type form-group"><label class="control-label" for="type"><%- _t("Type") %></label><select class="form-control model" id="type" name="type"><option value="1">Unique-BTree</option><option value="2">BTree</option><option value="3">GIN</option><option value="4">GIST</option></select></div></form></div><div class="modal-footer"><button type="button" class="btn btn-default cancel" data-dismiss="modal"><%- _t("Cancel") %></button> <button type="button" class="btn btn-success create"><%- _t("Create") %></button></div></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 565 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file init.js
 * @brief Geolocation module init entry point
 * @author Medhi BOULNEMOUR (INRA UMR1095)
 * @date 2017-02-23
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let GeolocationModule = function() {
    this.name = "geolocation";
};

GeolocationModule.prototype = {
    initialize: function(app, options) {

        this.models = {};
        this.collections = {};
        this.views = {};
        this.routers = {};
        this.controllers = {};

        try {
            i18next.default.addResources(session.language, 'default', __webpack_require__(566)("./" + session.language + '/default.json'));
        } catch (e) {
            console.warn("No translation found for the current language. Fallback to english language");
        }

        //
        // descriptor format types
        //

        // register the format type of descriptors
        let widgets = [
            'country',
            'city'
        ];

        for (let i = 0; i < widgets.length; ++i) {
            let moduleName = widgets[i];
            application.descriptor.widgets.registerElement(widgets[i], __webpack_require__(569)("./" + moduleName));
        }

        //
        // routers
        //
    },

    start: function(app, options) {
        // nothing to do
    },

    stop: function(app, options) {
    }
};

module.exports = GeolocationModule;


/***/ }),
/* 566 */
/***/ (function(module, exports, __webpack_require__) {

var map = {
	"./en/default.json": 567,
	"./fr/default.json": 568
};
function webpackContext(req) {
	return __webpack_require__(webpackContextResolve(req));
};
function webpackContextResolve(req) {
	var id = map[req];
	if(!(id + 1)) // check for number or string
		throw new Error("Cannot find module '" + req + "'.");
	return id;
};
webpackContext.keys = function webpackContextKeys() {
	return Object.keys(map);
};
webpackContext.resolve = webpackContextResolve;
module.exports = webpackContext;
webpackContext.id = 566;

/***/ }),
/* 567 */
/***/ (function(module, exports) {

module.exports = {"Enter a value.":"Saisissez une valeur","Extended search...":"Étendre la recherche..."}

/***/ }),
/* 568 */
/***/ (function(module, exports) {

module.exports = {"Enter a value.":"Saisissez une valeur","Extended search...":"Étendre la recherche..."}

/***/ }),
/* 569 */
/***/ (function(module, exports, __webpack_require__) {

var map = {
	"./city": 273,
	"./city.js": 273,
	"./country": 274,
	"./country.js": 274
};
function webpackContext(req) {
	return __webpack_require__(webpackContextResolve(req));
};
function webpackContextResolve(req) {
	var id = map[req];
	if(!(id + 1)) // check for number or string
		throw new Error("Cannot find module '" + req + "'.");
	return id;
};
webpackContext.keys = function webpackContextKeys() {
	return Object.keys(map);
};
webpackContext.resolve = webpackContextResolve;
module.exports = webpackContext;
webpackContext.id = 569;

/***/ }),
/* 570 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file init.js
 * @brief Main module init entry point
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-04-12
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

// style
__webpack_require__(571);

// jQuery functionality
__webpack_require__(572);
__webpack_require__(573);

let MainModule = function() {
    this.name = "main";
    this.application = null;
};

MainModule.prototype = {
    initialize : function(app, options) {
        //let deferred = $.Deferred();
        //this.loaded = deferred.promise();

        this.application = app;

        this.models = {};
        this.collections = {};
        this.views = {};
        this.routers = {};

        try {
            window.i18next.default.addResources(
                window.session.language, 'default', __webpack_require__(574)("./" + window.session.language + '/default.json'));
        } catch (e) {
            console.warn("No translation found for the current language.");
        }

        //
        // defaults settings
        //

        app.setDefaultUserSetting('ui', {
            display_mode: '2-8-2',
            preferred_language: 'en'
        }, '1.0');

        //
        // routers
        //

        let MainRouter = __webpack_require__(577);
        this.routers.main = new MainRouter();

        let ProfileRouter = __webpack_require__(612);
        this.routers.profile = new ProfileRouter();

        //
        // utils
        //

        // global cache manager
        let Cache = __webpack_require__(616);
        this.cache = new Cache();
        this.cache.register('main');
        this.cache.register('entity');
        this.cache.register('entity_columns');

        let EntityCacheFetcher = __webpack_require__(617);
        this.cache.registerFetcher(new EntityCacheFetcher());

        // temporary dictionary
        this.tmp = {};

        //
        // collections
        //

        let SelectOption = __webpack_require__(19);

        // cached collection for data languages
        let LanguageCollection = __webpack_require__(618);
        this.collections.languages = new LanguageCollection();

        this.views.languages = new SelectOption({
            className: 'language',
            collection: this.collections.languages
        });

        let InterfaceLanguageCollection = __webpack_require__(620);
        this.collections.uilanguages = new InterfaceLanguageCollection();

        this.views.uilanguages = new SelectOption({
            className: 'ui-language',
            collection: this.collections.uilanguages
        });

        let ContentTypeCollection = __webpack_require__(622);
        this.collections.contentTypes = new ContentTypeCollection();

        this.views.contentTypes = new SelectOption({
            className: 'content-type',
            collection: this.collections.contentTypes
        });

        let EntitySynonymTypeCollection = __webpack_require__(276);
        this.collections.entitySynonymTypes = new EntitySynonymTypeCollection();

        this.views.entitySynonymTypes = new SelectOption({
            className: 'entity-synonym-type',
            collection: this.collections.entitySynonymTypes
        });

        // @todo should be on home view only...
        let EventMessageCollection = __webpack_require__(624);
        this.collections.eventMessages = new EventMessageCollection();

        // drag'n'drop manager
        let DragAndDrop = __webpack_require__(626);
        this.dnd = new DragAndDrop();

        // global menu manager
        let MenuManager = __webpack_require__(627);
        this.menus = new MenuManager($('ul.application-menu'));

        // cleanup initial menu
        this.menus.destroy();

        // and add them initiated by django server side
        if (typeof window.session.initialsMenus !== "undefined") {
            let Menu = __webpack_require__(278);
            let MenuEntry = __webpack_require__(253);
            let MenuSeparator = __webpack_require__(80);

            for (let i = 0; i < window.session.initialsMenus.length; ++i) {
                let iMenu = window.session.initialsMenus[i];

                // menu
                let menu = new Menu(iMenu.name, iMenu.label, iMenu.order, iMenu.auth);

                // and entries
                for (let j = 0; j < iMenu.entries.length; ++j) {
                    let iMenuEntry = iMenu.entries[j];

                    if (iMenuEntry.type === 'entry') {
                        let menuEntry = new MenuEntry(
                            iMenuEntry.name,
                            iMenuEntry.label,
                            iMenuEntry.url,
                            iMenuEntry.icon,
                            iMenuEntry.order,
                            iMenuEntry.auth);

                        menu.addEntry(menuEntry);
                    } else if (iMenuEntry.type === 'separator') {
                        let menuSeparator = new MenuSeparator(iMenuEntry.order, iMenuEntry.auth);
                        menu.addEntry(menuSeparator);
                    }
                }

                this.menus.addMenu(menu);
            }
        }
    },

    start: function(app, options) {
        //
        // main view
        //
        let MainView = __webpack_require__(628);
        let mainView = new MainView();
        app.showView(mainView);

        let LeftBarView = __webpack_require__(279);
        mainView.showChildView('left', new LeftBarView());

        // render menus
        this.menus.render();

        // messenger web-socket
        let Messenger = __webpack_require__(631);
        this.messenger = new Messenger();

        if (window.session.user.isAuth) {
            this.messenger.connect();
        }
    },

    stop: function(app, options) {
        if (this.messenger) {
            this.messenger.disconnect();
        }
    },

    /**
     * Setup the default left view, meaning the left bar view.
     */
    defaultLeftView: function() {
        let mainView = this.application.getView();

        let LeftBarView = __webpack_require__(279);
        mainView.showChildView('left', new LeftBarView());
    },

    /**
     * Get current left view.
     */
    getLeftView: function() {
        let mainView = this.application.getView();
        return mainView.getChildView('left');
    },

    /**
     * Setup the default right view, meaning an empty area.
     */
    defaultRightView: function() {
        let mainView = this.application.getView();
        mainView.getRegion('right').empty();
    },

    /**
     * Get current right view.
     */
    getRightView: function() {
        let mainView = this.application.getView();
        return mainView.getChildView('right');
    },

    /**
     * Manage a body glass-pane element. The glass-pane is shown if foo is set to 'show', and 'destroy' remove it from
     * the body. Default behavior is to remove it on click event.
     * @param foo 'show' or 'destroy' or nothing to simply get the element.
     * @returns {*|jQuery|HTMLElement}
     */
    glassPane: function(foo, options) {
        options || (options = {});

        if (!this.glassPaneElement) {
            this.glassPaneElement = $('<div class="glasspane glasspane-full"></div>');
        }

        if (foo === 'show' && $('body').children('div.glasspane').length === 0) {
            $('body').append(this.glassPaneElement);

            if ("opacity" in options) {
                this.glassPaneElement.css('opacity', options.opacity);
            }

            this.glassPaneElement.on('click', function() {
                // remove and all bound events
                $(this).remove();
                return true;
            });
        } else if (foo === 'destroy' && $('body').children('div.glasspane').length !== 0) {
            this.glassPaneElement.remove();
        }

        return this.glassPaneElement;
    },

    /**
     * Check whether if a given view is on foreground or not.
     * @param view Valid view to check.
     * @returns {boolean} True is the view is on foreground (no model upside, or glass pane)
     */
    isForeground: function(view) {
        let body = $('body');

        if ((body.children('div.modal-backdrop.in').length && !view.$el.closest('div.modal.in').length) ||
            body.children('div.glasspane').length) {
            return false;
        }

        return true;
    },

    /**
     * Show a view into the content region of the main view.
     * @param view
     */
    showContent: function(view) {
        return window.application.getView().showChildView('content', view);
    },

    /**
     * Get the view of the content region of the main view.
     * @returns Marionette.View or undefined
     */
    viewContent: function() {
        return window.application.getView().getChildView('content');
    }
};

module.exports = MainModule;


/***/ }),
/* 571 */
/***/ (function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__(84);
if(typeof content === 'string') content = [[module.i, content, '']];
// Prepare cssTransformation
var transform;

var options = {"hmr":true}
options.transform = transform
// add the styles to the DOM
var update = __webpack_require__(22)(content, options);
if(content.locals) module.exports = content.locals;
// Hot Module Replacement
if(true) {
	// When the styles change, update the <style> tags
	if(!content.locals) {
		module.hot.accept(84, function() {
			var newContent = __webpack_require__(84);
			if(typeof newContent === 'string') newContent = [[module.i, newContent, '']];
			update(newContent);
		});
	}
	// When the module is disposed, remove the <style> tags
	module.hot.dispose(function() { update(); });
}

/***/ }),
/* 572 */
/***/ (function(module, exports) {

/**
 * @file popover.js
 * @brief Initiate a bootstrap popover into a parent element.
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-09-11
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

(function($) {
    // @todo for now once async initialisation, manual update, could be more synced to cache invalidation
    // @todo could be merger into asyncvalue with a popover option (style)
    $.fn.popupcell = function (method, options) {
        options || (options = {});

        this.each(function() {
            let el = $(this);

            if (method === 'init') {
                // batch over children having span.className
                if (options.children) {
                    let spans = el.find('span.' + options.className);
                    let values = [];

                    spans.each(function(i, element) {
                        let span = $(this);

                        values.push(span.attr('value'));

                        span.attr('data-type', options.type);
                        span.attr('data-placement', 'bottom');
                        span.data('data-format', options.format);
                    });

                    // process mouseover on the container to avoid multiple initializations
                    el.one('mouseover', function (e) {
                        application.main.cache.lookup({
                            type: options.type,
                            format: options.format
                        }, values).done(function (data) {
                            // init each popover span
                            spans.each(function(i, element) {
                                let span = $(this);
                                let value = parseInt(span.attr('value'));

                                span.attr('data-content', data[value].value.label);
                                span.popover({'trigger': 'hover'});

                                // manually show it if still hover once data is synced
                                if (span.is(':hover')) {
                                    span.popover('show');
                                }
                            });
                        });
                    });
                } else {
                    let span = el.children('span.' + options.className);
                    let created = false;

                    if (!span.length) {
                        span = $('<span class="popover-dismiss" data-toggle="popover" data-popupcell="managed" data-placement="bottom" data-container="body" data-content="" value="">' + (options.label || "") + '</span>');
                        created = true;

                        if (options.className) {
                            span.addClass(options.className);
                        }
                    }

                    if ("value" in options) {
                        span.attr('value', options.value);
                    }

                    span.attr('data-type', options.type);
                    span.data('data-format', options.format);

                    if (created) {
                        el.html(span);
                    }

                    span.one('mouseover', function (e) {
                        let el = $(this);
                        let value = parseInt(el.attr('value'));

                        if (Number.isInteger(value)) {
                            application.main.cache.lookup({
                                type: el.attr('data-type'),
                                format: el.data('data-format')
                            }, [value]).done(function (data) {
                                el.attr('data-content', data[value].value.label);
                                el.popover({'trigger': 'hover'});

                                // manually show it if still hover once data is synced
                                if (el.is(':hover')) {
                                    el.popover('show');
                                }
                            });
                        }
                    });
                }
            } else if (method === 'update') {
                let value = parseInt(el.attr('value'));

                if (Number.isInteger(value)) {
                    application.main.cache.lookup({
                        type: el.attr('data-type'),
                        format: el.data('data-format')
                    }, [value]).done(function (data) {
                        el.attr('data-content', data[value].value.label);
                    });
                }
            } else if (method === 'destroy') {
                if (el.attr('data-popupcell') === 'managed') {
                    el.children('span').popover('destroy').destroy();
                }
            }
        });

        return this;
    };
})(jQuery);


/***/ }),
/* 573 */
/***/ (function(module, exports) {

/**
 * @file asyncvalue.js
 * @brief Initiate a html content into an element asynchronously using cache mechanism et dynamic data access.
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-09-12
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

(function($) {
    // @todo for now once async initialisation, manual update, could be more synced to cache invalidation
    $.fn.asyncvalue = function (method, options) {
        options || (options = {});

        this.each(function() {
            let el = $(this);

            if (method === 'init') {
                // batch over children having span.className
                if (options.children) {
                    let spans = el.find('span.' + options.className);
                    let values = [];

                    spans.each(function(i, element) {
                        let span = $(this);

                        values.push(span.attr('value'));

                        span.attr('data-type', options.type);
                        span.data('data-format', options.format);
                    });

                    application.main.cache.lookup({
                        type: options.type,
                        format: options.format
                    }, values).done(function (data) {
                        // init each popover span
                        spans.each(function(i, element) {
                            let span = $(this);
                            let value = parseInt(span.attr('value'));

                            span.html(data[value].value.label);
                        });
                    });
                } else {
                    let span = el.children('span.' + options.className);
                    let created = false;

                    if (!span.length) {
                        span = $('<span class="async-value" value="" data-async-value="managed">' + (options.label || "") + '</span>');
                        created = true;

                        if (options.className) {
                            span.addClass(options.className);
                        }
                    }

                    if ("value" in options) {
                        span.attr('value', options.value);
                    }

                    span.attr('data-type', options.type);
                    span.data('data-format', options.format);

                    if (created) {
                        el.html(span);
                    }

                    let value = parseInt(span.attr('value'));

                    if (Number.isInteger(value)) {
                        application.main.cache.lookup({
                            type: span.attr('data-type'),
                            format: span.data('data-format')
                        }, [value]).done(function (data) {
                            // init element content
                            span.html(data[value].value.label);
                        });
                    }
                }
            } else if (method === 'update') {
                let value = parseInt(el.attr('value'));

                if (Number.isInteger(value)) {
                    application.main.cache.lookup({
                        type: el.attr('data-type'),
                        format: el.data('data-format')
                    }, [value]).done(function (data) {
                        // update element content
                        el.html(data[value].value.label);
                    });
                }
            } else if (method === 'destroy') {
                // destroy only if managed
                if (el.attr('data-async-value') === 'managed') {
                    el.children('span').destroy();
                }
            }
        });

        return this;
    };
})(jQuery);


/***/ }),
/* 574 */
/***/ (function(module, exports, __webpack_require__) {

var map = {
	"./en/default.json": 575,
	"./fr/default.json": 576
};
function webpackContext(req) {
	return __webpack_require__(webpackContextResolve(req));
};
function webpackContextResolve(req) {
	var id = map[req];
	if(!(id + 1)) // check for number or string
		throw new Error("Cannot find module '" + req + "'.");
	return id;
};
webpackContext.keys = function webpackContextKeys() {
	return Object.keys(map);
};
webpackContext.resolve = webpackContextResolve;
module.exports = webpackContext;
webpackContext.id = 574;

/***/ }),
/* 575 */
/***/ (function(module, exports) {

module.exports = {"3 characters at least for auto-completion":"","About...":"","Accession":"","Add":"","Add a language for data":"","Add a type of synonym":"","Apply":"","Cancel":"","Change the labels":"","Change the labels for the language":"","Change the labels for the type of synonym":"","Classification entry":"","Code":"","Configuration state":"","Configured":"","Confirm":"","Connected to messenger":"","Copy value to clipboard":"","Create":"","Defines the message for each language":"","Delete":"","Done":"","Edit":"","Edit my profile details":"","Edit2":"","Email":"","English":"","Entity synonym type locked":"","Entity synonym type name already in usage":"","Events":"","First name":"","French":"","Has languages":"","Help...":"","History":"","Home":"","Improperly configured":"","Introduction":"","Invalid characters (alphanumeric, _ and - only)":"","Invalid format":"","Label":"","Label for current language":"","Language code already in usage":"","Last actions":"","Last name":"","Latin":"","List of languages for data":"","List of type of synonyms for entities":"","Manage":"","Multiple entry":"","Name":"","New language code":"","New synonym type name":"","Partially configured":"","Rename":"","Rename the type of synonym":"","Should not be empty":"","Show":"","Successfully inserted !":"","Successfully labeled !":"","Target":"","Target entity":"","Unable to get a messenger identifier":"","Undefined":"","Unique":"","Unlink":"","Update":"","Username":"","View in a new tab/window":"","Welcome to Coll-Gate":"","characters_max":"At most one character","characters_max_plural":"At most {{count}} characters","characters_min":"At least one character","characters_min_plural":"At least {{count}} characters","from":"","total results":""}

/***/ }),
/* 576 */
/***/ (function(module, exports) {

module.exports = {"3 characters at least for auto-completion":"","About...":"A propos...","Accession":"","Add":"Ajouter","Add a language for data":"Ajouter un langague pour les données","Add a type of synonym":"","Apply":"Appliquer","Cancel":"Annuler","Change the labels":"Changer les étiquettes","Change the labels for the language":"Changer les étiquettes pour la langue","Change the labels for the type of synonym":"Changer les étiquettes pour le type de synonyme","Classification entry":"","Code":"Code","Configuration state":"Etat de la configuration","Configured":"Configuré","Confirm":"Confirmer","Connected to messenger":"Connecté au messager","Copy value to clipboard":"","Create":"Créer","Defines the message for each language":"Définir the message pour chaque language","Delete":"Supprimer","Done":"Fait","Edit":"Editer","Edit my profile details":"Mettre à jour mon profil","Edit2":"Edition2","Email":"Email","English":"Anglais","Entity synonym type locked":"Type de synonyme d'entité vérouillé","Entity synonym type name already in usage":"Nom de type de synonomes d'entité déjà utilisé","Events":"Evénement","First name":"Prénom","French":"Français","Has languages":"A plusieurs languages","Help...":"Aide..","History":"","Home":"Accueil","Improperly configured":"Mal configuré","Introduction":"Introduction","Invalid characters (alphanumeric, _ and - only)":"Caractères invalides (alphanumérique, _ et -)","Invalid format":"Format invalide","Label":"Etiquette","Label for current language":"Etiquette pour le language courant","Language code already in usage":"Code de langue existant","Last actions":"Dernières actions","Last name":"Nom","Latin":"Latin","List of languages for data":"Liste des langues des données","List of type of synonyms for entities":"Liste des type de synonymes d'entités","Manage":"Gérer","Multiple entry":"Multiple entrée","Name":"Nom","New language code":"Nouveau code de language","New synonym type name":"Nouveau nom de type de synonyme","Partially configured":"Partiellement configuré","Rename":"Renomer","Rename the type of synonym":"Renomer le type de synonyme","Should not be empty":"Ne devrait pas être vide","Show":"Voir","Successfully inserted !":"Inséré avec succé !","Successfully labeled !":"Renommé avec succès !","Target":"Cible","Target entity":"","Unable to get a messenger identifier":"Impossible de récupérer un identifiant du messager","Undefined":"Undéfini","Unique":"Unique","Unlink":"Délier","Update":"Mettre-à-jour","Username":"Nom d'utilisateur","View in a new tab/window":"","Welcome to Coll-Gate":"Bienvenue sur Coll-Gate","characters_max":"Au plus un caractère","characters_max_plural":"Au plus {{count}} caractères","characters_min":"Au moins un caractère","characters_min_plural":"Au moins {{count}} caractères","from":"de","total results":"résultats total"}

/***/ }),
/* 577 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file main.js
 * @brief Main router
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-06-14
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Marionette = __webpack_require__(1);
let AboutView = __webpack_require__(578);
let HelpIndexView = __webpack_require__(580);
let DefaultLayout = __webpack_require__(3);
let QuarterLayout = __webpack_require__(582);
let TitleView = __webpack_require__(4);

let LanguageListView = __webpack_require__(584);
let LanguageAddView = __webpack_require__(588);

let EntitySynonymTypeListView = __webpack_require__(591);
let EntitySynonymTypeAddView = __webpack_require__(595);

let Router = Marionette.AppRouter.extend({
    routes : {
        "app/home/": "home",
        "app/main/about/": "about",
        "app/main/help/": "help",
        "app/main/config/": "config",
        "app/main/language/": "getLanguagesList",
        "app/main/entity-synonym-type/": "getEntitySynonymTypesList",
        "app/*actions": "default"
    },

    default: function(p) {
        $.alert.error("Invalid view : " + p);
    },

    home: function() {
        let HomeView = Marionette.View.extend({
            tagName: 'div',
            className: 'home',
            attributes: { style: "height: 100%; padding: 5px;"},
            template: __webpack_require__(598)
        });

        let defaultLayout = new DefaultLayout({});
        application.main.showContent(defaultLayout);

        defaultLayout.showChildView('title', new TitleView({title: _t("Home")}));

        let quarterLayout = new QuarterLayout();
        defaultLayout.showChildView('content', quarterLayout);

        quarterLayout.showChildView('top-left', new HomeView());

        if (session.user.isAuth) {
            let EventMessagePanelView = __webpack_require__(599);
            quarterLayout.showChildView('top-right', new EventMessagePanelView());

            let ActionPanelView = __webpack_require__(605);
            quarterLayout.showChildView('bottom-left', new ActionPanelView());
        }
    },

    about: function() {
        let defaultLayout = new DefaultLayout({});
        application.main.showContent(defaultLayout);

        defaultLayout.showChildView('title', new TitleView({title: _t("About...")}));
        defaultLayout.showChildView('content', new AboutView());
    },

    help: function() {
        let defaultLayout = new DefaultLayout({});
        application.main.showContent(defaultLayout);

        defaultLayout.showChildView('title', new TitleView({title: _t("Help...")}));
        defaultLayout.showChildView('content', new HelpIndexView());
    },

    config: function() {
        let ConfigCollection = __webpack_require__(607);
        let collection = new ConfigCollection();

        let defaultLayout = new DefaultLayout({});
        application.main.showContent(defaultLayout);

        defaultLayout.showChildView('title', new TitleView({title: _t("Configuration state")}));

        collection.fetch().then(function () {
            let ConfigListView = __webpack_require__(608);
            let configListView = new ConfigListView({collection : collection});

            defaultLayout.showChildView('content', configListView);
        });
    },

    getLanguagesList: function () {
        let collection = application.main.collections.languages;

        let defaultLayout = new DefaultLayout({});
        application.main.showContent(defaultLayout);

        defaultLayout.showChildView('title', new TitleView({title: _t("List of languages for data")}));

        collection.fetch().done(function (data) {
            let languageListView = new LanguageListView({collection : collection});

            defaultLayout.showChildView('content', languageListView);
            // defaultLayout.showChildView('content-bottom', new ScrollingMoreView({targetView: languageListView}));
        });

        defaultLayout.showChildView('bottom', new LanguageAddView({collection: collection}));
    },

    getEntitySynonymTypesList: function() {
        let EntitySynonymTypeCollection = __webpack_require__(276);
        let collection = new EntitySynonymTypeCollection();

        let defaultLayout = new DefaultLayout({});
        window.application.main.showContent(defaultLayout);

        defaultLayout.showChildView('title', new TitleView({title: _t("List of type of synonyms for entities")}));

        collection.fetch().done(function (data) {
            let entitySynonymTypeListView = new EntitySynonymTypeListView({collection : collection});

            defaultLayout.showChildView('content', entitySynonymTypeListView);
            // defaultLayout.showChildView('content-bottom', new ScrollingMoreView({targetView: entitySynonymTypeListView}));
        });

        defaultLayout.showChildView('bottom', new EntitySynonymTypeAddView({collection: collection}));
    }
});

module.exports = Router;


/***/ }),
/* 578 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file about.js
 * @brief About view
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-06-14
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Marionette = __webpack_require__(1);

let View = Marionette.View.extend({
    tagName: 'div',
    className: 'about',
    template: __webpack_require__(579),

    ui: {
    },

    events: {
    },

    initialize: function() {
    },

    onRender: function() {
    }
});

module.exports = View;


/***/ }),
/* 579 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<p>Coll-Gate IS ' +
__e( session.version ) +
' Copyright &copy; 2016-2018 INRA/CIRAD.</p><div class="help-about-authors"><span>List of authors :</span><ul class="author-list"><li><span style="font-weight: bold">Frédéric SCHERMA</span> at INRA UMR1095</li><li><span style="font-weight: bold">Medhi BOULNEMOUR</span> at INRA UMR1095</li><li><span style="font-weight: bold">Nicolas GUILHOT</span> at INRA UMR1095</li></ul></div>';

}
return __p
};

/*
original source:

<p>Coll-Gate IS <%- session.version %> Copyright &copy; 2016-2018 INRA/CIRAD.</p><div class="help-about-authors"><span>List of authors :</span><ul class="author-list"><li><span style="font-weight: bold">Frédéric SCHERMA</span> at INRA UMR1095</li><li><span style="font-weight: bold">Medhi BOULNEMOUR</span> at INRA UMR1095</li><li><span style="font-weight: bold">Nicolas GUILHOT</span> at INRA UMR1095</li></ul></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 580 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file index.js
 * @brief Help index view
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-06-14
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Marionette = __webpack_require__(1);

let View = Marionette.View.extend({
    tagName: 'div',
    className: 'help-index',
    template: __webpack_require__(581),

    ui: {
    },

    events: {
    },

    initialize: function() {
    },

    onRender: function() {
    }
});

module.exports = View;


/***/ }),
/* 581 */
/***/ (function(module, exports) {

underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '';
with (obj) {
__p += '<span>TODO</span>';

}
return __p
};

/*
original source:

<span>TODO</span>
*/


/***/ }),
/* 582 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file quarterlayout.js
 * @brief Two columns of two rows layout
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-02-03
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Marionette = __webpack_require__(1);

let View = Marionette.View.extend({
    template: __webpack_require__(583),
    attributes: {
        style: "height: 100%;"
    },

    regions: {
        'top-left': "div.row-up div.left",
        'bottom-left': "div.row-down div.left",
        'top-right': "div.row-up div.right",
        'bottom-right': "div.row-down div.right"
    },

    childViewEvents: {
        'select:tab': function (region, child) {
            this.triggerMethod('select:tab', region, child);
        },
    },

    onResize: function() {
        let view = this.getChildView('top-left');
        if (view && view.onResize) {
            view.onResize();
        }

        view = this.getChildView('bottom-left');
        if (view && view.onResize) {
            view.onResize();
        }

        view = this.getChildView('top-right');
        if (view && view.onResize) {
            view.onResize();
        }

        view = this.getChildView('bottom-right');
        if (view && view.onResize) {
            view.onResize();
        }
    }
});

module.exports = View;


/***/ }),
/* 583 */
/***/ (function(module, exports) {

underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '';
with (obj) {
__p += '<div class="column"><div class="row-up"><div class="col-sm-6 left"></div><div class="col-sm-6 right"></div></div><div class="row-down"><div class="col-sm-6 left"></div><div class="col-sm-6 right"></div></div></div>';

}
return __p
};

/*
original source:

<div class="column"><div class="row-up"><div class="col-sm-6 left"></div><div class="col-sm-6 right"></div></div><div class="row-down"><div class="col-sm-6 left"></div><div class="col-sm-6 right"></div></div></div>
*/


/***/ }),
/* 584 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file languagelist.js
 * @brief Data language list view
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-06-06
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let LanguageView = __webpack_require__(585);
let AdvancedTable = __webpack_require__(6);

let View = AdvancedTable.extend({
    template: __webpack_require__(587),
    className: "language-list advanced-table-container",
    childView: LanguageView,
    childViewContainer: 'tbody.language-list',

    initialize: function() {
        View.__super__.initialize.apply(this);

        this.listenTo(this.collection, 'reset', this.render, this);
    }
});

module.exports = View;


/***/ }),
/* 585 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file language.js
 * @brief Data language item view
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-06-06
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);

let View = Marionette.View.extend({
    tagName: 'tr',
    className: 'element object language',
    template: __webpack_require__(586),

    ui: {
        delete_language: 'span.delete-language',
        change_label: 'td.change-label'
    },

    events: {
        'click @ui.delete_language': 'deleteLanguage',
        'click @ui.change_label': 'onEditLabel'
    },

    behaviors: {
        ActionBtnEvents: {
            behaviorClass: __webpack_require__(8),
            actions: {
                edit: {display: false},
                tag: {display: true, event: 'onEditLabel'},
                remove: {display: true, event: 'deleteLanguage'}
            }
        }
    },

    initialize: function() {
        this.listenTo(this.model, 'change', this.render, this);
    },

    onRender: function() {
        // if ($.inArray("auth.delete_language", this.model.perms) < 0) {
        //     $(this.ui.delete_language).remove();
        // }
    },

    deleteLanguage: function () {
        this.model.destroy({wait: true});
    },

    onEditLabel: function() {
        let ChangeLabel = __webpack_require__(24);
        let changeLabel = new ChangeLabel({
            model: this.model,
            title: _t("Change the labels for the language")});

        changeLabel.render();

        return false;
    }
});

module.exports = View;


/***/ }),
/* 586 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<td class="" name="code">' +
__e( id ) +
'</td><td class="action change-label" name="label">' +
__e( label ) +
'</td>';

}
return __p
};

/*
original source:

<td class="" name="code"><%- id %></td><td class="action change-label" name="label"><%- label %></td>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 587 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div class="table-advanced-head"><table class="table table-striped table-advanced"><thead><tr scope="row"><th>' +
__e( _t("Code") ) +
'</th><th>' +
__e( _t("Label") ) +
'</th></tr></thead></table></div><div class="table-advanced-body"><table class="table table-striped table-advanced"><tbody class="language-list"></tbody></table></div>';

}
return __p
};

/*
original source:

<div class="table-advanced-head"><table class="table table-striped table-advanced"><thead><tr scope="row"><th><%- _t("Code") %></th><th><%- _t("Label") %></th></tr></thead></table></div><div class="table-advanced-body"><table class="table table-striped table-advanced"><tbody class="language-list"></tbody></table></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 588 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file languagelistfooter.js
 * @brief Create new languages
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-06-06
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);
let Dialog = __webpack_require__(5);

let View = Marionette.View.extend({
    tagName: 'div',
    className: 'language-add',
    template: __webpack_require__(589),

    ui: {
        add_language_btn: 'span.add-language',
        add_language_code: 'input.language-code',
    },

    events: {
        'click @ui.add_language_btn': 'addLanguage',
        'input @ui.add_language_code': 'onCodeNameInput',
    },

    initialize: function(options) {
        options || (options = {});
        this.collection = options.collection;
    },

    addLanguage: function () {
        this.validateCodeName();

        if (!this.ui.add_language_code.hasClass('invalid')) {
            let CreateLanguageDialog = Dialog.extend({
                attributes: {
                    'id': 'dlg_create_language'
                },
                template: __webpack_require__(590),

                ui: {
                    add: "button.add",
                    code: "#language_code",
                    label: "#language_label"
                },

                events: {
                    'click @ui.add': 'onAdd',
                    'input @ui.label': 'onLabelInput'
                },

                onLabelInput: function () {
                    let label = this.ui.label.val().trim();

                    if (this.validateLabel()) {

                    }
                },

                onRender: function () {
                    CreateLanguageDialog.__super__.onRender.apply(this);

                    this.ui.code.val(this.getOption('code'));
                },

                validateLabel: function() {
                    let v = this.ui.label.val().trim();

                    if (v.length > 128) {
                        this.ui.label.validateField('failed', _t('characters_max', {count: 128}));
                        return false;
                    } else if (v.length < 3) {
                        this.ui.label.validateField('failed', _t('characters_min', {count: 3}));
                        return false;
                    }

                    this.ui.label.validateField('ok');

                    return true;
                },

                validate: function() {
                    let valid = this.validateLabel();
                    return valid;
                },

                onAdd: function() {
                    let view = this;

                    if (this.validate()) {
                        let label = this.ui.label.val().trim();

                        this.getOption('collection').create({
                            code: this.getOption('code'), label: label}, {wait: true});

                        view.destroy();
                    }
                }
            });

            // show current language label dialog
            let createLanguageDialog = new CreateLanguageDialog({
                collection: this.collection,
                code: this.ui.add_language_code.val()});
            createLanguageDialog.render();

            this.ui.add_language_code.cleanField();
        }
    },

    validateCodeName: function() {
        let v = this.ui.add_language_code.val();
        let re = /^[a-zA-Z]{2}([_-][a-zA-Z]{2})*$/;

        if (v.length > 0 && !re.test(v)) {
            this.ui.add_language_code.validateField('failed', _t("Invalid format"));
            return false;
        } else if (v.length < 2) {
            this.ui.add_language_code.validateField('failed', _t('characters_min', {count: 2}));
            return false;
        }

        return true;
    },

    onCodeNameInput: function () {
        if (this.validateCodeName()) {
            if (this.collection.get(this.ui.add_language_code.val())) {
                this.ui.add_language_code.validateField('failed', _t('Language code already in usage'));
            } else {
                this.ui.add_language_code.validateField('ok');
            }
        }
    },
});

module.exports = View;


/***/ }),
/* 589 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<table class="table table-striped" style="margin-bottom: 0px"><tbody><tr class="edit-mode" style="height: 80px"><th><span class="add-language action fa fa-plus-circle" style="margin-top: 9px; margin-left: 10px"></span></th><td style="width: 100%"><div class="form-group form-group-margin-sm"><input type="text" class="language-code form-control" name="code" placeholder="' +
__e( _t('New language code') ) +
'" maxlength="5"></div></td></tr></tbody></table>';

}
return __p
};

/*
original source:

<table class="table table-striped" style="margin-bottom: 0px"><tbody><tr class="edit-mode" style="height: 80px"><th><span class="add-language action fa fa-plus-circle" style="margin-top: 9px; margin-left: 10px"></span></th><td style="width: 100%"><div class="form-group form-group-margin-sm"><input type="text" class="language-code form-control" name="code" placeholder="<%- _t('New language code') %>" maxlength="5"></div></td></tr></tbody></table>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 590 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title">' +
__e( _t("Add a language for data") ) +
'</h4></div><div class="modal-body"><form><div class="row"><div class="col-xs-12"><div class="form-group"><label class="control-label" for="language_code">' +
__e( _t("Code") ) +
'</label><input class="form-control code" id="language_code" type="text" name="code" value="" maxlength="5" readonly="true" autocomplete="off" style="width:100%"></div></div></div><div class="row"><div class="col-xs-12"><div class="form-group"><label class="control-label" for="language_label">' +
__e( _t("Label for current language") ) +
'</label><input class="form-control language-label" id="language_label" type="text" name="label" value="" maxlength="128" autofocus="" autocomplete="off" style="width:100%"></div></div></div></form></div><div class="modal-footer"><button type="button" class="btn btn-default cancel" data-dismiss="modal">' +
__e( _t("Cancel") ) +
'</button> <button type="button" class="btn btn-success add">' +
__e( _t("Add") ) +
'</button></div></div></div>';

}
return __p
};

/*
original source:

<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title"><%- _t("Add a language for data") %></h4></div><div class="modal-body"><form><div class="row"><div class="col-xs-12"><div class="form-group"><label class="control-label" for="language_code"><%- _t("Code") %></label><input class="form-control code" id="language_code" type="text" name="code" value="" maxlength="5" readonly="true" autocomplete="off" style="width:100%"></div></div></div><div class="row"><div class="col-xs-12"><div class="form-group"><label class="control-label" for="language_label"><%- _t("Label for current language") %></label><input class="form-control language-label" id="language_label" type="text" name="label" value="" maxlength="128" autofocus="" autocomplete="off" style="width:100%"></div></div></div></form></div><div class="modal-footer"><button type="button" class="btn btn-default cancel" data-dismiss="modal"><%- _t("Cancel") %></button> <button type="button" class="btn btn-success add"><%- _t("Add") %></button></div></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 591 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file entitysynonymtypelist.js
 * @brief Entity synonym type list view
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-09-20
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let EntitySynonymView = __webpack_require__(592);
let AdvancedTable = __webpack_require__(6);

let View = AdvancedTable.extend({
    template: __webpack_require__(594),
    className: "entity-synonym-type-list advanced-table-container",
    childView: EntitySynonymView,
    childViewContainer: 'tbody.entity-synonym-type-list',

    initialize: function() {
        View.__super__.initialize.apply(this);

        this.listenTo(this.collection, 'reset', this.render, this);
    }
});

module.exports = View;


/***/ }),
/* 592 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file entitysynonymtype.js
 * @brief Entity synonym type item view
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-09-20
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);

let View = Marionette.View.extend({
    tagName: 'tr',
    className: 'element object entity-synonym-type',
    template: __webpack_require__(593),

    ui: {
        delete_synonym_type: 'span.delete-entity-synonym-type',
        change_label: 'td.change-label',
        rename_btn: 'td.action.rename',
        unique_btn: 'td.action[name=unique]',
        multiple_entry_btn: 'td.action[name=multiple-entry]',
        has_language_btn: 'td.action[name=has-language]'
    },

    events: {

        'click @ui.delete_synonym_type': 'deleteSynonymType',
        'click @ui.change_label': 'onEditLabel',
        'click @ui.rename_btn': 'onRename',
        'click @ui.unique_btn': 'onToggleUnique',
        'click @ui.multiple_entry_btn': 'onToggleMultipleEntry',
        'click @ui.has_language_btn': 'onToggleHasLanguage'
    },

    behaviors: {
        ActionBtnEvents: {
            behaviorClass: __webpack_require__(8),
            actions: {
                edit: {display: true, event: 'onRename'},
                tag: {display: true, event: 'onEditLabel'},
                remove: {display: true, event: 'deleteSynonymType'}
            }
        }
    },

    initialize: function() {
        this.listenTo(this.model, 'change', this.render, this);
    },

    actionsProperties: function () {
        let properties = {
            manage: {disabled: false},
            remove: {disabled: false}
        };

        // @todo manage permissions

        if (!window.application.permission.manager.isStaff() || !this.model.get('can_delete')) {
            // $.inArray("auth.delete_entitysynonymtype", this.model.perms) < 0
            properties.remove.disabled = true;
        }

        return properties;
    },

    onRender: function() {
        window.application.main.views.contentTypes.htmlFromValue(this.$el);
    },

    deleteSynonymType: function () {
        if (!this.model.get('can_delete') || !window.application.permission.manager.isStaff()) {
            return false;
        }

        this.model.destroy({wait: true});
    },

    onEditLabel: function() {
        if (!this.model.get('can_modify') || !window.application.permission.manager.isStaff()) {
            return false;
        }

        let ChangeLabel = __webpack_require__(24);
        let changeLabel = new ChangeLabel({
            model: this.model,
            title: _t("Change the labels for the type of synonym")});

        changeLabel.render();

        return false;
    },

    onRename: function () {
        if (!this.model.get('can_modify') || !window.application.permission.manager.isStaff()) {
            return false;
        }

        let ChangeName = __webpack_require__(20);
        let changeName = new ChangeName({
            model: this.model,
            title: _t("Rename the type of synonym")
        });

        changeName.render();
        changeName.ui.name.val(this.model.get('name'));

        return false;
    },

    onToggleUnique: function () {
        // @todo cannot be modified once there is some data
        if (!this.model.get('can_modify') || !window.application.permission.manager.isStaff()) {
            return false;
        }

        this.model.save({unique: !this.model.get('unique')}, {wait: true, patch: true}).then(function () {
            $.alert.success(_t("Done"));
        });
    },

    onToggleMultipleEntry: function () {
        // @todo cannot be modified once there is some data
        if (!this.model.get('can_modify') || !window.application.permission.manager.isStaff()) {
            return false;
        }

        this.model.save({multiple_entry: !this.model.get('multiple_entry')}, {wait: true, patch: true}).then(function () {
            $.alert.success(_t("Done"));
        });
    },

    onToggleHasLanguage: function () {
        // @todo cannot be modified once there is some data
        if (!this.model.get('can_modify') || !window.application.permission.manager.isStaff()) {
            return false;
        }

        this.model.save({has_language: !this.model.get('has_language')}, {wait: true, patch: true}).then(function () {
            $.alert.success(_t("Done"));
        });
    }
});

module.exports = View;


/***/ }),
/* 593 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
with (obj) {
__p += ' ';
 var className = "action"; ;
__p += ' ';
 if (!can_modify) { ;
__p += ' ';
 className = ""; ;
__p += ' ';
 classNameSpan = "action-forbidden"; ;
__p += ' ';
 } else { ;
__p += ' ';
 classNameSpan = "action"; ;
__p += ' ';
 } ;
__p += ' <td class="glyph-fixed-column lock-status"> ';
 if (!can_delete) { ;
__p += ' <span class="fa fa-lock" title="' +
__e( _t('Entity synonym type locked') ) +
'"></span> ';
 } ;
__p += ' </td> ';
 if (unique) { ;
__p += ' <td class="' +
__e( className ) +
' glyph-fixed-column" name="unique"><span class="' +
__e( classNameSpan ) +
' fa fa-check"></span></td> ';
 } else { ;
__p += ' <td class="' +
__e( className ) +
' glyph-fixed-column" name="unique"><span class="' +
__e( classNameSpan ) +
' fa fa-times"></span></td> ';
 } ;
__p += ' ';
 if (multiple_entry) { ;
__p += ' <td class="' +
__e( className ) +
' glyph-fixed-column" name="multiple-entry"><span class="' +
__e( classNameSpan ) +
' fa fa-check"></span></td> ';
 } else { ;
__p += ' <td class="' +
__e( className ) +
' glyph-fixed-column" name="multiple-entry"><span class="' +
__e( classNameSpan ) +
' fa fa-times"></span></td> ';
 } ;
__p += ' ';
 if (has_language) { ;
__p += ' <td class="' +
__e( className ) +
' glyph-fixed-column" name="has-language"><span class="' +
__e( classNameSpan ) +
' fa fa-check"></span></td> ';
 } else { ;
__p += ' <td class="' +
__e( className ) +
' glyph-fixed-column" name="has-language"><span class="' +
__e( classNameSpan ) +
' fa fa-times"></span></td> ';
 } ;
__p += ' <td class="' +
__e( className ) +
' rename" name="name">' +
__e( name ) +
'</td><td class="content-type" name="target-model" value="' +
__e( target_model ) +
'"></td><td class="' +
__e( className ) +
' change-label" name="label">' +
__e( label ) +
'</td>';

}
return __p
};

/*
original source:

 <% var className = "action"; %> <% if (!can_modify) { %> <% className = ""; %> <% classNameSpan = "action-forbidden"; %> <% } else { %> <% classNameSpan = "action"; %> <% } %> <td class="glyph-fixed-column lock-status"> <% if (!can_delete) { %> <span class="fa fa-lock" title="<%- _t('Entity synonym type locked') %>"></span> <% } %> </td> <% if (unique) { %> <td class="<%- className %> glyph-fixed-column" name="unique"><span class="<%- classNameSpan %> fa fa-check"></span></td> <% } else { %> <td class="<%- className %> glyph-fixed-column" name="unique"><span class="<%- classNameSpan %> fa fa-times"></span></td> <% } %> <% if (multiple_entry) { %> <td class="<%- className %> glyph-fixed-column" name="multiple-entry"><span class="<%- classNameSpan %> fa fa-check"></span></td> <% } else { %> <td class="<%- className %> glyph-fixed-column" name="multiple-entry"><span class="<%- classNameSpan %> fa fa-times"></span></td> <% } %> <% if (has_language) { %> <td class="<%- className %> glyph-fixed-column" name="has-language"><span class="<%- classNameSpan %> fa fa-check"></span></td> <% } else { %> <td class="<%- className %> glyph-fixed-column" name="has-language"><span class="<%- classNameSpan %> fa fa-times"></span></td> <% } %> <td class="<%- className %> rename" name="name"><%- name %></td><td class="content-type" name="target-model" value="<%- target_model %>"></td><td class="<%- className %> change-label" name="label"><%- label %></td>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 594 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div class="table-advanced-head"><table class="table table-striped table-advanced"><thead><tr scope="row"><th class="glyph-fixed-column"><span class="fa fa-lock"></span></th><th class="glyph-fixed-column"><abbr title="' +
__e( _t('Unique') ) +
'"><span class="fa fa-hashtag fa-lg"></span></abbr></th><th class="glyph-fixed-column"><abbr title="' +
__e( _t('Multiple entry') ) +
'"><span class="fa fa-list-ul"></span></abbr></th><th class="glyph-fixed-column"><abbr title="' +
__e( _t('Has languages') ) +
'"><span class="fa fa-language fa-lg"></span></abbr></th><th>' +
__e( _t("Name") ) +
'</th><th>' +
__e( _t("Target") ) +
'</th><th>' +
__e( _t("Label") ) +
'</th></tr></thead></table></div><div class="table-advanced-body"><table class="table table-striped table-advanced"><tbody class="entity-synonym-type-list"></tbody></table></div>';

}
return __p
};

/*
original source:

<div class="table-advanced-head"><table class="table table-striped table-advanced"><thead><tr scope="row"><th class="glyph-fixed-column"><span class="fa fa-lock"></span></th><th class="glyph-fixed-column"><abbr title="<%- _t('Unique') %>"><span class="fa fa-hashtag fa-lg"></span></abbr></th><th class="glyph-fixed-column"><abbr title="<%- _t('Multiple entry') %>"><span class="fa fa-list-ul"></span></abbr></th><th class="glyph-fixed-column"><abbr title="<%- _t('Has languages') %>"><span class="fa fa-language fa-lg"></span></abbr></th><th><%- _t("Name") %></th><th><%- _t("Target") %></th><th><%- _t("Label") %></th></tr></thead></table></div><div class="table-advanced-body"><table class="table table-striped table-advanced"><tbody class="entity-synonym-type-list"></tbody></table></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 595 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file entitysynonymtypeadd.js
 * @brief Create new entity synonym type
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-09-20
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);
let Dialog = __webpack_require__(5);

let View = Marionette.View.extend({
    tagName: 'div',
    className: 'entity-synonym-type-add',
    template: __webpack_require__(596),

    ui: {
        add_synonym_type_btn: 'span.add-entity-synonym-type',
        add_synonym_type_name: 'input.entity-synonym-type-name',
    },

    events: {
        'click @ui.add_synonym_type_btn': 'addSynonymType',
        'input @ui.add_synonym_type_name': 'onNameInput',
    },

    initialize: function(options) {
        options || (options = {});
        this.collection = options.collection;
    },

    addSynonymType: function () {
        this.validateName();

        if (!this.ui.add_synonym_type_name.hasClass('invalid')) {
            let CreateSynonymTypeDialog = Dialog.extend({
                attributes: {
                    'id': 'dlg_create_synonym_type'
                },
                template: __webpack_require__(597),

                ui: {
                    add: "button.add",
                    name: "input[name=synonym-type]",
                    entity: "select[name=target-entity]",
                    label: "input[name=label]"
                },

                events: {
                    'click @ui.add': 'onAdd',
                    'input @ui.label': 'onLabelInput'
                },

                onLabelInput: function () {
                    let label = this.ui.label.val().trim();

                    if (this.validateLabel()) {

                    }
                },

                onRender: function () {
                    CreateSynonymTypeDialog.__super__.onRender.apply(this);

                    this.ui.name.val(this.getOption('name'));
                    this.ui.entity.selectpicker({});
                },

                validateLabel: function() {
                    let v = this.ui.label.val().trim();

                    if (v.length > 128) {
                        this.ui.label.validateField('failed', _t('characters_max', {count: 128}));
                        return false;
                    } else if (v.length < 3) {
                        this.ui.label.validateField('failed', _t('characters_min', {count: 3}));
                        return false;
                    }

                    this.ui.label.validateField('ok');

                    return true;
                },

                validate: function() {
                    let valid = this.validateLabel();
                    return valid;
                },

                onAdd: function() {
                    let view = this;

                    if (this.validate()) {
                        let label = this.ui.label.val().trim();
                        let targetModel = this.ui.entity.val();

                        this.getOption('collection').create({
                            name: this.getOption('name'),
                            target_model: targetModel,
                            label: label}, {wait: true});

                        view.destroy();
                    }
                }
            });

            // show current synonym type label dialog
            let createSynonymTypeDialog = new CreateSynonymTypeDialog({
                collection: this.collection,
                name: this.ui.add_synonym_type_name.val()});
            createSynonymTypeDialog.render();

            this.ui.add_synonym_type_name.cleanField();
        }
    },

    validateName: function() {
        let v = this.ui.add_synonym_type_name.val();
        let re = /^[a-zA-Z0-9_\-]+$/i;

        if (v.length > 0 && !re.test(v)) {
            this.ui.add_synonym_type_name.validateField('failed', _t("Invalid characters (alphanumeric, _ and - only)"));
            return false;
        } else if (v.length < 3) {
            this.ui.add_synonym_type_name.validateField('failed', _t('characters_min', {count: 3 }));
            return false;
        }

        return true;
    },

    onNameInput: function () {
        if (this.validateName()) {
            if (this.collection.findWhere({'name': this.ui.add_synonym_type_name.val()})) {
                this.ui.add_synonym_type_name.validateField('failed', _t('Entity synonym type name already in usage'));
            } else {
                this.ui.add_synonym_type_name.validateField('ok');
            }
        }
    },
});

module.exports = View;


/***/ }),
/* 596 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<table class="table table-striped" style="margin-bottom: 0px"><tbody><tr class="edit-mode" style="height: 80px"><th><span class="add-entity-synonym-type action fa fa-plus-circle" style="margin-top: 9px; margin-left: 10px"></span></th><td style="width: 100%"><div class="form-group form-group-margin-sm"><input type="text" class="entity-synonym-type-name form-control" name="name" placeholder="' +
__e( _t('New synonym type name') ) +
'" maxlength="128" autocomplete="off"></div></td></tr></tbody></table>';

}
return __p
};

/*
original source:

<table class="table table-striped" style="margin-bottom: 0px"><tbody><tr class="edit-mode" style="height: 80px"><th><span class="add-entity-synonym-type action fa fa-plus-circle" style="margin-top: 9px; margin-left: 10px"></span></th><td style="width: 100%"><div class="form-group form-group-margin-sm"><input type="text" class="entity-synonym-type-name form-control" name="name" placeholder="<%- _t('New synonym type name') %>" maxlength="128" autocomplete="off"></div></td></tr></tbody></table>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 597 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title">' +
__e( _t("Add a type of synonym") ) +
'</h4></div><div class="modal-body"><form><div class="row"><div class="col-xs-12"><div class="form-group"><label class="control-label">' +
__e( _t("Code") ) +
'</label><input class="form-control name" type="text" name="synonym-type" value="" minlength="3" maxlength="128" readonly="true" autocomplete="off" style="width:100%"></div></div></div><div class="row"><div class="col-xs-12"><div class="form-group"><label class="control-label">' +
__e( _t("Target entity") ) +
'</label><select class="form-control target-entity" name="target-entity" style="width:100%"><option value="accession.accession">' +
__e( _t("Accession") ) +
'</option><option value="classification.classificationentry">' +
__e( _t("Classification entry") ) +
'</option></select></div></div></div><div class="row"><div class="col-xs-12"><div class="form-group"><label class="control-label">' +
__e( _t("Label for current language") ) +
'</label><input class="form-control language-label" type="text" name="label" value="" maxlength="128" autofocus="" autocomplete="off" style="width:100%"></div></div></div></form></div><div class="modal-footer"><button type="button" class="btn btn-default cancel" data-dismiss="modal">' +
__e( _t("Cancel") ) +
'</button> <button type="button" class="btn btn-success add">' +
__e( _t("Add") ) +
'</button></div></div></div>';

}
return __p
};

/*
original source:

<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title"><%- _t("Add a type of synonym") %></h4></div><div class="modal-body"><form><div class="row"><div class="col-xs-12"><div class="form-group"><label class="control-label"><%- _t("Code") %></label><input class="form-control name" type="text" name="synonym-type" value="" minlength="3" maxlength="128" readonly="true" autocomplete="off" style="width:100%"></div></div></div><div class="row"><div class="col-xs-12"><div class="form-group"><label class="control-label"><%- _t("Target entity") %></label><select class="form-control target-entity" name="target-entity" style="width:100%"><option value="accession.accession"><%- _t("Accession") %></option><option value="classification.classificationentry"><%- _t("Classification entry") %></option></select></div></div></div><div class="row"><div class="col-xs-12"><div class="form-group"><label class="control-label"><%- _t("Label for current language") %></label><input class="form-control language-label" type="text" name="label" value="" maxlength="128" autofocus="" autocomplete="off" style="width:100%"></div></div></div></form></div><div class="modal-footer"><button type="button" class="btn btn-default cancel" data-dismiss="modal"><%- _t("Cancel") %></button> <button type="button" class="btn btn-success add"><%- _t("Add") %></button></div></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 598 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div class="panel panel-info insider-panel"><div class="panel-heading"><span class="panel-title">' +
__e( _t("Introduction") ) +
'&nbsp;</span> <span class="fa fa-pencil-square-o action edit-message pull-right" style="color: #3c763d"></span></div><div class="panel-body" style="height: calc(100% - 14px - 5px - 20px); overflow-y: auto"><span>' +
__e( _t("Welcome to Coll-Gate") ) +
'</span></div></div>';

}
return __p
};

/*
original source:

<div class="panel panel-info insider-panel"><div class="panel-heading"><span class="panel-title"><%- _t("Introduction") %>&nbsp;</span> <span class="fa fa-pencil-square-o action edit-message pull-right" style="color: #3c763d"></span></div><div class="panel-body" style="height: calc(100% - 14px - 5px - 20px); overflow-y: auto"><span><%- _t("Welcome to Coll-Gate") %></span></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 599 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file eventmessagepanel.js
 * @brief Event message panel layout.
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-02-02
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Marionette = __webpack_require__(1);
let Dialog = __webpack_require__(5);

let View = Marionette.View.extend({
    className: "event-message-panel",
    template: __webpack_require__(600),

    attributes: {
        'style': 'height: 100%; padding: 5px;'
    },

    regions: {
        'content': 'div.panel-body'
    },

    ui: {
        'add': 'span.add-event-message',
        'refresh': 'span.refresh-event-messages'
    },

    events: {
        'click @ui.add': 'onAddEventMessage',
        'click @ui.refresh': 'onRefreshEventMessages'
    },

    initialize: function(options) {
    },

    onRender: function() {
        let view = this;
        let EventMessageListView = __webpack_require__(601);

        application.main.collections.eventMessages.fetch().then(function() {
            view.showChildView('content', new EventMessageListView({collection: application.main.collections.eventMessages}));
        });
    },

    onAddEventMessage: function() {
        let CreateEventMessage = Dialog.extend({
            template: __webpack_require__(604),

            attributes: {
                id: "dlg_create_event_message"
            },

            ui: {
                message: "form.messages input"
            },

            events: {
                'input @ui.message': 'onMessageInput'
            },

            initialize: function (options) {
                CreateEventMessage.__super__.initialize.apply(this, arguments);
            },

            onMessageInput: function (e) {
                this.validateMessage(e);
            },

            validateMessage: function (e) {
                let v = $(e.target).val();

                if (v.length === 0) {
                    $(e.target).validateField('failed', _t('Should not be empty'));
                    return false;
                }

                $(e.target).validateField('ok');

                return true;
            },

            validateMessages: function() {
                $.each($(this.ui.message), function(i, message) {
                    let v = $(this).val();

                   if (v.length === 0) {
                       $(this).validateField('failed', _t('Should not be empty'));
                       return false;
                    }
                });

                return true;
            },

            onApply: function () {
                let view = this;
                let collection = this.getOption('collection');

                let messages = {};

                $.each($(this.ui.message), function(i, message) {
                    let v = $(this).val();
                    messages[$(message).attr("language")] = v;
                });

                if (this.validateMessages()) {
                    $.ajax({
                        type: "POST",
                        url: collection.url,
                        dataType: 'json',
                        contentType: "application/json; charset=utf-8",
                        data: JSON.stringify(messages)
                    }).done(function(data) {
                        collection.add([data]);
                        $.alert.success(_t("Successfully inserted !"));
                    }).always(function() {
                        view.destroy();
                    });
                }
            }
        });

        let createEventMessage = new CreateEventMessage({collection: this.getChildView('content').collection});
        createEventMessage.render();
    },

    onRefreshEventMessages: function () {
        this.getChildView('content').collection.fetch();
    }
});

module.exports = View;


/***/ }),
/* 600 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div class="panel panel-success insider-panel"><div class="panel-heading"><span class="panel-title">' +
__e( _t("Events") ) +
'&nbsp;</span> <span class="fa fa-plus-circle action add-event-message pull-right" style="color: #3c763d"></span> <span class="fa fa-refresh action refresh-event-messages pull-right" style="right: 10px"></span></div><div class="panel-body" style="height: calc(100% - 14px - 5px - 20px); overflow-y: auto"></div></div>';

}
return __p
};

/*
original source:

<div class="panel panel-success insider-panel"><div class="panel-heading"><span class="panel-title"><%- _t("Events") %>&nbsp;</span> <span class="fa fa-plus-circle action add-event-message pull-right" style="color: #3c763d"></span> <span class="fa fa-refresh action refresh-event-messages pull-right" style="right: 10px"></span></div><div class="panel-body" style="height: calc(100% - 14px - 5px - 20px); overflow-y: auto"></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 601 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file eventmessagelist.js
 * @brief Event message list collection view.
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-02-02
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Marionette = __webpack_require__(1);
let EventMessageView = __webpack_require__(602);

let View = Marionette.CollectionView.extend({
    className: "event-message-list",
    childView: EventMessageView
});

module.exports = View;



/***/ }),
/* 602 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file eventmessage.js
 * @brief Eventmessage item view
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-01-01
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Marionette = __webpack_require__(1);

let View = Marionette.View.extend({
    tagName: 'div',
    template: __webpack_require__(603),
    className: "object event-message",

    ui: {
        "remove_event_message": "span.remove-event-message"
    },

    events: {
        "click @ui.remove_event_message": "onRemoveEventMessage"
    },

    initialize: function() {
        this.listenTo(this.model, 'change', this.render, this);
    },

    onRemoveEventMessage: function() {
        this.model.destroy();
    }
});

module.exports = View;



/***/ }),
/* 603 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<span style="font-weight: bold; font-style: italic">' +
__e( moment(created_date).fromNow() ) +
'</span>&nbsp;:&nbsp;<span>' +
__e( message ) +
'</span>&nbsp; <span class="remove-event-message action fa fa-times" style="color: #ff0000"></span>';

}
return __p
};

/*
original source:

<span style="font-weight: bold; font-style: italic"><%- moment(created_date).fromNow() %></span>&nbsp;:&nbsp;<span><%- message %></span>&nbsp; <span class="remove-event-message action fa fa-times" style="color: #ff0000"></span>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 604 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
with (obj) {
__p += '<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title">' +
__e( _t("Defines the message for each language") ) +
'</h4></div><div class="modal-body" style="max-height: 400px; overflow-y: auto"><form class="messages">';

                var languages = application.main.collections.uilanguages;

                for (var i = 0; i < languages.models.length; ++i) {
                    var lang_id = languages.at(i).get('id');
                    var lang_label = languages.at(i).get('label');
                    var autofocus = (i == 0) ? 'autofocus=""' : "";
                ;
__p += ' <div class="form-group"><label class="control-label">' +
__e( _t(lang_label) ) +
'</label><input class="form-control" type="text" language="' +
__e( lang_id ) +
'" value="" maxlength="255" ' +
__e( autofocus ) +
' autocomplete="off" style="width:100%"></div> ';
 } ;
__p += ' </form></div><div class="modal-footer"><button type="button" class="btn btn-default cancel" data-dismiss="modal">' +
__e( _t("Cancel") ) +
'</button> <button type="button" class="btn btn-success apply">' +
__e( _t("Create") ) +
'</button></div></div></div>';

}
return __p
};

/*
original source:

<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title"><%- _t("Defines the message for each language") %></h4></div><div class="modal-body" style="max-height: 400px; overflow-y: auto"><form class="messages"><%
                var languages = application.main.collections.uilanguages;

                for (var i = 0; i < languages.models.length; ++i) {
                    var lang_id = languages.at(i).get('id');
                    var lang_label = languages.at(i).get('label');
                    var autofocus = (i == 0) ? 'autofocus=""' : "";
                %> <div class="form-group"><label class="control-label"><%- _t(lang_label) %></label><input class="form-control" type="text" language="<%- lang_id %>" value="" maxlength="255" <%- autofocus %> autocomplete="off" style="width:100%"></div> <% } %> </form></div><div class="modal-footer"><button type="button" class="btn btn-default cancel" data-dismiss="modal"><%- _t("Cancel") %></button> <button type="button" class="btn btn-success apply"><%- _t("Create") %></button></div></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 605 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file actionpanel.js
 * @brief Action panel layout.
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-02-02
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Marionette = __webpack_require__(1);

let View = Marionette.View.extend({
    className: "action-panel",
    template: __webpack_require__(606),

    attributes: {
        'style': 'height: 100%; padding: 5px;'
    },

    regions: {
        'content': 'div.panel-body'
    },

    ui: {
        'refresh': 'span.refresh-actions'
    },

    events: {
        'click @ui.refresh': 'onRefreshActions'
    },

    initialize: function(options) {
    },

    onRender: function() {
        let view = this;
        /*let ActionListView = require('./actionlist');

        application.main.collections.eventMessages.fetch().then(function() {
            view.showChildView('content', new ActionListView({collection: application.main.collections.action}));
        });*/
    },

    onRefreshActions: function () {
        //this.getChildView('content').collection.fetch();
    }
});

module.exports = View;


/***/ }),
/* 606 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div class="panel panel-success insider-panel"><div class="panel-heading"><span class="panel-title">' +
__e( _t("Last actions") ) +
'&nbsp;</span> <span class="fa fa-refresh action refresh-event-messages pull-right"></span></div><div class="panel-body" style="height: calc(100% - 14px - 5px - 20px); overflow-y: auto"></div></div>';

}
return __p
};

/*
original source:

<div class="panel panel-success insider-panel"><div class="panel-heading"><span class="panel-title"><%- _t("Last actions") %>&nbsp;</span> <span class="fa fa-refresh action refresh-event-messages pull-right"></span></div><div class="panel-body" style="height: calc(100% - 14px - 5px - 20px); overflow-y: auto"></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 607 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file config.js
 * @brief Config collection
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-03-22
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let ConfigModel = __webpack_require__(275);

let Collection = Backbone.Collection.extend({
    url: window.application.url(['main', 'config']),
    model: ConfigModel
});

module.exports = Collection;


/***/ }),
/* 608 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file configlist.js
 * @brief Config list view
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-03-22
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Marionette = __webpack_require__(1);
let ConfigView = __webpack_require__(609);

let View = Marionette.CollectionView.extend({
    template: "<div></div>",
    className: "config-list",
    childView: ConfigView,

    attributes: {
        'style': 'height: 100%; overflow-y: auto;'
    },

    initialize: function() {
        View.__super__.initialize.apply(this);

        this.listenTo(this.collection, 'reset', this.render, this);
    }
});

module.exports = View;



/***/ }),
/* 609 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file config.js
 * @brief Config item view
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-03-22
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Marionette = __webpack_require__(1);
let ConfigModel = __webpack_require__(275);

let View = Marionette.View.extend({
    tagName: 'div',
    template: __webpack_require__(610),
    className: "object config",

    ui: {
    },

    events: {
    },

    initialize: function() {
        this.listenTo(this.model, 'change', this.render, this);
    },

    onRender: function() {
    }
});

module.exports = View;


/***/ }),
/* 610 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_, module) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
with (obj) {
__p += '<span class="config-id label label-default"><span class="config-module" style="font-weight: bold">' +
__e( module ) +
'&nbsp;:&nbsp;</span>' +
__e( id ) +
'</span><div class="config-values"> ';
 for (var i = 0; i < values.length; ++i) { ;
__p += ' ';
 if (values[i].state == 0) { ;
__p += ' <div class="config-value-box alert alert-success"><span class="config-state label label-success">' +
__e( _t("Configured") ) +
'</span>&nbsp; <span class="config-value">' +
__e( values[i].value ) +
'</span></div> ';
 } else if (values[i].state == 1) { ;
__p += ' <div class="config-value-box alert alert-danger"><span class="config-state label label-danger">' +
__e( _t("Improperly configured") ) +
'</span>&nbsp; <span class="config-value">' +
__e( values[i].value ) +
'</span></div> ';
 } else if (values[i].state == 2) { ;
__p += ' <div class="config-value-box alert alert-warning"><span class="config-state label label-warning">' +
__e( _t("Partially configured") ) +
'</span>&nbsp; <span class="config-value">' +
__e( values[i].value ) +
'</span></div> ';
 } else { ;
__p += ' <div class="config-value-box alert alert-info"><span class="config-state label label-default">' +
__e( _t("Undefined") ) +
'</span>&nbsp; <span class="config-value">' +
__e( values[i].value ) +
'</span></div> ';
 } ;
__p += ' ';
 } ;
__p += ' </div>';

}
return __p
};

/*
original source:

<span class="config-id label label-default"><span class="config-module" style="font-weight: bold"><%- module %>&nbsp;:&nbsp;</span><%- id %></span><div class="config-values"> <% for (var i = 0; i < values.length; ++i) { %> <% if (values[i].state == 0) { %> <div class="config-value-box alert alert-success"><span class="config-state label label-success"><%- _t("Configured") %></span>&nbsp; <span class="config-value"><%- values[i].value %></span></div> <% } else if (values[i].state == 1) { %> <div class="config-value-box alert alert-danger"><span class="config-state label label-danger"><%- _t("Improperly configured") %></span>&nbsp; <span class="config-value"><%- values[i].value %></span></div> <% } else if (values[i].state == 2) { %> <div class="config-value-box alert alert-warning"><span class="config-state label label-warning"><%- _t("Partially configured") %></span>&nbsp; <span class="config-value"><%- values[i].value %></span></div> <% } else { %> <div class="config-value-box alert alert-info"><span class="config-state label label-default"><%- _t("Undefined") %></span>&nbsp; <span class="config-value"><%- values[i].value %></span></div> <% } %> <% } %> </div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0), __webpack_require__(92)(module)))

/***/ }),
/* 611 */
/***/ (function(module, exports) {

/**
 * @file entitysynonymtype.js
 * @brief Entity synonym type model
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-09-20
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let model = Backbone.Model.extend({
    url: function() {
        if (this.isNew())
            return window.application.url(['main', 'entity-synonym-type']);
        else
            return window.application.url(['main', 'entity-synonym-type', this.get('id')]);
    },

    defaults: function() {
        return {
            id: null,
            name: '',
            label: '',
            unique: false,
            multiple_entry: false,
            has_language: false,
            target_model: null,
            can_delete: false,
            can_modify: false
        }
    },
});

module.exports = model;


/***/ }),
/* 612 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file profile.js
 * @brief Profile router
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-04-19
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Marionette = __webpack_require__(1);
let EditProfileView = __webpack_require__(613);
let DefaultLayout = __webpack_require__(3);
let TitleView = __webpack_require__(4);
let ProfileModel = __webpack_require__(615);

let ProfileRouter = Marionette.AppRouter.extend({
    routes : {
        "app/main/profile/logout/": "logout",
        "app/main/profile/edit/": "edit",
    },
    
    logout: function() {
        $.ajax({
            type: "POST",
            url: window.application.url(['main', 'profile', 'logout']),
            data: {},
        }).done(function(data) {
            window.open(window.application.url(), "_self", "", true);
        });
    },

    edit: function() {
        let defaultLayout = new DefaultLayout({});
        application.main.showContent(defaultLayout);

        let model = new ProfileModel({username: window.session.user.username});

        defaultLayout.showChildView('title', new TitleView({title: _t("Edit my profile details")}));

        model.fetch().then(function() {
            defaultLayout.showChildView('content', new EditProfileView({model: model}));
        });

        //application.setDisplay('0-10-2');
    }
});

module.exports = ProfileRouter;


/***/ }),
/* 613 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file editprofile.js
 * @brief Edit user profile view
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-06-14
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Marionette = __webpack_require__(1);

let View = Marionette.View.extend({
    tagName: 'div',
    className: 'profile-edit',
    template: __webpack_require__(614),

    ui: {
        username: 'input[name=username]',
        email: 'input[name=email]',
        first_name: 'input[name=first_name]',
        last_name: 'input[name=last_name]',
        save: 'button[name=save]'
    },

    events: {
        'click @ui.save': 'updateProfile'
    },

    initialize: function(options) {
        options || (options = {});

        View.__super__.initialize.apply(this, arguments);
    },

    onRender: function() {
    },

    updateProfile: function () {
        let model = this.model;

        this.model.save({
            first_name: this.ui.first_name.val(),
            last_name: this.ui.last_name.val()
        }).done(function() {
            let text = model.get('first_name') && model.get('last_name') ? model.get('first_name') + ' ' + model.get('last_name') : model.get('username');
            $('#drop-profile span[name=label]').text(text);

            $.alert.success(_t("Done"));
        });
    }
});

module.exports = View;


/***/ }),
/* 614 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div class="user col-lg-8 col-lg-offset-2"><div class="form-group"><label>' +
__e( _t('Username') ) +
'</label><input name="username" class="form-control" value="' +
__e( username ) +
'" readonly="readonly"></div><div class="form-group"><label>' +
__e( _t('Email') ) +
'</label><input name="email" class="form-control" value="' +
__e( email ) +
'" readonly="readonly"></div><div class="row"><div class="col-md-6"><div class="form-group"><label>' +
__e( _t('First name') ) +
'</label><input name="first_name" class="form-control" value="' +
__e( first_name ) +
'"></div></div><div class="col-md-6"><div class="form-group"><label>' +
__e( _t('Last name') ) +
'</label><input name="last_name" class="form-control" value="' +
__e( last_name ) +
'"></div></div></div><div class="form-group"><button name="save" class="form-control btn btn-success">' +
__e( _t('Update') ) +
'</button></div></div>';

}
return __p
};

/*
original source:

<div class="user col-lg-8 col-lg-offset-2"><div class="form-group"><label><%- _t('Username') %></label><input name="username" class="form-control" value="<%- username %>" readonly="readonly"></div><div class="form-group"><label><%- _t('Email') %></label><input name="email" class="form-control" value="<%- email %>" readonly="readonly"></div><div class="row"><div class="col-md-6"><div class="form-group"><label><%- _t('First name') %></label><input name="first_name" class="form-control" value="<%- first_name %>"></div></div><div class="col-md-6"><div class="form-group"><label><%- _t('Last name') %></label><input name="last_name" class="form-control" value="<%- last_name %>"></div></div></div><div class="form-group"><button name="save" class="form-control btn btn-success"><%- _t('Update') %></button></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 615 */
/***/ (function(module, exports) {

/**
 * @file profile.js
 * @brief Profile model
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-08-29
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

module.exports = Backbone.Model.extend({
    defaults: function() {
        return {
            id: '',
            username: '',
            first_name: '',
            last_name: '',
            email: ''
        }
    },

    url: function() {
        return window.application.url(['main', 'profile']);
    }
});


/***/ }),
/* 616 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {/**
 * @file cache.js
 * @brief Global cache manager.
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-07-07
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let CacheFetcher = __webpack_require__(41);

let Cache = function() {
    this.data = {};
    this.fetcher = {};
    this.collection = {};
};

Cache.prototype = {
    /**
     * Register a cache category.
     * @param cacheType Name of the category.
     */
    register: function(cacheType) {
        if (cacheType in this.data) {
            return;
        }

        this.data[cacheType] = {};
    },

    /**
     * Is as cache type previously registered.
     * @param cacheType Name of the category.
     * @returns {boolean}
     */
    hasType: function(cacheType) {
        return cacheType in this.data;
    },

    /**
     * Get a cache from its cache type and key.
     * @param cacheType Cache type is a first classification key.
     * @param key Key of the cache to get.
     * @returns {} cache object. It is empty at the first call.
     */
    get: function(cacheType, key) {
        if (cacheType in this.data) {
            let category = this.data[cacheType];

            if (key in category) {
                return category[key];
            } else {
                let cache = {};
                category[key] = cache;

                return cache;
            }
        } else {
            return null;
        }
    },

    unset: function(cacheType, key) {
        if (cacheType in this.data) {
            let category = this.data[cacheType];

            if (key in category) {
                delete category[key];
            }
        }
    },

    has: function(cacheType, key) {
        if (cacheType in this.data) {
            let category = this.data[cacheType];
            return key in category;
        } else {
            return false;
        }
    },

    /**
     * Invalidate a cache entry.
     * @param cacheType Cache type is a first classification key.
     * @param key Key of the cache to get.
     * @param values null or a list of value or a wild-char.
     */
    invalidate: function(cacheType, key, values) {
        values || (values = null);

        if (cacheType in this.data) {
            let category = this.data[cacheType];
            console.log(this.data, this.collection)

            if (values) {
                // @todo an invalidate per value
            } else if (key.startsWith('*')) {
                let match = key.replace('*', '');
                let rmList = [];

                for (key in category) {
                    if (key.endsWith(match)) {
                        rmList.push(key);
                    }
                }

                for (let i = 0; i < rmList.length; ++i) {
                    console.debug("Cache invalidation", cacheType + "__" + rmList[i]);
                    delete category[rmList[i]];
                }

                if (cacheType in this.collection) {
                    for (key in this.collection[cacheType]) {
                        if (key.endsWith(match)) {
                            console.debug("Cache invalidation", cacheType + "__" + key);
                            this.collection[cacheType][key].fetch({reset: true});
                        }
                    }
                }
            } else if (key.endsWith('*')) {
                let match = key.replace('*', '');
                let rmList = [];

                for (key in category) {
                    if (key.startsWith(match)) {
                        rmList.push(key);
                    }
                }

                for (let i = 0; i < rmList.length; ++i) {
                    console.debug("Cache invalidation", cacheType + "__" + rmList[i]);
                    delete category[rmList[i]];
                }

                if (cacheType in this.collection) {
                    for (key in this.collection[cacheType]) {
                        if (key.startsWith(match)) {
                            console.debug("Cache invalidation", cacheType + "__" + key);
                            this.collection[cacheType][key].fetch({reset: true});
                        }
                    }
                }
            } else if (key in category) {
                console.debug("Cache invalidation", cacheType + "__" + key);
                delete category[key];
            }
        }
    },

    /**
     * Register a specific cache fetcher.
     * @param fetcher Valid cache fetcher instance.
     */
    registerFetcher: function(fetcher) {
        if (!fetcher || !(fetcher instanceof CacheFetcher)) {
            return;
        }

        if (fetcher.type in this.fetcher) {
            throw "A cache fetcher is already registered with this type (" + fetcher.type + ")";
        }

        this.fetcher[fetcher.type] = fetcher;
    },

    /**
     * If a fetcher is defined for a certain type.
     */
    hasFetcher: function (cacheType) {
        return cacheType in this.fetcher;
    },

    /**
     * Fetch from a specific cache type/value using a fetcher.
     * @param options Cache determination and details.
     * @param keys Keys of value to fetch
     * @return A promise or null
     */
    fetch: function(options, keys) {
        let cacheType = options.type;

        if (cacheType in this.fetcher) {
            return this.fetcher[cacheType].fetch(this, options, keys);
        } else {
            throw "Unregistered cache fetcher for this type (" + cacheType + ")"
        }
    },

    /**
     * Lookup for a single key and return a promise with a data object containing a reference to the key.
     * @param options
     * @param keys Array of keys
     * @returns A promise
     */
    lookup: function(options, keys) {
        let cacheType = options.type;

        if (cacheType in this.fetcher) {
            let fetcher = this.fetcher[cacheType];

            let deferred = $.Deferred();
            let self = this;

            let promise = fetcher.fetch(this, options, keys);
            if (promise) {
                promise.done(function(data) {
                    deferred.resolve(fetcher.get(self, options));
                });
            } else {
                deferred.resolve(fetcher.get(this, options));
            }

            return deferred.promise();
        } else {
            throw "Unregistered cache fetcher for this type (" + cacheType + ")";
        }
    },

    enable: function () {
        this.enabled = true;
    },

    disable: function () {
        this.enabled = false;
    },

    /**
     * Register a cached collection.
     * @param collection
     */
    registerCollection: function(collection) {
        let cacheInfo = _.isFunction(collection.cache) ? collection.cache() : collection.cache;

        if (cacheInfo.category in this.data) {
            if (!(cacheInfo.category in this.collection)) {
                // init category into collection dict
                this.collection[cacheInfo.category] = {};
            }

            if (cacheInfo.key in this.collection[cacheInfo.category]) {
                // avoid multiples
                return;
            }

            this.collection[cacheInfo.category][cacheInfo.key] = collection;
        } else {
            throw "Unregistered cache for this type (" + cacheInfo.category + ")";
        }
    }
};

module.exports = Cache;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 617 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file entitycachefetcher.js
 * @brief Cache fetcher specialized for entity display value.
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-09-05
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let CacheFetcher = __webpack_require__(41);

let EntityCacheFetcher = function() {
    CacheFetcher.call(this);

    this.type = "entity";
};

EntityCacheFetcher.prototype = Object.create(CacheFetcher.prototype);
EntityCacheFetcher.prototype.constructor = EntityCacheFetcher;

EntityCacheFetcher.prototype.fetch = function(cacheManager, options, keys) {
    // make the list of values
    let keysToFetch = new Set();

    let cache = cacheManager.get('entity', options.format.model);
    let toFetch = false;
    let now = Date.now();

    if (cacheManager.enabled) {
        // lookup into the global cache
        for (let i = 0; i < keys.length; ++i) {
            let key = keys[i];
            let entry = undefined;

            toFetch = false;

            if (key !== null && key !== undefined && key !== "") {
                entry = cache[key];
            }

            if (entry !== undefined) {
                // found. look for validity
                if (entry.expire !== null && entry.expire <= now) {
                    toFetch = true;
                }
            } else if (key !== null && key !== undefined && key !== "") {
                toFetch = true;
            }

            if (toFetch) {
                keysToFetch.add(key);
            }
        }
    } else {
        // all when cache disabled
        keysToFetch = new Set(keys);
    }

    let url = "";
    let queryData = {values: JSON.stringify(Array.from(keys))};

    if (options.format.details) {
        url = window.application.url(['main', 'entity', options.format.model, 'details']);
    } else {
        url = window.application.url(['main', 'entity', options.format.model, 'values']);
    }

    if (keysToFetch.size) {
        let promise = $.ajax({
            type: "GET",
            url: url,
            contentType: 'application/json; charset=utf8',
            data: queryData
        });

        promise.done(function (data) {
            // feed the cache and compute expire timestamp. validity of null means it never expires.
            let now = Date.now();
            let expire = data.validity !== null ? data.validity * 1000 + now : null;
            if (!data.cacheable) {
                expire = now;
            }

            for (let key in data.items) {
                cache[key] = {
                    expire: expire,
                    value: data.items[key]
                };
            }

            session.logger.debug("Cache miss for entity " + options.format.model + ".");
        }).fail(function () {
            session.logger.debug("Cache failure for entity " + options.format.model + ".");
        });

        return promise;
    } else {
        return null;
    }
};

EntityCacheFetcher.prototype.get = function(cacheManager, options) {
    return cacheManager.get('entity', options.format.model);
};

module.exports = EntityCacheFetcher;


/***/ }),
/* 618 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file language.js
 * @brief Language collection
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-04-12
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let CachedCollection = __webpack_require__(277);
let LanguageModel = __webpack_require__(619);

let LanguageCollection = CachedCollection.extend({
    url: window.application.url(['main', 'language']),
    model: LanguageModel,

    cache: function() {
        return {
            category: 'main',
            key: 'languages:' + window.session.language
        }
    },

    initialize: function (options) {
        options || (options = {});

        LanguageCollection.__super__.initialize.apply(this, arguments);
    },

    parse: function(data) {
        return data;
    },

    comparator: 'code',

    default: [
        {id: 'en', value: 'en', label: _t("English")},
        {id: 'fr', value: 'fr', label: _t("French")},
        {id: 'la', value: 'la', label: _t("Latin")}
    ],

    findLabel: function(value) {
        let res = this.findWhere({value: value});
        return res ? res.get('label') : '';
    },
});

module.exports = LanguageCollection;


/***/ }),
/* 619 */
/***/ (function(module, exports) {

/**
 * @file language.js
 * @brief Language model
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-04-12
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

module.exports = Backbone.Model.extend({
    defaults: function() {
        return {
            id: null,
            value: '',
            label: ''
        }
    },

    url: function() {
        if (this.isNew())
            return window.application.url(['main', 'language']);
        else
            return window.application.url(['main', 'language', this.get('id')]);
    }
});


/***/ }),
/* 620 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file uilanguage.js
 * @brief Interface language collection
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-11-10
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let InterfaceLanguageModel = __webpack_require__(621);

let Collection = Backbone.Collection.extend({
    url: window.application.url(['main', 'ui', 'language']),
    model: InterfaceLanguageModel,

    parse: function(data) {
        return data;
    },

    default: [
        {id: 'en', value: 'en', label: _t("English")},
        {id: 'fr', value: 'fr', label: _t("French")}
    ],

    findLabel: function(value) {
        let res = this.findWhere({value: value});
        return res ? res.get('label') : '';
    },
});

module.exports = Collection;


/***/ }),
/* 621 */
/***/ (function(module, exports) {

/**
 * @file uilanguage.js
 * @brief Interface language model
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-11-10
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

module.exports = Backbone.Model.extend({
    defaults: function() {
        return {
            id: 0,
            value: '',
            label: ''
        }
    },
    url: window.application.url(['main', 'ui', 'language', ':id'])
});



/***/ }),
/* 622 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file contenttype.js
 * @brief Content type collection
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-07-08
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let ContentTypeModel = __webpack_require__(623);

let Collection = Backbone.Collection.extend({
    url: window.application.url(['main', 'content-type']),
    model: ContentTypeModel,

    toJSON: function() {
        let result = [];
        let prev = "";
        let group = {};

        for (let i = 0; i < this.models.length; ++i) {
            let model = this.models[i];
            let value = model.get('value').split('.');

            if (value[0] !== prev) {
                group = {id: -1, value: value[0], label: value[0], options: []};
                result.push(group);
            }

            group.options.push({
                id: model.get('id'),
                value: model.get('value'),
                label: model.get('label')
            });

            prev = value[0];
        }

        return result;
    },

    default: [],

    findValue: function(id) {
        let res = this.findWhere({id: id});
        return res ? res.get('value') : '';
    },

    findLabel: function(value) {
        let res = this.findWhere({value: value});
        return res ? res.get('label') : '';
    }
});

module.exports = Collection;


/***/ }),
/* 623 */
/***/ (function(module, exports) {

/**
 * @file contenttype.js
 * @brief Content type model
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-07-08
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

module.exports = Backbone.Model.extend({
    url: window.application.url(['main', 'content-type', ':id']),

    defaults: function() {
        return {
            id: 0,
            value: '',
            label: '',
            group: ''
        }
    }
});



/***/ }),
/* 624 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file eventmessage.js
 * @brief Event message collection
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-02-02
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let CountableCollection = __webpack_require__(9);
let EventMessageModel = __webpack_require__(625);

let Collection = CountableCollection.extend({
    url: window.application.url(['main', 'event-message']),
    model: EventMessageModel,

    comparator: 'created_date',
});

module.exports = Collection;


/***/ }),
/* 625 */
/***/ (function(module, exports) {

/**
 * @file eventmessage.js
 * @brief Event message model
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-02-02
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Model = Backbone.Model.extend({
    defaults: function() {
        return {
            id: null,
            created_date: '',
            author: null,
            author_details: {
                first_name: '',
                last_name: ''
            },
            message: ''
        }
    }
});

module.exports = Model;



/***/ }),
/* 626 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {/**
 * @file dnd.js
 * @brief Drag and drop global management.
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-07-07
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let DragAndDrop = function() {
    this.dndType = 'undefined';
    this.classification = [];
    this.dnd = null;
    this.dndTarget = null;

    this.SELECTOR = 'selector';
    this.VIEW = 'view';
    this.ARRAY = 'array';
    this.OBJECT = 'object';
    this.INTEGER = 'integer';
    this.NUMBER = 'number';
    this.STRING = 'string';
    this.UNDEFINED = 'undefined';
};

DragAndDrop.prototype = {
    /**
     * Set current DND object.
     */
    set: function(dnd, classification) {
        classification || (classification = '');

        if (dnd) {
            this.dnd = dnd;
            this.classification = classification.split(' ');

            if (dnd instanceof jQuery) {
                this.dndType = this.SELECTOR;
            } else if (dnd instanceof Backbone.View) {
                this.dndType = this.VIEW;
            } else if (dnd instanceof Array) {
                this.dndType = this.ARRAY;
            } else if (dnd instanceof Object) {
                this.dndType = this.OBJECT;
            } else {
                if (typeof dnd === Number) {
                    if (Number.isInteger(dnd)) {
                        this.dndType = this.INTEGER;
                    } else {
                        this.dndType = this.NUMBER;
                    }
                } else if (typeof dnd === 'string') {
                    this.dndType = this.STRING;
                } else {
                    this.dndType = this.UNDEFINED;
                }
            }
        } else {
            this.unset();
        }
    },

    get: function() {
        return this.dnd;
    },

    getTarget: function() {
        return this.dndTarget;
    },

    /**
     * Unset previously DND object.
     */
    unset: function() {
        if (this.dnd) {
            this.dnd = null;
            this.dndTarget = null;
            this.dndType = this.UNDEFINED;
            this.classification = [];
        }
    },

    /**
     * Is current DND element defined.
     * @param type Type of dnd object.
     * @param classification If not null compare with the list of classification previously set.
     * If classification is null the comparison is based only of the type.
     */
    is: function(type, classification) {
        type || (type = 'selector');

        if (this.dnd) {
            if (this.dndType === type) {
                if (classification) {
                    let classes = classification.split(' ');
                    return _.difference(classes, this.classification).length === 0;
                } else {
                    return true;
                }
            } else {
                return false;
            }
        } else {
            return false;
        }
    },

    /**
     * Is the current unique instance of DND object is valid and is a jQuery element.
     */
    isSelector: function(classification) {
        return this.is(this.SELECTOR, classification);
    },

    /**
     * Is the current unique instance of DND object is valid and is a backbone view.
     */
    isView: function(classification) {
        return this.is(this.VIEW, classification);
    },

    /**
     * The list of classification is ORed and not ANDed compared to has method.
     * @param type Type of dnd object.
     * @param classifications If not null compare with the list of classification previously set.
     */
    has: function(type, classifications) {
        type || (type = 'selector');

        if (this.dnd) {
            if (this.dndType === type) {
                if (classifications) {
                    let classes = classifications.split(' ');
                    return _.intersection(classes, this.classification).length > 0;
                } else {
                    return true;
                }
            } else {
                return false;
            }
        } else {
            return false;
        }
    },

    /**
     * Helper for accept of type of jQuery selector.
     */
    hasSelector: function(classifications) {
        return this.has(this.SELECTOR, classifications);
    },

    /**
     * Helper for accept of type of backbone view.
     */
    hasView: function(classifications) {
        return this.has(this.VIEW, classifications);
    },

    /**
     * Set the target element of the current dnd.
     * @param target Must be of the same type than dnd.
     */
    setTarget: function(target) {
        if (this.dnd) {
            let targetType = undefined;

            if (target instanceof jQuery) {
                targetType = this.SELECTOR;
            } else if (target instanceof Backbone.View) {
                targetType = this.VIEW;
            } else if (target instanceof Array) {
                targetType = this.ARRAY;
            } else if (target instanceof Object) {
                targetType = this.OBJECT;
            } else {
                if (typeof target === Number) {
                    if (Number.isInteger(target)) {
                        targetType = this.INTEGER;
                    } else {
                        targetType = this.NUMBER;
                    }
                } else if (typeof target === 'string') {
                    targetType = this.STRING;
                } else {
                    targetType = this.UNDEFINED;
                }
            }

            if (this.dndType === targetType) {
                this.dndTarget = target;
            } else {
                throw "Dnd source and target differs";
            }
        }
    },

    unsetTarget: function() {
        if (this.dnd) {
            this.dndTarget = null;
        }
    }
};

module.exports = DragAndDrop;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 627 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file menumanager.js
 * @brief Dynamic menu manager.
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-08-24
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Menu = __webpack_require__(278);

let MenuManager = function(parent) {
    this.$el = parent;
    this.menus = [];
};

MenuManager.prototype = {
    /**
     * Merge a menu to original menu.
     * @param org
     * @param menu
     */
    mergeMenu: function(org, menu) {
        for (let i = 0; i < menu.entries.length; ++i) {
            org.entry(menu.entries[i]);
        }
    },

    /**
     * Add a new menu to this module. If the menu already exists it is merged with the previous one.
     * @param menu A valid module menu.
     */
    addMenu: function(menu, update) {
        typeof update !== "undefined" || (update = true);

        if (!menu) {
            return;
        }

        if (!(menu instanceof Menu)) {
            throw "menu Must be a Menu object"
        }

        for (let i = 0; i < this.menus.length; ++i) {
            if (this.menus[i].name === menu.name) {
                this.mergeMenu(this.menus[i], menu);
                return;
            }
        }

        let pos = 0;
        for (let i = 0; i < this.menus.length; ++i) {
            if (this.menus[i].order <= menu.order) {
                ++pos;
            } else {
                break;
            }
        }

        this.menus.splice(pos, 0, menu);

        if (this.$el && update) {
            menu.render(this.$el, pos);
        }
    },

    destroy: function() {
        if (this.$el) {
            this.$el.find('li.dropdown').remove();
        }
    },

    /**
     * Render all menu
     * @param parent
     */
    render: function() {
        if (this.$el) {
            this.destroy();

            for (let i = 0; i < this.menus.length; ++i) {
                this.menus[i].render(this.$el, -1);
            }
        }
    },

    /**
     * Get a menu according to its name.
     */
    getMenu: function(name) {
        for (let i = 0; i < this.menus.length; ++i) {
            if (this.menus[i].name === name) {
                return this.menus[i];
            }
        }

        return null;
    },

    /**
     * Remove a complete menu according to its name.
     */
    removeMenu: function(name, destroy) {
        typeof destroy !== "undefined" || (destroy = true);

        for (let i = 0; i < this.menus.length; ++i) {
            let menu = this.menus[i];

            if (menu.name === name) {
                if (destroy) {
                    menu.destroy();
                }

                this.menus.splice(i, 1);
                return;
            }
        }
    }
};

module.exports = MenuManager;


/***/ }),
/* 628 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file main.js
 * @brief Main (root) layout with 3 columns
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-01-26
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Marionette = __webpack_require__(1);

let MainLayout = Marionette.View.extend({
    template: __webpack_require__(629),
    className: "column",

    regions: {
        'left': "div.root-left-bar",
        'content': "div.root-content",
        'right': "div.root-right-bar"
    },

    ui: {
        'left': "div.root-left-bar",
        'content': "div.root-content",
        'right': "div.root-right-bar"
    },

    check_status_timeout: 3*60*1000,   // every 3 minutes

    initialize: function() {
        let uiSetting = window.application.getUserSetting(
            "ui", window.application.UI_SETTING_VERSION, window.application.UI_DEFAULT_SETTING);

        this.currentDisplayMode = uiSetting['display_mode'];
        this.compactDisplay = false;
    },

    setDisplay: function(mode) {
        // full width for mobile devices
        let panels = [
            this.ui.left,
            this.ui.content,
            this.ui.right
        ];

        let m = mode.split('-');
        for (let i = 0; i < panels.length; ++i) {
            let classes = panels[i].attr('class').split(' ');

            for (let j = 0; j < classes.length; ++j) {
                if (classes[j].startsWith('col-')) {
                    panels[i].removeClass(classes[j]);
                }
            }

            if (m[i] && m[i] > 0) {
                panels[i].addClass("col-md-" + m[i]);
                panels[i].css("display", "block");
            }
            else {
                panels[i].addClass("col-md-" + m[i]);
                panels[i].css("display", "none");
            }
        }

        this.currentDisplayMode = mode;

        window.application.updateMessengerDisplay();
    },

    onResize: function() {
        let view = this.getChildView('left');
        if (view && view.onResize) {
            view.onResize();
        }

        view = this.getChildView('content');
        if (view && view.onResize) {
            view.onResize();
        }

        view = this.getChildView('right');
        if (view && view.onResize) {
            view.onResize();
        }

        // this.ui.right.css('height', this.ui.content.height() + 10 + "px");  bug on table on resize
        this.ui.right.css('height', "100%");

        // hide if previously shown
        if (this.ui.right.hasClass('col-is-hover') && this.ui.content.hasClass('col-md-12')) {
            this.hideRightPane();
        }

        // restricted width
        if ($(window).width() <= 994/*768*/) {
            this.compactDisplay = true;

            // full width for mobile devices
            this.setDisplay('0-12-0');
        } else {
            if (this.compactDisplay) {
                let displayMode = window.application.getUserSetting(
                    "ui", window.application.UI_SETTING_VERSION, window.application.UI_DEFAULT_SETTING)['display_mode'];

                // restore to previous setting
                this.setDisplay(displayMode);
                this.compactDisplay = false;
            }
        }

        // display grabber in full width
        if (this.ui.content.hasClass('col-md-12') || this.compactDisplay) {
            let right = $('div.container').css('padding-right').replace('px', '');
            this.ui.content.children('div.root-right-bar-grabber').css('display', 'block').css('right', '-' + right + 'px');
        } else {
            this.ui.content.children('div.root-right-bar-grabber').css('display', 'none')
        }
    },

    childViewEvents: {
        'select:tab': function (region, child) {
            this.triggerMethod('select:tab', region, child);
        },
        'dom:refresh': function(child) {
            // re-inject the grabber column each time the content has changed
            if (child && child.$el.parent().hasClass('root-content')) {
                let grabber = this.ui.content.children('div.root-right-bar-grabber');
                if (grabber.length === 0) {
                    grabber = $('<div class="root-right-bar-grabber"></div>');
                    this.ui.content.append(grabber);

                    this.ui.content.children('div.root-right-bar-grabber').on('mouseover', $.proxy(this.onMouseHoverRightPane, this));
                }

                if (this.ui.content.hasClass('col-md-12')) {
                    let right = $('div.container').css('padding-right').replace('px', '');
                    grabber.css('display', 'block').css('right', '-' + right + 'px');
                } else {
                    grabber.css('display', 'none');
                }
            }
        }
    },

    onDomRefresh: function() {
        $('body').on('mouseover', $.proxy(this.onMouseOut, this));
        $(window).on('scroll', $.proxy(this.onWindowScroll, this));
        $(window).on('focus', $.proxy(this.onWindowFocus, this));
    },

    onDestroy: function() {
        // cleanup bound events
        $('body').off('mouseover', $.proxy(this.onMouseOut, this));
        $(window).off('scroll', $.proxy(this.onWindowScroll, this));
    },

    onWindowScroll: function() {
        if (this.ui.right.hasClass('col-is-hover') && this.ui.content.hasClass('col-md-12')) {
            let top = this.ui.content.position().top;
            let height = this.ui.content.outerHeight();

            // adjust top position for mobile devices
            let scrollTop = $(window).scrollTop();
            if (scrollTop !== 0 || $(window).height() < $('body').height()) {
                top = scrollTop + 15;
                height = $(window).height() - 30;
            }

            this.ui.right.css('top', top).css('height', height);
        }
    },

    onMouseHoverRightPane: function() {
        if (!this.ui.right.hasClass('col-is-hover') && this.ui.content.hasClass('col-md-12')) {
            if (this.ui.right.children().length === 0) {
                return false;
            }

            let top = this.ui.content.position().top;
            let height = this.ui.content.outerHeight();

            // for mobile devices the top and height must be adjusted by scroll height and viewport height
            let scrollTop = $(window).scrollTop();
            if (scrollTop !== 0 || $(window).height() < $('body').height()) {
                top = scrollTop + 15;
                height = $(window).height() - 30;
            }

            this.ui.right.css({
                position: 'absolute',
                display: 'block',
                'min-width': '16.6667%',
                'max-width': '33.3334%',
                right: '0px',
                height: height + "px",
                top: top + "px",
                'padding-right': '0px',
                'z-index': 1000
            }).addClass('col-is-hover');

            this.ui.right.children('div').children('div')
                .css('border-left', '5px solid #444')
                .css('border-right', '0')
                .css('border-top', '5px solid #444')
                .css('border-bottom', '5px solid #444');
        }

        return false;
    },

    onMouseOut: function(e) {
        if ($(e.target).closest('div.root-right-bar').length > 0) {
            return false;
        }

        this.hideRightPane();
        this.checkSessionValidity();

        return false;
    },

    hideRightPane: function() {
        if (this.ui.right.hasClass('col-is-hover') && this.ui.content.hasClass('col-md-12')) {
            this.ui.right.css({
                position: '',
                display: 'none',
                width: '',
                right: '',
                top: '',
                'padding-right': '5px',
                'z-index': ''
            }).removeClass('col-is-hover');

            this.ui.right.children('div').children('div')
                .css('border-left', '')
                .css('border-right', '')
                .css('border-top', '')
                .css('border-bottom', '');
        }
    },
    
    onWindowFocus: function () {
        this.checkSessionValidity();
        return false;
    },

    checkSessionValidity: function() {
        // only if user is authenticated
        if (!session.user.isAuth) {
            return;
        }

        // check only if no activities since a certain delta time
        let now = new Date().getTime();
        if (now - session.user.lastAction > this.check_status_timeout) {
            if (this.checkStatus) {
                return;
            }

            this.checkStatus = true;

            $.ajax({
                method: "GET",
                url: window.application.url(['main', 'profile', 'status']),
                dataType: 'json',
                view: this
            }).done(function (data) {
                // lastAction timestamp is set during global jQuery callback on driver.js
                this.view.checkStatus = false;

                if (!data.is_auth) {
                    session.user.isAuth = false;

                    // session terminated, message and back to home page
                    window.location.assign(window.application.url(['app', 'home']));
                }
            });
        }
    }
});

module.exports = MainLayout;


/***/ }),
/* 629 */
/***/ (function(module, exports) {

underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '';
with (obj) {
__p += '<div class="col-md-2 root-left-bar"></div><div class="col-md-8 root-content"></div><div class="col-md-2 root-right-bar"></div>';

}
return __p
};

/*
original source:

<div class="col-md-2 root-left-bar"></div><div class="col-md-8 root-content"></div><div class="col-md-2 root-right-bar"></div>
*/


/***/ }),
/* 630 */
/***/ (function(module, exports) {

underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '';
with (obj) {
__p += '';

}
return __p
};

/*
original source:


*/


/***/ }),
/* 631 */
/***/ (function(module, exports) {

/**
 * @file messenger.js
 * @brief WebSocket connector to messenger service
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-10-06
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Messenger = function() {
    this.host = window.location.hostname;
    this.port = 8002;
    this.path = window.application.url('messenger');
    this.socket = null;
    this.attempt = 0;

    this.RETRY_DELAY = 5000;
    this.CONNECT_DELAY = 500;
    this.MAX_ATTEMPTS = 10;

    this.COMMAND_CACHE_INVALIDATION = 1;
};

/**
 * Connect to the service.
 */
Messenger.prototype.connect = function(force) {
    force || (force = false);

    let self = this;

    if (this.socket) {
        return;
    }

    if (force) {
        self.attempt = 0;
    }

    ++self.attempt;

    if (self.attempt > self.MAX_ATTEMPTS) {
        return;
    }

    let retry = function(self) {
        // disable cache persistence
        window.application.main.cache.disable();

        setTimeout(function (self) {
            self.connect();
        }, self.RETRY_DELAY * self.attempt, self);
    };

    // obtain the messengerid
    $.ajax({
        type: "GET",
        url: window.application.url(['messenger', 'messengerid']),
        dataType: 'json'
    }).done(function(data) {
        if (!data.alive) {
            return retry(self);
        }

        // deferred to 0.5sec
        setTimeout(function(self, connection) {
            let url = window.application.makeUrl(
                "ws://", connection.host, connection.port, connection.path.split('/'), {
                    username: window.session.user.username,
                    messengerid: connection.messengerid
            });

            try {
                self.socket = new WebSocket(url);
            } catch (e) {
                return retry(self);
            }

            self.socket.onmessage = function (e) {
                let data = JSON.parse(e.data);

                if (data.command === self.COMMAND_CACHE_INVALIDATION) {
                    window.application.main.cache.invalidate(data.data.category, data.data.name);
                }
            };

            self.socket.onclose = function () {
                self.socket = null;
                return retry(self);
            };

            self.socket.onopen = function () {
                self.attempt = 0;
                self.messengerid = connection.messengerid;
                self.host = connection.host;
                self.port = connection.port;
                self.path = window.application.url(connection.path);

                // enable cache persistence
                window.application.main.cache.enable();

                window.session.logger.info(_t("Connected to messenger"));
            };

            // Call onopen directly if socket is already open
            if (self.socket.readyState === WebSocket.OPEN) {
                self.socket.onopen();
            }
        }, self.CONNECT_DELAY, self, data);
    }).fail(function() {
        $.alert(_t("Unable to get a messenger identifier"));

        return retry(self);
    });
};

Messenger.prototype.disconnect = function() {
    if (this.socket) {
        delete this.socket;
        this.socket = null;
    }
};

Messenger.prototype.message = function(data) {
    if (!this.socket) {
        return;
    }

    this.socket.send(JSON.stringify(data));
};

module.exports = Messenger;


/***/ }),
/* 632 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file init.js
 * @brief Media library module init entry point
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-01-09
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Marionette = __webpack_require__(1);

__webpack_require__(633);

__webpack_require__(634);
__webpack_require__(635);

let MediaLibraryModule = function() {
    this.name = "medialibrary";
};

MediaLibraryModule.prototype = {
    initialize: function(app, options) {
        this.models = {};
        this.collections = {};
        this.views = {};
        this.routers = {};
        this.controllers = {};

        try {
            i18next.default.addResources(session.language, 'default', __webpack_require__(636)("./" + session.language + '/default.json'));
        } catch (e) {
            console.warn("No translation found for the current language. Fallback to english language");
        }

        //
        // descriptor format types
        //

        // register the format type of descriptors
        let widgets = [
            'media',
            'media_collection'
        ];

        for (let i = 0; i < widgets.length; ++i) {
            let moduleName = widgets[i].replace('_', '').toLowerCase();
            application.descriptor.widgets.registerElement(widgets[i], __webpack_require__(639)("./" + moduleName));
        }

        //
        // routers
        //

        //let MediaLibraryRouter = require('./routers/medialibrary');
        //this.routers.medialibrary = new MediaLibraryRouter();
    },

    start: function(app, options) {
        // nothing to do
    },

    stop: function(app, options) {
    }
};

module.exports = MediaLibraryModule;


/***/ }),
/* 633 */
/***/ (function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__(85);
if(typeof content === 'string') content = [[module.i, content, '']];
// Prepare cssTransformation
var transform;

var options = {"hmr":true}
options.transform = transform
// add the styles to the DOM
var update = __webpack_require__(22)(content, options);
if(content.locals) module.exports = content.locals;
// Hot Module Replacement
if(true) {
	// When the styles change, update the <style> tags
	if(!content.locals) {
		module.hot.accept(85, function() {
			var newContent = __webpack_require__(85);
			if(typeof newContent === 'string') newContent = [[module.i, newContent, '']];
			update(newContent);
		});
	}
	// When the module is disposed, remove the <style> tags
	module.hot.dispose(function() { update(); });
}

/***/ }),
/* 634 */
/***/ (function(module, exports, __webpack_require__) {

/*!
 * Viewer v0.6.0
 * https://github.com/fengyuanchen/viewer
 *
 * Copyright (c) 2014-2017 Fengyuan Chen
 * Released under the MIT license
 *
 * Date: 2017-10-07T09:53:36.889Z
 */
(function (global, factory) {
	 true ? factory(__webpack_require__(27)) :
	typeof define === 'function' && define.amd ? define(['jquery'], factory) :
	(factory(global.jQuery));
}(this, (function ($) { 'use strict';

$ = $ && $.hasOwnProperty('default') ? $['default'] : $;

var DEFAULTS = {
  // Enable inline mode
  inline: false,

  // Show the button on the top-right of the viewer
  button: true,

  // Show the navbar
  navbar: true,

  // Show the title
  title: true,

  // Show the toolbar
  toolbar: true,

  // Show the tooltip with image ratio (percentage) when zoom in or zoom out
  tooltip: true,

  // Enable to move the image
  movable: true,

  // Enable to zoom the image
  zoomable: true,

  // Enable to rotate the image
  rotatable: true,

  // Enable to scale the image
  scalable: true,

  // Enable CSS3 Transition for some special elements
  transition: true,

  // Enable to request fullscreen when play
  fullscreen: true,

  // Enable keyboard support
  keyboard: true,

  // Define interval of each image when playing
  interval: 5000,

  // Min width of the viewer in inline mode
  minWidth: 200,

  // Min height of the viewer in inline mode
  minHeight: 100,

  // Define the ratio when zoom the image by wheeling mouse
  zoomRatio: 0.1,

  // Define the min ratio of the image when zoom out
  minZoomRatio: 0.01,

  // Define the max ratio of the image when zoom in
  maxZoomRatio: 100,

  // Define the CSS `z-index` value of viewer in modal mode.
  zIndex: 2015,

  // Define the CSS `z-index` value of viewer in inline mode.
  zIndexInline: 0,

  // Define where to get the original image URL for viewing
  // Type: String (an image attribute) or Function (should return an image URL)
  url: 'src',

  // Event shortcuts
  ready: null,
  show: null,
  shown: null,
  hide: null,
  hidden: null,
  view: null,
  viewed: null
};

var TEMPLATE = '<div class="viewer-container">' + '<div class="viewer-canvas"></div>' + '<div class="viewer-footer">' + '<div class="viewer-title"></div>' + '<ul class="viewer-toolbar">' + '<li role="button" class="viewer-zoom-in" data-action="zoom-in"></li>' + '<li role="button" class="viewer-zoom-out" data-action="zoom-out"></li>' + '<li role="button" class="viewer-one-to-one" data-action="one-to-one"></li>' + '<li role="button" class="viewer-reset" data-action="reset"></li>' + '<li role="button" class="viewer-prev" data-action="prev"></li>' + '<li role="button" class="viewer-play" data-action="play"></li>' + '<li role="button" class="viewer-next" data-action="next"></li>' + '<li role="button" class="viewer-rotate-left" data-action="rotate-left"></li>' + '<li role="button" class="viewer-rotate-right" data-action="rotate-right"></li>' + '<li role="button" class="viewer-flip-horizontal" data-action="flip-horizontal"></li>' + '<li role="button" class="viewer-flip-vertical" data-action="flip-vertical"></li>' + '</ul>' + '<div class="viewer-navbar">' + '<ul class="viewer-list"></ul>' + '</div>' + '</div>' + '<div class="viewer-tooltip"></div>' + '<div role="button" class="viewer-button" data-action="mix"></div>' + '<div class="viewer-player"></div>' + '</div>';

var _window = window;
var PointerEvent = _window.PointerEvent;


var NAMESPACE = 'viewer';

// Actions
var ACTION_MOVE = 'move';
var ACTION_SWITCH = 'switch';
var ACTION_ZOOM = 'zoom';

// Classes
var CLASS_ACTIVE = NAMESPACE + '-active';
var CLASS_CLOSE = NAMESPACE + '-close';
var CLASS_FADE = NAMESPACE + '-fade';
var CLASS_FIXED = NAMESPACE + '-fixed';
var CLASS_FULLSCREEN = NAMESPACE + '-fullscreen';
var CLASS_FULLSCREEN_EXIT = NAMESPACE + '-fullscreen-exit';
var CLASS_HIDE = NAMESPACE + '-hide';
var CLASS_HIDE_MD_DOWN = NAMESPACE + '-hide-md-down';
var CLASS_HIDE_SM_DOWN = NAMESPACE + '-hide-sm-down';
var CLASS_HIDE_XS_DOWN = NAMESPACE + '-hide-xs-down';
var CLASS_IN = NAMESPACE + '-in';
var CLASS_INVISIBLE = NAMESPACE + '-invisible';
var CLASS_MOVE = NAMESPACE + '-move';
var CLASS_OPEN = NAMESPACE + '-open';
var CLASS_SHOW = NAMESPACE + '-show';
var CLASS_TRANSITION = NAMESPACE + '-transition';

// Events
var EVENT_READY = 'ready';
var EVENT_SHOW = 'show';
var EVENT_SHOWN = 'shown';
var EVENT_HIDE = 'hide';
var EVENT_HIDDEN = 'hidden';
var EVENT_VIEW = 'view';
var EVENT_VIEWED = 'viewed';
var EVENT_CLICK = 'click';
var EVENT_DRAG_START = 'dragstart';
var EVENT_KEY_DOWN = 'keydown';
var EVENT_LOAD = 'load';
var EVENT_POINTER_DOWN = PointerEvent ? 'pointerdown' : 'touchstart mousedown';
var EVENT_POINTER_MOVE = PointerEvent ? 'pointermove' : 'mousemove touchmove';
var EVENT_POINTER_UP = PointerEvent ? 'pointerup pointercancel' : 'touchend touchcancel mouseup';
var EVENT_RESIZE = 'resize';
var EVENT_TRANSITIONEND = 'transitionend';
var EVENT_WHEEL = 'wheel mousewheel DOMMouseScroll';

/**
 * Check if the given value is a string.
 * @param {*} value - The value to check.
 * @returns {boolean} Returns `true` if the given value is a string, else `false`.
 */
function isString(value) {
  return typeof value === 'string';
}

/**
 * Check if the given value is not a number.
 */
var isNaN = Number.isNaN || window.isNaN;

/**
 * Check if the given value is a number.
 * @param {*} value - The value to check.
 * @returns {boolean} Returns `true` if the given value is a number, else `false`.
 */
function isNumber(value) {
  return typeof value === 'number' && !isNaN(value);
}

/**
 * Check if the given value is undefined.
 * @param {*} value - The value to check.
 * @returns {boolean} Returns `true` if the given value is undefined, else `false`.
 */
function isUndefined(value) {
  return typeof value === 'undefined';
}

/**
 * Takes a function and returns a new one that will always have a particular context.
 * Custom proxy to avoid jQuery's guid.
 * @param {Function} fn - The target function.
 * @param {Object} context - The new context for the function.
 * @returns {boolean} The new function.
 */
function proxy(fn, context) {
  for (var _len = arguments.length, args = Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {
    args[_key - 2] = arguments[_key];
  }

  return function () {
    for (var _len2 = arguments.length, args2 = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {
      args2[_key2] = arguments[_key2];
    }

    return fn.apply(context, args.concat(args2));
  };
}

/**
 * Get the own enumerable properties of a given object.
 * @param {Object} obj - The target object.
 * @returns {Array} All the own enumerable properties of the given object.
 */
var objectKeys = Object.keys || function objectKeys(obj) {
  var keys = [];

  $.each(obj, function (key) {
    keys.push(key);
  });

  return keys;
};

/**
 * Get transform values from an object.
 * @param {Object} obj - The target object.
 * @returns {string} A string contains transform values.
 */
function getTransformValues(_ref) {
  var rotate = _ref.rotate,
      scaleX = _ref.scaleX,
      scaleY = _ref.scaleY;

  var values = [];

  if (isNumber(rotate) && rotate !== 0) {
    values.push('rotate(' + rotate + 'deg)');
  }

  if (isNumber(scaleX) && scaleX !== 1) {
    values.push('scaleX(' + scaleX + ')');
  }

  if (isNumber(scaleY) && scaleY !== 1) {
    values.push('scaleY(' + scaleY + ')');
  }

  return values.length > 0 ? values.join(' ') : 'none';
}

/**
 * Get an image name from an image url.
 * @param {string} url - The target url.
 * @example
 * // picture.jpg
 * getImageNameFromURL('http://domain.com/path/to/picture.jpg?size=1280×960')
 * @returns {string} A string contains the image name.
 */
function getImageNameFromURL(url) {
  return isString(url) ? url.replace(/^.*\//, '').replace(/[?&#].*$/, '') : '';
}

/**
 * Get an image's natural sizes.
 * @param {string} image - The target image.
 * @param {Function} callback - The callback function.
 */
function getImageNaturalSizes(image, callback) {
  // Modern browsers and IE9+
  if (image.naturalWidth) {
    callback(image.naturalWidth, image.naturalHeight);
    return;
  }

  // IE8 (Don't use `new Image()` here)
  var newImage = document.createElement('img');

  newImage.onload = function () {
    callback(newImage.width, newImage.height);
  };

  newImage.src = image.src;
}

/**
 * Get the related class name of a responsive type number.
 * @param {string} type - The responsive type.
 * @returns {string} The related class name.
 */
function getResponsiveClass(type) {
  switch (type) {
    case 2:
      return CLASS_HIDE_XS_DOWN;

    case 3:
      return CLASS_HIDE_SM_DOWN;

    case 4:
      return CLASS_HIDE_MD_DOWN;

    default:
      return '';
  }
}

/**
 * Get the max ratio of a group of pointers.
 * @param {string} pointers - The target pointers.
 * @returns {number} The result ratio.
 */
function getMaxZoomRatio(pointers) {
  var pointers2 = $.extend({}, pointers);
  var ratios = [];

  $.each(pointers, function (pointerId, pointer) {
    delete pointers2[pointerId];

    $.each(pointers2, function (pointerId2, pointer2) {
      var x1 = Math.abs(pointer.startX - pointer2.startX);
      var y1 = Math.abs(pointer.startY - pointer2.startY);
      var x2 = Math.abs(pointer.endX - pointer2.endX);
      var y2 = Math.abs(pointer.endY - pointer2.endY);
      var z1 = Math.sqrt(x1 * x1 + y1 * y1);
      var z2 = Math.sqrt(x2 * x2 + y2 * y2);
      var ratio = (z2 - z1) / z1;

      ratios.push(ratio);
    });
  });

  ratios.sort(function (a, b) {
    return Math.abs(a) < Math.abs(b);
  });

  return ratios[0];
}

/**
 * Get a pointer from an event object.
 * @param {Object} event - The target event object.
 * @param {boolean} endOnly - Indicates if only returns the end point coordinate or not.
 * @returns {Object} The result pointer contains start and/or end point coordinates.
 */
function getPointer(_ref2, endOnly) {
  var pageX = _ref2.pageX,
      pageY = _ref2.pageY;

  var end = {
    endX: pageX,
    endY: pageY
  };

  if (endOnly) {
    return end;
  }

  return $.extend({
    startX: pageX,
    startY: pageY
  }, end);
}

/**
 * Get the center point coordinate of a group of pointers.
 * @param {Object} pointers - The target pointers.
 * @returns {Object} The center point coordinate.
 */
function getPointersCenter(pointers) {
  var pageX = 0;
  var pageY = 0;
  var count = 0;

  $.each(pointers, function (pointerId, _ref3) {
    var startX = _ref3.startX,
        startY = _ref3.startY;

    pageX += startX;
    pageY += startY;
    count += 1;
  });

  pageX /= count;
  pageY /= count;

  return {
    pageX: pageX,
    pageY: pageY
  };
}

var render = {
  render: function render() {
    this.initContainer();
    this.initViewer();
    this.initList();
    this.renderViewer();
  },
  initContainer: function initContainer() {
    var $window = $(window);

    this.container = {
      width: $window.innerWidth(),
      height: $window.innerHeight()
    };
  },
  initViewer: function initViewer() {
    var options = this.options,
        $parent = this.$parent;

    var viewer = void 0;

    if (options.inline) {
      viewer = {
        width: Math.max($parent.width(), options.minWidth),
        height: Math.max($parent.height(), options.minHeight)
      };
      this.parent = viewer;
    }

    if (this.fulled || !viewer) {
      viewer = this.container;
    }

    this.viewer = $.extend({}, viewer);
  },
  renderViewer: function renderViewer() {
    if (this.options.inline && !this.fulled) {
      this.$viewer.css(this.viewer);
    }
  },
  initList: function initList() {
    var $element = this.$element,
        options = this.options,
        $list = this.$list;

    var list = [];

    this.$images.each(function (i, image) {
      var alt = image.alt || getImageNameFromURL(image);
      var src = image.src;
      var url = options.url;


      if (!src) {
        return;
      }

      if (isString(url)) {
        url = image.getAttribute(url);
      } else if ($.isFunction(url)) {
        url = url.call(image, image);
      }

      list.push('<li>' + '<img' + (' src="' + src + '"') + ' data-action="view"' + (' data-index="' + i + '"') + (' data-original-url="' + (url || src) + '"') + (' alt="' + alt + '"') + '>' + '</li>');
    });

    $list.html(list.join('')).find('img').one(EVENT_LOAD, {
      filled: true
    }, $.proxy(this.loadImage, this));

    this.$items = $list.children();

    if (options.transition) {
      $element.one(EVENT_VIEWED, function () {
        $list.addClass(CLASS_TRANSITION);
      });
    }
  },
  renderList: function renderList(index) {
    var i = index || this.index;
    var width = this.$items.eq(i).width();

    // 1 pixel of `margin-left` width
    var outerWidth = width + 1;

    // Place the active item in the center of the screen
    this.$list.css({
      width: outerWidth * this.length,
      marginLeft: (this.viewer.width - width) / 2 - outerWidth * i
    });
  },
  resetList: function resetList() {
    this.$list.empty().removeClass(CLASS_TRANSITION).css('margin-left', 0);
  },
  initImage: function initImage(callback) {
    var _this = this;

    var options = this.options,
        $image = this.$image,
        viewer = this.viewer;

    var footerHeight = this.$footer.height();
    var viewerWidth = viewer.width;
    var viewerHeight = Math.max(viewer.height - footerHeight, footerHeight);
    var oldImage = this.image || {};

    getImageNaturalSizes($image[0], function (naturalWidth, naturalHeight) {
      var aspectRatio = naturalWidth / naturalHeight;
      var width = viewerWidth;
      var height = viewerHeight;

      if (viewerHeight * aspectRatio > viewerWidth) {
        height = viewerWidth / aspectRatio;
      } else {
        width = viewerHeight * aspectRatio;
      }

      width = Math.min(width * 0.9, naturalWidth);
      height = Math.min(height * 0.9, naturalHeight);

      var image = {
        naturalWidth: naturalWidth,
        naturalHeight: naturalHeight,
        aspectRatio: aspectRatio,
        ratio: width / naturalWidth,
        width: width,
        height: height,
        left: (viewerWidth - width) / 2,
        top: (viewerHeight - height) / 2
      };
      var initialImage = $.extend({}, image);

      if (options.rotatable) {
        image.rotate = oldImage.rotate || 0;
        initialImage.rotate = 0;
      }

      if (options.scalable) {
        image.scaleX = oldImage.scaleX || 1;
        image.scaleY = oldImage.scaleY || 1;
        initialImage.scaleX = 1;
        initialImage.scaleY = 1;
      }

      _this.image = image;
      _this.initialImage = initialImage;

      if ($.isFunction(callback)) {
        callback();
      }
    });
  },
  renderImage: function renderImage(callback) {
    var image = this.image,
        $image = this.$image;


    $image.css({
      width: image.width,
      height: image.height,
      marginLeft: image.left,
      marginTop: image.top,
      transform: getTransformValues(image)
    });

    if ($.isFunction(callback)) {
      if (this.transitioning) {
        $image.one(EVENT_TRANSITIONEND, callback);
      } else {
        callback();
      }
    }
  },
  resetImage: function resetImage() {
    if (this.$image) {
      this.$image.remove();
      this.$image = null;
    }
  }
};

var events = {
  bind: function bind() {
    var $element = this.$element,
        options = this.options;


    if ($.isFunction(options.view)) {
      $element.on(EVENT_VIEW, options.view);
    }

    if ($.isFunction(options.viewed)) {
      $element.on(EVENT_VIEWED, options.viewed);
    }

    this.$viewer.on(EVENT_CLICK, $.proxy(this.click, this)).on(EVENT_WHEEL, $.proxy(this.wheel, this)).on(EVENT_DRAG_START, $.proxy(this.dragstart, this));

    this.$canvas.on(EVENT_POINTER_DOWN, $.proxy(this.pointerdown, this));

    $(document).on(EVENT_POINTER_MOVE, this.onPointerMove = proxy(this.pointermove, this)).on(EVENT_POINTER_UP, this.onPointerUp = proxy(this.pointerup, this)).on(EVENT_KEY_DOWN, this.onKeyDown = proxy(this.keydown, this));

    $(window).on(EVENT_RESIZE, this.onResize = proxy(this.resize, this));
  },
  unbind: function unbind() {
    var $element = this.$element,
        options = this.options;


    if ($.isFunction(options.view)) {
      $element.off(EVENT_VIEW, options.view);
    }

    if ($.isFunction(options.viewed)) {
      $element.off(EVENT_VIEWED, options.viewed);
    }

    this.$viewer.off(EVENT_CLICK, this.click).off(EVENT_WHEEL, this.wheel).off(EVENT_DRAG_START, this.dragstart);

    this.$canvas.off(EVENT_POINTER_DOWN, this.pointerdown);

    $(document).off(EVENT_POINTER_MOVE, this.onPointerMove).off(EVENT_POINTER_UP, this.onPointerUp).off(EVENT_KEY_DOWN, this.onKeyDown);

    $(window).off(EVENT_RESIZE, this.onResize);
  }
};

var handlers = {
  click: function click(e) {
    var $target = $(e.target);
    var action = $target.data('action');
    var image = this.image;


    switch (action) {
      case 'mix':
        if (this.played) {
          this.stop();
        } else if (this.options.inline) {
          if (this.fulled) {
            this.exit();
          } else {
            this.full();
          }
        } else {
          this.hide();
        }

        break;

      case 'view':
        this.view($target.data('index'));
        break;

      case 'zoom-in':
        this.zoom(0.1, true);
        break;

      case 'zoom-out':
        this.zoom(-0.1, true);
        break;

      case 'one-to-one':
        this.toggle();
        break;

      case 'reset':
        this.reset();
        break;

      case 'prev':
        this.prev();
        break;

      case 'play':
        this.play();
        break;

      case 'next':
        this.next();
        break;

      case 'rotate-left':
        this.rotate(-90);
        break;

      case 'rotate-right':
        this.rotate(90);
        break;

      case 'flip-horizontal':
        this.scaleX(-image.scaleX || -1);
        break;

      case 'flip-vertical':
        this.scaleY(-image.scaleY || -1);
        break;

      default:
        if (this.played) {
          this.stop();
        }
    }
  },
  dragstart: function dragstart(e) {
    if ($(e.target).is('img')) {
      e.preventDefault();
    }
  },
  keydown: function keydown(e) {
    var options = this.options;


    if (!this.fulled || !options.keyboard) {
      return;
    }

    switch (e.which) {
      // (Key: Esc)
      case 27:
        if (this.played) {
          this.stop();
        } else if (options.inline) {
          if (this.fulled) {
            this.exit();
          }
        } else {
          this.hide();
        }

        break;

      // (Key: Space)
      case 32:
        if (this.played) {
          this.stop();
        }

        break;

      // View previous (Key: ←)
      case 37:
        this.prev();
        break;

      // Zoom in (Key: ↑)
      case 38:
        // Prevent scroll on Firefox
        e.preventDefault();

        this.zoom(options.zoomRatio, true);
        break;

      // View next (Key: →)
      case 39:
        this.next();
        break;

      // Zoom out (Key: ↓)
      case 40:
        // Prevent scroll on Firefox
        e.preventDefault();

        this.zoom(-options.zoomRatio, true);
        break;

      // 48: Zoom out to initial size (Key: Ctrl + 0)
      // 49: Zoom in to natural size (Key: Ctrl + 1)
      case 48:
      case 49:
        if (e.ctrlKey || e.shiftKey) {
          e.preventDefault();
          this.toggle();
        }

        break;

      default:
    }
  },
  load: function load() {
    var _this = this;

    var options = this.options,
        viewer = this.viewer,
        $image = this.$image;


    if (this.timeout) {
      clearTimeout(this.timeout);
      this.timeout = false;
    }

    if (!$image) {
      return;
    }

    $image.removeClass(CLASS_INVISIBLE).css('cssText', '' + ('width:0;' + 'height:0;' + 'margin-left:') + viewer.width / 2 + 'px;' + ('margin-top:' + viewer.height / 2 + 'px;') + 'max-width:none!important;' + 'visibility:visible;');

    this.initImage(function () {
      $image.toggleClass(CLASS_TRANSITION, options.transition).toggleClass(CLASS_MOVE, options.movable);

      _this.renderImage(function () {
        _this.viewed = true;
        _this.trigger(EVENT_VIEWED);
      });
    });
  },
  loadImage: function loadImage(e) {
    var image = e.target;
    var $image = $(image);
    var $parent = $image.parent();
    var parentWidth = $parent.width();
    var parentHeight = $parent.height();
    var filled = e.data && e.data.filled;

    getImageNaturalSizes(image, function (naturalWidth, naturalHeight) {
      var aspectRatio = naturalWidth / naturalHeight;
      var width = parentWidth;
      var height = parentHeight;

      if (parentHeight * aspectRatio > parentWidth) {
        if (filled) {
          width = parentHeight * aspectRatio;
        } else {
          height = parentWidth / aspectRatio;
        }
      } else if (filled) {
        height = parentWidth / aspectRatio;
      } else {
        width = parentHeight * aspectRatio;
      }

      $image.css({
        width: width,
        height: height,
        marginLeft: (parentWidth - width) / 2,
        marginTop: (parentHeight - height) / 2
      });
    });
  },
  pointerdown: function pointerdown(e) {
    if (!this.viewed || this.transitioning) {
      return;
    }

    var options = this.options,
        pointers = this.pointers;
    var originalEvent = e.originalEvent;


    if (originalEvent && originalEvent.changedTouches) {
      $.each(originalEvent.changedTouches, function (i, touch) {
        pointers[touch.identifier] = getPointer(touch);
      });
    } else {
      pointers[originalEvent && originalEvent.pointerId || 0] = getPointer(originalEvent || e);
    }

    var action = options.movable ? ACTION_MOVE : false;

    if (objectKeys(pointers).length > 1) {
      action = ACTION_ZOOM;
    } else if ((e.pointerType === 'touch' || e.type === 'touchmove') && this.isSwitchable()) {
      action = ACTION_SWITCH;
    }

    this.action = action;
  },
  pointermove: function pointermove(e) {
    var $image = this.$image,
        action = this.action,
        pointers = this.pointers;


    if (!this.viewed || !action) {
      return;
    }

    e.preventDefault();

    var originalEvent = e.originalEvent;


    if (originalEvent && originalEvent.changedTouches) {
      $.each(originalEvent.changedTouches, function (i, touch) {
        $.extend(pointers[touch.identifier], getPointer(touch, true));
      });
    } else {
      $.extend(pointers[originalEvent && originalEvent.pointerId || 0], getPointer(e, true));
    }

    if (action === ACTION_MOVE && this.options.transition && $image.hasClass(CLASS_TRANSITION)) {
      $image.removeClass(CLASS_TRANSITION);
    }

    this.change(e);
  },
  pointerup: function pointerup(e) {
    if (!this.viewed) {
      return;
    }

    var action = this.action,
        pointers = this.pointers;
    var originalEvent = e.originalEvent;


    if (originalEvent && originalEvent.changedTouches) {
      $.each(originalEvent.changedTouches, function (i, touch) {
        delete pointers[touch.identifier];
      });
    } else {
      delete pointers[originalEvent && originalEvent.pointerId || 0];
    }

    if (!action) {
      return;
    }

    if (action === ACTION_MOVE && this.options.transition) {
      this.$image.addClass(CLASS_TRANSITION);
    }

    this.action = false;
  },
  resize: function resize() {
    var _this2 = this;

    this.initContainer();
    this.initViewer();
    this.renderViewer();
    this.renderList();

    if (this.viewed) {
      this.initImage(function () {
        _this2.renderImage();
      });
    }

    if (this.played) {
      if (this.options.fullscreen && this.fulled && !document.fullscreenElement && !document.mozFullScreenElement && !document.webkitFullscreenElement && !document.msFullscreenElement) {
        this.stop();
        return;
      }

      this.$player.find('img').one(EVENT_LOAD, $.proxy(this.loadImage, this)).trigger(EVENT_LOAD);
    }
  },
  start: function start(_ref) {
    var target = _ref.target;

    if ($(target).is('img')) {
      this.target = target;
      this.show();
    }
  },
  wheel: function wheel(e) {
    var _this3 = this;

    if (!this.viewed) {
      return;
    }

    e.preventDefault();

    // Limit wheel speed to prevent zoom too fast
    if (this.wheeling) {
      return;
    }

    this.wheeling = true;

    setTimeout(function () {
      _this3.wheeling = false;
    }, 50);

    var originalEvent = e.originalEvent || e;
    var delta = 1;

    if (originalEvent.deltaY) {
      delta = originalEvent.deltaY > 0 ? 1 : -1;
    } else if (originalEvent.wheelDelta) {
      delta = -originalEvent.wheelDelta / 120;
    } else if (originalEvent.detail) {
      delta = originalEvent.detail > 0 ? 1 : -1;
    }

    this.zoom(-delta * (Number(this.options.zoomRatio) || 0.1), true, e);
  }
};

var methods = {
  /**
   * Show the viewer (only available in modal mode).
   */
  show: function show() {
    var _this = this;

    var $element = this.$element,
        options = this.options;


    if (options.inline || this.transitioning) {
      return;
    }

    if (!this.ready) {
      this.build();
    }

    var $viewer = this.$viewer;


    if ($.isFunction(options.show)) {
      $element.one(EVENT_SHOW, options.show);
    }

    if (this.trigger(EVENT_SHOW).isDefaultPrevented()) {
      return;
    }

    this.$body.addClass(CLASS_OPEN);
    $viewer.removeClass(CLASS_HIDE);
    $element.one(EVENT_SHOWN, function () {
      _this.view(_this.target ? _this.$images.index(_this.target) : _this.index);
      _this.target = false;
    });

    if (options.transition) {
      this.transitioning = true;
      $viewer.addClass(CLASS_TRANSITION);

      // Force reflow to enable CSS3 transition
      // eslint-disable-next-line
      $viewer[0].offsetWidth;
      $viewer.one(EVENT_TRANSITIONEND, $.proxy(this.shown, this)).addClass(CLASS_IN);
    } else {
      $viewer.addClass(CLASS_IN);
      this.shown();
    }
  },


  /**
   * Hide the viewer (only available in modal mode).
   */
  hide: function hide() {
    var _this2 = this;

    var options = this.options,
        $viewer = this.$viewer;


    if (options.inline || this.transitioning || !this.visible) {
      return;
    }

    if ($.isFunction(options.hide)) {
      this.$element.one(EVENT_HIDE, options.hide);
    }

    if (this.trigger(EVENT_HIDE).isDefaultPrevented()) {
      return;
    }

    if (this.viewed && options.transition) {
      this.transitioning = true;
      this.$image.one(EVENT_TRANSITIONEND, function () {
        $viewer.one(EVENT_TRANSITIONEND, $.proxy(_this2.hidden, _this2)).removeClass(CLASS_IN);
      });
      this.zoomTo(0, false, false, true);
    } else {
      $viewer.removeClass(CLASS_IN);
      this.hidden();
    }
  },


  /**
   * View one of the images with image's index.
   * @param {number} index - The image index.
   */
  view: function view(index) {
    var _this3 = this;

    index = Number(index) || 0;

    if (!this.visible || this.played || index < 0 || index >= this.length || this.viewed && index === this.index) {
      return;
    }

    if (this.trigger(EVENT_VIEW).isDefaultPrevented()) {
      return;
    }

    var $item = this.$items.eq(index);
    var $img = $item.find('img');
    var alt = $img.attr('alt');
    var $image = $('<img src="' + $img.data('originalUrl') + '" alt="' + alt + '">');

    this.$image = $image;
    this.$items.eq(this.index).removeClass(CLASS_ACTIVE);
    $item.addClass(CLASS_ACTIVE);
    this.viewed = false;
    this.index = index;
    this.image = null;
    this.$canvas.html($image.addClass(CLASS_INVISIBLE));

    // Center current item
    this.renderList();

    var $title = this.$title;

    // Clear title

    $title.empty();

    // Generate title after viewed
    this.$element.one(EVENT_VIEWED, function () {
      var _image = _this3.image,
          naturalWidth = _image.naturalWidth,
          naturalHeight = _image.naturalHeight;


      $title.html(alt + ' (' + naturalWidth + ' &times; ' + naturalHeight + ')');
    });

    if ($image[0].complete) {
      this.load();
    } else {
      $image.one(EVENT_LOAD, $.proxy(this.load, this));

      if (this.timeout) {
        clearTimeout(this.timeout);
      }

      // Make the image visible if it fails to load within 1s
      this.timeout = setTimeout(function () {
        $image.removeClass(CLASS_INVISIBLE);
        _this3.timeout = false;
      }, 1000);
    }
  },


  /**
   * View the previous image.
   */
  prev: function prev() {
    this.view(Math.max(this.index - 1, 0));
  },


  /**
   * View the next image.
   */
  next: function next() {
    this.view(Math.min(this.index + 1, this.length - 1));
  },


  /**
   * Move the image with relative offsets.
   * @param {number} offsetX - The relative offset distance on the x-axis.
   * @param {number} offsetY - The relative offset distance on the y-axis.
   */
  move: function move(offsetX, offsetY) {
    var _image2 = this.image,
        left = _image2.left,
        top = _image2.top;


    this.moveTo(isUndefined(offsetX) ? offsetX : left + Number(offsetX), isUndefined(offsetY) ? offsetY : top + Number(offsetY));
  },


  /**
   * Move the image to an absolute point.
   * @param {number} x - The x-axis coordinate.
   * @param {number} [y=x] - The y-axis coordinate.
   */
  moveTo: function moveTo(x) {
    var y = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : x;

    if (!this.viewed || this.played || !this.options.movable) {
      return;
    }

    var image = this.image;

    var changed = false;

    x = Number(x);
    y = Number(y);

    if (isNumber(x)) {
      image.left = x;
      changed = true;
    }

    if (isNumber(y)) {
      image.top = y;
      changed = true;
    }

    if (changed) {
      this.renderImage();
    }
  },


  /**
   * Zoom the image with a relative ratio.
   * @param {number} ratio - The target ratio.
   * @param {boolean} [hasTooltip] - Indicates if it has a tooltip or not.
   * @param {Event} [_event] - The related event if any.
   */
  zoom: function zoom(ratio) {
    var hasTooltip = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;

    var _event = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;

    var image = this.image;


    ratio = Number(ratio);

    if (ratio < 0) {
      ratio = 1 / (1 - ratio);
    } else {
      ratio = 1 + ratio;
    }

    this.zoomTo(image.width * ratio / image.naturalWidth, hasTooltip, _event);
  },


  /**
   * Zoom the image to an absolute ratio.
   * @param {number} ratio - The target ratio.
   * @param {boolean} [hasTooltip] - Indicates if it has a tooltip or not.
   * @param {Event} [_event] - The related event if any.
   * @param {Event} [_zoomable] - Indicates if the current zoom is available or not.
   */
  zoomTo: function zoomTo(ratio) {
    var hasTooltip = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;

    var _event = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;

    var _zoomable = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;

    var options = this.options,
        image = this.image,
        pointers = this.pointers;


    ratio = Math.max(0, ratio);

    if (isNumber(ratio) && this.viewed && !this.played && (_zoomable || options.zoomable)) {
      if (!_zoomable) {
        var minZoomRatio = Math.max(0.01, options.minZoomRatio);
        var maxZoomRatio = Math.min(100, options.maxZoomRatio);

        ratio = Math.min(Math.max(ratio, minZoomRatio), maxZoomRatio);
      }

      if (_event && ratio > 0.95 && ratio < 1.05) {
        ratio = 1;
      }

      var newWidth = image.naturalWidth * ratio;
      var newHeight = image.naturalHeight * ratio;

      if (_event && _event.originalEvent) {
        var offset = this.$viewer.offset();
        var center = pointers && objectKeys(pointers).length > 0 ? getPointersCenter(pointers) : {
          pageX: _event.pageX || _event.originalEvent.pageX || 0,
          pageY: _event.pageY || _event.originalEvent.pageY || 0
        };

        // Zoom from the triggering point of the event
        image.left -= (newWidth - image.width) * ((center.pageX - offset.left - image.left) / image.width);
        image.top -= (newHeight - image.height) * ((center.pageY - offset.top - image.top) / image.height);
      } else {
        // Zoom from the center of the image
        image.left -= (newWidth - image.width) / 2;
        image.top -= (newHeight - image.height) / 2;
      }

      image.width = newWidth;
      image.height = newHeight;
      image.ratio = ratio;
      this.renderImage();

      if (hasTooltip) {
        this.tooltip();
      }
    }
  },


  /**
   * Rotate the image with a relative degree.
   * @param {number} degree - The rotate degree.
   */
  rotate: function rotate(degree) {
    this.rotateTo((this.image.rotate || 0) + Number(degree));
  },


  /**
   * Rotate the image to an absolute degree.
   * @param {number} degree - The rotate degree.
   */
  rotateTo: function rotateTo(degree) {
    var image = this.image;


    degree = Number(degree);

    if (isNumber(degree) && this.viewed && !this.played && this.options.rotatable) {
      image.rotate = degree;
      this.renderImage();
    }
  },


  /**
   * Scale the image on the x-axis.
   * @param {number} scaleX - The scale ratio on the x-axis.
   */
  scaleX: function scaleX(_scaleX) {
    this.scale(_scaleX, this.image.scaleY);
  },


  /**
   * Scale the image on the y-axis.
   * @param {number} scaleY - The scale ratio on the y-axis.
   */
  scaleY: function scaleY(_scaleY) {
    this.scale(this.image.scaleX, _scaleY);
  },


  /**
   * Scale the image.
   * @param {number} scaleX - The scale ratio on the x-axis.
   * @param {number} [scaleY=scaleX] - The scale ratio on the y-axis.
   */
  scale: function scale(scaleX) {
    var scaleY = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : scaleX;

    if (!this.viewed || this.played || !this.options.scalable) {
      return;
    }

    var image = this.image;

    var changed = false;

    scaleX = Number(scaleX);
    scaleY = Number(scaleY);

    if (isNumber(scaleX)) {
      image.scaleX = scaleX;
      changed = true;
    }

    if (isNumber(scaleY)) {
      image.scaleY = scaleY;
      changed = true;
    }

    if (changed) {
      this.renderImage();
    }
  },


  /**
   * Play the images.
   */
  play: function play() {
    var _this4 = this;

    if (!this.visible || this.played) {
      return;
    }

    var options = this.options,
        $items = this.$items,
        $player = this.$player;


    if (options.fullscreen) {
      this.requestFullscreen();
    }

    this.played = true;
    $player.addClass(CLASS_SHOW);

    var list = [];
    var index = 0;

    $items.each(function (i, item) {
      var $item = $(item);
      var $img = $item.find('img');
      var $image = $('<img src="' + $img.data('originalUrl') + '" alt="' + $img.attr('alt') + '">');

      $image.addClass(CLASS_FADE).toggleClass(CLASS_TRANSITION, options.transition);

      if ($item.hasClass(CLASS_ACTIVE)) {
        $image.addClass(CLASS_IN);
        index = i;
      }

      list.push($image);
      $image.one(EVENT_LOAD, {
        filled: false
      }, $.proxy(_this4.loadImage, _this4));
      $player.append($image);
    });

    if (isNumber(options.interval) && options.interval > 0) {
      var length = $items.length;

      var playing = function playing() {
        _this4.playing = setTimeout(function () {
          list[index].removeClass(CLASS_IN);
          index += 1;
          index = index < length ? index : 0;
          list[index].addClass(CLASS_IN);
          playing();
        }, options.interval);
      };

      if (length > 1) {
        playing();
      }
    }
  },


  /**
   * Stop play.
   */
  stop: function stop() {
    if (!this.played) {
      return;
    }

    if (this.options.fullscreen) {
      this.exitFullscreen();
    }

    this.played = false;
    clearTimeout(this.playing);
    this.$player.removeClass(CLASS_SHOW).empty();
  },


  /**
   * Enter modal mode (only available in inline mode).
   */
  full: function full() {
    var _this5 = this;

    var options = this.options,
        $image = this.$image,
        $list = this.$list;


    if (!this.visible || this.played || this.fulled || !options.inline) {
      return;
    }

    this.fulled = true;
    this.$body.addClass(CLASS_OPEN);
    this.$button.addClass(CLASS_FULLSCREEN_EXIT);

    if (options.transition) {
      $image.removeClass(CLASS_TRANSITION);
      $list.removeClass(CLASS_TRANSITION);
    }

    this.$viewer.addClass(CLASS_FIXED).removeAttr('style').css('z-index', options.zIndex);
    this.initContainer();
    this.viewer = $.extend({}, this.container);
    this.renderList();
    this.initImage(function () {
      _this5.renderImage(function () {
        if (options.transition) {
          setTimeout(function () {
            $image.addClass(CLASS_TRANSITION);
            $list.addClass(CLASS_TRANSITION);
          }, 0);
        }
      });
    });
  },


  /**
   * Exit modal mode (only available in inline mode).
   */
  exit: function exit() {
    var _this6 = this;

    if (!this.fulled) {
      return;
    }

    var options = this.options,
        $image = this.$image,
        $list = this.$list;


    this.fulled = false;
    this.$body.removeClass(CLASS_OPEN);
    this.$button.removeClass(CLASS_FULLSCREEN_EXIT);

    if (options.transition) {
      $image.removeClass(CLASS_TRANSITION);
      $list.removeClass(CLASS_TRANSITION);
    }

    this.$viewer.removeClass(CLASS_FIXED).css('z-index', options.zIndexInline);
    this.viewer = $.extend({}, this.parent);
    this.renderViewer();
    this.renderList();
    this.initImage(function () {
      _this6.renderImage(function () {
        if (options.transition) {
          setTimeout(function () {
            $image.addClass(CLASS_TRANSITION);
            $list.addClass(CLASS_TRANSITION);
          }, 0);
        }
      });
    });
  },


  /**
   * Show the current ratio of the image with percentage.
   */
  tooltip: function tooltip() {
    var _this7 = this;

    var options = this.options,
        $tooltip = this.$tooltip,
        image = this.image;

    var classes = [CLASS_SHOW, CLASS_FADE, CLASS_TRANSITION].join(' ');

    if (!this.viewed || this.played || !options.tooltip) {
      return;
    }

    $tooltip.text(Math.round(image.ratio * 100) + '%');

    if (!this.tooltiping) {
      if (options.transition) {
        if (this.fading) {
          $tooltip.trigger(EVENT_TRANSITIONEND);
        }

        $tooltip.addClass(classes);

        // Force reflow to enable CSS3 transition
        // eslint-disable-next-line
        $tooltip[0].offsetWidth;
        $tooltip.addClass(CLASS_IN);
      } else {
        $tooltip.addClass(CLASS_SHOW);
      }
    } else {
      clearTimeout(this.tooltiping);
    }

    this.tooltiping = setTimeout(function () {
      if (options.transition) {
        $tooltip.one(EVENT_TRANSITIONEND, function () {
          $tooltip.removeClass(classes);
          _this7.fading = false;
        }).removeClass(CLASS_IN);

        _this7.fading = true;
      } else {
        $tooltip.removeClass(CLASS_SHOW);
      }

      _this7.tooltiping = false;
    }, 1000);
  },


  /**
   * Toggle the image size between its natural size and initial size.
   */
  toggle: function toggle() {
    if (this.image.ratio === 1) {
      this.zoomTo(this.initialImage.ratio, true);
    } else {
      this.zoomTo(1, true);
    }
  },


  /**
   * Reset the image to its initial state.
   */
  reset: function reset() {
    if (this.viewed && !this.played) {
      this.image = $.extend({}, this.initialImage);
      this.renderImage();
    }
  },


  /**
   * Update viewer when images changed.
   */
  update: function update() {
    var $element = this.$element;
    var $images = this.$images;


    if (this.isImg) {
      // Destroy viewer if the target image was deleted
      if (!$element.parent().length) {
        this.destroy();
        return;
      }
    } else {
      $images = $element.find('img');
      this.$images = $images;
      this.length = $images.length;
    }

    if (this.ready) {
      var indexes = [];
      var index = void 0;

      $.each(this.$items, function (i, item) {
        var img = $(item).find('img')[0];
        var image = $images[i];

        if (image) {
          if (image.src !== img.src) {
            indexes.push(i);
          }
        } else {
          indexes.push(i);
        }
      });

      this.$list.width('auto');
      this.initList();

      if (this.visible) {
        if (this.length) {
          if (this.viewed) {
            index = $.inArray(this.index, indexes);

            if (index >= 0) {
              this.viewed = false;
              this.view(Math.max(this.index - (index + 1), 0));
            } else {
              this.$items.eq(this.index).addClass(CLASS_ACTIVE);
            }
          }
        } else {
          this.$image = null;
          this.viewed = false;
          this.index = 0;
          this.image = null;
          this.$canvas.empty();
          this.$title.empty();
        }
      }
    }
  },


  /**
   * Destroy the viewer instance.
   */
  destroy: function destroy() {
    var $element = this.$element;


    if (this.options.inline) {
      this.unbind();
    } else {
      if (this.visible) {
        this.unbind();
      }

      $element.off(EVENT_CLICK, this.start);
    }

    this.unbuild();
    $element.removeData(NAMESPACE);
  }
};

var _window$1 = window;
var document$1 = _window$1.document;


var others = {
  // A shortcut for triggering custom events
  trigger: function trigger(type, data) {
    var e = $.Event(type, data);

    this.$element.trigger(e);

    return e;
  },
  shown: function shown() {
    var options = this.options;


    this.transitioning = false;
    this.fulled = true;
    this.visible = true;
    this.render();
    this.bind();

    if ($.isFunction(options.shown)) {
      this.$element.one(EVENT_SHOWN, options.shown);
    }

    this.trigger(EVENT_SHOWN);
  },
  hidden: function hidden() {
    var options = this.options;


    this.transitioning = false;
    this.viewed = false;
    this.fulled = false;
    this.visible = false;
    this.unbind();
    this.$body.removeClass(CLASS_OPEN);
    this.$viewer.addClass(CLASS_HIDE);
    this.resetList();
    this.resetImage();

    if ($.isFunction(options.hidden)) {
      this.$element.one(EVENT_HIDDEN, options.hidden);
    }

    this.trigger(EVENT_HIDDEN);
  },
  requestFullscreen: function requestFullscreen() {
    if (this.fulled && !document$1.fullscreenElement && !document$1.mozFullScreenElement && !document$1.webkitFullscreenElement && !document$1.msFullscreenElement) {
      var documentElement = document$1.documentElement;


      if (documentElement.requestFullscreen) {
        documentElement.requestFullscreen();
      } else if (documentElement.msRequestFullscreen) {
        documentElement.msRequestFullscreen();
      } else if (documentElement.mozRequestFullScreen) {
        documentElement.mozRequestFullScreen();
      } else if (documentElement.webkitRequestFullscreen) {
        documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);
      }
    }
  },
  exitFullscreen: function exitFullscreen() {
    if (this.fulled) {
      if (document$1.exitFullscreen) {
        document$1.exitFullscreen();
      } else if (document$1.msExitFullscreen) {
        document$1.msExitFullscreen();
      } else if (document$1.mozCancelFullScreen) {
        document$1.mozCancelFullScreen();
      } else if (document$1.webkitExitFullscreen) {
        document$1.webkitExitFullscreen();
      }
    }
  },
  change: function change(event) {
    var pointers = this.pointers;

    var pointer = pointers[Object.keys(pointers)[0]];
    var offsetX = pointer.endX - pointer.startX;
    var offsetY = pointer.endY - pointer.startY;

    switch (this.action) {
      // Move the current image
      case ACTION_MOVE:
        this.move(offsetX, offsetY);
        break;

      // Zoom the current image
      case ACTION_ZOOM:
        this.zoom(getMaxZoomRatio(pointers), false, event);

        this.startX2 = this.endX2;
        this.startY2 = this.endY2;
        break;

      case ACTION_SWITCH:
        this.action = 'switched';

        if (Math.abs(offsetX) > Math.abs(offsetY)) {
          if (offsetX > 1) {
            this.prev();
          } else if (offsetX < -1) {
            this.next();
          }
        }

        break;

      default:
    }

    // Override
    $.each(pointers, function (i, p) {
      p.startX = p.endX;
      p.startY = p.endY;
    });
  },
  isSwitchable: function isSwitchable() {
    var image = this.image,
        viewer = this.viewer;


    return image.left >= 0 && image.top >= 0 && image.width <= viewer.width && image.height <= viewer.height;
  }
};

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

var Viewer = function () {
  /**
   * Start the new Viewer.
   * @param {Element} element - The target element for viewing.
   * @param {Object} [options={}] - The configuration options.
   */
  function Viewer(element) {
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};

    _classCallCheck(this, Viewer);

    if (!element || element.nodeType !== 1) {
      throw new Error('The first argument is required and must be an element.');
    }

    this.element = element;
    this.$element = $(element);
    this.options = $.extend({}, DEFAULTS, $.isPlainObject(options) && options);
    this.action = '';
    this.target = null;
    this.timeout = null;
    this.index = 0;
    this.length = 0;
    this.ready = false;
    this.fading = false;
    this.fulled = false;
    this.isImg = false;
    this.played = false;
    this.playing = false;
    this.tooltiping = false;
    this.transitioning = false;
    this.viewed = false;
    this.visible = false;
    this.wheeling = false;
    this.pointers = {};
    this.init();
  }

  _createClass(Viewer, [{
    key: 'init',
    value: function init() {
      var _this = this;

      var $element = this.$element,
          options = this.options;

      var isImg = $element.is('img');
      var $images = isImg ? $element : $element.find('img');
      var length = $images.length;


      if (!length) {
        return;
      }

      // Override `transition` option if it is not supported
      if (typeof document.createElement(NAMESPACE).style.transition === 'undefined') {
        options.transition = false;
      }

      this.isImg = isImg;
      this.length = length;
      this.count = 0;
      this.$images = $images;
      this.$body = $('body');

      if (options.inline) {
        $element.one(EVENT_READY, function () {
          _this.view();
        });

        $images.each(function (i, image) {
          if (image.complete) {
            _this.progress();
          } else {
            $(image).one(EVENT_LOAD, $.proxy(_this.progress, _this));
          }
        });
      } else {
        $element.on(EVENT_CLICK, $.proxy(this.start, this));
      }
    }
  }, {
    key: 'progress',
    value: function progress() {
      this.count += 1;

      if (this.count === this.length) {
        this.build();
      }
    }
  }, {
    key: 'build',
    value: function build() {
      var $element = this.$element,
          options = this.options;


      if (this.ready) {
        return;
      }

      var $parent = $element.parent();
      var $viewer = $(TEMPLATE);
      var $button = $viewer.find('.' + NAMESPACE + '-button');
      var $navbar = $viewer.find('.' + NAMESPACE + '-navbar');
      var $title = $viewer.find('.' + NAMESPACE + '-title');
      var $toolbar = $viewer.find('.' + NAMESPACE + '-toolbar');

      this.$parent = $parent;
      this.$viewer = $viewer;
      this.$button = $button;
      this.$navbar = $navbar;
      this.$title = $title;
      this.$toolbar = $toolbar;
      this.$canvas = $viewer.find('.' + NAMESPACE + '-canvas');
      this.$footer = $viewer.find('.' + NAMESPACE + '-footer');
      this.$list = $viewer.find('.' + NAMESPACE + '-list');
      this.$player = $viewer.find('.' + NAMESPACE + '-player');
      this.$tooltip = $viewer.find('.' + NAMESPACE + '-tooltip');

      $title.addClass(!options.title ? CLASS_HIDE : getResponsiveClass(options.title));
      $toolbar.addClass(!options.toolbar ? CLASS_HIDE : getResponsiveClass(options.toolbar));
      $toolbar.find('li[class*=zoom]').toggleClass(CLASS_INVISIBLE, !options.zoomable);
      $toolbar.find('li[class*=flip]').toggleClass(CLASS_INVISIBLE, !options.scalable);

      if (!options.rotatable) {
        $toolbar.find('li[class*=rotate]').addClass(CLASS_INVISIBLE).appendTo($toolbar);
      }

      $navbar.addClass(!options.navbar ? CLASS_HIDE : getResponsiveClass(options.navbar));
      $button.toggleClass(CLASS_HIDE, !options.button);

      if (options.inline) {
        $button.addClass(CLASS_FULLSCREEN);
        $viewer.css('z-index', options.zIndexInline);

        if ($parent.css('position') === 'static') {
          $parent.css('position', 'relative');
        }

        $element.after($viewer);
      } else {
        $button.addClass(CLASS_CLOSE);
        $viewer.css('z-index', options.zIndex).addClass([CLASS_FIXED, CLASS_FADE, CLASS_HIDE].join(' ')).appendTo('body');
      }

      if (options.inline) {
        this.render();
        this.bind();
        this.visible = true;
      }

      this.ready = true;

      if ($.isFunction(options.ready)) {
        $element.one(EVENT_READY, options.ready);
      }

      this.trigger(EVENT_READY);
    }
  }, {
    key: 'unbuild',
    value: function unbuild() {
      if (!this.ready) {
        return;
      }

      this.ready = false;
      this.$viewer.remove();
    }

    /**
     * Change the default options.
     * @static
     * @param {Object} options - The new default options.
     */

  }], [{
    key: 'setDefaults',
    value: function setDefaults(options) {
      $.extend(DEFAULTS, options);
    }
  }]);

  return Viewer;
}();

$.extend(Viewer.prototype, render, events, handlers, methods, others);

var AnotherViewer = $.fn.viewer;

$.fn.viewer = function jQueryViewer(option) {
  for (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
    args[_key - 1] = arguments[_key];
  }

  var result = void 0;

  this.each(function (i, element) {
    var $element = $(element);
    var data = $element.data(NAMESPACE);

    if (!data) {
      if (/destroy/.test(option)) {
        return;
      }

      var options = $.extend({}, $element.data(), $.isPlainObject(option) && option);

      data = new Viewer(element, options);
      $element.data(NAMESPACE, data);
    }

    if (isString(option)) {
      var fn = data[option];

      if ($.isFunction(fn)) {
        result = fn.apply(data, args);
      }
    }
  });

  return isUndefined(result) ? this : result;
};

$.fn.viewer.Constructor = Viewer;
$.fn.viewer.setDefaults = Viewer.setDefaults;
$.fn.viewer.noConflict = function noConflict() {
  $.fn.viewer = AnotherViewer;
  return this;
};

})));


/***/ }),
/* 635 */
/***/ (function(module, exports, __webpack_require__) {

// style-loader: Adds some css to the DOM by adding a <style> tag

// load the styles
var content = __webpack_require__(86);
if(typeof content === 'string') content = [[module.i, content, '']];
// Prepare cssTransformation
var transform;

var options = {"hmr":true}
options.transform = transform
// add the styles to the DOM
var update = __webpack_require__(22)(content, options);
if(content.locals) module.exports = content.locals;
// Hot Module Replacement
if(true) {
	// When the styles change, update the <style> tags
	if(!content.locals) {
		module.hot.accept(86, function() {
			var newContent = __webpack_require__(86);
			if(typeof newContent === 'string') newContent = [[module.i, newContent, '']];
			update(newContent);
		});
	}
	// When the module is disposed, remove the <style> tags
	module.hot.dispose(function() { update(); });
}

/***/ }),
/* 636 */
/***/ (function(module, exports, __webpack_require__) {

var map = {
	"./en/default.json": 637,
	"./fr/default.json": 638
};
function webpackContext(req) {
	return __webpack_require__(webpackContextResolve(req));
};
function webpackContextResolve(req) {
	var id = map[req];
	if(!(id + 1)) // check for number or string
		throw new Error("Cannot find module '" + req + "'.");
	return id;
};
webpackContext.keys = function webpackContextKeys() {
	return Object.keys(map);
};
webpackContext.resolve = webpackContextResolve;
module.exports = webpackContext;
webpackContext.id = 636;

/***/ }),
/* 637 */
/***/ (function(module, exports) {

module.exports = {"Archives (zip, rar, 7z, tar, gz, bz, bz2)":"","Browse":"","Documents (doc, docx, ppt, pptx, odt, odp, pdf, ps)":"","Download":"","Error during file upload":"","Images (gif, png, jpg, jpeg, tif, tiff, psd, svg)":"","Inline images":"","Max items number":"","No":"","Preview":"","Spreadsheets (xls, xlsx, ods, csv)":"","Type of media":"","Unable to remove the media":"","Yes":""}

/***/ }),
/* 638 */
/***/ (function(module, exports) {

module.exports = {"Archives (zip, rar, 7z, tar, gz, bz, bz2)":"Archives (zip, rar, 7z, tar, gz, bz, bz2)","Browse":"Sélectionner","Documents (doc, docx, ppt, pptx, odt, odp, pdf, ps)":"Documents (doc, docx, ppt, pptx, odt, odp, pdf, ps)","Download":"Télécharger","Error during file upload":"Erreur durant le téléchagement du fichier","Images (gif, png, jpg, jpeg, tif, tiff, psd, svg)":"Images (gif, png, jpg, jpeg, tif, tiff, psd, svg)","Inline images":"Images en ligne","Max items number":"Nombre maximum d'élements","No":"Non","Preview":"Prévisualiser","Spreadsheets (xls, xlsx, ods, csv)":"Tableurs (xls, xlsx, ods, csv)","Type of media":"Type de média","Unable to remove the media":"Impossible de supprimer le média","Yes":"Oui"}

/***/ }),
/* 639 */
/***/ (function(module, exports, __webpack_require__) {

var map = {
	"./media": 280,
	"./media.js": 280,
	"./mediacollection": 281,
	"./mediacollection.js": 281
};
function webpackContext(req) {
	return __webpack_require__(webpackContextResolve(req));
};
function webpackContextResolve(req) {
	var id = map[req];
	if(!(id + 1)) // check for number or string
		throw new Error("Cannot find module '" + req + "'.");
	return id;
};
webpackContext.keys = function webpackContextKeys() {
	return Object.keys(map);
};
webpackContext.resolve = webpackContextResolve;
module.exports = webpackContext;
webpackContext.id = 639;

/***/ }),
/* 640 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div class="row"><div class="col-md-6"><div class="form-group"><label for="format_media_types">' +
__e( _t('Type of media') ) +
'</label><select id="format_media_types" class="form-control" multiple="multiple"><option value="archives">' +
__e( _t('Archives (zip, rar, 7z, tar, gz, bz, bz2)') ) +
'</option><option value="images">' +
__e( _t('Images (gif, png, jpg, jpeg, tif, tiff, psd, svg)') ) +
'</option><option value="documents">' +
__e( _t('Documents (doc, docx, ppt, pptx, odt, odp, pdf, ps)') ) +
'</option><option value="spreadsheets">' +
__e( _t('Spreadsheets (xls, xlsx, ods, csv)') ) +
'</option></select></div></div></div><div class="row"><div class="col-md-6"><div class="form-group"><label for="format_media_inline">' +
__e( _t('Inline images') ) +
'</label><select id="format_media_inline" class="form-control"><option value="true">' +
__e( _t('Yes') ) +
'</option><option value="false">' +
__e( _t('No') ) +
'</option></select></div></div></div>';

}
return __p
};

/*
original source:

<div class="row"><div class="col-md-6"><div class="form-group"><label for="format_media_types"><%- _t('Type of media') %></label><select id="format_media_types" class="form-control" multiple="multiple"><option value="archives"><%- _t('Archives (zip, rar, 7z, tar, gz, bz, bz2)') %></option><option value="images"><%- _t('Images (gif, png, jpg, jpeg, tif, tiff, psd, svg)') %></option><option value="documents"><%- _t('Documents (doc, docx, ppt, pptx, odt, odp, pdf, ps)') %></option><option value="spreadsheets"><%- _t('Spreadsheets (xls, xlsx, ods, csv)') %></option></select></div></div></div><div class="row"><div class="col-md-6"><div class="form-group"><label for="format_media_inline"><%- _t('Inline images') %></label><select id="format_media_inline" class="form-control"><option value="true"><%- _t('Yes') %></option><option value="false"><%- _t('No') %></option></select></div></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 641 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div class="form-group" style="width: 50%"><label for="format_media_types">' +
__e( _t('Type of media') ) +
'</label><select id="format_media_types" class="form-control" multiple="multiple"><option value="archives">' +
__e( _t('Archives (zip, rar, 7z, tar, gz, bz, bz2)') ) +
'</option><option value="images">' +
__e( _t('Images (gif, png, jpg, jpeg, tif, tiff, psd, svg)') ) +
'</option><option value="documents">' +
__e( _t('Documents (doc, docx, ppt, pptx, odt, odp, pdf, ps)') ) +
'</option><option value="spreadsheets">' +
__e( _t('Spreadsheets (xls, xlsx, ods, csv)') ) +
'</option></select></div><div class="form-group" style="width: 50%"><div class="row"><div class="col-xs-6"><label for="format_max_items">' +
__e( _t('Max items number') ) +
'</label><input id="format_max_items" class="form-control" type="number" min="2" max="256"></div><div class="col-xs-6"><label for="format_media_inline">' +
__e( _t('Inline images') ) +
'</label><select id="format_media_inline" class="form-control"><option value="true">' +
__e( _t('Yes') ) +
'</option><option value="false">' +
__e( _t('No') ) +
'</option></select></div></div></div>';

}
return __p
};

/*
original source:

<div class="form-group" style="width: 50%"><label for="format_media_types"><%- _t('Type of media') %></label><select id="format_media_types" class="form-control" multiple="multiple"><option value="archives"><%- _t('Archives (zip, rar, 7z, tar, gz, bz, bz2)') %></option><option value="images"><%- _t('Images (gif, png, jpg, jpeg, tif, tiff, psd, svg)') %></option><option value="documents"><%- _t('Documents (doc, docx, ppt, pptx, odt, odp, pdf, ps)') %></option><option value="spreadsheets"><%- _t('Spreadsheets (xls, xlsx, ods, csv)') %></option></select></div><div class="form-group" style="width: 50%"><div class="row"><div class="col-xs-6"><label for="format_max_items"><%- _t('Max items number') %></label><input id="format_max_items" class="form-control" type="number" min="2" max="256"></div><div class="col-xs-6"><label for="format_media_inline"><%- _t('Inline images') %></label><select id="format_media_inline" class="form-control"><option value="true"><%- _t('Yes') %></option><option value="false"><%- _t('No') %></option></select></div></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 642 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file init.js
 * @brief Organisation module init entry point
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-02-27
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let OrganisationModule = function() {
    this.name = "organisation";
};

OrganisationModule.prototype = {
    initialize: function(app, options) {
        this.models = {};
        this.collections = {};
        this.views = {};
        this.routers = {};
        this.controllers = {};

        try {
            i18next.default.addResources(session.language, 'default', __webpack_require__(643)("./" + session.language + '/default.json'));
        } catch (e) {
            console.warn("No translation found for the current language. Fallback to english language");
        }

        //
        // collections
        //

        let SelectOption = __webpack_require__(19);

        // @todo may be a cache collection or uses a cachefetcher for organisationtype
        let OrganisationTypeCollection = __webpack_require__(646);
        this.collections.organisationTypes = new OrganisationTypeCollection();

        this.views.organisationTypes = new SelectOption({
            className: 'organisation-type',
            collection: this.collections.organisationTypes
        });

        //
        // controllers
        //

        let OrganisationController = __webpack_require__(648);
        this.controllers.organisation = new OrganisationController();

        let EstablishmentController = __webpack_require__(659);
        this.controllers.establishment = new EstablishmentController();

        let PersonController = __webpack_require__(673);
        this.controllers.person = new PersonController();

        let ConservatoryController = __webpack_require__(674);
        this.controllers.conservatory = new ConservatoryController();

        //
        // routers
        //

        let OrganisationRouter = __webpack_require__(675);
        this.routers.organisation = new OrganisationRouter();

        let EstablishmentRouter = __webpack_require__(682);
        this.routers.establishment = new EstablishmentRouter();

        let PersonRouter = __webpack_require__(683);
        this.routers.person = new PersonRouter();

        let ConservatoryRouter = __webpack_require__(687);
        this.routers.conservatory = new ConservatoryRouter();
    },

    start: function(app, options) {
        // nothing to do
    },

    stop: function(app, options) {

    }
};

module.exports = OrganisationModule;


/***/ }),
/* 643 */
/***/ (function(module, exports, __webpack_require__) {

var map = {
	"./en/default.json": 644,
	"./fr/default.json": 645
};
function webpackContext(req) {
	return __webpack_require__(webpackContextResolve(req));
};
function webpackContextResolve(req) {
	var id = map[req];
	if(!(id + 1)) // check for number or string
		throw new Error("Cannot find module '" + req + "'.");
	return id;
};
webpackContext.keys = function webpackContextKeys() {
	return Object.keys(map);
};
webpackContext.resolve = webpackContextResolve;
module.exports = webpackContext;
webpackContext.id = 643;

/***/ }),
/* 644 */
/***/ (function(module, exports) {

module.exports = {"Acronym":"","Add conservatory":"","Add establishment":"","Add person/contact":"","Apply":"","Cancel":"","Code":"","Commands":"","Comments":"","Conservatories":"","Conservatory":"","Create":"","Create an establishment":"","Create an organisation or a partner":"","Description":"","Descriptors":"","Done":"","Establishment":"","Establishment name already in usage":"","Establishments":"","First name":"","Full name":"","GRC details":"","GRC partner":"","Identifier":"","Is partner":"","Last name":"","List of organisations":"","Location":"","Manage establishments of the organisation":"","Modify":"","Name":"","Name (must be unique)":"","Name of the organisation":"","Not partner":"","Organisation":"","Organisation name already in usage":"","Partner":"","Partner or organisation":"","Person/Contact":"","Persons/Contacts":"","Storage":"","Successfully removed !":"","Type":"","Update an establishment":"","Update an organisation or a partner":"","Zipcode":"","characters_max":"","characters_max_plural":"","characters_min":"","characters_min_plural":""}

/***/ }),
/* 645 */
/***/ (function(module, exports) {

module.exports = {"Acronym":"Acronyme","Add conservatory":"","Add establishment":"Ajouter un site","Add person/contact":"","Apply":"Appliquer","Cancel":"Annuler","Code":"Code","Commands":"","Comments":"","Conservatories":"Convervatoires","Conservatory":"","Create":"Créer","Create an establishment":"Créer un établissement","Create an organisation or a partner":"Créer une organisation ou un partenaire","Description":"Description","Descriptors":"Descripteurs","Done":"Fait","Establishment":"Site","Establishment name already in usage":"No de site déjà utilisé","Establishments":"Sites","First name":"","Full name":"","GRC details":"Détails du CRB","GRC partner":"Partenaire CRB","Identifier":"Identifiant","Is partner":"","Last name":"","List of organisations":"Liste des organisations","Location":"Localisation","Manage establishments of the organisation":"Gérer les sites de l'organisation","Modify":"Modifier","Name":"Nom","Name (must be unique)":"Nom (doit être unique)","Name of the organisation":"Nom de l'organisation","Not partner":"","Organisation":"Organisation","Organisation name already in usage":"Nom d'organisation déjà utilisé","Partner":"","Partner or organisation":"Partenaire ou organisation","Person/Contact":"","Persons/Contacts":"","Storage":"","Successfully removed !":"Retiré avec succès !","Type":"Type","Update an establishment":"Mettre à jour un site","Update an organisation or a partner":"Mettre à jour une organisation ou un partenaire","Zipcode":"Code postal","characters_max":"Au plus un caractère","characters_max_plural":"Au plus {{count}} caractères","characters_min":"Au moins un caractère","characters_min_plural":"Au plus {{count}} caractères"}

/***/ }),
/* 646 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file organisationtype.js
 * @brief Type of organisation collection
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-03-06
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let OrganisationTypeModel = __webpack_require__(647);

let Collection = Backbone.Collection.extend({
    url: window.application.url(['organisation', 'organisation-type']),
    model: OrganisationTypeModel,

    parse: function(data) {
        return data;
    },

    default: [],

    findLabel: function(value) {
        let res = this.findWhere({value: value});
        return res ? res.get('label') : '';
    }
});

module.exports = Collection;


/***/ }),
/* 647 */
/***/ (function(module, exports) {

/**
 * @file organisationtype.js
 * @brief Type of organisatin model
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-03-06
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

module.exports = Backbone.Model.extend({
    defaults: function() {
        return {
            id: 0,
            value: '',
            label: ''
        }
    },
    url: window.application.url(['organisation', 'organisation-type', ':id'])
});



/***/ }),
/* 648 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file organisation.js
 * @brief Organisation controller
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-03-07
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Marionette = __webpack_require__(1);

let OrganisationModel = __webpack_require__(42);

let DefaultLayout = __webpack_require__(3);
let TitleView = __webpack_require__(4);
let Dialog = __webpack_require__(5);
let OrganisationLayout = __webpack_require__(282);


let Controller = Marionette.Object.extend({

    create: function() {
        $.ajax({
            type: "GET",
            url: window.application.url(['descriptor', 'layout', 'for-describable', 'organisation.organisation']),
            dataType: 'json'
        }).done(function(data) {
            let CreateOrganisationView = Dialog.extend({
                attributes: {
                    'id': 'dlg_create_organisation'
                },
                template: __webpack_require__(658),

                ui: {
                    create: "button.create",
                    grc: "#organisation_grc",
                    name: "#organisation_name",
                    type: "#organisation_type"
                },

                events: {
                    'click @ui.create': 'onCreate',
                    'input @ui.name': 'onNameInput'
                },

                onRender: function () {
                    CreateOrganisationView.__super__.onRender.apply(this);

                    window.application.organisation.views.organisationTypes.drawSelect(this.ui.type);

                    this.ui.grc.selectpicker({
                        style: 'btn-default',
                        container: 'body'
                    });
                },

                onBeforeDestroy: function () {
                    this.ui.type.selectpicker('destroy');
                    this.ui.grc.selectpicker('destroy');

                    CreateOrganisationView.__super__.onBeforeDestroy.apply(this);
                },

                onNameInput: function () {
                    let name = this.ui.name.val().trim();

                    if (this.validateName()) {
                        let filters = {
                            method: 'ieq',
                            fields: ['name'],
                            'name': name
                        };

                        $.ajax({
                            type: "GET",
                            url: window.application.url(['organisation', 'organisation', 'search']),
                            dataType: 'json',
                            data: {filters: JSON.stringify(filters)},
                            el: this.ui.name,
                            success: function (data) {
                                if (data.items.length > 0) {
                                    for (let i in data.items) {
                                        let t = data.items[i];

                                        if (t.value.toUpperCase() === name.toUpperCase()) {
                                            $(this.el).validateField('failed', _t('Organisation name already in usage'));
                                            break;
                                        }
                                    }
                                } else {
                                    $(this.el).validateField('ok');
                                }
                            }
                        });
                    }
                },

                validateName: function () {
                    let v = this.ui.name.val().trim();

                    if (v.length > 255) {
                        $(this.ui.name).validateField('failed', _t('characters_max', {count: 255}));
                        return false;
                    } else if (v.length < 3) {
                        $(this.ui.name).validateField('failed', _t('characters_min', {count: 3}));
                        return false;
                    }

                    return true;
                },

                validate: function () {
                    let valid = this.validateName();

                    if (this.ui.name.hasClass('invalid') || this.ui.type.hasClass('invalid')) {
                        valid = false;
                    }

                    return valid;
                },

                onCreate: function () {
                    let name = this.ui.name.val().trim();
                    let to_grc = this.ui.grc.val() === "grc-partner";

                    if (this.validate()) {
                        let model = new OrganisationModel({
                            layout: data[0].id,
                            name: name,
                            type: this.ui.type.val(),
                            grc: to_grc
                        });

                        this.destroy();

                        let defaultLayout = new DefaultLayout();
                        window.application.main.showContent(defaultLayout);

                        defaultLayout.showChildView('title', new TitleView({title: _t("Organisation"), model: model}));

                        let organisationLayout = new OrganisationLayout({model: model});
                        defaultLayout.showChildView('content', organisationLayout);
                    }
                }
            });

            let dialog = new CreateOrganisationView();
            dialog.render();
        });
    }
});

module.exports = Controller;


/***/ }),
/* 649 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file organisationdetails.js
 * @brief Details view for organisation.
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-03-07
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Marionette = __webpack_require__(1);
let Dialog = __webpack_require__(5);

let View = Marionette.View.extend({
    tagName: "div",
    template: __webpack_require__(650),

    attributes: {
        style: "height: 25px; overflow-y: auto;"
    },

    ui: {
        'organisation_type': '.organisation-type',
        'change_type': '.change-type'
    },

    events: {
        'click @ui.change_type': 'onChangeType'
    },

    initialize: function(options) {
        this.listenTo(this.model, 'change', this.render, this);
    },

    onRender: function() {
       window.application.organisation.views.organisationTypes.htmlFromValue(this.el);
    },

    onChangeType: function () {
        let EditOrganisation = Dialog.extend({
            template: __webpack_require__(651),

            attributes: {
                id: "dlg_edit_organisation"
            },

            ui: {
                name: "#organisation_name",
                type: "#organisation_type",
                grc: "#organisation_grc"
            },

            events: {
                'click @ui.apply': 'onApply',
                'input @ui.name': 'onNameInput'
            },

            initialize: function (options) {
                EditOrganisation.__super__.initialize.apply(this);
            },

            onRender: function () {
                EditOrganisation.__super__.onRender.apply(this);

                window.application.organisation.views.organisationTypes.drawSelect(this.ui.type);

                this.ui.name.val(this.getOption('model').get('name'));
                this.ui.type.selectpicker('val', this.getOption('model').get('type'));
                this.ui.grc.selectpicker({}).selectpicker('val', this.getOption('model').get('grc') > 0 ? '1' : '0');
            },

            onBeforeDestroy: function () {
                this.ui.type.selectpicker('destroy');
                this.ui.grc.selectpicker('destroy');

                EditOrganisation.__super__.onBeforeDestroy.apply(this);
            },

            onNameInput: function () {
                let name = this.ui.name.val().trim();
                let organisation_id = this.model.get('id');

                if (this.validateName()) {
                    let filters = {
                        method: 'ieq',
                        fields: ['name'],
                        'name': name
                    };

                    $.ajax({
                        type: "GET",
                        url: window.application.url(['organisation', 'organisation', 'search']),
                        dataType: 'json',
                        data: {filters: JSON.stringify(filters)},
                        el: this.ui.name
                    }).done(function (data) {
                        if (data.items.length > 0) {
                            for (let i in data.items) {
                                let t = data.items[i];

                                if (t.value.toUpperCase() === name.toUpperCase() && t.id !== organisation_id) {
                                    $(this.el).validateField('failed', _t('Organisation name already in usage'));
                                    break;
                                }
                            }
                        } else {
                            $(this.el).validateField('ok');
                        }
                    });
                }
            },

            validateName: function () {
                let v = this.ui.name.val().trim();

                if (v.length > 255) {
                    $(this.ui.name).validateField('failed', _t('characters_max', {count: 255}));
                    return false;
                } else if (v.length < 3) {
                    $(this.ui.name).validateField('failed', _t('characters_min', {count: 3}));
                    return false;
                }

                return true;
            },

            validate: function () {
                let valid = this.validateName();

                if (this.ui.name.hasClass('invalid') || this.ui.type.hasClass('invalid')) {
                    valid = false;
                }

                return valid;
            },

            onApply: function() {
                let model = this.getOption('model');
                let name = this.ui.name.val().trim();
                let type = this.ui.type.val();
                let grc = this.ui.grc.val() > 0;

                let data = {};

                if (name !== model.get('name')) {
                    data.name = name;
                }

                if (type !== model.get('type')) {
                    data.type = type;
                }

                if (grc !== model.get('grc')) {
                    data.grc = grc;
                }

                if (model.isNew()) {
                    if (name !== model.get('name')) {
                        model.set('name', name);
                    }

                    if (type !== model.get('type')) {
                        model.set('type', type);
                    }

                    if (grc !== model.get('grc')) {
                        model.set('grc', grc);
                    }
                } else {
                    model.save(data, {patch: true, wait: true});
                }

                this.destroy();
            }
        });

        let editOrganisation = new EditOrganisation({
            model: this.model
        });

        editOrganisation.render();
    }
});

module.exports = View;


/***/ }),
/* 650 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<span style="font-weight:bold; font-size:18px; margin-bottom: 15px"><span><span class="organisation-name" data-organisation-id="' +
__e( id ) +
'">' +
__e( name ) +
'</span><span class="organisation-type badge left-margin" value="' +
__e( type ) +
'"></span> </span><span class="fa fa-pencil-square-o action change-type"></span></span>';

}
return __p
};

/*
original source:

<span style="font-weight:bold; font-size:18px; margin-bottom: 15px"><span><span class="organisation-name" data-organisation-id="<%- id %>"><%- name %></span><span class="organisation-type badge left-margin" value="<%- type %>"></span> </span><span class="fa fa-pencil-square-o action change-type"></span></span>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 651 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title">' +
__e( _t("Update an organisation or a partner") ) +
'</h4></div><div class="modal-body"><form><div class="form-group"><label class="control-label" for="organisation_name">' +
__e( _t("Name (must be unique)") ) +
'</label><input class="form-control name" id="organisation_name" type="text" name="name" value="" maxlength="255" autofocus="" autocomplete="off" style="width:100%"></div><div class="form-group"><label class="control-label" for="organisation_type">' +
__e( _t("Type") ) +
'</label><select class="form-control organisation-type" id="organisation_type" name="organisation-type"></select></div><div class="form-group"><label class="control-label" for="organisation_grc">' +
__e( _t("Partner") ) +
'</label><select class="form-control organisation-grc" id="organisation_grc" name="organisation-grc"><option value="0">' +
__e( _t("Not partner") ) +
'</option><option value="1">' +
__e( _t("Is partner") ) +
'</option></select></div></form></div><div class="modal-footer"><button type="button" class="btn btn-default cancel" data-dismiss="modal">' +
__e( _t("Cancel") ) +
'</button> <button type="button" class="btn btn-success apply">' +
__e( _t("Apply") ) +
'</button></div></div></div>';

}
return __p
};

/*
original source:

<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title"><%- _t("Update an organisation or a partner") %></h4></div><div class="modal-body"><form><div class="form-group"><label class="control-label" for="organisation_name"><%- _t("Name (must be unique)") %></label><input class="form-control name" id="organisation_name" type="text" name="name" value="" maxlength="255" autofocus="" autocomplete="off" style="width:100%"></div><div class="form-group"><label class="control-label" for="organisation_type"><%- _t("Type") %></label><select class="form-control organisation-type" id="organisation_type" name="organisation-type"></select></div><div class="form-group"><label class="control-label" for="organisation_grc"><%- _t("Partner") %></label><select class="form-control organisation-grc" id="organisation_grc" name="organisation-grc"><option value="0"><%- _t("Not partner") %></option><option value="1"><%- _t("Is partner") %></option></select></div></form></div><div class="modal-footer"><button type="button" class="btn btn-default cancel" data-dismiss="modal"><%- _t("Cancel") %></button> <button type="button" class="btn btn-success apply"><%- _t("Apply") %></button></div></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 652 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
with (obj) {
__p += '<div class="describable-header" style="width: 100%"><div class="btn-group-vertical" role="group" style="width: 100%"> ';
 for (var i = 0; i < actions.length; ++i) { ;
__p += ' <button type="button" class="btn ' +
__e( options[actions[i]].className ) +
'" name="' +
__e( actions[i] ) +
'">' +
__e( _t(options[actions[i]].label) ) +
'</button> ';
 } ;
__p += ' </div></div>';

}
return __p
};

/*
original source:

<div class="describable-header" style="width: 100%"><div class="btn-group-vertical" role="group" style="width: 100%"> <% for (var i = 0; i < actions.length; ++i) { %> <button type="button" class="btn <%- options[actions[i]].className %>" name="<%- actions[i] %>"><%- _t(options[actions[i]].label) %></button> <% } %> </div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 653 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div name="details"></div><div class="column" style="margin-top: 10px; height: calc(100% - 25px)"><ul class="nav nav-tabs" role="tablist"><li role="presentation" class="active"><a href="div.tab-pane[name=descriptors]" aria-controls="descriptors" role="tab" data-toggle="tab">' +
__e( _t("Descriptors") ) +
'</a></li><li role="presentation"><a href="div.tab-pane[name=establishments]" aria-controls="establishments" role="tab" data-toggle="tab">' +
__e( _t("Establishments") ) +
'</a></li><li role="presentation"><a href="div.tab-pane[name=comments]" aria-controls="comments" role="tab" data-toggle="tab">' +
__e( _t("Comments") ) +
'</a></li></ul><div class="tab-content" style="height: calc(100% - 41px - 10px)"><div role="tabpanel" class="tab-pane active" name="descriptors" style="height: 100%; overflow-y: auto; padding-right: 5px"></div><div role="tabpanel" class="tab-pane" name="establishments" style="height: 100%"></div><div role="tabpanel" class="tab-pane" name="comments" style="height: 100%"></div></div></div>';

}
return __p
};

/*
original source:

<div name="details"></div><div class="column" style="margin-top: 10px; height: calc(100% - 25px)"><ul class="nav nav-tabs" role="tablist"><li role="presentation" class="active"><a href="div.tab-pane[name=descriptors]" aria-controls="descriptors" role="tab" data-toggle="tab"><%- _t("Descriptors") %></a></li><li role="presentation"><a href="div.tab-pane[name=establishments]" aria-controls="establishments" role="tab" data-toggle="tab"><%- _t("Establishments") %></a></li><li role="presentation"><a href="div.tab-pane[name=comments]" aria-controls="comments" role="tab" data-toggle="tab"><%- _t("Comments") %></a></li></ul><div class="tab-content" style="height: calc(100% - 41px - 10px)"><div role="tabpanel" class="tab-pane active" name="descriptors" style="height: 100%; overflow-y: auto; padding-right: 5px"></div><div role="tabpanel" class="tab-pane" name="establishments" style="height: 100%"></div><div role="tabpanel" class="tab-pane" name="comments" style="height: 100%"></div></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 654 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file establishment.js
 * @brief Establishment collection
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-02-28
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let EstablishmentModel = __webpack_require__(30);
let CountableCollection = __webpack_require__(9);

let Collection = CountableCollection.extend({
    url: function () {
        if (this.organisation_id) {
            return window.application.url(['organisation', 'organisation', this.organisation_id, 'establishment']);
        } else {
            return window.application.url(['organisation', 'establishment']);
        }
    },
    model: EstablishmentModel,

    // comparator: 'name',

    initialize: function(models, options) {
        options || (options = {});

        Collection.__super__.initialize.apply(this, arguments);

        if (options.organisation_id) {
            this.organisation_id = options.organisation_id;
        }
    }
});

module.exports = Collection;


/***/ }),
/* 655 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {/**
 * @file establishmentlist.js
 * @brief Establishment list view
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-03-09
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let AdvancedTable = __webpack_require__(6);
let EstablishmentView = __webpack_require__(656);
let DescriptorsColumnsView = __webpack_require__(11);

let View = AdvancedTable.extend({
    className: "establishment-list advanced-table-container",
    childView: EstablishmentView,

    userSettingName: 'establishment_list_columns',
    userSettingVersion: '1.0',

    templateContext: function () {
        return {
            columnsList: this.displayedColumns,
            columnsOptions: this.getOption('columns')
        }
    },

    childViewOptions: function () {
        return {
            columnsList: this.displayedColumns,
            columnsOptions: this.getOption('columns')
        }
    },

    defaultColumns: [
        {name: 'name', width: 'auto', sort_by: '+0'},
        {name: '#DE_002', width: 'auto', sort_by: null},
        {name: '#DE_004', width: 'auto', sort_by: null},
        {name: '#GE_003', width: 'auto', sort_by: null},
    ],

    columnsOptions: {
        'name': {label: _t('Name'), minWidth: true, event: 'view-establishment'},
        '#DE_002': {label: _t('Code'), minWidth: true, format: {type: 'string'}},
        '#DE_004': {label: _t('Zipcode'), minWidth: true, format: {type: 'string'}},
        '#GE_003': {label: _t('Location'), minWidth: true, event: 'view-establishments', query: true}
    },

    initialize: function(options) {
        View.__super__.initialize.apply(this, arguments);

        // this.listenTo(this.collection, 'reset', this.render, this);
    },
    
    onShowTab: function() {
        View.__super__.onShowTab.apply(this, arguments);

        let self = this;

        // query now to avoid useless queries
        this.query();

        let contextLayout = window.application.getView().getChildView('right');
        if (!contextLayout) {
            let DefaultLayout = __webpack_require__(3);
            contextLayout = new DefaultLayout();
            window.application.getView().showChildView('right', contextLayout);
        }

        let TitleView = __webpack_require__(4);
        contextLayout.showChildView('title', new TitleView({title: _t("Establishment")}));

        let actions = ['add'];

        let EstablishmentListContextView = __webpack_require__(657);
        let contextView = new EstablishmentListContextView({actions: actions});
        contextLayout.showChildView('content', contextView);

        contextView.on("establishment:add", function () {
            window.application.organisation.controllers.establishment.create(
                self.getOption('model'), self.collection);
        });
    },

    onHideTab: function() {
        window.application.main.defaultRightView();
    },    
});

// support of descriptors columns extension
_.extend(View.prototype, DescriptorsColumnsView);

module.exports = View;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 656 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file establishment.js
 * @brief Establishment item view
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-03-09
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Marionette = __webpack_require__(1);

let View = Marionette.View.extend({
    tagName: 'tr',
    className: "object establishment element",
    attributes: function() {
        return {
            'scope': 'row',
            'element-id': this.model.get('id')
        }
    },
    template: __webpack_require__(12),

    templateContext: function () {
        return {
            columnsList: this.getOption('columnsList'),
            columnsOptions: this.getOption('columnsOptions')
        }
    },

    ui: {
        "establishment": "td.view-establishment",
        "remove_establishment": ".delete-establishment"
    },

    events: {
        "click @ui.establishment": "onEstablishmentDetails",
        "click @ui.remove_establishment": "onRemoveEstablishment"
    },

    behaviors: {
        ActionBtnEvents: {
            behaviorClass: __webpack_require__(8),
            actions: {
                edit: {display: true, event: 'onEstablishmentDetails'},
                manage: {display: false /*, event: 'onConservatoryList'*/},
                remove: {display: true, event: 'onRemoveEstablishment'}
            }
        }
    },

    initialize: function() {
        this.listenTo(this.model, 'change', this.render, this);
    },

    onRender: function() {
    },

    onEstablishmentDetails: function() {
        Backbone.history.navigate("app/organisation/establishment/" + this.model.get('id') + "/", {trigger: true});
    },

    onRemoveEstablishment: function() {
        this.model.destroy({wait: true}).then(function() {
            $.alert.success(_t("Successfully removed !"));
        });
    }
});

module.exports = View;


/***/ }),
/* 657 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file establishmentlistcontext.js
 * @brief Establishment list for organisation context menu
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-10-20
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);

let View = Marionette.View.extend({
    tagName: 'div',
    template: __webpack_require__(15),
    className: "context establishment-list",
    templateContext: function () {
        return {
            actions: this.getOption('actions'),
            options: {
                'add': {className: 'btn-default', label: _t('Add establishment')}
            }
        }
    },

    ui: {
        'add': 'button[name="add"]'
    },

    triggers: {
        "click @ui.add": "establishment:add"
    },

    initialize: function(options) {
        options || (options = {actions: []});
    }
});

module.exports = View;


/***/ }),
/* 658 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title">' +
__e( _t("Create an organisation or a partner") ) +
'</h4></div><div class="modal-body"><form><div class="form-group"><label class="control-label" for="organisation_name">' +
__e( _t("Name (must be unique)") ) +
'</label><input class="form-control name" id="organisation_name" type="text" name="name" value="" maxlength="255" autofocus="" autocomplete="off" style="width:100%"></div><div class="form-group"><label class="control-label" for="organisation_grc">' +
__e( _t("Partner or organisation") ) +
'</label><select class="form-control" id="organisation_grc" name="organisation-grc"><option value="grc-partner">' +
__e( _t("GRC partner") ) +
'</option><option value="organisation">' +
__e( _t("Organisation") ) +
'</option></select></div><div class="form-group"><label class="control-label" for="organisation_type">' +
__e( _t("Type") ) +
'</label><select class="form-control organisation-type" id="organisation_type" name="organisation-type"></select></div></form></div><div class="modal-footer"><button type="button" class="btn btn-default cancel" data-dismiss="modal">' +
__e( _t("Cancel") ) +
'</button> <button type="button" class="btn btn-success create">' +
__e( _t("Create") ) +
'</button></div></div></div>';

}
return __p
};

/*
original source:

<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title"><%- _t("Create an organisation or a partner") %></h4></div><div class="modal-body"><form><div class="form-group"><label class="control-label" for="organisation_name"><%- _t("Name (must be unique)") %></label><input class="form-control name" id="organisation_name" type="text" name="name" value="" maxlength="255" autofocus="" autocomplete="off" style="width:100%"></div><div class="form-group"><label class="control-label" for="organisation_grc"><%- _t("Partner or organisation") %></label><select class="form-control" id="organisation_grc" name="organisation-grc"><option value="grc-partner"><%- _t("GRC partner") %></option><option value="organisation"><%- _t("Organisation") %></option></select></div><div class="form-group"><label class="control-label" for="organisation_type"><%- _t("Type") %></label><select class="form-control organisation-type" id="organisation_type" name="organisation-type"></select></div></form></div><div class="modal-footer"><button type="button" class="btn btn-default cancel" data-dismiss="modal"><%- _t("Cancel") %></button> <button type="button" class="btn btn-success create"><%- _t("Create") %></button></div></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 659 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file establishment.js
 * @brief Establishment controller
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-10-20
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);

let EstablishmentModel = __webpack_require__(30);

let DefaultLayout = __webpack_require__(3);
let TitleView = __webpack_require__(4);
let Dialog = __webpack_require__(5);
let EstablishmentLayout = __webpack_require__(284);


let Controller = Marionette.Object.extend({

    create: function(organisation, collection) {
        $.ajax({
            type: "GET",
            url: window.application.url(['descriptor', 'layout', 'for-describable', 'organisation.establishment']),
            dataType: 'json'
        }).done(function(data) {
            let CreateEstablishmentView = Dialog.extend({
                attributes: {
                    'id': 'dlg_create_establishment'
                },
                template: __webpack_require__(672),

                ui: {
                    create: "button.create",
                    organisation: "#organisation_name",
                    name: "#establishment_name"
                },

                events: {
                    'click @ui.create': 'onCreate',
                    'input @ui.name': 'onNameInput'
                },

                initialize: function(options) {
                    options || (options = {});

                    Dialog.__super__.initialize.apply(this, options);
                },

                onRender: function () {
                    CreateEstablishmentView.__super__.onRender.apply(this);

                    // defines organisation name
                    this.ui.organisation.val(this.getOption('organisation').get('name'));
                },

                onBeforeDestroy: function () {
                    CreateEstablishmentView.__super__.onBeforeDestroy.apply(this);
                },

                onNameInput: function () {
                    let name = this.ui.name.val().trim();

                    if (this.validateName()) {
                        let filters = {
                            method: 'ieq',
                            fields: ['name'],
                            name: name
                        };

                        $.ajax({
                            type: "GET",
                            url: window.application.url(['organisation', 'establishment', 'search']),
                            dataType: 'json',
                            data: {filters: JSON.stringify(filters)},
                            el: this.ui.name
                        }).done(function (data) {
                            if (data.items.length > 0) {
                                for (let i in data.items) {
                                    let t = data.items[i];

                                    if (t.value.toUpperCase() === name.toUpperCase()) {
                                        $(this.el).validateField('failed', _t('Establishment name already in usage'));
                                        break;
                                    }
                                }
                            } else {
                                $(this.el).validateField('ok');
                            }
                        });
                    }
                },

                validateName: function () {
                    let v = this.ui.name.val().trim();

                    if (v.length > 255) {
                        $(this.ui.name).validateField('failed', _t('characters_max', {count: 255}));
                        return false;
                    } else if (v.length < 3) {
                        $(this.ui.name).validateField('failed', _t('characters_min', {count: 3}));
                        return false;
                    }

                    return true;
                },

                validate: function () {
                    let valid = this.validateName();

                    if (this.ui.name.hasClass('invalid')) {
                        valid = false;
                    }

                    return valid;
                },

                onCreate: function () {
                    let name = this.ui.name.val().trim();

                    if (this.validate()) {
                        let model = new EstablishmentModel({
                            layout: data[0].id,
                            name: name,
                            organisation: this.getOption('organisation').get('id')
                        });

                        this.destroy();

                        let defaultLayout = new DefaultLayout();
                        application.main.showContent(defaultLayout);

                        defaultLayout.showChildView('title', new TitleView({
                            title: _t("Establishment"),
                            model: model,
                            organisation: this.getOption('organisation').get('id')
                        }));

                        let establishmentLayout = new EstablishmentLayout({model: model});
                        defaultLayout.showChildView('content', establishmentLayout);
                    }
                }
            });

            let dialog = new CreateEstablishmentView({
                organisation: organisation,
                collection: collection
            });

            dialog.render();
        });
    }
});

module.exports = Controller;


/***/ }),
/* 660 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file establishmentdetails.js
 * @brief Details view for establishment.
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-04-02
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Marionette = __webpack_require__(1);

let Dialog = __webpack_require__(5);
let OrganisationModel = __webpack_require__(42);

let View = Marionette.View.extend({
    tagName: "div",
    template: __webpack_require__(661),
    templateContext: function () {
        return {
            organisation: this.organisation
        };
    },

    organisation: {id: -1, name: ''},
    noLink: false,

    attributes: {
        style: "height: 25px; overflow-y: auto;"
    },

    ui: {
        'view_organisation': ".view-organisation",
        'change_name': '.change-name'
    },

    events: {
        'click @ui.view_organisation': 'onViewOrganisation',
        'click @ui.change_name': 'onChangeName'
    },

    initialize: function(options) {
        this.mergeOptions(options, ['organisation']);

        this.listenTo(this.model, 'change:name', this.render, this);
        this.listenTo(this.model, 'change:parent', this.updateOrganisation, this);
    },

    updateOrganisation: function(model, value) {
        let view = this;

        // update the organisation
        this.organisation = new OrganisationModel({id: value});
        this.organisation.fetch().then(function() {
            view.render();
        });
    },

    onRender: function() {
        if (this.getOption('noLink')) {
            this.ui.view_organisation.removeClass('action');
        }
    },

    onChangeName: function () {
        let EditEstablishment = Dialog.extend({
            template: __webpack_require__(662),

            attributes: {
                id: "dlg_edit_establishment"
            },

            ui: {
                name: "#establishment_name"
            },

            events: {
                'click @ui.apply': 'onApply',
                'input @ui.name': 'onNameInput'
            },

            initialize: function (options) {
                EditEstablishment.__super__.initialize.apply(this);
            },

            onRender: function () {
                EditEstablishment.__super__.onRender.apply(this);

                this.ui.name.val(this.getOption('model').get('name'));
            },

            onBeforeDestroy: function () {
                EditEstablishment.__super__.onBeforeDestroy.apply(this);
            },

            onNameInput: function () {
                let name = this.ui.name.val().trim();
                let establishment_id = this.model.get('id');

                if (this.validateName()) {
                    let filters = {
                        method: 'ieq',
                        fields: ['name'],
                        'name': name
                    };

                    $.ajax({
                        type: "GET",
                        url: window.application.url(['organisation', 'establishment', 'search']),
                        dataType: 'json',
                        data: {filters: JSON.stringify(filters)},
                        el: this.ui.name,
                        success: function (data) {
                            if (data.items.length > 0) {
                                for (let i in data.items) {
                                    let e = data.items[i];

                                    if (e.value.toUpperCase() === name.toUpperCase() && e.id !== establishment_id) {
                                        $(this.el).validateField('failed', _t('Establishment name already in usage'));
                                        break;
                                    }
                                }
                            } else {
                                $(this.el).validateField('ok');
                            }
                        }
                    });
                }
            },

            validateName: function () {
                let v = this.ui.name.val().trim();

                if (v.length > 255) {
                    $(this.ui.name).validateField('failed', _t('characters_max', {count: 255}));
                    return false;
                } else if (v.length < 3) {
                    $(this.ui.name).validateField('failed', _t('characters_min', {count: 3}));
                    return false;
                }

                return true;
            },

            validate: function () {
                let valid = this.validateName();

                if (this.ui.name.hasClass('invalid') || this.ui.type.hasClass('invalid')) {
                    valid = false;
                }

                return valid;
            },

            onApply: function() {
                let model = this.getOption('model');
                let name = this.ui.name.val().trim();

                let data = {};

                if (name !== model.get('name')) {
                    data.name = name;
                }

                if (model.isNew()) {
                    if (name !== model.get('name')) {
                        model.set('name', name);
                    }
                } else {
                    model.save(data, {patch: true, wait: true});
                }

                this.destroy();
            }
        });

        let editEstablishment = new EditEstablishment({
            model: this.model
        });

        editEstablishment.render();
    },

    onViewOrganisation: function (e) {
        if (this.getOption('noLink')) {
            return;
        }

        Backbone.history.navigate("app/organisation/organisation/" + this.organisation.get('id') + "/", {trigger: true});
    }
});

module.exports = View;


/***/ }),
/* 661 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<span style="font-weight:bold; font-size:18px; margin-bottom: 15px"><span><span class="action view-organisation" data-organisation-id="' +
__e( organisation.get('id') ) +
'">' +
__e( organisation.get('name') ) +
'</span></span><span class="fa fa-chevron-right"></span> <span><span class="establishment-name" data-organisation-id="' +
__e( id ) +
'">' +
__e( name ) +
'</span></span>&nbsp; <span class="fa fa-pencil-square-o action change-name"></span></span>';

}
return __p
};

/*
original source:

<span style="font-weight:bold; font-size:18px; margin-bottom: 15px"><span><span class="action view-organisation" data-organisation-id="<%- organisation.get('id') %>"><%- organisation.get('name') %></span></span><span class="fa fa-chevron-right"></span> <span><span class="establishment-name" data-organisation-id="<%- id %>"><%- name %></span></span>&nbsp; <span class="fa fa-pencil-square-o action change-name"></span></span>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 662 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title">' +
__e( _t("Update an establishment") ) +
'</h4></div><div class="modal-body"><form><div class="form-group"><label class="control-label" for="establishment_name">' +
__e( _t("Name (must be unique)") ) +
'</label><input class="form-control name" id="establishment_name" type="text" name="name" value="" maxlength="255" autofocus="" autocomplete="off" style="width:100%"></div></form></div><div class="modal-footer"><button type="button" class="btn btn-default cancel" data-dismiss="modal">' +
__e( _t("Cancel") ) +
'</button> <button type="button" class="btn btn-success apply">' +
__e( _t("Apply") ) +
'</button></div></div></div>';

}
return __p
};

/*
original source:

<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title"><%- _t("Update an establishment") %></h4></div><div class="modal-body"><form><div class="form-group"><label class="control-label" for="establishment_name"><%- _t("Name (must be unique)") %></label><input class="form-control name" id="establishment_name" type="text" name="name" value="" maxlength="255" autofocus="" autocomplete="off" style="width:100%"></div></form></div><div class="modal-footer"><button type="button" class="btn btn-default cancel" data-dismiss="modal"><%- _t("Cancel") %></button> <button type="button" class="btn btn-success apply"><%- _t("Apply") %></button></div></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 663 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div name="details"></div><div class="column" style="margin-top: 10px; height: calc(100% - 25px)"><ul class="nav nav-tabs" role="tablist"><li role="presentation" class="active"><a href="div.tab-pane[name=descriptors]" aria-controls="descriptors" role="tab" data-toggle="tab">' +
__e( _t("Descriptors") ) +
'</a></li><li role="presentation"><a href="div.tab-pane[name=conservatories]" aria-controls="conservatories" role="tab" data-toggle="tab">' +
__e( _t("Conservatories") ) +
'</a></li><li role="presentation"><a href="div.tab-pane[name=persons]" aria-controls="persons" role="tab" data-toggle="tab">' +
__e( _t("Persons/Contacts") ) +
'</a></li><li role="presentation"><a href="div.tab-pane[name=comments]" aria-controls="comments" role="tab" data-toggle="tab">' +
__e( _t("Comments") ) +
'</a></li></ul><div class="tab-content" style="height: calc(100% - 41px - 10px)"><div role="tabpanel" class="tab-pane active" name="descriptors" style="height: 100%; overflow-y: auto; padding-right: 5px"></div><div role="tabpanel" class="tab-pane" name="conservatories" style="height: 100%"></div><div role="tabpanel" class="tab-pane" name="persons" style="height: 100%"></div><div role="tabpanel" class="tab-pane" name="comments" style="height: 100%"></div></div></div>';

}
return __p
};

/*
original source:

<div name="details"></div><div class="column" style="margin-top: 10px; height: calc(100% - 25px)"><ul class="nav nav-tabs" role="tablist"><li role="presentation" class="active"><a href="div.tab-pane[name=descriptors]" aria-controls="descriptors" role="tab" data-toggle="tab"><%- _t("Descriptors") %></a></li><li role="presentation"><a href="div.tab-pane[name=conservatories]" aria-controls="conservatories" role="tab" data-toggle="tab"><%- _t("Conservatories") %></a></li><li role="presentation"><a href="div.tab-pane[name=persons]" aria-controls="persons" role="tab" data-toggle="tab"><%- _t("Persons/Contacts") %></a></li><li role="presentation"><a href="div.tab-pane[name=comments]" aria-controls="comments" role="tab" data-toggle="tab"><%- _t("Comments") %></a></li></ul><div class="tab-content" style="height: calc(100% - 41px - 10px)"><div role="tabpanel" class="tab-pane active" name="descriptors" style="height: 100%; overflow-y: auto; padding-right: 5px"></div><div role="tabpanel" class="tab-pane" name="conservatories" style="height: 100%"></div><div role="tabpanel" class="tab-pane" name="persons" style="height: 100%"></div><div role="tabpanel" class="tab-pane" name="comments" style="height: 100%"></div></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 664 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file conservatory.js
 * @brief Conservatory collection
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2018-06-21
 * @copyright Copyright (c) 2018 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let ConservatoryModel = __webpack_require__(87);
let CountableCollection = __webpack_require__(9);

let Collection = CountableCollection.extend({
    url: function () {
        if (this.establishment_id) {
            return window.application.url(['organisation', 'establishment', this.establishment_id, 'conservatory']);
        } else {
            return window.application.url(['organisation', 'conservatory']);
        }
    },
    model: ConservatoryModel,

    initialize: function(models, options) {
        options || (options = {});

        Collection.__super__.initialize.apply(this, arguments);

        if (options.establishment_id) {
            this.establishment_id = options.establishment_id;
        }
    }
});

module.exports = Collection;


/***/ }),
/* 665 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {/**
 * @file conservatorylist.js
 * @brief Conservatory list view
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2018-06-21
 * @copyright Copyright (c) 2018 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let AdvancedTable = __webpack_require__(6);
let ConservatoryView = __webpack_require__(666);
let DescriptorsColumnsView = __webpack_require__(11);

let View = AdvancedTable.extend({
    className: "conservatory-list advanced-table-container",
    childView: ConservatoryView,

    userSettingName: 'conservatory_list_columns',
    userSettingVersion: '1.0',

    templateContext: function () {
        return {
            columnsList: this.displayedColumns,
            columnsOptions: this.getOption('columns')
        }
    },

    childViewOptions: function () {
        return {
            columnsList: this.displayedColumns,
            columnsOptions: this.getOption('columns')
        }
    },

    defaultColumns: [
        {name: 'name', width: 'auto', sort_by: '+0'},
        {name: '#code_16', width: 'auto', sort_by: null},
    ],

    columnsOptions: {
        'name': {label: _t('Name'), minWidth: true, event: 'view-conservatory', format: {type: 'string'}},
    },

    initialize: function(options) {
        View.__super__.initialize.apply(this, arguments);

        // this.listenTo(this.collection, 'reset', this.render, this);
    },

    onShowTab: function() {
        let view = this;

        let contextLayout = window.application.getView().getChildView('right');
        if (!contextLayout) {
            let DefaultLayout = __webpack_require__(3);
            contextLayout = new DefaultLayout();
            window.application.getView().showChildView('right', contextLayout);
        }

        let TitleView = __webpack_require__(4);
        contextLayout.showChildView('title', new TitleView({title: _t("Conservatory")}));

        let actions = ['add'];

        let ConservatoryListContextView = __webpack_require__(667);
        let contextView = new ConservatoryListContextView({actions: actions});
        contextLayout.showChildView('content', contextView);

        contextView.on("conservatory:add", function () {
            window.application.organisation.controllers.conservatory.create(
                view.getOption('model'), view.collection);
        });
    },

    onHideTab: function() {
        window.application.main.defaultRightView();
    },
});

// support of descriptors columns extension
_.extend(View.prototype, DescriptorsColumnsView);

module.exports = View;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 666 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file conservatory.js
 * @brief Person item view
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2018-06-21
 * @copyright Copyright (c) 2018 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);

let View = Marionette.View.extend({
    tagName: 'tr',
    className: "object conservatory element",
    attributes: function() {
        return {
            'scope': 'row',
            'element-id': this.model.get('id')
        }
    },
    template: __webpack_require__(12),

    templateContext: function () {
        return {
            columnsList: this.getOption('columnsList'),
            columnsOptions: this.getOption('columnsOptions')
        }
    },

    ui: {
        "conservatory": "td.view-conservatory",
        "remove_conservatory": ".delete-conservatory"
    },

    events: {
        "click @ui.conservatory": "onConservatoryDetails",
        "click @ui.remove_conservatory": "onRemoveConservatory"
    },

    behaviors: {
        ActionBtnEvents: {
            behaviorClass: __webpack_require__(8),
            actions: {
                edit: {display: true, event: 'onConservatoryDetails'},
                manage: {display: false /*, event: 'onStorageList'*/},
                remove: {display: true, event: 'onRemoveConservatory'}
            }
        }
    },

    initialize: function() {
        this.listenTo(this.model, 'change', this.render, this);
    },

    onRender: function() {
    },

    onConservatoryDetails: function() {
        Backbone.history.navigate("app/organisation/person/" + this.model.get('id') + "/", {trigger: true});
    },

    onRemoveConservatory: function() {
        this.model.destroy({wait: true}).then(function() {
            $.alert.success(_t("Successfully removed !"));
        });
    },

    onStorageList: function() {

    }
});

module.exports = View;


/***/ }),
/* 667 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file persoconservatorylistcontext.js
 * @brief Person list for conservatory context menu
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2018-06-21
 * @copyright Copyright (c) 2018 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);

let View = Marionette.View.extend({
    tagName: 'div',
    template: __webpack_require__(15),
    className: "context conservatory-list",
    templateContext: function () {
        return {
            actions: this.getOption('actions'),
            options: {
                'add': {className: 'btn-default', label: _t('Add conservatory')}
            }
        }
    },

    ui: {
        'add': 'button[name="add"]'
    },

    triggers: {
        "click @ui.add": "conservatory:add"
    },

    initialize: function(options) {
        options || (options = {actions: []});
    }
});

module.exports = View;


/***/ }),
/* 668 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file person.js
 * @brief Person collection
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2018-06-01
 * @copyright Copyright (c) 2018 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let PersonModel = __webpack_require__(88);
let CountableCollection = __webpack_require__(9);

let Collection = CountableCollection.extend({
    url: function () {
        if (this.establishment_id) {
            return window.application.url(['organisation', 'establishment', this.establishment_id, 'person']);
        } else {
            return window.application.url(['organisation', 'person']);
        }
    },
    model: PersonModel,

    initialize: function(models, options) {
        options || (options = {});

        Collection.__super__.initialize.apply(this, arguments);

        if (options.establishment_id) {
            this.establishment_id = options.establishment_id;
        }
    }
});

module.exports = Collection;


/***/ }),
/* 669 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {/**
 * @file personlist.js
 * @brief Person list view
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2018-06-04
 * @copyright Copyright (c) 2018 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let AdvancedTable = __webpack_require__(6);
let PersonView = __webpack_require__(670);
let DescriptorsColumnsView = __webpack_require__(11);

let View = AdvancedTable.extend({
    className: "person-list advanced-table-container",
    childView: PersonView,

    userSettingName: 'person_list_columns',
    userSettingVersion: '1.0',

    templateContext: function () {
        return {
            columnsList: this.displayedColumns,
            columnsOptions: this.getOption('columns')
        }
    },

    childViewOptions: function () {
        return {
            columnsList: this.displayedColumns,
            columnsOptions: this.getOption('columns')
        }
    },

    defaultColumns: [
        {name: 'code', width: 'auto', sort_by: null},
        {name: '#ORG_FULL_NAME', width: 'auto', sort_by: '+0'},
        {name: '#ORG_FIRST_NAME', width: 'auto', sort_by: '+0'},
        {name: '#ORG_LAST_NAME', width: 'auto', sort_by: null}
    ],

    columnsOptions: {
        'code': {label: _t('Code'), minWidth: true, event: 'view-person', format: {type: 'string'}},
        '#ORG_FULL_NAME': {label: _t('Full name'), minWidth: true, event: 'view-person', format: {type: 'string'}},
        '#ORG_FIRST_NAME': {label: _t('First name'), minWidth: true, event: 'view-person', format: {type: 'string'}},
        '#ORG_LAST_NAME': {label: _t('Last name'), minWidth: true, format: {type: 'string'}}
    },

    initialize: function(options) {
        View.__super__.initialize.apply(this, arguments);

        // this.listenTo(this.collection, 'reset', this.render, this);
    },

    onShowTab: function() {
        View.__super__.onShowTab.apply(this, arguments);

        let self = this;

        // query now to avoid useless queries
        this.query();

        let contextLayout = window.application.getView().getChildView('right');
        if (!contextLayout) {
            let DefaultLayout = __webpack_require__(3);
            contextLayout = new DefaultLayout();
            window.application.getView().showChildView('right', contextLayout);
        }

        let TitleView = __webpack_require__(4);
        contextLayout.showChildView('title', new TitleView({title: _t("Person/Contact")}));

        let actions = ['add'];

        let PersonListContextView = __webpack_require__(671);
        let contextView = new PersonListContextView({actions: actions});
        contextLayout.showChildView('content', contextView);

        contextView.on("person:add", function () {
            window.application.organisation.controllers.person.create(
                self.getOption('model'), self.collection);
        });
    },

    onHideTab: function() {
        window.application.main.defaultRightView();
    },
});

// support of descriptors columns extension
_.extend(View.prototype, DescriptorsColumnsView);

module.exports = View;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 670 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file person.js
 * @brief Person item view
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2018-06-04
 * @copyright Copyright (c) 2018 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);

let View = Marionette.View.extend({
    tagName: 'tr',
    className: "object person element",
    attributes: function() {
        return {
            'scope': 'row',
            'element-id': this.model.get('id')
        }
    },
    template: __webpack_require__(12),

    templateContext: function () {
        return {
            columnsList: this.getOption('columnsList'),
            columnsOptions: this.getOption('columnsOptions')
        }
    },

    ui: {
        "person": "td.view-person",
        "remove_person": ".delete-person"
    },

    events: {
        "click @ui.person": "onPersonDetails",
        "click @ui.remove_person": "onRemovePerson"
    },

    behaviors: {
        ActionBtnEvents: {
            behaviorClass: __webpack_require__(8),
            actions: {
                edit: {display: true, event: 'onPersonDetails'},
                manage: {display: false /*, event: 'onConservatoryList'*/},
                remove: {display: true, event: 'onRemovePerson'}
            }
        }
    },

    initialize: function() {
        this.listenTo(this.model, 'change', this.render, this);
    },

    onRender: function() {
    },

    onPersonDetails: function() {
        Backbone.history.navigate("app/organisation/person/" + this.model.get('id') + "/", {trigger: true});
    },

    onRemovePerson: function() {
        this.model.destroy({wait: true}).then(function() {
            $.alert.success(_t("Successfully removed !"));
        });
    }
});

module.exports = View;


/***/ }),
/* 671 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file personlistcontext.js
 * @brief Person list for person context menu
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2018-06-05
 * @copyright Copyright (c) 2018 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);

let View = Marionette.View.extend({
    tagName: 'div',
    template: __webpack_require__(15),
    className: "context person-list",
    templateContext: function () {
        return {
            actions: this.getOption('actions'),
            options: {
                'add': {className: 'btn-default', label: _t('Add person/contact')}
            }
        }
    },

    ui: {
        'add': 'button[name="add"]'
    },

    triggers: {
        "click @ui.add": "person:add"
    },

    initialize: function(options) {
        options || (options = {actions: []});
    }
});

module.exports = View;


/***/ }),
/* 672 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title">' +
__e( _t("Create an establishment") ) +
'</h4></div><div class="modal-body"><form><div class="form-group"><label class="control-label" for="organisation_name">' +
__e( _t("Name of the organisation") ) +
'</label><input class="form-control name" id="organisation_name" type="text" name="name" value="" readonly="" autocomplete="off" style="width:100%"></div><div class="form-group"><label class="control-label" for="establishment_name">' +
__e( _t("Name (must be unique)") ) +
'</label><input class="form-control name" id="establishment_name" type="text" name="name" value="" maxlength="255" autofocus="" autocomplete="off" style="width:100%"></div></form></div><div class="modal-footer"><button type="button" class="btn btn-default cancel" data-dismiss="modal">' +
__e( _t("Cancel") ) +
'</button> <button type="button" class="btn btn-success create">' +
__e( _t("Create") ) +
'</button></div></div></div>';

}
return __p
};

/*
original source:

<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title"><%- _t("Create an establishment") %></h4></div><div class="modal-body"><form><div class="form-group"><label class="control-label" for="organisation_name"><%- _t("Name of the organisation") %></label><input class="form-control name" id="organisation_name" type="text" name="name" value="" readonly="" autocomplete="off" style="width:100%"></div><div class="form-group"><label class="control-label" for="establishment_name"><%- _t("Name (must be unique)") %></label><input class="form-control name" id="establishment_name" type="text" name="name" value="" maxlength="255" autofocus="" autocomplete="off" style="width:100%"></div></form></div><div class="modal-footer"><button type="button" class="btn btn-default cancel" data-dismiss="modal"><%- _t("Cancel") %></button> <button type="button" class="btn btn-success create"><%- _t("Create") %></button></div></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 673 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file person.js
 * @brief Person controller
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2018-06-04
 * @copyright Copyright (c) 2018 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);

let EstablishmentModel = __webpack_require__(30);
let PersonModel = __webpack_require__(88);

let DefaultLayout = __webpack_require__(3);
let TitleView = __webpack_require__(4);
let Dialog = __webpack_require__(5);
// let PersonLayout = require('../views/personlayout');


let Controller = Marionette.Object.extend({

    create: function(organisation, collection) {
        $.ajax({
            type: "GET",
            url: window.application.url(['descriptor', 'layout', 'for-describable', 'organisation.person']),
            dataType: 'json'
        }).done(function(data) {
            // @todo
    //         let CreateEstablishmentView = Dialog.extend({
    //             attributes: {
    //                 'id': 'dlg_create_establishment'
    //             },
    //             template: require('../templates/personcreate.html'),
    //
    //             ui: {
    //                 create: "button.create",
    //                 organisation: "#organisation_name",
    //                 name: "#establishment_name"
    //             },
    //
    //             events: {
    //                 'click @ui.create': 'onCreate',
    //                 'input @ui.name': 'onNameInput'
    //             },
    //
    //             initialize: function(options) {
    //                 options || (options = {});
    //
    //                 Dialog.__super__.initialize.apply(this, options);
    //             },
    //
    //             onRender: function () {
    //                 CreateEstablishmentView.__super__.onRender.apply(this);
    //
    //                 // defines organisation name
    //                 this.ui.organisation.val(this.getOption('organisation').get('name'));
    //             },
    //
    //             onBeforeDestroy: function () {
    //                 CreateEstablishmentView.__super__.onBeforeDestroy.apply(this);
    //             },
    //
    //             onNameInput: function () {
    //                 let name = this.ui.name.val().trim();
    //
    //                 if (this.validateName()) {
    //                     let filters = {
    //                         method: 'ieq',
    //                         fields: ['name'],
    //                         name: name
    //                     };
    //
    //                     $.ajax({
    //                         type: "GET",
    //                         url: window.application.url(['organisation', 'establishment', 'search']),
    //                         dataType: 'json',
    //                         data: {filters: JSON.stringify(filters)},
    //                         el: this.ui.name
    //                     }).done(function (data) {
    //                         if (data.items.length > 0) {
    //                             for (let i in data.items) {
    //                                 let t = data.items[i];
    //
    //                                 if (t.value.toUpperCase() === name.toUpperCase()) {
    //                                     $(this.el).validateField('failed', _t('Establishment name already in usage'));
    //                                     break;
    //                                 }
    //                             }
    //                         } else {
    //                             $(this.el).validateField('ok');
    //                         }
    //                     });
    //                 }
    //             },
    //
    //             validateName: function () {
    //                 let v = this.ui.name.val().trim();
    //
    //                 if (v.length > 255) {
    //                     $(this.ui.name).validateField('failed', _t('characters_max', {count: 255}));
    //                     return false;
    //                 } else if (v.length < 3) {
    //                     $(this.ui.name).validateField('failed', _t('characters_min', {count: 3}));
    //                     return false;
    //                 }
    //
    //                 return true;
    //             },
    //
    //             validate: function () {
    //                 let valid = this.validateName();
    //
    //                 if (this.ui.name.hasClass('invalid')) {
    //                     valid = false;
    //                 }
    //
    //                 return valid;
    //             },
    //
    //             onCreate: function () {
    //                 let name = this.ui.name.val().trim();
    //
    //                 if (this.validate()) {
    //                     let model = new EstablishmentModel({
    //                         layout: data[0].id,
    //                         name: name,
    //                         organisation: this.getOption('organisation').get('id')
    //                     });
    //
    //                     this.destroy();
    //
    //                     let defaultLayout = new DefaultLayout();
    //                     application.main.showContent(defaultLayout);
    //
    //                     defaultLayout.showChildView('title', new TitleView({
    //                         title: _t("Establishment"),
    //                         model: model,
    //                         organisation: this.getOption('organisation').get('id')
    //                     }));
    //
    //                     let establishmentLayout = new EstablishmentLayout({model: model});
    //                     defaultLayout.showChildView('content', establishmentLayout);
    //                 }
    //             }
    //         });
    //
    //         let dialog = new CreateEstablishmentView({
    //             organisation: organisation,
    //             collection: collection
    //         });
    //
    //         dialog.render();
         });
    }
});

module.exports = Controller;


/***/ }),
/* 674 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file conservatory.js
 * @brief Conservatory controller
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2018-06-21
 * @copyright Copyright (c) 2018 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);

let EstablishmentModel = __webpack_require__(30);
let ConservatoryModel = __webpack_require__(87);

let DefaultLayout = __webpack_require__(3);
let TitleView = __webpack_require__(4);
let Dialog = __webpack_require__(5);
// let ConservatoryLayout = require('../views/conservatorylayout');


let Controller = Marionette.Object.extend({

    create: function(organisation, collection) {
        $.ajax({
            type: "GET",
            url: window.application.url(['descriptor', 'layout', 'for-describable', 'organisation.conservatory']),
            dataType: 'json'
        }).done(function(data) {
            // @todo
    //         let CreateEstablishmentView = Dialog.extend({
    //             attributes: {
    //                 'id': 'dlg_create_establishment'
    //             },
    //             template: require('../templates/conservatorycreate.html'),
    //
    //             ui: {
    //                 create: "button.create",
    //                 organisation: "#organisation_name",
    //                 name: "#establishment_name"
    //             },
    //
    //             events: {
    //                 'click @ui.create': 'onCreate',
    //                 'input @ui.name': 'onNameInput'
    //             },
    //
    //             initialize: function(options) {
    //                 options || (options = {});
    //
    //                 Dialog.__super__.initialize.apply(this, options);
    //             },
    //
    //             onRender: function () {
    //                 CreateEstablishmentView.__super__.onRender.apply(this);
    //
    //                 // defines organisation name
    //                 this.ui.organisation.val(this.getOption('organisation').get('name'));
    //             },
    //
    //             onBeforeDestroy: function () {
    //                 CreateEstablishmentView.__super__.onBeforeDestroy.apply(this);
    //             },
    //
    //             onNameInput: function () {
    //                 let name = this.ui.name.val().trim();
    //
    //                 if (this.validateName()) {
    //                     let filters = {
    //                         method: 'ieq',
    //                         fields: ['name'],
    //                         name: name
    //                     };
    //
    //                     $.ajax({
    //                         type: "GET",
    //                         url: window.application.url(['organisation', 'establishment', 'search']),
    //                         dataType: 'json',
    //                         data: {filters: JSON.stringify(filters)},
    //                         el: this.ui.name
    //                     }).done(function (data) {
    //                         if (data.items.length > 0) {
    //                             for (let i in data.items) {
    //                                 let t = data.items[i];
    //
    //                                 if (t.value.toUpperCase() === name.toUpperCase()) {
    //                                     $(this.el).validateField('failed', _t('Establishment name already in usage'));
    //                                     break;
    //                                 }
    //                             }
    //                         } else {
    //                             $(this.el).validateField('ok');
    //                         }
    //                     });
    //                 }
    //             },
    //
    //             validateName: function () {
    //                 let v = this.ui.name.val().trim();
    //
    //                 if (v.length > 255) {
    //                     $(this.ui.name).validateField('failed', _t('characters_max', {count: 255}));
    //                     return false;
    //                 } else if (v.length < 3) {
    //                     $(this.ui.name).validateField('failed', _t('characters_min', {count: 3}));
    //                     return false;
    //                 }
    //
    //                 return true;
    //             },
    //
    //             validate: function () {
    //                 let valid = this.validateName();
    //
    //                 if (this.ui.name.hasClass('invalid')) {
    //                     valid = false;
    //                 }
    //
    //                 return valid;
    //             },
    //
    //             onCreate: function () {
    //                 let name = this.ui.name.val().trim();
    //
    //                 if (this.validate()) {
    //                     let model = new EstablishmentModel({
    //                         layout: data[0].id,
    //                         name: name,
    //                         organisation: this.getOption('organisation').get('id')
    //                     });
    //
    //                     this.destroy();
    //
    //                     let defaultLayout = new DefaultLayout();
    //                     application.main.showContent(defaultLayout);
    //
    //                     defaultLayout.showChildView('title', new TitleView({
    //                         title: _t("Establishment"),
    //                         model: model,
    //                         organisation: this.getOption('organisation').get('id')
    //                     }));
    //
    //                     let establishmentLayout = new EstablishmentLayout({model: model});
    //                     defaultLayout.showChildView('content', establishmentLayout);
    //                 }
    //             }
    //         });
    //
    //         let dialog = new CreateEstablishmentView({
    //             organisation: organisation,
    //             collection: collection
    //         });
    //
    //         dialog.render();
         });
    }
});

module.exports = Controller;


/***/ }),
/* 675 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file organisation.js
 * @brief Organisation router
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-02-28
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Marionette = __webpack_require__(1);

let GRCModel = __webpack_require__(676);
let OrganisationModel = __webpack_require__(42);

let OrganisationCollection = __webpack_require__(677);

let OrganisationListView = __webpack_require__(678);
let OrganisationLayout = __webpack_require__(282);
let EntityListFilterView = __webpack_require__(14);

let DefaultLayout = __webpack_require__(3);
let ScrollingMoreView = __webpack_require__(10);
let TitleView = __webpack_require__(4);

let Router = Marionette.AppRouter.extend({
    routes : {
        "app/organisation/grc/": "getGRC",
        "app/organisation/organisation/": "getOrganisationList",
        "app/organisation/organisation/:id/*tab": "getOrganisation"
    },

    getGRC: function () {
        let grc = new GRCModel();

        let defaultLayout = new DefaultLayout();
        window.application.main.showContent(defaultLayout);

        let GRCDetailsView = __webpack_require__(680);
        let grcDetails = new GRCDetailsView({model: grc});

        grc.fetch().then(function () {
            defaultLayout.showChildView('title', new TitleView({title: _t("GRC details"), model: grc}));
            defaultLayout.showChildView('content', grcDetails);
        });
    },

    getOrganisationList : function(options) {
        options || (options = {});

        let collection = new OrganisationCollection([], {
            filters: (options.filters || {}),
            search: (options.search || {})
        });

        let defaultLayout = new DefaultLayout({});
        window.application.main.showContent(defaultLayout);

        defaultLayout.showChildView('title', new TitleView({title: _t("List of organisations")}));

        // get available columns
        let columns = window.application.main.cache.lookup({
            type: 'entity_columns',
            format: {model: 'organisation.organisation'}
        });

        columns.done(function (data) {
            let organisationListView = new OrganisationListView({
                collection: collection, columns: data[0].value
            });

            defaultLayout.showChildView('content', organisationListView);
            defaultLayout.showChildView('content-bottom', new ScrollingMoreView({
                collection: collection,
                targetView: organisationListView
            }));

            defaultLayout.showChildView('bottom', new EntityListFilterView({
                collection: collection, columns: data[0].value
            }));

            organisationListView.query();
        });
    },

    getOrganisation : function(id, tab) {
        tab || (tab = "");

        let organisation = new OrganisationModel({id: id});

        let defaultLayout = new DefaultLayout();
        window.application.main.showContent(defaultLayout);

        let organisationLayout = new OrganisationLayout({model: organisation, initialTab: tab.replace('/', '')});

        organisation.fetch().then(function() {
            defaultLayout.showChildView('title', new TitleView({title: _t("Organisation"), model: organisation}));
            defaultLayout.showChildView('content', organisationLayout);
        });
    }
});

module.exports = Router;


/***/ }),
/* 676 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file grc.js
 * @brief GRC model
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-02-28
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Backbone = __webpack_require__(7);

let Model = Backbone.Model.extend({
    url: window.application.url(['organisation', 'grc']),

    defaults: {
        id: null,
        identifier: "",
        name: "",
        description: ""
    }
});

module.exports = Model;



/***/ }),
/* 677 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file organisation.js
 * @brief Organisation collection
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-02-28
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let OrganisationModel = __webpack_require__(42);
let CountableCollection = __webpack_require__(9);

let Collection = CountableCollection.extend({
    url: function() {
        return window.application.url(['organisation', 'organisation']);
    },
    model: OrganisationModel,

    // comparator: 'name',

    initialize: function(models, options) {
        options || (options = {});

        Collection.__super__.initialize.apply(this, arguments);
    }
});

module.exports = Collection;


/***/ }),
/* 678 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {/**
 * @file organisationlist.js
 * @brief Organisation list view
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-03-06
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let OrganisationView = __webpack_require__(679);
let AdvancedTable = __webpack_require__(6);
let DescriptorsColumnsView = __webpack_require__(11);

let View = AdvancedTable.extend({
    className: "organisation-list advanced-table-container",
    childView: OrganisationView,

    // defaultSortBy: ['name'],
    
    userSettingName: 'organisation_list_columns',
    userSettingVersion: '1.1',

    defaultColumns: [
        {name: 'name', width: 'auto', sort_by: '+0'},
        {name: 'type', width: 'auto', sort_by: null},
        {name: '#DE_001', width: 'auto', sort_by: null},
        {name: '#DE_002', width: 'auto', sort_by: null},
        {name: 'grc', width: 'auto', sort_by: null},
        {name: 'num_establishments', width: 'auto', sort_by: null},
    ],

    columnsOptions: {
        'name': {label: _t('Name'), minWidth: true, event: 'view-organisation'},
        'type': {label: _t('Type'), minWidth: true, custom: 'organisationTypeCell'},
        '#DE_001': {label: _t('Acronym'), minWidth: true, format: {type: 'string'}},
        '#DE_002': {label: _t('Code'), minWidth: true, format: {type: 'string'}},
        'grc': {label: _t('Partner'), minWidth: true, width: '175px', custom: 'organisationGRCCell'},
        'num_establishments': {
            label: _t('Establishments'), minWidth: true, event: 'view-establishments', custom: 'numEstablishmentsCell'
        }
    },

    templateContext: function () {
        return {
            columnsList: this.displayedColumns,
            columnsOptions: this.getOption('columns')
        }
    },

    childViewOptions: function () {
        return {
            columnsList: this.displayedColumns,
            columnsOptions: this.getOption('columns')
        }
    },

    initialize: function(options) {
        View.__super__.initialize.apply(this, arguments);
        // this.filters = this.getOption('filters');

        //this.listenTo(this.collection, 'reset', this.render, this);
    }
});

// support of descriptors columns extension
_.extend(View.prototype, DescriptorsColumnsView);

module.exports = View;

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 679 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file organisation.js
 * @brief Organisation item view
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-03-06
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Marionette = __webpack_require__(1);

let View = Marionette.View.extend({
    tagName: 'tr',
    className: "object organisation element",
    attributes: function() {
        return {
            'scope': 'row',
            'element-id': this.model.get('id')
        }
    },
    template: __webpack_require__(12),

    templateContext: function () {
        return {
            columnsList: this.getOption('columnsList'),
            columnsOptions: this.getOption('columnsOptions')
        }
    },

    ui: {
        "organisation": "td.view-organisation",
        "remove_organisation": ".remove-organisation",
        "establishments": "td.view-establishments",
    },

    events: {
        "click @ui.organisation": "onOrganisationDetails",
        "click @ui.establishments": "onEstablishmentsList",
        "click @ui.remove_organisation": "onRemoveOrganisation"
    },

    behaviors: {
        ActionBtnEvents: {
            behaviorClass: __webpack_require__(8),
            actions: {
                edit: {display: true, event: 'onOrganisationDetails'},
                manage: {display: true, event: 'onEstablishmentsList'},
                remove: {display: true, event: 'onRemoveOrganisation'}
            }
        }
    },

    initialize: function() {
        this.listenTo(this.model, 'change', this.render, this);
    },

    onRender: function() {
        application.organisation.views.organisationTypes.htmlFromValue(this.el);
    },

    onOrganisationDetails: function() {
        Backbone.history.navigate("app/organisation/organisation/" + this.model.get('id') + "/", {trigger: true});
    },

    onRemoveOrganisation: function() {
        this.model.destroy({wait: true}).then(function() {
            $.alert.success(_t("Successfully removed !"));
        });
    },

    onEstablishmentsList: function() {
        Backbone.history.navigate("app/organisation/organisation/" + this.model.get('id') + "/establishments/", {trigger: true});
    },

    organisationTypeCell: function(td) {
        let el = $('<span></span>');

        let type = application.organisation.collections.organisationTypes.findLabel(this.model.get('type'));
        el.html(type);

        td.html(el);
    },

    organisationGRCCell: function(td) {
        let el = $('<span></span>');

        // if (this.model.get('grc').length) {
        //     el.addClass("fa fa-check");
        // }
        if (this.model.get('grc')) {
            el.addClass("fa fa-check");
        }

        td.html(el);
    },

    numEstablishmentsCell: function(td) {
        let el = $('<span class="badge" style="cursor: pointer;">' + this.model.get('num_establishments') + '</span>');
        el.attr('title', _t('Manage establishments of the organisation'));

        td.html(el);
    }
});

module.exports = View;


/***/ }),
/* 680 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file grcdetails.js
 * @brief GRC details item view
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-02-28
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Marionette = __webpack_require__(1);

let View = Marionette.View.extend({
    tagName: 'div',
    className: 'object grc',
    template: __webpack_require__(681),

    ui: {
        'name': 'input[name=name]',
        'identifier': 'input[name=identifier]',
        'description': 'textarea[name=description]',
        'save': '#grc_save'
    },

    events: {
        'click @ui.save': 'updateDetails'
    },

    initialize: function() {
        this.listenTo(this.model, 'change', this.render, this);
    },

    onRender: function() {
    },

    updateDetails: function() {
        this.model.save({
            name: this.ui.name.val(),
            identifier: this.ui.identifier.val(),
            description: this.ui.description.val()
        }, {
            success: function() {
                $.alert.success(_t("Done"));
            }
        });
    }
});

module.exports = View;


/***/ }),
/* 681 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div class="grc"><div class="row"><div class="form-group col-lg-5"><label for="grc_name">' +
__e( _t("Name") ) +
'</label><input id="grc_name" name="name" class="form-control" value="' +
__e( name ) +
'"></div></div><div class="row"><div class="form-group col-lg-5"><label for="grc_identifier">' +
__e( _t("Identifier") ) +
'</label><input id="grc_identifier" name="identifier" class="form-control" value="' +
__e( identifier ) +
'"></div></div><div class="row"><div class="form-group col-lg-5"><label for="grc_description">' +
__e( _t("Description") ) +
'</label><textarea id="grc_description" name="description" class="form-control" maxlength="4096">' +
__e( description ) +
'</textarea></div></div><div class="row"><div class="form-group col-lg-2"><button id="grc_save" class="form-control btn btn-success">Update</button></div></div></div>';

}
return __p
};

/*
original source:

<div class="grc"><div class="row"><div class="form-group col-lg-5"><label for="grc_name"><%- _t("Name") %></label><input id="grc_name" name="name" class="form-control" value="<%- name %>"></div></div><div class="row"><div class="form-group col-lg-5"><label for="grc_identifier"><%- _t("Identifier") %></label><input id="grc_identifier" name="identifier" class="form-control" value="<%- identifier %>"></div></div><div class="row"><div class="form-group col-lg-5"><label for="grc_description"><%- _t("Description") %></label><textarea id="grc_description" name="description" class="form-control" maxlength="4096"><%- description %></textarea></div></div><div class="row"><div class="form-group col-lg-2"><button id="grc_save" class="form-control btn btn-success">Update</button></div></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 682 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file establishment.js
 * @brief Establishment router
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-03-06
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Marionette = __webpack_require__(1);

let EstablishmentModel = __webpack_require__(30);

let EstablishmentLayout = __webpack_require__(284);
let DefaultLayout = __webpack_require__(3);
let TitleView = __webpack_require__(4);


let Router = Marionette.AppRouter.extend({
    routes : {
        "app/organisation/establishment/:id/*tab": "getEstablishment"
    },

    getEstablishment : function(id, tab) {
        tab || (tab = "");

        let establishment = new EstablishmentModel({id: id});

        let defaultLayout = new DefaultLayout();
        window.application.main.showContent(defaultLayout);

        let establishmentLayout = new EstablishmentLayout({model: establishment, initialTab: tab.replace('/', '')});

        establishment.fetch().then(function() {
            defaultLayout.showChildView('title', new TitleView({title: _t("Establishment"), model: establishment}));
            defaultLayout.showChildView('content', establishmentLayout);
        });
    }
});

module.exports = Router;


/***/ }),
/* 683 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file person.js
 * @brief Person router
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2018-06-14
 * @copyright Copyright (c) 2018 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);

let PersonModel = __webpack_require__(88);

let PersonLayout = __webpack_require__(684);
let DefaultLayout = __webpack_require__(3);
let TitleView = __webpack_require__(4);


let Router = Marionette.AppRouter.extend({
    routes : {
        "app/organisation/person/:id/*tab": "getPerson"
    },

    getPerson : function(id, tab) {
        tab || (tab = "");

        let person = new PersonModel({id: id});

        let defaultLayout = new DefaultLayout();
        window.application.main.showContent(defaultLayout);

        let personLayout = new PersonLayout({model: person, initialTab: tab.replace('/', '')});

        person.fetch().then(function() {
            defaultLayout.showChildView('title', new TitleView({title: _t("Person/Contact"), model: person}));
            defaultLayout.showChildView('content', personLayout);
        });
    }
});

module.exports = Router;


/***/ }),
/* 684 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file personlayout.js
 * @brief Optimized layout for person details
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2018-06-14
 * @copyright Copyright (c) 2018 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let LayoutView = __webpack_require__(17);
let PersonDetailsView = __webpack_require__(685);
let DescriptorEditView = __webpack_require__(43);
let EstablishmentModel = __webpack_require__(30);
let DescriptorCollection = __webpack_require__(18);

let Layout = LayoutView.extend({
    template: __webpack_require__(686),

    ui: {
        general_tab: 'a[aria-controls=general]',
        commands_tab: 'a[aria-controls=commands]',
        comments_tab: 'a[aria-controls=comments]',
    },

    regions: {
        'descriptors': "div[name=descriptors]",
        'commands': "div[name=commands]",
        'comments': "div[name=comments]"
    },

    initialize: function(options) {
        Layout.__super__.initialize.apply(this, arguments);

        this.listenTo(this.model, 'change:layout', this.onLayoutChange, this);

        if (this.model.isNew()) {
            this.listenTo(this.model, 'change:id', this.onPersonCreate, this);
        }
    },

    onPersonCreate: function(model, value) {
        // re-render once created
        this.render();

        // and update history
        Backbone.history.navigate('app/organisation/person/' + this.model.get('id') + '/', {/*trigger: true,*/ replace: false});
    },

    onLayoutChange: function(model, value) {
        if (value == null) {
            this.getRegion('descriptors').empty();
        } else {
            let establishmentLayout = this;

            // get the layout before creating the view
            $.ajax({
                method: "GET",
                url: window.application.url(['descriptor', 'layout', value]),
                dataType: 'json'
            }).done(function (data) {

                let descriptorCollection = new DescriptorCollection([], {
                    model_id: data.id
                });

                descriptorCollection.fetch().then(function () {
                    let DescriptorView = __webpack_require__(35);
                    let descriptorView = new DescriptorView({
                        model: model,
                        layoutData: data,
                        descriptorCollection: descriptorCollection
                    });
                    establishmentLayout.showChildView('descriptors', descriptorView);

                });
            });
        }
    },

    // disableConservatoriesTab: function () {
    //     this.ui.conservatories_tab.parent().addClass('disabled');
    // },
    //
    // disableContactsTab: function () {
    //     this.ui.persons_tab.parent().addClass('disabled');
    // },

    onRender: function() {
        let personLayout = this;

        // details view
        if (!this.model.isNew()) {
            // establishment parent
            let establishment = new EstablishmentModel({id: this.model.get('establishment')});
            establishment.fetch().then(function () {
                personLayout.showChildView('details', new PersonDetailsView({
                    model: personLayout.model,
                    establishment: establishment
                }));
            });

            // if necessary enable tabs
        } else {
            // establishment parent
            let establishment = new EstablishmentModel({id: this.model.get('establishment')});
            establishment.fetch().then(function () {
                personLayout.showChildView('details', new PersonDetailsView({
                    model: personLayout.model,
                    establishment: establishment,
                    noLink: true
                }));
            });

            // descriptors edit tab
            $.ajax({
                method: "GET",
                url: window.application.url(['descriptor', 'layout', this.model.get('layout')]),
                dataType: 'json'
            }).done(function(data) {

                let descriptorCollection = new DescriptorCollection([], {
                    model_id: data.id
                });

                descriptorCollection.fetch().then(function () {
                    let descriptorView = new DescriptorEditView({
                        model: personLayout.model,
                        layoutData: data,
                        descriptorCollection: descriptorCollection
                    });
                    personLayout.showChildView('descriptors', descriptorView);
                });
            });

            // comments
            let CommentListView = __webpack_require__(28);

            // classifications entry tab (query on show tab)
            let CommentCollection = __webpack_require__(29);
            let comments = new CommentCollection([], {entity: this.model});

            let commentListView = new CommentListView({entity: this.model, collection: comments});
            personLayout.showChildView('comments', commentListView);

            // not available tabs
        }
    }
});

module.exports = Layout;


/***/ }),
/* 685 */
/***/ (function(module, exports) {



/***/ }),
/* 686 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div name="details"></div><div class="column" style="margin-top: 10px; height: calc(100% - 25px)"><ul class="nav nav-tabs" role="tablist"><li role="presentation" class="active"><a href="div.tab-pane[name=descriptors]" aria-controls="descriptors" role="tab" data-toggle="tab">' +
__e( _t("Descriptors") ) +
'</a></li><li role="presentation"><a href="div.tab-pane[name=commands]" aria-controls="commands" role="tab" data-toggle="tab">' +
__e( _t("Commands") ) +
'</a></li><li role="presentation"><a href="div.tab-pane[name=comments]" aria-controls="comments" role="tab" data-toggle="tab">' +
__e( _t("Comments") ) +
'</a></li></ul><div class="tab-content" style="height: calc(100% - 41px - 10px)"><div role="tabpanel" class="tab-pane active" name="descriptors" style="height: 100%; overflow-y: auto; padding-right: 5px"></div><div role="tabpanel" class="tab-pane" name="commands" style="height: 100%"></div><div role="tabpanel" class="tab-pane" name="comments" style="height: 100%"></div></div></div>';

}
return __p
};

/*
original source:

<div name="details"></div><div class="column" style="margin-top: 10px; height: calc(100% - 25px)"><ul class="nav nav-tabs" role="tablist"><li role="presentation" class="active"><a href="div.tab-pane[name=descriptors]" aria-controls="descriptors" role="tab" data-toggle="tab"><%- _t("Descriptors") %></a></li><li role="presentation"><a href="div.tab-pane[name=commands]" aria-controls="commands" role="tab" data-toggle="tab"><%- _t("Commands") %></a></li><li role="presentation"><a href="div.tab-pane[name=comments]" aria-controls="comments" role="tab" data-toggle="tab"><%- _t("Comments") %></a></li></ul><div class="tab-content" style="height: calc(100% - 41px - 10px)"><div role="tabpanel" class="tab-pane active" name="descriptors" style="height: 100%; overflow-y: auto; padding-right: 5px"></div><div role="tabpanel" class="tab-pane" name="commands" style="height: 100%"></div><div role="tabpanel" class="tab-pane" name="comments" style="height: 100%"></div></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 687 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file conservatory.js
 * @brief Conservatory router
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2018-06-21
 * @copyright Copyright (c) 2018 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let Marionette = __webpack_require__(1);

let ConservatoryModel = __webpack_require__(87);

let ConservatoryLayout = __webpack_require__(688);
let DefaultLayout = __webpack_require__(3);
let TitleView = __webpack_require__(4);


let Router = Marionette.AppRouter.extend({
    routes : {
        "app/organisation/conservatory/:id/*tab": "getConservatory"
    },

    getConservatory : function(id, tab) {
        tab || (tab = "");

        let conservatory = new ConservatoryModel({id: id});

        let defaultLayout = new DefaultLayout();
        window.application.main.showContent(defaultLayout);

        let conservatoryLayout = new ConservatoryLayout({model: conservatory, initialTab: tab.replace('/', '')});

        conservatory.fetch().then(function() {
            defaultLayout.showChildView('title', new TitleView({title: _t("Conservatory"), model: conservatory}));
            defaultLayout.showChildView('content', conservatoryLayout);
        });
    }
});

module.exports = Router;


/***/ }),
/* 688 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file conservatorylayout.js
 * @brief Optimized layout for persoconservatory details
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2018-06-21
 * @copyright Copyright (c) 2018 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let LayoutView = __webpack_require__(17);
let ConservatoryDetailsView = __webpack_require__(689);
let DescriptorEditView = __webpack_require__(43);
let EstablishmentModel = __webpack_require__(30);
let DescriptorCollection = __webpack_require__(18);

let Layout = LayoutView.extend({
    template: __webpack_require__(690),

    ui: {
        descriptors_tab: 'a[aria-controls=descriptors]',
        storage_tab: 'a[aria-controls=storage]',
        comments_tab: 'a[aria-controls=comments]'
    },

    regions: {
        'descriptors': "div[name=descriptors]",
        'storage': "div[name=storage]",
        'comments': "div[name=comments]"
    },

    initialize: function(options) {
        Layout.__super__.initialize.apply(this, arguments);

        this.listenTo(this.model, 'change:layout', this.onLayoutChange, this);

        if (this.model.isNew()) {
            this.listenTo(this.model, 'change:id', this.onPersonCreate, this);
        }
    },

    onPersonCreate: function(model, value) {
        // re-render once created
        this.render();

        // and update history
        Backbone.history.navigate('app/organisation/conservatory/' + this.model.get('id') + '/', {/*trigger: true,*/ replace: false});
    },

    onLayoutChange: function(model, value) {
        if (value == null) {
            this.getRegion('descriptors').empty();
        } else {
            let establishmentLayout = this;

            // get the layout before creating the view
            $.ajax({
                method: "GET",
                url: window.application.url(['descriptor', 'layout', value]),
                dataType: 'json'
            }).done(function (data) {

                let descriptorCollection = new DescriptorCollection([], {
                    model_id: data.id
                });

                descriptorCollection.fetch().then(function () {
                    let DescriptorView = __webpack_require__(35);
                    let descriptorView = new DescriptorView({
                        model: model,
                        layoutData: data,
                        descriptorCollection: descriptorCollection
                    });
                    establishmentLayout.showChildView('descriptors', descriptorView);

                });
            });
        }
    },

    // disableContactsTab: function () {
    //     this.ui.persons_tab.parent().addClass('disabled');
    // },

    onRender: function() {
        let conservatoryLayout = this;

        // details view
        if (!this.model.isNew()) {
            // establishment parent
            let establishment = new EstablishmentModel({id: this.model.get('establishment')});
            establishment.fetch().then(function () {
                conservatoryLayout.showChildView('details', new ConservatoryDetailsView({
                    model: conservatoryLayout.model,
                    establishment: establishment
                }));
            });

            // if necessary enable tabs
        } else {
            // establishment parent
            let establishment = new EstablishmentModel({id: this.model.get('establishment')});
            establishment.fetch().then(function () {
                conservatoryLayout.showChildView('details', new ConservatoryDetailsView({
                    model: conservatoryLayout.model,
                    establishment: establishment,
                    noLink: true
                }));
            });

            // descriptors edit tab
            $.ajax({
                method: "GET",
                url: window.application.url(['descriptor', 'layout', this.model.get('layout')]),
                dataType: 'json'
            }).done(function(data) {

                let descriptorCollection = new DescriptorCollection([], {
                    model_id: data.id
                });

                descriptorCollection.fetch().then(function () {
                    let descriptorView = new DescriptorEditView({
                        model: conservatoryLayout.model,
                        layoutData: data,
                        descriptorCollection: descriptorCollection
                    });
                    conservatoryLayout.showChildView('descriptors', descriptorView);
                });
            });

            // not available tabs

            // comments
            let CommentListView = __webpack_require__(28);

            // classifications entry tab (query on show tab)
            let CommentCollection = __webpack_require__(29);
            let comments = new CommentCollection([], {entity: this.model});

            let commentListView = new CommentListView({entity: this.model, collection: comments});
            conservatoryLayout.showChildView('comments', commentListView);
        }
    }
});

module.exports = Layout;


/***/ }),
/* 689 */
/***/ (function(module, exports) {



/***/ }),
/* 690 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div name="details"></div><div class="column" style="margin-top: 10px; height: calc(100% - 25px)"><ul class="nav nav-tabs" role="tablist"><li role="presentation" class="active"><a href="div.tab-pane[name=descriptors]" aria-controls="descriptors" role="tab" data-toggle="tab">' +
__e( _t("Descriptors") ) +
'</a></li><li role="presentation"><a href="div.tab-pane[name=storage]" aria-controls="storage" role="tab" data-toggle="tab">' +
__e( _t("Storage") ) +
'</a></li><li role="presentation"><a href="div.tab-pane[name=comments]" aria-controls="comments" role="tab" data-toggle="tab">' +
__e( _t("Comments") ) +
'</a></li></ul><div class="tab-content" style="height: calc(100% - 41px - 10px)"><div role="tabpanel" class="tab-pane active" name="descriptors" style="height: 100%; overflow-y: auto; padding-right: 5px"></div><div role="tabpanel" class="tab-pane" name="storage" style="height: 100%"></div><div role="tabpanel" class="tab-pane" name="comments" style="height: 100%"></div></div></div>';

}
return __p
};

/*
original source:

<div name="details"></div><div class="column" style="margin-top: 10px; height: calc(100% - 25px)"><ul class="nav nav-tabs" role="tablist"><li role="presentation" class="active"><a href="div.tab-pane[name=descriptors]" aria-controls="descriptors" role="tab" data-toggle="tab"><%- _t("Descriptors") %></a></li><li role="presentation"><a href="div.tab-pane[name=storage]" aria-controls="storage" role="tab" data-toggle="tab"><%- _t("Storage") %></a></li><li role="presentation"><a href="div.tab-pane[name=comments]" aria-controls="comments" role="tab" data-toggle="tab"><%- _t("Comments") %></a></li></ul><div class="tab-content" style="height: calc(100% - 41px - 10px)"><div role="tabpanel" class="tab-pane active" name="descriptors" style="height: 100%; overflow-y: auto; padding-right: 5px"></div><div role="tabpanel" class="tab-pane" name="storage" style="height: 100%"></div><div role="tabpanel" class="tab-pane" name="comments" style="height: 100%"></div></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 691 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file init.js
 * @brief Permission module init entry point
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-05-26
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let PermissionModule = function() {
    this.name = "permission";
};

PermissionModule.prototype = {
    initialize: function(app, options) {
        this.models = {};
        this.collections = {};
        this.views = {};
        this.routers = {};
        this.controllers = {};

        try {
            i18next.default.addResources(session.language, 'default', __webpack_require__(692)("./" + session.language + '/default.json'));
        } catch (e) {
            console.warn("No translation found for the current language. Fallback to english language");
        }

        //
        // main collections
        //

        let SelectOption = __webpack_require__(19);

        let PermissionTypeCollection = __webpack_require__(695);
        this.collections.permissionType = new PermissionTypeCollection();

        this.views.permissionType = new SelectOption({
            className: 'permission-type',
            collection: this.collections.permissionType,
        });

        //
        // utils
        //

        let PermissionManager = __webpack_require__(697);
        this.manager = new PermissionManager();
        this.manager.fetch();

        //
        // routers
        //

        let PermissionRouter = __webpack_require__(698);
        this.routers.permission = new PermissionRouter();
    },

    start: function(app, options) {
        // nothing to do
    },

    stop: function(app, options) {
    }
};

module.exports = PermissionModule;


/***/ }),
/* 692 */
/***/ (function(module, exports, __webpack_require__) {

var map = {
	"./en/default.json": 693,
	"./fr/default.json": 694
};
function webpackContext(req) {
	return __webpack_require__(webpackContextResolve(req));
};
function webpackContextResolve(req) {
	var id = map[req];
	if(!(id + 1)) // check for number or string
		throw new Error("Cannot find module '" + req + "'.");
	return id;
};
webpackContext.keys = function webpackContextKeys() {
	return Object.keys(map);
};
webpackContext.resolve = webpackContextResolve;
module.exports = webpackContext;
webpackContext.id = 692;

/***/ }),
/* 693 */
/***/ (function(module, exports) {

module.exports = {"Code":"","Edit label":"","Email":"","First name":"","Group name already in usage":"","Invalid characters (alphanumeric, _ and - only)":"","Last name":"","List of groups":"","List of permissions for group":"","List of permissions for user":"","List of users":"","List of users for group":"","Manage permission list":"","Manage permissions":"","Manage user list":"","Manage users":"","Model":"","Module":"","Name":"","Permissions":"","Rename the group of users":"","Select a username":"","Staff":"","Status":"","Superuser":"","Username":"","Users":"","characters_min":"At least one character","characters_min_plural":"At least {{count}} characters"}

/***/ }),
/* 694 */
/***/ (function(module, exports) {

module.exports = {"Code":"Code","Edit label":"Editer les étiquettes","Email":"Email","First name":"Prénom","Group name already in usage":"Nom de groupe déjà utilisé","Invalid characters (alphanumeric, _ and - only)":"Caractères invalides (alphanumerique, _ et - seulement)","Last name":"Nom","List of groups":"Liste des groupes","List of permissions for group":"Liste des permissions pour le groupe","List of permissions for user":"Liste des permissions pour l'utilisateur","List of users":"Liste des utilisateurs","List of users for group":"Liste des utilisateurs pour le groupe","Manage permission list":"Gérer la liste de permissions","Manage permissions":"Gérer les permissions","Manage user list":"Gérer la liste des utilisateurs","Manage users":"Gérer les utilisateurs","Model":"Modèle","Module":"Module","Name":"Nom","Permissions":"Permissions","Rename the group of users":"Renomer le groupe d'utilisateurs","Select a username":"Saisissez un nom d'utilisateur","Staff":"Employé","Status":"Status","Superuser":"Super-utilisateur","Username":"Nom d'utilisateur","Users":"Utilisateurs","characters_min":"Au moins un caractère","characters_min_plural":"Au moins {{count}} caractères"}

/***/ }),
/* 695 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file permissiontype.js
 * @brief Permission type collection
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-04-30
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let PermissionTypeModel = __webpack_require__(696);

let Collection = Backbone.Collection.extend({
    url: window.application.url(['permission', 'type']),
    model: PermissionTypeModel,

    toJSON: function() {
        let result = [];
        let prev = "";
        let group = {};

        for (let i = 0; i < this.models.length; ++i) {
            let model = this.models[i];
            let value = model.get('value').split('.');
            let f = value[0] + '.' + value[1];

            if (f !== prev) {
                group = {id: -1, value: "", label: f, options: []};
                result.push(group);
            }

            group.options.push({
                id: model.get('id'),
                value: model.get('value'),
                label: model.get('label')
            });

            prev = f;
        }

        return result;
    },

    findValue: function(id) {
        for (let r in this.models) {
            let m = this.models[r];
            if (m.get('id') === id)
                return m.get('value');
        }
        // let res = this.findWhere({id: id});
        // return res ? res.get('value') : '';
    },

    findLabel: function(value) {
        for (let r in this.models) {
            let m = this.models[r];
            if (m.get('value') === value)
                return m.get('label');
        }
        // let res = this.findWhere({id: id});
        // return res ? res.get('label') : '';
    }
});

module.exports = Collection;


/***/ }),
/* 696 */
/***/ (function(module, exports) {

/**
 * @file permissiontype.js
 * @brief Permission type model
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-04-30
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

module.exports = Backbone.Model.extend({
    url: window.application.url(['permission', 'type', ':id']),

    defaults: function() {
        return {
            id: 0,
            value: '',
            name: ''
        }
    }
});



/***/ }),
/* 697 */
/***/ (function(module, exports) {

/**
 * @file permissionmanager.js
 * @brief Global permission manager.
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2017-12-21
 * @copyright Copyright (c) 2017 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details
 */

let PermissionManager = function() {
    this.global = {};
};

PermissionManager.prototype = {

    fetch: function() {
        this.global = {};

        if (!this.isAuth()) {
            return;
        }

        let self = this;

        $.ajax({
            type: 'GET',
            url: window.application.url(['permission', 'permission']),
            dataType: 'json',
            contentType: "application/json; charset=utf-8"
        }).done(function (data) {
            let perm;
            for (let i = 0; i < data.length; ++i) {
                perm = data[i].app_label + '.' + data[i].id;
                self.global[perm] = data[i].name
            }
        });
    },

    isAuth: function() {
        return window.session.user.isAuth;
    },

    isSuperUser: function() {
        return window.session.user.isAuth && window.session.user.isSuperUser;
    },

    isStaff: function() {
        // super user is staff too
        return window.session.user.isAuth && (window.session.user.isStaff || window.session.user.isSuperUser);
    },

    /**
     * Globals permissions.
     * @param module Name of the module.
     * @param model Name of the model of the concerned entity/object.
     * @param action Type name of the action (get, change, list, delete...)
     * @returns {boolean} True if user is auth, and the permission is available or super user, or specials permission
     * when staff user.
     */
    has: function(module, model, action) {
        if (!window.session.user.isAuth) {
            return false;
        }

        if (window.session.user.isSuperUser) {
            return true;
        }

        let perm = module.toLowerCase() + '.' + action.toLowerCase() + '_' + model.toLowerCase();

        if (this.isStaff()) {
            if (perm in this.global) {
                return true;
            }

            // implicit permissions for staff
            // @todo
            if (module === "descriptor") {
                return true;
            } else if (module === "audit") {
                return true;
            }

            return false;
        } else {
            return perm in this.global;
        }
    },

    /**
     * Returns a promise because the async behavior of per object permission getting.
     * @param module
     * @param model
     * @param action
     * @param id
     * @returns {boolean}
     */
    forObject: function(module, model, action, id) {
        if (!window.session.user.isAuth) {
            return false;
        }

        if (window.session.user.isSuperUser) {
            return true;
        }

        // per object, require a query @todo
        alert("@todo");

        let perm = module.toLowerCase() + '.' + action.toLowerCase() + '_' + model.toLowerCase();
        return false;
    },
};

module.exports = PermissionManager;


/***/ }),
/* 698 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file permission.js
 * @brief Permission router
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-05-26
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Marionette = __webpack_require__(1);

let PermissionCollection = __webpack_require__(699);
let PermissionUserCollection = __webpack_require__(700);
let PermissionGroupCollection = __webpack_require__(702);
let PermissionGroupUserCollection = __webpack_require__(703);

let PermissionListView = __webpack_require__(705);
let PermissionAddView = __webpack_require__(709);
let PermissionUserListView = __webpack_require__(711);
let PermissionGroupListView = __webpack_require__(715);
let PermissionGroupUserListView = __webpack_require__(719);
let PermissionGroupAddUserView = __webpack_require__(723);
let PermissionAddGroupView = __webpack_require__(725);

let GroupModel = __webpack_require__(285);

let DefaultLayout = __webpack_require__(3);
let TitleView = __webpack_require__(4);
let ScrollingMoreView = __webpack_require__(10);

let PermissionRouter = Marionette.AppRouter.extend({
    routes : {
        "app/permission/user/": "getUsers",
        "app/permission/user/username/:username/permission/": "getPermissionsForUser",
        "app/permission/group/": "getGroups",
        "app/permission/group/:group_id/permission/": "getPermissionsForGroup",
        "app/permission/group/:group_id/user/": "getUsersForGroup",
    },

    getUsers: function () {
        let userCollection = new PermissionUserCollection();

        let defaultLayout = new DefaultLayout({});
        application.main.showContent(defaultLayout);

        defaultLayout.showChildView('title', new TitleView({title: _t("List of users")}));

        userCollection.fetch().then(function () {
            let permissionUserList = new PermissionUserListView({collection : userCollection});

            defaultLayout.showChildView('content', permissionUserList);
            defaultLayout.showChildView('content-bottom', new ScrollingMoreView({targetView: permissionUserList}));
        });
    },

    getPermissionsForUser: function(username) {
        let permissionsCollection = new PermissionCollection([], {username: username});

        let defaultLayout = new DefaultLayout({});
        application.main.showContent(defaultLayout);

        defaultLayout.showChildView('title', new TitleView({title: _t("List of permissions for user"), object: username}));

        permissionsCollection.fetch().then(function () {
            let permissionListView = new PermissionListView({collection : permissionsCollection});

            defaultLayout.showChildView('content', permissionListView);
            defaultLayout.showChildView('content-bottom', new ScrollingMoreView({targetView: permissionListView}));

            if ($.inArray("auth.add_permission", permissionsCollection.perms) >= 0) {
                defaultLayout.showChildView('bottom', new PermissionAddView({collection : permissionsCollection}));
            }
        });
    },

    getGroups: function () {
        let groupCollection = new PermissionGroupCollection();

        let defaultLayout = new DefaultLayout({});
        application.main.showContent(defaultLayout);

        defaultLayout.showChildView('title', new TitleView({title: _t("List of groups")}));

        groupCollection.fetch().then(function () {
            let permissionGroupList = new PermissionGroupListView({collection : groupCollection});

            defaultLayout.showChildView('content', permissionGroupList);
            defaultLayout.showChildView('content-bottom', new ScrollingMoreView({targetView: permissionGroupList}));

            if ($.inArray("auth.add_group", groupCollection.perms) >= 0) {
                defaultLayout.showChildView('bottom', new PermissionAddGroupView({collection : groupCollection}));
            }
        });
    },

    getPermissionsForGroup: function(id) {
        let permissionsCollection = new PermissionCollection([], {group_id: id, is_group: true});

        let defaultLayout = new DefaultLayout({});
        window.application.main.showContent(defaultLayout);

        let group = new GroupModel({id: id});
        group.fetch().then(function() {
            defaultLayout.showChildView('title', new TitleView({
                title: _t("List of permissions for group"),
                model: group
            }));
        });

        permissionsCollection.fetch().then(function () {
            let permissionList = new PermissionListView({collection : permissionsCollection});

            defaultLayout.showChildView('content', permissionList);
            defaultLayout.showChildView('content-bottom', new ScrollingMoreView({targetView: permissionList}));

            if ($.inArray("auth.add_permission", permissionsCollection.perms) >= 0) {
                defaultLayout.showChildView('bottom', new PermissionAddView({collection : permissionsCollection}));
            }
        });
    },

    getUsersForGroup: function(id) {
        let userCollection = new PermissionGroupUserCollection([], {group_id: id});

        let defaultLayout = new DefaultLayout({});
        window.application.main.showContent(defaultLayout);

        let group = new GroupModel({id: id});
        group.fetch().then(function() {
            defaultLayout.showChildView('title', new TitleView({
                title: _t("List of users for group"),
                model: group
            }));
        });

        userCollection.fetch().then(function() {
            let permissionGroupUserList = new PermissionGroupUserListView({collection : userCollection});

            defaultLayout.showChildView('content', permissionGroupUserList);
            defaultLayout.showChildView('content-bottom', new ScrollingMoreView({targetView: permissionGroupUserList}));

            if ($.inArray("auth.change_group", userCollection.perms) >= 0) {
                defaultLayout.showChildView('bottom', new PermissionGroupAddUserView({collection : userCollection}));
            }
        });
    },
});

module.exports = PermissionRouter;


/***/ }),
/* 699 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file permission.js
 * @brief Permission collection
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-05-26
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let PermissionModel = __webpack_require__(89);

let PermissionCollection = Backbone.Collection.extend({
    url: function() {
        if (this.is_group)
            return window.application.url(['permission', 'group', this.group_id, 'permission']);
        else
            return window.application.url(['permission', 'user', 'username', this.username, 'permission']);
    },

    model: PermissionModel,

    initialize: function(models, options) {
        this.is_group = options.is_group || false;
        this.username = options.username;
        this.group_id = options.group_id;
    },

    parse: function(data) {
        this.perms = data.perms;
        return data.permissions;
    },
});

module.exports = PermissionCollection;


/***/ }),
/* 700 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file user.js
 * @brief Permission user collection
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-05-30
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let CountableCollection = __webpack_require__(9);
let PermissionUserModel = __webpack_require__(701);

let Collection = CountableCollection.extend({
    url: function() {
        if (this.is_group) {
            return window.application.url(['permission', 'group', this.name, 'user']);
        } else {
            return window.application.url(['permission', 'user']);
        }
    },

    model: PermissionUserModel,

    initialize: function(models, options) {
        options || (options = {});

        Collection.__super__.initialize.apply(this, arguments);

        this.is_group = options.is_group || false;

        if (options.name) {
            this.name = options.name;
        }
    }
});

module.exports = Collection;


/***/ }),
/* 701 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file user.js
 * @brief User model
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-05-30
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Backbone = __webpack_require__(7);

let Model = Backbone.Model.extend({
    url: function() {
        return window.application.url(['permission', 'user', 'username', this.get('username')]);
    },

    defaults: {
        id: undefined,
        username: '',
        first_name: '',
        last_name: '',
        email: '',
        is_active: false,
        is_staff: false,
        is_superuser: false
    },

    isNew : function () { return typeof(this.get('username')) !== 'string'; },

    initialize: function(attributes, options) {
        options || (options = {});

        // this.on('change:is_active', this.partialUpdate, this);
        // this.on('change:is_staff', this.partialUpdate, this);
        // this.on('change:is_superuser', this.partialUpdate, this);
    },

    parse: function(data) {
        return data;
    },

    validate: function(attrs) {
        let errors = {};
        let hasError = false;

        if (hasError) {
          return errors;
        }
    },

    // partialUpdate: function () {
    //     // why not working ???
    //     console.log("user::partialUpdate");
    //     this.save(this.model.changedAttributes(), {patch: true});
    // },
});

module.exports = Model;


/***/ }),
/* 702 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file group.js
 * @brief Permission group collection
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-05-30
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let CountableCollection = __webpack_require__(9);
let PermissionGroupModel = __webpack_require__(285);

let Collection = CountableCollection.extend({
    url: function() {
        return window.application.url(['permission', 'group']);
    },
    model: PermissionGroupModel
});

module.exports = Collection;


/***/ }),
/* 703 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file groupuser.js
 * @brief Permission user collection from a group
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-06-09
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let PermissionGroupUserModel = __webpack_require__(704);
let CountableCollection = __webpack_require__(9);

let Collection = CountableCollection.extend({
    url: function() {
        return window.application.url(['permission', 'group', this.group_id, 'user']);
    },
    model: PermissionGroupUserModel,

    initialize: function(models, options) {
        options || (options = {});
        this.group_id = options.group_id;

        Collection.__super__.initialize.apply(this, arguments);
    }
});

module.exports = Collection;


/***/ }),
/* 704 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file groupuser.js
 * @brief User model from a group
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-06-09
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Backbone = __webpack_require__(7);

let Model = Backbone.Model.extend({
    url: function() {
        if (this.isNew()) {
            return window.application.url(['permission', 'group', this.collection.group_id, 'user']);
        } else {
            return window.application.url(['permission', 'group', this.collection.group_id, 'user', 'username', this.get('username')]);
        }
    },

    defaults: {
        id: null,
        username: '',
        first_name: '',
        last_name: '',
        email: '',
    },

    initialize: function(attributes, options) {
        options || (options = {});
    },

    parse: function(data) {
        return data;
    },

    validate: function(attrs) {
        let errors = {};
        let hasError = false;

        if (hasError) {
          return errors;
        }
    },
});

module.exports = Model;


/***/ }),
/* 705 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file permissionlist.js
 * @brief Permission list view
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-05-26
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Marionette = __webpack_require__(1);
let PermissionModel = __webpack_require__(89);
let PermissionView = __webpack_require__(706);

let PermissionListView = Marionette.CompositeView.extend({
    template: __webpack_require__(708),
    childViewContainer: ".permission-list",
    childView: PermissionView,

    ui: {
        remove_permission: 'span.remove-permission',
    },

    events: {
        'click @ui.remove_permission': 'removePermission',
    },

    initialize: function() {
        this.listenTo(this.collection, 'reset', this.render, this);
    },

    removePermission: function (e) {
        let appLabel = e.target.getAttribute("app_label");
        let codename = e.target.getAttribute("codename");
        let modelName = e.target.getAttribute("model");
        let object = e.target.getAttribute("object");

        let model = null;
        if (object.length > 0)
            model = this.collection.findWhere({model: modelName, object: object});
        else
            model = this.collection.findWhere({model: modelName});

        if (model == null)
            return;

         $.ajax({
             type: "PATCH",
             url: this.collection.url(),
             dataType: 'json',
             contentType: "application/json; charset=utf-8",
             collection: this.collection,
             model: model,
             data: JSON.stringify({
                 action: "remove",
                 target: "permission",
                 content_type: appLabel + '.' + modelName,
                 permission: codename
             })
        }).done(function(data) {
            this.collection.fetch();
        });
    },
});

module.exports = PermissionListView;



/***/ }),
/* 706 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file permission.js
 * @brief Permission item view
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-05-27
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Marionette = __webpack_require__(1);
let PermissionModel = __webpack_require__(89);

let View = Marionette.View.extend({
    tagName: 'div',
    template: __webpack_require__(707),

    ui: {
        "remove_permission": ".remove-permission",
    },

    events: {
        'click @ui.remove_permission': 'onRemovePermission',
    },

    initialize: function() {
        this.listenTo(this.model, 'change', this.render, this);
    },

    onRender: function() {
    },
});

module.exports = View;



/***/ }),
/* 707 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
with (obj) {
__p += '<div class="object permission" object-type="permission" style="width:100%"><span style="font-weight:bold; font-size:18px">' +
__e( _t("Model") ) +
' <span class="model permission label label-info" style="cursor: pointer">' +
__e( _t("Model") + ": " ) +
'' +
__e( model ) +
'</span> ';
 if (object_name) { ;
__p += '<span class="model object badge left-margin" style="cursor: pointer" object-id="' +
__e( object ) +
'">' +
__e( object_name ) +
'</span>';
 } ;
__p += ' <br></span><hr class="hr-default"><div class="permissions"><table class="table table-striped"><thead><tr><th style="width: 5%"><span class="fa fa-bolt"></span></th><th style="width: 20%">' +
__e( _t("Module") ) +
'</th><th style="width: 40%">' +
__e( _t("Name") ) +
'</th><th style="width: 35%">' +
__e( _t("Code") ) +
'</th></tr></thead><tbody> ';
 _.each(permissions, function(perm) { ;
__p += ' <tr class="element"><td><span class="edition action remove-permission fa fa-minus-circle" model="' +
__e( model ) +
'" object="' +
__e( object ) +
'" codename="' +
__e( perm.id ) +
'" app_label="' +
__e( perm.app_label ) +
'"></span></td><td name="module" class="permission-module">' +
__e( perm.app_label ) +
'</td><td name="name">' +
__e( perm.name ) +
'</td><td name="code">' +
__e( perm.id ) +
'</td></tr> ';
 }) ;
__p += ' </tbody></table></div></div>';

}
return __p
};

/*
original source:

<div class="object permission" object-type="permission" style="width:100%"><span style="font-weight:bold; font-size:18px"><%- _t("Model") %> <span class="model permission label label-info" style="cursor: pointer"><%- _t("Model") + ": " %><%- model %></span> <% if (object_name) { %><span class="model object badge left-margin" style="cursor: pointer" object-id="<%- object %>"><%- object_name %></span><% } %> <br></span><hr class="hr-default"><div class="permissions"><table class="table table-striped"><thead><tr><th style="width: 5%"><span class="fa fa-bolt"></th><th style="width: 20%"><%- _t("Module") %></th><th style="width: 40%"><%- _t("Name") %></th><th style="width: 35%"><%- _t("Code") %></th></tr></thead><tbody> <% _.each(permissions, function(perm) { %> <tr class="element"><td><span class="edition action remove-permission fa fa-minus-circle" model="<%- model %>" object="<%- object %>" codename="<%- perm.id %>" app_label="<%- perm.app_label %>"></span></td><td name="module" class="permission-module"><%- perm.app_label %></td><td name="name"><%- perm.name %></td><td name="code"><%- perm.id %></td></tr> <% }) %> </tbody></table></div></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 708 */
/***/ (function(module, exports) {

underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '';
with (obj) {
__p += '<div class="permission-list"></div>';

}
return __p
};

/*
original source:

<div class="permission-list"></div>
*/


/***/ }),
/* 709 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file addpermission.js
 * @brief Add a permission to a collection view
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-06-14
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Marionette = __webpack_require__(1);

let View = Marionette.View.extend({
    tagName: 'div',
    className: 'permission-add',
    template: __webpack_require__(710),

    ui: {
        add_permission: ".add-permission",
        permissions_types: "select.permissions-types",
    },

    events: {
        'click @ui.add_permission': 'addPermission',
    },

    initialize: function(options) {
        options || (options = {});

        this.collection = options.collection;

        this.listenTo(this.collection, 'add', this.updatePermissionSelect, this);
        this.listenTo(this.collection, 'remove', this.updatePermissionSelect, this);
    },

    updatePermissionSelect: function () {
        application.permission.views.permissionType.drawSelect(this.ui.permissions_types, false);

        // remove defined permissions
        let select = this.ui.permissions_types;

        for (let i = 0; i < this.collection.size(); ++i) {
            let model = this.collection.at(i);
            for (let j = 0; j < model.get('permissions').length; ++j) {
                let permission = model.get('permissions')[j];
                select.find('option[value="' + permission.app_label + "." + model.get('model') + "." + permission.id + '"]').remove();
            }
        }

        $(select).select2();
    },

    onDomRefresh: function () {
        this.updatePermissionSelect();
    },

    addPermission: function () {
        let permission = $(this.ui.permissions_types).val().split('.');

        $.ajax({
            type: "POST",
            url: this.collection.url(),
            dataType: 'json',
            contentType: "application/json; charset=utf-8",
            collection: this.collection,
            data: JSON.stringify({
                content_type: permission[0] + '.' + permission[1],
                permission: permission[2]
            })
        }).done(function(data) {
            this.collection.fetch();
        });
    },
});

module.exports = View;


/***/ }),
/* 710 */
/***/ (function(module, exports) {

underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '';
with (obj) {
__p += '<table class="table table-striped" style="margin-bottom: 0px"><tbody><tr class="edit-mode"><td><span class="add-permission action fa fa-plus-circle fa-lg" style="padding-top: 1.0rem; padding-left: 1.0rem"></span></td><td style="width: 100%"><select class="permissions-types" name="permission-type" style="width: 100%"></select></td></tr></tbody></table>';

}
return __p
};

/*
original source:

<table class="table table-striped" style="margin-bottom: 0px"><tbody><tr class="edit-mode"><td><span class="add-permission action fa fa-plus-circle fa-lg" style="padding-top: 1.0rem; padding-left: 1.0rem"></span></td><td style="width: 100%"><select class="permissions-types" name="permission-type" style="width: 100%"></select></td></tr></tbody></table>
*/


/***/ }),
/* 711 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file userlist.js
 * @brief Permission user list view
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-05-30
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let PermissionUserView = __webpack_require__(712);
let AdvancedTable = __webpack_require__(6);

let View = AdvancedTable.extend({
    template: __webpack_require__(714),
    className: "permission-user-list advanced-table-container",
    childView: PermissionUserView,
    childViewContainer: 'tbody.permission-user-list',

    initialize: function() {
        View.__super__.initialize.apply(this);

        this.listenTo(this.collection, 'reset', this.render, this);
    }
});

module.exports = View;


/***/ }),
/* 712 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file user.js
 * @brief Permission user item view
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-05-30
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Marionette = __webpack_require__(1);

let View = Marionette.View.extend({
    tagName: 'tr',
    className: 'element object user',
    template: __webpack_require__(713),

    ui: {
        enable_user: 'span.enable-user',
        disable_user: 'span.disable-user',
        set_user: 'span.set-user',
        set_superuser: 'span.set-superuser',
        set_regular: 'span.set-regular',
        set_staff: 'span.set-staff',
        viewPermissions: 'td.view-permissions'
    },

    events: {
        'click @ui.enable_user': 'enableUser',
        'click @ui.disable_user': 'disableUser',
        'click @ui.set_regular': 'setRegular',
        'click @ui.set_staff': 'setStaff',
        'click @ui.set_user': 'setUser',
        'click @ui.set_superuser': 'setSuperUser',
        'click @ui.viewPermissions': 'viewPermissions'
    },

    initialize: function() {
        this.listenTo(this.model, 'change', this.render, this);
    },

    onRender: function() {
    },

    enableUser: function () {
        // can't modify himself
        if (window.session.user.username === this.model.get('username'))
            return;

        this.model.save({is_active: true}, {patch: true, wait: true});
    },

    disableUser: function () {
        // can't modify himself
        if (window.session.user.username === this.model.get('username'))
            return;

        // this.model.set('is_active', false);
        // this.model.save(this.model.changedAttributes(), {patch: true});
        this.model.save({is_active: false}, {patch: true, wait: true});
    },

    setStaff: function () {
        // can't modify himself
        if (window.session.user.username === this.model.get('username'))
            return;

        this.model.save({is_staff: true}, {patch: true, wait: true});
    },

    setRegular: function () {
        // can't modify himself
        if (window.session.user.username === this.model.get('username'))
            return;

        this.model.save({is_staff: false}, {patch: true, wait: true});
    },

    setSuperUser: function () {
        // can't modify himself
        if (window.session.user.username === this.model.get('username'))
            return;

        this.model.save({is_superuser: true}, {patch: true, wait: true});
    },

    setUser: function () {
        // can't modify himself
        if (window.session.user.username === this.model.get('username'))
            return;

        this.model.save({is_superuser: false}, {patch: true, wait: true});
    },

    viewPermissions: function () {
        Backbone.history.navigate("app/permission/user/username/" + this.model.get('username') + "/permission/", {trigger: true});
    }
});

module.exports = View;


/***/ }),
/* 713 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
with (obj) {
__p += '<td name="is_active" class="action glyph-fixed-column"> ';
 if (is_active) { ;
__p += ' <span class="disable-user fa fa-check-circle"></span> ';
 } else { ;
__p += ' <span class="enable-user fa fa-times"></span> ';
 } ;
__p += ' </td><td name="is_superuser" class="action glyph-fixed-column"> ';
 if (is_superuser) { ;
__p += ' <span class="set-user fa fa-check-circle"></span> ';
 } else { ;
__p += ' <span class="set-superuser fa fa-times"></span> ';
 } ;
__p += ' </td><td name="is_staff" class="action glyph-fixed-column"> ';
 if (is_staff) { ;
__p += ' <span class="set-regular fa fa-check-circle"></span> ';
 } else { ;
__p += ' <span class="set-staff fa fa-times"></span> ';
 } ;
__p += ' </td><td name="username" class="action view-user-details" value="' +
__e( username ) +
'">' +
__e( username ) +
'</td><td name="email" class="action view-user-details">' +
__e( email ) +
'</td><td name="first_name">' +
__e( first_name ) +
'</td><td name="last_name">' +
__e( last_name ) +
'</td><td class="action view-permissions" name="num_permissions"><abbr class="badge" style="cursor: pointer" title="' +
__e( _t('Manage permission list') ) +
'">' +
__e( num_permissions ) +
'</abbr></td>';

}
return __p
};

/*
original source:

<td name="is_active" class="action glyph-fixed-column"> <% if (is_active) { %> <span class="disable-user fa fa-check-circle"></span> <% } else { %> <span class="enable-user fa fa-times"></span> <% } %> </td><td name="is_superuser" class="action glyph-fixed-column"> <% if (is_superuser) { %> <span class="set-user fa fa-check-circle"></span> <% } else { %> <span class="set-superuser fa fa-times"></span> <% } %> </td><td name="is_staff" class="action glyph-fixed-column"> <% if (is_staff) { %> <span class="set-regular fa fa-check-circle"></span> <% } else { %> <span class="set-staff fa fa-times"></span> <% } %> </td><td name="username" class="action view-user-details" value="<%- username %>"><%- username %></td><td name="email" class="action view-user-details"><%- email %></td><td name="first_name"><%- first_name %></td><td name="last_name"><%- last_name %></td><td class="action view-permissions" name="num_permissions"><abbr class="badge" style="cursor: pointer" title="<%- _t('Manage permission list') %>"><%- num_permissions %></abbr></td>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 714 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div class="table-advanced-head"><table class="table table-striped table-advanced"><thead><tr scope="row"><th class="glyph-fixed-column"><span title="' +
__e( _t('Status') ) +
'" class="fa fa-check-circle-o"></span></th><th class="glyph-fixed-column"><span title="' +
__e( _t('Superuser') ) +
'" class="fa fa-user-plus"></span></th><th class="glyph-fixed-column"><span title="' +
__e( _t('Staff') ) +
'" class="fa fa-briefcase"></span></th><th>' +
__e( _t("Username") ) +
'</th><th>' +
__e( _t("Email") ) +
'</th><th>' +
__e( _t("First name") ) +
'</th><th>' +
__e( _t("Last name") ) +
'</th><th>' +
__e( _t("Permissions") ) +
'</th></tr></thead></table></div><div class="table-advanced-body"><table class="table table-striped table-advanced"><tbody class="permission-user-list"></tbody></table></div>';

}
return __p
};

/*
original source:

<div class="table-advanced-head"><table class="table table-striped table-advanced"><thead><tr scope="row"><th class="glyph-fixed-column"><span title="<%- _t('Status') %>" class="fa fa-check-circle-o"></span></th><th class="glyph-fixed-column"><span title="<%- _t('Superuser') %>" class="fa fa-user-plus"></span></th><th class="glyph-fixed-column"><span title="<%- _t('Staff') %>" class="fa fa-briefcase"></span></th><th><%- _t("Username") %></th><th><%- _t("Email") %></th><th><%- _t("First name") %></th><th><%- _t("Last name") %></th><th><%- _t("Permissions") %></th></tr></thead></table></div><div class="table-advanced-body"><table class="table table-striped table-advanced"><tbody class="permission-user-list"></tbody></table></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 715 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file grouplist.js
 * @brief Permission group list view
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-06-02
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let PermissionGroupView = __webpack_require__(716);
let AdvancedTable = __webpack_require__(6);

let View = AdvancedTable.extend({
    template: __webpack_require__(718),
    className: "permission-group-list advanced-table-container",
    childView: PermissionGroupView,
    childViewContainer: 'tbody.permission-group-list',

    initialize: function() {
        View.__super__.initialize.apply(this);

        this.listenTo(this.collection, 'reset', this.render, this);
    }
});

module.exports = View;


/***/ }),
/* 716 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file group.js
 * @brief Permission group item view
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-06-02
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Marionette = __webpack_require__(1);

let View = Marionette.View.extend({
    tagName: 'tr',
    className: 'element object group',
    template: __webpack_require__(717),

    ui: {
        delete_group: 'span.delete-group',
        change_name: 'td.change-name',
        view_permissions: 'td.view-permissions',
        view_users: 'td.view-users'
    },

    events: {
        'click @ui.delete_group': 'deleteGroup',
        'click @ui.change_name': 'onRename',
        'click @ui.view_permissions': 'viewPermissions',
        'click @ui.view_users': 'viewUsers'
    },

    behaviors: {
        ActionBtnEvents: {
            behaviorClass: __webpack_require__(8),
            actions: {
                edit: {display: true, title: _t("Manage permissions"), event: 'viewPermissions'},
                tag: {display: true, title: _t("Edit label"), event: 'onRename'},
                manage: {display: true, title: _t("Manage users"), event: 'viewUsers'},
                remove: {display: true, event: 'deleteGroup'}
            }
        }
    },

    initialize: function() {
        this.listenTo(this.model, 'change', this.render, this);
    },

    onRender: function() {
        if ($.inArray("auth.delete_group", this.model.perms) < 0) {
            $(this.ui.delete_group).remove();
        }
    },

    viewPermissions: function () {
        Backbone.history.navigate("app/permission/group/" + this.model.get('id') + "/permission/", {trigger: true});
    },

    viewUsers: function () {
        Backbone.history.navigate("app/permission/group/" + this.model.get('id') + "/user/", {trigger: true});
    },

    deleteGroup: function () {
        this.model.destroy({wait: true});
    },

    onRename: function() {
        let ChangeName = __webpack_require__(20);
        let changeName = new ChangeName({
            model: this.model,
            title: _t("Rename the group of users"),
            maxlength: 80
        });

        changeName.render();
        changeName.ui.name.val(this.model.get('name'));

        return false;
    }
});

module.exports = View;


/***/ }),
/* 717 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<td class="action change-name" name="name" value="' +
__e( name ) +
'">' +
__e( name ) +
'</td><td class="action view-users" name="num_users"><span class="badge" title="' +
__e( _t('Manage user list') ) +
'">' +
__e( num_users ) +
'</span></td><td class="action view-permissions" name="num_permissions"><span class="badge" title="' +
__e( _t('Manage permission list') ) +
'">' +
__e( num_permissions ) +
'</span></td>';

}
return __p
};

/*
original source:

<td class="action change-name" name="name" value="<%- name %>"><%- name %></td><td class="action view-users" name="num_users"><span class="badge" title="<%- _t('Manage user list') %>"><%- num_users %></span></td><td class="action view-permissions" name="num_permissions"><span class="badge" title="<%- _t('Manage permission list') %>"><%- num_permissions %></span></td>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 718 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div class="table-advanced-head"><table class="table table-striped table-advanced"><thead><tr scope="row"><th>' +
__e( _t("Name") ) +
'</th><th>' +
__e( _t("Users") ) +
'</th><th>' +
__e( _t("Permissions") ) +
'</th></tr></thead></table></div><div class="table-advanced-body"><table class="table table-striped table-advanced"><tbody class="permission-group-list"></tbody></table></div>';

}
return __p
};

/*
original source:

<div class="table-advanced-head"><table class="table table-striped table-advanced"><thead><tr scope="row"><th><%- _t("Name") %></th><th><%- _t("Users") %></th><th><%- _t("Permissions") %></th></tr></thead></table></div><div class="table-advanced-body"><table class="table table-striped table-advanced"><tbody class="permission-group-list"></tbody></table></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 719 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file groupuserlist.js
 * @brief Permission user list from a group view
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-06-09
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let PermissionGroupUserView = __webpack_require__(720);
let AdvancedTable = __webpack_require__(6);

let View = AdvancedTable.extend({
    template: __webpack_require__(722),
    className: "object group-user-list advanced-table-container",
    childView: PermissionGroupUserView,
    childViewContainer: 'tbody.group-user-list',

    initialize: function() {
        View.__super__.initialize.apply(this);

        this.listenTo(this.collection, 'reset', this.render, this);
    }
});

module.exports = View;


/***/ }),
/* 720 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file groupuser.js
 * @brief Permission user from group item view
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-06-09
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Marionette = __webpack_require__(1);

let View = Marionette.View.extend({
    tagName: 'tr',
    className: 'element object user',
    template: __webpack_require__(721),

    ui: {
        remove_user: 'span.remove-user',
        view_user: 'td.view-user',
    },

    events: {
        'click @ui.remove_user': 'removeUserFromGroup',
        'click @ui.view_user': 'viewUserDetails',
    },

    initialize: function() {
        this.listenTo(this.model, 'change', this.render, this);
    },

    onRender: function() {
    },

    removeUserFromGroup: function () {
        // can't remove himself if it is not staff or superuser
        if (session.user.username === this.model.get('username') && !(this.model.get('is_staff') || this.model.get('is_superuser')))
            return;

        this.model.destroy({wait: true});
    },

    viewUserDetails: function () {
        Backbone.history.navigate("app/permission/user/username/" + this.model.get('username') + '/permission/', {trigger: true});
    }
});

module.exports = View;


/***/ }),
/* 721 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<td name="remove-user" class="glyph-fixed-column action"><span class="remove-user fa fa-times"></span></td><td name="username" class="action view-user" value="' +
__e( username ) +
'">' +
__e( username ) +
'</td><td name="email">' +
__e( email ) +
'</td><td name="first_name">' +
__e( first_name ) +
'</td><td name="last_name">' +
__e( last_name ) +
'</td>';

}
return __p
};

/*
original source:

<td name="remove-user" class="glyph-fixed-column action"><span class="remove-user fa fa-times"></span></td><td name="username" class="action view-user" value="<%- username %>"><%- username %></td><td name="email"><%- email %></td><td name="first_name"><%- first_name %></td><td name="last_name"><%- last_name %></td>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 722 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(_) {underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '', __e = _.escape;
with (obj) {
__p += '<div class="table-advanced-head"><table class="table table-striped table-advanced"><thead><tr scope="row"><th class="glyph-fixed-column"><span class="fa fa-bolt"></span></th><th>' +
__e( _t("Username") ) +
'</th><th>' +
__e( _t("Email") ) +
'</th><th>' +
__e( _t("First name") ) +
'</th><th>' +
__e( _t("Last name") ) +
'</th></tr></thead></table></div><div class="table-advanced-body"><table class="table table-striped table-advanced"><tbody class="group-user-list"></tbody></table></div>';

}
return __p
};

/*
original source:

<div class="table-advanced-head"><table class="table table-striped table-advanced"><thead><tr scope="row"><th class="glyph-fixed-column"><span class="fa fa-bolt"></span></th><th><%- _t("Username") %></th><th><%- _t("Email") %></th><th><%- _t("First name") %></th><th><%- _t("Last name") %></th></tr></thead></table></div><div class="table-advanced-body"><table class="table table-striped table-advanced"><tbody class="group-user-list"></tbody></table></div>
*/

/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(0)))

/***/ }),
/* 723 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file addusergroup.js
 * @brief Add a user to a group collection
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-06-15
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Marionette = __webpack_require__(1);

let View = Marionette.View.extend({
    tagName: 'div',
    className: 'user-add',
    template: __webpack_require__(724),

    ui: {
        add_user: ".add-user",
        username: "select.username",
    },

    events: {
        'click @ui.add_user': 'addUser',
    },

    initialize: function(options) {
        options || (options = {});
        this.collection = options.collection;
    },

    onDomRefresh: function () {
        let select = this.ui.username;
        let collection = this.collection;

        $(select).select2({
            ajax: {
                url: window.application.url(['permission', 'user', 'search']),
                dataType: 'json',
                delay: 250,
                data: function (params) {
                    params.term || (params.term = '');

                    let filters = {
                        method: 'icontains',
                        fields: '*',
                        '*': params.term.split(' ').filter(function (t) { return t.length > 2; }),
                    };

                    return {
                        page: params.page,
                        filters: JSON.stringify(filters),
                    };
                },
                processResults: function (data, params) {
                    // no pagination
                    params.page = params.page || 1;

                    let results = [];

                    for (let i = 0; i < data.items.length; ++i) {
                        // ignore results in collection of users
                        if (collection.findWhere({username: data.items[i].value}) == undefined) {
                            results.push({
                                id: data.items[i].value,
                                text: data.items[i].label
                            });
                        }
                    }

                    return {
                        results: results,
                        pagination: {
                            more: (params.page * 30) < data.total_count
                        }
                    };
                },
                cache: true
            },
            minimumInputLength: 3,
            placeholder: _t("Select a username"),
        });
    },

    addUser: function () {
        let el = this.ui.username;

        if (el.val()) {
            let username = el.val();
            el.val(null).trigger("change");
            this.collection.create({username: username}, {wait: true});
        }
    },
});

module.exports = View;


/***/ }),
/* 724 */
/***/ (function(module, exports) {

underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '';
with (obj) {
__p += '<table class="table table-striped" style="margin-bottom: 0px"><tbody><tr class="edit-mode"><th><span class="add-user action fa fa-plus-circle" style="margin-top: 6px; margin-left: 10px"></span></th><td style="width: 100%"><select class="username" name="username" style="width: 100%" data-allow-clear="true"></select></td></tr></tbody></table>';

}
return __p
};

/*
original source:

<table class="table table-striped" style="margin-bottom: 0px"><tbody><tr class="edit-mode"><th><span class="add-user action fa fa-plus-circle" style="margin-top: 6px; margin-left: 10px"></span></th><td style="width: 100%"><select class="username" name="username" style="width: 100%" data-allow-clear="true"></select></td></tr></tbody></table>
*/


/***/ }),
/* 725 */
/***/ (function(module, exports, __webpack_require__) {

/**
 * @file addgroup.js
 * @brief Add a user to a group collection
 * @author Frédéric SCHERMA (INRA UMR1095)
 * @date 2016-06-15
 * @copyright Copyright (c) 2016 INRA/CIRAD
 * @license MIT (see LICENSE file)
 * @details 
 */

let Marionette = __webpack_require__(1);

let View = Marionette.View.extend({
    tagName: 'div',
    className: 'group-add',
    template: __webpack_require__(726),

    ui: {
        add_group_btn: 'span.add-group',
        add_group_name: 'input.group-name',
    },

    events: {
        'click @ui.add_group_btn': 'addGroup',
        'input @ui.add_group_name': 'onGroupNameInput',
    },

    initialize: function(options) {
        options || (options = {});
        this.collection = options.collection;
    },

    addGroup: function () {
        let v = this.ui.add_group_name.val().trim();

        if (!this.ui.add_group_name.hasClass('invalid') && v.length) {
            this.collection.create({name: v}, {wait: true});
            $(this.ui.add_group_name).cleanField();
        }
    },

    validateGroupName: function() {
        let v = this.ui.add_group_name.val().trim();
        let re = /^[a-zA-Z0-9_\-]+$/i;

        if (v.length > 0 && !re.test(v)) {
            $(this.ui.add_group_name).validateField('failed', _t("Invalid characters (alphanumeric, _ and - only)"));
            return false;
        } else if (v.length < 3) {
            $(this.ui.add_group_name).validateField('failed', _t('characters_min', {count: 3}));
            return false;
        }

        return true;
    },

    onGroupNameInput: function () {
        if (this.validateGroupName()) {
            $.ajax({
                type: "GET",
                url: window.application.url(['permission', 'group', 'search']),
                dataType: 'json',
                data: {
                    filters: JSON.stringify({
                        method: 'ieq',
                        fields: 'name',
                        name: this.ui.add_group_name.val()
                    })
                },
                el: this.ui.add_group_name
            }).done(function(data) {
                if (data.items.length > 0) {
                    for (let i in data.items) {
                        let t = data.items[i];

                        if (t.value.toUpperCase() === this.el.val().toUpperCase()) {
                            $(this.el).validateField('failed', _t('Group name already in usage'));
                            break;
                        }
                    }
                } else {
                    $(this.el).validateField('ok');
                }
            });
        }
    },
});

module.exports = View;


/***/ }),
/* 726 */
/***/ (function(module, exports) {

underscore
module.exports = function (obj) {
obj || (obj = {});
var __t, __p = '';
with (obj) {
__p += '<table class="table table-striped" style="margin-bottom: 0px"><tbody><tr class="edit-mode" style="height: 80px"><th><span class="add-group action fa fa-plus-circle fa-lg" style="padding-top: 1.0rem; padding-left: 1.0rem"></span></th><td style="width: 100%"><div class="form-group form-group-margin-sm"><input type="text" class="group-name form-control" name="group" maxlength="80"></div></td></tr></tbody></table>';

}
return __p
};

/*
original source:

<table class="table table-striped" style="margin-bottom: 0px"><tbody><tr class="edit-mode" style="height: 80px"><th><span class="add-group action fa fa-plus-circle fa-lg" style="padding-top: 1.0rem; padding-left: 1.0rem"></span></th><td style="width: 100%"><div class="form-group form-group-margin-sm"><input type="text" class="group-name form-control" name="group" maxlength="80"></div></td></tr></tbody></table>
*/


/***/ })
/******/ ]);
//# sourceMappingURL=app.js.map